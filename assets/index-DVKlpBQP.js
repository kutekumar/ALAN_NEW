var rw=t=>{throw TypeError(t)};var c1=(t,e,r)=>e.has(t)||rw("Cannot "+r);var le=(t,e,r)=>(c1(t,e,"read from private field"),r?r.call(t):e.get(t)),xt=(t,e,r)=>e.has(t)?rw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),qe=(t,e,r,n)=>(c1(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Gr=(t,e,r)=>(c1(t,e,"access private method"),r);var Wd=(t,e,r,n)=>({set _(s){qe(t,e,s,r)},get _(){return le(t,e,n)}});function pg(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function A_(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var N_={exports:{}},Qh={},T_={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xd=Symbol.for("react.element"),W4=Symbol.for("react.portal"),G4=Symbol.for("react.fragment"),Y4=Symbol.for("react.strict_mode"),X4=Symbol.for("react.profiler"),q4=Symbol.for("react.provider"),K4=Symbol.for("react.context"),Q4=Symbol.for("react.forward_ref"),Z4=Symbol.for("react.suspense"),J4=Symbol.for("react.memo"),eR=Symbol.for("react.lazy"),nw=Symbol.iterator;function tR(t){return t===null||typeof t!="object"?null:(t=nw&&t[nw]||t["@@iterator"],typeof t=="function"?t:null)}var I_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,O_={};function Sc(t,e,r){this.props=t,this.context=e,this.refs=O_,this.updater=r||I_}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M_(){}M_.prototype=Sc.prototype;function gg(t,e,r){this.props=t,this.context=e,this.refs=O_,this.updater=r||I_}var xg=gg.prototype=new M_;xg.constructor=gg;R_(xg,Sc.prototype);xg.isPureReactComponent=!0;var sw=Array.isArray,k_=Object.prototype.hasOwnProperty,yg={current:null},P_={key:!0,ref:!0,__self:!0,__source:!0};function j_(t,e,r){var n,s={},o=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)k_.call(e,n)&&!P_.hasOwnProperty(n)&&(s[n]=e[n]);var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];s.children=h}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)s[n]===void 0&&(s[n]=u[n]);return{$$typeof:xd,type:t,key:o,ref:l,props:s,_owner:yg.current}}function rR(t,e){return{$$typeof:xd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wg(t){return typeof t=="object"&&t!==null&&t.$$typeof===xd}function nR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var iw=/\/+/g;function u1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nR(""+t.key):e.toString(36)}function If(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case xd:case W4:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+u1(l,0):n,sw(s)?(r="",t!=null&&(r=t.replace(iw,"$&/")+"/"),If(s,e,r,"",function(f){return f})):s!=null&&(wg(s)&&(s=rR(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(iw,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",sw(t))for(var u=0;u<t.length;u++){o=t[u];var h=n+u1(o,u);l+=If(o,e,r,h,s)}else if(h=tR(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=n+u1(o,u++),l+=If(o,e,r,h,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Gd(t,e,r){if(t==null)return t;var n=[],s=0;return If(t,n,"","",function(o){return e.call(r,o,s++)}),n}function sR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Rf={transition:null},iR={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Rf,ReactCurrentOwner:yg};function D_(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Gd,forEach:function(t,e,r){Gd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Gd(t,function(){e++}),e},toArray:function(t){return Gd(t,function(e){return e})||[]},only:function(t){if(!wg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};at.Component=Sc;at.Fragment=G4;at.Profiler=X4;at.PureComponent=gg;at.StrictMode=Y4;at.Suspense=Z4;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iR;at.act=D_;at.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=R_({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=yg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)k_.call(e,h)&&!P_.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];n.children=u}return{$$typeof:xd,type:t.type,key:s,ref:o,props:n,_owner:l}};at.createContext=function(t){return t={$$typeof:K4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:q4,_context:t},t.Consumer=t};at.createElement=j_;at.createFactory=function(t){var e=j_.bind(null,t);return e.type=t,e};at.createRef=function(){return{current:null}};at.forwardRef=function(t){return{$$typeof:Q4,render:t}};at.isValidElement=wg;at.lazy=function(t){return{$$typeof:eR,_payload:{_status:-1,_result:t},_init:sR}};at.memo=function(t,e){return{$$typeof:J4,type:t,compare:e===void 0?null:e}};at.startTransition=function(t){var e=Rf.transition;Rf.transition={};try{t()}finally{Rf.transition=e}};at.unstable_act=D_;at.useCallback=function(t,e){return dn.current.useCallback(t,e)};at.useContext=function(t){return dn.current.useContext(t)};at.useDebugValue=function(){};at.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};at.useEffect=function(t,e){return dn.current.useEffect(t,e)};at.useId=function(){return dn.current.useId()};at.useImperativeHandle=function(t,e,r){return dn.current.useImperativeHandle(t,e,r)};at.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};at.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};at.useMemo=function(t,e){return dn.current.useMemo(t,e)};at.useReducer=function(t,e,r){return dn.current.useReducer(t,e,r)};at.useRef=function(t){return dn.current.useRef(t)};at.useState=function(t){return dn.current.useState(t)};at.useSyncExternalStore=function(t,e,r){return dn.current.useSyncExternalStore(t,e,r)};at.useTransition=function(){return dn.current.useTransition()};at.version="18.3.1";T_.exports=at;var N=T_.exports;const fe=mg(N),vg=pg({__proto__:null,default:fe},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=N,aR=Symbol.for("react.element"),lR=Symbol.for("react.fragment"),cR=Object.prototype.hasOwnProperty,uR=oR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dR={key:!0,ref:!0,__self:!0,__source:!0};function L_(t,e,r){var n,s={},o=null,l=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)cR.call(e,n)&&!dR.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:aR,type:t,key:o,ref:l,props:s,_owner:uR.current}}Qh.Fragment=lR;Qh.jsx=L_;Qh.jsxs=L_;N_.exports=Qh;var p=N_.exports,B_={exports:{}},Jn={},F_={exports:{}},U_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,H){var te=Q.length;Q.push(H);e:for(;0<te;){var ce=te-1>>>1,ae=Q[ce];if(0<s(ae,H))Q[ce]=H,Q[te]=ae,te=ce;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var H=Q[0],te=Q.pop();if(te!==H){Q[0]=te;e:for(var ce=0,ae=Q.length,oe=ae>>>1;ce<oe;){var ue=2*(ce+1)-1,ke=Q[ue],ye=ue+1,_e=Q[ye];if(0>s(ke,te))ye<ae&&0>s(_e,ke)?(Q[ce]=_e,Q[ye]=te,ce=ye):(Q[ce]=ke,Q[ue]=te,ce=ue);else if(ye<ae&&0>s(_e,te))Q[ce]=_e,Q[ye]=te,ce=ye;else break e}}return H}function s(Q,H){var te=Q.sortIndex-H.sortIndex;return te!==0?te:Q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],f=[],x=1,y=null,v=3,b=!1,A=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Q){for(var H=r(f);H!==null;){if(H.callback===null)n(f);else if(H.startTime<=Q)n(f),H.sortIndex=H.expirationTime,e(h,H);else break;H=r(f)}}function O(Q){if(E=!1,S(Q),!A)if(r(h)!==null)A=!0,re(k);else{var H=r(f);H!==null&&Z(O,H.startTime-Q)}}function k(Q,H){A=!1,E&&(E=!1,R(P),P=-1),b=!0;var te=v;try{for(S(H),y=r(h);y!==null&&(!(y.expirationTime>H)||Q&&!q());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,v=y.priorityLevel;var ae=ce(y.expirationTime<=H);H=t.unstable_now(),typeof ae=="function"?y.callback=ae:y===r(h)&&n(h),S(H)}else n(h);y=r(h)}if(y!==null)var oe=!0;else{var ue=r(f);ue!==null&&Z(O,ue.startTime-H),oe=!1}return oe}finally{y=null,v=te,b=!1}}var F=!1,B=null,P=-1,L=5,W=-1;function q(){return!(t.unstable_now()-W<L)}function K(){if(B!==null){var Q=t.unstable_now();W=Q;var H=!0;try{H=B(!0,Q)}finally{H?ie():(F=!1,B=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,$=G.port2;G.port1.onmessage=K,ie=function(){$.postMessage(null)}}else ie=function(){I(K,0)};function re(Q){B=Q,F||(F=!0,ie())}function Z(Q,H){P=I(function(){Q(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){A||b||(A=!0,re(k))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var te=v;v=H;try{return Q()}finally{v=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,H){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var te=v;v=Q;try{return H()}finally{v=te}},t.unstable_scheduleCallback=function(Q,H,te){var ce=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,Q){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=te+ae,Q={id:x++,callback:H,priorityLevel:Q,startTime:te,expirationTime:ae,sortIndex:-1},te>ce?(Q.sortIndex=te,e(f,Q),r(h)===null&&Q===r(f)&&(E?(R(P),P=-1):E=!0,Z(O,te-ce))):(Q.sortIndex=ae,e(h,Q),A||b||(A=!0,re(k))),Q},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(Q){var H=v;return function(){var te=v;v=H;try{return Q.apply(this,arguments)}finally{v=te}}}})(U_);F_.exports=U_;var fR=F_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR=N,Kn=fR;function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z_=new Set,ku={};function Ya(t,e){ac(t,e),ac(t+"Capture",e)}function ac(t,e){for(ku[t]=e,t=0;t<e.length;t++)z_.add(e[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=Object.prototype.hasOwnProperty,pR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},aw={};function mR(t){return xp.call(aw,t)?!0:xp.call(ow,t)?!1:pR.test(t)?aw[t]=!0:(ow[t]=!0,!1)}function gR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xR(t,e,r,n){if(e===null||typeof e>"u"||gR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,r,n,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var _g=/[\-:]([a-z])/g;function bg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_g,bg);Hr[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_g,bg);Hr[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_g,bg);Hr[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Eg(t,e,r,n){var s=Hr.hasOwnProperty(e)?Hr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xR(e,r,s,n)&&(r=null),n||s===null?mR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var qi=hR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yd=Symbol.for("react.element"),Cl=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),V_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),Sg=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),Ag=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),$_=Symbol.for("react.offscreen"),lw=Symbol.iterator;function Kc(t){return t===null||typeof t!="object"?null:(t=lw&&t[lw]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,d1;function lu(t){if(d1===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);d1=e&&e[1]||""}return`
`+d1+t}var f1=!1;function h1(t,e){if(!t||f1)return"";f1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var n=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){n=f}t.call(e.prototype)}else{try{throw Error()}catch(f){n=f}t()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=n.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=u);break}}}finally{f1=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?lu(t):""}function yR(t){switch(t.tag){case 5:return lu(t.type);case 16:return lu("Lazy");case 13:return lu("Suspense");case 19:return lu("SuspenseList");case 0:case 2:case 15:return t=h1(t.type,!1),t;case 11:return t=h1(t.type.render,!1),t;case 1:return t=h1(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sl:return"Fragment";case Cl:return"Portal";case yp:return"Profiler";case Cg:return"StrictMode";case wp:return"Suspense";case vp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H_:return(t.displayName||"Context")+".Consumer";case V_:return(t._context.displayName||"Context")+".Provider";case Sg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ag:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function wR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vR(t){var e=W_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xd(t){t._valueTracker||(t._valueTracker=vR(t))}function G_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=W_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bp(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Lo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y_(t,e){e=e.checked,e!=null&&Eg(t,"checked",e,!1)}function Ep(t,e){Y_(t,e);var r=Lo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Cp(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uw(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Cp(t,e,r){(e!=="number"||qf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var cu=Array.isArray;function Ul(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Lo(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(me(92));if(cu(r)){if(1<r.length)throw Error(me(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Lo(r)}}function X_(t,e){var r=Lo(e.value),n=Lo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function fw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ap(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qd,K_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qd=qd||document.createElement("div"),qd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_R=["Webkit","ms","Moz","O"];Object.keys(xu).forEach(function(t){_R.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xu[e]=xu[t]})});function Q_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xu.hasOwnProperty(t)&&xu[t]?(""+e).trim():e+"px"}function Z_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Q_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var bR=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Np(t,e){if(e){if(bR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function Tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rp=null,zl=null,Vl=null;function hw(t){if(t=vd(t)){if(typeof Rp!="function")throw Error(me(280));var e=t.stateNode;e&&(e=r0(e),Rp(t.stateNode,t.type,e))}}function J_(t){zl?Vl?Vl.push(t):Vl=[t]:zl=t}function eb(){if(zl){var t=zl,e=Vl;if(Vl=zl=null,hw(t),e)for(t=0;t<e.length;t++)hw(e[t])}}function tb(t,e){return t(e)}function rb(){}var p1=!1;function nb(t,e,r){if(p1)return t(e,r);p1=!0;try{return tb(t,e,r)}finally{p1=!1,(zl!==null||Vl!==null)&&(rb(),eb())}}function ju(t,e){var r=t.stateNode;if(r===null)return null;var n=r0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(me(231,e,typeof r));return r}var Op=!1;if(Bi)try{var Qc={};Object.defineProperty(Qc,"passive",{get:function(){Op=!0}}),window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{Op=!1}function ER(t,e,r,n,s,o,l,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(r,f)}catch(x){this.onError(x)}}var yu=!1,Kf=null,Qf=!1,Mp=null,CR={onError:function(t){yu=!0,Kf=t}};function SR(t,e,r,n,s,o,l,u,h){yu=!1,Kf=null,ER.apply(CR,arguments)}function AR(t,e,r,n,s,o,l,u,h){if(SR.apply(this,arguments),yu){if(yu){var f=Kf;yu=!1,Kf=null}else throw Error(me(198));Qf||(Qf=!0,Mp=f)}}function Xa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pw(t){if(Xa(t)!==t)throw Error(me(188))}function NR(t){var e=t.alternate;if(!e){if(e=Xa(t),e===null)throw Error(me(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return pw(s),t;if(o===n)return pw(s),e;o=o.sibling}throw Error(me(188))}if(r.return!==n.return)r=s,n=o;else{for(var l=!1,u=s.child;u;){if(u===r){l=!0,r=s,n=o;break}if(u===n){l=!0,n=s,r=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===r){l=!0,r=o,n=s;break}if(u===n){l=!0,n=o,r=s;break}u=u.sibling}if(!l)throw Error(me(189))}}if(r.alternate!==n)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?t:e}function ib(t){return t=NR(t),t!==null?ob(t):null}function ob(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ob(t);if(e!==null)return e;t=t.sibling}return null}var ab=Kn.unstable_scheduleCallback,mw=Kn.unstable_cancelCallback,TR=Kn.unstable_shouldYield,IR=Kn.unstable_requestPaint,dr=Kn.unstable_now,RR=Kn.unstable_getCurrentPriorityLevel,Tg=Kn.unstable_ImmediatePriority,lb=Kn.unstable_UserBlockingPriority,Zf=Kn.unstable_NormalPriority,OR=Kn.unstable_LowPriority,cb=Kn.unstable_IdlePriority,Zh=null,fi=null;function MR(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Us=Math.clz32?Math.clz32:jR,kR=Math.log,PR=Math.LN2;function jR(t){return t>>>=0,t===0?32:31-(kR(t)/PR|0)|0}var Kd=64,Qd=4194304;function uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,l=r&268435455;if(l!==0){var u=l&~s;u!==0?n=uu(u):(o&=l,o!==0&&(n=uu(o)))}else l=r&~s,l!==0?n=uu(l):o!==0&&(n=uu(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Us(e),s=1<<r,n|=t[r],e&=~s;return n}function DR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Us(o),u=1<<l,h=s[l];h===-1?(!(u&r)||u&n)&&(s[l]=DR(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ub(){var t=Kd;return Kd<<=1,!(Kd&4194240)&&(Kd=64),t}function m1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function yd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Us(e),t[e]=r}function BR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Us(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function Ig(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Us(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Et=0;function db(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fb,Rg,hb,pb,mb,Pp=!1,Zd=[],Ao=null,No=null,To=null,Du=new Map,Lu=new Map,fo=[],FR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gw(t,e){switch(t){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(e.pointerId)}}function Zc(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=vd(e),e!==null&&Rg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UR(t,e,r,n,s){switch(e){case"focusin":return Ao=Zc(Ao,t,e,r,n,s),!0;case"dragenter":return No=Zc(No,t,e,r,n,s),!0;case"mouseover":return To=Zc(To,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return Du.set(o,Zc(Du.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Lu.set(o,Zc(Lu.get(o)||null,t,e,r,n,s)),!0}return!1}function gb(t){var e=xa(t.target);if(e!==null){var r=Xa(e);if(r!==null){if(e=r.tag,e===13){if(e=sb(r),e!==null){t.blockedOn=e,mb(t.priority,function(){hb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Of(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=jp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ip=n,r.target.dispatchEvent(n),Ip=null}else return e=vd(r),e!==null&&Rg(e),t.blockedOn=r,!1;e.shift()}return!0}function xw(t,e,r){Of(t)&&r.delete(e)}function zR(){Pp=!1,Ao!==null&&Of(Ao)&&(Ao=null),No!==null&&Of(No)&&(No=null),To!==null&&Of(To)&&(To=null),Du.forEach(xw),Lu.forEach(xw)}function Jc(t,e){t.blockedOn===e&&(t.blockedOn=null,Pp||(Pp=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,zR)))}function Bu(t){function e(s){return Jc(s,t)}if(0<Zd.length){Jc(Zd[0],t);for(var r=1;r<Zd.length;r++){var n=Zd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ao!==null&&Jc(Ao,t),No!==null&&Jc(No,t),To!==null&&Jc(To,t),Du.forEach(e),Lu.forEach(e),r=0;r<fo.length;r++)n=fo[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<fo.length&&(r=fo[0],r.blockedOn===null);)gb(r),r.blockedOn===null&&fo.shift()}var Hl=qi.ReactCurrentBatchConfig,eh=!0;function VR(t,e,r,n){var s=Et,o=Hl.transition;Hl.transition=null;try{Et=1,Og(t,e,r,n)}finally{Et=s,Hl.transition=o}}function HR(t,e,r,n){var s=Et,o=Hl.transition;Hl.transition=null;try{Et=4,Og(t,e,r,n)}finally{Et=s,Hl.transition=o}}function Og(t,e,r,n){if(eh){var s=jp(t,e,r,n);if(s===null)S1(t,e,n,th,r),gw(t,n);else if(UR(s,t,e,r,n))n.stopPropagation();else if(gw(t,n),e&4&&-1<FR.indexOf(t)){for(;s!==null;){var o=vd(s);if(o!==null&&fb(o),o=jp(t,e,r,n),o===null&&S1(t,e,n,th,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else S1(t,e,n,null,r)}}var th=null;function jp(t,e,r,n){if(th=null,t=Ng(n),t=xa(t),t!==null)if(e=Xa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=sb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return th=t,null}function xb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RR()){case Tg:return 1;case lb:return 4;case Zf:case OR:return 16;case cb:return 536870912;default:return 16}default:return 16}}var vo=null,Mg=null,Mf=null;function yb(){if(Mf)return Mf;var t,e=Mg,r=e.length,n,s="value"in vo?vo.value:vo.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===s[o-n];n++);return Mf=s.slice(t,1<n?1-n:void 0)}function kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jd(){return!0}function yw(){return!1}function es(t){function e(r,n,s,o,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Jd:yw,this.isPropagationStopped=yw,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Jd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Jd)},persist:function(){},isPersistent:Jd}),e}var Ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=es(Ac),wd=Qt({},Ac,{view:0,detail:0}),$R=es(wd),g1,x1,eu,Jh=Qt({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eu&&(eu&&t.type==="mousemove"?(g1=t.screenX-eu.screenX,x1=t.screenY-eu.screenY):x1=g1=0,eu=t),g1)},movementY:function(t){return"movementY"in t?t.movementY:x1}}),ww=es(Jh),WR=Qt({},Jh,{dataTransfer:0}),GR=es(WR),YR=Qt({},wd,{relatedTarget:0}),y1=es(YR),XR=Qt({},Ac,{animationName:0,elapsedTime:0,pseudoElement:0}),qR=es(XR),KR=Qt({},Ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QR=es(KR),ZR=Qt({},Ac,{data:0}),vw=es(ZR),JR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tO[t])?!!e[t]:!1}function Pg(){return rO}var nO=Qt({},wd,{key:function(t){if(t.key){var e=JR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pg,charCode:function(t){return t.type==="keypress"?kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sO=es(nO),iO=Qt({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_w=es(iO),oO=Qt({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pg}),aO=es(oO),lO=Qt({},Ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),cO=es(lO),uO=Qt({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dO=es(uO),fO=[9,13,27,32],jg=Bi&&"CompositionEvent"in window,wu=null;Bi&&"documentMode"in document&&(wu=document.documentMode);var hO=Bi&&"TextEvent"in window&&!wu,wb=Bi&&(!jg||wu&&8<wu&&11>=wu),bw=" ",Ew=!1;function vb(t,e){switch(t){case"keyup":return fO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _b(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Al=!1;function pO(t,e){switch(t){case"compositionend":return _b(e);case"keypress":return e.which!==32?null:(Ew=!0,bw);case"textInput":return t=e.data,t===bw&&Ew?null:t;default:return null}}function mO(t,e){if(Al)return t==="compositionend"||!jg&&vb(t,e)?(t=yb(),Mf=Mg=vo=null,Al=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wb&&e.locale!=="ko"?null:e.data;default:return null}}var gO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gO[t.type]:e==="textarea"}function bb(t,e,r,n){J_(n),e=rh(e,"onChange"),0<e.length&&(r=new kg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vu=null,Fu=null;function xO(t){kb(t,0)}function e0(t){var e=Il(t);if(G_(e))return t}function yO(t,e){if(t==="change")return e}var Eb=!1;if(Bi){var w1;if(Bi){var v1="oninput"in document;if(!v1){var Sw=document.createElement("div");Sw.setAttribute("oninput","return;"),v1=typeof Sw.oninput=="function"}w1=v1}else w1=!1;Eb=w1&&(!document.documentMode||9<document.documentMode)}function Aw(){vu&&(vu.detachEvent("onpropertychange",Cb),Fu=vu=null)}function Cb(t){if(t.propertyName==="value"&&e0(Fu)){var e=[];bb(e,Fu,t,Ng(t)),nb(xO,e)}}function wO(t,e,r){t==="focusin"?(Aw(),vu=e,Fu=r,vu.attachEvent("onpropertychange",Cb)):t==="focusout"&&Aw()}function vO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return e0(Fu)}function _O(t,e){if(t==="click")return e0(e)}function bO(t,e){if(t==="input"||t==="change")return e0(e)}function EO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $s=typeof Object.is=="function"?Object.is:EO;function Uu(t,e){if($s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xp.call(e,s)||!$s(t[s],e[s]))return!1}return!0}function Nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tw(t,e){var r=Nw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Nw(r)}}function Sb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ab(){for(var t=window,e=qf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=qf(t.document)}return e}function Dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CO(t){var e=Ab(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Sb(r.ownerDocument.documentElement,r)){if(n!==null&&Dg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Tw(r,o);var l=Tw(r,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SO=Bi&&"documentMode"in document&&11>=document.documentMode,Nl=null,Dp=null,_u=null,Lp=!1;function Iw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lp||Nl==null||Nl!==qf(n)||(n=Nl,"selectionStart"in n&&Dg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_u&&Uu(_u,n)||(_u=n,n=rh(Dp,"onSelect"),0<n.length&&(e=new kg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Nl)))}function ef(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Tl={animationend:ef("Animation","AnimationEnd"),animationiteration:ef("Animation","AnimationIteration"),animationstart:ef("Animation","AnimationStart"),transitionend:ef("Transition","TransitionEnd")},_1={},Nb={};Bi&&(Nb=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function t0(t){if(_1[t])return _1[t];if(!Tl[t])return t;var e=Tl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Nb)return _1[t]=e[r];return t}var Tb=t0("animationend"),Ib=t0("animationiteration"),Rb=t0("animationstart"),Ob=t0("transitionend"),Mb=new Map,Rw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(t,e){Mb.set(t,e),Ya(e,[t])}for(var b1=0;b1<Rw.length;b1++){var E1=Rw[b1],AO=E1.toLowerCase(),NO=E1[0].toUpperCase()+E1.slice(1);$o(AO,"on"+NO)}$o(Tb,"onAnimationEnd");$o(Ib,"onAnimationIteration");$o(Rb,"onAnimationStart");$o("dblclick","onDoubleClick");$o("focusin","onFocus");$o("focusout","onBlur");$o(Ob,"onTransitionEnd");ac("onMouseEnter",["mouseout","mouseover"]);ac("onMouseLeave",["mouseout","mouseover"]);ac("onPointerEnter",["pointerout","pointerover"]);ac("onPointerLeave",["pointerout","pointerover"]);Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TO=new Set("cancel close invalid load scroll toggle".split(" ").concat(du));function Ow(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AR(n,e,void 0,t),t.currentTarget=null}function kb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var l=n.length-1;0<=l;l--){var u=n[l],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;Ow(s,u,f),o=h}else for(l=0;l<n.length;l++){if(u=n[l],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;Ow(s,u,f),o=h}}}if(Qf)throw t=Mp,Qf=!1,Mp=null,t}function jt(t,e){var r=e[Vp];r===void 0&&(r=e[Vp]=new Set);var n=t+"__bubble";r.has(n)||(Pb(e,t,2,!1),r.add(n))}function C1(t,e,r){var n=0;e&&(n|=4),Pb(r,t,n,e)}var tf="_reactListening"+Math.random().toString(36).slice(2);function zu(t){if(!t[tf]){t[tf]=!0,z_.forEach(function(r){r!=="selectionchange"&&(TO.has(r)||C1(r,!1,t),C1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tf]||(e[tf]=!0,C1("selectionchange",!1,e))}}function Pb(t,e,r,n){switch(xb(e)){case 1:var s=VR;break;case 4:s=HR;break;default:s=Og}r=s.bind(null,e,r,t),s=void 0,!Op||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function S1(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var u=n.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=xa(u),l===null)return;if(h=l.tag,h===5||h===6){n=o=l;continue e}u=u.parentNode}}n=n.return}nb(function(){var f=o,x=Ng(r),y=[];e:{var v=Mb.get(t);if(v!==void 0){var b=kg,A=t;switch(t){case"keypress":if(kf(r)===0)break e;case"keydown":case"keyup":b=sO;break;case"focusin":A="focus",b=y1;break;case"focusout":A="blur",b=y1;break;case"beforeblur":case"afterblur":b=y1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=GR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=aO;break;case Tb:case Ib:case Rb:b=qR;break;case Ob:b=cO;break;case"scroll":b=$R;break;case"wheel":b=dO;break;case"copy":case"cut":case"paste":b=QR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=_w}var E=(e&4)!==0,I=!E&&t==="scroll",R=E?v!==null?v+"Capture":null:v;E=[];for(var C=f,S;C!==null;){S=C;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,R!==null&&(O=ju(C,R),O!=null&&E.push(Vu(C,O,S)))),I)break;C=C.return}0<E.length&&(v=new b(v,A,null,r,x),y.push({event:v,listeners:E}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&r!==Ip&&(A=r.relatedTarget||r.fromElement)&&(xa(A)||A[Fi]))break e;if((b||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,b?(A=r.relatedTarget||r.toElement,b=f,A=A?xa(A):null,A!==null&&(I=Xa(A),A!==I||A.tag!==5&&A.tag!==6)&&(A=null)):(b=null,A=f),b!==A)){if(E=ww,O="onMouseLeave",R="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(E=_w,O="onPointerLeave",R="onPointerEnter",C="pointer"),I=b==null?v:Il(b),S=A==null?v:Il(A),v=new E(O,C+"leave",b,r,x),v.target=I,v.relatedTarget=S,O=null,xa(x)===f&&(E=new E(R,C+"enter",A,r,x),E.target=S,E.relatedTarget=I,O=E),I=O,b&&A)t:{for(E=b,R=A,C=0,S=E;S;S=fl(S))C++;for(S=0,O=R;O;O=fl(O))S++;for(;0<C-S;)E=fl(E),C--;for(;0<S-C;)R=fl(R),S--;for(;C--;){if(E===R||R!==null&&E===R.alternate)break t;E=fl(E),R=fl(R)}E=null}else E=null;b!==null&&Mw(y,v,b,E,!1),A!==null&&I!==null&&Mw(y,I,A,E,!0)}}e:{if(v=f?Il(f):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var k=yO;else if(Cw(v))if(Eb)k=bO;else{k=vO;var F=wO}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(k=_O);if(k&&(k=k(t,f))){bb(y,k,r,x);break e}F&&F(t,v,f),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&Cp(v,"number",v.value)}switch(F=f?Il(f):window,t){case"focusin":(Cw(F)||F.contentEditable==="true")&&(Nl=F,Dp=f,_u=null);break;case"focusout":_u=Dp=Nl=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,Iw(y,r,x);break;case"selectionchange":if(SO)break;case"keydown":case"keyup":Iw(y,r,x)}var B;if(jg)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Al?vb(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(wb&&r.locale!=="ko"&&(Al||P!=="onCompositionStart"?P==="onCompositionEnd"&&Al&&(B=yb()):(vo=x,Mg="value"in vo?vo.value:vo.textContent,Al=!0)),F=rh(f,P),0<F.length&&(P=new vw(P,t,null,r,x),y.push({event:P,listeners:F}),B?P.data=B:(B=_b(r),B!==null&&(P.data=B)))),(B=hO?pO(t,r):mO(t,r))&&(f=rh(f,"onBeforeInput"),0<f.length&&(x=new vw("onBeforeInput","beforeinput",null,r,x),y.push({event:x,listeners:f}),x.data=B))}kb(y,e)})}function Vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function rh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ju(t,r),o!=null&&n.unshift(Vu(t,o,s)),o=ju(t,e),o!=null&&n.push(Vu(t,o,s))),t=t.return}return n}function fl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mw(t,e,r,n,s){for(var o=e._reactName,l=[];r!==null&&r!==n;){var u=r,h=u.alternate,f=u.stateNode;if(h!==null&&h===n)break;u.tag===5&&f!==null&&(u=f,s?(h=ju(r,o),h!=null&&l.unshift(Vu(r,h,u))):s||(h=ju(r,o),h!=null&&l.push(Vu(r,h,u)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var IO=/\r\n?/g,RO=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(IO,`
`).replace(RO,"")}function rf(t,e,r){if(e=kw(e),kw(t)!==e&&r)throw Error(me(425))}function nh(){}var Bp=null,Fp=null;function Up(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zp=typeof setTimeout=="function"?setTimeout:void 0,OO=typeof clearTimeout=="function"?clearTimeout:void 0,Pw=typeof Promise=="function"?Promise:void 0,MO=typeof queueMicrotask=="function"?queueMicrotask:typeof Pw<"u"?function(t){return Pw.resolve(null).then(t).catch(kO)}:zp;function kO(t){setTimeout(function(){throw t})}function A1(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Bu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Bu(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),li="__reactFiber$"+Nc,Hu="__reactProps$"+Nc,Fi="__reactContainer$"+Nc,Vp="__reactEvents$"+Nc,PO="__reactListeners$"+Nc,jO="__reactHandles$"+Nc;function xa(t){var e=t[li];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Fi]||r[li]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=jw(t);t!==null;){if(r=t[li])return r;t=jw(t)}return e}t=r,r=t.parentNode}return null}function vd(t){return t=t[li]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Il(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function r0(t){return t[Hu]||null}var Hp=[],Rl=-1;function Wo(t){return{current:t}}function Lt(t){0>Rl||(t.current=Hp[Rl],Hp[Rl]=null,Rl--)}function Mt(t,e){Rl++,Hp[Rl]=t.current,t.current=e}var Bo={},en=Wo(Bo),En=Wo(!1),ja=Bo;function lc(t,e){var r=t.type.contextTypes;if(!r)return Bo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Cn(t){return t=t.childContextTypes,t!=null}function sh(){Lt(En),Lt(en)}function Dw(t,e,r){if(en.current!==Bo)throw Error(me(168));Mt(en,e),Mt(En,r)}function jb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(me(108,wR(t)||"Unknown",s));return Qt({},r,n)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bo,ja=en.current,Mt(en,t),Mt(En,En.current),!0}function Lw(t,e,r){var n=t.stateNode;if(!n)throw Error(me(169));r?(t=jb(t,e,ja),n.__reactInternalMemoizedMergedChildContext=t,Lt(En),Lt(en),Mt(en,t)):Lt(En),Mt(En,r)}var Ri=null,n0=!1,N1=!1;function Db(t){Ri===null?Ri=[t]:Ri.push(t)}function DO(t){n0=!0,Db(t)}function Go(){if(!N1&&Ri!==null){N1=!0;var t=0,e=Et;try{var r=Ri;for(Et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ri=null,n0=!1}catch(s){throw Ri!==null&&(Ri=Ri.slice(t+1)),ab(Tg,Go),s}finally{Et=e,N1=!1}}return null}var Ol=[],Ml=0,oh=null,ah=0,ls=[],cs=0,Da=null,ki=1,Pi="";function da(t,e){Ol[Ml++]=ah,Ol[Ml++]=oh,oh=t,ah=e}function Lb(t,e,r){ls[cs++]=ki,ls[cs++]=Pi,ls[cs++]=Da,Da=t;var n=ki;t=Pi;var s=32-Us(n)-1;n&=~(1<<s),r+=1;var o=32-Us(e)+s;if(30<o){var l=s-s%5;o=(n&(1<<l)-1).toString(32),n>>=l,s-=l,ki=1<<32-Us(e)+s|r<<s|n,Pi=o+t}else ki=1<<o|r<<s|n,Pi=t}function Lg(t){t.return!==null&&(da(t,1),Lb(t,1,0))}function Bg(t){for(;t===oh;)oh=Ol[--Ml],Ol[Ml]=null,ah=Ol[--Ml],Ol[Ml]=null;for(;t===Da;)Da=ls[--cs],ls[cs]=null,Pi=ls[--cs],ls[cs]=null,ki=ls[--cs],ls[cs]=null}var Yn=null,Hn=null,Vt=!1,Bs=null;function Bb(t,e){var r=ds(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Bw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yn=t,Hn=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yn=t,Hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Da!==null?{id:ki,overflow:Pi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ds(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Yn=t,Hn=null,!0):!1;default:return!1}}function $p(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wp(t){if(Vt){var e=Hn;if(e){var r=e;if(!Bw(t,e)){if($p(t))throw Error(me(418));e=Io(r.nextSibling);var n=Yn;e&&Bw(t,e)?Bb(n,r):(t.flags=t.flags&-4097|2,Vt=!1,Yn=t)}}else{if($p(t))throw Error(me(418));t.flags=t.flags&-4097|2,Vt=!1,Yn=t}}}function Fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yn=t}function nf(t){if(t!==Yn)return!1;if(!Vt)return Fw(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Up(t.type,t.memoizedProps)),e&&(e=Hn)){if($p(t))throw Fb(),Error(me(418));for(;e;)Bb(t,e),e=Io(e.nextSibling)}if(Fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Hn=Io(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Hn=null}}else Hn=Yn?Io(t.stateNode.nextSibling):null;return!0}function Fb(){for(var t=Hn;t;)t=Io(t.nextSibling)}function cc(){Hn=Yn=null,Vt=!1}function Fg(t){Bs===null?Bs=[t]:Bs.push(t)}var LO=qi.ReactCurrentBatchConfig;function tu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var n=r.stateNode}if(!n)throw Error(me(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,t))}return t}function sf(t,e){throw t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uw(t){var e=t._init;return e(t._payload)}function Ub(t){function e(R,C){if(t){var S=R.deletions;S===null?(R.deletions=[C],R.flags|=16):S.push(C)}}function r(R,C){if(!t)return null;for(;C!==null;)e(R,C),C=C.sibling;return null}function n(R,C){for(R=new Map;C!==null;)C.key!==null?R.set(C.key,C):R.set(C.index,C),C=C.sibling;return R}function s(R,C){return R=ko(R,C),R.index=0,R.sibling=null,R}function o(R,C,S){return R.index=S,t?(S=R.alternate,S!==null?(S=S.index,S<C?(R.flags|=2,C):S):(R.flags|=2,C)):(R.flags|=1048576,C)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,C,S,O){return C===null||C.tag!==6?(C=P1(S,R.mode,O),C.return=R,C):(C=s(C,S),C.return=R,C)}function h(R,C,S,O){var k=S.type;return k===Sl?x(R,C,S.props.children,O,S.key):C!==null&&(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&Uw(k)===C.type)?(O=s(C,S.props),O.ref=tu(R,C,S),O.return=R,O):(O=Uf(S.type,S.key,S.props,null,R.mode,O),O.ref=tu(R,C,S),O.return=R,O)}function f(R,C,S,O){return C===null||C.tag!==4||C.stateNode.containerInfo!==S.containerInfo||C.stateNode.implementation!==S.implementation?(C=j1(S,R.mode,O),C.return=R,C):(C=s(C,S.children||[]),C.return=R,C)}function x(R,C,S,O,k){return C===null||C.tag!==7?(C=Ia(S,R.mode,O,k),C.return=R,C):(C=s(C,S),C.return=R,C)}function y(R,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return C=P1(""+C,R.mode,S),C.return=R,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Yd:return S=Uf(C.type,C.key,C.props,null,R.mode,S),S.ref=tu(R,null,C),S.return=R,S;case Cl:return C=j1(C,R.mode,S),C.return=R,C;case co:var O=C._init;return y(R,O(C._payload),S)}if(cu(C)||Kc(C))return C=Ia(C,R.mode,S,null),C.return=R,C;sf(R,C)}return null}function v(R,C,S,O){var k=C!==null?C.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:u(R,C,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yd:return S.key===k?h(R,C,S,O):null;case Cl:return S.key===k?f(R,C,S,O):null;case co:return k=S._init,v(R,C,k(S._payload),O)}if(cu(S)||Kc(S))return k!==null?null:x(R,C,S,O,null);sf(R,S)}return null}function b(R,C,S,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return R=R.get(S)||null,u(C,R,""+O,k);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Yd:return R=R.get(O.key===null?S:O.key)||null,h(C,R,O,k);case Cl:return R=R.get(O.key===null?S:O.key)||null,f(C,R,O,k);case co:var F=O._init;return b(R,C,S,F(O._payload),k)}if(cu(O)||Kc(O))return R=R.get(S)||null,x(C,R,O,k,null);sf(C,O)}return null}function A(R,C,S,O){for(var k=null,F=null,B=C,P=C=0,L=null;B!==null&&P<S.length;P++){B.index>P?(L=B,B=null):L=B.sibling;var W=v(R,B,S[P],O);if(W===null){B===null&&(B=L);break}t&&B&&W.alternate===null&&e(R,B),C=o(W,C,P),F===null?k=W:F.sibling=W,F=W,B=L}if(P===S.length)return r(R,B),Vt&&da(R,P),k;if(B===null){for(;P<S.length;P++)B=y(R,S[P],O),B!==null&&(C=o(B,C,P),F===null?k=B:F.sibling=B,F=B);return Vt&&da(R,P),k}for(B=n(R,B);P<S.length;P++)L=b(B,R,P,S[P],O),L!==null&&(t&&L.alternate!==null&&B.delete(L.key===null?P:L.key),C=o(L,C,P),F===null?k=L:F.sibling=L,F=L);return t&&B.forEach(function(q){return e(R,q)}),Vt&&da(R,P),k}function E(R,C,S,O){var k=Kc(S);if(typeof k!="function")throw Error(me(150));if(S=k.call(S),S==null)throw Error(me(151));for(var F=k=null,B=C,P=C=0,L=null,W=S.next();B!==null&&!W.done;P++,W=S.next()){B.index>P?(L=B,B=null):L=B.sibling;var q=v(R,B,W.value,O);if(q===null){B===null&&(B=L);break}t&&B&&q.alternate===null&&e(R,B),C=o(q,C,P),F===null?k=q:F.sibling=q,F=q,B=L}if(W.done)return r(R,B),Vt&&da(R,P),k;if(B===null){for(;!W.done;P++,W=S.next())W=y(R,W.value,O),W!==null&&(C=o(W,C,P),F===null?k=W:F.sibling=W,F=W);return Vt&&da(R,P),k}for(B=n(R,B);!W.done;P++,W=S.next())W=b(B,R,P,W.value,O),W!==null&&(t&&W.alternate!==null&&B.delete(W.key===null?P:W.key),C=o(W,C,P),F===null?k=W:F.sibling=W,F=W);return t&&B.forEach(function(K){return e(R,K)}),Vt&&da(R,P),k}function I(R,C,S,O){if(typeof S=="object"&&S!==null&&S.type===Sl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Yd:e:{for(var k=S.key,F=C;F!==null;){if(F.key===k){if(k=S.type,k===Sl){if(F.tag===7){r(R,F.sibling),C=s(F,S.props.children),C.return=R,R=C;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&Uw(k)===F.type){r(R,F.sibling),C=s(F,S.props),C.ref=tu(R,F,S),C.return=R,R=C;break e}r(R,F);break}else e(R,F);F=F.sibling}S.type===Sl?(C=Ia(S.props.children,R.mode,O,S.key),C.return=R,R=C):(O=Uf(S.type,S.key,S.props,null,R.mode,O),O.ref=tu(R,C,S),O.return=R,R=O)}return l(R);case Cl:e:{for(F=S.key;C!==null;){if(C.key===F)if(C.tag===4&&C.stateNode.containerInfo===S.containerInfo&&C.stateNode.implementation===S.implementation){r(R,C.sibling),C=s(C,S.children||[]),C.return=R,R=C;break e}else{r(R,C);break}else e(R,C);C=C.sibling}C=j1(S,R.mode,O),C.return=R,R=C}return l(R);case co:return F=S._init,I(R,C,F(S._payload),O)}if(cu(S))return A(R,C,S,O);if(Kc(S))return E(R,C,S,O);sf(R,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,C!==null&&C.tag===6?(r(R,C.sibling),C=s(C,S),C.return=R,R=C):(r(R,C),C=P1(S,R.mode,O),C.return=R,R=C),l(R)):r(R,C)}return I}var uc=Ub(!0),zb=Ub(!1),lh=Wo(null),ch=null,kl=null,Ug=null;function zg(){Ug=kl=ch=null}function Vg(t){var e=lh.current;Lt(lh),t._currentValue=e}function Gp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function $l(t,e){ch=t,Ug=kl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bn=!0),t.firstContext=null)}function ws(t){var e=t._currentValue;if(Ug!==t)if(t={context:t,memoizedValue:e,next:null},kl===null){if(ch===null)throw Error(me(308));kl=t,ch.dependencies={lanes:0,firstContext:t}}else kl=kl.next=t;return e}var ya=null;function Hg(t){ya===null?ya=[t]:ya.push(t)}function Vb(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Hg(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ui(t,n)}function Ui(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var uo=!1;function $g(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,mt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ui(t,r)}return s=n.interleaved,s===null?(e.next=e,Hg(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ui(t,r)}function Pf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ig(t,r)}}function zw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function uh(t,e,r,n){var s=t.updateQueue;uo=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var x=t.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==l&&(u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=h))}if(o!==null){var y=s.baseState;l=0,x=f=h=null,u=o;do{var v=u.lane,b=u.eventTime;if((n&v)===v){x!==null&&(x=x.next={eventTime:b,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,E=u;switch(v=e,b=r,E.tag){case 1:if(A=E.payload,typeof A=="function"){y=A.call(b,y,v);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=E.payload,v=typeof A=="function"?A.call(b,y,v):A,v==null)break e;y=Qt({},y,v);break e;case 2:uo=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else b={eventTime:b,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(f=x=b,h=y):x=x.next=b,l|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(x===null&&(h=y),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=x,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ba|=l,t.lanes=l,t.memoizedState=y}}function Vw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(me(191,s));s.call(n)}}}var _d={},hi=Wo(_d),$u=Wo(_d),Wu=Wo(_d);function wa(t){if(t===_d)throw Error(me(174));return t}function Wg(t,e){switch(Mt(Wu,e),Mt($u,t),Mt(hi,_d),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ap(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ap(e,t)}Lt(hi),Mt(hi,e)}function dc(){Lt(hi),Lt($u),Lt(Wu)}function $b(t){wa(Wu.current);var e=wa(hi.current),r=Ap(e,t.type);e!==r&&(Mt($u,t),Mt(hi,r))}function Gg(t){$u.current===t&&(Lt(hi),Lt($u))}var Gt=Wo(0);function dh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var T1=[];function Yg(){for(var t=0;t<T1.length;t++)T1[t]._workInProgressVersionPrimary=null;T1.length=0}var jf=qi.ReactCurrentDispatcher,I1=qi.ReactCurrentBatchConfig,La=0,Kt=null,Sr=null,Or=null,fh=!1,bu=!1,Gu=0,BO=0;function Yr(){throw Error(me(321))}function Xg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!$s(t[r],e[r]))return!1;return!0}function qg(t,e,r,n,s,o){if(La=o,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jf.current=t===null||t.memoizedState===null?VO:HO,t=r(n,s),bu){o=0;do{if(bu=!1,Gu=0,25<=o)throw Error(me(301));o+=1,Or=Sr=null,e.updateQueue=null,jf.current=$O,t=r(n,s)}while(bu)}if(jf.current=hh,e=Sr!==null&&Sr.next!==null,La=0,Or=Sr=Kt=null,fh=!1,e)throw Error(me(300));return t}function Kg(){var t=Gu!==0;return Gu=0,t}function ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Kt.memoizedState=Or=t:Or=Or.next=t,Or}function vs(){if(Sr===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=Sr.next;var e=Or===null?Kt.memoizedState:Or.next;if(e!==null)Or=e,Sr=t;else{if(t===null)throw Error(me(310));Sr=t,t={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},Or===null?Kt.memoizedState=Or=t:Or=Or.next=t}return Or}function Yu(t,e){return typeof e=="function"?e(t):e}function R1(t){var e=vs(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=Sr,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var u=l=null,h=null,f=o;do{var x=f.lane;if((La&x)===x)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:t(n,f.action);else{var y={lane:x,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=y,l=n):h=h.next=y,Kt.lanes|=x,Ba|=x}f=f.next}while(f!==null&&f!==o);h===null?l=n:h.next=u,$s(n,e.memoizedState)||(bn=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,Kt.lanes|=o,Ba|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function O1(t){var e=vs(),r=e.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);$s(o,e.memoizedState)||(bn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function Wb(){}function Gb(t,e){var r=Kt,n=vs(),s=e(),o=!$s(n.memoizedState,s);if(o&&(n.memoizedState=s,bn=!0),n=n.queue,Qg(qb.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,Xu(9,Xb.bind(null,r,n,s,e),void 0,null),Mr===null)throw Error(me(349));La&30||Yb(r,e,s)}return s}function Yb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Xb(t,e,r,n){e.value=r,e.getSnapshot=n,Kb(e)&&Qb(t)}function qb(t,e,r){return r(function(){Kb(e)&&Qb(t)})}function Kb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!$s(t,r)}catch{return!0}}function Qb(t){var e=Ui(t,1);e!==null&&zs(e,t,1,-1)}function Hw(t){var e=ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:t},e.queue=t,t=t.dispatch=zO.bind(null,Kt,t),[e.memoizedState,t]}function Xu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Zb(){return vs().memoizedState}function Df(t,e,r,n){var s=ri();Kt.flags|=t,s.memoizedState=Xu(1|e,r,void 0,n===void 0?null:n)}function s0(t,e,r,n){var s=vs();n=n===void 0?null:n;var o=void 0;if(Sr!==null){var l=Sr.memoizedState;if(o=l.destroy,n!==null&&Xg(n,l.deps)){s.memoizedState=Xu(e,r,o,n);return}}Kt.flags|=t,s.memoizedState=Xu(1|e,r,o,n)}function $w(t,e){return Df(8390656,8,t,e)}function Qg(t,e){return s0(2048,8,t,e)}function Jb(t,e){return s0(4,2,t,e)}function eE(t,e){return s0(4,4,t,e)}function tE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rE(t,e,r){return r=r!=null?r.concat([t]):null,s0(4,4,tE.bind(null,e,t),r)}function Zg(){}function nE(t,e){var r=vs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function sE(t,e){var r=vs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function iE(t,e,r){return La&21?($s(r,e)||(r=ub(),Kt.lanes|=r,Ba|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=r)}function FO(t,e){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var n=I1.transition;I1.transition={};try{t(!1),e()}finally{Et=r,I1.transition=n}}function oE(){return vs().memoizedState}function UO(t,e,r){var n=Mo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},aE(t))lE(e,r);else if(r=Vb(t,e,r,n),r!==null){var s=un();zs(r,t,n,s),cE(r,e,n)}}function zO(t,e,r){var n=Mo(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(aE(t))lE(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,r);if(s.hasEagerState=!0,s.eagerState=u,$s(u,l)){var h=e.interleaved;h===null?(s.next=s,Hg(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}r=Vb(t,e,s,n),r!==null&&(s=un(),zs(r,t,n,s),cE(r,e,n))}}function aE(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function lE(t,e){bu=fh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function cE(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ig(t,r)}}var hh={readContext:ws,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},VO={readContext:ws,useCallback:function(t,e){return ri().memoizedState=[t,e===void 0?null:e],t},useContext:ws,useEffect:$w,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Df(4194308,4,tE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Df(4194308,4,t,e)},useInsertionEffect:function(t,e){return Df(4,2,t,e)},useMemo:function(t,e){var r=ri();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ri();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=UO.bind(null,Kt,t),[n.memoizedState,t]},useRef:function(t){var e=ri();return t={current:t},e.memoizedState=t},useState:Hw,useDebugValue:Zg,useDeferredValue:function(t){return ri().memoizedState=t},useTransition:function(){var t=Hw(!1),e=t[0];return t=FO.bind(null,t[1]),ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Kt,s=ri();if(Vt){if(r===void 0)throw Error(me(407));r=r()}else{if(r=e(),Mr===null)throw Error(me(349));La&30||Yb(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,$w(qb.bind(null,n,o,t),[t]),n.flags|=2048,Xu(9,Xb.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=ri(),e=Mr.identifierPrefix;if(Vt){var r=Pi,n=ki;r=(n&~(1<<32-Us(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=BO++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HO={readContext:ws,useCallback:nE,useContext:ws,useEffect:Qg,useImperativeHandle:rE,useInsertionEffect:Jb,useLayoutEffect:eE,useMemo:sE,useReducer:R1,useRef:Zb,useState:function(){return R1(Yu)},useDebugValue:Zg,useDeferredValue:function(t){var e=vs();return iE(e,Sr.memoizedState,t)},useTransition:function(){var t=R1(Yu)[0],e=vs().memoizedState;return[t,e]},useMutableSource:Wb,useSyncExternalStore:Gb,useId:oE,unstable_isNewReconciler:!1},$O={readContext:ws,useCallback:nE,useContext:ws,useEffect:Qg,useImperativeHandle:rE,useInsertionEffect:Jb,useLayoutEffect:eE,useMemo:sE,useReducer:O1,useRef:Zb,useState:function(){return O1(Yu)},useDebugValue:Zg,useDeferredValue:function(t){var e=vs();return Sr===null?e.memoizedState=t:iE(e,Sr.memoizedState,t)},useTransition:function(){var t=O1(Yu)[0],e=vs().memoizedState;return[t,e]},useMutableSource:Wb,useSyncExternalStore:Gb,useId:oE,unstable_isNewReconciler:!1};function Rs(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Yp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var i0={isMounted:function(t){return(t=t._reactInternals)?Xa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=un(),s=Mo(t),o=Li(n,s);o.payload=e,r!=null&&(o.callback=r),e=Ro(t,o,s),e!==null&&(zs(e,t,s,n),Pf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=un(),s=Mo(t),o=Li(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Ro(t,o,s),e!==null&&(zs(e,t,s,n),Pf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=un(),n=Mo(t),s=Li(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ro(t,s,n),e!==null&&(zs(e,t,n,r),Pf(e,t,n))}};function Ww(t,e,r,n,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,l):e.prototype&&e.prototype.isPureReactComponent?!Uu(r,n)||!Uu(s,o):!0}function uE(t,e,r){var n=!1,s=Bo,o=e.contextType;return typeof o=="object"&&o!==null?o=ws(o):(s=Cn(e)?ja:en.current,n=e.contextTypes,o=(n=n!=null)?lc(t,s):Bo),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=i0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Gw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&i0.enqueueReplaceState(e,e.state,null)}function Xp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},$g(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=ws(o):(o=Cn(e)?ja:en.current,s.context=lc(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Yp(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&i0.enqueueReplaceState(s,s.state,null),uh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fc(t,e){try{var r="",n=e;do r+=yR(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function M1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var WO=typeof WeakMap=="function"?WeakMap:Map;function dE(t,e,r){r=Li(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){mh||(mh=!0,im=n),qp(t,e)},r}function fE(t,e,r){r=Li(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){qp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){qp(t,e),typeof n!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function Yw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new WO;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=i8.bind(null,t,e,r),e.then(t,t))}function Xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qw(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Li(-1,1),e.tag=2,Ro(r,e,1))),r.lanes|=1),t)}var GO=qi.ReactCurrentOwner,bn=!1;function on(t,e,r,n){e.child=t===null?zb(e,null,r,n):uc(e,t.child,r,n)}function Kw(t,e,r,n,s){r=r.render;var o=e.ref;return $l(e,s),n=qg(t,e,r,n,o,s),r=Kg(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(Vt&&r&&Lg(e),e.flags|=1,on(t,e,n,s),e.child)}function Qw(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!ox(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,hE(t,e,o,n,s)):(t=Uf(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Uu,r(l,n)&&t.ref===e.ref)return zi(t,e,s)}return e.flags|=1,t=ko(o,n),t.ref=e.ref,t.return=e,e.child=t}function hE(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Uu(o,n)&&t.ref===e.ref)if(bn=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(bn=!0);else return e.lanes=t.lanes,zi(t,e,s)}return Kp(t,e,r,n,s)}function pE(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(jl,Dn),Dn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mt(jl,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Mt(jl,Dn),Dn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Mt(jl,Dn),Dn|=n;return on(t,e,s,r),e.child}function mE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Kp(t,e,r,n,s){var o=Cn(r)?ja:en.current;return o=lc(e,o),$l(e,s),r=qg(t,e,r,n,o,s),n=Kg(),t!==null&&!bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zi(t,e,s)):(Vt&&n&&Lg(e),e.flags|=1,on(t,e,r,s),e.child)}function Zw(t,e,r,n,s){if(Cn(r)){var o=!0;ih(e)}else o=!1;if($l(e,s),e.stateNode===null)Lf(t,e),uE(e,r,n),Xp(e,r,n,s),n=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,f=r.contextType;typeof f=="object"&&f!==null?f=ws(f):(f=Cn(r)?ja:en.current,f=lc(e,f));var x=r.getDerivedStateFromProps,y=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||h!==f)&&Gw(e,l,n,f),uo=!1;var v=e.memoizedState;l.state=v,uh(e,n,l,s),h=e.memoizedState,u!==n||v!==h||En.current||uo?(typeof x=="function"&&(Yp(e,r,x,n),h=e.memoizedState),(u=uo||Ww(e,r,u,n,v,h,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),l.props=n,l.state=h,l.context=f,n=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Hb(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Rs(e.type,u),l.props=f,y=e.pendingProps,v=l.context,h=r.contextType,typeof h=="object"&&h!==null?h=ws(h):(h=Cn(r)?ja:en.current,h=lc(e,h));var b=r.getDerivedStateFromProps;(x=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||v!==h)&&Gw(e,l,n,h),uo=!1,v=e.memoizedState,l.state=v,uh(e,n,l,s);var A=e.memoizedState;u!==y||v!==A||En.current||uo?(typeof b=="function"&&(Yp(e,r,b,n),A=e.memoizedState),(f=uo||Ww(e,r,f,n,v,A,h)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,A,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,A,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),l.props=n,l.state=A,l.context=h,n=f):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return Qp(t,e,r,n,o,s)}function Qp(t,e,r,n,s,o){mE(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&Lw(e,r,!1),zi(t,e,o);n=e.stateNode,GO.current=e;var u=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=uc(e,t.child,null,o),e.child=uc(e,null,u,o)):on(t,e,u,o),e.memoizedState=n.state,s&&Lw(e,r,!0),e.child}function gE(t){var e=t.stateNode;e.pendingContext?Dw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dw(t,e.context,!1),Wg(t,e.containerInfo)}function Jw(t,e,r,n,s){return cc(),Fg(s),e.flags|=256,on(t,e,r,n),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function Jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,r){var n=e.pendingProps,s=Gt.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Mt(Gt,s&1),t===null)return Wp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,o?(n=e.mode,o=e.child,l={mode:"hidden",children:l},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=l0(l,n,0,null),t=Ia(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Jp(r),e.memoizedState=Zp,t):Jg(e,l));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return YO(t,e,l,n,u,s,r);if(o){o=n.fallback,l=e.mode,s=t.child,u=s.sibling;var h={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=ko(s,h),n.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=ko(u,o):(o=Ia(o,l,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,l=t.child.memoizedState,l=l===null?Jp(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~r,e.memoizedState=Zp,n}return o=t.child,t=o.sibling,n=ko(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Jg(t,e){return e=l0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function of(t,e,r,n){return n!==null&&Fg(n),uc(e,t.child,null,r),t=Jg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YO(t,e,r,n,s,o,l){if(r)return e.flags&256?(e.flags&=-257,n=M1(Error(me(422))),of(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=l0({mode:"visible",children:n.children},s,0,null),o=Ia(o,s,l,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&uc(e,t.child,null,l),e.child.memoizedState=Jp(l),e.memoizedState=Zp,o);if(!(e.mode&1))return of(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var u=n.dgst;return n=u,o=Error(me(419)),n=M1(o,n,void 0),of(t,e,l,n)}if(u=(l&t.childLanes)!==0,bn||u){if(n=Mr,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ui(t,s),zs(n,t,s,-1))}return ix(),n=M1(Error(me(421))),of(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=o8.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Hn=Io(s.nextSibling),Yn=e,Vt=!0,Bs=null,t!==null&&(ls[cs++]=ki,ls[cs++]=Pi,ls[cs++]=Da,ki=t.id,Pi=t.overflow,Da=e),e=Jg(e,n.children),e.flags|=4096,e)}function ev(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Gp(t.return,e,r)}function k1(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function yE(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(on(t,e,n.children,r),n=Gt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ev(t,r,e);else if(t.tag===19)ev(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Mt(Gt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&dh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),k1(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}k1(e,!0,r,null,o);break;case"together":k1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ba|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,r=ko(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ko(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function XO(t,e,r){switch(e.tag){case 3:gE(e),cc();break;case 5:$b(e);break;case 1:Cn(e.type)&&ih(e);break;case 4:Wg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Mt(lh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Mt(Gt,Gt.current&1),e.flags|=128,null):r&e.child.childLanes?xE(t,e,r):(Mt(Gt,Gt.current&1),t=zi(t,e,r),t!==null?t.sibling:null);Mt(Gt,Gt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return yE(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(Gt,Gt.current),n)break;return null;case 22:case 23:return e.lanes=0,pE(t,e,r)}return zi(t,e,r)}var wE,em,vE,_E;wE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};em=function(){};vE=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,wa(hi.current);var o=null;switch(r){case"input":s=bp(t,s),n=bp(t,n),o=[];break;case"select":s=Qt({},s,{value:void 0}),n=Qt({},n,{value:void 0}),o=[];break;case"textarea":s=Sp(t,s),n=Sp(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=nh)}Np(r,n);var l;r=null;for(f in s)if(!n.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var u=s[f];for(l in u)u.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ku.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in n){var h=n[f];if(u=s!=null?s[f]:void 0,n.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(r||(r={}),r[l]=h[l])}else r||(o||(o=[]),o.push(f,r)),r=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ku.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&jt("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}r&&(o=o||[]).push("style",r);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};_E=function(t,e,r,n){r!==n&&(e.flags|=4)};function ru(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function qO(t,e,r){var n=e.pendingProps;switch(Bg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return Cn(e.type)&&sh(),Xr(e),null;case 3:return n=e.stateNode,dc(),Lt(En),Lt(en),Yg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bs!==null&&(lm(Bs),Bs=null))),em(t,e),Xr(e),null;case 5:Gg(e);var s=wa(Wu.current);if(r=e.type,t!==null&&e.stateNode!=null)vE(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(me(166));return Xr(e),null}if(t=wa(hi.current),nf(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[li]=e,n[Hu]=o,t=(e.mode&1)!==0,r){case"dialog":jt("cancel",n),jt("close",n);break;case"iframe":case"object":case"embed":jt("load",n);break;case"video":case"audio":for(s=0;s<du.length;s++)jt(du[s],n);break;case"source":jt("error",n);break;case"img":case"image":case"link":jt("error",n),jt("load",n);break;case"details":jt("toggle",n);break;case"input":cw(n,o),jt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},jt("invalid",n);break;case"textarea":dw(n,o),jt("invalid",n)}Np(r,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?n.textContent!==u&&(o.suppressHydrationWarning!==!0&&rf(n.textContent,u,t),s=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&rf(n.textContent,u,t),s=["children",""+u]):ku.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&jt("scroll",n)}switch(r){case"input":Xd(n),uw(n,o,!0);break;case"textarea":Xd(n),fw(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=nh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[li]=e,t[Hu]=n,wE(t,e,!1,!1),e.stateNode=t;e:{switch(l=Tp(r,n),r){case"dialog":jt("cancel",t),jt("close",t),s=n;break;case"iframe":case"object":case"embed":jt("load",t),s=n;break;case"video":case"audio":for(s=0;s<du.length;s++)jt(du[s],t);s=n;break;case"source":jt("error",t),s=n;break;case"img":case"image":case"link":jt("error",t),jt("load",t),s=n;break;case"details":jt("toggle",t),s=n;break;case"input":cw(t,n),s=bp(t,n),jt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Qt({},n,{value:void 0}),jt("invalid",t);break;case"textarea":dw(t,n),s=Sp(t,n),jt("invalid",t);break;default:s=n}Np(r,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?Z_(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&K_(t,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Pu(t,h):typeof h=="number"&&Pu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ku.hasOwnProperty(o)?h!=null&&o==="onScroll"&&jt("scroll",t):h!=null&&Eg(t,o,h,l))}switch(r){case"input":Xd(t),uw(t,n,!1);break;case"textarea":Xd(t),fw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Lo(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Ul(t,!!n.multiple,o,!1):n.defaultValue!=null&&Ul(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(t&&e.stateNode!=null)_E(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(me(166));if(r=wa(Wu.current),wa(hi.current),nf(e)){if(n=e.stateNode,r=e.memoizedProps,n[li]=e,(o=n.nodeValue!==r)&&(t=Yn,t!==null))switch(t.tag){case 3:rf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rf(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[li]=e,e.stateNode=n}return Xr(e),null;case 13:if(Lt(Gt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Hn!==null&&e.mode&1&&!(e.flags&128))Fb(),cc(),e.flags|=98560,o=!1;else if(o=nf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(me(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(me(317));o[li]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),o=!1}else Bs!==null&&(lm(Bs),Bs=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?Ar===0&&(Ar=3):ix())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return dc(),em(t,e),t===null&&zu(e.stateNode.containerInfo),Xr(e),null;case 10:return Vg(e.type._context),Xr(e),null;case 17:return Cn(e.type)&&sh(),Xr(e),null;case 19:if(Lt(Gt),o=e.memoizedState,o===null)return Xr(e),null;if(n=(e.flags&128)!==0,l=o.rendering,l===null)if(n)ru(o,!1);else{if(Ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=dh(t),l!==null){for(e.flags|=128,ru(o,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Mt(Gt,Gt.current&1|2),e.child}t=t.sibling}o.tail!==null&&dr()>hc&&(e.flags|=128,n=!0,ru(o,!1),e.lanes=4194304)}else{if(!n)if(t=dh(l),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ru(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Vt)return Xr(e),null}else 2*dr()-o.renderingStartTime>hc&&r!==1073741824&&(e.flags|=128,n=!0,ru(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(r=o.last,r!==null?r.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dr(),e.sibling=null,r=Gt.current,Mt(Gt,n?r&1|2:r&1),e):(Xr(e),null);case 22:case 23:return sx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Dn&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(me(156,e.tag))}function KO(t,e){switch(Bg(e),e.tag){case 1:return Cn(e.type)&&sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dc(),Lt(En),Lt(en),Yg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gg(e),null;case 13:if(Lt(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));cc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Gt),null;case 4:return dc(),null;case 10:return Vg(e.type._context),null;case 22:case 23:return sx(),null;case 24:return null;default:return null}}var af=!1,Qr=!1,QO=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Pl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ir(t,e,n)}else r.current=null}function tm(t,e,r){try{r()}catch(n){ir(t,e,n)}}var tv=!1;function ZO(t,e){if(Bp=eh,t=Ab(),Dg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,u=-1,h=-1,f=0,x=0,y=t,v=null;t:for(;;){for(var b;y!==r||s!==0&&y.nodeType!==3||(u=l+s),y!==o||n!==0&&y.nodeType!==3||(h=l+n),y.nodeType===3&&(l+=y.nodeValue.length),(b=y.firstChild)!==null;)v=y,y=b;for(;;){if(y===t)break t;if(v===r&&++f===s&&(u=l),v===o&&++x===n&&(h=l),(b=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=b}r=u===-1||h===-1?null:{start:u,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fp={focusedElem:t,selectionRange:r},eh=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var E=A.memoizedProps,I=A.memoizedState,R=e.stateNode,C=R.getSnapshotBeforeUpdate(e.elementType===e.type?E:Rs(e.type,E),I);R.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(O){ir(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return A=tv,tv=!1,A}function Eu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&tm(e,r,o)}s=s.next}while(s!==n)}}function o0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[Hu],delete e[Vp],delete e[PO],delete e[jO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EE(t){return t.tag===5||t.tag===3||t.tag===4}function rv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=nh));else if(n!==4&&(t=t.child,t!==null))for(nm(t,e,r),t=t.sibling;t!==null;)nm(t,e,r),t=t.sibling}function sm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(sm(t,e,r),t=t.sibling;t!==null;)sm(t,e,r),t=t.sibling}var Ur=null,js=!1;function ro(t,e,r){for(r=r.child;r!==null;)CE(t,e,r),r=r.sibling}function CE(t,e,r){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(Zh,r)}catch{}switch(r.tag){case 5:Qr||Pl(r,e);case 6:var n=Ur,s=js;Ur=null,ro(t,e,r),Ur=n,js=s,Ur!==null&&(js?(t=Ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&(js?(t=Ur,r=r.stateNode,t.nodeType===8?A1(t.parentNode,r):t.nodeType===1&&A1(t,r),Bu(t)):A1(Ur,r.stateNode));break;case 4:n=Ur,s=js,Ur=r.stateNode.containerInfo,js=!0,ro(t,e,r),Ur=n,js=s;break;case 0:case 11:case 14:case 15:if(!Qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&tm(r,e,l),s=s.next}while(s!==n)}ro(t,e,r);break;case 1:if(!Qr&&(Pl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){ir(r,e,u)}ro(t,e,r);break;case 21:ro(t,e,r);break;case 22:r.mode&1?(Qr=(n=Qr)||r.memoizedState!==null,ro(t,e,r),Qr=n):ro(t,e,r);break;default:ro(t,e,r)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new QO),e.forEach(function(n){var s=a8.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ss(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Ur=u.stateNode,js=!1;break e;case 3:Ur=u.stateNode.containerInfo,js=!0;break e;case 4:Ur=u.stateNode.containerInfo,js=!0;break e}u=u.return}if(Ur===null)throw Error(me(160));CE(o,l,s),Ur=null,js=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){ir(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}function SE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ss(e,t),ti(t),n&4){try{Eu(3,t,t.return),o0(3,t)}catch(E){ir(t,t.return,E)}try{Eu(5,t,t.return)}catch(E){ir(t,t.return,E)}}break;case 1:Ss(e,t),ti(t),n&512&&r!==null&&Pl(r,r.return);break;case 5:if(Ss(e,t),ti(t),n&512&&r!==null&&Pl(r,r.return),t.flags&32){var s=t.stateNode;try{Pu(s,"")}catch(E){ir(t,t.return,E)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=r!==null?r.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Y_(s,o),Tp(u,l);var f=Tp(u,o);for(l=0;l<h.length;l+=2){var x=h[l],y=h[l+1];x==="style"?Z_(s,y):x==="dangerouslySetInnerHTML"?K_(s,y):x==="children"?Pu(s,y):Eg(s,x,y,f)}switch(u){case"input":Ep(s,o);break;case"textarea":X_(s,o);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?Ul(s,!!o.multiple,b,!1):v!==!!o.multiple&&(o.defaultValue!=null?Ul(s,!!o.multiple,o.defaultValue,!0):Ul(s,!!o.multiple,o.multiple?[]:"",!1))}s[Hu]=o}catch(E){ir(t,t.return,E)}}break;case 6:if(Ss(e,t),ti(t),n&4){if(t.stateNode===null)throw Error(me(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(E){ir(t,t.return,E)}}break;case 3:if(Ss(e,t),ti(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Bu(e.containerInfo)}catch(E){ir(t,t.return,E)}break;case 4:Ss(e,t),ti(t);break;case 13:Ss(e,t),ti(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(rx=dr())),n&4&&nv(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(Qr=(f=Qr)||x,Ss(e,t),Qr=f):Ss(e,t),ti(t),n&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!x&&t.mode&1)for(Te=t,x=t.child;x!==null;){for(y=Te=x;Te!==null;){switch(v=Te,b=v.child,v.tag){case 0:case 11:case 14:case 15:Eu(4,v,v.return);break;case 1:Pl(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(E){ir(n,r,E)}}break;case 5:Pl(v,v.return);break;case 22:if(v.memoizedState!==null){iv(y);continue}}b!==null?(b.return=v,Te=b):iv(y)}x=x.sibling}e:for(x=null,y=t;;){if(y.tag===5){if(x===null){x=y;try{s=y.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=Q_("display",l))}catch(E){ir(t,t.return,E)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(E){ir(t,t.return,E)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ss(e,t),ti(t),n&4&&nv(t);break;case 21:break;default:Ss(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(EE(r)){var n=r;break e}r=r.return}throw Error(me(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Pu(s,""),n.flags&=-33);var o=rv(t);sm(t,o,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=rv(t);nm(t,u,l);break;default:throw Error(me(161))}}catch(h){ir(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JO(t,e,r){Te=t,AE(t)}function AE(t,e,r){for(var n=(t.mode&1)!==0;Te!==null;){var s=Te,o=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||af;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||Qr;u=af;var f=Qr;if(af=l,(Qr=h)&&!f)for(Te=s;Te!==null;)l=Te,h=l.child,l.tag===22&&l.memoizedState!==null?ov(s):h!==null?(h.return=l,Te=h):ov(s);for(;o!==null;)Te=o,AE(o),o=o.sibling;Te=s,af=u,Qr=f}sv(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Te=o):sv(t)}}function sv(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qr||o0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Qr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Rs(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vw(e,o,n);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Vw(e,l,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var x=f.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&Bu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}Qr||e.flags&512&&rm(e)}catch(v){ir(e,e.return,v)}}if(e===t){Te=null;break}if(r=e.sibling,r!==null){r.return=e.return,Te=r;break}Te=e.return}}function iv(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Te=r;break}Te=e.return}}function ov(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{o0(4,e)}catch(h){ir(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(h){ir(e,s,h)}}var o=e.return;try{rm(e)}catch(h){ir(e,o,h)}break;case 5:var l=e.return;try{rm(e)}catch(h){ir(e,l,h)}}}catch(h){ir(e,e.return,h)}if(e===t){Te=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Te=u;break}Te=e.return}}var e8=Math.ceil,ph=qi.ReactCurrentDispatcher,ex=qi.ReactCurrentOwner,xs=qi.ReactCurrentBatchConfig,mt=0,Mr=null,xr=null,zr=0,Dn=0,jl=Wo(0),Ar=0,qu=null,Ba=0,a0=0,tx=0,Cu=null,_n=null,rx=0,hc=1/0,Ai=null,mh=!1,im=null,Oo=null,lf=!1,_o=null,gh=0,Su=0,om=null,Bf=-1,Ff=0;function un(){return mt&6?dr():Bf!==-1?Bf:Bf=dr()}function Mo(t){return t.mode&1?mt&2&&zr!==0?zr&-zr:LO.transition!==null?(Ff===0&&(Ff=ub()),Ff):(t=Et,t!==0||(t=window.event,t=t===void 0?16:xb(t.type)),t):1}function zs(t,e,r,n){if(50<Su)throw Su=0,om=null,Error(me(185));yd(t,r,n),(!(mt&2)||t!==Mr)&&(t===Mr&&(!(mt&2)&&(a0|=r),Ar===4&&ho(t,zr)),Sn(t,n),r===1&&mt===0&&!(e.mode&1)&&(hc=dr()+500,n0&&Go()))}function Sn(t,e){var r=t.callbackNode;LR(t,e);var n=Jf(t,t===Mr?zr:0);if(n===0)r!==null&&mw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&mw(r),e===1)t.tag===0?DO(av.bind(null,t)):Db(av.bind(null,t)),MO(function(){!(mt&6)&&Go()}),r=null;else{switch(db(n)){case 1:r=Tg;break;case 4:r=lb;break;case 16:r=Zf;break;case 536870912:r=cb;break;default:r=Zf}r=PE(r,NE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function NE(t,e){if(Bf=-1,Ff=0,mt&6)throw Error(me(327));var r=t.callbackNode;if(Wl()&&t.callbackNode!==r)return null;var n=Jf(t,t===Mr?zr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=xh(t,n);else{e=n;var s=mt;mt|=2;var o=IE();(Mr!==t||zr!==e)&&(Ai=null,hc=dr()+500,Ta(t,e));do try{n8();break}catch(u){TE(t,u)}while(!0);zg(),ph.current=o,mt=s,xr!==null?e=0:(Mr=null,zr=0,e=Ar)}if(e!==0){if(e===2&&(s=kp(t),s!==0&&(n=s,e=am(t,s))),e===1)throw r=qu,Ta(t,0),ho(t,n),Sn(t,dr()),r;if(e===6)ho(t,n);else{if(s=t.current.alternate,!(n&30)&&!t8(s)&&(e=xh(t,n),e===2&&(o=kp(t),o!==0&&(n=o,e=am(t,o))),e===1))throw r=qu,Ta(t,0),ho(t,n),Sn(t,dr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(me(345));case 2:fa(t,_n,Ai);break;case 3:if(ho(t,n),(n&130023424)===n&&(e=rx+500-dr(),10<e)){if(Jf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zp(fa.bind(null,t,_n,Ai),e);break}fa(t,_n,Ai);break;case 4:if(ho(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Us(n);o=1<<l,l=e[l],l>s&&(s=l),n&=~o}if(n=s,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e8(n/1960))-n,10<n){t.timeoutHandle=zp(fa.bind(null,t,_n,Ai),n);break}fa(t,_n,Ai);break;case 5:fa(t,_n,Ai);break;default:throw Error(me(329))}}}return Sn(t,dr()),t.callbackNode===r?NE.bind(null,t):null}function am(t,e){var r=Cu;return t.current.memoizedState.isDehydrated&&(Ta(t,e).flags|=256),t=xh(t,e),t!==2&&(e=_n,_n=r,e!==null&&lm(e)),t}function lm(t){_n===null?_n=t:_n.push.apply(_n,t)}function t8(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!$s(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ho(t,e){for(e&=~tx,e&=~a0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Us(e),n=1<<r;t[r]=-1,e&=~n}}function av(t){if(mt&6)throw Error(me(327));Wl();var e=Jf(t,0);if(!(e&1))return Sn(t,dr()),null;var r=xh(t,e);if(t.tag!==0&&r===2){var n=kp(t);n!==0&&(e=n,r=am(t,n))}if(r===1)throw r=qu,Ta(t,0),ho(t,e),Sn(t,dr()),r;if(r===6)throw Error(me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fa(t,_n,Ai),Sn(t,dr()),null}function nx(t,e){var r=mt;mt|=1;try{return t(e)}finally{mt=r,mt===0&&(hc=dr()+500,n0&&Go())}}function Fa(t){_o!==null&&_o.tag===0&&!(mt&6)&&Wl();var e=mt;mt|=1;var r=xs.transition,n=Et;try{if(xs.transition=null,Et=1,t)return t()}finally{Et=n,xs.transition=r,mt=e,!(mt&6)&&Go()}}function sx(){Dn=jl.current,Lt(jl)}function Ta(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,OO(r)),xr!==null)for(r=xr.return;r!==null;){var n=r;switch(Bg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sh();break;case 3:dc(),Lt(En),Lt(en),Yg();break;case 5:Gg(n);break;case 4:dc();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:Vg(n.type._context);break;case 22:case 23:sx()}r=r.return}if(Mr=t,xr=t=ko(t.current,null),zr=Dn=e,Ar=0,qu=null,tx=a0=Ba=0,_n=Cu=null,ya!==null){for(e=0;e<ya.length;e++)if(r=ya[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var l=o.next;o.next=s,n.next=l}r.pending=n}ya=null}return t}function TE(t,e){do{var r=xr;try{if(zg(),jf.current=hh,fh){for(var n=Kt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}fh=!1}if(La=0,Or=Sr=Kt=null,bu=!1,Gu=0,ex.current=null,r===null||r.return===null){Ar=1,qu=e,xr=null;break}e:{var o=t,l=r.return,u=r,h=e;if(e=zr,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,x=u,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=Xw(l);if(b!==null){b.flags&=-257,qw(b,l,u,o,e),b.mode&1&&Yw(o,f,e),e=b,h=f;var A=e.updateQueue;if(A===null){var E=new Set;E.add(h),e.updateQueue=E}else A.add(h);break e}else{if(!(e&1)){Yw(o,f,e),ix();break e}h=Error(me(426))}}else if(Vt&&u.mode&1){var I=Xw(l);if(I!==null){!(I.flags&65536)&&(I.flags|=256),qw(I,l,u,o,e),Fg(fc(h,u));break e}}o=h=fc(h,u),Ar!==4&&(Ar=2),Cu===null?Cu=[o]:Cu.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=dE(o,h,e);zw(o,R);break e;case 1:u=h;var C=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Oo===null||!Oo.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=fE(o,u,e);zw(o,O);break e}}o=o.return}while(o!==null)}OE(r)}catch(k){e=k,xr===r&&r!==null&&(xr=r=r.return);continue}break}while(!0)}function IE(){var t=ph.current;return ph.current=hh,t===null?hh:t}function ix(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),Mr===null||!(Ba&268435455)&&!(a0&268435455)||ho(Mr,zr)}function xh(t,e){var r=mt;mt|=2;var n=IE();(Mr!==t||zr!==e)&&(Ai=null,Ta(t,e));do try{r8();break}catch(s){TE(t,s)}while(!0);if(zg(),mt=r,ph.current=n,xr!==null)throw Error(me(261));return Mr=null,zr=0,Ar}function r8(){for(;xr!==null;)RE(xr)}function n8(){for(;xr!==null&&!TR();)RE(xr)}function RE(t){var e=kE(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?OE(t):xr=e,ex.current=null}function OE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=KO(r,e),r!==null){r.flags&=32767,xr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ar=6,xr=null;return}}else if(r=qO(r,e,Dn),r!==null){xr=r;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=t}while(e!==null);Ar===0&&(Ar=5)}function fa(t,e,r){var n=Et,s=xs.transition;try{xs.transition=null,Et=1,s8(t,e,r,n)}finally{xs.transition=s,Et=n}return null}function s8(t,e,r,n){do Wl();while(_o!==null);if(mt&6)throw Error(me(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(me(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(BR(t,o),t===Mr&&(xr=Mr=null,zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lf||(lf=!0,PE(Zf,function(){return Wl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=xs.transition,xs.transition=null;var l=Et;Et=1;var u=mt;mt|=4,ex.current=null,ZO(t,r),SE(r,t),CO(Fp),eh=!!Bp,Fp=Bp=null,t.current=r,JO(r),IR(),mt=u,Et=l,xs.transition=o}else t.current=r;if(lf&&(lf=!1,_o=t,gh=s),o=t.pendingLanes,o===0&&(Oo=null),MR(r.stateNode),Sn(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(mh)throw mh=!1,t=im,im=null,t;return gh&1&&t.tag!==0&&Wl(),o=t.pendingLanes,o&1?t===om?Su++:(Su=0,om=t):Su=0,Go(),null}function Wl(){if(_o!==null){var t=db(gh),e=xs.transition,r=Et;try{if(xs.transition=null,Et=16>t?16:t,_o===null)var n=!1;else{if(t=_o,_o=null,gh=0,mt&6)throw Error(me(331));var s=mt;for(mt|=4,Te=t.current;Te!==null;){var o=Te,l=o.child;if(Te.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(Te=f;Te!==null;){var x=Te;switch(x.tag){case 0:case 11:case 15:Eu(8,x,o)}var y=x.child;if(y!==null)y.return=x,Te=y;else for(;Te!==null;){x=Te;var v=x.sibling,b=x.return;if(bE(x),x===f){Te=null;break}if(v!==null){v.return=b,Te=v;break}Te=b}}}var A=o.alternate;if(A!==null){var E=A.child;if(E!==null){A.child=null;do{var I=E.sibling;E.sibling=null,E=I}while(E!==null)}}Te=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Te=l;else e:for(;Te!==null;){if(o=Te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Eu(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,Te=R;break e}Te=o.return}}var C=t.current;for(Te=C;Te!==null;){l=Te;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,Te=S;else e:for(l=C;Te!==null;){if(u=Te,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:o0(9,u)}}catch(k){ir(u,u.return,k)}if(u===l){Te=null;break e}var O=u.sibling;if(O!==null){O.return=u.return,Te=O;break e}Te=u.return}}if(mt=s,Go(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(Zh,t)}catch{}n=!0}return n}finally{Et=r,xs.transition=e}}return!1}function lv(t,e,r){e=fc(r,e),e=dE(t,e,1),t=Ro(t,e,1),e=un(),t!==null&&(yd(t,1,e),Sn(t,e))}function ir(t,e,r){if(t.tag===3)lv(t,t,r);else for(;e!==null;){if(e.tag===3){lv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oo===null||!Oo.has(n))){t=fc(r,t),t=fE(e,t,1),e=Ro(e,t,1),t=un(),e!==null&&(yd(e,1,t),Sn(e,t));break}}e=e.return}}function i8(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&r,Mr===t&&(zr&r)===r&&(Ar===4||Ar===3&&(zr&130023424)===zr&&500>dr()-rx?Ta(t,0):tx|=r),Sn(t,e)}function ME(t,e){e===0&&(t.mode&1?(e=Qd,Qd<<=1,!(Qd&130023424)&&(Qd=4194304)):e=1);var r=un();t=Ui(t,e),t!==null&&(yd(t,e,r),Sn(t,r))}function o8(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ME(t,r)}function a8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(me(314))}n!==null&&n.delete(e),ME(t,r)}var kE;kE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return bn=!1,XO(t,e,r);bn=!!(t.flags&131072)}else bn=!1,Vt&&e.flags&1048576&&Lb(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Lf(t,e),t=e.pendingProps;var s=lc(e,en.current);$l(e,r),s=qg(null,e,n,t,s,r);var o=Kg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(n)?(o=!0,ih(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$g(e),s.updater=i0,e.stateNode=s,s._reactInternals=e,Xp(e,n,t,r),e=Qp(null,e,n,!0,o,r)):(e.tag=0,Vt&&o&&Lg(e),on(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Lf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=c8(n),t=Rs(n,t),s){case 0:e=Kp(null,e,n,t,r);break e;case 1:e=Zw(null,e,n,t,r);break e;case 11:e=Kw(null,e,n,t,r);break e;case 14:e=Qw(null,e,n,Rs(n.type,t),r);break e}throw Error(me(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Rs(n,s),Kp(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Rs(n,s),Zw(t,e,n,s,r);case 3:e:{if(gE(e),t===null)throw Error(me(387));n=e.pendingProps,o=e.memoizedState,s=o.element,Hb(t,e),uh(e,n,null,r);var l=e.memoizedState;if(n=l.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=fc(Error(me(423)),e),e=Jw(t,e,n,r,s);break e}else if(n!==s){s=fc(Error(me(424)),e),e=Jw(t,e,n,r,s);break e}else for(Hn=Io(e.stateNode.containerInfo.firstChild),Yn=e,Vt=!0,Bs=null,r=zb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cc(),n===s){e=zi(t,e,r);break e}on(t,e,n,r)}e=e.child}return e;case 5:return $b(e),t===null&&Wp(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Up(n,s)?l=null:o!==null&&Up(n,o)&&(e.flags|=32),mE(t,e),on(t,e,l,r),e.child;case 6:return t===null&&Wp(e),null;case 13:return xE(t,e,r);case 4:return Wg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=uc(e,null,n,r):on(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Rs(n,s),Kw(t,e,n,s,r);case 7:return on(t,e,e.pendingProps,r),e.child;case 8:return on(t,e,e.pendingProps.children,r),e.child;case 12:return on(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Mt(lh,n._currentValue),n._currentValue=l,o!==null)if($s(o.value,l)){if(o.children===s.children&&!En.current){e=zi(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=Li(-1,r&-r),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var x=f.pending;x===null?h.next=h:(h.next=x.next,x.next=h),f.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Gp(o.return,r,e),u.lanes|=r;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(me(341));l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),Gp(l,r,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}on(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,$l(e,r),s=ws(s),n=n(s),e.flags|=1,on(t,e,n,r),e.child;case 14:return n=e.type,s=Rs(n,e.pendingProps),s=Rs(n.type,s),Qw(t,e,n,s,r);case 15:return hE(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Rs(n,s),Lf(t,e),e.tag=1,Cn(n)?(t=!0,ih(e)):t=!1,$l(e,r),uE(e,n,s),Xp(e,n,s,r),Qp(null,e,n,!0,t,r);case 19:return yE(t,e,r);case 22:return pE(t,e,r)}throw Error(me(156,e.tag))};function PE(t,e){return ab(t,e)}function l8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(t,e,r,n){return new l8(t,e,r,n)}function ox(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c8(t){if(typeof t=="function")return ox(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sg)return 11;if(t===Ag)return 14}return 2}function ko(t,e){var r=t.alternate;return r===null?(r=ds(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Uf(t,e,r,n,s,o){var l=2;if(n=t,typeof t=="function")ox(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Sl:return Ia(r.children,s,o,e);case Cg:l=8,s|=8;break;case yp:return t=ds(12,r,e,s|2),t.elementType=yp,t.lanes=o,t;case wp:return t=ds(13,r,e,s),t.elementType=wp,t.lanes=o,t;case vp:return t=ds(19,r,e,s),t.elementType=vp,t.lanes=o,t;case $_:return l0(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V_:l=10;break e;case H_:l=9;break e;case Sg:l=11;break e;case Ag:l=14;break e;case co:l=16,n=null;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=ds(l,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Ia(t,e,r,n){return t=ds(7,t,n,e),t.lanes=r,t}function l0(t,e,r,n){return t=ds(22,t,n,e),t.elementType=$_,t.lanes=r,t.stateNode={isHidden:!1},t}function P1(t,e,r){return t=ds(6,t,null,e),t.lanes=r,t}function j1(t,e,r){return e=ds(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function u8(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m1(0),this.expirationTimes=m1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m1(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ax(t,e,r,n,s,o,l,u,h){return t=new u8(t,e,r,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ds(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$g(o),t}function d8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function jE(t){if(!t)return Bo;t=t._reactInternals;e:{if(Xa(t)!==t||t.tag!==1)throw Error(me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(me(171))}if(t.tag===1){var r=t.type;if(Cn(r))return jb(t,r,e)}return e}function DE(t,e,r,n,s,o,l,u,h){return t=ax(r,n,!0,t,s,o,l,u,h),t.context=jE(null),r=t.current,n=un(),s=Mo(r),o=Li(n,s),o.callback=e??null,Ro(r,o,s),t.current.lanes=s,yd(t,s,n),Sn(t,n),t}function c0(t,e,r,n){var s=e.current,o=un(),l=Mo(s);return r=jE(r),e.context===null?e.context=r:e.pendingContext=r,e=Li(o,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ro(s,e,l),t!==null&&(zs(t,s,l,o),Pf(t,s,l)),l}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function lx(t,e){cv(t,e),(t=t.alternate)&&cv(t,e)}function f8(){return null}var LE=typeof reportError=="function"?reportError:function(t){console.error(t)};function cx(t){this._internalRoot=t}u0.prototype.render=cx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));c0(t,e,null,null)};u0.prototype.unmount=cx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fa(function(){c0(null,t,null,null)}),e[Fi]=null}};function u0(t){this._internalRoot=t}u0.prototype.unstable_scheduleHydration=function(t){if(t){var e=pb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<fo.length&&e!==0&&e<fo[r].priority;r++);fo.splice(r,0,t),r===0&&gb(t)}};function ux(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uv(){}function h8(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var f=yh(l);o.call(f)}}var l=DE(e,n,t,0,null,!1,!1,"",uv);return t._reactRootContainer=l,t[Fi]=l.current,zu(t.nodeType===8?t.parentNode:t),Fa(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var u=n;n=function(){var f=yh(h);u.call(f)}}var h=ax(t,0,!1,null,null,!1,!1,"",uv);return t._reactRootContainer=h,t[Fi]=h.current,zu(t.nodeType===8?t.parentNode:t),Fa(function(){c0(e,h,r,n)}),h}function f0(t,e,r,n,s){var o=r._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=yh(l);u.call(h)}}c0(e,l,t,s)}else l=h8(r,e,t,s,n);return yh(l)}fb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=uu(e.pendingLanes);r!==0&&(Ig(e,r|1),Sn(e,dr()),!(mt&6)&&(hc=dr()+500,Go()))}break;case 13:Fa(function(){var n=Ui(t,1);if(n!==null){var s=un();zs(n,t,1,s)}}),lx(t,1)}};Rg=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var r=un();zs(e,t,134217728,r)}lx(t,134217728)}};hb=function(t){if(t.tag===13){var e=Mo(t),r=Ui(t,e);if(r!==null){var n=un();zs(r,t,e,n)}lx(t,e)}};pb=function(){return Et};mb=function(t,e){var r=Et;try{return Et=t,e()}finally{Et=r}};Rp=function(t,e,r){switch(e){case"input":if(Ep(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=r0(n);if(!s)throw Error(me(90));G_(n),Ep(n,s)}}}break;case"textarea":X_(t,r);break;case"select":e=r.value,e!=null&&Ul(t,!!r.multiple,e,!1)}};tb=nx;rb=Fa;var p8={usingClientEntryPoint:!1,Events:[vd,Il,r0,J_,eb,nx]},nu={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m8={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ib(t),t===null?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||f8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Zh=cf.inject(m8),fi=cf}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p8;Jn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ux(e))throw Error(me(200));return d8(t,e,null,r)};Jn.createRoot=function(t,e){if(!ux(t))throw Error(me(299));var r=!1,n="",s=LE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ax(t,1,!1,null,null,r,!1,n,s),t[Fi]=e.current,zu(t.nodeType===8?t.parentNode:t),new cx(e)};Jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=ib(e),t=t===null?null:t.stateNode,t};Jn.flushSync=function(t){return Fa(t)};Jn.hydrate=function(t,e,r){if(!d0(e))throw Error(me(200));return f0(null,t,e,!0,r)};Jn.hydrateRoot=function(t,e,r){if(!ux(t))throw Error(me(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",l=LE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=DE(e,null,t,1,r??null,s,!1,o,l),t[Fi]=e.current,zu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new u0(e)};Jn.render=function(t,e,r){if(!d0(e))throw Error(me(200));return f0(null,t,e,!1,r)};Jn.unmountComponentAtNode=function(t){if(!d0(t))throw Error(me(40));return t._reactRootContainer?(Fa(function(){f0(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};Jn.unstable_batchedUpdates=nx;Jn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!d0(r))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return f0(t,e,r,!1,n)};Jn.version="18.3.1-next-f1338f8080-20240426";function BE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BE)}catch(t){console.error(t)}}BE(),B_.exports=Jn;var qa=B_.exports;const FE=mg(qa);var UE,dv=qa;UE=dv.createRoot,dv.hydrateRoot;const g8=1,x8=1e6;let D1=0;function y8(){return D1=(D1+1)%Number.MAX_SAFE_INTEGER,D1.toString()}const L1=new Map,fv=t=>{if(L1.has(t))return;const e=setTimeout(()=>{L1.delete(t),Au({type:"REMOVE_TOAST",toastId:t})},x8);L1.set(t,e)},w8=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,g8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?fv(r):t.toasts.forEach(n=>{fv(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},zf=[];let Vf={toasts:[]};function Au(t){Vf=w8(Vf,t),zf.forEach(e=>{e(Vf)})}function v8({...t}){const e=y8(),r=s=>Au({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Au({type:"DISMISS_TOAST",toastId:e});return Au({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function _8(){const[t,e]=N.useState(Vf);return N.useEffect(()=>(zf.push(e),()=>{const r=zf.indexOf(e);r>-1&&zf.splice(r,1)}),[t]),{...t,toast:v8,dismiss:r=>Au({type:"DISMISS_TOAST",toastId:r})}}function Ee(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function hv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function h0(...t){return e=>{let r=!1;const n=t.map(s=>{const o=hv(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():hv(t[s],null)}}}}function Ze(...t){return N.useCallback(h0(...t),t)}function b8(t,e){const r=N.createContext(e),n=o=>{const{children:l,...u}=o,h=N.useMemo(()=>u,Object.values(u));return p.jsx(r.Provider,{value:h,children:l})};n.displayName=t+"Provider";function s(o){const l=N.useContext(r);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,s]}function On(t,e=[]){let r=[];function n(o,l){const u=N.createContext(l),h=r.length;r=[...r,l];const f=y=>{var R;const{scope:v,children:b,...A}=y,E=((R=v==null?void 0:v[t])==null?void 0:R[h])||u,I=N.useMemo(()=>A,Object.values(A));return p.jsx(E.Provider,{value:I,children:b})};f.displayName=o+"Provider";function x(y,v){var E;const b=((E=v==null?void 0:v[t])==null?void 0:E[h])||u,A=N.useContext(b);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,x]}const s=()=>{const o=r.map(l=>N.createContext(l));return function(u){const h=(u==null?void 0:u[t])||o;return N.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[n,E8(s,...e)]}function E8(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=n.reduce((u,{useScope:h,scopeName:f})=>{const y=h(o)[`__scope${f}`];return{...u,...y}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function Ua(t){const e=S8(t),r=N.forwardRef((n,s)=>{const{children:o,...l}=n,u=N.Children.toArray(o),h=u.find(N8);if(h){const f=h.props.children,x=u.map(y=>y===h?N.Children.count(f)>1?N.Children.only(null):N.isValidElement(f)?f.props.children:null:y);return p.jsx(e,{...l,ref:s,children:N.isValidElement(f)?N.cloneElement(f,void 0,x):null})}return p.jsx(e,{...l,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}var C8=Ua("Slot");function S8(t){const e=N.forwardRef((r,n)=>{const{children:s,...o}=r;if(N.isValidElement(s)){const l=I8(s),u=T8(o,s.props);return s.type!==N.Fragment&&(u.ref=n?h0(n,l):l),N.cloneElement(s,u)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zE=Symbol("radix.slottable");function A8(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=zE,e}function N8(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zE}function T8(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...u)=>{const h=o(...u);return s(...u),h}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function I8(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function p0(t){const e=t+"CollectionProvider",[r,n]=On(e),[s,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),l=E=>{const{scope:I,children:R}=E,C=fe.useRef(null),S=fe.useRef(new Map).current;return p.jsx(s,{scope:I,itemMap:S,collectionRef:C,children:R})};l.displayName=e;const u=t+"CollectionSlot",h=Ua(u),f=fe.forwardRef((E,I)=>{const{scope:R,children:C}=E,S=o(u,R),O=Ze(I,S.collectionRef);return p.jsx(h,{ref:O,children:C})});f.displayName=u;const x=t+"CollectionItemSlot",y="data-radix-collection-item",v=Ua(x),b=fe.forwardRef((E,I)=>{const{scope:R,children:C,...S}=E,O=fe.useRef(null),k=Ze(I,O),F=o(x,R);return fe.useEffect(()=>(F.itemMap.set(O,{ref:O,...S}),()=>void F.itemMap.delete(O))),p.jsx(v,{[y]:"",ref:k,children:C})});b.displayName=x;function A(E){const I=o(t+"CollectionConsumer",E);return fe.useCallback(()=>{const C=I.collectionRef.current;if(!C)return[];const S=Array.from(C.querySelectorAll(`[${y}]`));return Array.from(I.itemMap.values()).sort((F,B)=>S.indexOf(F.ref.current)-S.indexOf(B.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:l,Slot:f,ItemSlot:b},A,n]}var R8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=R8.reduce((t,e)=>{const r=Ua(`Primitive.${e}`),n=N.forwardRef((s,o)=>{const{asChild:l,...u}=s,h=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(h,{...u,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function dx(t,e){t&&qa.flushSync(()=>t.dispatchEvent(e))}function fr(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function O8(t,e=globalThis==null?void 0:globalThis.document){const r=fr(t);N.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var M8="DismissableLayer",cm="dismissableLayer.update",k8="dismissableLayer.pointerDownOutside",P8="dismissableLayer.focusOutside",pv,VE=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tc=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...h}=t,f=N.useContext(VE),[x,y]=N.useState(null),v=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=N.useState({}),A=Ze(e,B=>y(B)),E=Array.from(f.layers),[I]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),R=E.indexOf(I),C=x?E.indexOf(x):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,O=C>=R,k=D8(B=>{const P=B.target,L=[...f.branches].some(W=>W.contains(P));!O||L||(s==null||s(B),l==null||l(B),B.defaultPrevented||u==null||u())},v),F=L8(B=>{const P=B.target;[...f.branches].some(W=>W.contains(P))||(o==null||o(B),l==null||l(B),B.defaultPrevented||u==null||u())},v);return O8(B=>{C===f.layers.size-1&&(n==null||n(B),!B.defaultPrevented&&u&&(B.preventDefault(),u()))},v),N.useEffect(()=>{if(x)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(pv=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(x)),f.layers.add(x),mv(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=pv)}},[x,v,r,f]),N.useEffect(()=>()=>{x&&(f.layers.delete(x),f.layersWithOutsidePointerEventsDisabled.delete(x),mv())},[x,f]),N.useEffect(()=>{const B=()=>b({});return document.addEventListener(cm,B),()=>document.removeEventListener(cm,B)},[]),p.jsx(Me.div,{...h,ref:A,style:{pointerEvents:S?O?"auto":"none":void 0,...t.style},onFocusCapture:Ee(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Ee(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Ee(t.onPointerDownCapture,k.onPointerDownCapture)})});Tc.displayName=M8;var j8="DismissableLayerBranch",HE=N.forwardRef((t,e)=>{const r=N.useContext(VE),n=N.useRef(null),s=Ze(e,n);return N.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),p.jsx(Me.div,{...t,ref:s})});HE.displayName=j8;function D8(t,e=globalThis==null?void 0:globalThis.document){const r=fr(t),n=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let h=function(){$E(k8,r,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function L8(t,e=globalThis==null?void 0:globalThis.document){const r=fr(t),n=N.useRef(!1);return N.useEffect(()=>{const s=o=>{o.target&&!n.current&&$E(P8,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function mv(){const t=new CustomEvent(cm);document.dispatchEvent(t)}function $E(t,e,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?dx(s,o):s.dispatchEvent(o)}var B8=Tc,F8=HE,kr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},U8="Portal",bd=N.forwardRef((t,e)=>{var u;const{container:r,...n}=t,[s,o]=N.useState(!1);kr(()=>o(!0),[]);const l=r||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?FE.createPortal(p.jsx(Me.div,{...n,ref:e}),l):null});bd.displayName=U8;function z8(t,e){return N.useReducer((r,n)=>e[r][n]??r,t)}var tn=t=>{const{present:e,children:r}=t,n=V8(e),s=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),o=Ze(n.ref,H8(s));return typeof r=="function"||n.isPresent?N.cloneElement(s,{ref:o}):null};tn.displayName="Presence";function V8(t){const[e,r]=N.useState(),n=N.useRef(null),s=N.useRef(t),o=N.useRef("none"),l=t?"mounted":"unmounted",[u,h]=z8(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const f=uf(n.current);o.current=u==="mounted"?f:"none"},[u]),kr(()=>{const f=n.current,x=s.current;if(x!==t){const v=o.current,b=uf(f);t?h("MOUNT"):b==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(x&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),kr(()=>{if(e){let f;const x=e.ownerDocument.defaultView??window,y=b=>{const E=uf(n.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",f=x.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},v=b=>{b.target===e&&(o.current=uf(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{x.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:N.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function uf(t){return(t==null?void 0:t.animationName)||"none"}function H8(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var $8=vg[" useInsertionEffect ".trim().toString()]||kr;function Vi({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,l]=W8({defaultProp:e,onChange:r}),u=t!==void 0,h=u?t:s;{const x=N.useRef(t!==void 0);N.useEffect(()=>{const y=x.current;y!==u&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,n])}const f=N.useCallback(x=>{var y;if(u){const v=G8(x)?x(t):x;v!==t&&((y=l.current)==null||y.call(l,v))}else o(x)},[u,t,o,l]);return[h,f]}function W8({defaultProp:t,onChange:e}){const[r,n]=N.useState(t),s=N.useRef(r),o=N.useRef(e);return $8(()=>{o.current=e},[e]),N.useEffect(()=>{var l;s.current!==r&&((l=o.current)==null||l.call(o,r),s.current=r)},[r,s]),[r,n,o]}function G8(t){return typeof t=="function"}var WE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Y8="VisuallyHidden",m0=N.forwardRef((t,e)=>p.jsx(Me.span,{...t,ref:e,style:{...WE,...t.style}}));m0.displayName=Y8;var X8=m0,fx="ToastProvider",[hx,q8,K8]=p0("Toast"),[GE,tV]=On("Toast",[K8]),[Q8,g0]=GE(fx),YE=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:l}=t,[u,h]=N.useState(null),[f,x]=N.useState(0),y=N.useRef(!1),v=N.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fx}\`. Expected non-empty \`string\`.`),p.jsx(hx.Provider,{scope:e,children:p.jsx(Q8,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:N.useCallback(()=>x(b=>b+1),[]),onToastRemove:N.useCallback(()=>x(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:l})})};YE.displayName=fx;var XE="ToastViewport",Z8=["F8"],um="toast.viewportPause",dm="toast.viewportResume",qE=N.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=Z8,label:s="Notifications ({hotkey})",...o}=t,l=g0(XE,r),u=q8(r),h=N.useRef(null),f=N.useRef(null),x=N.useRef(null),y=N.useRef(null),v=Ze(e,y,l.onViewportChange),b=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=l.toastCount>0;N.useEffect(()=>{const I=R=>{var S;n.length!==0&&n.every(O=>R[O]||R.code===O)&&((S=y.current)==null||S.focus())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n]),N.useEffect(()=>{const I=h.current,R=y.current;if(A&&I&&R){const C=()=>{if(!l.isClosePausedRef.current){const F=new CustomEvent(um);R.dispatchEvent(F),l.isClosePausedRef.current=!0}},S=()=>{if(l.isClosePausedRef.current){const F=new CustomEvent(dm);R.dispatchEvent(F),l.isClosePausedRef.current=!1}},O=F=>{!I.contains(F.relatedTarget)&&S()},k=()=>{I.contains(document.activeElement)||S()};return I.addEventListener("focusin",C),I.addEventListener("focusout",O),I.addEventListener("pointermove",C),I.addEventListener("pointerleave",k),window.addEventListener("blur",C),window.addEventListener("focus",S),()=>{I.removeEventListener("focusin",C),I.removeEventListener("focusout",O),I.removeEventListener("pointermove",C),I.removeEventListener("pointerleave",k),window.removeEventListener("blur",C),window.removeEventListener("focus",S)}}},[A,l.isClosePausedRef]);const E=N.useCallback(({tabbingDirection:I})=>{const C=u().map(S=>{const O=S.ref.current,k=[O,...dM(O)];return I==="forwards"?k:k.reverse()});return(I==="forwards"?C.reverse():C).flat()},[u]);return N.useEffect(()=>{const I=y.current;if(I){const R=C=>{var k,F,B;const S=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!S){const P=document.activeElement,L=C.shiftKey;if(C.target===I&&L){(k=f.current)==null||k.focus();return}const K=E({tabbingDirection:L?"backwards":"forwards"}),ie=K.findIndex(G=>G===P);B1(K.slice(ie+1))?C.preventDefault():L?(F=f.current)==null||F.focus():(B=x.current)==null||B.focus()}};return I.addEventListener("keydown",R),()=>I.removeEventListener("keydown",R)}},[u,E]),p.jsxs(F8,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:A?void 0:"none"},children:[A&&p.jsx(fm,{ref:f,onFocusFromOutsideViewport:()=>{const I=E({tabbingDirection:"forwards"});B1(I)}}),p.jsx(hx.Slot,{scope:r,children:p.jsx(Me.ol,{tabIndex:-1,...o,ref:v})}),A&&p.jsx(fm,{ref:x,onFocusFromOutsideViewport:()=>{const I=E({tabbingDirection:"backwards"});B1(I)}})]})});qE.displayName=XE;var KE="ToastFocusProxy",fm=N.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,o=g0(KE,r);return p.jsx(m0,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var f;const u=l.relatedTarget;!((f=o.viewport)!=null&&f.contains(u))&&n()}})});fm.displayName=KE;var Ed="Toast",J8="toast.swipeStart",eM="toast.swipeMove",tM="toast.swipeCancel",rM="toast.swipeEnd",QE=N.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...l}=t,[u,h]=Vi({prop:n,defaultProp:s??!0,onChange:o,caller:Ed});return p.jsx(tn,{present:r||u,children:p.jsx(iM,{open:u,...l,ref:e,onClose:()=>h(!1),onPause:fr(t.onPause),onResume:fr(t.onResume),onSwipeStart:Ee(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(t.onSwipeMove,f=>{const{x,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Ee(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(t.onSwipeEnd,f=>{const{x,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});QE.displayName=Ed;var[nM,sM]=GE(Ed,{onClose(){}}),iM=N.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:l,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:x,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...A}=t,E=g0(Ed,r),[I,R]=N.useState(null),C=Ze(e,G=>R(G)),S=N.useRef(null),O=N.useRef(null),k=s||E.duration,F=N.useRef(0),B=N.useRef(k),P=N.useRef(0),{onToastAdd:L,onToastRemove:W}=E,q=fr(()=>{var $;(I==null?void 0:I.contains(document.activeElement))&&(($=E.viewport)==null||$.focus()),l()}),K=N.useCallback(G=>{!G||G===1/0||(window.clearTimeout(P.current),F.current=new Date().getTime(),P.current=window.setTimeout(q,G))},[q]);N.useEffect(()=>{const G=E.viewport;if(G){const $=()=>{K(B.current),f==null||f()},re=()=>{const Z=new Date().getTime()-F.current;B.current=B.current-Z,window.clearTimeout(P.current),h==null||h()};return G.addEventListener(um,re),G.addEventListener(dm,$),()=>{G.removeEventListener(um,re),G.removeEventListener(dm,$)}}},[E.viewport,k,h,f,K]),N.useEffect(()=>{o&&!E.isClosePausedRef.current&&K(k)},[o,k,E.isClosePausedRef,K]),N.useEffect(()=>(L(),()=>W()),[L,W]);const ie=N.useMemo(()=>I?sC(I):null,[I]);return E.viewport?p.jsxs(p.Fragment,{children:[ie&&p.jsx(oM,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:ie}),p.jsx(nM,{scope:r,onClose:q,children:qa.createPortal(p.jsx(hx.ItemSlot,{scope:r,children:p.jsx(B8,{asChild:!0,onEscapeKeyDown:Ee(u,()=>{E.isFocusedToastEscapeKeyDownRef.current||q(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":E.swipeDirection,...A,ref:C,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ee(t.onKeyDown,G=>{G.key==="Escape"&&(u==null||u(G.nativeEvent),G.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:Ee(t.onPointerDown,G=>{G.button===0&&(S.current={x:G.clientX,y:G.clientY})}),onPointerMove:Ee(t.onPointerMove,G=>{if(!S.current)return;const $=G.clientX-S.current.x,re=G.clientY-S.current.y,Z=!!O.current,Q=["left","right"].includes(E.swipeDirection),H=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,te=Q?H(0,$):0,ce=Q?0:H(0,re),ae=G.pointerType==="touch"?10:2,oe={x:te,y:ce},ue={originalEvent:G,delta:oe};Z?(O.current=oe,df(eM,y,ue,{discrete:!1})):gv(oe,E.swipeDirection,ae)?(O.current=oe,df(J8,x,ue,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs($)>ae||Math.abs(re)>ae)&&(S.current=null)}),onPointerUp:Ee(t.onPointerUp,G=>{const $=O.current,re=G.target;if(re.hasPointerCapture(G.pointerId)&&re.releasePointerCapture(G.pointerId),O.current=null,S.current=null,$){const Z=G.currentTarget,Q={originalEvent:G,delta:$};gv($,E.swipeDirection,E.swipeThreshold)?df(rM,b,Q,{discrete:!0}):df(tM,v,Q,{discrete:!0}),Z.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),oM=t=>{const{__scopeToast:e,children:r,...n}=t,s=g0(Ed,e),[o,l]=N.useState(!1),[u,h]=N.useState(!1);return cM(()=>l(!0)),N.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:p.jsx(bd,{asChild:!0,children:p.jsx(m0,{...n,children:o&&p.jsxs(p.Fragment,{children:[s.label," ",r]})})})},aM="ToastTitle",ZE=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Me.div,{...n,ref:e})});ZE.displayName=aM;var lM="ToastDescription",JE=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Me.div,{...n,ref:e})});JE.displayName=lM;var eC="ToastAction",tC=N.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?p.jsx(nC,{altText:r,asChild:!0,children:p.jsx(px,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${eC}\`. Expected non-empty \`string\`.`),null)});tC.displayName=eC;var rC="ToastClose",px=N.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=sM(rC,r);return p.jsx(nC,{asChild:!0,children:p.jsx(Me.button,{type:"button",...n,ref:e,onClick:Ee(t.onClick,s.onClose)})})});px.displayName=rC;var nC=N.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return p.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function sC(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),uM(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...sC(n))}}),e}function df(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?dx(s,o):s.dispatchEvent(o)}var gv=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),o=n>s;return e==="left"||e==="right"?o&&n>r:!o&&s>r};function cM(t=()=>{}){const e=fr(t);kr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function uM(t){return t.nodeType===t.ELEMENT_NODE}function dM(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function B1(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var fM=YE,iC=qE,oC=QE,aC=ZE,lC=JE,cC=tC,uC=px;function dC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=dC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function fC(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=dC(t))&&(n&&(n+=" "),n+=e);return n}const xv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yv=fC,x0=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return yv(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(f=>{const x=r==null?void 0:r[f],y=o==null?void 0:o[f];if(x===null)return null;const v=xv(x)||xv(y);return s[f][v]}),u=r&&Object.entries(r).reduce((f,x)=>{let[y,v]=x;return v===void 0||(f[y]=v),f},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((f,x)=>{let{class:y,className:v,...b}=x;return Object.entries(b).every(A=>{let[E,I]=A;return Array.isArray(I)?I.includes({...o,...u}[E]):{...o,...u}[E]===I})?[...f,y,v]:f},[]);return yv(t,l,h,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hC=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:l,...u},h)=>N.createElement("svg",{ref:h,...pM,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:hC("lucide",s),...u},[...l.map(([f,x])=>N.createElement(f,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(t,e)=>{const r=N.forwardRef(({className:n,...s},o)=>N.createElement(mM,{ref:o,iconNode:e,className:hC(`lucide-${hM(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=Ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=Ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=Ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=Ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=Ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=Ge("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=Ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=Ge("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=Ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=Ge("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=Ge("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=Ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Ge("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=Ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=Ge("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=Ge("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=Ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Ge("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=Ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Ge("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=Ge("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Ge("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Ge("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ge("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Ge("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wx="-",TM=t=>{const e=RM(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const u=l.split(wx);return u[0]===""&&u.length!==1&&u.shift(),IC(u,e)||IM(l)},getConflictingClassGroupIds:(l,u)=>{const h=r[l]||[];return u&&n[l]?[...h,...n[l]]:h}}},IC=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?IC(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(wx);return(l=e.validators.find(({validator:u})=>u(o)))==null?void 0:l.classGroupId},_v=/^\[(.+)\]$/,IM=t=>{if(_v.test(t)){const e=_v.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},RM=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return MM(Object.entries(t.classGroups),r).forEach(([o,l])=>{pm(l,n,o,e)}),n},pm=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:bv(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(OM(s)){pm(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,l])=>{pm(l,bv(e,o),r,n)})})},bv=(t,e)=>{let r=t;return e.split(wx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},OM=t=>t.isThemeGetter,MM=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,u])=>[e+l,u])):o);return[r,s]}):t,kM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,l)=>{r.set(o,l),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set(o,l){r.has(o)?r.set(o,l):s(o,l)}}},RC="!",PM=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,l=u=>{const h=[];let f=0,x=0,y;for(let I=0;I<u.length;I++){let R=u[I];if(f===0){if(R===s&&(n||u.slice(I,I+o)===e)){h.push(u.slice(x,I)),x=I+o;continue}if(R==="/"){y=I;continue}}R==="["?f++:R==="]"&&f--}const v=h.length===0?u:u.substring(x),b=v.startsWith(RC),A=b?v.substring(1):v,E=y&&y>x?y-x:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:E}};return r?u=>r({className:u,parseClassName:l}):l},jM=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},DM=t=>({cache:kM(t.cacheSize),parseClassName:PM(t),...TM(t)}),LM=/\s+/,BM=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],l=t.trim().split(LM);let u="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{modifiers:x,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=r(f);let A=!!b,E=n(A?v.substring(0,b):v);if(!E){if(!A){u=f+(u.length>0?" "+u:u);continue}if(E=n(v),!E){u=f+(u.length>0?" "+u:u);continue}A=!1}const I=jM(x).join(":"),R=y?I+RC:I,C=R+E;if(o.includes(C))continue;o.push(C);const S=s(E,A);for(let O=0;O<S.length;++O){const k=S[O];o.push(R+k)}u=f+(u.length>0?" "+u:u)}return u};function FM(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=OC(e))&&(n&&(n+=" "),n+=r);return n}const OC=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=OC(t[n]))&&(r&&(r+=" "),r+=e);return r};function UM(t,...e){let r,n,s,o=l;function l(h){const f=e.reduce((x,y)=>y(x),t());return r=DM(f),n=r.cache.get,s=r.cache.set,o=u,u(h)}function u(h){const f=n(h);if(f)return f;const x=BM(h,r);return s(h,x),x}return function(){return o(FM.apply(null,arguments))}}const Pt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},MC=/^\[(?:([a-z-]+):)?(.+)\]$/i,zM=/^\d+\/\d+$/,VM=new Set(["px","full","screen"]),HM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$M=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ci=t=>Gl(t)||VM.has(t)||zM.test(t),no=t=>Oc(t,"length",tk),Gl=t=>!!t&&!Number.isNaN(Number(t)),U1=t=>Oc(t,"number",Gl),su=t=>!!t&&Number.isInteger(Number(t)),XM=t=>t.endsWith("%")&&Gl(t.slice(0,-1)),et=t=>MC.test(t),so=t=>HM.test(t),qM=new Set(["length","size","percentage"]),KM=t=>Oc(t,qM,kC),QM=t=>Oc(t,"position",kC),ZM=new Set(["image","url"]),JM=t=>Oc(t,ZM,nk),ek=t=>Oc(t,"",rk),iu=()=>!0,Oc=(t,e,r)=>{const n=MC.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},tk=t=>$M.test(t)&&!WM.test(t),kC=()=>!1,rk=t=>GM.test(t),nk=t=>YM.test(t),sk=()=>{const t=Pt("colors"),e=Pt("spacing"),r=Pt("blur"),n=Pt("brightness"),s=Pt("borderColor"),o=Pt("borderRadius"),l=Pt("borderSpacing"),u=Pt("borderWidth"),h=Pt("contrast"),f=Pt("grayscale"),x=Pt("hueRotate"),y=Pt("invert"),v=Pt("gap"),b=Pt("gradientColorStops"),A=Pt("gradientColorStopPositions"),E=Pt("inset"),I=Pt("margin"),R=Pt("opacity"),C=Pt("padding"),S=Pt("saturate"),O=Pt("scale"),k=Pt("sepia"),F=Pt("skew"),B=Pt("space"),P=Pt("translate"),L=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",et,e],K=()=>[et,e],ie=()=>["",Ci,no],G=()=>["auto",Gl,et],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",et],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[Gl,et];return{cacheSize:500,separator:":",theme:{colors:[iu],spacing:[Ci,no],blur:["none","",so,et],brightness:ce(),borderColor:[t],borderRadius:["none","","full",so,et],borderSpacing:K(),borderWidth:ie(),contrast:ce(),grayscale:H(),hueRotate:ce(),invert:H(),gap:K(),gradientColorStops:[t],gradientColorStopPositions:[XM,no],inset:q(),margin:q(),opacity:ce(),padding:K(),saturate:ce(),scale:ce(),sepia:H(),skew:ce(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",et]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),et]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",su,et]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",et]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",su,et]}],"grid-cols":[{"grid-cols":[iu]}],"col-start-end":[{col:["auto",{span:["full",su,et]},et]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[iu]}],"row-start-end":[{row:["auto",{span:[su,et]},et]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",et]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",et,e]}],"min-w":[{"min-w":[et,e,"min","max","fit"]}],"max-w":[{"max-w":[et,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[et,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[et,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[et,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[et,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,no]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",U1]}],"font-family":[{font:[iu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",et]}],"line-clamp":[{"line-clamp":["none",Gl,U1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ci,et]}],"list-image":[{"list-image":["none",et]}],"list-style-type":[{list:["none","disc","decimal",et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ci,no]}],"underline-offset":[{"underline-offset":["auto",Ci,et]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),QM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",KM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},JM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Ci,et]}],"outline-w":[{outline:[Ci,no]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Ci,no]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,ek]}],"shadow-color":[{shadow:[iu]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",so,et]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[y]}],saturate:[{saturate:[S]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",et]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",et]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[su,et]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",et]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ci,no,U1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ik=UM(sk);function Oe(...t){return ik(fC(t))}const ok=fM,PC=N.forwardRef(({className:t,...e},r)=>p.jsx(iC,{ref:r,className:Oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));PC.displayName=iC.displayName;const ak=x0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jC=N.forwardRef(({className:t,variant:e,...r},n)=>p.jsx(oC,{ref:n,className:Oe(ak({variant:e}),t),...r}));jC.displayName=oC.displayName;const lk=N.forwardRef(({className:t,...e},r)=>p.jsx(cC,{ref:r,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));lk.displayName=cC.displayName;const DC=N.forwardRef(({className:t,...e},r)=>p.jsx(uC,{ref:r,className:Oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(TC,{className:"h-4 w-4"})}));DC.displayName=uC.displayName;const LC=N.forwardRef(({className:t,...e},r)=>p.jsx(aC,{ref:r,className:Oe("text-sm font-semibold",t),...e}));LC.displayName=aC.displayName;const BC=N.forwardRef(({className:t,...e},r)=>p.jsx(lC,{ref:r,className:Oe("text-sm opacity-90",t),...e}));BC.displayName=lC.displayName;function ck(){const{toasts:t}=_8();return p.jsxs(ok,{children:[t.map(function({id:e,title:r,description:n,action:s,...o}){return p.jsxs(jC,{...o,children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(LC,{children:r}),n&&p.jsx(BC,{children:n})]}),s,p.jsx(DC,{})]},e)}),p.jsx(PC,{})]})}var Ev=["light","dark"],uk="(prefers-color-scheme: dark)",dk=N.createContext(void 0),fk={setTheme:t=>{},themes:[]},hk=()=>{var t;return(t=N.useContext(dk))!=null?t:fk};N.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:l,attrs:u,nonce:h})=>{let f=o==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(A=>`'${A}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,y=s?Ev.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(A,E=!1,I=!0)=>{let R=l?l[A]:A,C=E?A+"|| ''":`'${R}'`,S="";return s&&I&&!E&&Ev.includes(A)&&(S+=`d.style.colorScheme = '${A}';`),r==="class"?E||R?S+=`c.add(${C})`:S+="null":R&&(S+=`d[s](n,${C})`),S},b=t?`!function(){${x}${v(t)}}()`:n?`!function(){try{${x}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${uk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}${f?"":"else{"+v(o,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${e}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}else{${v(o,!1,!1)};}${y}}catch(t){}}();`;return N.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var pk=t=>{switch(t){case"success":return xk;case"info":return wk;case"warning":return yk;case"error":return vk;default:return null}},mk=Array(12).fill(0),gk=({visible:t,className:e})=>fe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},fe.createElement("div",{className:"sonner-spinner"},mk.map((r,n)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),xk=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yk=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wk=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vk=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_k=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bk=()=>{let[t,e]=fe.useState(document.hidden);return fe.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},mm=1,Ek=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:mm++,o=this.toasts.find(u=>u.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...t,id:s,title:r}),{...u,...t,id:s,dismissible:l,title:r}):u):this.addToast({title:r,...n,dismissible:l,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,o,l=n.then(async h=>{if(o=["resolve",h],fe.isValidElement(h))s=!1,this.create({id:r,type:"default",message:h});else if(Sk(h)&&!h.ok){s=!1;let f=typeof e.error=="function"?await e.error(`HTTP error! status: ${h.status}`):e.error,x=typeof e.description=="function"?await e.description(`HTTP error! status: ${h.status}`):e.description;this.create({id:r,type:"error",message:f,description:x})}else if(e.success!==void 0){s=!1;let f=typeof e.success=="function"?await e.success(h):e.success,x=typeof e.description=="function"?await e.description(h):e.description;this.create({id:r,type:"success",message:f,description:x})}}).catch(async h=>{if(o=["reject",h],e.error!==void 0){s=!1;let f=typeof e.error=="function"?await e.error(h):e.error,x=typeof e.description=="function"?await e.description(h):e.description;this.create({id:r,type:"error",message:f,description:x})}}).finally(()=>{var h;s&&(this.dismiss(r),r=void 0),(h=e.finally)==null||h.call(e)}),u=()=>new Promise((h,f)=>l.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||mm++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},vn=new Ek,Ck=(t,e)=>{let r=(e==null?void 0:e.id)||mm++;return vn.addToast({title:t,...e,id:r}),r},Sk=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Ak=Ck,Nk=()=>vn.toasts,Tk=()=>vn.getActiveToasts(),Ce=Object.assign(Ak,{success:vn.success,info:vn.info,warning:vn.warning,error:vn.error,custom:vn.custom,message:vn.message,promise:vn.promise,dismiss:vn.dismiss,loading:vn.loading},{getHistory:Nk,getToasts:Tk});function Ik(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Ik(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ff(t){return t.label!==void 0}var Rk=3,Ok="32px",Mk="16px",Cv=4e3,kk=356,Pk=14,jk=20,Dk=200;function As(...t){return t.filter(Boolean).join(" ")}function Lk(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var Bk=t=>{var e,r,n,s,o,l,u,h,f,x,y;let{invert:v,toast:b,unstyled:A,interacting:E,setHeights:I,visibleToasts:R,heights:C,index:S,toasts:O,expanded:k,removeToast:F,defaultRichColors:B,closeButton:P,style:L,cancelButtonStyle:W,actionButtonStyle:q,className:K="",descriptionClassName:ie="",duration:G,position:$,gap:re,loadingIcon:Z,expandByDefault:Q,classNames:H,icons:te,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:ae}=t,[oe,ue]=fe.useState(null),[ke,ye]=fe.useState(null),[_e,Re]=fe.useState(!1),[Xe,Ye]=fe.useState(!1),[Ue,nt]=fe.useState(!1),[Ve,lr]=fe.useState(!1),[wr,Nr]=fe.useState(!1),[he,Pe]=fe.useState(0),[Se,vt]=fe.useState(0),ve=fe.useRef(b.duration||G||Cv),jr=fe.useRef(null),it=fe.useRef(null),Zt=S===0,ea=S+1<=R,St=b.type,bi=b.dismissible!==!1,qs=b.className||"",Dr=b.descriptionClassName||"",ta=fe.useMemo(()=>C.findIndex(Le=>Le.toastId===b.id)||0,[C,b.id]),rl=fe.useMemo(()=>{var Le;return(Le=b.closeButton)!=null?Le:P},[b.closeButton,P]),jd=fe.useMemo(()=>b.duration||G||Cv,[b.duration,G]),Bt=fe.useRef(0),be=fe.useRef(0),Jt=fe.useRef(0),ft=fe.useRef(null),[Ft,ra]=$.split("-"),nl=fe.useMemo(()=>C.reduce((Le,gt,Je)=>Je>=ta?Le:Le+gt.height,0),[C,ta]),Uc=bk(),ht=b.invert||v,bs=St==="loading";be.current=fe.useMemo(()=>ta*re+nl,[ta,nl]),fe.useEffect(()=>{ve.current=jd},[jd]),fe.useEffect(()=>{Re(!0)},[]),fe.useEffect(()=>{let Le=it.current;if(Le){let gt=Le.getBoundingClientRect().height;return vt(gt),I(Je=>[{toastId:b.id,height:gt,position:b.position},...Je]),()=>I(Je=>Je.filter(Tr=>Tr.toastId!==b.id))}},[I,b.id]),fe.useLayoutEffect(()=>{if(!_e)return;let Le=it.current,gt=Le.style.height;Le.style.height="auto";let Je=Le.getBoundingClientRect().height;Le.style.height=gt,vt(Je),I(Tr=>Tr.find($r=>$r.toastId===b.id)?Tr.map($r=>$r.toastId===b.id?{...$r,height:Je}:$r):[{toastId:b.id,height:Je,position:b.position},...Tr])},[_e,b.title,b.description,I,b.id]);let Es=fe.useCallback(()=>{Ye(!0),Pe(be.current),I(Le=>Le.filter(gt=>gt.toastId!==b.id)),setTimeout(()=>{F(b)},Dk)},[b,F,I,be]);fe.useEffect(()=>{if(b.promise&&St==="loading"||b.duration===1/0||b.type==="loading")return;let Le;return k||E||ae&&Uc?(()=>{if(Jt.current<Bt.current){let gt=new Date().getTime()-Bt.current;ve.current=ve.current-gt}Jt.current=new Date().getTime()})():ve.current!==1/0&&(Bt.current=new Date().getTime(),Le=setTimeout(()=>{var gt;(gt=b.onAutoClose)==null||gt.call(b,b),Es()},ve.current)),()=>clearTimeout(Le)},[k,E,b,St,ae,Uc,Es]),fe.useEffect(()=>{b.delete&&Es()},[Es,b.delete]);function Dd(){var Le,gt,Je;return te!=null&&te.loading?fe.createElement("div",{className:As(H==null?void 0:H.loader,(Le=b==null?void 0:b.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":St==="loading"},te.loading):Z?fe.createElement("div",{className:As(H==null?void 0:H.loader,(gt=b==null?void 0:b.classNames)==null?void 0:gt.loader,"sonner-loader"),"data-visible":St==="loading"},Z):fe.createElement(gk,{className:As(H==null?void 0:H.loader,(Je=b==null?void 0:b.classNames)==null?void 0:Je.loader),visible:St==="loading"})}return fe.createElement("li",{tabIndex:0,ref:it,className:As(K,qs,H==null?void 0:H.toast,(e=b==null?void 0:b.classNames)==null?void 0:e.toast,H==null?void 0:H.default,H==null?void 0:H[St],(r=b==null?void 0:b.classNames)==null?void 0:r[St]),"data-sonner-toast":"","data-rich-colors":(n=b.richColors)!=null?n:B,"data-styled":!(b.jsx||b.unstyled||A),"data-mounted":_e,"data-promise":!!b.promise,"data-swiped":wr,"data-removed":Xe,"data-visible":ea,"data-y-position":Ft,"data-x-position":ra,"data-index":S,"data-front":Zt,"data-swiping":Ue,"data-dismissible":bi,"data-type":St,"data-invert":ht,"data-swipe-out":Ve,"data-swipe-direction":ke,"data-expanded":!!(k||Q&&_e),style:{"--index":S,"--toasts-before":S,"--z-index":O.length-S,"--offset":`${Xe?he:be.current}px`,"--initial-height":Q?"auto":`${Se}px`,...L,...b.style},onDragEnd:()=>{nt(!1),ue(null),ft.current=null},onPointerDown:Le=>{bs||!bi||(jr.current=new Date,Pe(be.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(nt(!0),ft.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,gt,Je,Tr;if(Ve||!bi)return;ft.current=null;let $r=Number(((Le=it.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),vr=Number(((gt=it.current)==null?void 0:gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ei=new Date().getTime()-((Je=jr.current)==null?void 0:Je.getTime()),_r=oe==="x"?$r:vr,ts=Math.abs(_r)/Ei;if(Math.abs(_r)>=jk||ts>.11){Pe(be.current),(Tr=b.onDismiss)==null||Tr.call(b,b),ye(oe==="x"?$r>0?"right":"left":vr>0?"down":"up"),Es(),lr(!0),Nr(!1);return}nt(!1),ue(null)},onPointerMove:Le=>{var gt,Je,Tr,$r;if(!ft.current||!bi||((gt=window.getSelection())==null?void 0:gt.toString().length)>0)return;let vr=Le.clientY-ft.current.y,Ei=Le.clientX-ft.current.x,_r=(Je=t.swipeDirections)!=null?Je:Lk($);!oe&&(Math.abs(Ei)>1||Math.abs(vr)>1)&&ue(Math.abs(Ei)>Math.abs(vr)?"x":"y");let ts={x:0,y:0};oe==="y"?(_r.includes("top")||_r.includes("bottom"))&&(_r.includes("top")&&vr<0||_r.includes("bottom")&&vr>0)&&(ts.y=vr):oe==="x"&&(_r.includes("left")||_r.includes("right"))&&(_r.includes("left")&&Ei<0||_r.includes("right")&&Ei>0)&&(ts.x=Ei),(Math.abs(ts.x)>0||Math.abs(ts.y)>0)&&Nr(!0),(Tr=it.current)==null||Tr.style.setProperty("--swipe-amount-x",`${ts.x}px`),($r=it.current)==null||$r.style.setProperty("--swipe-amount-y",`${ts.y}px`)}},rl&&!b.jsx?fe.createElement("button",{"aria-label":ce,"data-disabled":bs,"data-close-button":!0,onClick:bs||!bi?()=>{}:()=>{var Le;Es(),(Le=b.onDismiss)==null||Le.call(b,b)},className:As(H==null?void 0:H.closeButton,(s=b==null?void 0:b.classNames)==null?void 0:s.closeButton)},(o=te==null?void 0:te.close)!=null?o:_k):null,b.jsx||N.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:fe.createElement(fe.Fragment,null,St||b.icon||b.promise?fe.createElement("div",{"data-icon":"",className:As(H==null?void 0:H.icon,(l=b==null?void 0:b.classNames)==null?void 0:l.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Dd():null,b.type!=="loading"?b.icon||(te==null?void 0:te[St])||pk(St):null):null,fe.createElement("div",{"data-content":"",className:As(H==null?void 0:H.content,(u=b==null?void 0:b.classNames)==null?void 0:u.content)},fe.createElement("div",{"data-title":"",className:As(H==null?void 0:H.title,(h=b==null?void 0:b.classNames)==null?void 0:h.title)},typeof b.title=="function"?b.title():b.title),b.description?fe.createElement("div",{"data-description":"",className:As(ie,Dr,H==null?void 0:H.description,(f=b==null?void 0:b.classNames)==null?void 0:f.description)},typeof b.description=="function"?b.description():b.description):null),N.isValidElement(b.cancel)?b.cancel:b.cancel&&ff(b.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||W,onClick:Le=>{var gt,Je;ff(b.cancel)&&bi&&((Je=(gt=b.cancel).onClick)==null||Je.call(gt,Le),Es())},className:As(H==null?void 0:H.cancelButton,(x=b==null?void 0:b.classNames)==null?void 0:x.cancelButton)},b.cancel.label):null,N.isValidElement(b.action)?b.action:b.action&&ff(b.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||q,onClick:Le=>{var gt,Je;ff(b.action)&&((Je=(gt=b.action).onClick)==null||Je.call(gt,Le),!Le.defaultPrevented&&Es())},className:As(H==null?void 0:H.actionButton,(y=b==null?void 0:b.classNames)==null?void 0:y.actionButton)},b.action.label):null))};function Sv(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Fk(t,e){let r={};return[t,e].forEach((n,s)=>{let o=s===1,l=o?"--mobile-offset":"--offset",u=o?Mk:Ok;function h(f){["top","right","bottom","left"].forEach(x=>{r[`${l}-${x}`]=typeof f=="number"?`${f}px`:f})}typeof n=="number"||typeof n=="string"?h(n):typeof n=="object"?["top","right","bottom","left"].forEach(f=>{n[f]===void 0?r[`${l}-${f}`]=u:r[`${l}-${f}`]=typeof n[f]=="number"?`${n[f]}px`:n[f]}):h(u)}),r}var Uk=N.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:h,mobileOffset:f,theme:x="light",richColors:y,duration:v,style:b,visibleToasts:A=Rk,toastOptions:E,dir:I=Sv(),gap:R=Pk,loadingIcon:C,icons:S,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:k}=t,[F,B]=fe.useState([]),P=fe.useMemo(()=>Array.from(new Set([n].concat(F.filter(ae=>ae.position).map(ae=>ae.position)))),[F,n]),[L,W]=fe.useState([]),[q,K]=fe.useState(!1),[ie,G]=fe.useState(!1),[$,re]=fe.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=fe.useRef(null),Q=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=fe.useRef(null),te=fe.useRef(!1),ce=fe.useCallback(ae=>{B(oe=>{var ue;return(ue=oe.find(ke=>ke.id===ae.id))!=null&&ue.delete||vn.dismiss(ae.id),oe.filter(({id:ke})=>ke!==ae.id)})},[]);return fe.useEffect(()=>vn.subscribe(ae=>{if(ae.dismiss){B(oe=>oe.map(ue=>ue.id===ae.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{FE.flushSync(()=>{B(oe=>{let ue=oe.findIndex(ke=>ke.id===ae.id);return ue!==-1?[...oe.slice(0,ue),{...oe[ue],...ae},...oe.slice(ue+1)]:[ae,...oe]})})})}),[]),fe.useEffect(()=>{if(x!=="system"){re(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:oe})=>{re(oe?"dark":"light")})}catch{ae.addListener(({matches:ue})=>{try{re(ue?"dark":"light")}catch(ke){console.error(ke)}})}},[x]),fe.useEffect(()=>{F.length<=1&&K(!1)},[F]),fe.useEffect(()=>{let ae=oe=>{var ue,ke;s.every(ye=>oe[ye]||oe.code===ye)&&(K(!0),(ue=Z.current)==null||ue.focus()),oe.code==="Escape"&&(document.activeElement===Z.current||(ke=Z.current)!=null&&ke.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[s]),fe.useEffect(()=>{if(Z.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,te.current=!1)}},[Z.current]),fe.createElement("section",{ref:e,"aria-label":`${O} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ae,oe)=>{var ue;let[ke,ye]=ae.split("-");return F.length?fe.createElement("ol",{key:ae,dir:I==="auto"?Sv():I,tabIndex:-1,ref:Z,className:u,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":ke,"data-lifted":q&&F.length>1&&!o,"data-x-position":ye,style:{"--front-toast-height":`${((ue=L[0])==null?void 0:ue.height)||0}px`,"--width":`${kk}px`,"--gap":`${R}px`,...b,...Fk(h,f)},onBlur:_e=>{te.current&&!_e.currentTarget.contains(_e.relatedTarget)&&(te.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||te.current||(te.current=!0,H.current=_e.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ie||K(!1)},onDragEnd:()=>K(!1),onPointerDown:_e=>{_e.target instanceof HTMLElement&&_e.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},F.filter(_e=>!_e.position&&oe===0||_e.position===ae).map((_e,Re)=>{var Xe,Ye;return fe.createElement(Bk,{key:_e.id,icons:S,index:Re,toast:_e,defaultRichColors:y,duration:(Xe=E==null?void 0:E.duration)!=null?Xe:v,className:E==null?void 0:E.className,descriptionClassName:E==null?void 0:E.descriptionClassName,invert:r,visibleToasts:A,closeButton:(Ye=E==null?void 0:E.closeButton)!=null?Ye:l,interacting:ie,position:ae,style:E==null?void 0:E.style,unstyled:E==null?void 0:E.unstyled,classNames:E==null?void 0:E.classNames,cancelButtonStyle:E==null?void 0:E.cancelButtonStyle,actionButtonStyle:E==null?void 0:E.actionButtonStyle,removeToast:ce,toasts:F.filter(Ue=>Ue.position==_e.position),heights:L.filter(Ue=>Ue.position==_e.position),setHeights:W,expandByDefault:o,gap:R,loadingIcon:C,expanded:q,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const zk=({...t})=>{const{theme:e="system"}=hk();return p.jsx(Uk,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Vk=vg[" useId ".trim().toString()]||(()=>{}),Hk=0;function pi(t){const[e,r]=N.useState(Vk());return kr(()=>{t||r(n=>n??String(Hk++))},[t]),t||(e?`radix-${e}`:"")}const $k=["top","right","bottom","left"],Fo=Math.min,Bn=Math.max,Eh=Math.round,hf=Math.floor,mi=t=>({x:t,y:t}),Wk={left:"right",right:"left",bottom:"top",top:"bottom"},Gk={start:"end",end:"start"};function gm(t,e,r){return Bn(t,Fo(e,r))}function Hi(t,e){return typeof t=="function"?t(e):t}function $i(t){return t.split("-")[0]}function Mc(t){return t.split("-")[1]}function vx(t){return t==="x"?"y":"x"}function _x(t){return t==="y"?"height":"width"}const Yk=new Set(["top","bottom"]);function ui(t){return Yk.has($i(t))?"y":"x"}function bx(t){return vx(ui(t))}function Xk(t,e,r){r===void 0&&(r=!1);const n=Mc(t),s=bx(t),o=_x(s);let l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Ch(l)),[l,Ch(l)]}function qk(t){const e=Ch(t);return[xm(t),e,xm(e)]}function xm(t){return t.replace(/start|end/g,e=>Gk[e])}const Av=["left","right"],Nv=["right","left"],Kk=["top","bottom"],Qk=["bottom","top"];function Zk(t,e,r){switch(t){case"top":case"bottom":return r?e?Nv:Av:e?Av:Nv;case"left":case"right":return e?Kk:Qk;default:return[]}}function Jk(t,e,r,n){const s=Mc(t);let o=Zk($i(t),r==="start",n);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map(xm)))),o}function Ch(t){return t.replace(/left|right|bottom|top/g,e=>Wk[e])}function eP(t){return{top:0,right:0,bottom:0,left:0,...t}}function FC(t){return typeof t!="number"?eP(t):{top:t,right:t,bottom:t,left:t}}function Sh(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Tv(t,e,r){let{reference:n,floating:s}=t;const o=ui(e),l=bx(e),u=_x(l),h=$i(e),f=o==="y",x=n.x+n.width/2-s.width/2,y=n.y+n.height/2-s.height/2,v=n[u]/2-s[u]/2;let b;switch(h){case"top":b={x,y:n.y-s.height};break;case"bottom":b={x,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y};break;case"left":b={x:n.x-s.width,y};break;default:b={x:n.x,y:n.y}}switch(Mc(e)){case"start":b[l]-=v*(r&&f?-1:1);break;case"end":b[l]+=v*(r&&f?-1:1);break}return b}const tP=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:l}=r,u=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:s}),{x,y}=Tv(f,n,h),v=n,b={},A=0;for(let E=0;E<u.length;E++){const{name:I,fn:R}=u[E],{x:C,y:S,data:O,reset:k}=await R({x,y,initialPlacement:n,placement:v,strategy:s,middlewareData:b,rects:f,platform:l,elements:{reference:t,floating:e}});x=C??x,y=S??y,b={...b,[I]:{...b[I],...O}},k&&A<=50&&(A++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(f=k.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x,y}=Tv(f,v,h)),E=-1)}return{x,y,placement:v,strategy:s,middlewareData:b}};async function Ku(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:l,elements:u,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:x="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=Hi(e,t),A=FC(b),I=u[v?y==="floating"?"reference":"floating":y],R=Sh(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(I)))==null||r?I:I.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:x,strategy:h})),C=y==="floating"?{x:n,y:s,width:l.floating.width,height:l.floating.height}:l.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),O=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},k=Sh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:S,strategy:h}):C);return{top:(R.top-k.top+A.top)/O.y,bottom:(k.bottom-R.bottom+A.bottom)/O.y,left:(R.left-k.left+A.left)/O.x,right:(k.right-R.right+A.right)/O.x}}const rP=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:o,platform:l,elements:u,middlewareData:h}=e,{element:f,padding:x=0}=Hi(t,e)||{};if(f==null)return{};const y=FC(x),v={x:r,y:n},b=bx(s),A=_x(b),E=await l.getDimensions(f),I=b==="y",R=I?"top":"left",C=I?"bottom":"right",S=I?"clientHeight":"clientWidth",O=o.reference[A]+o.reference[b]-v[b]-o.floating[A],k=v[b]-o.reference[b],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let B=F?F[S]:0;(!B||!await(l.isElement==null?void 0:l.isElement(F)))&&(B=u.floating[S]||o.floating[A]);const P=O/2-k/2,L=B/2-E[A]/2-1,W=Fo(y[R],L),q=Fo(y[C],L),K=W,ie=B-E[A]-q,G=B/2-E[A]/2+P,$=gm(K,G,ie),re=!h.arrow&&Mc(s)!=null&&G!==$&&o.reference[A]/2-(G<K?W:q)-E[A]/2<0,Z=re?G<K?G-K:G-ie:0;return{[b]:v[b]+Z,data:{[b]:$,centerOffset:G-$-Z,...re&&{alignmentOffset:Z}},reset:re}}}),nP=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:h,elements:f}=e,{mainAxis:x=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:E=!0,...I}=Hi(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const R=$i(s),C=ui(u),S=$i(u)===u,O=await(h.isRTL==null?void 0:h.isRTL(f.floating)),k=v||(S||!E?[Ch(u)]:qk(u)),F=A!=="none";!v&&F&&k.push(...Jk(u,E,A,O));const B=[u,...k],P=await Ku(e,I),L=[];let W=((n=o.flip)==null?void 0:n.overflows)||[];if(x&&L.push(P[R]),y){const G=Xk(s,l,O);L.push(P[G[0]],P[G[1]])}if(W=[...W,{placement:s,overflows:L}],!L.every(G=>G<=0)){var q,K;const G=(((q=o.flip)==null?void 0:q.index)||0)+1,$=B[G];if($&&(!(y==="alignment"?C!==ui($):!1)||W.every(Q=>Q.overflows[0]>0&&ui(Q.placement)===C)))return{data:{index:G,overflows:W},reset:{placement:$}};let re=(K=W.filter(Z=>Z.overflows[0]<=0).sort((Z,Q)=>Z.overflows[1]-Q.overflows[1])[0])==null?void 0:K.placement;if(!re)switch(b){case"bestFit":{var ie;const Z=(ie=W.filter(Q=>{if(F){const H=ui(Q.placement);return H===C||H==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(H=>H>0).reduce((H,te)=>H+te,0)]).sort((Q,H)=>Q[1]-H[1])[0])==null?void 0:ie[0];Z&&(re=Z);break}case"initialPlacement":re=u;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function Iv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Rv(t){return $k.some(e=>t[e]>=0)}const sP=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Hi(t,e);switch(n){case"referenceHidden":{const o=await Ku(e,{...s,elementContext:"reference"}),l=Iv(o,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Rv(l)}}}case"escaped":{const o=await Ku(e,{...s,altBoundary:!0}),l=Iv(o,r.floating);return{data:{escapedOffsets:l,escaped:Rv(l)}}}default:return{}}}}},UC=new Set(["left","top"]);async function iP(t,e){const{placement:r,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),l=$i(r),u=Mc(r),h=ui(r)==="y",f=UC.has(l)?-1:1,x=o&&h?-1:1,y=Hi(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:A}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof A=="number"&&(b=u==="end"?A*-1:A),h?{x:b*x,y:v*f}:{x:v*f,y:b*x}}const oP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:o,placement:l,middlewareData:u}=e,h=await iP(e,t);return l===((r=u.offset)==null?void 0:r.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:s+h.x,y:o+h.y,data:{...h,placement:l}}}}},aP=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:I=>{let{x:R,y:C}=I;return{x:R,y:C}}},...h}=Hi(t,e),f={x:r,y:n},x=await Ku(e,h),y=ui($i(s)),v=vx(y);let b=f[v],A=f[y];if(o){const I=v==="y"?"top":"left",R=v==="y"?"bottom":"right",C=b+x[I],S=b-x[R];b=gm(C,b,S)}if(l){const I=y==="y"?"top":"left",R=y==="y"?"bottom":"right",C=A+x[I],S=A-x[R];A=gm(C,A,S)}const E=u.fn({...e,[v]:b,[y]:A});return{...E,data:{x:E.x-r,y:E.y-n,enabled:{[v]:o,[y]:l}}}}}},lP=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=Hi(t,e),x={x:r,y:n},y=ui(s),v=vx(y);let b=x[v],A=x[y];const E=Hi(u,e),I=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const S=v==="y"?"height":"width",O=o.reference[v]-o.floating[S]+I.mainAxis,k=o.reference[v]+o.reference[S]-I.mainAxis;b<O?b=O:b>k&&(b=k)}if(f){var R,C;const S=v==="y"?"width":"height",O=UC.has($i(s)),k=o.reference[y]-o.floating[S]+(O&&((R=l.offset)==null?void 0:R[y])||0)+(O?0:I.crossAxis),F=o.reference[y]+o.reference[S]+(O?0:((C=l.offset)==null?void 0:C[y])||0)-(O?I.crossAxis:0);A<k?A=k:A>F&&(A=F)}return{[v]:b,[y]:A}}}},cP=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:o,platform:l,elements:u}=e,{apply:h=()=>{},...f}=Hi(t,e),x=await Ku(e,f),y=$i(s),v=Mc(s),b=ui(s)==="y",{width:A,height:E}=o.floating;let I,R;y==="top"||y==="bottom"?(I=y,R=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(R=y,I=v==="end"?"top":"bottom");const C=E-x.top-x.bottom,S=A-x.left-x.right,O=Fo(E-x[I],C),k=Fo(A-x[R],S),F=!e.middlewareData.shift;let B=O,P=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=S),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(B=C),F&&!v){const W=Bn(x.left,0),q=Bn(x.right,0),K=Bn(x.top,0),ie=Bn(x.bottom,0);b?P=A-2*(W!==0||q!==0?W+q:Bn(x.left,x.right)):B=E-2*(K!==0||ie!==0?K+ie:Bn(x.top,x.bottom))}await h({...e,availableWidth:P,availableHeight:B});const L=await l.getDimensions(u.floating);return A!==L.width||E!==L.height?{reset:{rects:!0}}:{}}}};function w0(){return typeof window<"u"}function kc(t){return zC(t)?(t.nodeName||"").toLowerCase():"#document"}function Xn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vi(t){var e;return(e=(zC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zC(t){return w0()?t instanceof Node||t instanceof Xn(t).Node:!1}function Ws(t){return w0()?t instanceof Element||t instanceof Xn(t).Element:!1}function xi(t){return w0()?t instanceof HTMLElement||t instanceof Xn(t).HTMLElement:!1}function Ov(t){return!w0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xn(t).ShadowRoot}const uP=new Set(["inline","contents"]);function Sd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Gs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!uP.has(s)}const dP=new Set(["table","td","th"]);function fP(t){return dP.has(kc(t))}const hP=[":popover-open",":modal"];function v0(t){return hP.some(e=>{try{return t.matches(e)}catch{return!1}})}const pP=["transform","translate","scale","rotate","perspective"],mP=["transform","translate","scale","rotate","perspective","filter"],gP=["paint","layout","strict","content"];function Ex(t){const e=Cx(),r=Ws(t)?Gs(t):t;return pP.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||mP.some(n=>(r.willChange||"").includes(n))||gP.some(n=>(r.contain||"").includes(n))}function xP(t){let e=Uo(t);for(;xi(e)&&!pc(e);){if(Ex(e))return e;if(v0(e))return null;e=Uo(e)}return null}function Cx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const yP=new Set(["html","body","#document"]);function pc(t){return yP.has(kc(t))}function Gs(t){return Xn(t).getComputedStyle(t)}function _0(t){return Ws(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Uo(t){if(kc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ov(t)&&t.host||vi(t);return Ov(e)?e.host:e}function VC(t){const e=Uo(t);return pc(e)?t.ownerDocument?t.ownerDocument.body:t.body:xi(e)&&Sd(e)?e:VC(e)}function Qu(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=VC(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),l=Xn(s);if(o){const u=ym(l);return e.concat(l,l.visualViewport||[],Sd(s)?s:[],u&&r?Qu(u):[])}return e.concat(s,Qu(s,[],r))}function ym(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function HC(t){const e=Gs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=xi(t),o=s?t.offsetWidth:r,l=s?t.offsetHeight:n,u=Eh(r)!==o||Eh(n)!==l;return u&&(r=o,n=l),{width:r,height:n,$:u}}function Sx(t){return Ws(t)?t:t.contextElement}function Yl(t){const e=Sx(t);if(!xi(e))return mi(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:o}=HC(e);let l=(o?Eh(r.width):r.width)/n,u=(o?Eh(r.height):r.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const wP=mi(0);function $C(t){const e=Xn(t);return!Cx()||!e.visualViewport?wP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vP(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Xn(t)?!1:e}function za(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),o=Sx(t);let l=mi(1);e&&(n?Ws(n)&&(l=Yl(n)):l=Yl(t));const u=vP(o,r,n)?$C(o):mi(0);let h=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,x=s.width/l.x,y=s.height/l.y;if(o){const v=Xn(o),b=n&&Ws(n)?Xn(n):n;let A=v,E=ym(A);for(;E&&n&&b!==A;){const I=Yl(E),R=E.getBoundingClientRect(),C=Gs(E),S=R.left+(E.clientLeft+parseFloat(C.paddingLeft))*I.x,O=R.top+(E.clientTop+parseFloat(C.paddingTop))*I.y;h*=I.x,f*=I.y,x*=I.x,y*=I.y,h+=S,f+=O,A=Xn(E),E=ym(A)}}return Sh({width:x,height:y,x:h,y:f})}function Ax(t,e){const r=_0(t).scrollLeft;return e?e.left+r:za(vi(t)).left+r}function WC(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Ax(t,n)),o=n.top+e.scrollTop;return{x:s,y:o}}function _P(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const o=s==="fixed",l=vi(n),u=e?v0(e.floating):!1;if(n===l||u&&o)return r;let h={scrollLeft:0,scrollTop:0},f=mi(1);const x=mi(0),y=xi(n);if((y||!y&&!o)&&((kc(n)!=="body"||Sd(l))&&(h=_0(n)),xi(n))){const b=za(n);f=Yl(n),x.x=b.x+n.clientLeft,x.y=b.y+n.clientTop}const v=l&&!y&&!o?WC(l,h,!0):mi(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-h.scrollLeft*f.x+x.x+v.x,y:r.y*f.y-h.scrollTop*f.y+x.y+v.y}}function bP(t){return Array.from(t.getClientRects())}function EP(t){const e=vi(t),r=_0(t),n=t.ownerDocument.body,s=Bn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Bn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Ax(t);const u=-r.scrollTop;return Gs(n).direction==="rtl"&&(l+=Bn(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:l,y:u}}function CP(t,e){const r=Xn(t),n=vi(t),s=r.visualViewport;let o=n.clientWidth,l=n.clientHeight,u=0,h=0;if(s){o=s.width,l=s.height;const f=Cx();(!f||f&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:o,height:l,x:u,y:h}}const SP=new Set(["absolute","fixed"]);function AP(t,e){const r=za(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,o=xi(t)?Yl(t):mi(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,h=s*o.x,f=n*o.y;return{width:l,height:u,x:h,y:f}}function Mv(t,e,r){let n;if(e==="viewport")n=CP(t,r);else if(e==="document")n=EP(vi(t));else if(Ws(e))n=AP(e,r);else{const s=$C(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Sh(n)}function GC(t,e){const r=Uo(t);return r===e||!Ws(r)||pc(r)?!1:Gs(r).position==="fixed"||GC(r,e)}function NP(t,e){const r=e.get(t);if(r)return r;let n=Qu(t,[],!1).filter(u=>Ws(u)&&kc(u)!=="body"),s=null;const o=Gs(t).position==="fixed";let l=o?Uo(t):t;for(;Ws(l)&&!pc(l);){const u=Gs(l),h=Ex(l);!h&&u.position==="fixed"&&(s=null),(o?!h&&!s:!h&&u.position==="static"&&!!s&&SP.has(s.position)||Sd(l)&&!h&&GC(t,l))?n=n.filter(x=>x!==l):s=u,l=Uo(l)}return e.set(t,n),n}function TP(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const l=[...r==="clippingAncestors"?v0(e)?[]:NP(e,this._c):[].concat(r),n],u=l[0],h=l.reduce((f,x)=>{const y=Mv(e,x,s);return f.top=Bn(y.top,f.top),f.right=Fo(y.right,f.right),f.bottom=Fo(y.bottom,f.bottom),f.left=Bn(y.left,f.left),f},Mv(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function IP(t){const{width:e,height:r}=HC(t);return{width:e,height:r}}function RP(t,e,r){const n=xi(e),s=vi(e),o=r==="fixed",l=za(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const h=mi(0);function f(){h.x=Ax(s)}if(n||!n&&!o)if((kc(e)!=="body"||Sd(s))&&(u=_0(e)),n){const b=za(e,!0,o,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&f();o&&!n&&s&&f();const x=s&&!n&&!o?WC(s,u):mi(0),y=l.left+u.scrollLeft-h.x-x.x,v=l.top+u.scrollTop-h.y-x.y;return{x:y,y:v,width:l.width,height:l.height}}function z1(t){return Gs(t).position==="static"}function kv(t,e){if(!xi(t)||Gs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return vi(t)===r&&(r=r.ownerDocument.body),r}function YC(t,e){const r=Xn(t);if(v0(t))return r;if(!xi(t)){let s=Uo(t);for(;s&&!pc(s);){if(Ws(s)&&!z1(s))return s;s=Uo(s)}return r}let n=kv(t,e);for(;n&&fP(n)&&z1(n);)n=kv(n,e);return n&&pc(n)&&z1(n)&&!Ex(n)?r:n||xP(t)||r}const OP=async function(t){const e=this.getOffsetParent||YC,r=this.getDimensions,n=await r(t.floating);return{reference:RP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function MP(t){return Gs(t).direction==="rtl"}const kP={convertOffsetParentRelativeRectToViewportRelativeRect:_P,getDocumentElement:vi,getClippingRect:TP,getOffsetParent:YC,getElementRects:OP,getClientRects:bP,getDimensions:IP,getScale:Yl,isElement:Ws,isRTL:MP};function XC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PP(t,e){let r=null,n;const s=vi(t);function o(){var u;clearTimeout(n),(u=r)==null||u.disconnect(),r=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const f=t.getBoundingClientRect(),{left:x,top:y,width:v,height:b}=f;if(u||e(),!v||!b)return;const A=hf(y),E=hf(s.clientWidth-(x+v)),I=hf(s.clientHeight-(y+b)),R=hf(x),S={rootMargin:-A+"px "+-E+"px "+-I+"px "+-R+"px",threshold:Bn(0,Fo(1,h))||1};let O=!0;function k(F){const B=F[0].intersectionRatio;if(B!==h){if(!O)return l();B?l(!1,B):n=setTimeout(()=>{l(!1,1e-7)},1e3)}B===1&&!XC(f,t.getBoundingClientRect())&&l(),O=!1}try{r=new IntersectionObserver(k,{...S,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,S)}r.observe(t)}return l(!0),o}function jP(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,f=Sx(t),x=s||o?[...f?Qu(f):[],...Qu(e)]:[];x.forEach(R=>{s&&R.addEventListener("scroll",r,{passive:!0}),o&&R.addEventListener("resize",r)});const y=f&&u?PP(f,r):null;let v=-1,b=null;l&&(b=new ResizeObserver(R=>{let[C]=R;C&&C.target===f&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var S;(S=b)==null||S.observe(e)})),r()}),f&&!h&&b.observe(f),b.observe(e));let A,E=h?za(t):null;h&&I();function I(){const R=za(t);E&&!XC(E,R)&&r(),E=R,A=requestAnimationFrame(I)}return r(),()=>{var R;x.forEach(C=>{s&&C.removeEventListener("scroll",r),o&&C.removeEventListener("resize",r)}),y==null||y(),(R=b)==null||R.disconnect(),b=null,h&&cancelAnimationFrame(A)}}const DP=oP,LP=aP,BP=nP,FP=cP,UP=sP,Pv=rP,zP=lP,VP=(t,e,r)=>{const n=new Map,s={platform:kP,...r},o={...s.platform,_c:n};return tP(t,e,{...s,platform:o})};var HP=typeof document<"u",$P=function(){},Hf=HP?N.useLayoutEffect:$P;function Ah(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Ah(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!Ah(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function qC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jv(t,e){const r=qC(t);return Math.round(e*r)/r}function V1(t){const e=N.useRef(t);return Hf(()=>{e.current=t}),e}function WP(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:h,open:f}=t,[x,y]=N.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=N.useState(n);Ah(v,n)||b(n);const[A,E]=N.useState(null),[I,R]=N.useState(null),C=N.useCallback(Q=>{Q!==F.current&&(F.current=Q,E(Q))},[]),S=N.useCallback(Q=>{Q!==B.current&&(B.current=Q,R(Q))},[]),O=o||A,k=l||I,F=N.useRef(null),B=N.useRef(null),P=N.useRef(x),L=h!=null,W=V1(h),q=V1(s),K=V1(f),ie=N.useCallback(()=>{if(!F.current||!B.current)return;const Q={placement:e,strategy:r,middleware:v};q.current&&(Q.platform=q.current),VP(F.current,B.current,Q).then(H=>{const te={...H,isPositioned:K.current!==!1};G.current&&!Ah(P.current,te)&&(P.current=te,qa.flushSync(()=>{y(te)}))})},[v,e,r,q,K]);Hf(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,y(Q=>({...Q,isPositioned:!1})))},[f]);const G=N.useRef(!1);Hf(()=>(G.current=!0,()=>{G.current=!1}),[]),Hf(()=>{if(O&&(F.current=O),k&&(B.current=k),O&&k){if(W.current)return W.current(O,k,ie);ie()}},[O,k,ie,W,L]);const $=N.useMemo(()=>({reference:F,floating:B,setReference:C,setFloating:S}),[C,S]),re=N.useMemo(()=>({reference:O,floating:k}),[O,k]),Z=N.useMemo(()=>{const Q={position:r,left:0,top:0};if(!re.floating)return Q;const H=jv(re.floating,x.x),te=jv(re.floating,x.y);return u?{...Q,transform:"translate("+H+"px, "+te+"px)",...qC(re.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:te}},[r,u,re.floating,x.x,x.y]);return N.useMemo(()=>({...x,update:ie,refs:$,elements:re,floatingStyles:Z}),[x,ie,$,re,Z])}const GP=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Pv({element:n.current,padding:s}).fn(r):{}:n?Pv({element:n,padding:s}).fn(r):{}}}},YP=(t,e)=>({...DP(t),options:[t,e]}),XP=(t,e)=>({...LP(t),options:[t,e]}),qP=(t,e)=>({...zP(t),options:[t,e]}),KP=(t,e)=>({...BP(t),options:[t,e]}),QP=(t,e)=>({...FP(t),options:[t,e]}),ZP=(t,e)=>({...UP(t),options:[t,e]}),JP=(t,e)=>({...GP(t),options:[t,e]});var e6="Arrow",KC=N.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...o}=t;return p.jsx(Me.svg,{...o,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});KC.displayName=e6;var t6=KC;function Nx(t){const[e,r]=N.useState(void 0);return kr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const h=o.borderBoxSize,f=Array.isArray(h)?h[0]:h;l=f.inlineSize,u=f.blockSize}else l=t.offsetWidth,u=t.offsetHeight;r({width:l,height:u})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Tx="Popper",[QC,Pc]=On(Tx),[r6,ZC]=QC(Tx),JC=t=>{const{__scopePopper:e,children:r}=t,[n,s]=N.useState(null);return p.jsx(r6,{scope:e,anchor:n,onAnchorChange:s,children:r})};JC.displayName=Tx;var eS="PopperAnchor",tS=N.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,o=ZC(eS,r),l=N.useRef(null),u=Ze(e,l);return N.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||l.current)}),n?null:p.jsx(Me.div,{...s,ref:u})});tS.displayName=eS;var Ix="PopperContent",[n6,s6]=QC(Ix),rS=N.forwardRef((t,e)=>{var _e,Re,Xe,Ye,Ue,nt;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:A,...E}=t,I=ZC(Ix,r),[R,C]=N.useState(null),S=Ze(e,Ve=>C(Ve)),[O,k]=N.useState(null),F=Nx(O),B=(F==null?void 0:F.width)??0,P=(F==null?void 0:F.height)??0,L=n+(o!=="center"?"-"+o:""),W=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},q=Array.isArray(f)?f:[f],K=q.length>0,ie={padding:W,boundary:q.filter(o6),altBoundary:K},{refs:G,floatingStyles:$,placement:re,isPositioned:Z,middlewareData:Q}=WP({strategy:"fixed",placement:L,whileElementsMounted:(...Ve)=>jP(...Ve,{animationFrame:b==="always"}),elements:{reference:I.anchor},middleware:[YP({mainAxis:s+P,alignmentAxis:l}),h&&XP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?qP():void 0,...ie}),h&&KP({...ie}),QP({...ie,apply:({elements:Ve,rects:lr,availableWidth:wr,availableHeight:Nr})=>{const{width:he,height:Pe}=lr.reference,Se=Ve.floating.style;Se.setProperty("--radix-popper-available-width",`${wr}px`),Se.setProperty("--radix-popper-available-height",`${Nr}px`),Se.setProperty("--radix-popper-anchor-width",`${he}px`),Se.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),O&&JP({element:O,padding:u}),a6({arrowWidth:B,arrowHeight:P}),v&&ZP({strategy:"referenceHidden",...ie})]}),[H,te]=iS(re),ce=fr(A);kr(()=>{Z&&(ce==null||ce())},[Z,ce]);const ae=(_e=Q.arrow)==null?void 0:_e.x,oe=(Re=Q.arrow)==null?void 0:Re.y,ue=((Xe=Q.arrow)==null?void 0:Xe.centerOffset)!==0,[ke,ye]=N.useState();return kr(()=>{R&&ye(window.getComputedStyle(R).zIndex)},[R]),p.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:Z?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(Ye=Q.transformOrigin)==null?void 0:Ye.x,(Ue=Q.transformOrigin)==null?void 0:Ue.y].join(" "),...((nt=Q.hide)==null?void 0:nt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(n6,{scope:r,placedSide:H,onArrowChange:k,arrowX:ae,arrowY:oe,shouldHideArrow:ue,children:p.jsx(Me.div,{"data-side":H,"data-align":te,...E,ref:S,style:{...E.style,animation:Z?void 0:"none"}})})})});rS.displayName=Ix;var nS="PopperArrow",i6={top:"bottom",right:"left",bottom:"top",left:"right"},sS=N.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,o=s6(nS,n),l=i6[o.placedSide];return p.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:p.jsx(t6,{...s,ref:r,style:{...s.style,display:"block"}})})});sS.displayName=nS;function o6(t){return t!==null}var a6=t=>({name:"transformOrigin",options:t,fn(e){var I,R,C;const{placement:r,rects:n,middlewareData:s}=e,l=((I=s.arrow)==null?void 0:I.centerOffset)!==0,u=l?0:t.arrowWidth,h=l?0:t.arrowHeight,[f,x]=iS(r),y={start:"0%",center:"50%",end:"100%"}[x],v=(((R=s.arrow)==null?void 0:R.x)??0)+u/2,b=(((C=s.arrow)==null?void 0:C.y)??0)+h/2;let A="",E="";return f==="bottom"?(A=l?y:`${v}px`,E=`${-h}px`):f==="top"?(A=l?y:`${v}px`,E=`${n.floating.height+h}px`):f==="right"?(A=`${-h}px`,E=l?y:`${b}px`):f==="left"&&(A=`${n.floating.width+h}px`,E=l?y:`${b}px`),{data:{x:A,y:E}}}});function iS(t){const[e,r="center"]=t.split("-");return[e,r]}var oS=JC,Rx=tS,Ox=rS,Mx=sS,[b0,rV]=On("Tooltip",[Pc]),kx=Pc(),aS="TooltipProvider",l6=700,Dv="tooltip.open",[c6,lS]=b0(aS),cS=t=>{const{__scopeTooltip:e,delayDuration:r=l6,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:o}=t,l=N.useRef(!0),u=N.useRef(!1),h=N.useRef(0);return N.useEffect(()=>{const f=h.current;return()=>window.clearTimeout(f)},[]),p.jsx(c6,{scope:e,isOpenDelayedRef:l,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(h.current),l.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:N.useCallback(f=>{u.current=f},[]),disableHoverableContent:s,children:o})};cS.displayName=aS;var uS="Tooltip",[nV,E0]=b0(uS),wm="TooltipTrigger",u6=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=E0(wm,r),o=lS(wm,r),l=kx(r),u=N.useRef(null),h=Ze(e,u,s.onTriggerChange),f=N.useRef(!1),x=N.useRef(!1),y=N.useCallback(()=>f.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),p.jsx(Rx,{asChild:!0,...l,children:p.jsx(Me.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:h,onPointerMove:Ee(t.onPointerMove,v=>{v.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),x.current=!0)}),onPointerLeave:Ee(t.onPointerLeave,()=>{s.onTriggerLeave(),x.current=!1}),onPointerDown:Ee(t.onPointerDown,()=>{s.open&&s.onClose(),f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Ee(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:Ee(t.onBlur,s.onClose),onClick:Ee(t.onClick,s.onClose)})})});u6.displayName=wm;var d6="TooltipPortal",[sV,f6]=b0(d6,{forceMount:void 0}),mc="TooltipContent",dS=N.forwardRef((t,e)=>{const r=f6(mc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=t,l=E0(mc,t.__scopeTooltip);return p.jsx(tn,{present:n||l.open,children:l.disableHoverableContent?p.jsx(fS,{side:s,...o,ref:e}):p.jsx(h6,{side:s,...o,ref:e})})}),h6=N.forwardRef((t,e)=>{const r=E0(mc,t.__scopeTooltip),n=lS(mc,t.__scopeTooltip),s=N.useRef(null),o=Ze(e,s),[l,u]=N.useState(null),{trigger:h,onClose:f}=r,x=s.current,{onPointerInTransitChange:y}=n,v=N.useCallback(()=>{u(null),y(!1)},[y]),b=N.useCallback((A,E)=>{const I=A.currentTarget,R={x:A.clientX,y:A.clientY},C=y6(R,I.getBoundingClientRect()),S=w6(R,C),O=v6(E.getBoundingClientRect()),k=b6([...S,...O]);u(k),y(!0)},[y]);return N.useEffect(()=>()=>v(),[v]),N.useEffect(()=>{if(h&&x){const A=I=>b(I,x),E=I=>b(I,h);return h.addEventListener("pointerleave",A),x.addEventListener("pointerleave",E),()=>{h.removeEventListener("pointerleave",A),x.removeEventListener("pointerleave",E)}}},[h,x,b,v]),N.useEffect(()=>{if(l){const A=E=>{const I=E.target,R={x:E.clientX,y:E.clientY},C=(h==null?void 0:h.contains(I))||(x==null?void 0:x.contains(I)),S=!_6(R,l);C?v():S&&(v(),f())};return document.addEventListener("pointermove",A),()=>document.removeEventListener("pointermove",A)}},[h,x,l,f,v]),p.jsx(fS,{...t,ref:o})}),[p6,m6]=b0(uS,{isInside:!1}),g6=A8("TooltipContent"),fS=N.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:l,...u}=t,h=E0(mc,r),f=kx(r),{onClose:x}=h;return N.useEffect(()=>(document.addEventListener(Dv,x),()=>document.removeEventListener(Dv,x)),[x]),N.useEffect(()=>{if(h.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(h.trigger)&&x()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,x]),p.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:y=>y.preventDefault(),onDismiss:x,children:p.jsxs(Ox,{"data-state":h.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(g6,{children:n}),p.jsx(p6,{scope:r,isInside:!0,children:p.jsx(X8,{id:h.contentId,role:"tooltip",children:s||n})})]})})});dS.displayName=mc;var hS="TooltipArrow",x6=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=kx(r);return m6(hS,r).isInside?null:p.jsx(Mx,{...s,...n,ref:e})});x6.displayName=hS;function y6(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function w6(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function v6(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function _6(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],h=e[l],f=u.x,x=u.y,y=h.x,v=h.y;x>n!=v>n&&r<(y-f)*(n-x)/(v-x)+f&&(s=!s)}return s}function b6(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),E6(e)}function E6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const o=e[e.length-1],l=e[e.length-2];if((o.x-l.x)*(s.y-l.y)>=(o.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(s.y-l.y)>=(o.y-l.y)*(s.x-l.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var C6=cS,pS=dS;const S6=C6,A6=N.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(pS,{ref:n,sideOffset:e,className:Oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));A6.displayName=pS.displayName;var C0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},S0=typeof window>"u"||"Deno"in globalThis;function Os(){}function N6(t,e){return typeof t=="function"?t(e):t}function T6(t){return typeof t=="number"&&t>=0&&t!==1/0}function I6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function vm(t,e){return typeof t=="function"?t(e):t}function R6(t,e){return typeof t=="function"?t(e):t}function Lv(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==Px(l,e.options))return!1}else if(!Ju(e.queryKey,l))return!1}if(r!=="all"){const h=e.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function Bv(t,e){const{exact:r,status:n,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Zu(e.options.mutationKey)!==Zu(o))return!1}else if(!Ju(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Px(t,e){return((e==null?void 0:e.queryKeyHashFn)||Zu)(t)}function Zu(t){return JSON.stringify(t,(e,r)=>_m(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ju(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ju(t[r],e[r])):!1}function mS(t,e){if(t===e)return t;const r=Fv(t)&&Fv(e);if(r||_m(t)&&_m(e)){const n=r?t:Object.keys(t),s=n.length,o=r?e:Object.keys(e),l=o.length,u=r?[]:{},h=new Set(n);let f=0;for(let x=0;x<l;x++){const y=r?x:o[x];(!r&&h.has(y)||r)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,f++):(u[y]=mS(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&f++)}return s===l&&f===s?t:u}return e}function Fv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _m(t){if(!Uv(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Uv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Uv(t){return Object.prototype.toString.call(t)==="[object Object]"}function O6(t){return new Promise(e=>{setTimeout(e,t)})}function M6(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?mS(t,e):e}function k6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function P6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var jx=Symbol();function gS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===jx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ba,mo,Jl,y_,j6=(y_=class extends C0{constructor(){super();xt(this,ba);xt(this,mo);xt(this,Jl);qe(this,Jl,e=>{if(!S0&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){le(this,mo)||this.setEventListener(le(this,Jl))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,mo))==null||e.call(this),qe(this,mo,void 0))}setEventListener(e){var r;qe(this,Jl,e),(r=le(this,mo))==null||r.call(this),qe(this,mo,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){le(this,ba)!==e&&(qe(this,ba,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof le(this,ba)=="boolean"?le(this,ba):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ba=new WeakMap,mo=new WeakMap,Jl=new WeakMap,y_),xS=new j6,ec,go,tc,w_,D6=(w_=class extends C0{constructor(){super();xt(this,ec,!0);xt(this,go);xt(this,tc);qe(this,tc,e=>{if(!S0&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){le(this,go)||this.setEventListener(le(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,go))==null||e.call(this),qe(this,go,void 0))}setEventListener(e){var r;qe(this,tc,e),(r=le(this,go))==null||r.call(this),qe(this,go,e(this.setOnline.bind(this)))}setOnline(e){le(this,ec)!==e&&(qe(this,ec,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return le(this,ec)}},ec=new WeakMap,go=new WeakMap,tc=new WeakMap,w_),Nh=new D6;function L6(){let t,e;const r=new Promise((s,o)=>{t=s,e=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function B6(t){return Math.min(1e3*2**t,3e4)}function yS(t){return(t??"online")==="online"?Nh.isOnline():!0}var wS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function H1(t){return t instanceof wS}function vS(t){let e=!1,r=0,n=!1,s;const o=L6(),l=E=>{var I;n||(v(new wS(E)),(I=t.abort)==null||I.call(t))},u=()=>{e=!0},h=()=>{e=!1},f=()=>xS.isFocused()&&(t.networkMode==="always"||Nh.isOnline())&&t.canRun(),x=()=>yS(t.networkMode)&&t.canRun(),y=E=>{var I;n||(n=!0,(I=t.onSuccess)==null||I.call(t,E),s==null||s(),o.resolve(E))},v=E=>{var I;n||(n=!0,(I=t.onError)==null||I.call(t,E),s==null||s(),o.reject(E))},b=()=>new Promise(E=>{var I;s=R=>{(n||f())&&E(R)},(I=t.onPause)==null||I.call(t)}).then(()=>{var E;s=void 0,n||(E=t.onContinue)==null||E.call(t)}),A=()=>{if(n)return;let E;const I=r===0?t.initialPromise:void 0;try{E=I??t.fn()}catch(R){E=Promise.reject(R)}Promise.resolve(E).then(y).catch(R=>{var F;if(n)return;const C=t.retry??(S0?0:3),S=t.retryDelay??B6,O=typeof S=="function"?S(r,R):S,k=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,R);if(e||!k){v(R);return}r++,(F=t.onFail)==null||F.call(t,r,R),O6(O).then(()=>f()?void 0:b()).then(()=>{e?v(R):A()})})};return{promise:o,cancel:l,continue:()=>(s==null||s(),o),cancelRetry:u,continueRetry:h,canStart:x,start:()=>(x()?A():b().then(A),o)}}var F6=t=>setTimeout(t,0);function U6(){let t=[],e=0,r=u=>{u()},n=u=>{u()},s=F6;const o=u=>{e?t.push(u):s(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{n(()=>{u.forEach(h=>{r(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},batchCalls:u=>(...h)=>{o(()=>{u(...h)})},schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{s=u}}}var an=U6(),Ea,v_,_S=(v_=class{constructor(){xt(this,Ea)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),T6(this.gcTime)&&qe(this,Ea,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(S0?1/0:5*60*1e3))}clearGcTimeout(){le(this,Ea)&&(clearTimeout(le(this,Ea)),qe(this,Ea,void 0))}},Ea=new WeakMap,v_),rc,Ca,as,Sa,Kr,md,Aa,ks,Si,__,z6=(__=class extends _S{constructor(e){super();xt(this,ks);xt(this,rc);xt(this,Ca);xt(this,as);xt(this,Sa);xt(this,Kr);xt(this,md);xt(this,Aa);qe(this,Aa,!1),qe(this,md,e.defaultOptions),this.setOptions(e.options),this.observers=[],qe(this,Sa,e.client),qe(this,as,le(this,Sa).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,qe(this,rc,H6(this.options)),this.state=e.state??le(this,rc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=le(this,Kr))==null?void 0:e.promise}setOptions(e){this.options={...le(this,md),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&le(this,as).remove(this)}setData(e,r){const n=M6(this.state.data,e,this.options);return Gr(this,ks,Si).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Gr(this,ks,Si).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=le(this,Kr))==null?void 0:n.promise;return(s=le(this,Kr))==null||s.cancel(e),r?r.then(Os).catch(Os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(le(this,rc))}isActive(){return this.observers.some(e=>R6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>vm(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!I6(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=le(this,Kr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=le(this,Kr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),le(this,as).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(le(this,Kr)&&(le(this,Aa)?le(this,Kr).cancel({revert:!0}):le(this,Kr).cancelRetry()),this.scheduleGc()),le(this,as).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gr(this,ks,Si).call(this,{type:"invalidate"})}fetch(e,r){var f,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(le(this,Kr))return le(this,Kr).continueRetry(),le(this,Kr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const n=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(qe(this,Aa,!0),n.signal)})},o=()=>{const v=gS(this.options,r),A=(()=>{const E={client:le(this,Sa),queryKey:this.queryKey,meta:this.meta};return s(E),E})();return qe(this,Aa,!1),this.options.persister?this.options.persister(v,A,this):v(A)},u=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:le(this,Sa),state:this.state,fetchFn:o};return s(v),v})();(f=this.options.behavior)==null||f.onFetch(u,this),qe(this,Ca,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&Gr(this,ks,Si).call(this,{type:"fetch",meta:(y=u.fetchOptions)==null?void 0:y.meta});const h=v=>{var b,A,E,I;H1(v)&&v.silent||Gr(this,ks,Si).call(this,{type:"error",error:v}),H1(v)||((A=(b=le(this,as).config).onError)==null||A.call(b,v,this),(I=(E=le(this,as).config).onSettled)==null||I.call(E,this.state.data,v,this)),this.scheduleGc()};return qe(this,Kr,vS({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,abort:n.abort.bind(n),onSuccess:v=>{var b,A,E,I;if(v===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(R){h(R);return}(A=(b=le(this,as).config).onSuccess)==null||A.call(b,v,this),(I=(E=le(this,as).config).onSettled)==null||I.call(E,v,this.state.error,this),this.scheduleGc()},onError:h,onFail:(v,b)=>{Gr(this,ks,Si).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{Gr(this,ks,Si).call(this,{type:"pause"})},onContinue:()=>{Gr(this,ks,Si).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),le(this,Kr).start()}},rc=new WeakMap,Ca=new WeakMap,as=new WeakMap,Sa=new WeakMap,Kr=new WeakMap,md=new WeakMap,Aa=new WeakMap,ks=new WeakSet,Si=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...V6(n.data,this.options),fetchMeta:e.meta??null};case"success":return qe(this,Ca,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return H1(s)&&s.revert&&le(this,Ca)?{...le(this,Ca),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),an.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),le(this,as).notify({query:this,type:"updated",action:e})})},__);function V6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function H6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ii,b_,$6=(b_=class extends C0{constructor(e={}){super();xt(this,ii);this.config=e,qe(this,ii,new Map)}build(e,r,n){const s=r.queryKey,o=r.queryHash??Px(s,r);let l=this.get(o);return l||(l=new z6({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){le(this,ii).has(e.queryHash)||(le(this,ii).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=le(this,ii).get(e.queryHash);r&&(e.destroy(),r===e&&le(this,ii).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return le(this,ii).get(e)}getAll(){return[...le(this,ii).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Lv(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Lv(e,n)):r}notify(e){an.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){an.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ii=new WeakMap,b_),oi,sn,Na,ai,ao,E_,W6=(E_=class extends _S{constructor(e){super();xt(this,ai);xt(this,oi);xt(this,sn);xt(this,Na);this.mutationId=e.mutationId,qe(this,sn,e.mutationCache),qe(this,oi,[]),this.state=e.state||G6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){le(this,oi).includes(e)||(le(this,oi).push(e),this.clearGcTimeout(),le(this,sn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){qe(this,oi,le(this,oi).filter(r=>r!==e)),this.scheduleGc(),le(this,sn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){le(this,oi).length||(this.state.status==="pending"?this.scheduleGc():le(this,sn).remove(this))}continue(){var e;return((e=le(this,Na))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,u,h,f,x,y,v,b,A,E,I,R,C,S,O,k,F,B,P;const r=()=>{Gr(this,ai,ao).call(this,{type:"continue"})};qe(this,Na,vS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(L,W)=>{Gr(this,ai,ao).call(this,{type:"failed",failureCount:L,error:W})},onPause:()=>{Gr(this,ai,ao).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>le(this,sn).canRun(this)}));const n=this.state.status==="pending",s=!le(this,Na).canStart();try{if(n)r();else{Gr(this,ai,ao).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=le(this,sn).config).onMutate)==null?void 0:l.call(o,e,this));const W=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,e));W!==this.state.context&&Gr(this,ai,ao).call(this,{type:"pending",context:W,variables:e,isPaused:s})}const L=await le(this,Na).start();return await((x=(f=le(this,sn).config).onSuccess)==null?void 0:x.call(f,L,e,this.state.context,this)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,L,e,this.state.context)),await((A=(b=le(this,sn).config).onSettled)==null?void 0:A.call(b,L,null,this.state.variables,this.state.context,this)),await((I=(E=this.options).onSettled)==null?void 0:I.call(E,L,null,e,this.state.context)),Gr(this,ai,ao).call(this,{type:"success",data:L}),L}catch(L){try{throw await((C=(R=le(this,sn).config).onError)==null?void 0:C.call(R,L,e,this.state.context,this)),await((O=(S=this.options).onError)==null?void 0:O.call(S,L,e,this.state.context)),await((F=(k=le(this,sn).config).onSettled)==null?void 0:F.call(k,void 0,L,this.state.variables,this.state.context,this)),await((P=(B=this.options).onSettled)==null?void 0:P.call(B,void 0,L,e,this.state.context)),L}finally{Gr(this,ai,ao).call(this,{type:"error",error:L})}}finally{le(this,sn).runNext(this)}}},oi=new WeakMap,sn=new WeakMap,Na=new WeakMap,ai=new WeakSet,ao=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),an.batch(()=>{le(this,oi).forEach(n=>{n.onMutationUpdate(e)}),le(this,sn).notify({mutation:this,type:"updated",action:e})})},E_);function G6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mi,Ps,gd,C_,Y6=(C_=class extends C0{constructor(e={}){super();xt(this,Mi);xt(this,Ps);xt(this,gd);this.config=e,qe(this,Mi,new Set),qe(this,Ps,new Map),qe(this,gd,0)}build(e,r,n){const s=new W6({mutationCache:this,mutationId:++Wd(this,gd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){le(this,Mi).add(e);const r=pf(e);if(typeof r=="string"){const n=le(this,Ps).get(r);n?n.push(e):le(this,Ps).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(le(this,Mi).delete(e)){const r=pf(e);if(typeof r=="string"){const n=le(this,Ps).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&le(this,Ps).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=pf(e);if(typeof r=="string"){const n=le(this,Ps).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=pf(e);if(typeof r=="string"){const s=(n=le(this,Ps).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){an.batch(()=>{le(this,Mi).forEach(e=>{this.notify({type:"removed",mutation:e})}),le(this,Mi).clear(),le(this,Ps).clear()})}getAll(){return Array.from(le(this,Mi))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Bv(r,n))}findAll(e={}){return this.getAll().filter(r=>Bv(e,r))}notify(e){an.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return an.batch(()=>Promise.all(e.map(r=>r.continue().catch(Os))))}},Mi=new WeakMap,Ps=new WeakMap,gd=new WeakMap,C_);function pf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function zv(t){return{onFetch:(e,r)=>{var x,y,v,b,A;const n=e.options,s=(v=(y=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,o=((b=e.state.data)==null?void 0:b.pages)||[],l=((A=e.state.data)==null?void 0:A.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let E=!1;const I=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},R=gS(e.options,e.fetchOptions),C=async(S,O,k)=>{if(E)return Promise.reject();if(O==null&&S.pages.length)return Promise.resolve(S);const B=(()=>{const q={client:e.client,queryKey:e.queryKey,pageParam:O,direction:k?"backward":"forward",meta:e.options.meta};return I(q),q})(),P=await R(B),{maxPages:L}=e.options,W=k?P6:k6;return{pages:W(S.pages,P,L),pageParams:W(S.pageParams,O,L)}};if(s&&o.length){const S=s==="backward",O=S?X6:Vv,k={pages:o,pageParams:l},F=O(n,k);u=await C(k,F,S)}else{const S=t??o.length;do{const O=h===0?l[0]??n.initialPageParam:Vv(n,u);if(h>0&&O==null)break;u=await C(u,O),h++}while(h<S)}return u};e.options.persister?e.fetchFn=()=>{var E,I;return(I=(E=e.options).persister)==null?void 0:I.call(E,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=f}}}function Vv(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function X6(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var nr,xo,yo,nc,sc,wo,ic,oc,S_,q6=(S_=class{constructor(t={}){xt(this,nr);xt(this,xo);xt(this,yo);xt(this,nc);xt(this,sc);xt(this,wo);xt(this,ic);xt(this,oc);qe(this,nr,t.queryCache||new $6),qe(this,xo,t.mutationCache||new Y6),qe(this,yo,t.defaultOptions||{}),qe(this,nc,new Map),qe(this,sc,new Map),qe(this,wo,0)}mount(){Wd(this,wo)._++,le(this,wo)===1&&(qe(this,ic,xS.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,nr).onFocus())})),qe(this,oc,Nh.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,nr).onOnline())})))}unmount(){var t,e;Wd(this,wo)._--,le(this,wo)===0&&((t=le(this,ic))==null||t.call(this),qe(this,ic,void 0),(e=le(this,oc))==null||e.call(this),qe(this,oc,void 0))}isFetching(t){return le(this,nr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return le(this,xo).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=le(this,nr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=le(this,nr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(vm(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return le(this,nr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=le(this,nr).get(n.queryHash),o=s==null?void 0:s.state.data,l=N6(e,o);if(l!==void 0)return le(this,nr).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return an.batch(()=>le(this,nr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=le(this,nr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=le(this,nr);an.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=le(this,nr);return an.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=an.batch(()=>le(this,nr).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Os).catch(Os)}invalidateQueries(t,e={}){return an.batch(()=>(le(this,nr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=an.batch(()=>le(this,nr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(Os)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Os)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=le(this,nr).build(this,e);return r.isStaleByTime(vm(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Os).catch(Os)}fetchInfiniteQuery(t){return t.behavior=zv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Os).catch(Os)}ensureInfiniteQueryData(t){return t.behavior=zv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Nh.isOnline()?le(this,xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return le(this,nr)}getMutationCache(){return le(this,xo)}getDefaultOptions(){return le(this,yo)}setDefaultOptions(t){qe(this,yo,t)}setQueryDefaults(t,e){le(this,nc).set(Zu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...le(this,nc).values()],r={};return e.forEach(n=>{Ju(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){le(this,sc).set(Zu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...le(this,sc).values()],r={};return e.forEach(n=>{Ju(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...le(this,yo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Px(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===jx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...le(this,yo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){le(this,nr).clear(),le(this,xo).clear()}},nr=new WeakMap,xo=new WeakMap,yo=new WeakMap,nc=new WeakMap,sc=new WeakMap,wo=new WeakMap,ic=new WeakMap,oc=new WeakMap,S_),K6=N.createContext(void 0),Q6=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(K6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ed.apply(this,arguments)}var bo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bo||(bo={}));const Hv="popstate";function Z6(t){t===void 0&&(t={});function e(s,o){let{pathname:l="/",search:u="",hash:h=""}=Ka(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),bm("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let h=s.location.href,f=h.indexOf("#");u=f===-1?h:h.slice(0,f)}return u+"#"+(typeof o=="string"?o:Th(o))}function n(s,o){Dx(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ej(e,r,n,t)}function yr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J6(){return Math.random().toString(36).substr(2,8)}function $v(t,e){return{usr:t.state,key:t.key,idx:e}}function bm(t,e,r,n){return r===void 0&&(r=null),ed({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ka(e):e,{state:r,key:e&&e.key||n||J6()})}function Th(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ka(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ej(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,u=bo.Pop,h=null,f=x();f==null&&(f=0,l.replaceState(ed({},l.state,{idx:f}),""));function x(){return(l.state||{idx:null}).idx}function y(){u=bo.Pop;let I=x(),R=I==null?null:I-f;f=I,h&&h({action:u,location:E.location,delta:R})}function v(I,R){u=bo.Push;let C=bm(E.location,I,R);r&&r(C,I),f=x()+1;let S=$v(C,f),O=E.createHref(C);try{l.pushState(S,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(O)}o&&h&&h({action:u,location:E.location,delta:1})}function b(I,R){u=bo.Replace;let C=bm(E.location,I,R);r&&r(C,I),f=x();let S=$v(C,f),O=E.createHref(C);l.replaceState(S,"",O),o&&h&&h({action:u,location:E.location,delta:0})}function A(I){let R=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof I=="string"?I:Th(I);return C=C.replace(/ $/,"%20"),yr(R,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,R)}let E={get action(){return u},get location(){return t(s,l)},listen(I){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Hv,y),h=I,()=>{s.removeEventListener(Hv,y),h=null}},createHref(I){return e(s,I)},createURL:A,encodeLocation(I){let R=A(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(I){return l.go(I)}};return E}var Wv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wv||(Wv={}));function tj(t,e,r){return r===void 0&&(r="/"),rj(t,e,r,!1)}function rj(t,e,r,n){let s=typeof e=="string"?Ka(e):e,o=Lx(s.pathname||"/",r);if(o==null)return null;let l=bS(t);nj(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=pj(o);u=fj(l[h],f,n)}return u}function bS(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(yr(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=Po([n,h.relativePath]),x=r.concat(h);o.children&&o.children.length>0&&(yr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),bS(o.children,e,x,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:uj(f,o.index),routesMeta:x})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let h of ES(o.path))s(o,l,h)}),e}function ES(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=ES(n.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&u.push(...l),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function nj(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:dj(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const sj=/^:[\w-]+$/,ij=3,oj=2,aj=1,lj=10,cj=-2,Gv=t=>t==="*";function uj(t,e){let r=t.split("/"),n=r.length;return r.some(Gv)&&(n+=cj),e&&(n+=oj),r.filter(s=>!Gv(s)).reduce((s,o)=>s+(sj.test(o)?ij:o===""?aj:lj),n)}function dj(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function fj(t,e,r){let{routesMeta:n}=t,s={},o="/",l=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,x=o==="/"?e:e.slice(o.length)||"/",y=Yv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},x),v=h.route;if(!y&&f&&r&&!n[n.length-1].route.index&&(y=Yv({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},x)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Po([o,y.pathname]),pathnameBase:yj(Po([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Po([o,y.pathnameBase]))}return l}function Yv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=hj(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,x,y)=>{let{paramName:v,isOptional:b}=x;if(v==="*"){let E=u[y]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=u[y];return b&&!A?f[v]=void 0:f[v]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function hj(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Dx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function pj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Lx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function mj(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Ka(t):t;return{pathname:r?r.startsWith("/")?r:gj(r,e):e,search:wj(n),hash:vj(s)}}function gj(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function CS(t,e){let r=xj(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function SS(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Ka(t):(s=ed({},t),yr(!s.pathname||!s.pathname.includes("?"),$1("?","pathname","search",s)),yr(!s.pathname||!s.pathname.includes("#"),$1("#","pathname","hash",s)),yr(!s.search||!s.search.includes("#"),$1("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=r;else{let y=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=mj(s,u),f=l&&l!=="/"&&l.endsWith("/"),x=(o||l===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||x)&&(h.pathname+="/"),h}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),yj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _j(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AS=["post","put","patch","delete"];new Set(AS);const bj=["get",...AS];new Set(bj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},td.apply(this,arguments)}const Bx=N.createContext(null),Ej=N.createContext(null),Qa=N.createContext(null),A0=N.createContext(null),Yo=N.createContext({outlet:null,matches:[],isDataRoute:!1}),NS=N.createContext(null);function Cj(t,e){let{relative:r}=e===void 0?{}:e;Ad()||yr(!1);let{basename:n,navigator:s}=N.useContext(Qa),{hash:o,pathname:l,search:u}=IS(t,{relative:r}),h=l;return n!=="/"&&(h=l==="/"?n:Po([n,l])),s.createHref({pathname:h,search:u,hash:o})}function Ad(){return N.useContext(A0)!=null}function Xo(){return Ad()||yr(!1),N.useContext(A0).location}function TS(t){N.useContext(Qa).static||N.useLayoutEffect(t)}function hn(){let{isDataRoute:t}=N.useContext(Yo);return t?Bj():Sj()}function Sj(){Ad()||yr(!1);let t=N.useContext(Bx),{basename:e,future:r,navigator:n}=N.useContext(Qa),{matches:s}=N.useContext(Yo),{pathname:o}=Xo(),l=JSON.stringify(CS(s,r.v7_relativeSplatPath)),u=N.useRef(!1);return TS(()=>{u.current=!0}),N.useCallback(function(f,x){if(x===void 0&&(x={}),!u.current)return;if(typeof f=="number"){n.go(f);return}let y=SS(f,JSON.parse(l),o,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Po([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,l,o,t])}function Aj(){let{matches:t}=N.useContext(Yo),e=t[t.length-1];return e?e.params:{}}function IS(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=N.useContext(Qa),{matches:s}=N.useContext(Yo),{pathname:o}=Xo(),l=JSON.stringify(CS(s,n.v7_relativeSplatPath));return N.useMemo(()=>SS(t,JSON.parse(l),o,r==="path"),[t,l,o,r])}function Nj(t,e){return Tj(t,e)}function Tj(t,e,r,n){Ad()||yr(!1);let{navigator:s}=N.useContext(Qa),{matches:o}=N.useContext(Yo),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=Xo(),x;if(e){var y;let I=typeof e=="string"?Ka(e):e;h==="/"||(y=I.pathname)!=null&&y.startsWith(h)||yr(!1),x=I}else x=f;let v=x.pathname||"/",b=v;if(h!=="/"){let I=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=tj(t,{pathname:b}),E=kj(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Po([h,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?h:Po([h,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,r,n);return e&&E?N.createElement(A0.Provider,{value:{location:td({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:bo.Pop}},E):E}function Ij(){let t=Lj(),e=_j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:s},r):null,null)}const Rj=N.createElement(Ij,null);class Oj extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?N.createElement(Yo.Provider,{value:this.props.routeContext},N.createElement(NS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mj(t){let{routeContext:e,match:r,children:n}=t,s=N.useContext(Bx);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Yo.Provider,{value:e},n)}function kj(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,u=(s=r)==null?void 0:s.errors;if(u!=null){let x=l.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);x>=0||yr(!1),l=l.slice(0,Math.min(l.length,x+1))}let h=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=x),y.route.id){let{loaderData:v,errors:b}=r,A=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||A){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((x,y,v)=>{let b,A=!1,E=null,I=null;r&&(b=u&&y.route.id?u[y.route.id]:void 0,E=y.route.errorElement||Rj,h&&(f<0&&v===0?(A=!0,I=null):f===v&&(A=!0,I=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,v+1)),C=()=>{let S;return b?S=E:A?S=I:y.route.Component?S=N.createElement(y.route.Component,null):y.route.element?S=y.route.element:S=x,N.createElement(Mj,{match:y,routeContext:{outlet:x,matches:R,isDataRoute:r!=null},children:S})};return r&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?N.createElement(Oj,{location:r.location,revalidation:r.revalidation,component:E,error:b,children:C(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):C()},null)}var RS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(RS||{}),Ih=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ih||{});function Pj(t){let e=N.useContext(Bx);return e||yr(!1),e}function jj(t){let e=N.useContext(Ej);return e||yr(!1),e}function Dj(t){let e=N.useContext(Yo);return e||yr(!1),e}function OS(t){let e=Dj(),r=e.matches[e.matches.length-1];return r.route.id||yr(!1),r.route.id}function Lj(){var t;let e=N.useContext(NS),r=jj(Ih.UseRouteError),n=OS(Ih.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Bj(){let{router:t}=Pj(RS.UseNavigateStable),e=OS(Ih.UseNavigateStable),r=N.useRef(!1);return TS(()=>{r.current=!0}),N.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,td({fromRouteId:e},o)))},[t,e])}function Fj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qr(t){yr(!1)}function Uj(t){let{basename:e="/",children:r=null,location:n,navigationType:s=bo.Pop,navigator:o,static:l=!1,future:u}=t;Ad()&&yr(!1);let h=e.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:h,navigator:o,static:l,future:td({v7_relativeSplatPath:!1},u)}),[h,u,o,l]);typeof n=="string"&&(n=Ka(n));let{pathname:x="/",search:y="",hash:v="",state:b=null,key:A="default"}=n,E=N.useMemo(()=>{let I=Lx(x,h);return I==null?null:{location:{pathname:I,search:y,hash:v,state:b,key:A},navigationType:s}},[h,x,y,v,b,A,s]);return E==null?null:N.createElement(Qa.Provider,{value:f},N.createElement(A0.Provider,{children:r,value:E}))}function zj(t){let{children:e,location:r}=t;return Nj(Em(e),r)}new Promise(()=>{});function Em(t,e){e===void 0&&(e=[]);let r=[];return N.Children.forEach(t,(n,s)=>{if(!N.isValidElement(n))return;let o=[...e,s];if(n.type===N.Fragment){r.push.apply(r,Em(n.props.children,o));return}n.type!==qr&&yr(!1),!n.props.index||!n.props.children||yr(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Em(n.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cm.apply(this,arguments)}function Vj(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Hj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $j(t,e){return t.button===0&&(!e||e==="_self")&&!Hj(t)}const Wj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gj="6";try{window.__reactRouterVersion=Gj}catch{}const Yj="startTransition",Xv=vg[Yj];function Xj(t){let{basename:e,children:r,future:n,window:s}=t,o=N.useRef();o.current==null&&(o.current=Z6({window:s,v5Compat:!0}));let l=o.current,[u,h]=N.useState({action:l.action,location:l.location}),{v7_startTransition:f}=n||{},x=N.useCallback(y=>{f&&Xv?Xv(()=>h(y)):h(y)},[h,f]);return N.useLayoutEffect(()=>l.listen(x),[l,x]),N.useEffect(()=>Fj(n),[n]),N.createElement(Uj,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:l,future:n})}const qj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W1=N.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:l,state:u,target:h,to:f,preventScrollReset:x,viewTransition:y}=e,v=Vj(e,Wj),{basename:b}=N.useContext(Qa),A,E=!1;if(typeof f=="string"&&Kj.test(f)&&(A=f,qj))try{let S=new URL(window.location.href),O=f.startsWith("//")?new URL(S.protocol+f):new URL(f),k=Lx(O.pathname,b);O.origin===S.origin&&k!=null?f=k+O.search+O.hash:E=!0}catch{}let I=Cj(f,{relative:s}),R=Qj(f,{replace:l,state:u,target:h,preventScrollReset:x,relative:s,viewTransition:y});function C(S){n&&n(S),S.defaultPrevented||R(S)}return N.createElement("a",Cm({},v,{href:A||I,onClick:E||o?n:C,ref:r,target:h}))});var qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Kv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kv||(Kv={}));function Qj(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:u}=e===void 0?{}:e,h=hn(),f=Xo(),x=IS(t,{relative:l});return N.useCallback(y=>{if($j(y,r)){y.preventDefault();let v=n!==void 0?n:Th(f)===Th(x);h(t,{replace:v,state:s,preventScrollReset:o,relative:l,viewTransition:u})}},[f,h,x,n,s,r,t,o,l,u])}var Sm=function(t,e){return Sm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Sm(t,e)};function MS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var us=function(){return us=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},us.apply(this,arguments)};function qo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function kS(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(o=(s<3?l(o):s>3?l(e,r,o):l(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function PS(t,e){return function(r,n){e(r,n,t)}}function jS(t,e,r,n,s,o){function l(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var u=n.kind,h=u==="getter"?"get":u==="setter"?"set":"value",f=!e&&t?n.static?t:t.prototype:null,x=e||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),y,v=!1,b=r.length-1;b>=0;b--){var A={};for(var E in n)A[E]=E==="access"?{}:n[E];for(var E in n.access)A.access[E]=n.access[E];A.addInitializer=function(R){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(l(R||null))};var I=(0,r[b])(u==="accessor"?{get:x.get,set:x.set}:x[h],A);if(u==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(y=l(I.get))&&(x.get=y),(y=l(I.set))&&(x.set=y),(y=l(I.init))&&s.unshift(y)}else(y=l(I))&&(u==="field"?s.unshift(y):x[h]=y)}f&&Object.defineProperty(f,n.name,x),v=!0}function DS(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function LS(t){return typeof t=="symbol"?t:"".concat(t)}function BS(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function FS(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ie(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})}function US(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var N0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function zS(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&N0(e,t,r)}function Rh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fx(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],l;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return o}function VS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Fx(arguments[e]));return t}function HS(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],l=0,u=o.length;l<u;l++,s++)n[s]=o[l];return n}function Ux(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function gc(t){return this instanceof gc?(this.v=t,this):new gc(t)}function $S(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(b){return function(A){return Promise.resolve(A).then(b,y)}}function u(b,A){n[b]&&(s[b]=function(E){return new Promise(function(I,R){o.push([b,E,I,R])>1||h(b,E)})},A&&(s[b]=A(s[b])))}function h(b,A){try{f(n[b](A))}catch(E){v(o[0][3],E)}}function f(b){b.value instanceof gc?Promise.resolve(b.value.v).then(x,y):v(o[0][2],b)}function x(b){h("next",b)}function y(b){h("throw",b)}function v(b,A){b(A),o.shift(),o.length&&h(o[0][0],o[0][1])}}function WS(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(l){return(r=!r)?{value:gc(t[s](l)),done:!1}:o?o(l):l}:o}}function GS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Rh=="function"?Rh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(l){return new Promise(function(u,h){l=t[o](l),s(u,h,l.done,l.value)})}}function s(o,l,u,h){Promise.resolve(h).then(function(f){o({value:f,done:u})},l)}}function YS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Zj=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Am=function(t){return Am=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Am(t)};function XS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Am(t),n=0;n<r.length;n++)r[n]!=="default"&&N0(e,t,r[n]);return Zj(e,t),e}function qS(t){return t&&t.__esModule?t:{default:t}}function KS(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function QS(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function ZS(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function JS(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var Jj=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function eA(t){function e(o){t.error=t.hasError?new Jj(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(l){return e(l),s()})}else n|=1}catch(l){e(l)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function tA(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,l){return n?e?".jsx":".js":s&&(!o||!l)?r:s+o+"."+l.toLowerCase()+"js"}):t}const eD={__extends:MS,__assign:us,__rest:qo,__decorate:kS,__param:PS,__esDecorate:jS,__runInitializers:DS,__propKey:LS,__setFunctionName:BS,__metadata:FS,__awaiter:Ie,__generator:US,__createBinding:N0,__exportStar:zS,__values:Rh,__read:Fx,__spread:VS,__spreadArrays:HS,__spreadArray:Ux,__await:gc,__asyncGenerator:$S,__asyncDelegator:WS,__asyncValues:GS,__makeTemplateObject:YS,__importStar:XS,__importDefault:qS,__classPrivateFieldGet:KS,__classPrivateFieldSet:QS,__classPrivateFieldIn:ZS,__addDisposableResource:JS,__disposeResources:eA,__rewriteRelativeImportExtension:tA},tD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:JS,get __assign(){return us},__asyncDelegator:WS,__asyncGenerator:$S,__asyncValues:GS,__await:gc,__awaiter:Ie,__classPrivateFieldGet:KS,__classPrivateFieldIn:ZS,__classPrivateFieldSet:QS,__createBinding:N0,__decorate:kS,__disposeResources:eA,__esDecorate:jS,__exportStar:zS,__extends:MS,__generator:US,__importDefault:qS,__importStar:XS,__makeTemplateObject:YS,__metadata:FS,__param:PS,__propKey:LS,__read:Fx,__rest:qo,__rewriteRelativeImportExtension:tA,__runInitializers:DS,__setFunctionName:BS,__spread:VS,__spreadArray:Ux,__spreadArrays:HS,__values:Rh,default:eD},Symbol.toStringTag,{value:"Module"})),rD="modulepreload",nD=function(t){return"/ALAN_NEW/"+t},Qv={},zo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(h=>{if(h=nD(h),h in Qv)return;Qv[h]=!0;const f=h.endsWith(".css"),x=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":rD,f||(y.as="script"),y.crossOrigin="",y.href=h,u&&y.setAttribute("nonce",u),document.head.appendChild(y),f)return new Promise((v,b)=>{y.addEventListener("load",v),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},sD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zo(async()=>{const{default:n}=await Promise.resolve().then(()=>Za);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class zx extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Zv extends zx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jv extends zx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class e2 extends zx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Nm||(Nm={}));class iD{constructor(e,{headers:r={},customFetch:n,region:s=Nm.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=sD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ie(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:o,method:l,body:u,signal:h}=n;let f={},{region:x}=n;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(f["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let v;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;const b=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:v,signal:h}).catch(R=>{throw R.name==="AbortError"?R:new Zv(R)}),A=b.headers.get("x-relay-error");if(A&&A==="true")throw new Jv(b);if(!b.ok)throw new e2(b);let E=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),I;return E==="application/json"?I=yield b.json():E==="application/octet-stream"||E==="application/pdf"?I=yield b.blob():E==="text/event-stream"?I=b:E==="multipart/form-data"?I=yield b.formData():I=yield b.text(),{data:I,error:null,response:b}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Zv(o)}:{data:null,error:o,response:o instanceof e2||o instanceof Jv?o.context:void 0}}})}}var ln={};const jc=A_(tD);var mf={},gf={},xf={},yf={},wf={},oD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xc=oD();const aD=xc.fetch,rA=xc.fetch.bind(xc),nA=xc.Headers,lD=xc.Request,cD=xc.Response,Za=Object.freeze(Object.defineProperty({__proto__:null,Headers:nA,Request:lD,Response:cD,default:rA,fetch:aD},Symbol.toStringTag,{value:"Module"})),uD=A_(Za);var vf={},t2;function sA(){if(t2)return vf;t2=1,Object.defineProperty(vf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return vf.default=t,vf}var r2;function iA(){if(r2)return wf;r2=1,Object.defineProperty(wf,"__esModule",{value:!0});const t=jc,e=t.__importDefault(uD),r=t.__importDefault(sA());class n{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var x,y,v,b;let A=null,E=null,I=null,R=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const F=await f.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?E=F:E=JSON.parse(F))}const O=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),k=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");O&&k&&k.length>1&&(I=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(A={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,I=null,R=406,C="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const O=await f.text();try{A=JSON.parse(O),Array.isArray(A)&&f.status===404&&(E=[],A=null,R=200,C="OK")}catch{f.status===404&&O===""?(R=204,C="No Content"):A={message:O}}if(A&&this.isMaybeSingle&&(!((b=A==null?void 0:A.details)===null||b===void 0)&&b.includes("0 rows"))&&(A=null,R=200,C="OK"),A&&this.shouldThrowOnError)throw new r.default(A)}return{error:A,data:E,count:I,status:R,statusText:C}});return this.shouldThrowOnError||(h=h.catch(f=>{var x,y,v;return{error:{message:`${(x=f==null?void 0:f.name)!==null&&x!==void 0?x:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(o,l)}returns(){return this}overrideTypes(){return this}}return wf.default=n,wf}var n2;function oA(){if(n2)return yf;n2=1,Object.defineProperty(yf,"__esModule",{value:!0});const e=jc.__importDefault(iA());class r extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:h=u}={}){const f=h?`${h}.order`:"order",x=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${x?`${x},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${s}`),this.url.searchParams.set(f,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:h=!1,format:f="text"}={}){var x;const y=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return yf.default=r,yf}var s2;function Vx(){if(s2)return xf;s2=1,Object.defineProperty(xf,"__esModule",{value:!0});const e=jc.__importDefault(oA()),r=new RegExp("[,()]");class n extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const u=Array.from(new Set(l)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:u,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const x=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${f}fts${x}.${l}`),this}match(o){return Object.entries(o).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(o,l,u){return this.url.searchParams.append(o,`not.${l}.${u}`),this}or(o,{foreignTable:l,referencedTable:u=l}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,l,u){return this.url.searchParams.append(o,`${l}.${u}`),this}}return xf.default=n,xf}var i2;function aA(){if(i2)return gf;i2=1,Object.defineProperty(gf,"__esModule",{value:!0});const e=jc.__importDefault(Vx());class r{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(s,o){const{head:l=!1,count:u}=o??{},h=l?"HEAD":"GET";let f=!1;const x=(s??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",x),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:l=!0}={}){var u;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(f.length>0){const x=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:h=!0}={}){var f;const x="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var o;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return gf.default=r,gf}var o2;function dD(){if(o2)return mf;o2=1,Object.defineProperty(mf,"__esModule",{value:!0});const t=jc,e=t.__importDefault(aA()),r=t.__importDefault(Vx());class n{constructor(o,{headers:l={},schema:u,fetch:h}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=h}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:h=!1,count:f}={}){var x;let y;const v=new URL(`${this.url}/rpc/${o}`);let b;u||h?(y=u?"HEAD":"GET",Object.entries(l).filter(([E,I])=>I!==void 0).map(([E,I])=>[E,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([E,I])=>{v.searchParams.append(E,I)})):(y="POST",b=l);const A=new Headers(this.headers);return f&&A.set("Prefer",`count=${f}`),new r.default({method:y,url:v,headers:A,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return mf.default=n,mf}Object.defineProperty(ln,"__esModule",{value:!0});var lA=ln.PostgrestError=yA=ln.PostgrestBuilder=gA=ln.PostgrestTransformBuilder=pA=ln.PostgrestFilterBuilder=fA=ln.PostgrestQueryBuilder=uA=ln.PostgrestClient=void 0;const Dc=jc,cA=Dc.__importDefault(dD());var uA=ln.PostgrestClient=cA.default;const dA=Dc.__importDefault(aA());var fA=ln.PostgrestQueryBuilder=dA.default;const hA=Dc.__importDefault(Vx());var pA=ln.PostgrestFilterBuilder=hA.default;const mA=Dc.__importDefault(oA());var gA=ln.PostgrestTransformBuilder=mA.default;const xA=Dc.__importDefault(iA());var yA=ln.PostgrestBuilder=xA.default;const wA=Dc.__importDefault(sA());lA=ln.PostgrestError=wA.default;var vA=ln.default={PostgrestClient:cA.default,PostgrestQueryBuilder:dA.default,PostgrestFilterBuilder:hA.default,PostgrestTransformBuilder:mA.default,PostgrestBuilder:xA.default,PostgrestError:wA.default};const fD=pg({__proto__:null,get PostgrestBuilder(){return yA},get PostgrestClient(){return uA},get PostgrestError(){return lA},get PostgrestFilterBuilder(){return pA},get PostgrestQueryBuilder(){return fA},get PostgrestTransformBuilder(){return gA},default:vA},[ln]),{PostgrestClient:hD,PostgrestQueryBuilder:iV,PostgrestFilterBuilder:oV,PostgrestTransformBuilder:aV,PostgrestBuilder:lV,PostgrestError:cV}=vA||fD;class pD{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mD="2.78.0",gD=`realtime-js/${mD}`,xD="1.0.0",Tm=1e4,yD=1e3,wD=100;var Nu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nu||(Nu={}));var Cr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Cr||(Cr={}));var Ds;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ds||(Ds={}));var Im;(function(t){t.websocket="websocket"})(Im||(Im={}));var ma;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ma||(ma={}));class vD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(e.slice(l,l+s));l=l+s;const h=n.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:h,payload:f}}}class _A{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const a2=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=_D(l,t,e,s),o),{}):{}},_D=(t,e,r,n)=>{const s=e.find(u=>u.name===t),o=s==null?void 0:s.type,l=r[t];return o&&!n.includes(o)?bA(o,l):Rm(l)},bA=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return SD(e,r)}switch(t){case Ot.bool:return bD(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return ED(e);case Ot.json:case Ot.jsonb:return CD(e);case Ot.timestamp:return AD(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return Rm(e);default:return Rm(e)}},Rm=t=>t,bD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ED=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},CD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},SD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const l=t.slice(1,r);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>bA(e,u))}return t},AD=t=>typeof t=="string"?t.replace(" ","T"):t,EA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class G1{constructor(e,r,n={},s=Tm){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var l2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(l2||(l2={}));class Tu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(h=>{this.state=Tu.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Tu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),l=this.transformState(r),u={},h={};return this.map(o,(f,x)=>{l[f]||(h[f]=x)}),this.map(l,(f,x)=>{const y=o[f];if(y){const v=x.map(I=>I.presence_ref),b=y.map(I=>I.presence_ref),A=x.filter(I=>b.indexOf(I.presence_ref)<0),E=y.filter(I=>v.indexOf(I.presence_ref)<0);A.length>0&&(u[f]=A),E.length>0&&(h[f]=E)}else u[f]=x}),this.syncDiff(o,{joins:u,leaves:h},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(u,h)=>{var f;const x=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(h),x.length>0){const y=e[u].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);e[u].unshift(...v)}n(u,x,h)}),this.map(l,(u,h)=>{let f=e[u];if(!f)return;const x=h.map(y=>y.presence_ref);f=f.filter(y=>x.indexOf(y.presence_ref)<0),e[u]=f,s(u,f,h),f.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(c2||(c2={}));var Iu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Iu||(Iu={}));var Ni;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ni||(Ni={}));class Hx{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Cr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new G1(this,Ds.join,this.params,this.timeout),this.rejoinTimer=new _A(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Cr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ds.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Tu(this),this.broadcastEndpointURL=EA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Cr.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,f=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&s!==void 0?s:[],x=!!this.bindings[Iu.PRESENCE]&&this.bindings[Iu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Ni.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Ni.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var A;if(this.socket.setAuth(),b===void 0){e==null||e(Ni.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,I=(A=E==null?void 0:E.length)!==null&&A!==void 0?A:0,R=[];for(let C=0;C<I;C++){const S=E[C],{filter:{event:O,schema:k,table:F,filter:B}}=S,P=b&&b[C];if(P&&P.event===O&&P.schema===k&&P.table===F&&P.filter===B)R.push(Object.assign(Object.assign({},S),{id:P.id}));else{this.unsubscribe(),this.state=Cr.errored,e==null||e(Ni.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Ni.SUBSCRIBED);return}}).receive("error",b=>{this.state=Cr.errored,e==null||e(Ni.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ni.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Cr.joined&&e===Iu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let h=u.statusText;try{const f=await u.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,h;const f=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Cr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ds.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new G1(this,Ds.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Cr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new G1(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:f,join:x}=Ds;if(n&&[u,h,f,x].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var A,E,I;return((A=b.filter)===null||A===void 0?void 0:A.event)==="*"||((I=(E=b.filter)===null||E===void 0?void 0:E.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===l}).map(b=>b.callback(v,n)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var A,E,I,R,C,S;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,k=(A=b.filter)===null||A===void 0?void 0:A.event;return O&&((E=r.ids)===null||E===void 0?void 0:E.includes(O))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const O=(C=(R=b==null?void 0:b.filter)===null||R===void 0?void 0:R.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return O==="*"||O===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const A=v.data,{schema:E,table:I,commit_timestamp:R,type:C,errors:S}=A;v=Object.assign(Object.assign({},{schema:E,table:I,commit_timestamp:R,eventType:C,new:{},old:{},errors:S}),this._getPayloadRecords(A))}b.callback(v,n)})}_isClosed(){return this.state===Cr.closed}_isJoined(){return this.state===Cr.joined}_isJoining(){return this.state===Cr.joining}_isLeaving(){return this.state===Cr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Hx.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ds.close,{},e)}_onError(e){this._on(Ds.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=a2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=a2(e.columns,e.old_record)),r}}const Y1=()=>{},_f={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ND=[1e3,2e3,5e3,1e4],TD=1e4,ID=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tm,this.transport=null,this.heartbeatIntervalMs=_f.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Y1,this.ref=0,this.reconnectTimer=null,this.logger=Y1,this.conn=null,this.sendBuffer=[],this.serializer=new vD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>zo(async()=>{const{default:u}=await Promise.resolve().then(()=>Za);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Im.websocket}`,this.httpEndpoint=EA(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xD}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Nu.connecting:return ma.Connecting;case Nu.open:return ma.Open;case Nu.closing:return ma.Closing;default:return ma.Closed}}isConnected(){return this.connectionState()===ma.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Hx(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},_f.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:l}=r,u=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${n} ${s} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(s,o,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ds.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([ID],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:gD};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ds.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _A(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_f.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,l,u,h,f,x;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Tm,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:_f.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Y1,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:y=>ND[y-1]||TD,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(y,v)=>v(JSON.stringify(y)),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $x extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class OD extends $x{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Om extends $x{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Wx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zo(async()=>{const{default:n}=await Promise.resolve().then(()=>Za);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},MD=()=>Ie(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zo(()=>Promise.resolve().then(()=>Za),void 0)).Response:Response}),Mm=t=>{if(Array.isArray(t))return t.map(r=>Mm(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Mm(n)}),e},kD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},X1=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},PD=(t,e,r)=>Ie(void 0,void 0,void 0,function*(){const n=yield MD();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,l=(s==null?void 0:s.statusCode)||o+"";e(new OD(X1(s),o,l))}).catch(s=>{e(new Om(X1(s),s))}):e(new Om(X1(t),t))}),jD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(kD(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Nd(t,e,r,n,s,o){return Ie(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(r,jD(e,n,s,o)).then(h=>{if(!h.ok)throw h;return n!=null&&n.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>PD(h,u,n))})})}function rd(t,e,r,n){return Ie(this,void 0,void 0,function*(){return Nd(t,"GET",e,r,n)})}function Ms(t,e,r,n,s){return Ie(this,void 0,void 0,function*(){return Nd(t,"POST",e,n,s,r)})}function km(t,e,r,n,s){return Ie(this,void 0,void 0,function*(){return Nd(t,"PUT",e,n,s,r)})}function DD(t,e,r,n){return Ie(this,void 0,void 0,function*(){return Nd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gx(t,e,r,n,s){return Ie(this,void 0,void 0,function*(){return Nd(t,"DELETE",e,n,s,r)})}class LD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}var CA;class BD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[CA]="BlobDownloadBuilder",this.promise=null}asStream(){return new LD(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Wt(e))return{data:null,error:e};throw e}})}}CA=Symbol.toStringTag;const FD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},u2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UD{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Wx(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return Ie(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},u2),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const f=this._removeEmptyFolders(r),x=this._getFinalPath(f),y=yield(e=="PUT"?km:Ms)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Wt(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Ie(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let h;const f=Object.assign({upsert:u2.upsert},s),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",f.cacheControl)):(h=n,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType);const y=yield km(this.fetch,u.toString(),h,{headers:x});return{data:{path:o,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Wt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Ms(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new $x("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Ms(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Ie(this,void 0,void 0,function*(){try{const s=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=o?`?${o}`:"",u=this._getFinalPath(e),h=()=>rd(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new BD(h,this.shouldThrowOnError)}info(e){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield rd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Mm(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}exists(e){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield DD(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n)&&n instanceof Om){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&s.push(h);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${f}`)}}}remove(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ie(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},FD),r),{prefix:e||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}listV2(e,r){return Ie(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ms(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const SA="2.78.0",AA={"X-Client-Info":`storage-js/${SA}`};class zD{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AA),r),this.fetch=Wx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ie(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield rd(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}getBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}createBucket(e){return Ie(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Ie(this,void 0,void 0,function*(){try{return{data:yield km(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Wt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class VD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AA),r),this.fetch=Wx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}listBuckets(e){return Ie(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield rd(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wt(r))return{data:null,error:r};throw r}})}}const Yx={"X-Client-Info":`storage-js/${SA}`,"Content-Type":"application/json"};class NA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class q1 extends NA{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class HD extends NA{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var d2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(d2||(d2={}));const Xx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zo(async()=>{const{default:n}=await Promise.resolve().then(()=>Za);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},$D=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},f2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WD=(t,e,r)=>Ie(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new q1(f2(l),s,u))}).catch(()=>{const l=s+"",u=o.statusText||`HTTP ${s} error`;e(new q1(u,s,l))});else{const l=s+"",u=o.statusText||`HTTP ${s} error`;e(new q1(u,s,l))}}else e(new HD(f2(t),t))}),GD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?($D(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function YD(t,e,r,n,s,o){return Ie(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(r,GD(e,n,s,o)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>WD(h,u,n))})})}function Un(t,e,r,n,s){return Ie(this,void 0,void 0,function*(){return YD(t,"POST",e,n,s,r)})}class XD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yx),r),this.fetch=Xx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ie(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fn(n))return{data:null,error:n};throw n}})}listIndexes(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Ie(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Fn(n))return{data:null,error:n};throw n}})}}class qD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yx),r),this.fetch=Xx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ie(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}getVectors(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}listVectors(e){return Ie(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Un(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}queryVectors(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Ie(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}}class KD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yx),r),this.fetch=Xx(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}getBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}listBuckets(){return Ie(this,arguments,void 0,function*(e={}){try{return{data:yield Un(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ie(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}}class QD extends KD{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new ZD(this.url,this.headers,e,this.fetch)}}class ZD extends XD{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ie(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ie(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ie(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ie(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new JD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class JD extends qD{constructor(e,r,n,s,o){super(e,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ie(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ie(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ie(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ie(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ie(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class e5 extends zD{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new UD(this.url,this.headers,e,this.fetch)}get vectors(){return new QD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new VD(this.url+"/iceberg",this.headers,this.fetch)}}const t5="2.78.0";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const r5={"X-Client-Info":`supabase-js-${fu}/${t5}`},n5={headers:r5},s5={schema:"public"},i5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},o5={},a5=t=>{let e;return t?e=t:typeof fetch>"u"?e=rA:e=fetch,(...r)=>e(...r)},l5=()=>typeof Headers>"u"?nA:Headers,c5=(t,e,r)=>{const n=a5(r),s=l5();return async(o,l)=>{var u;const h=(u=await e())!==null&&u!==void 0?u:t;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),n(o,Object.assign(Object.assign({},l),{headers:f}))}};function u5(t){return t.endsWith("/")?t:t+"/"}function d5(t,e){var r,n;const{db:s,auth:o,realtime:l,global:u}=t,{db:h,auth:f,realtime:x,global:y}=e,v={db:Object.assign(Object.assign({},h),s),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},x),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),u),{headers:Object.assign(Object.assign({},(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function f5(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(u5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const TA="2.78.0",bl=30*1e3,Pm=3,K1=Pm*bl,h5="http://localhost:9999",p5="supabase.auth.token",m5={"X-Client-Info":`gotrue-js/${TA}`},jm="X-Supabase-Api-Version",IA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},g5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,x5=10*60*1e3;class nd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function De(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class y5 extends nd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function w5(t){return De(t)&&t.name==="AuthApiError"}class ga extends nd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ko extends nd{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ns extends Ko{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function v5(t){return De(t)&&t.name==="AuthSessionMissingError"}class hl extends Ko{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bf extends Ko{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ef extends Ko{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _5(t){return De(t)&&t.name==="AuthImplicitGrantRedirectError"}class h2 extends Ko{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dm extends Ko{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Q1(t){return De(t)&&t.name==="AuthRetryableFetchError"}class p2 extends Ko{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Lm extends Ko{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),m2=` 	
\r=`.split(""),b5=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<m2.length;e+=1)t[m2[e].charCodeAt(0)]=-2;for(let e=0;e<Oh.length;e+=1)t[Oh[e].charCodeAt(0)]=e;return t})();function g2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Oh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Oh[n]),e.queuedBits-=6}}function RA(t,e,r){const n=b5[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function x2(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{S5(l,n,r)};for(let l=0;l<t.length;l+=1)RA(t.charCodeAt(l),s,o);return e.join("")}function E5(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function C5(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}E5(n,e)}}function S5(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Xl(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)RA(t.charCodeAt(s),r,n);return new Uint8Array(e)}function A5(t){const e=[];return C5(t,r=>e.push(r)),new Uint8Array(e)}function va(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>g2(s,r,n)),g2(null,r,n),e.join("")}function N5(t){return Math.round(Date.now()/1e3)+t}function T5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nn=()=>typeof window<"u"&&typeof document<"u",aa={tested:!1,writable:!1},OA=()=>{if(!nn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(aa.tested)return aa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),aa.tested=!0,aa.writable=!0}catch{aa.tested=!0,aa.writable=!1}return aa.writable};function I5(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const MA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>zo(async()=>{const{default:n}=await Promise.resolve().then(()=>Za);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},R5=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",El=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},la=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},io=async(t,e)=>{await t.removeItem(e)};class T0{constructor(){this.promise=new T0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}T0.promiseConstructor=Promise;function Z1(t){const e=t.split(".");if(e.length!==3)throw new Lm("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!g5.test(e[n]))throw new Lm("JWT not in base64url format");return{header:JSON.parse(x2(e[0])),payload:JSON.parse(x2(e[1])),signature:Xl(e[2]),raw:{header:e[0],payload:e[1]}}}async function O5(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function M5(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){n(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function k5(t){return("0"+t.toString(16)).substr(-2)}function P5(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,k5).join("")}async function j5(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function D5(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await j5(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pl(t,e,r=!1){const n=P5();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await El(t,`${e}-code-verifier`,s);const o=await D5(n);return[o,n===o?"plain":"s256"]}const L5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B5(t){const e=t.headers.get(jm);if(!e||!e.match(L5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function F5(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function U5(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const z5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ml(t){if(!z5.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function J1(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function V5(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function y2(t){return JSON.parse(JSON.stringify(t))}const ha=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),H5=[502,503,504];async function w2(t){var e;if(!R5(t))throw new Dm(ha(t),0);if(H5.includes(t.status))throw new Dm(ha(t),t.status);let r;try{r=await t.json()}catch(o){throw new ga(ha(o),o)}let n;const s=B5(t);if(s&&s.getTime()>=IA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new p2(ha(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ns}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new p2(ha(r),t.status,r.weak_password.reasons);throw new y5(ha(r),t.status||500,n)}const $5=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function $e(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[jm]||(o[jm]=IA["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await W5(t,e,r+u,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function W5(t,e,r,n,s,o){const l=$5(e,n,s,o);let u;try{u=await t(r,Object.assign({},l))}catch(h){throw console.error(h),new Dm(ha(h),0)}if(u.ok||await w2(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(h){await w2(h)}}function Ts(t){var e;let r=null;X5(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=N5(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function v2(t){const e=Ts(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function po(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function G5(t){return{data:t,error:null}}function Y5(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,l=qo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function _2(t){return t}function X5(t){return t.access_token&&t.refresh_token&&t.expires_in}const ep=["global","local","others"];class q5{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=MA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=ep[0]){if(ep.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ep.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:po})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=qo(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Y5,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(De(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:po})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,l,u,h;try{const f={nextPage:null,lastPage:0,total:0},x=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:_2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(A=>{const E=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(A.split(";")[1].split("=")[1]);f[`${I}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(De(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){ml(e);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:po})}catch(r){if(De(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ml(e);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:po})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ml(e);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:po})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ml(e.userId);try{const{data:r,error:n}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ml(e.userId),ml(e.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,l,u,h;try{const f={nextPage:null,lastPage:0,total:0},x=await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:_2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(A=>{const E=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(A.split(";")[1].split("=")[1]);f[`${I}Page`]=E}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(De(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await $e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await $e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}}function b2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const gl={debug:!!(globalThis&&OA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class K5 extends kA{}async function Q5(t,e,r){gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),gl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new K5(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Z5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function PA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function J5(t){return parseInt(t,16)}function eL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function tL(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:h,resources:f,scheme:x,uri:y,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=PA(t.address),A=x?`${x}://${n}`:n,E=t.statement?`${t.statement}
`:"",I=`${A} wants you to sign in with your Ethereum account:
${b}

${E}`;let R=`URI: ${y}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(s&&(R+=`
Expiration Time: ${s.toISOString()}`),u&&(R+=`
Not Before: ${u.toISOString()}`),h&&(R+=`
Request ID: ${h}`),f){let C=`
Resources:`;for(const S of f){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);C+=`
- ${S}`}R+=C}return`${I}
${R}`}class pr extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Mh extends pr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function rL({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(jA(l)){if(o.rp.id!==l)return new pr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function nL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(jA(n)){if(r.rpId!==n)return new pr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class sL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const iL=new sL;function oL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=qo(t,["challenge","user","excludeCredentials"]),o=Xl(e).buffer,l=Object.assign(Object.assign({},r),{id:Xl(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:o,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const f=n[h];u.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:Xl(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function aL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=qo(t,["challenge","allowCredentials"]),s=Xl(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Xl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function lL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:va(new Uint8Array(t.response.attestationObject)),clientDataJSON:va(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function cL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:va(new Uint8Array(s.authenticatorData)),clientDataJSON:va(new Uint8Array(s.clientDataJSON)),signature:va(new Uint8Array(s.signature)),userHandle:s.userHandle?va(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function E2(){var t,e;return!!(nn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function uL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",e)}:{data:null,error:new Mh("Empty credential response",e)}}catch(e){return{data:null,error:rL({error:e,options:t})}}}async function dL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",e)}:{data:null,error:new Mh("Empty credential response",e)}}catch(e){return{data:null,error:nL({error:e,options:t})}}}const fL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},hL={userVerification:"preferred",hints:["security-key"]};function kh(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const l=s[o];if(l!==void 0)if(Array.isArray(l))n[o]=l;else if(r(l))n[o]=l;else if(e(l)){const u=n[o];e(u)?n[o]=kh(u,l):n[o]=kh(l)}else n[o]=l}return n}function pL(t,e){return kh(fL,t,e||{})}function mL(t,e){return kh(hL,t,e||{})}class gL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:u};const h=s??iL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=pL(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:y}=await uL({publicKey:f,signal:h});return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}case"request":{const f=mL(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:y}=await dL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:h}));return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}}}catch(l){return De(l)?{data:null,error:l}:{data:null,error:new ga("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!r)return{data:null,error:new nd("rpId is required for WebAuthn authentication")};try{if(!E2())return{data:null,error:new ga("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!l)return{data:null,error:u};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(l){return De(l)?{data:null,error:l}:{data:null,error:new ga("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!r)return{data:null,error:new nd("rpId is required for WebAuthn registration")};try{if(!E2())return{data:null,error:new ga("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(x=>{var y;return(y=x.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:h,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(l){return De(l)?{data:null,error:l}:{data:null,error:new ga("Unexpected error in register",l)}}}}Z5();const xL={url:h5,storageKey:p5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:m5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function C2(t,e,r){return await r()}const xl={};class sd{get jwks(){var e,r;return(r=(e=xl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){xl[this.storageKey]=Object.assign(Object.assign({},xl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=xl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xl[this.storageKey]=Object.assign(Object.assign({},xl[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sd.nextInstanceID,sd.nextInstanceID+=1,this.instanceID>0&&nn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xL),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new q5({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=MA(s.fetch),this.lock=s.lock||C2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Q5:this.lock=C2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new gL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:OA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=b2(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=b2(this.memoryStorage)),nn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${TA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=I5(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),nn()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),_5(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return De(r)?{error:r}:{error:new ga("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ts}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(De(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:x,password:y,options:v}=e;let b=null,A=null;this.flowType==="pkce"&&([b,A]=await pl(this.storage,this.storageKey)),o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:x,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:A},xform:Ts})}else if("phone"in e){const{phone:x,password:y,options:v}=e;o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ts})}else throw new bf("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(De(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:l,options:u}=e;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:v2})}else if("phone"in e){const{phone:o,password:l,options:u}=e;r=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:v2})}else throw new bf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new hl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,l,u,h,f,x,y,v;let b,A;if("message"in e)b=e.message,A=e.signature;else{const{chain:E,wallet:I,statement:R,options:C}=e;let S;if(nn())if(typeof I=="object")S=I;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")S=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=I}const O=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href),k=await S.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=PA(k[0]);let B=(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const L=await S.request({method:"eth_chainId"});B=J5(L)}const P={domain:O.host,address:F,statement:R,uri:O.href,version:"1",chainId:B,nonce:(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(o=C==null?void 0:C.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(x=C==null?void 0:C.signInWithEthereum)===null||x===void 0?void 0:x.resources};b=tL(P),A=await S.request({method:"personal_sign",params:[eL(b),F]})}try{const{data:E,error:I}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:A},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ts});if(I)throw I;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new hl}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:I})}catch(E){if(De(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(e){var r,n,s,o,l,u,h,f,x,y,v,b;let A,E;if("message"in e)A=e.message,E=e.signature;else{const{chain:I,wallet:R,statement:C,options:S}=e;let O;if(nn())if(typeof R=="object")O=R;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))O=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=R}const k=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const F=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),C?{statement:C}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)A=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),E=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${k.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((y=(x=S==null?void 0:S.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...S.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await O.signMessage(new TextEncoder().encode(A),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:I,error:R}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:va(E)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ts});if(R)throw R;return!I||!I.session||!I.user?{data:{user:null,session:null},error:new hl}:(I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),{data:Object.assign({},I),error:R})}catch(I){if(De(I))return{data:{user:null,session:null},error:I};throw I}}async _exchangeCodeForSession(e){const r=await la(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:l}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ts});if(await io(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new hl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(De(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:l}=e,u=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ts}),{data:h,error:f}=u;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new hl}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,l;try{if("email"in e){const{email:u,options:h}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await pl(this.storage,this.storageKey));const{error:y}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:x},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:u,options:h}=e,{data:f,error:x}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x}}throw new bf("You must provide either an email or phone number.")}catch(u){if(De(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Ts});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(s){if(De(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await pl(this.storage,this.storageKey)),await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:G5})}catch(o){if(De(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ns;const{error:s}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(De(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:l}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:l,error:u}=await $e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new bf("You must provide either an email or phone number and a type")}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await la(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<K1:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await la(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=J1()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=V5(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:po}):await this._useSession(async r=>{var n,s,o;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ns}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:po})})}catch(r){if(De(r))return v5(r)&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Ns;const l=s.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await pl(this.storage,this.storageKey));const{data:f,error:x}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:po});if(x)throw x;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ns;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:l}=Z1(e.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(De(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:u}=r;if(u)throw u;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ns;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(De(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!nn())throw new Ef("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ef(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new h2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ef("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new h2("No code detected.");const{data:C,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:h,token_type:f}=e;if(!o||!u||!l||!f)throw new Ef("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(u);let v=x+y;h&&(v=parseInt(h));const b=v-x;b*1e3<=bl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const A=v-y;x-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,v,x):x-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,v,x);const{data:E,error:I}=await this._getUser(o);if(I)throw I;const R={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(n){if(De(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await la(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(w5(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=T5(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await pl(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(De(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var l,u,h,f,x;const{data:y,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&x!==void 0?x:void 0})});if(s)throw s;return nn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(De(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:l,provider:u,token:h,access_token:f,nonce:x}=e,y=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:h,access_token:f,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ts}),{data:v,error:b}=y;return b?{data:{user:null,session:null},error:b}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new hl}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:b})}catch(s){if(De(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:l}=r;if(l)throw l;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await M5(async s=>(s>0&&await O5(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ts})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Q1(o)&&Date.now()+l-n<bl})}catch(n){if(this._debug(r,"error",n),De(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),nn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await la(this.storage,this.storageKey);if(s&&this.userStorage){let l=await la(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await El(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:J1()}else if(s&&!s.user&&!s.user){const l=await la(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await io(this.storage,this.storageKey+"-user"),await El(this.storage,this.storageKey,s)):s.user=J1()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<K1;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${K1}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Q1(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ns;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new T0;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Ns;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),De(o)){const l={data:null,error:o};return Q1(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await El(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=y2(s);await El(this.storage,this.storageKey,o)}else{const s=y2(r);await El(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await io(this.storage,this.storageKey),await io(this.storage,this.storageKey+"-code-verifier"),await io(this.storage,this.storageKey+"-user"),this.userStorage&&await io(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/bl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bl}ms, refresh threshold is ${Pm} ticks`),s<=Pm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,l]=await pl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?lL(e.webauthn.credential_response):cL(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:h}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(r){if(De(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:oL(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:aL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(De(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Z1(n.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await $e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):{data:null,error:new Ns}})}catch(r){if(De(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Ns};const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&nn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return{data:null,error:o};if(!s)return{data:null,error:new Ns};const l=await $e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&nn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(De(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(u=>u.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+x5>s)return n;const{data:o,error:l}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:b,error:A}=await this.getSession();if(A||!b.session)return{data:null,error:A};n=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:h}}=Z1(n);r!=null&&r.allowExpired||F5(o.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const x=U5(s.alg),y=await crypto.subtle.importKey("jwk",f,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,l,A5(`${u}.${h}`)))throw new Lm("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}}sd.nextInstanceID=0;const yL=sd;class wL extends yL{constructor(e){super(e)}}class vL{constructor(e,r,n){var s,o,l;this.supabaseUrl=e,this.supabaseKey=r;const u=f5(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:s5,realtime:o5,auth:Object.assign(Object.assign({},i5),{storageKey:h}),global:n5},x=d5(n??{},f);this.storageKey=(s=x.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,x.global.fetch),this.fetch=c5(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new hD(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new e5(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new iD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:l,flowType:u,lock:h,debug:f},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wL({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:u,lock:h,debug:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new RD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _L=(t,e,r)=>new vL(t,e,r);function bL(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}bL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const EL="https://mtwburwdescvdngmzcmu.supabase.co",CL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10d2J1cndkZXNjdmRuZ216Y211Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM2MzMsImV4cCI6MjA3NzY4OTYzM30.9Ez2Dg9DdMaqNJy960B5V4U8H8uvz5RS5KyVsSHIZ2c",xe=_L(EL,CL,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),S2=Object.freeze(Object.defineProperty({__proto__:null,supabase:xe},Symbol.toStringTag,{value:"Module"})),DA=N.createContext(void 0),SL=({children:t})=>{const[e,r]=N.useState(null),[n,s]=N.useState(null),[o,l]=N.useState(null),[u,h]=N.useState(!0);N.useEffect(()=>{const{data:{subscription:b}}=xe.auth.onAuthStateChange((A,E)=>{s(E),r((E==null?void 0:E.user)??null),E!=null&&E.user?setTimeout(()=>{f(E.user.id)},0):l(null)});return xe.auth.getSession().then(({data:{session:A}})=>{s(A),r((A==null?void 0:A.user)??null),A!=null&&A.user?f(A.user.id).then(()=>h(!1)):h(!1)}),()=>b.unsubscribe()},[]);const f=async b=>{const{data:A,error:E}=await xe.from("user_roles").select("role").eq("user_id",b).single();l(!E&&A?A.role:"customer")},x=async(b,A,E,I)=>{const R=`${window.location.origin}/home`,{error:C}=await xe.auth.signUp({email:b,password:A,options:{emailRedirectTo:R,data:{full_name:E,phone:I}}});return{error:C}},y=async(b,A)=>{const{error:E}=await xe.auth.signInWithPassword({email:b,password:A});return{error:E}},v=async()=>{await xe.auth.signOut()};return p.jsx(DA.Provider,{value:{user:e,session:n,userRole:o,signUp:x,signIn:y,signOut:v,loading:u},children:t})},Mn=()=>{const t=N.useContext(DA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},AL=x0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Be=N.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},o)=>{const l=n?C8:"button";return p.jsx(l,{className:Oe(AL({variant:e,size:r,className:t})),ref:o,...s})});Be.displayName="Button";function Ti(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var qn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yc={duration:.5,overwrite:!1,delay:0},qx,Vr,Ht,fs=1e8,It=1/fs,Bm=Math.PI*2,NL=Bm/4,TL=0,BA=Math.sqrt,IL=Math.cos,RL=Math.sin,Pr=function(e){return typeof e=="string"},ar=function(e){return typeof e=="function"},Wi=function(e){return typeof e=="number"},Kx=function(e){return typeof e>"u"},yi=function(e){return typeof e=="object"},An=function(e){return e!==!1},Qx=function(){return typeof window<"u"},Cf=function(e){return ar(e)||Pr(e)},FA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Jr=Array.isArray,Fm=/(?:-?\.?\d|\.)+/gi,UA=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Dl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,zA=/[+-]=-?[.\d]+/,VA=/[^,'"\[\]\s]+/gi,OL=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Yt,si,Um,Zx,Qn={},Ph={},HA,$A=function(e){return(Ph=wc(e,Qn))&&Rn},Jx=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},id=function(e,r){return!r&&console.warn(e)},WA=function(e,r){return e&&(Qn[e]=r)&&Ph&&(Ph[e]=r)||Qn},od=function(){return 0},ML={suppressEvents:!0,isStart:!0,kill:!1},$f={suppressEvents:!0,kill:!1},kL={suppressEvents:!0},ey={},jo=[],zm={},GA,Ln={},rp={},A2=30,Wf=[],ty="",ry=function(e){var r=e[0],n,s;if(yi(r)||ar(r)||(e=[e]),!(n=(r._gsap||{}).harness)){for(s=Wf.length;s--&&!Wf[s].targetTest(r););n=Wf[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new gN(e[s],n)))||e.splice(s,1);return e},Oa=function(e){return e._gsap||ry(hs(e))[0]._gsap},YA=function(e,r,n){return(n=e[r])&&ar(n)?e[r]():Kx(n)&&e.getAttribute&&e.getAttribute(r)||n},Nn=function(e,r){return(e=e.split(",")).forEach(r)||e},ur=function(e){return Math.round(e*1e5)/1e5||0},gr=function(e){return Math.round(e*1e7)/1e7||0},ql=function(e,r){var n=r.charAt(0),s=parseFloat(r.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},PL=function(e,r){for(var n=r.length,s=0;e.indexOf(r[s])<0&&++s<n;);return s<n},jh=function(){var e=jo.length,r=jo.slice(0),n,s;for(zm={},jo.length=0,n=0;n<e;n++)s=r[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},ny=function(e){return!!(e._initted||e._startAt||e.add)},XA=function(e,r,n,s){jo.length&&!Vr&&jh(),e.render(r,n,!!(Vr&&r<0&&ny(e))),jo.length&&!Vr&&jh()},qA=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(VA).length<2?r:Pr(e)?e.trim():e},KA=function(e){return e},Zn=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e},jL=function(e){return function(r,n){for(var s in n)s in r||s==="duration"&&e||s==="ease"||(r[s]=n[s])}},wc=function(e,r){for(var n in r)e[n]=r[n];return e},N2=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=yi(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},Dh=function(e,r){var n={},s;for(s in e)s in r||(n[s]=e[s]);return n},Ru=function(e){var r=e.parent||Yt,n=e.keyframes?jL(Jr(e.keyframes)):Zn;if(An(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},DL=function(e,r){for(var n=e.length,s=n===r.length;s&&n--&&e[n]===r[n];);return n<0},QA=function(e,r,n,s,o){var l=e[s],u;if(o)for(u=r[o];l&&l[o]>u;)l=l._prev;return l?(r._next=l._next,l._next=r):(r._next=e[n],e[n]=r),r._next?r._next._prev=r:e[s]=r,r._prev=l,r.parent=r._dp=e,r},I0=function(e,r,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var o=r._prev,l=r._next;o?o._next=l:e[n]===r&&(e[n]=l),l?l._prev=o:e[s]===r&&(e[s]=o),r._next=r._prev=r.parent=null},Vo=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ma=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},LL=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},Vm=function(e,r,n,s){return e._startAt&&(Vr?e._startAt.revert($f):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(r,!0,s))},BL=function t(e){return!e||e._ts&&t(e.parent)},T2=function(e){return e._repeat?vc(e._tTime,e=e.duration()+e._rDelay)*e:0},vc=function(e,r){var n=Math.floor(e=gr(e/r));return e&&n===e?n-1:n},Lh=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},R0=function(e){return e._end=gr(e._start+(e._tDur/Math.abs(e._ts||e._rts||It)||0))},O0=function(e,r){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=gr(n._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),R0(e),n._dirty||Ma(n,e)),e},ZA=function(e,r){var n;if((r._time||!r._dur&&r._initted||r._start<e._time&&(r._dur||!r.add))&&(n=Lh(e.rawTime(),r),(!r._dur||Td(0,r.totalDuration(),n)-r._tTime>It)&&r.render(n,!0)),Ma(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-It}},ci=function(e,r,n,s){return r.parent&&Vo(r),r._start=gr((Wi(n)?n:n||e!==Yt?os(e,n,r):e._time)+r._delay),r._end=gr(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),QA(e,r,"_first","_last",e._sort?"_start":0),Hm(r)||(e._recent=r),s||ZA(e,r),e._ts<0&&O0(e,e._tTime),e},JA=function(e,r){return(Qn.ScrollTrigger||Jx("scrollTrigger",r))&&Qn.ScrollTrigger.create(r,e)},eN=function(e,r,n,s,o){if(iy(e,r,o),!e._initted)return 1;if(!n&&e._pt&&!Vr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&GA!==zn.frame)return jo.push(e),e._lazy=[o,s],1},FL=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Hm=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},UL=function(e,r,n,s){var o=e.ratio,l=r<0||!r&&(!e._start&&FL(e)&&!(!e._initted&&Hm(e))||(e._ts<0||e._dp._ts<0)&&!Hm(e))?0:1,u=e._rDelay,h=0,f,x,y;if(u&&e._repeat&&(h=Td(0,e._tDur,r),x=vc(h,u),e._yoyo&&x&1&&(l=1-l),x!==vc(e._tTime,u)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||Vr||s||e._zTime===It||!r&&e._zTime){if(!e._initted&&eN(e,r,s,n,h))return;for(y=e._zTime,e._zTime=r||(n?It:0),n||(n=r&&!y),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,f=e._pt;f;)f.r(l,f.d),f=f._next;r<0&&Vm(e,r,n,!0),e._onUpdate&&!n&&$n(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&$n(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===l&&(l&&Vo(e,1),!n&&!Vr&&($n(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},zL=function(e,r,n){var s;if(n>r)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>r)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<r)return s;s=s._prev}},_c=function(e,r,n,s){var o=e._repeat,l=gr(r)||0,u=e._tTime/e._tDur;return u&&!s&&(e._time*=l/e._dur),e._dur=l,e._tDur=o?o<0?1e10:gr(l*(o+1)+e._rDelay*o):l,u>0&&!s&&O0(e,e._tTime=e._tDur*u),e.parent&&R0(e),n||Ma(e.parent,e),e},I2=function(e){return e instanceof cn?Ma(e):_c(e,e._dur)},VL={_start:0,endTime:od,totalDuration:od},os=function t(e,r,n){var s=e.labels,o=e._recent||VL,l=e.duration()>=fs?o.endTime(!1):e._dur,u,h,f;return Pr(r)&&(isNaN(r)||r in s)?(h=r.charAt(0),f=r.substr(-1)==="%",u=r.indexOf("="),h==="<"||h===">"?(u>=0&&(r=r.replace(/=/,"")),(h==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(r.substr(1))||0)*(f?(u<0?o:n).totalDuration()/100:1)):u<0?(r in s||(s[r]=l),s[r]):(h=parseFloat(r.charAt(u-1)+r.substr(u+1)),f&&n&&(h=h/100*(Jr(n)?n[0]:n).totalDuration()),u>1?t(e,r.substr(0,u-1),n)+h:l+h)):r==null?l:+r},Ou=function(e,r,n){var s=Wi(r[1]),o=(s?2:1)+(e<2?0:1),l=r[o],u,h;if(s&&(l.duration=r[1]),l.parent=n,e){for(u=l,h=n;h&&!("immediateRender"in u);)u=h.vars.defaults||{},h=An(h.vars.inherit)&&h.parent;l.immediateRender=An(u.immediateRender),e<2?l.runBackwards=1:l.startAt=r[o-1]}return new mr(r[0],l,r[o+1])},Qo=function(e,r){return e||e===0?r(e):r},Td=function(e,r,n){return n<e?e:n>r?r:n},Zr=function(e,r){return!Pr(e)||!(r=OL.exec(e))?"":r[1]},HL=function(e,r,n){return Qo(n,function(s){return Td(e,r,s)})},$m=[].slice,tN=function(e,r){return e&&yi(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&yi(e[0]))&&!e.nodeType&&e!==si},$L=function(e,r,n){return n===void 0&&(n=[]),e.forEach(function(s){var o;return Pr(s)&&!r||tN(s,1)?(o=n).push.apply(o,hs(s)):n.push(s)})||n},hs=function(e,r,n){return Ht&&!r&&Ht.selector?Ht.selector(e):Pr(e)&&!n&&(Um||!bc())?$m.call((r||Zx).querySelectorAll(e),0):Jr(e)?$L(e,n):tN(e)?$m.call(e,0):e?[e]:[]},Wm=function(e){return e=hs(e)[0]||id("Invalid scope")||{},function(r){var n=e.current||e.nativeElement||e;return hs(r,n.querySelectorAll?n:n===e?id("Invalid scope")||Zx.createElement("div"):e)}},rN=function(e){return e.sort(function(){return .5-Math.random()})},nN=function(e){if(ar(e))return e;var r=yi(e)?e:{each:e},n=ka(r.ease),s=r.from||0,o=parseFloat(r.base)||0,l={},u=s>0&&s<1,h=isNaN(s)||u,f=r.axis,x=s,y=s;return Pr(s)?x=y={center:.5,edges:.5,end:1}[s]||0:!u&&h&&(x=s[0],y=s[1]),function(v,b,A){var E=(A||r).length,I=l[E],R,C,S,O,k,F,B,P,L;if(!I){if(L=r.grid==="auto"?0:(r.grid||[1,fs])[1],!L){for(B=-fs;B<(B=A[L++].getBoundingClientRect().left)&&L<E;);L<E&&L--}for(I=l[E]=[],R=h?Math.min(L,E)*x-.5:s%L,C=L===fs?0:h?E*y/L-.5:s/L|0,B=0,P=fs,F=0;F<E;F++)S=F%L-R,O=C-(F/L|0),I[F]=k=f?Math.abs(f==="y"?O:S):BA(S*S+O*O),k>B&&(B=k),k<P&&(P=k);s==="random"&&rN(I),I.max=B-P,I.min=P,I.v=E=(parseFloat(r.amount)||parseFloat(r.each)*(L>E?E-1:f?f==="y"?E/L:L:Math.max(L,E/L))||0)*(s==="edges"?-1:1),I.b=E<0?o-E:o,I.u=Zr(r.amount||r.each)||0,n=n&&E<0?hN(n):n}return E=(I[v]-I.min)/I.max||0,gr(I.b+(n?n(E):E)*I.v)+I.u}},Gm=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=gr(Math.round(parseFloat(n)/e)*e*r);return(s-s%1)/r+(Wi(n)?0:Zr(n))}},sN=function(e,r){var n=Jr(e),s,o;return!n&&yi(e)&&(s=n=e.radius||fs,e.values?(e=hs(e.values),(o=!Wi(e[0]))&&(s*=s)):e=Gm(e.increment)),Qo(r,n?ar(e)?function(l){return o=e(l),Math.abs(o-l)<=s?o:l}:function(l){for(var u=parseFloat(o?l.x:l),h=parseFloat(o?l.y:0),f=fs,x=0,y=e.length,v,b;y--;)o?(v=e[y].x-u,b=e[y].y-h,v=v*v+b*b):v=Math.abs(e[y]-u),v<f&&(f=v,x=y);return x=!s||f<=s?e[x]:l,o||x===l||Wi(l)?x:x+Zr(l)}:Gm(e))},iN=function(e,r,n,s){return Qo(Jr(e)?!r:n===!0?!!(n=0):!s,function(){return Jr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(r-e+n*.99))/n)*n*s)/s})},WL=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(s){return r.reduce(function(o,l){return l(o)},s)}},GL=function(e,r){return function(n){return e(parseFloat(n))+(r||Zr(n))}},YL=function(e,r,n){return aN(e,r,0,1,n)},oN=function(e,r,n){return Qo(n,function(s){return e[~~r(s)]})},XL=function t(e,r,n){var s=r-e;return Jr(e)?oN(e,t(0,e.length),r):Qo(n,function(o){return(s+(o-e)%s)%s+e})},qL=function t(e,r,n){var s=r-e,o=s*2;return Jr(e)?oN(e,t(0,e.length-1),r):Qo(n,function(l){return l=(o+(l-e)%o)%o||0,e+(l>s?o-l:l)})},ad=function(e){for(var r=0,n="",s,o,l,u;~(s=e.indexOf("random(",r));)l=e.indexOf(")",s),u=e.charAt(s+7)==="[",o=e.substr(s+7,l-s-7).match(u?VA:Fm),n+=e.substr(r,s-r)+iN(u?o:+o[0],u?0:+o[1],+o[2]||1e-5),r=l+1;return n+e.substr(r,e.length-r)},aN=function(e,r,n,s,o){var l=r-e,u=s-n;return Qo(o,function(h){return n+((h-e)/l*u||0)})},KL=function t(e,r,n,s){var o=isNaN(e+r)?0:function(b){return(1-b)*e+b*r};if(!o){var l=Pr(e),u={},h,f,x,y,v;if(n===!0&&(s=1)&&(n=null),l)e={p:e},r={p:r};else if(Jr(e)&&!Jr(r)){for(x=[],y=e.length,v=y-2,f=1;f<y;f++)x.push(t(e[f-1],e[f]));y--,o=function(A){A*=y;var E=Math.min(v,~~A);return x[E](A-E)},n=r}else s||(e=wc(Jr(e)?[]:{},e));if(!x){for(h in r)sy.call(u,e,h,"get",r[h]);o=function(A){return ly(A,u)||(l?e.p:e)}}}return Qo(n,o)},R2=function(e,r,n){var s=e.labels,o=fs,l,u,h;for(l in s)u=s[l]-r,u<0==!!n&&u&&o>(u=Math.abs(u))&&(h=l,o=u);return h},$n=function(e,r,n){var s=e.vars,o=s[r],l=Ht,u=e._ctx,h,f,x;if(o)return h=s[r+"Params"],f=s.callbackScope||e,n&&jo.length&&jh(),u&&(Ht=u),x=h?o.apply(f,h):o.call(f),Ht=l,x},hu=function(e){return Vo(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Vr),e.progress()<1&&$n(e,"onInterrupt"),e},Ll,lN=[],cN=function(e){if(e)if(e=!e.name&&e.default||e,Qx()||e.headless){var r=e.name,n=ar(e),s=r&&!n&&e.init?function(){this._props=[]}:e,o={init:od,render:ly,add:sy,kill:f7,modifier:d7,rawVars:0},l={targetTest:0,get:0,getSetter:ay,aliases:{},register:0};if(bc(),e!==s){if(Ln[r])return;Zn(s,Zn(Dh(e,o),l)),wc(s.prototype,wc(o,Dh(e,l))),Ln[s.prop=r]=s,e.targetTest&&(Wf.push(s),ey[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}WA(r,s),e.register&&e.register(Rn,s,Tn)}else lN.push(e)},Tt=255,pu={aqua:[0,Tt,Tt],lime:[0,Tt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Tt],navy:[0,0,128],white:[Tt,Tt,Tt],olive:[128,128,0],yellow:[Tt,Tt,0],orange:[Tt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Tt,0,0],pink:[Tt,192,203],cyan:[0,Tt,Tt],transparent:[Tt,Tt,Tt,0]},np=function(e,r,n){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(n-r)*e*6:e<.5?n:e*3<2?r+(n-r)*(2/3-e)*6:r)*Tt+.5|0},uN=function(e,r,n){var s=e?Wi(e)?[e>>16,e>>8&Tt,e&Tt]:0:pu.black,o,l,u,h,f,x,y,v,b,A;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),pu[e])s=pu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),l=e.charAt(2),u=e.charAt(3),e="#"+o+o+l+l+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Tt,s&Tt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Tt,e&Tt]}else if(e.substr(0,3)==="hsl"){if(s=A=e.match(Fm),!r)h=+s[0]%360/360,f=+s[1]/100,x=+s[2]/100,l=x<=.5?x*(f+1):x+f-x*f,o=x*2-l,s.length>3&&(s[3]*=1),s[0]=np(h+1/3,o,l),s[1]=np(h,o,l),s[2]=np(h-1/3,o,l);else if(~e.indexOf("="))return s=e.match(UA),n&&s.length<4&&(s[3]=1),s}else s=e.match(Fm)||pu.transparent;s=s.map(Number)}return r&&!A&&(o=s[0]/Tt,l=s[1]/Tt,u=s[2]/Tt,y=Math.max(o,l,u),v=Math.min(o,l,u),x=(y+v)/2,y===v?h=f=0:(b=y-v,f=x>.5?b/(2-y-v):b/(y+v),h=y===o?(l-u)/b+(l<u?6:0):y===l?(u-o)/b+2:(o-l)/b+4,h*=60),s[0]=~~(h+.5),s[1]=~~(f*100+.5),s[2]=~~(x*100+.5)),n&&s.length<4&&(s[3]=1),s},dN=function(e){var r=[],n=[],s=-1;return e.split(Do).forEach(function(o){var l=o.match(Dl)||[];r.push.apply(r,l),n.push(s+=l.length+1)}),r.c=n,r},O2=function(e,r,n){var s="",o=(e+s).match(Do),l=r?"hsla(":"rgba(",u=0,h,f,x,y;if(!o)return e;if(o=o.map(function(v){return(v=uN(v,r,1))&&l+(r?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(x=dN(e),h=n.c,h.join(s)!==x.c.join(s)))for(f=e.replace(Do,"1").split(Dl),y=f.length-1;u<y;u++)s+=f[u]+(~h.indexOf(u)?o.shift()||l+"0,0,0,0)":(x.length?x:o.length?o:n).shift());if(!f)for(f=e.split(Do),y=f.length-1;u<y;u++)s+=f[u]+o[u];return s+f[y]},Do=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in pu)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),QL=/hsl[a]?\(/,fN=function(e){var r=e.join(" "),n;if(Do.lastIndex=0,Do.test(r))return n=QL.test(r),e[1]=O2(e[1],n),e[0]=O2(e[0],n,dN(e[1])),!0},ld,zn=function(){var t=Date.now,e=500,r=33,n=t(),s=n,o=1e3/240,l=o,u=[],h,f,x,y,v,b,A=function E(I){var R=t()-s,C=I===!0,S,O,k,F;if((R>e||R<0)&&(n+=R-r),s+=R,k=s-n,S=k-l,(S>0||C)&&(F=++y.frame,v=k-y.time*1e3,y.time=k=k/1e3,l+=S+(S>=o?4:o-S),O=1),C||(h=f(E)),O)for(b=0;b<u.length;b++)u[b](k,v,F,I)};return y={time:0,frame:0,tick:function(){A(!0)},deltaRatio:function(I){return v/(1e3/(I||60))},wake:function(){HA&&(!Um&&Qx()&&(si=Um=window,Zx=si.document||{},Qn.gsap=Rn,(si.gsapVersions||(si.gsapVersions=[])).push(Rn.version),$A(Ph||si.GreenSockGlobals||!si.gsap&&si||{}),lN.forEach(cN)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&y.sleep(),f=x||function(I){return setTimeout(I,l-y.time*1e3+1|0)},ld=1,A(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(h),ld=0,f=od},lagSmoothing:function(I,R){e=I||1/0,r=Math.min(R||33,e)},fps:function(I){o=1e3/(I||240),l=y.time*1e3+o},add:function(I,R,C){var S=R?function(O,k,F,B){I(O,k,F,B),y.remove(S)}:I;return y.remove(I),u[C?"unshift":"push"](S),bc(),S},remove:function(I,R){~(R=u.indexOf(I))&&u.splice(R,1)&&b>=R&&b--},_listeners:u},y}(),bc=function(){return!ld&&zn.wake()},dt={},ZL=/^[\d.\-M][\d.\-,\s]/,JL=/["']/g,e7=function(e){for(var r={},n=e.substr(1,e.length-3).split(":"),s=n[0],o=1,l=n.length,u,h,f;o<l;o++)h=n[o],u=o!==l-1?h.lastIndexOf(","):h.length,f=h.substr(0,u),r[s]=isNaN(f)?f.replace(JL,"").trim():+f,s=h.substr(u+1).trim();return r},t7=function(e){var r=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",r);return e.substring(r,~s&&s<n?e.indexOf(")",n+1):n)},r7=function(e){var r=(e+"").split("("),n=dt[r[0]];return n&&r.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[e7(r[1])]:t7(e).split(",").map(qA)):dt._CE&&ZL.test(e)?dt._CE("",e):n},hN=function(e){return function(r){return 1-e(1-r)}},pN=function t(e,r){for(var n=e._first,s;n;)n instanceof cn?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=r)),n=n._next},ka=function(e,r){return e&&(ar(e)?e:dt[e]||r7(e))||r},Ja=function(e,r,n,s){n===void 0&&(n=function(h){return 1-r(1-h)}),s===void 0&&(s=function(h){return h<.5?r(h*2)/2:1-r((1-h)*2)/2});var o={easeIn:r,easeOut:n,easeInOut:s},l;return Nn(e,function(u){dt[u]=Qn[u]=o,dt[l=u.toLowerCase()]=n;for(var h in o)dt[l+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=dt[u+"."+h]=o[h]}),o},mN=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},sp=function t(e,r,n){var s=r>=1?r:1,o=(n||(e?.3:.45))/(r<1?r:1),l=o/Bm*(Math.asin(1/s)||0),u=function(x){return x===1?1:s*Math.pow(2,-10*x)*RL((x-l)*o)+1},h=e==="out"?u:e==="in"?function(f){return 1-u(1-f)}:mN(u);return o=Bm/o,h.config=function(f,x){return t(e,f,x)},h},ip=function t(e,r){r===void 0&&(r=1.70158);var n=function(l){return l?--l*l*((r+1)*l+r)+1:0},s=e==="out"?n:e==="in"?function(o){return 1-n(1-o)}:mN(n);return s.config=function(o){return t(e,o)},s};Nn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;Ja(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});dt.Linear.easeNone=dt.none=dt.Linear.easeIn;Ja("Elastic",sp("in"),sp("out"),sp());(function(t,e){var r=1/e,n=2*r,s=2.5*r,o=function(u){return u<r?t*u*u:u<n?t*Math.pow(u-1.5/e,2)+.75:u<s?t*(u-=2.25/e)*u+.9375:t*Math.pow(u-2.625/e,2)+.984375};Ja("Bounce",function(l){return 1-o(1-l)},o)})(7.5625,2.75);Ja("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});Ja("Circ",function(t){return-(BA(1-t*t)-1)});Ja("Sine",function(t){return t===1?1:-IL(t*NL)+1});Ja("Back",ip("in"),ip("out"),ip());dt.SteppedEase=dt.steps=Qn.SteppedEase={config:function(e,r){e===void 0&&(e=1);var n=1/e,s=e+(r?0:1),o=r?1:0,l=1-It;return function(u){return((s*Td(0,l,u)|0)+o)*n}}};yc.ease=dt["quad.out"];Nn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ty+=t+","+t+"Params,"});var gN=function(e,r){this.id=TL++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:YA,this.set=r?r.getSetter:ay},cd=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,_c(this,+r.duration,1,1),this.data=r.data,Ht&&(this._ctx=Ht,Ht.data.push(this)),ld||zn.wake()}var e=t.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,_c(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(bc(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(O0(this,n),!o._dp||o.parent||ZA(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ci(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===It||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),XA(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+T2(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+T2(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*o,s):this._repeat?vc(this._tTime,o)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-It?0:this._rts;if(this._rts===n)return this;var o=this.parent&&this._ts?Lh(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-It?0:this._rts,this.totalTime(Td(-Math.abs(this._delay),this.totalDuration(),o),s!==!1),R0(this),LL(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==It&&(this._tTime-=It)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&ci(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(An(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Lh(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=kL);var s=Vr;return Vr=n,ny(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Vr=s,this},e.globalTime=function(n){for(var s=this,o=arguments.length?n:s.rawTime();s;)o=s._start+o/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):o},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,I2(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,I2(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(os(this,n),An(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,An(s)),this._dur||(this._zTime=-It),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-It:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-It,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,o;return!!(!n||this._ts&&this._initted&&n.isActive()&&(o=n.rawTime(!0))>=s&&o<this.endTime(!0)-It)},e.eventCallback=function(n,s,o){var l=this.vars;return arguments.length>1?(s?(l[n]=s,o&&(l[n+"Params"]=o),n==="onUpdate"&&(this._onUpdate=s)):delete l[n],this):l[n]},e.then=function(n){var s=this;return new Promise(function(o){var l=ar(n)?n:KA,u=function(){var f=s.then;s.then=null,ar(l)&&(l=l(s))&&(l.then||l===s)&&(s.then=f),o(l),s.then=f};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?u():s._prom=u})},e.kill=function(){hu(this)},t}();Zn(cd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-It,_prom:0,_ps:!1,_rts:1});var cn=function(t){LA(e,t);function e(n,s){var o;return n===void 0&&(n={}),o=t.call(this,n)||this,o.labels={},o.smoothChildTiming=!!n.smoothChildTiming,o.autoRemoveChildren=!!n.autoRemoveChildren,o._sort=An(n.sortChildren),Yt&&ci(n.parent||Yt,Ti(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),n.scrollTrigger&&JA(Ti(o),n.scrollTrigger),o}var r=e.prototype;return r.to=function(s,o,l){return Ou(0,arguments,this),this},r.from=function(s,o,l){return Ou(1,arguments,this),this},r.fromTo=function(s,o,l,u){return Ou(2,arguments,this),this},r.set=function(s,o,l){return o.duration=0,o.parent=this,Ru(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new mr(s,o,os(this,l),1),this},r.call=function(s,o,l){return ci(this,mr.delayedCall(0,s,o),l)},r.staggerTo=function(s,o,l,u,h,f,x){return l.duration=o,l.stagger=l.stagger||u,l.onComplete=f,l.onCompleteParams=x,l.parent=this,new mr(s,l,os(this,h)),this},r.staggerFrom=function(s,o,l,u,h,f,x){return l.runBackwards=1,Ru(l).immediateRender=An(l.immediateRender),this.staggerTo(s,o,l,u,h,f,x)},r.staggerFromTo=function(s,o,l,u,h,f,x,y){return u.startAt=l,Ru(u).immediateRender=An(u.immediateRender),this.staggerTo(s,o,u,h,f,x,y)},r.render=function(s,o,l){var u=this._time,h=this._dirty?this.totalDuration():this._tDur,f=this._dur,x=s<=0?0:gr(s),y=this._zTime<0!=s<0&&(this._initted||!f),v,b,A,E,I,R,C,S,O,k,F,B;if(this!==Yt&&x>h&&s>=0&&(x=h),x!==this._tTime||l||y){if(u!==this._time&&f&&(x+=this._time-u,s+=this._time-u),v=x,O=this._start,S=this._ts,R=!S,y&&(f||(u=this._zTime),(s||!o)&&(this._zTime=s)),this._repeat){if(F=this._yoyo,I=f+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(I*100+s,o,l);if(v=gr(x%I),x===h?(E=this._repeat,v=f):(k=gr(x/I),E=~~k,E&&E===k&&(v=f,E--),v>f&&(v=f)),k=vc(this._tTime,I),!u&&this._tTime&&k!==E&&this._tTime-k*I-this._dur<=0&&(k=E),F&&E&1&&(v=f-v,B=1),E!==k&&!this._lock){var P=F&&k&1,L=P===(F&&E&1);if(E<k&&(P=!P),u=P?0:x%f?f:x,this._lock=1,this.render(u||(B?0:gr(E*I)),o,!f)._lock=0,this._tTime=x,!o&&this.parent&&$n(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1),u&&u!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,h=this._tDur,L&&(this._lock=2,u=P?f:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;pN(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=zL(this,gr(u),gr(v)),C&&(x-=v-(v=C._start))),this._tTime=x,this._time=v,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,u=0),!u&&x&&!o&&!k&&($n(this,"onStart"),this._tTime!==x))return this;if(v>=u&&s>=0)for(b=this._first;b;){if(A=b._next,(b._act||v>=b._start)&&b._ts&&C!==b){if(b.parent!==this)return this.render(s,o,l);if(b.render(b._ts>0?(v-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(v-b._start)*b._ts,o,l),v!==this._time||!this._ts&&!R){C=0,A&&(x+=this._zTime=-It);break}}b=A}else{b=this._last;for(var W=s<0?s:v;b;){if(A=b._prev,(b._act||W<=b._end)&&b._ts&&C!==b){if(b.parent!==this)return this.render(s,o,l);if(b.render(b._ts>0?(W-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(W-b._start)*b._ts,o,l||Vr&&ny(b)),v!==this._time||!this._ts&&!R){C=0,A&&(x+=this._zTime=W?-It:It);break}}b=A}}if(C&&!o&&(this.pause(),C.render(v>=u?0:-It)._zTime=v>=u?1:-1,this._ts))return this._start=O,R0(this),this.render(s,o,l);this._onUpdate&&!o&&$n(this,"onUpdate",!0),(x===h&&this._tTime>=this.totalDuration()||!x&&u)&&(O===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((s||!f)&&(x===h&&this._ts>0||!x&&this._ts<0)&&Vo(this,1),!o&&!(s<0&&!u)&&(x||u||!h)&&($n(this,x===h&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<h&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(s,o){var l=this;if(Wi(o)||(o=os(this,o,s)),!(s instanceof cd)){if(Jr(s))return s.forEach(function(u){return l.add(u,o)}),this;if(Pr(s))return this.addLabel(s,o);if(ar(s))s=mr.delayedCall(0,s);else return this}return this!==s?ci(this,s,o):this},r.getChildren=function(s,o,l,u){s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=!0),u===void 0&&(u=-fs);for(var h=[],f=this._first;f;)f._start>=u&&(f instanceof mr?o&&h.push(f):(l&&h.push(f),s&&h.push.apply(h,f.getChildren(!0,o,l)))),f=f._next;return h},r.getById=function(s){for(var o=this.getChildren(1,1,1),l=o.length;l--;)if(o[l].vars.id===s)return o[l]},r.remove=function(s){return Pr(s)?this.removeLabel(s):ar(s)?this.killTweensOf(s):(s.parent===this&&I0(this,s),s===this._recent&&(this._recent=this._last),Ma(this))},r.totalTime=function(s,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=gr(zn.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),t.prototype.totalTime.call(this,s,o),this._forcing=0,this):this._tTime},r.addLabel=function(s,o){return this.labels[s]=os(this,o),this},r.removeLabel=function(s){return delete this.labels[s],this},r.addPause=function(s,o,l){var u=mr.delayedCall(0,o||od,l);return u.data="isPause",this._hasPause=1,ci(this,u,os(this,s))},r.removePause=function(s){var o=this._first;for(s=os(this,s);o;)o._start===s&&o.data==="isPause"&&Vo(o),o=o._next},r.killTweensOf=function(s,o,l){for(var u=this.getTweensOf(s,l),h=u.length;h--;)Eo!==u[h]&&u[h].kill(s,o);return this},r.getTweensOf=function(s,o){for(var l=[],u=hs(s),h=this._first,f=Wi(o),x;h;)h instanceof mr?PL(h._targets,u)&&(f?(!Eo||h._initted&&h._ts)&&h.globalTime(0)<=o&&h.globalTime(h.totalDuration())>o:!o||h.isActive())&&l.push(h):(x=h.getTweensOf(u,o)).length&&l.push.apply(l,x),h=h._next;return l},r.tweenTo=function(s,o){o=o||{};var l=this,u=os(l,s),h=o,f=h.startAt,x=h.onStart,y=h.onStartParams,v=h.immediateRender,b,A=mr.to(l,Zn({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:o.duration||Math.abs((u-(f&&"time"in f?f.time:l._time))/l.timeScale())||It,onStart:function(){if(l.pause(),!b){var I=o.duration||Math.abs((u-(f&&"time"in f?f.time:l._time))/l.timeScale());A._dur!==I&&_c(A,I,0,1).render(A._time,!0,!0),b=1}x&&x.apply(A,y||[])}},o));return v?A.render(0):A},r.tweenFromTo=function(s,o,l){return this.tweenTo(o,Zn({startAt:{time:os(this,s)}},l))},r.recent=function(){return this._recent},r.nextLabel=function(s){return s===void 0&&(s=this._time),R2(this,os(this,s))},r.previousLabel=function(s){return s===void 0&&(s=this._time),R2(this,os(this,s),1)},r.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+It)},r.shiftChildren=function(s,o,l){l===void 0&&(l=0);for(var u=this._first,h=this.labels,f;u;)u._start>=l&&(u._start+=s,u._end+=s),u=u._next;if(o)for(f in h)h[f]>=l&&(h[f]+=s);return Ma(this)},r.invalidate=function(s){var o=this._first;for(this._lock=0;o;)o.invalidate(s),o=o._next;return t.prototype.invalidate.call(this,s)},r.clear=function(s){s===void 0&&(s=!0);for(var o=this._first,l;o;)l=o._next,this.remove(o),o=l;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Ma(this)},r.totalDuration=function(s){var o=0,l=this,u=l._last,h=fs,f,x,y;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-s:s));if(l._dirty){for(y=l.parent;u;)f=u._prev,u._dirty&&u.totalDuration(),x=u._start,x>h&&l._sort&&u._ts&&!l._lock?(l._lock=1,ci(l,u,x-u._delay,1)._lock=0):h=x,x<0&&u._ts&&(o-=x,(!y&&!l._dp||y&&y.smoothChildTiming)&&(l._start+=x/l._ts,l._time-=x,l._tTime-=x),l.shiftChildren(-x,!1,-1/0),h=0),u._end>o&&u._ts&&(o=u._end),u=f;_c(l,l===Yt&&l._time>o?l._time:o,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(s){if(Yt._ts&&(XA(Yt,Lh(s,Yt)),GA=zn.frame),zn.frame>=A2){A2+=qn.autoSleep||120;var o=Yt._first;if((!o||!o._ts)&&qn.autoSleep&&zn._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||zn.sleep()}}},e}(cd);Zn(cn.prototype,{_lock:0,_hasPause:0,_forcing:0});var n7=function(e,r,n,s,o,l,u){var h=new Tn(this._pt,e,r,0,1,bN,null,o),f=0,x=0,y,v,b,A,E,I,R,C;for(h.b=n,h.e=s,n+="",s+="",(R=~s.indexOf("random("))&&(s=ad(s)),l&&(C=[n,s],l(C,e,r),n=C[0],s=C[1]),v=n.match(tp)||[];y=tp.exec(s);)A=y[0],E=s.substring(f,y.index),b?b=(b+1)%5:E.substr(-5)==="rgba("&&(b=1),A!==v[x++]&&(I=parseFloat(v[x-1])||0,h._pt={_next:h._pt,p:E||x===1?E:",",s:I,c:A.charAt(1)==="="?ql(I,A)-I:parseFloat(A)-I,m:b&&b<4?Math.round:0},f=tp.lastIndex);return h.c=f<s.length?s.substring(f,s.length):"",h.fp=u,(zA.test(s)||R)&&(h.e=0),this._pt=h,h},sy=function(e,r,n,s,o,l,u,h,f,x){ar(s)&&(s=s(o||0,e,l));var y=e[r],v=n!=="get"?n:ar(y)?f?e[r.indexOf("set")||!ar(e["get"+r.substr(3)])?r:"get"+r.substr(3)](f):e[r]():y,b=ar(y)?f?l7:vN:oy,A;if(Pr(s)&&(~s.indexOf("random(")&&(s=ad(s)),s.charAt(1)==="="&&(A=ql(v,s)+(Zr(v)||0),(A||A===0)&&(s=A))),!x||v!==s||Ym)return!isNaN(v*s)&&s!==""?(A=new Tn(this._pt,e,r,+v||0,s-(v||0),typeof y=="boolean"?u7:_N,0,b),f&&(A.fp=f),u&&A.modifier(u,this,e),this._pt=A):(!y&&!(r in e)&&Jx(r,s),n7.call(this,e,r,v,s,b,h||qn.stringFilter,f))},s7=function(e,r,n,s,o){if(ar(e)&&(e=Mu(e,o,r,n,s)),!yi(e)||e.style&&e.nodeType||Jr(e)||FA(e))return Pr(e)?Mu(e,o,r,n,s):e;var l={},u;for(u in e)l[u]=Mu(e[u],o,r,n,s);return l},xN=function(e,r,n,s,o,l){var u,h,f,x;if(Ln[e]&&(u=new Ln[e]).init(o,u.rawVars?r[e]:s7(r[e],s,o,l,n),n,s,l)!==!1&&(n._pt=h=new Tn(n._pt,o,e,0,1,u.render,u,0,u.priority),n!==Ll))for(f=n._ptLookup[n._targets.indexOf(o)],x=u._props.length;x--;)f[u._props[x]]=h;return u},Eo,Ym,iy=function t(e,r,n){var s=e.vars,o=s.ease,l=s.startAt,u=s.immediateRender,h=s.lazy,f=s.onUpdate,x=s.runBackwards,y=s.yoyoEase,v=s.keyframes,b=s.autoRevert,A=e._dur,E=e._startAt,I=e._targets,R=e.parent,C=R&&R.data==="nested"?R.vars.targets:I,S=e._overwrite==="auto"&&!qx,O=e.timeline,k,F,B,P,L,W,q,K,ie,G,$,re,Z;if(O&&(!v||!o)&&(o="none"),e._ease=ka(o,yc.ease),e._yEase=y?hN(ka(y===!0?o:y,yc.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!O&&!!s.runBackwards,!O||v&&!s.stagger){if(K=I[0]?Oa(I[0]).harness:0,re=K&&s[K.prop],k=Dh(s,ey),E&&(E._zTime<0&&E.progress(1),r<0&&x&&u&&!b?E.render(-1,!0):E.revert(x&&A?$f:ML),E._lazy=0),l){if(Vo(e._startAt=mr.set(I,Zn({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!E&&An(h),startAt:null,delay:0,onUpdate:f&&function(){return $n(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Vr||!u&&!b)&&e._startAt.revert($f),u&&A&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(x&&A&&!E){if(r&&(u=!1),B=Zn({overwrite:!1,data:"isFromStart",lazy:u&&!E&&An(h),immediateRender:u,stagger:0,parent:R},k),re&&(B[K.prop]=re),Vo(e._startAt=mr.set(I,B)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Vr?e._startAt.revert($f):e._startAt.render(-1,!0)),e._zTime=r,!u)t(e._startAt,It,It);else if(!r)return}for(e._pt=e._ptCache=0,h=A&&An(h)||h&&!A,F=0;F<I.length;F++){if(L=I[F],q=L._gsap||ry(I)[F]._gsap,e._ptLookup[F]=G={},zm[q.id]&&jo.length&&jh(),$=C===I?F:C.indexOf(L),K&&(ie=new K).init(L,re||k,e,$,C)!==!1&&(e._pt=P=new Tn(e._pt,L,ie.name,0,1,ie.render,ie,0,ie.priority),ie._props.forEach(function(Q){G[Q]=P}),ie.priority&&(W=1)),!K||re)for(B in k)Ln[B]&&(ie=xN(B,k,e,$,L,C))?ie.priority&&(W=1):G[B]=P=sy.call(e,L,B,"get",k[B],$,C,0,s.stringFilter);e._op&&e._op[F]&&e.kill(L,e._op[F]),S&&e._pt&&(Eo=e,Yt.killTweensOf(L,G,e.globalTime(r)),Z=!e.parent,Eo=0),e._pt&&h&&(zm[q.id]=1)}W&&EN(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!Z,v&&r<=0&&O.render(fs,!0,!0)},i7=function(e,r,n,s,o,l,u,h){var f=(e._pt&&e._ptCache||(e._ptCache={}))[r],x,y,v,b;if(!f)for(f=e._ptCache[r]=[],v=e._ptLookup,b=e._targets.length;b--;){if(x=v[b][r],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==r&&x.fp!==r;)x=x._next;if(!x)return Ym=1,e.vars[r]="+=0",iy(e,u),Ym=0,h?id(r+" not eligible for reset"):1;f.push(x)}for(b=f.length;b--;)y=f[b],x=y._pt||y,x.s=(s||s===0)&&!o?s:x.s+(s||0)+l*x.c,x.c=n-x.s,y.e&&(y.e=ur(n)+Zr(y.e)),y.b&&(y.b=x.s+Zr(y.b))},o7=function(e,r){var n=e[0]?Oa(e[0]).harness:0,s=n&&n.aliases,o,l,u,h;if(!s)return r;o=wc({},r);for(l in s)if(l in o)for(h=s[l].split(","),u=h.length;u--;)o[h[u]]=o[l];return o},a7=function(e,r,n,s){var o=r.ease||s||"power1.inOut",l,u;if(Jr(r))u=n[e]||(n[e]=[]),r.forEach(function(h,f){return u.push({t:f/(r.length-1)*100,v:h,e:o})});else for(l in r)u=n[l]||(n[l]=[]),l==="ease"||u.push({t:parseFloat(e),v:r[l],e:o})},Mu=function(e,r,n,s,o){return ar(e)?e.call(r,n,s,o):Pr(e)&&~e.indexOf("random(")?ad(e):e},yN=ty+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",wN={};Nn(yN+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return wN[t]=1});var mr=function(t){LA(e,t);function e(n,s,o,l){var u;typeof s=="number"&&(o.duration=s,s=o,o=null),u=t.call(this,l?s:Ru(s))||this;var h=u.vars,f=h.duration,x=h.delay,y=h.immediateRender,v=h.stagger,b=h.overwrite,A=h.keyframes,E=h.defaults,I=h.scrollTrigger,R=h.yoyoEase,C=s.parent||Yt,S=(Jr(n)||FA(n)?Wi(n[0]):"length"in s)?[n]:hs(n),O,k,F,B,P,L,W,q;if(u._targets=S.length?ry(S):id("GSAP target "+n+" not found. https://gsap.com",!qn.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=b,A||v||Cf(f)||Cf(x)){if(s=u.vars,O=u.timeline=new cn({data:"nested",defaults:E||{},targets:C&&C.data==="nested"?C.vars.targets:S}),O.kill(),O.parent=O._dp=Ti(u),O._start=0,v||Cf(f)||Cf(x)){if(B=S.length,W=v&&nN(v),yi(v))for(P in v)~yN.indexOf(P)&&(q||(q={}),q[P]=v[P]);for(k=0;k<B;k++)F=Dh(s,wN),F.stagger=0,R&&(F.yoyoEase=R),q&&wc(F,q),L=S[k],F.duration=+Mu(f,Ti(u),k,L,S),F.delay=(+Mu(x,Ti(u),k,L,S)||0)-u._delay,!v&&B===1&&F.delay&&(u._delay=x=F.delay,u._start+=x,F.delay=0),O.to(L,F,W?W(k,L,S):0),O._ease=dt.none;O.duration()?f=x=0:u.timeline=0}else if(A){Ru(Zn(O.vars.defaults,{ease:"none"})),O._ease=ka(A.ease||s.ease||"none");var K=0,ie,G,$;if(Jr(A))A.forEach(function(re){return O.to(S,re,">")}),O.duration();else{F={};for(P in A)P==="ease"||P==="easeEach"||a7(P,A[P],F,A.easeEach);for(P in F)for(ie=F[P].sort(function(re,Z){return re.t-Z.t}),K=0,k=0;k<ie.length;k++)G=ie[k],$={ease:G.e,duration:(G.t-(k?ie[k-1].t:0))/100*f},$[P]=G.v,O.to(S,$,K),K+=$.duration;O.duration()<f&&O.to({},{duration:f-O.duration()})}}f||u.duration(f=O.duration())}else u.timeline=0;return b===!0&&!qx&&(Eo=Ti(u),Yt.killTweensOf(S),Eo=0),ci(C,Ti(u),o),s.reversed&&u.reverse(),s.paused&&u.paused(!0),(y||!f&&!A&&u._start===gr(C._time)&&An(y)&&BL(Ti(u))&&C.data!=="nested")&&(u._tTime=-It,u.render(Math.max(0,-x)||0)),I&&JA(Ti(u),I),u}var r=e.prototype;return r.render=function(s,o,l){var u=this._time,h=this._tDur,f=this._dur,x=s<0,y=s>h-It&&!x?h:s<It?0:s,v,b,A,E,I,R,C,S,O;if(!f)UL(this,s,o,l);else if(y!==this._tTime||!s||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(v=y,S=this.timeline,this._repeat){if(E=f+this._rDelay,this._repeat<-1&&x)return this.totalTime(E*100+s,o,l);if(v=gr(y%E),y===h?(A=this._repeat,v=f):(I=gr(y/E),A=~~I,A&&A===I?(v=f,A--):v>f&&(v=f)),R=this._yoyo&&A&1,R&&(O=this._yEase,v=f-v),I=vc(this._tTime,E),v===u&&!l&&this._initted&&A===I)return this._tTime=y,this;A!==I&&(S&&this._yEase&&pN(S,R),this.vars.repeatRefresh&&!R&&!this._lock&&v!==E&&this._initted&&(this._lock=l=1,this.render(gr(E*A),!0).invalidate()._lock=0))}if(!this._initted){if(eN(this,x?s:v,l,o,y))return this._tTime=0,this;if(u!==this._time&&!(l&&this.vars.repeatRefresh&&A!==I))return this;if(f!==this._dur)return this.render(s,o,l)}if(this._tTime=y,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(O||this._ease)(v/f),this._from&&(this.ratio=C=1-C),!u&&y&&!o&&!I&&($n(this,"onStart"),this._tTime!==y))return this;for(b=this._pt;b;)b.r(C,b.d),b=b._next;S&&S.render(s<0?s:S._dur*S._ease(v/this._dur),o,l)||this._startAt&&(this._zTime=s),this._onUpdate&&!o&&(x&&Vm(this,s,o,l),$n(this,"onUpdate")),this._repeat&&A!==I&&this.vars.onRepeat&&!o&&this.parent&&$n(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(x&&!this._onUpdate&&Vm(this,s,!0,!0),(s||!f)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&Vo(this,1),!o&&!(x&&!u)&&(y||u||R)&&($n(this,y===h?"onComplete":"onReverseComplete",!0),this._prom&&!(y<h&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),t.prototype.invalidate.call(this,s)},r.resetTo=function(s,o,l,u,h){ld||zn.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||iy(this,f),x=this._ease(f/this._dur),i7(this,s,o,l,u,x,f,h)?this.resetTo(s,o,l,u,1):(O0(this,0),this.parent||QA(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(s,o){if(o===void 0&&(o="all"),!s&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?hu(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Vr),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(s,o,Eo&&Eo.vars.overwrite!==!0)._first||hu(this),this.parent&&l!==this.timeline.totalDuration()&&_c(this,this._dur*this.timeline._tDur/l,0,1),this}var u=this._targets,h=s?hs(s):u,f=this._ptLookup,x=this._pt,y,v,b,A,E,I,R;if((!o||o==="all")&&DL(u,h))return o==="all"&&(this._pt=0),hu(this);for(y=this._op=this._op||[],o!=="all"&&(Pr(o)&&(E={},Nn(o,function(C){return E[C]=1}),o=E),o=o7(u,o)),R=u.length;R--;)if(~h.indexOf(u[R])){v=f[R],o==="all"?(y[R]=o,A=v,b={}):(b=y[R]=y[R]||{},A=o);for(E in A)I=v&&v[E],I&&((!("kill"in I.d)||I.d.kill(E)===!0)&&I0(this,I,"_pt"),delete v[E]),b!=="all"&&(b[E]=1)}return this._initted&&!this._pt&&x&&hu(this),this},e.to=function(s,o){return new e(s,o,arguments[2])},e.from=function(s,o){return Ou(1,arguments)},e.delayedCall=function(s,o,l,u){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:o,onReverseComplete:o,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:u})},e.fromTo=function(s,o,l){return Ou(2,arguments)},e.set=function(s,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(s,o)},e.killTweensOf=function(s,o,l){return Yt.killTweensOf(s,o,l)},e}(cd);Zn(mr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Nn("staggerTo,staggerFrom,staggerFromTo",function(t){mr[t]=function(){var e=new cn,r=$m.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var oy=function(e,r,n){return e[r]=n},vN=function(e,r,n){return e[r](n)},l7=function(e,r,n,s){return e[r](s.fp,n)},c7=function(e,r,n){return e.setAttribute(r,n)},ay=function(e,r){return ar(e[r])?vN:Kx(e[r])&&e.setAttribute?c7:oy},_N=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},u7=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},bN=function(e,r){var n=r._pt,s="";if(!e&&r.b)s=r.b;else if(e===1&&r.e)s=r.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=r.c}r.set(r.t,r.p,s,r)},ly=function(e,r){for(var n=r._pt;n;)n.r(e,n.d),n=n._next},d7=function(e,r,n,s){for(var o=this._pt,l;o;)l=o._next,o.p===s&&o.modifier(e,r,n),o=l},f7=function(e){for(var r=this._pt,n,s;r;)s=r._next,r.p===e&&!r.op||r.op===e?I0(this,r,"_pt"):r.dep||(n=1),r=s;return!n},h7=function(e,r,n,s){s.mSet(e,r,s.m.call(s.tween,n,s.mt),s)},EN=function(e){for(var r=e._pt,n,s,o,l;r;){for(n=r._next,s=o;s&&s.pr>r.pr;)s=s._next;(r._prev=s?s._prev:l)?r._prev._next=r:o=r,(r._next=s)?s._prev=r:l=r,r=n}e._pt=o},Tn=function(){function t(r,n,s,o,l,u,h,f,x){this.t=n,this.s=o,this.c=l,this.p=s,this.r=u||_N,this.d=h||this,this.set=f||oy,this.pr=x||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(n,s,o){this.mSet=this.mSet||this.set,this.set=h7,this.m=n,this.mt=o,this.tween=s},t}();Nn(ty+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return ey[t]=1});Qn.TweenMax=Qn.TweenLite=mr;Qn.TimelineLite=Qn.TimelineMax=cn;Yt=new cn({sortChildren:!1,defaults:yc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});qn.stringFilter=fN;var Pa=[],Gf={},p7=[],M2=0,m7=0,op=function(e){return(Gf[e]||p7).map(function(r){return r()})},Xm=function(){var e=Date.now(),r=[];e-M2>2&&(op("matchMediaInit"),Pa.forEach(function(n){var s=n.queries,o=n.conditions,l,u,h,f;for(u in s)l=si.matchMedia(s[u]).matches,l&&(h=1),l!==o[u]&&(o[u]=l,f=1);f&&(n.revert(),h&&r.push(n))}),op("matchMediaRevert"),r.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),M2=e,op("matchMedia"))},CN=function(){function t(r,n){this.selector=n&&Wm(n),this.data=[],this._r=[],this.isReverted=!1,this.id=m7++,r&&this.add(r)}var e=t.prototype;return e.add=function(n,s,o){ar(n)&&(o=s,s=n,n=ar);var l=this,u=function(){var f=Ht,x=l.selector,y;return f&&f!==l&&f.data.push(l),o&&(l.selector=Wm(o)),Ht=l,y=s.apply(l,arguments),ar(y)&&l._r.push(y),Ht=f,l.selector=x,l.isReverted=!1,y};return l.last=u,n===ar?u(l,function(h){return l.add(null,h)}):n?l[n]=u:u},e.ignore=function(n){var s=Ht;Ht=null,n(this),Ht=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof t?n.push.apply(n,s.getTweens()):s instanceof mr&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var o=this;if(n?function(){for(var u=o.getTweens(),h=o.data.length,f;h--;)f=o.data[h],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(x){return u.splice(u.indexOf(x),1)}));for(u.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,y){return y.g-x.g||-1/0}).forEach(function(x){return x.t.revert(n)}),h=o.data.length;h--;)f=o.data[h],f instanceof cn?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof mr)&&f.revert&&f.revert(n);o._r.forEach(function(x){return x(n,o)}),o.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),s)for(var l=Pa.length;l--;)Pa[l].id===this.id&&Pa.splice(l,1)},e.revert=function(n){this.kill(n||{})},t}(),g7=function(){function t(r){this.contexts=[],this.scope=r,Ht&&Ht.data.push(this)}var e=t.prototype;return e.add=function(n,s,o){yi(n)||(n={matches:n});var l=new CN(0,o||this.scope),u=l.conditions={},h,f,x;Ht&&!l.selector&&(l.selector=Ht.selector),this.contexts.push(l),s=l.add("onMatch",s),l.queries=n;for(f in n)f==="all"?x=1:(h=si.matchMedia(n[f]),h&&(Pa.indexOf(l)<0&&Pa.push(l),(u[f]=h.matches)&&(x=1),h.addListener?h.addListener(Xm):h.addEventListener("change",Xm)));return x&&s(l,function(y){return l.add(null,y)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},t}(),Bh={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(s){return cN(s)})},timeline:function(e){return new cn(e)},getTweensOf:function(e,r){return Yt.getTweensOf(e,r)},getProperty:function(e,r,n,s){Pr(e)&&(e=hs(e)[0]);var o=Oa(e||{}).get,l=n?KA:qA;return n==="native"&&(n=""),e&&(r?l((Ln[r]&&Ln[r].get||o)(e,r,n,s)):function(u,h,f){return l((Ln[u]&&Ln[u].get||o)(e,u,h,f))})},quickSetter:function(e,r,n){if(e=hs(e),e.length>1){var s=e.map(function(x){return Rn.quickSetter(x,r,n)}),o=s.length;return function(x){for(var y=o;y--;)s[y](x)}}e=e[0]||{};var l=Ln[r],u=Oa(e),h=u.harness&&(u.harness.aliases||{})[r]||r,f=l?function(x){var y=new l;Ll._pt=0,y.init(e,n?x+n:x,Ll,0,[e]),y.render(1,y),Ll._pt&&ly(1,Ll)}:u.set(e,h);return l?f:function(x){return f(e,h,n?x+n:x,u,1)}},quickTo:function(e,r,n){var s,o=Rn.to(e,Zn((s={},s[r]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),l=function(h,f,x){return o.resetTo(r,h,f,x)};return l.tween=o,l},isTweening:function(e){return Yt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ka(e.ease,yc.ease)),N2(yc,e||{})},config:function(e){return N2(qn,e||{})},registerEffect:function(e){var r=e.name,n=e.effect,s=e.plugins,o=e.defaults,l=e.extendTimeline;(s||"").split(",").forEach(function(u){return u&&!Ln[u]&&!Qn[u]&&id(r+" effect requires "+u+" plugin.")}),rp[r]=function(u,h,f){return n(hs(u),Zn(h||{},o),f)},l&&(cn.prototype[r]=function(u,h,f){return this.add(rp[r](u,yi(h)?h:(f=h)&&{},this),f)})},registerEase:function(e,r){dt[e]=ka(r)},parseEase:function(e,r){return arguments.length?ka(e,r):dt},getById:function(e){return Yt.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var n=new cn(e),s,o;for(n.smoothChildTiming=An(e.smoothChildTiming),Yt.remove(n),n._dp=0,n._time=n._tTime=Yt._time,s=Yt._first;s;)o=s._next,(r||!(!s._dur&&s instanceof mr&&s.vars.onComplete===s._targets[0]))&&ci(n,s,s._start-s._delay),s=o;return ci(Yt,n,0),n},context:function(e,r){return e?new CN(e,r):Ht},matchMedia:function(e){return new g7(e)},matchMediaRefresh:function(){return Pa.forEach(function(e){var r=e.conditions,n,s;for(s in r)r[s]&&(r[s]=!1,n=1);n&&e.revert()})||Xm()},addEventListener:function(e,r){var n=Gf[e]||(Gf[e]=[]);~n.indexOf(r)||n.push(r)},removeEventListener:function(e,r){var n=Gf[e],s=n&&n.indexOf(r);s>=0&&n.splice(s,1)},utils:{wrap:XL,wrapYoyo:qL,distribute:nN,random:iN,snap:sN,normalize:YL,getUnit:Zr,clamp:HL,splitColor:uN,toArray:hs,selector:Wm,mapRange:aN,pipe:WL,unitize:GL,interpolate:KL,shuffle:rN},install:$A,effects:rp,ticker:zn,updateRoot:cn.updateRoot,plugins:Ln,globalTimeline:Yt,core:{PropTween:Tn,globals:WA,Tween:mr,Timeline:cn,Animation:cd,getCache:Oa,_removeLinkedListItem:I0,reverting:function(){return Vr},context:function(e){return e&&Ht&&(Ht.data.push(e),e._ctx=Ht),Ht},suppressOverwrites:function(e){return qx=e}}};Nn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Bh[t]=mr[t]});zn.add(cn.updateRoot);Ll=Bh.to({},{duration:0});var x7=function(e,r){for(var n=e._pt;n&&n.p!==r&&n.op!==r&&n.fp!==r;)n=n._next;return n},y7=function(e,r){var n=e._targets,s,o,l;for(s in r)for(o=n.length;o--;)l=e._ptLookup[o][s],l&&(l=l.d)&&(l._pt&&(l=x7(l,s)),l&&l.modifier&&l.modifier(r[s],e,n[o],s))},ap=function(e,r){return{name:e,headless:1,rawVars:1,init:function(s,o,l){l._onInit=function(u){var h,f;if(Pr(o)&&(h={},Nn(o,function(x){return h[x]=1}),o=h),r){h={};for(f in o)h[f]=r(o[f]);o=h}y7(u,o)}}}},Rn=Bh.registerPlugin({name:"attr",init:function(e,r,n,s,o){var l,u,h;this.tween=n;for(l in r)h=e.getAttribute(l)||"",u=this.add(e,"setAttribute",(h||0)+"",r[l],s,o,0,0,l),u.op=l,u.b=h,this._props.push(l)},render:function(e,r){for(var n=r._pt;n;)Vr?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,r){for(var n=r.length;n--;)this.add(e,n,e[n]||0,r[n],0,0,0,0,0,1)}},ap("roundProps",Gm),ap("modifiers"),ap("snap",sN))||Bh;mr.version=cn.version=Rn.version="3.13.0";HA=1;Qx()&&bc();dt.Power0;dt.Power1;dt.Power2;dt.Power3;dt.Power4;dt.Linear;dt.Quad;dt.Cubic;dt.Quart;dt.Quint;dt.Strong;dt.Elastic;dt.Back;dt.SteppedEase;dt.Bounce;dt.Sine;dt.Expo;dt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var k2,Co,Kl,cy,_a,P2,uy,w7=function(){return typeof window<"u"},Gi={},pa=180/Math.PI,Ql=Math.PI/180,yl=Math.atan2,j2=1e8,dy=/([A-Z])/g,v7=/(left|right|width|margin|padding|x)/i,_7=/[\s,\(]\S/,di={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},qm=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},b7=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},E7=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},C7=function(e,r){var n=r.s+r.c*e;r.set(r.t,r.p,~~(n+(n<0?-.5:.5))+r.u,r)},SN=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},AN=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},S7=function(e,r,n){return e.style[r]=n},A7=function(e,r,n){return e.style.setProperty(r,n)},N7=function(e,r,n){return e._gsap[r]=n},T7=function(e,r,n){return e._gsap.scaleX=e._gsap.scaleY=n},I7=function(e,r,n,s,o){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(o,l)},R7=function(e,r,n,s,o){var l=e._gsap;l[r]=n,l.renderTransform(o,l)},qt="transform",In=qt+"Origin",O7=function t(e,r){var n=this,s=this.target,o=s.style,l=s._gsap;if(e in Gi&&o){if(this.tfm=this.tfm||{},e!=="transform")e=di[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return n.tfm[u]=Oi(s,u)}):this.tfm[e]=l.x?l[e]:Oi(s,e),e===In&&(this.tfm.zOrigin=l.zOrigin);else return di.transform.split(",").forEach(function(u){return t.call(n,u,r)});if(this.props.indexOf(qt)>=0)return;l.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(In,r,"")),e=qt}(o||r)&&this.props.push(e,r,o[e])},NN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},M7=function(){var e=this.props,r=this.target,n=r.style,s=r._gsap,o,l;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?r[e[o]](e[o+2]):r[e[o]]=e[o+2]:e[o+2]?n[e[o]]=e[o+2]:n.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(dy,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)s[l]=this.tfm[l];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),o=uy(),(!o||!o.isStart)&&!n[qt]&&(NN(n),s.zOrigin&&n[In]&&(n[In]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},TN=function(e,r){var n={target:e,props:[],revert:M7,save:O7};return e._gsap||Rn.core.getCache(e),r&&e.style&&e.nodeType&&r.split(",").forEach(function(s){return n.save(s)}),n},IN,Km=function(e,r){var n=Co.createElementNS?Co.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Co.createElement(e);return n&&n.style?n:Co.createElement(e)},ps=function t(e,r,n){var s=getComputedStyle(e);return s[r]||s.getPropertyValue(r.replace(dy,"-$1").toLowerCase())||s.getPropertyValue(r)||!n&&t(e,Ec(r)||r,1)||""},D2="O,Moz,ms,Ms,Webkit".split(","),Ec=function(e,r,n){var s=r||_a,o=s.style,l=5;if(e in o&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(D2[l]+e in o););return l<0?null:(l===3?"ms":l>=0?D2[l]:"")+e},Qm=function(){w7()&&window.document&&(k2=window,Co=k2.document,Kl=Co.documentElement,_a=Km("div")||{style:{}},Km("div"),qt=Ec(qt),In=qt+"Origin",_a.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",IN=!!Ec("perspective"),uy=Rn.core.reverting,cy=1)},L2=function(e){var r=e.ownerSVGElement,n=Km("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),o;s.style.display="block",n.appendChild(s),Kl.appendChild(n);try{o=s.getBBox()}catch{}return n.removeChild(s),Kl.removeChild(n),o},B2=function(e,r){for(var n=r.length;n--;)if(e.hasAttribute(r[n]))return e.getAttribute(r[n])},RN=function(e){var r,n;try{r=e.getBBox()}catch{r=L2(e),n=1}return r&&(r.width||r.height)||n||(r=L2(e)),r&&!r.width&&!r.x&&!r.y?{x:+B2(e,["x","cx","x1"])||0,y:+B2(e,["y","cy","y1"])||0,width:0,height:0}:r},ON=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&RN(e))},Va=function(e,r){if(r){var n=e.style,s;r in Gi&&r!==In&&(r=qt),n.removeProperty?(s=r.substr(0,2),(s==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),n.removeProperty(s==="--"?r:r.replace(dy,"-$1").toLowerCase())):n.removeAttribute(r)}},So=function(e,r,n,s,o,l){var u=new Tn(e._pt,r,n,0,1,l?AN:SN);return e._pt=u,u.b=s,u.e=o,e._props.push(n),u},F2={deg:1,rad:1,turn:1},k7={grid:1,flex:1},Ho=function t(e,r,n,s){var o=parseFloat(n)||0,l=(n+"").trim().substr((o+"").length)||"px",u=_a.style,h=v7.test(r),f=e.tagName.toLowerCase()==="svg",x=(f?"client":"offset")+(h?"Width":"Height"),y=100,v=s==="px",b=s==="%",A,E,I,R;if(s===l||!o||F2[s]||F2[l])return o;if(l!=="px"&&!v&&(o=t(e,r,n,"px")),R=e.getCTM&&ON(e),(b||l==="%")&&(Gi[r]||~r.indexOf("adius")))return A=R?e.getBBox()[h?"width":"height"]:e[x],ur(b?o/A*y:o/100*A);if(u[h?"width":"height"]=y+(v?l:s),E=s!=="rem"&&~r.indexOf("adius")||s==="em"&&e.appendChild&&!f?e:e.parentNode,R&&(E=(e.ownerSVGElement||{}).parentNode),(!E||E===Co||!E.appendChild)&&(E=Co.body),I=E._gsap,I&&b&&I.width&&h&&I.time===zn.time&&!I.uncache)return ur(o/I.width*y);if(b&&(r==="height"||r==="width")){var C=e.style[r];e.style[r]=y+s,A=e[x],C?e.style[r]=C:Va(e,r)}else(b||l==="%")&&!k7[ps(E,"display")]&&(u.position=ps(e,"position")),E===e&&(u.position="static"),E.appendChild(_a),A=_a[x],E.removeChild(_a),u.position="absolute";return h&&b&&(I=Oa(E),I.time=zn.time,I.width=E[x]),ur(v?A*o/y:A&&o?y/A*o:0)},Oi=function(e,r,n,s){var o;return cy||Qm(),r in di&&r!=="transform"&&(r=di[r],~r.indexOf(",")&&(r=r.split(",")[0])),Gi[r]&&r!=="transform"?(o=dd(e,s),o=r!=="transformOrigin"?o[r]:o.svg?o.origin:Uh(ps(e,In))+" "+o.zOrigin+"px"):(o=e.style[r],(!o||o==="auto"||s||~(o+"").indexOf("calc("))&&(o=Fh[r]&&Fh[r](e,r,n)||ps(e,r)||YA(e,r)||(r==="opacity"?1:0))),n&&!~(o+"").trim().indexOf(" ")?Ho(e,r,o,n)+n:o},P7=function(e,r,n,s){if(!n||n==="none"){var o=Ec(r,e,1),l=o&&ps(e,o,1);l&&l!==n?(r=o,n=l):r==="borderColor"&&(n=ps(e,"borderTopColor"))}var u=new Tn(this._pt,e.style,r,0,1,bN),h=0,f=0,x,y,v,b,A,E,I,R,C,S,O,k;if(u.b=n,u.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=ps(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(E=e.style[r],e.style[r]=s,s=ps(e,r)||s,E?e.style[r]=E:Va(e,r)),x=[n,s],fN(x),n=x[0],s=x[1],v=n.match(Dl)||[],k=s.match(Dl)||[],k.length){for(;y=Dl.exec(s);)I=y[0],C=s.substring(h,y.index),A?A=(A+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(A=1),I!==(E=v[f++]||"")&&(b=parseFloat(E)||0,O=E.substr((b+"").length),I.charAt(1)==="="&&(I=ql(b,I)+O),R=parseFloat(I),S=I.substr((R+"").length),h=Dl.lastIndex-S.length,S||(S=S||qn.units[r]||O,h===s.length&&(s+=S,u.e+=S)),O!==S&&(b=Ho(e,r,E,S)||0),u._pt={_next:u._pt,p:C||f===1?C:",",s:b,c:R-b,m:A&&A<4||r==="zIndex"?Math.round:0});u.c=h<s.length?s.substring(h,s.length):""}else u.r=r==="display"&&s==="none"?AN:SN;return zA.test(s)&&(u.e=0),this._pt=u,u},U2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},j7=function(e){var r=e.split(" "),n=r[0],s=r[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),r[0]=U2[n]||n,r[1]=U2[s]||s,r.join(" ")},D7=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var n=r.t,s=n.style,o=r.u,l=n._gsap,u,h,f;if(o==="all"||o===!0)s.cssText="",h=1;else for(o=o.split(","),f=o.length;--f>-1;)u=o[f],Gi[u]&&(h=1,u=u==="transformOrigin"?In:qt),Va(n,u);h&&(Va(n,qt),l&&(l.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",dd(n,1),l.uncache=1,NN(s)))}},Fh={clearProps:function(e,r,n,s,o){if(o.data!=="isFromStart"){var l=e._pt=new Tn(e._pt,r,n,0,0,D7);return l.u=s,l.pr=-10,l.tween=o,e._props.push(n),1}}},ud=[1,0,0,1,0,0],MN={},kN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},z2=function(e){var r=ps(e,qt);return kN(r)?ud:r.substr(7).match(UA).map(ur)},fy=function(e,r){var n=e._gsap||Oa(e),s=e.style,o=z2(e),l,u,h,f;return n.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,o=[h.a,h.b,h.c,h.d,h.e,h.f],o.join(",")==="1,0,0,1,0,0"?ud:o):(o===ud&&!e.offsetParent&&e!==Kl&&!n.svg&&(h=s.display,s.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,u=e.nextElementSibling,Kl.appendChild(e)),o=z2(e),h?s.display=h:Va(e,"display"),f&&(u?l.insertBefore(e,u):l?l.appendChild(e):Kl.removeChild(e))),r&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},Zm=function(e,r,n,s,o,l){var u=e._gsap,h=o||fy(e,!0),f=u.xOrigin||0,x=u.yOrigin||0,y=u.xOffset||0,v=u.yOffset||0,b=h[0],A=h[1],E=h[2],I=h[3],R=h[4],C=h[5],S=r.split(" "),O=parseFloat(S[0])||0,k=parseFloat(S[1])||0,F,B,P,L;n?h!==ud&&(B=b*I-A*E)&&(P=O*(I/B)+k*(-E/B)+(E*C-I*R)/B,L=O*(-A/B)+k*(b/B)-(b*C-A*R)/B,O=P,k=L):(F=RN(e),O=F.x+(~S[0].indexOf("%")?O/100*F.width:O),k=F.y+(~(S[1]||S[0]).indexOf("%")?k/100*F.height:k)),s||s!==!1&&u.smooth?(R=O-f,C=k-x,u.xOffset=y+(R*b+C*E)-R,u.yOffset=v+(R*A+C*I)-C):u.xOffset=u.yOffset=0,u.xOrigin=O,u.yOrigin=k,u.smooth=!!s,u.origin=r,u.originIsAbsolute=!!n,e.style[In]="0px 0px",l&&(So(l,u,"xOrigin",f,O),So(l,u,"yOrigin",x,k),So(l,u,"xOffset",y,u.xOffset),So(l,u,"yOffset",v,u.yOffset)),e.setAttribute("data-svg-origin",O+" "+k)},dd=function(e,r){var n=e._gsap||new gN(e);if("x"in n&&!r&&!n.uncache)return n;var s=e.style,o=n.scaleX<0,l="px",u="deg",h=getComputedStyle(e),f=ps(e,In)||"0",x,y,v,b,A,E,I,R,C,S,O,k,F,B,P,L,W,q,K,ie,G,$,re,Z,Q,H,te,ce,ae,oe,ue,ke;return x=y=v=E=I=R=C=S=O=0,b=A=1,n.svg=!!(e.getCTM&&ON(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(s[qt]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[qt]!=="none"?h[qt]:"")),s.scale=s.rotate=s.translate="none"),B=fy(e,n.svg),n.svg&&(n.uncache?(Q=e.getBBox(),f=n.xOrigin-Q.x+"px "+(n.yOrigin-Q.y)+"px",Z=""):Z=!r&&e.getAttribute("data-svg-origin"),Zm(e,Z||f,!!Z||n.originIsAbsolute,n.smooth!==!1,B)),k=n.xOrigin||0,F=n.yOrigin||0,B!==ud&&(q=B[0],K=B[1],ie=B[2],G=B[3],x=$=B[4],y=re=B[5],B.length===6?(b=Math.sqrt(q*q+K*K),A=Math.sqrt(G*G+ie*ie),E=q||K?yl(K,q)*pa:0,C=ie||G?yl(ie,G)*pa+E:0,C&&(A*=Math.abs(Math.cos(C*Ql))),n.svg&&(x-=k-(k*q+F*ie),y-=F-(k*K+F*G))):(ke=B[6],oe=B[7],te=B[8],ce=B[9],ae=B[10],ue=B[11],x=B[12],y=B[13],v=B[14],P=yl(ke,ae),I=P*pa,P&&(L=Math.cos(-P),W=Math.sin(-P),Z=$*L+te*W,Q=re*L+ce*W,H=ke*L+ae*W,te=$*-W+te*L,ce=re*-W+ce*L,ae=ke*-W+ae*L,ue=oe*-W+ue*L,$=Z,re=Q,ke=H),P=yl(-ie,ae),R=P*pa,P&&(L=Math.cos(-P),W=Math.sin(-P),Z=q*L-te*W,Q=K*L-ce*W,H=ie*L-ae*W,ue=G*W+ue*L,q=Z,K=Q,ie=H),P=yl(K,q),E=P*pa,P&&(L=Math.cos(P),W=Math.sin(P),Z=q*L+K*W,Q=$*L+re*W,K=K*L-q*W,re=re*L-$*W,q=Z,$=Q),I&&Math.abs(I)+Math.abs(E)>359.9&&(I=E=0,R=180-R),b=ur(Math.sqrt(q*q+K*K+ie*ie)),A=ur(Math.sqrt(re*re+ke*ke)),P=yl($,re),C=Math.abs(P)>2e-4?P*pa:0,O=ue?1/(ue<0?-ue:ue):0),n.svg&&(Z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!kN(ps(e,qt)),Z&&e.setAttribute("transform",Z))),Math.abs(C)>90&&Math.abs(C)<270&&(o?(b*=-1,C+=E<=0?180:-180,E+=E<=0?180:-180):(A*=-1,C+=C<=0?180:-180)),r=r||n.uncache,n.x=x-((n.xPercent=x&&(!r&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-x)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=y-((n.yPercent=y&&(!r&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=v+l,n.scaleX=ur(b),n.scaleY=ur(A),n.rotation=ur(E)+u,n.rotationX=ur(I)+u,n.rotationY=ur(R)+u,n.skewX=C+u,n.skewY=S+u,n.transformPerspective=O+l,(n.zOrigin=parseFloat(f.split(" ")[2])||!r&&n.zOrigin||0)&&(s[In]=Uh(f)),n.xOffset=n.yOffset=0,n.force3D=qn.force3D,n.renderTransform=n.svg?B7:IN?PN:L7,n.uncache=0,n},Uh=function(e){return(e=e.split(" "))[0]+" "+e[1]},lp=function(e,r,n){var s=Zr(r);return ur(parseFloat(r)+parseFloat(Ho(e,"x",n+"px",s)))+s},L7=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,PN(e,r)},ca="0deg",ou="0px",ua=") ",PN=function(e,r){var n=r||this,s=n.xPercent,o=n.yPercent,l=n.x,u=n.y,h=n.z,f=n.rotation,x=n.rotationY,y=n.rotationX,v=n.skewX,b=n.skewY,A=n.scaleX,E=n.scaleY,I=n.transformPerspective,R=n.force3D,C=n.target,S=n.zOrigin,O="",k=R==="auto"&&e&&e!==1||R===!0;if(S&&(y!==ca||x!==ca)){var F=parseFloat(x)*Ql,B=Math.sin(F),P=Math.cos(F),L;F=parseFloat(y)*Ql,L=Math.cos(F),l=lp(C,l,B*L*-S),u=lp(C,u,-Math.sin(F)*-S),h=lp(C,h,P*L*-S+S)}I!==ou&&(O+="perspective("+I+ua),(s||o)&&(O+="translate("+s+"%, "+o+"%) "),(k||l!==ou||u!==ou||h!==ou)&&(O+=h!==ou||k?"translate3d("+l+", "+u+", "+h+") ":"translate("+l+", "+u+ua),f!==ca&&(O+="rotate("+f+ua),x!==ca&&(O+="rotateY("+x+ua),y!==ca&&(O+="rotateX("+y+ua),(v!==ca||b!==ca)&&(O+="skew("+v+", "+b+ua),(A!==1||E!==1)&&(O+="scale("+A+", "+E+ua),C.style[qt]=O||"translate(0, 0)"},B7=function(e,r){var n=r||this,s=n.xPercent,o=n.yPercent,l=n.x,u=n.y,h=n.rotation,f=n.skewX,x=n.skewY,y=n.scaleX,v=n.scaleY,b=n.target,A=n.xOrigin,E=n.yOrigin,I=n.xOffset,R=n.yOffset,C=n.forceCSS,S=parseFloat(l),O=parseFloat(u),k,F,B,P,L;h=parseFloat(h),f=parseFloat(f),x=parseFloat(x),x&&(x=parseFloat(x),f+=x,h+=x),h||f?(h*=Ql,f*=Ql,k=Math.cos(h)*y,F=Math.sin(h)*y,B=Math.sin(h-f)*-v,P=Math.cos(h-f)*v,f&&(x*=Ql,L=Math.tan(f-x),L=Math.sqrt(1+L*L),B*=L,P*=L,x&&(L=Math.tan(x),L=Math.sqrt(1+L*L),k*=L,F*=L)),k=ur(k),F=ur(F),B=ur(B),P=ur(P)):(k=y,P=v,F=B=0),(S&&!~(l+"").indexOf("px")||O&&!~(u+"").indexOf("px"))&&(S=Ho(b,"x",l,"px"),O=Ho(b,"y",u,"px")),(A||E||I||R)&&(S=ur(S+A-(A*k+E*B)+I),O=ur(O+E-(A*F+E*P)+R)),(s||o)&&(L=b.getBBox(),S=ur(S+s/100*L.width),O=ur(O+o/100*L.height)),L="matrix("+k+","+F+","+B+","+P+","+S+","+O+")",b.setAttribute("transform",L),C&&(b.style[qt]=L)},F7=function(e,r,n,s,o){var l=360,u=Pr(o),h=parseFloat(o)*(u&&~o.indexOf("rad")?pa:1),f=h-s,x=s+f+"deg",y,v;return u&&(y=o.split("_")[1],y==="short"&&(f%=l,f!==f%(l/2)&&(f+=f<0?l:-l)),y==="cw"&&f<0?f=(f+l*j2)%l-~~(f/l)*l:y==="ccw"&&f>0&&(f=(f-l*j2)%l-~~(f/l)*l)),e._pt=v=new Tn(e._pt,r,n,s,f,b7),v.e=x,v.u="deg",e._props.push(n),v},V2=function(e,r){for(var n in r)e[n]=r[n];return e},U7=function(e,r,n){var s=V2({},n._gsap),o="perspective,force3D,transformOrigin,svgOrigin",l=n.style,u,h,f,x,y,v,b,A;s.svg?(f=n.getAttribute("transform"),n.setAttribute("transform",""),l[qt]=r,u=dd(n,1),Va(n,qt),n.setAttribute("transform",f)):(f=getComputedStyle(n)[qt],l[qt]=r,u=dd(n,1),l[qt]=f);for(h in Gi)f=s[h],x=u[h],f!==x&&o.indexOf(h)<0&&(b=Zr(f),A=Zr(x),y=b!==A?Ho(n,h,f,A):parseFloat(f),v=parseFloat(x),e._pt=new Tn(e._pt,u,h,y,v-y,qm),e._pt.u=A||0,e._props.push(h));V2(u,s)};Nn("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",s="Bottom",o="Left",l=(e<3?[r,n,s,o]:[r+o,r+n,s+n,s+o]).map(function(u){return e<2?t+u:"border"+u+t});Fh[e>1?"border"+t:t]=function(u,h,f,x,y){var v,b;if(arguments.length<4)return v=l.map(function(A){return Oi(u,A,f)}),b=v.join(" "),b.split(v[0]).length===5?v[0]:b;v=(x+"").split(" "),b={},l.forEach(function(A,E){return b[A]=v[E]=v[E]||v[(E-1)/2|0]}),u.init(h,b,y)}});var jN={name:"css",register:Qm,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,n,s,o){var l=this._props,u=e.style,h=n.vars.startAt,f,x,y,v,b,A,E,I,R,C,S,O,k,F,B,P;cy||Qm(),this.styles=this.styles||TN(e),P=this.styles.props,this.tween=n;for(E in r)if(E!=="autoRound"&&(x=r[E],!(Ln[E]&&xN(E,r,n,s,e,o)))){if(b=typeof x,A=Fh[E],b==="function"&&(x=x.call(n,s,e,o),b=typeof x),b==="string"&&~x.indexOf("random(")&&(x=ad(x)),A)A(this,e,E,x,n)&&(B=1);else if(E.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(E)+"").trim(),x+="",Do.lastIndex=0,Do.test(f)||(I=Zr(f),R=Zr(x)),R?I!==R&&(f=Ho(e,E,f,R)+R):I&&(x+=I),this.add(u,"setProperty",f,x,s,o,0,0,E),l.push(E),P.push(E,0,u[E]);else if(b!=="undefined"){if(h&&E in h?(f=typeof h[E]=="function"?h[E].call(n,s,e,o):h[E],Pr(f)&&~f.indexOf("random(")&&(f=ad(f)),Zr(f+"")||f==="auto"||(f+=qn.units[E]||Zr(Oi(e,E))||""),(f+"").charAt(1)==="="&&(f=Oi(e,E))):f=Oi(e,E),v=parseFloat(f),C=b==="string"&&x.charAt(1)==="="&&x.substr(0,2),C&&(x=x.substr(2)),y=parseFloat(x),E in di&&(E==="autoAlpha"&&(v===1&&Oi(e,"visibility")==="hidden"&&y&&(v=0),P.push("visibility",0,u.visibility),So(this,u,"visibility",v?"inherit":"hidden",y?"inherit":"hidden",!y)),E!=="scale"&&E!=="transform"&&(E=di[E],~E.indexOf(",")&&(E=E.split(",")[0]))),S=E in Gi,S){if(this.styles.save(E),b==="string"&&x.substring(0,6)==="var(--"&&(x=ps(e,x.substring(4,x.indexOf(")"))),y=parseFloat(x)),O||(k=e._gsap,k.renderTransform&&!r.parseTransform||dd(e,r.parseTransform),F=r.smoothOrigin!==!1&&k.smooth,O=this._pt=new Tn(this._pt,u,qt,0,1,k.renderTransform,k,0,-1),O.dep=1),E==="scale")this._pt=new Tn(this._pt,k,"scaleY",k.scaleY,(C?ql(k.scaleY,C+y):y)-k.scaleY||0,qm),this._pt.u=0,l.push("scaleY",E),E+="X";else if(E==="transformOrigin"){P.push(In,0,u[In]),x=j7(x),k.svg?Zm(e,x,0,F,0,this):(R=parseFloat(x.split(" ")[2])||0,R!==k.zOrigin&&So(this,k,"zOrigin",k.zOrigin,R),So(this,u,E,Uh(f),Uh(x)));continue}else if(E==="svgOrigin"){Zm(e,x,1,F,0,this);continue}else if(E in MN){F7(this,k,E,v,C?ql(v,C+x):x);continue}else if(E==="smoothOrigin"){So(this,k,"smooth",k.smooth,x);continue}else if(E==="force3D"){k[E]=x;continue}else if(E==="transform"){U7(this,x,e);continue}}else E in u||(E=Ec(E)||E);if(S||(y||y===0)&&(v||v===0)&&!_7.test(x)&&E in u)I=(f+"").substr((v+"").length),y||(y=0),R=Zr(x)||(E in qn.units?qn.units[E]:I),I!==R&&(v=Ho(e,E,f,R)),this._pt=new Tn(this._pt,S?k:u,E,v,(C?ql(v,C+y):y)-v,!S&&(R==="px"||E==="zIndex")&&r.autoRound!==!1?C7:qm),this._pt.u=R||0,I!==R&&R!=="%"&&(this._pt.b=f,this._pt.r=E7);else if(E in u)P7.call(this,e,E,f,C?C+x:x);else if(E in e)this.add(e,E,f||e[E],C?C+x:x,s,o);else if(E!=="parseTransform"){Jx(E,x);continue}S||(E in u?P.push(E,0,u[E]):typeof e[E]=="function"?P.push(E,2,e[E]()):P.push(E,1,f||e[E])),l.push(E)}}B&&EN(this)},render:function(e,r){if(r.tween._time||!uy())for(var n=r._pt;n;)n.r(e,n.d),n=n._next;else r.styles.revert()},get:Oi,aliases:di,getSetter:function(e,r,n){var s=di[r];return s&&s.indexOf(",")<0&&(r=s),r in Gi&&r!==In&&(e._gsap.x||Oi(e,"x"))?n&&P2===n?r==="scale"?T7:N7:(P2=n||{})&&(r==="scale"?I7:R7):e.style&&!Kx(e.style[r])?S7:~r.indexOf("-")?A7:ay(e,r)},core:{_removeProperty:Va,_getMatrix:fy}};Rn.utils.checkPrefix=Ec;Rn.core.getStyleSaver=TN;(function(t,e,r,n){var s=Nn(t+","+e+","+r,function(o){Gi[o]=1});Nn(e,function(o){qn.units[o]="deg",MN[o]=1}),di[s[13]]=t+","+e,Nn(n,function(o){var l=o.split(":");di[l[1]]=s[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Nn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){qn.units[t]="px"});Rn.registerPlugin(jN);var Ii=Rn.registerPlugin(jN)||Rn;Ii.core.Tween;const hy="/ALAN_NEW/assets/ALANLOGO-CiZZgqjV.png",z7="/ALAN_NEW/assets/onbarding1-DYox49Gq.png",V7="/ALAN_NEW/assets/onbarding2-vDKFdda2.png",H7="/ALAN_NEW/assets/onbarding3-D_6Pmr_M.png",au=[{title:"Discover Premium Dining",description:"Browse the finest restaurants in Yangon with detailed menus and exclusive offerings",image:z7},{title:"Prepay with Ease",description:"Secure your table and meals in advance with convenient payment options",image:V7},{title:"Skip the Wait",description:"Show your QR code and enjoy your meal immediately upon arrival",image:H7}],$7=()=>{const[t,e]=N.useState(0),r=hn(),n=N.useRef(null),s=N.useRef(null),o=N.useRef(null),l=N.useRef(null);N.useEffect(()=>{if(!n.current)return;const x=Ii.timeline();return x.fromTo(s.current,{opacity:0,y:10,scale:.98},{opacity:1,y:0,scale:1,duration:.4,ease:"power2.out"}).fromTo(o.current,{opacity:0,y:12},{opacity:1,y:0,duration:.45,ease:"power2.out"},"-=0.15").fromTo(l.current,{opacity:0,y:16,rotate:-2},{opacity:1,y:0,rotate:0,duration:.5,ease:"power2.out"},"-=0.2"),()=>{x.kill()}},[t]);const u=()=>{t<au.length-1?e(t+1):r("/auth")},h=()=>{r("/auth")},f=au[t];return p.jsxs("div",{ref:n,className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col",children:[p.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:p.jsxs("div",{className:"w-full max-w-md space-y-8",children:[p.jsx("div",{className:"flex justify-center",ref:s,children:p.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full luxury-gradient flex items-center justify-center luxury-shadow overflow-hidden",children:p.jsx("img",{src:hy,alt:"ALAN Logo",className:"w-16 h-16 object-contain drop-shadow"})})}),p.jsxs("div",{className:"text-center space-y-4",ref:o,children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground",children:f.title}),p.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:f.description})]}),p.jsx("div",{className:"flex justify-center",ref:l,children:p.jsx("div",{className:"w-full flex items-center justify-center",children:p.jsx("img",{src:f.image,alt:"Onboarding illustration",className:"max-h-56 sm:max-h-64 object-contain"})})}),p.jsx("div",{className:"flex justify-center gap-2",children:au.map((x,y)=>p.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${y===t?"w-8 bg-primary":"w-2 bg-muted"}`},y))})]})}),p.jsxs("div",{className:"p-6 space-y-3 max-w-md mx-auto w-full",children:[p.jsxs(Be,{onClick:u,className:"w-full h-12 text-base font-medium luxury-gradient",size:"lg",children:[t<au.length-1?"Next":"Get Started",p.jsx(xC,{className:"ml-2 h-5 w-5"})]}),t<au.length-1&&p.jsx(Be,{onClick:h,variant:"ghost",className:"w-full h-12 text-base font-medium",size:"lg",children:"Skip"})]})]})},ct=N.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:Oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ct.displayName="Input";var W7="Label",DN=N.forwardRef((t,e)=>p.jsx(Me.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));DN.displayName=W7;var LN=DN;const G7=x0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ke=N.forwardRef(({className:t,...e},r)=>p.jsx(LN,{ref:r,className:Oe(G7(),t),...e}));Ke.displayName=LN.displayName;const We=N.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Oe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));We.displayName="Card";const or=N.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Oe("flex flex-col space-y-1.5 p-6",t),...e}));or.displayName="CardHeader";const hr=N.forwardRef(({className:t,...e},r)=>p.jsx("h3",{ref:r,className:Oe("text-2xl font-semibold leading-none tracking-tight",t),...e}));hr.displayName="CardTitle";const ji=N.forwardRef(({className:t,...e},r)=>p.jsx("p",{ref:r,className:Oe("text-sm text-muted-foreground",t),...e}));ji.displayName="CardDescription";const bt=N.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Oe("p-6 pt-0",t),...e}));bt.displayName="CardContent";const Y7=N.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Oe("flex items-center p-6 pt-0",t),...e}));Y7.displayName="CardFooter";var X7=N.createContext(void 0);function Lc(t){const e=N.useContext(X7);return t||e||"ltr"}var cp="rovingFocusGroup.onEntryFocus",q7={bubbles:!1,cancelable:!0},Id="RovingFocusGroup",[Jm,BN,K7]=p0(Id),[Q7,Bc]=On(Id,[K7]),[Z7,J7]=Q7(Id),FN=N.forwardRef((t,e)=>p.jsx(Jm.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Jm.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(e9,{...t,ref:e})})}));FN.displayName=Id;var e9=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:x=!1,...y}=t,v=N.useRef(null),b=Ze(e,v),A=Lc(o),[E,I]=Vi({prop:l,defaultProp:u??null,onChange:h,caller:Id}),[R,C]=N.useState(!1),S=fr(f),O=BN(r),k=N.useRef(!1),[F,B]=N.useState(0);return N.useEffect(()=>{const P=v.current;if(P)return P.addEventListener(cp,S),()=>P.removeEventListener(cp,S)},[S]),p.jsx(Z7,{scope:r,orientation:n,dir:A,loop:s,currentTabStopId:E,onItemFocus:N.useCallback(P=>I(P),[I]),onItemShiftTab:N.useCallback(()=>C(!0),[]),onFocusableItemAdd:N.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:N.useCallback(()=>B(P=>P-1),[]),children:p.jsx(Me.div,{tabIndex:R||F===0?-1:0,"data-orientation":n,...y,ref:b,style:{outline:"none",...t.style},onMouseDown:Ee(t.onMouseDown,()=>{k.current=!0}),onFocus:Ee(t.onFocus,P=>{const L=!k.current;if(P.target===P.currentTarget&&L&&!R){const W=new CustomEvent(cp,q7);if(P.currentTarget.dispatchEvent(W),!W.defaultPrevented){const q=O().filter(re=>re.focusable),K=q.find(re=>re.active),ie=q.find(re=>re.id===E),$=[K,ie,...q].filter(Boolean).map(re=>re.ref.current);VN($,x)}}k.current=!1}),onBlur:Ee(t.onBlur,()=>C(!1))})})}),UN="RovingFocusGroupItem",zN=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:l,...u}=t,h=pi(),f=o||h,x=J7(UN,r),y=x.currentTabStopId===f,v=BN(r),{onFocusableItemAdd:b,onFocusableItemRemove:A,currentTabStopId:E}=x;return N.useEffect(()=>{if(n)return b(),()=>A()},[n,b,A]),p.jsx(Jm.ItemSlot,{scope:r,id:f,focusable:n,active:s,children:p.jsx(Me.span,{tabIndex:y?0:-1,"data-orientation":x.orientation,...u,ref:e,onMouseDown:Ee(t.onMouseDown,I=>{n?x.onItemFocus(f):I.preventDefault()}),onFocus:Ee(t.onFocus,()=>x.onItemFocus(f)),onKeyDown:Ee(t.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){x.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const R=n9(I,x.orientation,x.dir);if(R!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let S=v().filter(O=>O.focusable).map(O=>O.ref.current);if(R==="last")S.reverse();else if(R==="prev"||R==="next"){R==="prev"&&S.reverse();const O=S.indexOf(I.currentTarget);S=x.loop?s9(S,O+1):S.slice(O+1)}setTimeout(()=>VN(S))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:E!=null}):l})})});zN.displayName=UN;var t9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function r9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function n9(t,e,r){const n=r9(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return t9[n]}function VN(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function s9(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var py=FN,my=zN,M0="Tabs",[i9,uV]=On(M0,[Bc]),HN=Bc(),[o9,gy]=i9(M0),$N=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:l="horizontal",dir:u,activationMode:h="automatic",...f}=t,x=Lc(u),[y,v]=Vi({prop:n,onChange:s,defaultProp:o??"",caller:M0});return p.jsx(o9,{scope:r,baseId:pi(),value:y,onValueChange:v,orientation:l,dir:x,activationMode:h,children:p.jsx(Me.div,{dir:x,"data-orientation":l,...f,ref:e})})});$N.displayName=M0;var WN="TabsList",GN=N.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,o=gy(WN,r),l=HN(r);return p.jsx(py,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:p.jsx(Me.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});GN.displayName=WN;var YN="TabsTrigger",XN=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=t,l=gy(YN,r),u=HN(r),h=QN(l.baseId,n),f=ZN(l.baseId,n),x=n===l.value;return p.jsx(my,{asChild:!0,...u,focusable:!s,active:x,children:p.jsx(Me.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...o,ref:e,onMouseDown:Ee(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?l.onValueChange(n):y.preventDefault()}),onKeyDown:Ee(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&l.onValueChange(n)}),onFocus:Ee(t.onFocus,()=>{const y=l.activationMode!=="manual";!x&&!s&&y&&l.onValueChange(n)})})})});XN.displayName=YN;var qN="TabsContent",KN=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...l}=t,u=gy(qN,r),h=QN(u.baseId,n),f=ZN(u.baseId,n),x=n===u.value,y=N.useRef(x);return N.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),p.jsx(tn,{present:s||x,children:({present:v})=>p.jsx(Me.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:f,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&o})})});KN.displayName=qN;function QN(t,e){return`${t}-trigger-${e}`}function ZN(t,e){return`${t}-content-${e}`}var a9=$N,JN=GN,eT=XN,tT=KN;const rT=a9,xy=N.forwardRef(({className:t,...e},r)=>p.jsx(JN,{ref:r,className:Oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));xy.displayName=JN.displayName;const fd=N.forwardRef(({className:t,...e},r)=>p.jsx(eT,{ref:r,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=inactive]:text-muted-foreground/70 data-[state=inactive]:hover:text-muted-foreground",t),...e}));fd.displayName=eT.displayName;const eg=N.forwardRef(({className:t,...e},r)=>p.jsx(tT,{ref:r,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=inactive]:hidden",t),...e}));eg.displayName=tT.displayName;const l9=()=>{const[t,e]=N.useState(!1),{signUp:r,signIn:n,user:s,userRole:o}=Mn(),l=hn(),[u,h]=N.useState("signin"),f=N.useRef(null),x=N.useRef(null),y=N.useRef(null);N.useRef(null),N.useEffect(()=>{Ii.timeline({defaults:{ease:"power2.out"}}).fromTo(f.current,{opacity:0,y:-12,scale:.92},{opacity:1,y:0,scale:1,duration:.5}).fromTo(x.current,{opacity:0,y:16},{opacity:1,y:0,duration:.5},"-=0.25")},[]),N.useEffect(()=>{const C=y.current;if(!C)return;const S=C.querySelector('[data-state="active"]');if(!S)return;const O=S.scrollHeight,k=C.offsetHeight;Ii.set(C,{height:k}),Ii.to(C,{height:O,duration:.45,ease:"power2.out",onComplete:()=>Ii.set(C,{height:"auto"})}),Ii.fromTo(S,{opacity:0,y:8},{opacity:1,y:0,duration:.35,ease:"power2.out"})},[u]),N.useEffect(()=>{const C=y.current;if(!C)return;const S=C.querySelector('[data-state="active"]');S&&(Ii.set(C,{height:S.scrollHeight}),Ii.set(C,{height:"auto"}))},[]),N.useEffect(()=>{s&&o&&l(o==="admin"?"/admin":o==="restaurant_owner"?"/dashboard":"/home")},[s,o,l]);const[v,b]=N.useState({email:"",password:"",fullName:"",phone:""}),[A,E]=N.useState({email:"",password:""}),I=async C=>{C.preventDefault(),e(!0);const{error:S}=await r(v.email,v.password,v.fullName,v.phone);S?Ce.error(S.message||"Failed to sign up"):(Ce.success("Account created! Welcome to ALAN"),l("/home")),e(!1)},R=async C=>{C.preventDefault(),e(!0);const{error:S}=await n(A.email,A.password);S?Ce.error(S.message||"Failed to sign in"):Ce.success("Signing in..."),e(!1)};return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:p.jsxs("div",{className:"w-full max-w-md space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",ref:f,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsx("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center overflow-hidden",children:p.jsx("img",{src:hy,alt:"ALAN Logo",className:"w-10 h-10 object-contain drop-shadow"})})}),p.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ALAN"}),p.jsx("p",{className:"text-muted-foreground",children:"Luxury dining made simple"})]}),p.jsxs(We,{className:"border-border/50 luxury-shadow",ref:x,children:[p.jsxs(or,{children:[p.jsx(hr,{children:"Welcome"}),p.jsx(ji,{children:"Sign in or create an account to continue"})]}),p.jsx(bt,{className:"px-6 pt-2 pb-6",children:p.jsxs(rT,{value:u,onValueChange:C=>h(C),className:"w-full",children:[p.jsxs(xy,{className:"grid w-full grid-cols-2",children:[p.jsx(fd,{value:"signin",children:"Sign In"}),p.jsx(fd,{value:"signup",children:"Sign Up"})]}),p.jsxs("div",{ref:y,className:"relative overflow-visible box-border px-3 sm:px-4 pb-5",children:[p.jsx(eg,{value:"signin",forceMount:!0,children:p.jsxs("form",{onSubmit:R,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signin-email",children:"Email"}),p.jsx(ct,{id:"signin-email",type:"email",placeholder:"your@email.com",value:A.email,onChange:C=>E({...A,email:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signin-password",children:"Password"}),p.jsx(ct,{id:"signin-password",type:"password",placeholder:"",value:A.password,onChange:C=>E({...A,password:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsx(Be,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Signing in...":"Sign In"})]})}),p.jsx(eg,{value:"signup",forceMount:!0,children:p.jsxs("form",{onSubmit:I,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signup-name",children:"Full Name"}),p.jsx(ct,{id:"signup-name",type:"text",placeholder:"John Doe",value:v.fullName,onChange:C=>b({...v,fullName:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signup-phone",children:"Phone"}),p.jsx(ct,{id:"signup-phone",type:"tel",placeholder:"+95 9 XXX XXX XXX",value:v.phone,onChange:C=>b({...v,phone:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signup-email",children:"Email"}),p.jsx(ct,{id:"signup-email",type:"email",placeholder:"your@email.com",value:v.email,onChange:C=>b({...v,email:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"signup-password",children:"Password"}),p.jsx(ct,{id:"signup-password",type:"password",placeholder:"",value:v.password,onChange:C=>b({...v,password:C.target.value}),required:!0,className:"h-12 px-4"})]}),p.jsx(Be,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Creating account...":"Create Account"})]})})]})]})})]})]})})},c9=x0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vs({className:t,variant:e,...r}){return p.jsx("div",{className:Oe(c9({variant:e}),t),...r})}const yy=()=>{const t=Xo(),e=r=>t.pathname===r;return p.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border glass-effect z-50",children:p.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[p.jsxs(W1,{to:"/home",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/home")?"text-primary":"text-muted-foreground"}`,children:[p.jsx(bC,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),p.jsxs(W1,{to:"/orders",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/orders")?"text-primary":"text-muted-foreground"}`,children:[p.jsx(SC,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),p.jsxs(W1,{to:"/profile",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/profile")?"text-primary":"text-muted-foreground"}`,children:[p.jsx(Fs,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})},u9=(t,e)=>{if(!t||e<=0)return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"};switch(t){case"Explorer":return{label:"Explorer",description:"You are discovering new places. Keep exploring.",icon:"compass"};case"Preferred":return{label:"Preferred",description:"A valued guest with consistent fine dining choices.",icon:"star"};case"Loyal Customer":return{label:"Loyal Customer",description:"One of our most loyal guests. Thank you for dining with us.",icon:"shield"};case"Super Customer":return{label:"Super Customer",description:"Elite status. Enjoy priority perks and curated experiences.",icon:"crown"};default:return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"}}};function nT(){const{user:t}=Mn(),[e,r]=N.useState(null),[n,s]=N.useState(!0);N.useEffect(()=>{(async()=>{if(!t){r(null),s(!1);return}s(!0);const{data:u,error:h}=await xe.from("customer_loyalty_summary").select("*").eq("customer_id",t.id).maybeSingle();if(!h&&u){r({customer_id:u.customer_id,total_points:Number(u.total_points)||0,total_completed_orders:Number(u.total_completed_orders)||0,total_spent:Number(u.total_spent)||0,current_badge:u.current_badge||"Newbie",updated_at:u.updated_at}),s(!1);return}const{data:f,error:x}=await xe.from("orders").select("total_amount, status").eq("customer_id",t.id).eq("status","completed");if(x){console.error("Failed to load loyalty summary:",x),r(null),s(!1);return}const y=(f||[]).reduce((I,R)=>I+(Number(R.total_amount)||0),0),v=(f==null?void 0:f.length)||0,b=Math.floor(y/1e5);let A;v<=0?A="Newbie":v<=4?A="Explorer":v<=9?A="Preferred":v<=29?A="Loyal Customer":A="Super Customer";const E=new Date().toISOString();r({customer_id:t.id,total_points:b,total_completed_orders:v,total_spent:y,current_badge:A,updated_at:E}),s(!1)})()},[t]);const o=u9(e==null?void 0:e.current_badge,(e==null?void 0:e.total_completed_orders)||0);return{loading:n,summary:e,badgeLabel:o.label,badgeDescription:o.description,badgeIcon:o.icon}}function d9({restaurants:t}){const e=hn(),r=N.useRef(null),n=N.useRef(0),s=N.useRef(null),o=(t||[]).filter(l=>l.image).slice(0,20);return N.useEffect(()=>{const l=r.current;if(!l||o.length===0)return;let u=!1,h=0,f=0,x=0,y=0,v=1,b=performance.now();const A=()=>l.scrollWidth-l.clientWidth,E=()=>{const L=A();l.scrollLeft<0&&(l.scrollLeft=0),l.scrollLeft>L&&(l.scrollLeft=L)},I=()=>{s.current!==null&&(cancelAnimationFrame(s.current),s.current=null)},R=()=>{const L=r.current;if(!L){s.current=null;return}const W=performance.now(),q=W-b;b=W;let K=n.current;if(Math.abs(K)>=.02)L.scrollLeft+=K,E(),K*=.95,n.current=K;else if(n.current=0,!u){const ie=A();if(ie>0){const $=.02*q*v;L.scrollLeft+=$,L.scrollLeft<=0?(L.scrollLeft=0,v=1):L.scrollLeft>=ie&&(L.scrollLeft=ie,v=-1)}}s.current=requestAnimationFrame(R)};I(),b=performance.now(),s.current=requestAnimationFrame(R);const C=L=>{u=!0,I(),h=L.pageX,x=L.pageX,f=l.scrollLeft,y=performance.now(),l.classList.add("cursor-grabbing")},S=L=>{if(u&&(u=!1,l.classList.remove("cursor-grabbing"),E(),L!==null)){const W=performance.now(),q=L-x,K=W-y||1;let ie=-(q/K)*12;ie>40&&(ie=40),ie<-40&&(ie=-40),n.current=ie}},O=L=>{S(L.pageX)},k=L=>{if(!u)return;L.preventDefault();const W=L.pageX-h;l.scrollLeft=f-W;const q=performance.now();x=L.pageX,y=q},F=L=>{if(!L.touches[0])return;u=!0,I();const W=L.touches[0].pageX;h=W,x=W,f=l.scrollLeft,y=performance.now()},B=L=>{const W=L.changedTouches&&L.changedTouches[0]?L.changedTouches[0].pageX:null;S(W)},P=L=>{if(!u||!L.touches[0])return;const W=L.touches[0].pageX,q=W-h;l.scrollLeft=f-q;const K=performance.now();x=W,y=K};return l.addEventListener("mousedown",C),window.addEventListener("mouseup",O),l.addEventListener("mouseleave",O),l.addEventListener("mousemove",k),l.addEventListener("touchstart",F,{passive:!0}),l.addEventListener("touchend",B),l.addEventListener("touchcancel",B),l.addEventListener("touchmove",P,{passive:!1}),()=>{l.removeEventListener("mousedown",C),window.removeEventListener("mouseup",O),l.removeEventListener("mouseleave",O),l.removeEventListener("mousemove",k),l.removeEventListener("touchstart",F),l.removeEventListener("touchend",B),l.removeEventListener("touchcancel",B),l.removeEventListener("touchmove",P),I()}},[o.length]),o.length===0?null:p.jsxs("div",{className:"w-full mt-3 mb-4",children:[p.jsx("div",{ref:r,className:`\r
          mx-auto max-w-md px-4 flex gap-5 overflow-x-auto select-none\r
          snap-x snap-mandatory cursor-grab no-scrollbar\r
        `,style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:o.map(l=>p.jsxs("button",{onClick:()=>e(`/restaurant/${l.id}`),className:"relative flex-shrink-0 snap-start group",style:{scrollSnapAlign:"start"},children:[p.jsx("div",{className:`\r
                w-20 h-20 rounded-full overflow-hidden\r
                bg-black/70 border border-yellow-500/40\r
                transition-transform duration-300 ease-out\r
                group-active:scale-95 group-hover:scale-[1.03]\r
              `,children:p.jsx("img",{src:l.image||void 0,alt:l.title,className:"w-full h-full object-cover",loading:"lazy"})}),p.jsx("div",{className:"mt-1.5 w-20 text-center",children:p.jsx("span",{className:"text-[9px] font-semibold text-black block truncate",children:l.title})})]},l.id))}),p.jsx("style",{children:`
          .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .no-scrollbar::-webkit-scrollbar {
            display: none;
          }
        `})]})}const f9=()=>{var Q;const[t,e]=N.useState(""),[r,n]=N.useState([]),[s,o]=N.useState(!0),[l,u]=N.useState(!1),[h,f]=N.useState(!1),[x,y]=N.useState([]),[v,b]=N.useState(null),[A,E]=N.useState(null),[I,R]=N.useState(null),C=hn(),{user:S,signOut:O}=Mn(),{loading:k,summary:F,badgeLabel:B,badgeIcon:P}=nT(),L=((Q=S==null?void 0:S.user_metadata)==null?void 0:Q.full_name)||(S==null?void 0:S.email)||"Guest",W=()=>{const H=new Date().getHours();return H<12?"Good morning":H<18?"Good afternoon":"Good evening"},q=async()=>{await O(),u(!1),C("/auth")},K=()=>{const H="w-3.5 h-3.5 text-yellow-300 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]";switch(P){case"compass":return p.jsx(vC,{className:H});case"star":return p.jsx(bh,{className:H});case"shield":return p.jsx(vh,{className:H});case"crown":return p.jsx(_C,{className:H});case"sparkles":default:return p.jsx(AC,{className:H})}},ie=async()=>{if(!S)return;const{data:H,error:te}=await xe.from("customer_notifications").select("id, title, message, status, created_at").eq("customer_id",S.id).order("created_at",{ascending:!1}).limit(15);if(te){console.error("Failed to load notifications",te);return}y(H||[])};N.useEffect(()=>{if(!S){y([]);return}ie();const H=xe.channel(`customer-notifications-${S.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"customer_notifications",filter:`customer_id=eq.${S.id}`},te=>{const ce=te.new,ae={id:ce.id,title:ce.title,message:ce.message,status:ce.status,created_at:ce.created_at};y(oe=>oe.some(ue=>ue.id===ae.id)?oe:[ae,...oe].slice(0,20))}).subscribe();return()=>{xe.removeChannel(H)}},[S==null?void 0:S.id]);const G=x.filter(H=>H.status==="unread").length;N.useEffect(()=>{if(!l&&!h)return;const H=te=>{const ce=te.target;l&&A&&!A.contains(ce)&&u(!1),h&&I&&!I.contains(ce)&&f(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[l,h,A,I]);const $=async H=>{if(b(H),f(!1),H.status==="unread"){y(ce=>ce.map(ae=>ae.id===H.id?{...ae,status:"read"}:ae));const{error:te}=await xe.from("customer_notifications").update({status:"read"}).eq("id",H.id);te&&console.error("Failed to mark notification read",te)}};N.useEffect(()=>{re()},[]);const re=async()=>{try{const{data:H,error:te}=await xe.from("restaurants").select("*").order("rating",{ascending:!1});if(te)throw te;n(H||[])}catch(H){console.error("Error fetching restaurants:",H),Ce.error("Failed to load restaurants")}finally{o(!1)}},Z=r.filter(H=>{var te;return H.name.toLowerCase().includes(t.toLowerCase())||(((te=H.cuisine_type)==null?void 0:te.toLowerCase())||"").includes(t.toLowerCase())});return p.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[p.jsx("div",{className:"sticky top-0 z-40 py-2 bg-background/60 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:p.jsxs("div",{className:"mx-auto max-w-md px-4",children:[p.jsx("div",{className:"luxury-gradient text-white rounded-xl shadow-md",children:p.jsxs("div",{className:"px-4 py-2 flex items-center justify-between gap-3",children:[p.jsx("img",{src:hy,alt:"ALAN Logo",className:"h-7 w-auto object-contain drop-shadow"}),p.jsxs("div",{className:"flex items-center gap-2 relative",children:[S&&p.jsxs("div",{className:"relative",ref:H=>R(H),children:[p.jsxs("button",{onClick:()=>{f(H=>!H),u(!1)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 transition-all","aria-label":"Notifications",children:[p.jsx(pC,{className:"h-4 w-4 text-white"}),G>0&&p.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[14px] h-[14px] px-[3px] rounded-full bg-red-500 text-[9px] leading-[14px] text-white flex items-center justify-center",children:G>9?"9+":G})]}),h&&p.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[p.jsxs("div",{className:"px-3 py-2 border-b border-border/40 flex items-center justify-between gap-2",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-[11px] font-semibold text-foreground",children:"Activity"}),p.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Loyalty & orders"})]}),x.length>0&&p.jsx("button",{onClick:async()=>{const H=x.filter(ce=>ce.status==="unread").map(ce=>ce.id);if(H.length===0)return;const{error:te}=await xe.from("customer_notifications").update({status:"read"}).in("id",H);te?console.error("Failed to mark all read",te):y(ce=>ce.map(ae=>H.includes(ae.id)?{...ae,status:"read"}:ae))},className:"text-[8px] px-2 py-1 rounded-full bg-primary/5 text-primary hover:bg-primary/10",children:"Mark all as read"})]}),p.jsx("div",{className:"max-h-72 overflow-y-auto",children:x.length===0?p.jsx("div",{className:"px-3 py-4 text-[10px] text-muted-foreground",children:"No notifications yet. You will see your order and loyalty updates here."}):x.map(H=>p.jsxs("button",{onClick:()=>$(H),className:`w-full px-3 py-2.5 flex items-start gap-2 hover:bg-accent/40 transition-colors ${H.status==="unread"?"bg-primary/5":""}`,children:[p.jsx("div",{className:"mt-1 w-2 h-2",children:H.status==="unread"?p.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):p.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:p.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),p.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[p.jsx("div",{className:`text-[9px] text-left ${H.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}`,children:H.message}),p.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const te=new Date(H.created_at),ce=String(te.getDate()).padStart(2,"0"),ae=String(te.getMonth()+1).padStart(2,"0"),oe=te.getFullYear();let ue=te.getHours();const ke=String(te.getMinutes()).padStart(2,"0"),ye=ue>=12?"PM":"AM";return ue=ue%12||12,`${ce}/${ae}/${oe} ${ue}:${ke} ${ye}`})()})]})]},H.id))})]})]}),p.jsxs("div",{className:"relative",ref:H=>E(H),children:[p.jsxs("button",{onClick:()=>{u(H=>!H),f(!1)},className:"relative w-9 h-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/15 transition-all border border-white/20 shadow-sm","aria-label":"Profile & loyalty menu",children:[p.jsx(Fs,{className:"h-4 w-4 text-white"}),p.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full bg-black/70 flex items-center justify-center border border-yellow-300/80 shadow-md",children:K()})]}),l&&p.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[p.jsxs("div",{className:"px-3 py-2.5 border-b border-border/40 flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-8 rounded-full luxury-gradient flex items-center justify-center",children:p.jsx(Fs,{className:"w-4 h-4 text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-[10px] font-semibold text-foreground truncate",children:L}),p.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:p.jsx(Vs,{className:"px-1.5 py-0 text-[8px] rounded-full bg-primary/10 text-primary border-primary/20",children:k?"Calculating badge...":B||"Newbie"})})]}),F&&p.jsxs("div",{className:"w-14 h-14 rounded-full bg-primary flex flex-col items-center justify-center leading-tight shadow-sm",children:[p.jsx("span",{className:"text-[14px] font-semibold text-white",children:F.total_points}),p.jsx("span",{className:"text-[8px] uppercase tracking-wide text-white/85",children:"pts"})]})]}),p.jsxs("div",{className:"py-1",children:[p.jsxs("button",{onClick:()=>{u(!1),C("/profile")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[p.jsx(Fs,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:"View profile & history"})]}),p.jsxs("button",{onClick:()=>{u(!1),C("/orders")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[p.jsx(hm,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:"My current orders"})]})]}),p.jsxs("button",{onClick:q,className:"w-full px-3 py-2.5 text-[10px] text-left text-red-500 hover:bg-red-500/5 border-t border-border/40 flex items-center gap-2",children:[p.jsx(y0,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:"Logout"})]})]})]})]})]})}),p.jsx("p",{className:"text-xs opacity-80 mt-2 text-center",children:"Discover Fine Dining with Ease and Comfort"})]})}),v&&p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>b(null),children:p.jsxs("div",{className:"w-[90%] max-w-sm bg-background rounded-2xl shadow-xl border border-border/60 p-4 space-y-2",onClick:H=>H.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsx("h2",{className:"text-sm font-semibold text-foreground",children:v.title}),p.jsx("button",{onClick:()=>b(null),className:"text-[10px] px-2 py-0.5 rounded-full bg-muted text-muted-foreground hover:bg-accent/60",children:"Close"})]}),p.jsx("div",{className:"text-[9px] text-muted-foreground/80 text-right",children:(()=>{const H=new Date(v.created_at),te=String(H.getDate()).padStart(2,"0"),ce=String(H.getMonth()+1).padStart(2,"0"),ae=H.getFullYear();let oe=H.getHours();const ue=String(H.getMinutes()).padStart(2,"0"),ke=oe>=12?"PM":"AM";return oe=oe%12||12,`${te}/${ce}/${ae} - ${oe}:${ue} ${ke}`})()}),p.jsx("div",{className:"mt-1 text-[10px] leading-relaxed text-foreground whitespace-pre-line",children:v.message})]})}),p.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h2",{className:"text-xl font-semibold",children:[W(),","," ",p.jsx("span",{className:"font-bold text-yellow-500",children:L})]}),p.jsxs("div",{className:"relative",children:[p.jsx(Cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),p.jsx(ct,{placeholder:"Search restaurants or cuisine...",value:t,onChange:H=>e(H.target.value),className:"pl-10"})]})]}),!s&&Z.length>0&&p.jsx(d9,{restaurants:[...Z].sort((H,te)=>(te.rating||0)-(H.rating||0)).slice(0,10).map(H=>({id:H.id,image:H.image_url,title:H.name})),bend:3,textColor:"#e5e5e5",borderRadius:.35,scrollEase:.06}),s?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(Rc,{className:"h-8 w-8 animate-spin text-primary"})}):Z.length===0?p.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No restaurants found"}):Z.map(H=>p.jsxs(We,{className:"overflow-hidden cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg",onClick:()=>C(`/restaurant/${H.id}`),children:[p.jsxs("div",{className:"relative h-48",children:[p.jsx("img",{src:H.image_url,alt:H.name,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute top-3 right-3",children:p.jsxs(Vs,{className:"bg-primary text-primary-foreground border-0",children:[p.jsx(bh,{className:"h-3 w-3 mr-1 fill-current"}),H.rating]})})]}),p.jsxs("div",{className:"p-4 space-y-2",children:[p.jsx("div",{className:"flex items-start justify-between",children:p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold text-lg text-foreground",children:H.name}),p.jsx("p",{className:"text-sm text-muted-foreground",children:H.description})]})}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[p.jsx(Vs,{variant:"secondary",className:"font-normal",children:H.cuisine_type}),p.jsxs("div",{className:"flex items-center gap-1 text-[0.625rem]",children:[p.jsx(hm,{className:"h-3 w-3"}),H.address]})]})]})]},H.id))]}),p.jsx(yy,{})]})};var up="focusScope.autoFocusOnMount",dp="focusScope.autoFocusOnUnmount",H2={bubbles:!1,cancelable:!0},h9="FocusScope",k0=N.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=t,[u,h]=N.useState(null),f=fr(s),x=fr(o),y=N.useRef(null),v=Ze(e,E=>h(E)),b=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let E=function(S){if(b.paused||!u)return;const O=S.target;u.contains(O)?y.current=O:lo(y.current,{select:!0})},I=function(S){if(b.paused||!u)return;const O=S.relatedTarget;O!==null&&(u.contains(O)||lo(y.current,{select:!0}))},R=function(S){if(document.activeElement===document.body)for(const k of S)k.removedNodes.length>0&&lo(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",I);const C=new MutationObserver(R);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",I),C.disconnect()}}},[n,u,b.paused]),N.useEffect(()=>{if(u){W2.add(b);const E=document.activeElement;if(!u.contains(E)){const R=new CustomEvent(up,H2);u.addEventListener(up,f),u.dispatchEvent(R),R.defaultPrevented||(p9(w9(sT(u)),{select:!0}),document.activeElement===E&&lo(u))}return()=>{u.removeEventListener(up,f),setTimeout(()=>{const R=new CustomEvent(dp,H2);u.addEventListener(dp,x),u.dispatchEvent(R),R.defaultPrevented||lo(E??document.body,{select:!0}),u.removeEventListener(dp,x),W2.remove(b)},0)}}},[u,f,x,b]);const A=N.useCallback(E=>{if(!r&&!n||b.paused)return;const I=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,R=document.activeElement;if(I&&R){const C=E.currentTarget,[S,O]=m9(C);S&&O?!E.shiftKey&&R===O?(E.preventDefault(),r&&lo(S,{select:!0})):E.shiftKey&&R===S&&(E.preventDefault(),r&&lo(O,{select:!0})):R===C&&E.preventDefault()}},[r,n,b.paused]);return p.jsx(Me.div,{tabIndex:-1,...l,ref:v,onKeyDown:A})});k0.displayName=h9;function p9(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(lo(n,{select:e}),document.activeElement!==r)return}function m9(t){const e=sT(t),r=$2(e,t),n=$2(e.reverse(),t);return[r,n]}function sT(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function $2(t,e){for(const r of t)if(!g9(r,{upTo:e}))return r}function g9(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function x9(t){return t instanceof HTMLInputElement&&"select"in t}function lo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&x9(t)&&e&&t.select()}}var W2=y9();function y9(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=G2(t,e),t.unshift(e)},remove(e){var r;t=G2(t,e),(r=t[0])==null||r.resume()}}}function G2(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function w9(t){return t.filter(e=>e.tagName!=="A")}var fp=0;function wy(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Y2()),document.body.insertAdjacentElement("beforeend",t[1]??Y2()),fp++,()=>{fp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fp--}},[])}function Y2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yf="right-scroll-bar-position",Xf="width-before-scroll-bar",v9="with-scroll-bars-hidden",_9="--removed-body-scroll-bar-size";function hp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function b9(t,e){var r=N.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var E9=typeof window<"u"?N.useLayoutEffect:N.useEffect,X2=new WeakMap;function C9(t,e){var r=b9(null,function(n){return t.forEach(function(s){return hp(s,n)})});return E9(function(){var n=X2.get(r);if(n){var s=new Set(n),o=new Set(t),l=r.current;s.forEach(function(u){o.has(u)||hp(u,null)}),o.forEach(function(u){s.has(u)||hp(u,l)})}X2.set(r,t)},[t]),r}function S9(t){return t}function A9(t,e){e===void 0&&(e=S9);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var l=e(o,n);return r.push(l),function(){r=r.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(n=!0;r.length;){var l=r;r=[],l.forEach(o)}r={push:function(u){return o(u)},filter:function(){return r}}},assignMedium:function(o){n=!0;var l=[];if(r.length){var u=r;r=[],u.forEach(o),l=r}var h=function(){var x=l;l=[],x.forEach(o)},f=function(){return Promise.resolve().then(h)};f(),r={push:function(x){l.push(x),f()},filter:function(x){return l=l.filter(x),r}}}};return s}function N9(t){t===void 0&&(t={});var e=A9(null);return e.options=us({async:!0,ssr:!1},t),e}var iT=function(t){var e=t.sideCar,r=qo(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,us({},r))};iT.isSideCarExport=!0;function T9(t,e){return t.useMedium(e),iT}var oT=N9(),pp=function(){},P0=N.forwardRef(function(t,e){var r=N.useRef(null),n=N.useState({onScrollCapture:pp,onWheelCapture:pp,onTouchMoveCapture:pp}),s=n[0],o=n[1],l=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,x=t.enabled,y=t.shards,v=t.sideCar,b=t.noRelative,A=t.noIsolation,E=t.inert,I=t.allowPinchZoom,R=t.as,C=R===void 0?"div":R,S=t.gapMode,O=qo(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=v,F=C9([r,e]),B=us(us({},O),s);return N.createElement(N.Fragment,null,x&&N.createElement(k,{sideCar:oT,removeScrollBar:f,shards:y,noRelative:b,noIsolation:A,inert:E,setCallbacks:o,allowPinchZoom:!!I,lockRef:r,gapMode:S}),l?N.cloneElement(N.Children.only(u),us(us({},B),{ref:F})):N.createElement(C,us({},B,{className:h,ref:F}),u))});P0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P0.classNames={fullWidth:Xf,zeroRight:Yf};var I9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function R9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=I9();return e&&t.setAttribute("nonce",e),t}function O9(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function M9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var k9=function(){var t=0,e=null;return{add:function(r){t==0&&(e=R9())&&(O9(e,r),M9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},P9=function(){var t=k9();return function(e,r){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},aT=function(){var t=P9(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},j9={left:0,top:0,right:0,gap:0},mp=function(t){return parseInt(t||"",10)||0},D9=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[mp(r),mp(n),mp(s)]},L9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return j9;var e=D9(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},B9=aT(),Zl="data-scroll-locked",F9=function(t,e,r,n){var s=t.left,o=t.top,l=t.right,u=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(v9,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Zl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yf,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(Xf,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(Yf," .").concat(Yf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Xf," .").concat(Xf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Zl,`] {
    `).concat(_9,": ").concat(u,`px;
  }
`)},q2=function(){var t=parseInt(document.body.getAttribute(Zl)||"0",10);return isFinite(t)?t:0},U9=function(){N.useEffect(function(){return document.body.setAttribute(Zl,(q2()+1).toString()),function(){var t=q2()-1;t<=0?document.body.removeAttribute(Zl):document.body.setAttribute(Zl,t.toString())}},[])},z9=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;U9();var o=N.useMemo(function(){return L9(s)},[s]);return N.createElement(B9,{styles:F9(o,!e,s,r?"":"!important")})},tg=!1;if(typeof window<"u")try{var Sf=Object.defineProperty({},"passive",{get:function(){return tg=!0,!0}});window.addEventListener("test",Sf,Sf),window.removeEventListener("test",Sf,Sf)}catch{tg=!1}var wl=tg?{passive:!1}:!1,V9=function(t){return t.tagName==="TEXTAREA"},lT=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!V9(t)&&r[e]==="visible")},H9=function(t){return lT(t,"overflowY")},$9=function(t){return lT(t,"overflowX")},K2=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=cT(t,n);if(s){var o=uT(t,n),l=o[1],u=o[2];if(l>u)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},W9=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},G9=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},cT=function(t,e){return t==="v"?H9(e):$9(e)},uT=function(t,e){return t==="v"?W9(e):G9(e)},Y9=function(t,e){return t==="h"&&e==="rtl"?-1:1},X9=function(t,e,r,n,s){var o=Y9(t,window.getComputedStyle(e).direction),l=o*n,u=r.target,h=e.contains(u),f=!1,x=l>0,y=0,v=0;do{if(!u)break;var b=uT(t,u),A=b[0],E=b[1],I=b[2],R=E-I-o*A;(A||R)&&cT(t,u)&&(y+=R,v+=A);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(x&&(Math.abs(y)<1||!s)||!x&&(Math.abs(v)<1||!s))&&(f=!0),f},Af=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Q2=function(t){return[t.deltaX,t.deltaY]},Z2=function(t){return t&&"current"in t?t.current:t},q9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},K9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Q9=0,vl=[];function Z9(t){var e=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),s=N.useState(Q9++)[0],o=N.useState(aT)[0],l=N.useRef(t);N.useEffect(function(){l.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var E=Ux([t.lockRef.current],(t.shards||[]).map(Z2),!0).filter(Boolean);return E.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=N.useCallback(function(E,I){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!l.current.allowPinchZoom;var R=Af(E),C=r.current,S="deltaX"in E?E.deltaX:C[0]-R[0],O="deltaY"in E?E.deltaY:C[1]-R[1],k,F=E.target,B=Math.abs(S)>Math.abs(O)?"h":"v";if("touches"in E&&B==="h"&&F.type==="range")return!1;var P=K2(B,F);if(!P)return!0;if(P?k=B:(k=B==="v"?"h":"v",P=K2(B,F)),!P)return!1;if(!n.current&&"changedTouches"in E&&(S||O)&&(n.current=k),!k)return!0;var L=n.current||k;return X9(L,I,E,L==="h"?S:O,!0)},[]),h=N.useCallback(function(E){var I=E;if(!(!vl.length||vl[vl.length-1]!==o)){var R="deltaY"in I?Q2(I):Af(I),C=e.current.filter(function(k){return k.name===I.type&&(k.target===I.target||I.target===k.shadowParent)&&q9(k.delta,R)})[0];if(C&&C.should){I.cancelable&&I.preventDefault();return}if(!C){var S=(l.current.shards||[]).map(Z2).filter(Boolean).filter(function(k){return k.contains(I.target)}),O=S.length>0?u(I,S[0]):!l.current.noIsolation;O&&I.cancelable&&I.preventDefault()}}},[]),f=N.useCallback(function(E,I,R,C){var S={name:E,delta:I,target:R,should:C,shadowParent:J9(R)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(O){return O!==S})},1)},[]),x=N.useCallback(function(E){r.current=Af(E),n.current=void 0},[]),y=N.useCallback(function(E){f(E.type,Q2(E),E.target,u(E,t.lockRef.current))},[]),v=N.useCallback(function(E){f(E.type,Af(E),E.target,u(E,t.lockRef.current))},[]);N.useEffect(function(){return vl.push(o),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,wl),document.addEventListener("touchmove",h,wl),document.addEventListener("touchstart",x,wl),function(){vl=vl.filter(function(E){return E!==o}),document.removeEventListener("wheel",h,wl),document.removeEventListener("touchmove",h,wl),document.removeEventListener("touchstart",x,wl)}},[]);var b=t.removeScrollBar,A=t.inert;return N.createElement(N.Fragment,null,A?N.createElement(o,{styles:K9(s)}):null,b?N.createElement(z9,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function J9(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const eB=T9(oT,Z9);var j0=N.forwardRef(function(t,e){return N.createElement(P0,us({},t,{ref:e,sideCar:eB}))});j0.classNames=P0.classNames;var tB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_l=new WeakMap,Nf=new WeakMap,Tf={},gp=0,dT=function(t){return t&&(t.host||dT(t.parentNode))},rB=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=dT(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},nB=function(t,e,r,n){var s=rB(e,Array.isArray(t)?t:[t]);Tf[r]||(Tf[r]=new WeakMap);var o=Tf[r],l=[],u=new Set,h=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var x=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))x(v);else try{var b=v.getAttribute(n),A=b!==null&&b!=="false",E=(_l.get(v)||0)+1,I=(o.get(v)||0)+1;_l.set(v,E),o.set(v,I),l.push(v),E===1&&A&&Nf.set(v,!0),I===1&&v.setAttribute(r,"true"),A||v.setAttribute(n,"true")}catch(R){console.error("aria-hidden: cannot operate on ",v,R)}})};return x(e),u.clear(),gp++,function(){l.forEach(function(y){var v=_l.get(y)-1,b=o.get(y)-1;_l.set(y,v),o.set(y,b),v||(Nf.has(y)||y.removeAttribute(n),Nf.delete(y)),b||y.removeAttribute(r)}),gp--,gp||(_l=new WeakMap,_l=new WeakMap,Nf=new WeakMap,Tf={})}},vy=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=tB(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),nB(n,s,r,"aria-hidden")):function(){return null}},D0="Dialog",[fT,dV]=On(D0),[sB,Xs]=fT(D0),hT=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:l=!0}=t,u=N.useRef(null),h=N.useRef(null),[f,x]=Vi({prop:n,defaultProp:s??!1,onChange:o,caller:D0});return p.jsx(sB,{scope:e,triggerRef:u,contentRef:h,contentId:pi(),titleId:pi(),descriptionId:pi(),open:f,onOpenChange:x,onOpenToggle:N.useCallback(()=>x(y=>!y),[x]),modal:l,children:r})};hT.displayName=D0;var pT="DialogTrigger",mT=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Xs(pT,r),o=Ze(e,s.triggerRef);return p.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ey(s.open),...n,ref:o,onClick:Ee(t.onClick,s.onOpenToggle)})});mT.displayName=pT;var _y="DialogPortal",[iB,gT]=fT(_y,{forceMount:void 0}),xT=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,o=Xs(_y,e);return p.jsx(iB,{scope:e,forceMount:r,children:N.Children.map(n,l=>p.jsx(tn,{present:r||o.open,children:p.jsx(bd,{asChild:!0,container:s,children:l})}))})};xT.displayName=_y;var zh="DialogOverlay",yT=N.forwardRef((t,e)=>{const r=gT(zh,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Xs(zh,t.__scopeDialog);return o.modal?p.jsx(tn,{present:n||o.open,children:p.jsx(aB,{...s,ref:e})}):null});yT.displayName=zh;var oB=Ua("DialogOverlay.RemoveScroll"),aB=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Xs(zh,r);return p.jsx(j0,{as:oB,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Me.div,{"data-state":Ey(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ha="DialogContent",wT=N.forwardRef((t,e)=>{const r=gT(Ha,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=Xs(Ha,t.__scopeDialog);return p.jsx(tn,{present:n||o.open,children:o.modal?p.jsx(lB,{...s,ref:e}):p.jsx(cB,{...s,ref:e})})});wT.displayName=Ha;var lB=N.forwardRef((t,e)=>{const r=Xs(Ha,t.__scopeDialog),n=N.useRef(null),s=Ze(e,r.contentRef,n);return N.useEffect(()=>{const o=n.current;if(o)return vy(o)},[]),p.jsx(vT,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ee(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Ee(t.onFocusOutside,o=>o.preventDefault())})}),cB=N.forwardRef((t,e)=>{const r=Xs(Ha,t.__scopeDialog),n=N.useRef(!1),s=N.useRef(!1);return p.jsx(vT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var l,u;(l=t.onCloseAutoFocus)==null||l.call(t,o),o.defaultPrevented||(n.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;((f=r.triggerRef.current)==null?void 0:f.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),vT=N.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=t,u=Xs(Ha,r),h=N.useRef(null),f=Ze(e,h);return wy(),p.jsxs(p.Fragment,{children:[p.jsx(k0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:p.jsx(Tc,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ey(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(uB,{titleId:u.titleId}),p.jsx(fB,{contentRef:h,descriptionId:u.descriptionId})]})]})}),by="DialogTitle",_T=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Xs(by,r);return p.jsx(Me.h2,{id:s.titleId,...n,ref:e})});_T.displayName=by;var bT="DialogDescription",ET=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Xs(bT,r);return p.jsx(Me.p,{id:s.descriptionId,...n,ref:e})});ET.displayName=bT;var CT="DialogClose",ST=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Xs(CT,r);return p.jsx(Me.button,{type:"button",...n,ref:e,onClick:Ee(t.onClick,()=>s.onOpenChange(!1))})});ST.displayName=CT;function Ey(t){return t?"open":"closed"}var AT="DialogTitleWarning",[fV,NT]=b8(AT,{contentName:Ha,titleName:by,docsSlug:"dialog"}),uB=({titleId:t})=>{const e=NT(AT),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},dB="DialogDescriptionWarning",fB=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NT(dB).contentName}}.`;return N.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},hB=hT,pB=mT,mB=xT,TT=yT,IT=wT,RT=_T,OT=ET,gB=ST;const wi=hB,MT=pB,xB=mB,kT=N.forwardRef(({className:t,...e},r)=>p.jsx(TT,{ref:r,className:Oe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));kT.displayName=TT.displayName;const Ys=N.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(xB,{children:[p.jsx(kT,{}),p.jsxs(IT,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,p.jsxs(gB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[p.jsx(TC,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ys.displayName=IT.displayName;const Yi=({className:t,...e})=>p.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Yi.displayName="DialogHeader";const rg=({className:t,...e})=>p.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});rg.displayName="DialogFooter";const Xi=N.forwardRef(({className:t,...e},r)=>p.jsx(RT,{ref:r,className:Oe("text-lg font-semibold leading-none tracking-tight",t),...e}));Xi.displayName=RT.displayName;const PT=N.forwardRef(({className:t,...e},r)=>p.jsx(OT,{ref:r,className:Oe("text-sm text-muted-foreground",t),...e}));PT.displayName=OT.displayName;const yB=()=>{const{id:t}=Aj(),e=hn(),[r,n]=N.useState(null),[s,o]=N.useState([]),[l,u]=N.useState(""),[h,f]=N.useState(!0),[x,y]=N.useState([]),[v,b]=N.useState("dine_in"),[A,E]=N.useState(null),[I,R]=N.useState(!1);N.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{const[P,L]=await Promise.all([xe.from("restaurants").select("*").eq("id",t).single(),xe.from("menu_items").select("*").eq("restaurant_id",t).eq("available",!0)]);if(P.error)throw P.error;if(L.error)throw L.error;n(P.data),o(L.data||[])}catch(P){console.error("Error fetching data:",P),Ce.error("Failed to load restaurant details")}finally{f(!1)}};if(h)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx(Rc,{className:"h-8 w-8 animate-spin text-primary"})});if(!r)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),p.jsx(Be,{onClick:()=>e("/home"),children:"Back to Home"})]})});const S=P=>{y(L=>L.find(q=>q.id===P.id)?L.map(q=>q.id===P.id?{...q,quantity:q.quantity+1}:q):[...L,{id:P.id,name:P.name,price:P.price,quantity:1}])},O=P=>{y(L=>{const W=L.find(q=>q.id===P);return W&&W.quantity>1?L.map(q=>q.id===P?{...q,quantity:q.quantity-1}:q):L.filter(q=>q.id!==P)})},k=x.reduce((P,L)=>P+L.price*L.quantity,0),F=x.reduce((P,L)=>P+L.quantity,0),B=()=>{if(x.length===0){Ce.error("Please add items to your cart");return}e("/payment",{state:{cart:x,restaurant:r,orderType:v,totalAmount:k}})};return p.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[p.jsxs("div",{className:"relative h-64",children:[p.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}),p.jsx(Be,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-black/50 text-white hover:bg-black/70",onClick:()=>e(-1),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsx(Be,{variant:"secondary",size:"sm",className:"absolute bottom-4 right-4 bg-black/65 text-white hover:bg-black/80 border-none px-3 py-1 text-xs rounded-full",onClick:()=>{const L=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.address||r.name)}`;window.open(L,"_blank","noopener,noreferrer")},children:"View on Map"})]}),p.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r.name}),p.jsx("p",{className:"text-muted-foreground",children:r.description})]}),p.jsxs(Vs,{className:"bg-primary text-primary-foreground border-0",children:[p.jsx(bh,{className:"h-3 w-3 mr-1 fill-current"}),r.rating]})]}),p.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted-foreground",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(hm,{className:"h-4 w-4"}),r.address]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(gx,{className:"h-4 w-4"}),r.open_hours]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(CC,{className:"h-4 w-4"}),r.phone]})]})]}),p.jsxs(We,{className:"p-4",children:[p.jsx("h3",{className:"font-semibold mb-3",children:"Order Type"}),p.jsx(rT,{value:v,onValueChange:P=>b(P),children:p.jsxs(xy,{className:"grid w-full grid-cols-2",children:[p.jsxs(fd,{value:"dine_in",children:[p.jsx(yx,{className:"h-4 w-4 mr-2"}),"Dine In"]}),p.jsxs(fd,{value:"takeaway",children:[p.jsx(_h,{className:"h-4 w-4 mr-2"}),"Takeaway"]})]})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Menu"}),p.jsx("div",{className:"mt-2",children:p.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),placeholder:"Search menu items...",className:"w-full px-3 py-2 rounded-md border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary"})}),s.filter(P=>{const L=l.toLowerCase().trim();return L?P.name.toLowerCase().includes(L)||(P.description||"").toLowerCase().includes(L):!0}).map(P=>{const L=x.find(W=>W.id===P.id);return p.jsx(We,{className:"overflow-hidden",children:p.jsxs("div",{className:"flex gap-4 p-4",children:[p.jsx("button",{type:"button",className:"focus:outline-none",onClick:()=>E(P),children:p.jsx("img",{src:P.image_url,alt:P.name,className:"w-24 h-24 rounded-lg object-cover transition-transform duration-200 hover:scale-105"})}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold",children:P.name}),p.jsx("p",{className:"text-sm text-muted-foreground",children:P.description})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-semibold text-primary",children:[P.price.toLocaleString()," MMK"]}),L?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Be,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>O(P.id),children:p.jsx(_M,{className:"h-4 w-4"})}),p.jsx("span",{className:"w-8 text-center font-medium",children:L.quantity}),p.jsx(Be,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>S(P),children:p.jsx(Ra,{className:"h-4 w-4"})})]}):p.jsxs(Be,{size:"sm",variant:"outline",onClick:()=>S(P),children:[p.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})]})},P.id)})]})]}),p.jsx(wi,{open:!!A,onOpenChange:P=>!P&&E(null),children:p.jsx(Ys,{className:"max-w-sm p-0 border-0 bg-transparent shadow-none",children:A&&p.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[p.jsx("img",{src:A.image_url,alt:A.name,className:"w-full h-[360px] object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),p.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4 flex flex-col gap-2 text-white",children:[p.jsxs("div",{className:"flex items-baseline justify-between gap-3",children:[p.jsx("h3",{className:"text-lg font-semibold leading-tight",children:A.name}),p.jsxs("span",{className:"text-sm font-semibold px-2 py-1 rounded-full bg-white/12 backdrop-blur",children:[A.price.toLocaleString()," MMK"]})]}),A.description&&p.jsx("p",{className:"text-xs text-white/80 line-clamp-2",children:A.description}),p.jsx("div",{className:"mt-2 flex justify-end",children:p.jsxs(Be,{size:"sm",className:"luxury-gradient px-5 py-2 text-sm font-medium shadow-md hover:shadow-lg transition-all",onClick:()=>{S(A),E(null)},children:[p.jsx(Ra,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})})]})]})})}),x.length>0&&p.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-4",children:p.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"text-sm text-muted-foreground",children:[F," items"]}),p.jsxs("div",{className:"text-lg font-bold",children:[k.toLocaleString()," MMK"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Be,{variant:"outline",size:"lg",onClick:()=>R(!0),children:"View Orders"}),p.jsx(Be,{onClick:B,className:"luxury-gradient",size:"lg",children:"Pay"})]})]})}),p.jsx(wi,{open:I,onOpenChange:R,children:p.jsxs(Ys,{className:"max-w-md",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:"Your Order Summary"})}),x.length===0?p.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in your cart."}):p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"space-y-1",children:x.map(P=>p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-medium",children:P.name}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.quantity," x ",P.price.toLocaleString()," MMK"]})]}),p.jsxs("span",{className:"font-semibold",children:[(P.price*P.quantity).toLocaleString()," MMK"]})]},P.id))}),p.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[p.jsxs("span",{className:"text-sm text-muted-foreground",children:["Total (",F," items)"]}),p.jsxs("span",{className:"text-lg font-bold text-primary",children:[k.toLocaleString()," MMK"]})]})]})]})})]})};function Cy(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Sy="Radio",[wB,jT]=On(Sy),[vB,_B]=wB(Sy),DT=N.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:o,disabled:l,value:u="on",onCheck:h,form:f,...x}=t,[y,v]=N.useState(null),b=Ze(e,I=>v(I)),A=N.useRef(!1),E=y?f||!!y.closest("form"):!0;return p.jsxs(vB,{scope:r,checked:s,disabled:l,children:[p.jsx(Me.button,{type:"button",role:"radio","aria-checked":s,"data-state":UT(s),"data-disabled":l?"":void 0,disabled:l,value:u,...x,ref:b,onClick:Ee(t.onClick,I=>{s||h==null||h(),E&&(A.current=I.isPropagationStopped(),A.current||I.stopPropagation())})}),E&&p.jsx(FT,{control:y,bubbles:!A.current,name:n,value:u,checked:s,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});DT.displayName=Sy;var LT="RadioIndicator",BT=N.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...s}=t,o=_B(LT,r);return p.jsx(tn,{present:n||o.checked,children:p.jsx(Me.span,{"data-state":UT(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e})})});BT.displayName=LT;var bB="RadioBubbleInput",FT=N.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const l=N.useRef(null),u=Ze(l,o),h=Cy(r),f=Nx(e);return N.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(h!==r&&b){const A=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(A)}},[h,r,n]),p.jsx(Me.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:u,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});FT.displayName=bB;function UT(t){return t?"checked":"unchecked"}var EB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L0="RadioGroup",[CB,hV]=On(L0,[Bc,jT]),zT=Bc(),VT=jT(),[SB,AB]=CB(L0),HT=N.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:o,required:l=!1,disabled:u=!1,orientation:h,dir:f,loop:x=!0,onValueChange:y,...v}=t,b=zT(r),A=Lc(f),[E,I]=Vi({prop:o,defaultProp:s??null,onChange:y,caller:L0});return p.jsx(SB,{scope:r,name:n,required:l,disabled:u,value:E,onValueChange:I,children:p.jsx(py,{asChild:!0,...b,orientation:h,dir:A,loop:x,children:p.jsx(Me.div,{role:"radiogroup","aria-required":l,"aria-orientation":h,"data-disabled":u?"":void 0,dir:A,...v,ref:e})})})});HT.displayName=L0;var $T="RadioGroupItem",WT=N.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...s}=t,o=AB($T,r),l=o.disabled||n,u=zT(r),h=VT(r),f=N.useRef(null),x=Ze(e,f),y=o.value===s.value,v=N.useRef(!1);return N.useEffect(()=>{const b=E=>{EB.includes(E.key)&&(v.current=!0)},A=()=>v.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",A),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",A)}},[]),p.jsx(my,{asChild:!0,...u,focusable:!l,active:y,children:p.jsx(DT,{disabled:l,required:o.required,checked:y,...h,...s,name:o.name,ref:x,onCheck:()=>o.onValueChange(s.value),onKeyDown:Ee(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:Ee(s.onFocus,()=>{var b;v.current&&((b=f.current)==null||b.click())})})})});WT.displayName=$T;var NB="RadioGroupIndicator",GT=N.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,s=VT(r);return p.jsx(BT,{...s,...n,ref:e})});GT.displayName=NB;var YT=HT,XT=WT,TB=GT;const qT=N.forwardRef(({className:t,...e},r)=>p.jsx(YT,{className:Oe("grid gap-2",t),...e,ref:r}));qT.displayName=YT.displayName;const KT=N.forwardRef(({className:t,...e},r)=>p.jsx(XT,{ref:r,className:Oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:p.jsx(TB,{className:"flex items-center justify-center",children:p.jsx(wC,{className:"h-2.5 w-2.5 fill-current text-current"})})}));KT.displayName=XT.displayName;const IB=[{id:"mpu",name:"MPU Card",icon:xM},{id:"kbzpay",name:"KBZPay",icon:AM},{id:"wavepay",name:"WavePay",icon:NM}],RB=()=>{const t=Xo(),e=hn(),{cart:r,restaurant:n,orderType:s,totalAmount:o}=t.state||{},[l,u]=N.useState("kbzpay"),[h,f]=N.useState(!1);if(!r||!n)return e("/home"),null;const x=async()=>{f(!0),await new Promise(y=>setTimeout(y,2e3));try{const{data:{user:y}}=await xe.auth.getUser();if(!y){Ce.error("Please sign in to complete your order"),e("/auth");return}const v=`ALAN-${Date.now()}-${n.id}-${y.id.substring(0,8)}`,{data:b,error:A}=await xe.from("orders").insert({customer_id:y.id,restaurant_id:n.id,order_type:s,payment_method:l,total_amount:o,status:"paid",qr_code:v,order_items:r}).select().single();if(A){console.error("Order creation error:",A),Ce.error("Failed to create order. Please try again.");return}Ce.success("Payment successful!"),e("/confirmation",{state:{order:b,restaurant:n,orderType:s}})}catch(y){console.error("Payment error:",y),Ce.error("Failed to process payment. Please try again.")}finally{f(!1)}};return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:p.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-4",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsx("h1",{className:"text-2xl font-bold",children:"Payment"})]})}),p.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[p.jsxs(We,{className:"p-4 space-y-3",children:[p.jsx("h2",{className:"font-semibold text-lg",children:"Order Summary"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),p.jsx("span",{className:"font-medium",children:n.name})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),p.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Items"}),p.jsxs("span",{className:"font-medium",children:[r.length," item(s)"]})]}),p.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[p.jsx("span",{className:"font-semibold",children:"Total Amount"}),p.jsxs("span",{className:"font-bold text-primary text-lg",children:[o.toLocaleString()," MMK"]})]})]})]}),p.jsxs(We,{className:"p-4 space-y-4",children:[p.jsx("h2",{className:"font-semibold text-lg",children:"Payment Method"}),p.jsx(qT,{value:l,onValueChange:y=>u(y),children:IB.map(y=>{const v=y.icon;return p.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>u(y.id),children:[p.jsx(KT,{value:y.id,id:y.id}),p.jsxs(Ke,{htmlFor:y.id,className:"flex items-center gap-3 cursor-pointer flex-1",children:[p.jsx(v,{className:"h-5 w-5 text-primary"}),p.jsx("span",{className:"font-medium",children:y.name})]})]},y.id)})})]}),p.jsxs(We,{className:"p-4 space-y-3",children:[p.jsx("h2",{className:"font-semibold text-lg",children:"Items"}),r.map(y=>p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsxs("span",{children:[y.name," x ",y.quantity]}),p.jsxs("span",{className:"font-medium",children:[(y.price*y.quantity).toLocaleString()," MMK"]})]},y.id))]}),p.jsx(Be,{onClick:x,disabled:h,className:"w-full luxury-gradient h-12 text-base",size:"lg",children:h?p.jsxs(p.Fragment,{children:[p.jsx(Rc,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing Payment..."]}):`Pay ${o.toLocaleString()} MMK`}),p.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"This is a mock payment. No actual transaction will occur."})]})]})};var OB=Object.defineProperty,Vh=Object.getOwnPropertySymbols,QT=Object.prototype.hasOwnProperty,ZT=Object.prototype.propertyIsEnumerable,J2=(t,e,r)=>e in t?OB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ng=(t,e)=>{for(var r in e||(e={}))QT.call(e,r)&&J2(t,r,e[r]);if(Vh)for(var r of Vh(e))ZT.call(e,r)&&J2(t,r,e[r]);return t},sg=(t,e)=>{var r={};for(var n in t)QT.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Vh)for(var n of Vh(t))e.indexOf(n)<0&&ZT.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $a;(t=>{const e=class ot{constructor(h,f,x,y){if(this.version=h,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],h<ot.MIN_VERSION||h>ot.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let v=[];for(let A=0;A<this.size;A++)v.push(!1);for(let A=0;A<this.size;A++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(x);if(this.drawCodewords(b),y==-1){let A=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const I=this.getPenaltyScore();I<A&&(y=E,A=I),this.applyMask(E)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(h,f){const x=t.QrSegment.makeSegments(h);return ot.encodeSegments(x,f)}static encodeBinary(h,f){const x=t.QrSegment.makeBytes(h);return ot.encodeSegments([x],f)}static encodeSegments(h,f,x=1,y=40,v=-1,b=!0){if(!(ot.MIN_VERSION<=x&&x<=y&&y<=ot.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let A,E;for(A=x;;A++){const S=ot.getNumDataCodewords(A,f)*8,O=l.getTotalBits(h,A);if(O<=S){E=O;break}if(A>=y)throw new RangeError("Data too long")}for(const S of[ot.Ecc.MEDIUM,ot.Ecc.QUARTILE,ot.Ecc.HIGH])b&&E<=ot.getNumDataCodewords(A,S)*8&&(f=S);let I=[];for(const S of h){r(S.mode.modeBits,4,I),r(S.numChars,S.mode.numCharCountBits(A),I);for(const O of S.getData())I.push(O)}s(I.length==E);const R=ot.getNumDataCodewords(A,f)*8;s(I.length<=R),r(0,Math.min(4,R-I.length),I),r(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let S=236;I.length<R;S^=253)r(S,8,I);let C=[];for(;C.length*8<I.length;)C.push(0);return I.forEach((S,O)=>C[O>>>3]|=S<<7-(O&7)),new ot(A,f,C,v)}getModule(h,f){return 0<=h&&h<this.size&&0<=f&&f<this.size&&this.modules[f][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),f=h.length;for(let x=0;x<f;x++)for(let y=0;y<f;y++)x==0&&y==0||x==0&&y==f-1||x==f-1&&y==0||this.drawAlignmentPattern(h[x],h[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const f=this.errorCorrectionLevel.formatBits<<3|h;let x=f;for(let v=0;v<10;v++)x=x<<1^(x>>>9)*1335;const y=(f<<10|x)^21522;s(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,n(y,v));this.setFunctionModule(8,7,n(y,6)),this.setFunctionModule(8,8,n(y,7)),this.setFunctionModule(7,8,n(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,n(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,n(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,n(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let x=0;x<12;x++)h=h<<1^(h>>>11)*7973;const f=this.version<<12|h;s(f>>>18==0);for(let x=0;x<18;x++){const y=n(f,x),v=this.size-11+x%3,b=Math.floor(x/3);this.setFunctionModule(v,b,y),this.setFunctionModule(b,v,y)}}drawFinderPattern(h,f){for(let x=-4;x<=4;x++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(x)),b=h+y,A=f+x;0<=b&&b<this.size&&0<=A&&A<this.size&&this.setFunctionModule(b,A,v!=2&&v!=4)}}drawAlignmentPattern(h,f){for(let x=-2;x<=2;x++)for(let y=-2;y<=2;y++)this.setFunctionModule(h+y,f+x,Math.max(Math.abs(y),Math.abs(x))!=1)}setFunctionModule(h,f,x){this.modules[f][h]=x,this.isFunction[f][h]=!0}addEccAndInterleave(h){const f=this.version,x=this.errorCorrectionLevel;if(h.length!=ot.getNumDataCodewords(f,x))throw new RangeError("Invalid argument");const y=ot.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][f],v=ot.ECC_CODEWORDS_PER_BLOCK[x.ordinal][f],b=Math.floor(ot.getNumRawDataModules(f)/8),A=y-b%y,E=Math.floor(b/y);let I=[];const R=ot.reedSolomonComputeDivisor(v);for(let S=0,O=0;S<y;S++){let k=h.slice(O,O+E-v+(S<A?0:1));O+=k.length;const F=ot.reedSolomonComputeRemainder(k,R);S<A&&k.push(0),I.push(k.concat(F))}let C=[];for(let S=0;S<I[0].length;S++)I.forEach((O,k)=>{(S!=E-v||k>=A)&&C.push(O[S])});return s(C.length==b),C}drawCodewords(h){if(h.length!=Math.floor(ot.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const b=x-v,E=(x+1&2)==0?this.size-1-y:y;!this.isFunction[E][b]&&f<h.length*8&&(this.modules[E][b]=n(h[f>>>3],7-(f&7)),f++)}}s(f==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let x=0;x<this.size;x++){let y;switch(h){case 0:y=(x+f)%2==0;break;case 1:y=f%2==0;break;case 2:y=x%3==0;break;case 3:y=(x+f)%3==0;break;case 4:y=(Math.floor(x/3)+Math.floor(f/2))%2==0;break;case 5:y=x*f%2+x*f%3==0;break;case 6:y=(x*f%2+x*f%3)%2==0;break;case 7:y=((x+f)%2+x*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][x]&&y&&(this.modules[f][x]=!this.modules[f][x])}}getPenaltyScore(){let h=0;for(let v=0;v<this.size;v++){let b=!1,A=0,E=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[v][I]==b?(A++,A==5?h+=ot.PENALTY_N1:A>5&&h++):(this.finderPenaltyAddHistory(A,E),b||(h+=this.finderPenaltyCountPatterns(E)*ot.PENALTY_N3),b=this.modules[v][I],A=1);h+=this.finderPenaltyTerminateAndCount(b,A,E)*ot.PENALTY_N3}for(let v=0;v<this.size;v++){let b=!1,A=0,E=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][v]==b?(A++,A==5?h+=ot.PENALTY_N1:A>5&&h++):(this.finderPenaltyAddHistory(A,E),b||(h+=this.finderPenaltyCountPatterns(E)*ot.PENALTY_N3),b=this.modules[I][v],A=1);h+=this.finderPenaltyTerminateAndCount(b,A,E)*ot.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let b=0;b<this.size-1;b++){const A=this.modules[v][b];A==this.modules[v][b+1]&&A==this.modules[v+1][b]&&A==this.modules[v+1][b+1]&&(h+=ot.PENALTY_N2)}let f=0;for(const v of this.modules)f=v.reduce((b,A)=>b+(A?1:0),f);const x=this.size*this.size,y=Math.ceil(Math.abs(f*20-x*10)/x)-1;return s(0<=y&&y<=9),h+=y*ot.PENALTY_N4,s(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let x=[6];for(let y=this.size-7;x.length<h;y-=f)x.splice(1,0,y);return x}}static getNumRawDataModules(h){if(h<ot.MIN_VERSION||h>ot.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*h+128)*h+64;if(h>=2){const x=Math.floor(h/7)+2;f-=(25*x-10)*x-55,h>=7&&(f-=36)}return s(208<=f&&f<=29648),f}static getNumDataCodewords(h,f){return Math.floor(ot.getNumRawDataModules(h)/8)-ot.ECC_CODEWORDS_PER_BLOCK[f.ordinal][h]*ot.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let f=[];for(let y=0;y<h-1;y++)f.push(0);f.push(1);let x=1;for(let y=0;y<h;y++){for(let v=0;v<f.length;v++)f[v]=ot.reedSolomonMultiply(f[v],x),v+1<f.length&&(f[v]^=f[v+1]);x=ot.reedSolomonMultiply(x,2)}return f}static reedSolomonComputeRemainder(h,f){let x=f.map(y=>0);for(const y of h){const v=y^x.shift();x.push(0),f.forEach((b,A)=>x[A]^=ot.reedSolomonMultiply(b,v))}return x}static reedSolomonMultiply(h,f){if(h>>>8||f>>>8)throw new RangeError("Byte out of range");let x=0;for(let y=7;y>=0;y--)x=x<<1^(x>>>7)*285,x^=(f>>>y&1)*h;return s(x>>>8==0),x}finderPenaltyCountPatterns(h){const f=h[1];s(f<=this.size*3);const x=f>0&&h[2]==f&&h[3]==f*3&&h[4]==f&&h[5]==f;return(x&&h[0]>=f*4&&h[6]>=f?1:0)+(x&&h[6]>=f*4&&h[0]>=f?1:0)}finderPenaltyTerminateAndCount(h,f,x){return h&&(this.finderPenaltyAddHistory(f,x),f=0),f+=this.size,this.finderPenaltyAddHistory(f,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(h,f){f[0]==0&&(h+=this.size),f.pop(),f.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(u,h,f){if(h<0||h>31||u>>>h)throw new RangeError("Value out of range");for(let x=h-1;x>=0;x--)f.push(u>>>x&1)}function n(u,h){return(u>>>h&1)!=0}function s(u){if(!u)throw new Error("Assertion error")}const o=class rr{constructor(h,f,x){if(this.mode=h,this.numChars=f,this.bitData=x,f<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(h){let f=[];for(const x of h)r(x,8,f);return new rr(rr.Mode.BYTE,h.length,f)}static makeNumeric(h){if(!rr.isNumeric(h))throw new RangeError("String contains non-numeric characters");let f=[];for(let x=0;x<h.length;){const y=Math.min(h.length-x,3);r(parseInt(h.substring(x,x+y),10),y*3+1,f),x+=y}return new rr(rr.Mode.NUMERIC,h.length,f)}static makeAlphanumeric(h){if(!rr.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],x;for(x=0;x+2<=h.length;x+=2){let y=rr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(x))*45;y+=rr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(x+1)),r(y,11,f)}return x<h.length&&r(rr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(x)),6,f),new rr(rr.Mode.ALPHANUMERIC,h.length,f)}static makeSegments(h){return h==""?[]:rr.isNumeric(h)?[rr.makeNumeric(h)]:rr.isAlphanumeric(h)?[rr.makeAlphanumeric(h)]:[rr.makeBytes(rr.toUtf8ByteArray(h))]}static makeEci(h){let f=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)r(h,8,f);else if(h<16384)r(2,2,f),r(h,14,f);else if(h<1e6)r(6,3,f),r(h,21,f);else throw new RangeError("ECI assignment value out of range");return new rr(rr.Mode.ECI,0,f)}static isNumeric(h){return rr.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return rr.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,f){let x=0;for(const y of h){const v=y.mode.numCharCountBits(f);if(y.numChars>=1<<v)return 1/0;x+=4+v+y.bitData.length}return x}static toUtf8ByteArray(h){h=encodeURI(h);let f=[];for(let x=0;x<h.length;x++)h.charAt(x)!="%"?f.push(h.charCodeAt(x)):(f.push(parseInt(h.substring(x+1,x+3),16)),x+=2);return f}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;t.QrSegment=o})($a||($a={}));(t=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})($a||($a={}));(t=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})($a||($a={}));var Bl=$a;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var MB={L:Bl.QrCode.Ecc.LOW,M:Bl.QrCode.Ecc.MEDIUM,Q:Bl.QrCode.Ecc.QUARTILE,H:Bl.QrCode.Ecc.HIGH},JT=128,e3="L",t3="#FFFFFF",r3="#000000",n3=!1,s3=1,kB=4,PB=0,jB=.1;function i3(t,e=0){const r=[];return t.forEach(function(n,s){let o=null;n.forEach(function(l,u){if(!l&&o!==null){r.push(`M${o+e} ${s+e}h${u-o}v1H${o+e}z`),o=null;return}if(u===n.length-1){if(!l)return;o===null?r.push(`M${u+e},${s+e} h1v1H${u+e}z`):r.push(`M${o+e},${s+e} h${u+1-o}v1H${o+e}z`);return}l&&o===null&&(o=u)})}),r.join("")}function o3(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function DB(t,e,r,n){if(n==null)return null;const s=t.length+r*2,o=Math.floor(e*jB),l=s/e,u=(n.width||o)*l,h=(n.height||o)*l,f=n.x==null?t.length/2-u/2:n.x*l,x=n.y==null?t.length/2-h/2:n.y*l,y=n.opacity==null?1:n.opacity;let v=null;if(n.excavate){let A=Math.floor(f),E=Math.floor(x),I=Math.ceil(u+f-A),R=Math.ceil(h+x-E);v={x:A,y:E,w:I,h:R}}const b=n.crossOrigin;return{x:f,y:x,h,w:u,excavation:v,opacity:y,crossOrigin:b}}function LB(t,e){return e!=null?Math.max(Math.floor(e),0):t?kB:PB}function a3({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:o,size:l,boostLevel:u}){let h=fe.useMemo(()=>{const A=(Array.isArray(t)?t:[t]).reduce((E,I)=>(E.push(...Bl.QrSegment.makeSegments(I)),E),[]);return Bl.QrCode.encodeSegments(A,MB[e],r,void 0,void 0,u)},[t,e,r,u]);const{cells:f,margin:x,numCells:y,calculatedImageSettings:v}=fe.useMemo(()=>{let b=h.getModules();const A=LB(n,s),E=b.length+A*2,I=DB(b,l,A,o);return{cells:b,margin:A,numCells:E,calculatedImageSettings:I}},[h,l,o,n,s]);return{qrcode:h,margin:x,cells:f,numCells:y,calculatedImageSettings:v}}var BB=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),FB=fe.forwardRef(function(e,r){const n=e,{value:s,size:o=JT,level:l=e3,bgColor:u=t3,fgColor:h=r3,includeMargin:f=n3,minVersion:x=s3,boostLevel:y,marginSize:v,imageSettings:b}=n,E=sg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=E,R=sg(E,["style"]),C=b==null?void 0:b.src,S=fe.useRef(null),O=fe.useRef(null),k=fe.useCallback(G=>{S.current=G,typeof r=="function"?r(G):r&&(r.current=G)},[r]),[F,B]=fe.useState(!1),{margin:P,cells:L,numCells:W,calculatedImageSettings:q}=a3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:f,marginSize:v,imageSettings:b,size:o});fe.useEffect(()=>{if(S.current!=null){const G=S.current,$=G.getContext("2d");if(!$)return;let re=L;const Z=O.current,Q=q!=null&&Z!==null&&Z.complete&&Z.naturalHeight!==0&&Z.naturalWidth!==0;Q&&q.excavation!=null&&(re=o3(L,q.excavation));const H=window.devicePixelRatio||1;G.height=G.width=o*H;const te=o/W*H;$.scale(te,te),$.fillStyle=u,$.fillRect(0,0,W,W),$.fillStyle=h,BB?$.fill(new Path2D(i3(re,P))):L.forEach(function(ce,ae){ce.forEach(function(oe,ue){oe&&$.fillRect(ue+P,ae+P,1,1)})}),q&&($.globalAlpha=q.opacity),Q&&$.drawImage(Z,q.x+P,q.y+P,q.w,q.h)}}),fe.useEffect(()=>{B(!1)},[C]);const K=ng({height:o,width:o},I);let ie=null;return C!=null&&(ie=fe.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{B(!0)},ref:O,crossOrigin:q==null?void 0:q.crossOrigin})),fe.createElement(fe.Fragment,null,fe.createElement("canvas",ng({style:K,height:o,width:o,ref:k,role:"img"},R)),ie)});FB.displayName="QRCodeCanvas";var Hh=fe.forwardRef(function(e,r){const n=e,{value:s,size:o=JT,level:l=e3,bgColor:u=t3,fgColor:h=r3,includeMargin:f=n3,minVersion:x=s3,boostLevel:y,title:v,marginSize:b,imageSettings:A}=n,E=sg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:R,numCells:C,calculatedImageSettings:S}=a3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:f,marginSize:b,imageSettings:A,size:o});let O=R,k=null;A!=null&&S!=null&&(S.excavation!=null&&(O=o3(R,S.excavation)),k=fe.createElement("image",{href:A.src,height:S.h,width:S.w,x:S.x+I,y:S.y+I,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const F=i3(O,I);return fe.createElement("svg",ng({height:o,width:o,viewBox:`0 0 ${C} ${C}`,ref:r,role:"img"},E),!!v&&fe.createElement("title",null,v),fe.createElement("path",{fill:u,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),fe.createElement("path",{fill:h,d:F,shapeRendering:"crispEdges"}),k)});Hh.displayName="QRCodeSVG";const UB=()=>{const t=Xo(),e=hn(),{order:r,restaurant:n,orderType:s}=t.state||{};return!r||!n?(e("/home"),null):p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:p.jsxs("div",{className:"max-w-md w-full space-y-6",children:[p.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[p.jsx("div",{className:"w-20 h-20 rounded-full luxury-gradient flex items-center justify-center",children:p.jsx(mx,{className:"w-12 h-12 text-white"})}),p.jsx("h1",{className:"text-3xl font-bold text-center",children:"Payment Successful!"}),p.jsx("p",{className:"text-muted-foreground text-center",children:s==="dine_in"?"Your table is ready":"Your order is confirmed"})]}),p.jsxs(We,{className:"p-6 space-y-4 luxury-shadow",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h2",{className:"font-semibold text-lg",children:"Your QR Code"}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:["Show this code at ",n.name," to confirm your booking"]})]}),p.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:p.jsx(Hh,{value:r.qr_code,size:200,level:"H",includeMargin:!0})}),p.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),p.jsx("span",{className:"font-medium",children:r.id.slice(0,8)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),p.jsx("span",{className:"font-medium",children:n.name})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Type"}),p.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Amount"}),p.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Be,{onClick:()=>e("/orders"),className:"w-full luxury-gradient",size:"lg",children:"View My Orders"}),p.jsxs(Be,{onClick:()=>e("/home"),variant:"outline",className:"w-full",size:"lg",children:[p.jsx(bC,{className:"mr-2 h-5 w-5"}),"Back to Home"]})]}),p.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"A confirmation has been sent to your registered email"})]})})},e_={paid:"bg-blue-500",preparing:"bg-yellow-500",ready:"bg-green-500",served:"bg-purple-500",completed:"bg-gray-500",cancelled:"bg-red-500"},zB=()=>{var f,x,y;const[t,e]=N.useState([]),[r,n]=N.useState(null),[s,o]=N.useState(!1),[l,u]=N.useState(!0);N.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:{user:v}}=await xe.auth.getUser();if(!v){Ce.error("Please sign in to view your orders"),u(!1);return}const{data:b,error:A}=await xe.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          )
        `).eq("customer_id",v.id).order("created_at",{ascending:!1});A&&(console.error("Error fetching orders:",A),Ce.error("Failed to load orders")),e(b||[])}catch(v){console.error("Error fetching orders:",v),Ce.error("Failed to load orders")}finally{u(!1)}};return l?p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):p.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[p.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:p.jsxs("div",{className:"max-w-md mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Orders"}),p.jsx("p",{className:"text-muted-foreground",children:"Track your bookings and orders"})]})}),p.jsx("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:t.filter(v=>v.status!=="completed").length===0?p.jsxs(We,{className:"p-8 text-center space-y-2",children:[p.jsx("p",{className:"text-muted-foreground",children:"No active orders"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Your completed orders are now available in your profile under Order History."})]}):t.filter(v=>v.status!=="completed").map(v=>{var b,A,E,I;return p.jsx(We,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>n(v),children:p.jsxs("div",{className:"flex gap-4 p-4",children:[p.jsx("img",{src:(b=v.restaurants)==null?void 0:b.image_url,alt:(A=v.restaurants)==null?void 0:A.name,className:"w-20 h-20 rounded-lg object-cover"}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold",children:(E=v.restaurants)==null?void 0:E.name}),p.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(I=v.order_type)==null?void 0:I.replace("_"," ")})]}),p.jsx(Vs,{className:`${e_[v.status]} text-white border-0`,children:v.status})]}),p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[p.jsx(gx,{className:"h-3 w-3"}),(()=>{const R=new Date(v.created_at),C=String(R.getDate()).padStart(2,"0"),S=String(R.getMonth()+1).padStart(2,"0"),O=R.getFullYear();let k=R.getHours();const F=String(R.getMinutes()).padStart(2,"0"),B=k>=12?"PM":"AM";return k=k%12||12,`${C}/${S}/${O} - ${k}:${F} ${B}`})()]}),p.jsxs("span",{className:"font-semibold text-primary",children:[v.total_amount.toLocaleString()," MMK"]})]})]})]})},v.id)})}),p.jsx(wi,{open:!!r&&!s,onOpenChange:v=>{v||(n(null),o(!1))},children:p.jsxs(Ys,{className:"w-full max-w-md",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:"Order Details"})}),r&&p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-white rounded-xl shadow-sm",children:[p.jsx("div",{className:"text-xs font-medium text-muted-foreground tracking-wide uppercase text-center",children:"Present this QR code at the restaurant"}),p.jsx("button",{type:"button",className:"mt-1",onClick:()=>o(!0),children:p.jsx(Hh,{value:r.qr_code,size:220,level:"H",includeMargin:!0})}),p.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center",children:"Tap the QR code to enlarge for easier scanning."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),p.jsx("span",{className:"font-medium",children:(f=r.restaurants)==null?void 0:f.name})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),p.jsx("span",{className:"font-medium capitalize",children:(x=r.order_type)==null?void 0:x.replace("_"," ")})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Payment Method"}),p.jsx("span",{className:"font-medium uppercase",children:r.payment_method})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-muted-foreground",children:"Status"}),p.jsx(Vs,{className:`${e_[r.status]} text-white border-0`,children:r.status})]}),p.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[p.jsx("span",{className:"font-semibold",children:"Total Amount"}),p.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-semibold text-sm",children:"Items"}),(y=r.order_items)==null?void 0:y.map((v,b)=>p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsxs("span",{children:[v.name," x ",v.quantity]}),p.jsxs("span",{children:[(v.price*v.quantity).toLocaleString()," MMK"]})]},b))]})]})]})}),p.jsx(wi,{open:!!r&&s,onOpenChange:v=>{v||o(!1)},children:p.jsx(Ys,{className:"max-w-sm w-full bg-background border-none shadow-none p-0 flex flex-col items-center justify-center",children:r&&p.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[p.jsx("div",{className:"text-[0.65rem] font-medium text-muted-foreground text-center mt-2",children:"Show this QR code to the restaurant for scanning"}),p.jsx("div",{className:"w-full flex justify-center",children:p.jsx(Hh,{value:r.qr_code,size:360,level:"H",includeMargin:!1})}),p.jsx(Be,{variant:"outline",size:"sm",className:"mt-1 mb-2 w-32",onClick:()=>o(!1),children:"Close"})]})})}),p.jsx(yy,{})]})};function ig(t,[e,r]){return Math.min(r,Math.max(e,t))}function VB(t,e){return N.useReducer((r,n)=>e[r][n]??r,t)}var Ay="ScrollArea",[l3,gV]=On(Ay),[HB,_s]=l3(Ay),c3=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...l}=t,[u,h]=N.useState(null),[f,x]=N.useState(null),[y,v]=N.useState(null),[b,A]=N.useState(null),[E,I]=N.useState(null),[R,C]=N.useState(0),[S,O]=N.useState(0),[k,F]=N.useState(!1),[B,P]=N.useState(!1),L=Ze(e,q=>h(q)),W=Lc(s);return p.jsx(HB,{scope:r,type:n,dir:W,scrollHideDelay:o,scrollArea:u,viewport:f,onViewportChange:x,content:y,onContentChange:v,scrollbarX:b,onScrollbarXChange:A,scrollbarXEnabled:k,onScrollbarXEnabledChange:F,scrollbarY:E,onScrollbarYChange:I,scrollbarYEnabled:B,onScrollbarYEnabledChange:P,onCornerWidthChange:C,onCornerHeightChange:O,children:p.jsx(Me.div,{dir:W,...l,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});c3.displayName=Ay;var u3="ScrollAreaViewport",d3=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...o}=t,l=_s(u3,r),u=N.useRef(null),h=Ze(e,u,l.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...o,ref:h,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});d3.displayName=u3;var _i="ScrollAreaScrollbar",Ny=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=_s(_i,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,u=t.orientation==="horizontal";return N.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),s.type==="hover"?p.jsx($B,{...n,ref:e,forceMount:r}):s.type==="scroll"?p.jsx(WB,{...n,ref:e,forceMount:r}):s.type==="auto"?p.jsx(f3,{...n,ref:e,forceMount:r}):s.type==="always"?p.jsx(Ty,{...n,ref:e}):null});Ny.displayName=_i;var $B=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=_s(_i,t.__scopeScrollArea),[o,l]=N.useState(!1);return N.useEffect(()=>{const u=s.scrollArea;let h=0;if(u){const f=()=>{window.clearTimeout(h),l(!0)},x=()=>{h=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",f),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(h),u.removeEventListener("pointerenter",f),u.removeEventListener("pointerleave",x)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(tn,{present:r||o,children:p.jsx(f3,{"data-state":o?"visible":"hidden",...n,ref:e})})}),WB=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=_s(_i,t.__scopeScrollArea),o=t.orientation==="horizontal",l=F0(()=>h("SCROLL_END"),100),[u,h]=VB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(u==="idle"){const f=window.setTimeout(()=>h("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[u,s.scrollHideDelay,h]),N.useEffect(()=>{const f=s.viewport,x=o?"scrollLeft":"scrollTop";if(f){let y=f[x];const v=()=>{const b=f[x];y!==b&&(h("SCROLL"),l()),y=b};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,o,h,l]),p.jsx(tn,{present:r||u!=="hidden",children:p.jsx(Ty,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Ee(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Ee(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),f3=N.forwardRef((t,e)=>{const r=_s(_i,t.__scopeScrollArea),{forceMount:n,...s}=t,[o,l]=N.useState(!1),u=t.orientation==="horizontal",h=F0(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;l(u?f:x)}},10);return Cc(r.viewport,h),Cc(r.content,h),p.jsx(tn,{present:n||o,children:p.jsx(Ty,{"data-state":o?"visible":"hidden",...s,ref:e})})}),Ty=N.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=_s(_i,t.__scopeScrollArea),o=N.useRef(null),l=N.useRef(0),[u,h]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=x3(u.viewport,u.content),x={...n,sizes:u,onSizesChange:h,hasThumb:f>0&&f<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function y(v,b){return QB(v,l.current,u,b)}return r==="horizontal"?p.jsx(GB,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollLeft,b=t_(v,u,s.dir);o.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=y(v,s.dir))}}):r==="vertical"?p.jsx(YB,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollTop,b=t_(v,u);o.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=y(v))}}):null}),GB=N.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=_s(_i,t.__scopeScrollArea),[l,u]=N.useState(),h=N.useRef(null),f=Ze(e,h,o.onScrollbarXChange);return N.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(p3,{"data-orientation":"horizontal",...s,ref:f,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":B0(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,y)=>{if(o.viewport){const v=o.viewport.scrollLeft+x.deltaX;t.onWheelScroll(v),w3(v,y)&&x.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Wh(l.paddingLeft),paddingEnd:Wh(l.paddingRight)}})}})}),YB=N.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,o=_s(_i,t.__scopeScrollArea),[l,u]=N.useState(),h=N.useRef(null),f=Ze(e,h,o.onScrollbarYChange);return N.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(p3,{"data-orientation":"vertical",...s,ref:f,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":B0(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,y)=>{if(o.viewport){const v=o.viewport.scrollTop+x.deltaY;t.onWheelScroll(v),w3(v,y)&&x.preventDefault()}},onResize:()=>{h.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Wh(l.paddingTop),paddingEnd:Wh(l.paddingBottom)}})}})}),[XB,h3]=l3(_i),p3=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:f,onWheelScroll:x,onResize:y,...v}=t,b=_s(_i,r),[A,E]=N.useState(null),I=Ze(e,L=>E(L)),R=N.useRef(null),C=N.useRef(""),S=b.viewport,O=n.content-n.viewport,k=fr(x),F=fr(h),B=F0(y,10);function P(L){if(R.current){const W=L.clientX-R.current.left,q=L.clientY-R.current.top;f({x:W,y:q})}}return N.useEffect(()=>{const L=W=>{const q=W.target;(A==null?void 0:A.contains(q))&&k(W,O)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[S,A,O,k]),N.useEffect(F,[n,F]),Cc(A,B),Cc(b.content,B),p.jsx(XB,{scope:r,scrollbar:A,hasThumb:s,onThumbChange:fr(o),onThumbPointerUp:fr(l),onThumbPositionChange:F,onThumbPointerDown:fr(u),children:p.jsx(Me.div,{...v,ref:I,style:{position:"absolute",...v.style},onPointerDown:Ee(t.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),R.current=A.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),P(L))}),onPointerMove:Ee(t.onPointerMove,P),onPointerUp:Ee(t.onPointerUp,L=>{const W=L.target;W.hasPointerCapture(L.pointerId)&&W.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=C.current,b.viewport&&(b.viewport.style.scrollBehavior=""),R.current=null})})})}),$h="ScrollAreaThumb",m3=N.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=h3($h,t.__scopeScrollArea);return p.jsx(tn,{present:r||s.hasThumb,children:p.jsx(qB,{ref:e,...n})})}),qB=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,o=_s($h,r),l=h3($h,r),{onThumbPositionChange:u}=l,h=Ze(e,y=>l.onThumbChange(y)),f=N.useRef(void 0),x=F0(()=>{f.current&&(f.current(),f.current=void 0)},100);return N.useEffect(()=>{const y=o.viewport;if(y){const v=()=>{if(x(),!f.current){const b=ZB(y,u);f.current=b,u()}};return u(),y.addEventListener("scroll",v),()=>y.removeEventListener("scroll",v)}},[o.viewport,x,u]),p.jsx(Me.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ee(t.onPointerDownCapture,y=>{const b=y.target.getBoundingClientRect(),A=y.clientX-b.left,E=y.clientY-b.top;l.onThumbPointerDown({x:A,y:E})}),onPointerUp:Ee(t.onPointerUp,l.onThumbPointerUp)})});m3.displayName=$h;var Iy="ScrollAreaCorner",g3=N.forwardRef((t,e)=>{const r=_s(Iy,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?p.jsx(KB,{...t,ref:e}):null});g3.displayName=Iy;var KB=N.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=_s(Iy,r),[o,l]=N.useState(0),[u,h]=N.useState(0),f=!!(o&&u);return Cc(s.scrollbarX,()=>{var y;const x=((y=s.scrollbarX)==null?void 0:y.offsetHeight)||0;s.onCornerHeightChange(x),h(x)}),Cc(s.scrollbarY,()=>{var y;const x=((y=s.scrollbarY)==null?void 0:y.offsetWidth)||0;s.onCornerWidthChange(x),l(x)}),f?p.jsx(Me.div,{...n,ref:e,style:{width:o,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Wh(t){return t?parseInt(t,10):0}function x3(t,e){const r=t/e;return isNaN(r)?0:r}function B0(t){const e=x3(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function QB(t,e,r,n="ltr"){const s=B0(r),o=s/2,l=e||o,u=s-l,h=r.scrollbar.paddingStart+l,f=r.scrollbar.size-r.scrollbar.paddingEnd-u,x=r.content-r.viewport,y=n==="ltr"?[0,x]:[x*-1,0];return y3([h,f],y)(t)}function t_(t,e,r="ltr"){const n=B0(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,u=o-n,h=r==="ltr"?[0,l]:[l*-1,0],f=ig(t,h);return y3([0,l],[0,u])(f)}function y3(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function w3(t,e){return t>0&&t<e}var ZB=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},l=r.left!==o.left,u=r.top!==o.top;(l||u)&&e(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function F0(t,e){const r=fr(t),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Cc(t,e){const r=fr(e);kr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var v3=c3,JB=d3,eF=g3;const Ry=N.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(v3,{ref:n,className:Oe("relative overflow-hidden",t),...r,children:[p.jsx(JB,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(_3,{}),p.jsx(eF,{})]}));Ry.displayName=v3.displayName;const _3=N.forwardRef(({className:t,orientation:e="vertical",...r},n)=>p.jsx(Ny,{ref:n,orientation:e,className:Oe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:p.jsx(m3,{className:"relative flex-1 rounded-full bg-border"})}));_3.displayName=Ny.displayName;const tF=()=>{const{user:t,signOut:e}=Mn(),r=hn(),[n,s]=N.useState(null),[o,l]=N.useState([]),[u,h]=N.useState(!1),[f,x]=N.useState({full_name:"",phone:""}),{loading:y,summary:v,badgeLabel:b,badgeDescription:A,badgeIcon:E}=nT(),I=()=>{const k="w-4 h-4";switch(E){case"compass":return p.jsx(vC,{className:k});case"star":return p.jsx(bh,{className:k});case"shield":return p.jsx(vh,{className:k});case"crown":return p.jsx(_C,{className:k});case"sparkles":default:return p.jsx(AC,{className:k})}};N.useEffect(()=>{t&&(R(),C())},[t]);const R=async()=>{try{const{data:k,error:F}=await xe.from("profiles").select("*").eq("id",t==null?void 0:t.id).single();if(F)throw F;s(k),x({full_name:k.full_name||"",phone:k.phone||""})}catch(k){console.error("Error fetching profile:",k)}},C=async()=>{if(t)try{const{data:k,error:F}=await xe.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          ),
          order_items
        `).eq("customer_id",t.id).eq("status","completed").order("created_at",{ascending:!1});if(F)throw F;l(k||[])}catch(k){console.error("Error fetching order history:",k)}},S=async()=>{try{const{error:k}=await xe.from("profiles").update({full_name:f.full_name,phone:f.phone}).eq("id",t==null?void 0:t.id);if(k)throw k;Ce.success("Profile updated successfully"),h(!1),R()}catch(k){console.error("Error updating profile:",k),Ce.error("Failed to update profile")}},O=async()=>{await e(),r("/auth"),Ce.success("Signed out successfully")};return p.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[p.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:p.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings"})]}),p.jsx(Be,{onClick:O,variant:"outline",size:"icon",className:"shrink-0",children:p.jsx(y0,{className:"h-4 w-4"})})]})}),p.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[p.jsxs(We,{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center relative",children:[p.jsx(Fs,{className:"w-8 h-8 text-white"}),p.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-background border border-yellow-400 flex items-center justify-center shadow-sm",children:I()})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h2",{className:"text-xl font-semibold",children:(n==null?void 0:n.full_name)||"User"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email}),p.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[p.jsx(Vs,{className:"px-2 py-0.5 text-[9px] rounded-full bg-primary/10 text-primary border-primary/20",children:y?"Calculating badge...":b||"Newbie"}),v&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"inline-flex items-baseline gap-1 px-2 py-0.5 rounded-full bg-primary/10 border border-primary/30",children:[p.jsx("span",{className:"text-[11px] font-semibold text-primary",children:v.total_points}),p.jsx("span",{className:"text-[8px] uppercase tracking-wide text-primary/80",children:"pts"})]}),p.jsxs("span",{className:"text-[9px] text-muted-foreground/80",children:[v.total_completed_orders," completed orders"]})]})]})]}),p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>h(!u),children:p.jsx(EC,{className:"h-4 w-4"})})]}),p.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/40 rounded-xl px-3 py-2",children:A}),u?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"full_name",children:"Full Name"}),p.jsx(ct,{id:"full_name",value:f.full_name,onChange:k=>x({...f,full_name:k.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"phone",children:"Phone"}),p.jsx(ct,{id:"phone",value:f.phone,onChange:k=>x({...f,phone:k.target.value})})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Be,{onClick:S,className:"flex-1 luxury-gradient",children:"Save Changes"}),p.jsx(Be,{variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]}):p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[p.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-muted-foreground",children:"Name:"}),p.jsx("span",{className:"font-medium",children:(n==null?void 0:n.full_name)||"Not set"})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[p.jsx(vM,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-muted-foreground",children:"Email:"}),p.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[p.jsx(CC,{className:"h-4 w-4 text-muted-foreground"}),p.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),p.jsx("span",{className:"font-medium",children:(n==null?void 0:n.phone)||"Not set"})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Orders History"}),p.jsxs(We,{className:"p-4 luxury-gradient text-white flex items-center justify-between",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xs uppercase tracking-wide opacity-80",children:"Total Spent"}),p.jsxs("p",{className:"text-2xl font-semibold",children:[o.reduce((k,F)=>k+(F.total_amount||0),0).toLocaleString()," ","MMK"]})]}),p.jsxs("div",{className:"text-right text-[10px] opacity-80",children:[p.jsx("p",{children:"Completed orders only"}),p.jsxs("p",{children:[o.length," orders"]})]})]}),o.length===0?p.jsx(We,{className:"p-4 text-sm text-muted-foreground",children:"No completed orders yet. Once your orders are completed, they will appear here."}):p.jsx(We,{className:"p-0",children:p.jsx(Ry,{className:"max-h-72",children:p.jsx("div",{className:"divide-y",children:o.map(k=>{var F,B,P,L,W;return p.jsxs("div",{className:"px-4 py-3 space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:(F=k.restaurants)==null?void 0:F.image_url,alt:(B=k.restaurants)==null?void 0:B.name,className:"w-10 h-10 rounded-md object-cover"}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium",children:(P=k.restaurants)==null?void 0:P.name}),p.jsxs("p",{className:"text-[11px] text-muted-foreground capitalize",children:[(L=k.order_type)==null?void 0:L.replace("_"," ")," "," ",new Date(k.created_at).toLocaleDateString()]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"text-xs font-semibold text-primary",children:[(W=k.total_amount)==null?void 0:W.toLocaleString()," MMK"]}),p.jsx(Vs,{className:"mt-1 bg-gray-500 text-white border-0 text-[9px]",children:"Completed"})]})]})})]}),Array.isArray(k.order_items)&&k.order_items.length>0&&p.jsx("div",{className:"pl-13 text-[10px] text-muted-foreground leading-snug",children:k.order_items.map(q=>`${q.name} x${q.quantity}`).join("  ")})]},k.id)})})})})]})]}),p.jsx(yy,{})]})};var rF=[" ","Enter","ArrowUp","ArrowDown"],nF=[" ","Enter"],Wa="Select",[U0,z0,sF]=p0(Wa),[Fc,xV]=On(Wa,[sF,Pc]),V0=Pc(),[iF,Zo]=Fc(Wa),[oF,aF]=Fc(Wa),b3=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:o,value:l,defaultValue:u,onValueChange:h,dir:f,name:x,autoComplete:y,disabled:v,required:b,form:A}=t,E=V0(e),[I,R]=N.useState(null),[C,S]=N.useState(null),[O,k]=N.useState(!1),F=Lc(f),[B,P]=Vi({prop:n,defaultProp:s??!1,onChange:o,caller:Wa}),[L,W]=Vi({prop:l,defaultProp:u,onChange:h,caller:Wa}),q=N.useRef(null),K=I?A||!!I.closest("form"):!0,[ie,G]=N.useState(new Set),$=Array.from(ie).map(re=>re.props.value).join(";");return p.jsx(oS,{...E,children:p.jsxs(iF,{required:b,scope:e,trigger:I,onTriggerChange:R,valueNode:C,onValueNodeChange:S,valueNodeHasChildren:O,onValueNodeHasChildrenChange:k,contentId:pi(),value:L,onValueChange:W,open:B,onOpenChange:P,dir:F,triggerPointerDownPosRef:q,disabled:v,children:[p.jsx(U0.Provider,{scope:e,children:p.jsx(oF,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(re=>{G(Z=>new Set(Z).add(re))},[]),onNativeOptionRemove:N.useCallback(re=>{G(Z=>{const Q=new Set(Z);return Q.delete(re),Q})},[]),children:r})}),K?p.jsxs(G3,{"aria-hidden":!0,required:b,tabIndex:-1,name:x,autoComplete:y,value:L,onChange:re=>W(re.target.value),disabled:v,form:A,children:[L===void 0?p.jsx("option",{value:""}):null,Array.from(ie)]},$):null]})})};b3.displayName=Wa;var E3="SelectTrigger",C3=N.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,o=V0(r),l=Zo(E3,r),u=l.disabled||n,h=Ze(e,l.onTriggerChange),f=z0(r),x=N.useRef("touch"),[y,v,b]=X3(E=>{const I=f().filter(S=>!S.disabled),R=I.find(S=>S.value===l.value),C=q3(I,E,R);C!==void 0&&l.onValueChange(C.value)}),A=E=>{u||(l.onOpenChange(!0),b()),E&&(l.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return p.jsx(Rx,{asChild:!0,...o,children:p.jsx(Me.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":Y3(l.value)?"":void 0,...s,ref:h,onClick:Ee(s.onClick,E=>{E.currentTarget.focus(),x.current!=="mouse"&&A(E)}),onPointerDown:Ee(s.onPointerDown,E=>{x.current=E.pointerType;const I=E.target;I.hasPointerCapture(E.pointerId)&&I.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(A(E),E.preventDefault())}),onKeyDown:Ee(s.onKeyDown,E=>{const I=y.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&v(E.key),!(I&&E.key===" ")&&rF.includes(E.key)&&(A(),E.preventDefault())})})})});C3.displayName=E3;var S3="SelectValue",A3=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:l="",...u}=t,h=Zo(S3,r),{onValueNodeHasChildrenChange:f}=h,x=o!==void 0,y=Ze(e,h.onValueNodeChange);return kr(()=>{f(x)},[f,x]),p.jsx(Me.span,{...u,ref:y,style:{pointerEvents:"none"},children:Y3(h.value)?p.jsx(p.Fragment,{children:l}):o})});A3.displayName=S3;var lF="SelectIcon",N3=N.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return p.jsx(Me.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});N3.displayName=lF;var cF="SelectPortal",T3=t=>p.jsx(bd,{asChild:!0,...t});T3.displayName=cF;var Ga="SelectContent",I3=N.forwardRef((t,e)=>{const r=Zo(Ga,t.__scopeSelect),[n,s]=N.useState();if(kr(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?qa.createPortal(p.jsx(R3,{scope:t.__scopeSelect,children:p.jsx(U0.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),o):null}return p.jsx(O3,{...t,ref:e})});I3.displayName=Ga;var Is=10,[R3,Jo]=Fc(Ga),uF="SelectContentImpl",dF=Ua("SelectContent.RemoveScroll"),O3=N.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:h,align:f,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:A,hideWhenDetached:E,avoidCollisions:I,...R}=t,C=Zo(Ga,r),[S,O]=N.useState(null),[k,F]=N.useState(null),B=Ze(e,_e=>O(_e)),[P,L]=N.useState(null),[W,q]=N.useState(null),K=z0(r),[ie,G]=N.useState(!1),$=N.useRef(!1);N.useEffect(()=>{if(S)return vy(S)},[S]),wy();const re=N.useCallback(_e=>{const[Re,...Xe]=K().map(nt=>nt.ref.current),[Ye]=Xe.slice(-1),Ue=document.activeElement;for(const nt of _e)if(nt===Ue||(nt==null||nt.scrollIntoView({block:"nearest"}),nt===Re&&k&&(k.scrollTop=0),nt===Ye&&k&&(k.scrollTop=k.scrollHeight),nt==null||nt.focus(),document.activeElement!==Ue))return},[K,k]),Z=N.useCallback(()=>re([P,S]),[re,P,S]);N.useEffect(()=>{ie&&Z()},[ie,Z]);const{onOpenChange:Q,triggerPointerDownPosRef:H}=C;N.useEffect(()=>{if(S){let _e={x:0,y:0};const Re=Ye=>{var Ue,nt;_e={x:Math.abs(Math.round(Ye.pageX)-(((Ue=H.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round(Ye.pageY)-(((nt=H.current)==null?void 0:nt.y)??0))}},Xe=Ye=>{_e.x<=10&&_e.y<=10?Ye.preventDefault():S.contains(Ye.target)||Q(!1),document.removeEventListener("pointermove",Re),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[S,Q,H]),N.useEffect(()=>{const _e=()=>Q(!1);return window.addEventListener("blur",_e),window.addEventListener("resize",_e),()=>{window.removeEventListener("blur",_e),window.removeEventListener("resize",_e)}},[Q]);const[te,ce]=X3(_e=>{const Re=K().filter(Ue=>!Ue.disabled),Xe=Re.find(Ue=>Ue.ref.current===document.activeElement),Ye=q3(Re,_e,Xe);Ye&&setTimeout(()=>Ye.ref.current.focus())}),ae=N.useCallback((_e,Re,Xe)=>{const Ye=!$.current&&!Xe;(C.value!==void 0&&C.value===Re||Ye)&&(L(_e),Ye&&($.current=!0))},[C.value]),oe=N.useCallback(()=>S==null?void 0:S.focus(),[S]),ue=N.useCallback((_e,Re,Xe)=>{const Ye=!$.current&&!Xe;(C.value!==void 0&&C.value===Re||Ye)&&q(_e)},[C.value]),ke=n==="popper"?og:M3,ye=ke===og?{side:u,sideOffset:h,align:f,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:A,hideWhenDetached:E,avoidCollisions:I}:{};return p.jsx(R3,{scope:r,content:S,viewport:k,onViewportChange:F,itemRefCallback:ae,selectedItem:P,onItemLeave:oe,itemTextRefCallback:ue,focusSelectedItem:Z,selectedItemText:W,position:n,isPositioned:ie,searchRef:te,children:p.jsx(j0,{as:dF,allowPinchZoom:!0,children:p.jsx(k0,{asChild:!0,trapped:C.open,onMountAutoFocus:_e=>{_e.preventDefault()},onUnmountAutoFocus:Ee(s,_e=>{var Re;(Re=C.trigger)==null||Re.focus({preventScroll:!0}),_e.preventDefault()}),children:p.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:_e=>_e.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:p.jsx(ke,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:_e=>_e.preventDefault(),...R,...ye,onPlaced:()=>G(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Ee(R.onKeyDown,_e=>{const Re=_e.ctrlKey||_e.altKey||_e.metaKey;if(_e.key==="Tab"&&_e.preventDefault(),!Re&&_e.key.length===1&&ce(_e.key),["ArrowUp","ArrowDown","Home","End"].includes(_e.key)){let Ye=K().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(_e.key)&&(Ye=Ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(_e.key)){const Ue=_e.target,nt=Ye.indexOf(Ue);Ye=Ye.slice(nt+1)}setTimeout(()=>re(Ye)),_e.preventDefault()}})})})})})})});O3.displayName=uF;var fF="SelectItemAlignedPosition",M3=N.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,o=Zo(Ga,r),l=Jo(Ga,r),[u,h]=N.useState(null),[f,x]=N.useState(null),y=Ze(e,B=>x(B)),v=z0(r),b=N.useRef(!1),A=N.useRef(!0),{viewport:E,selectedItem:I,selectedItemText:R,focusSelectedItem:C}=l,S=N.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&f&&E&&I&&R){const B=o.trigger.getBoundingClientRect(),P=f.getBoundingClientRect(),L=o.valueNode.getBoundingClientRect(),W=R.getBoundingClientRect();if(o.dir!=="rtl"){const Ue=W.left-P.left,nt=L.left-Ue,Ve=B.left-nt,lr=B.width+Ve,wr=Math.max(lr,P.width),Nr=window.innerWidth-Is,he=ig(nt,[Is,Math.max(Is,Nr-wr)]);u.style.minWidth=lr+"px",u.style.left=he+"px"}else{const Ue=P.right-W.right,nt=window.innerWidth-L.right-Ue,Ve=window.innerWidth-B.right-nt,lr=B.width+Ve,wr=Math.max(lr,P.width),Nr=window.innerWidth-Is,he=ig(nt,[Is,Math.max(Is,Nr-wr)]);u.style.minWidth=lr+"px",u.style.right=he+"px"}const q=v(),K=window.innerHeight-Is*2,ie=E.scrollHeight,G=window.getComputedStyle(f),$=parseInt(G.borderTopWidth,10),re=parseInt(G.paddingTop,10),Z=parseInt(G.borderBottomWidth,10),Q=parseInt(G.paddingBottom,10),H=$+re+ie+Q+Z,te=Math.min(I.offsetHeight*5,H),ce=window.getComputedStyle(E),ae=parseInt(ce.paddingTop,10),oe=parseInt(ce.paddingBottom,10),ue=B.top+B.height/2-Is,ke=K-ue,ye=I.offsetHeight/2,_e=I.offsetTop+ye,Re=$+re+_e,Xe=H-Re;if(Re<=ue){const Ue=q.length>0&&I===q[q.length-1].ref.current;u.style.bottom="0px";const nt=f.clientHeight-E.offsetTop-E.offsetHeight,Ve=Math.max(ke,ye+(Ue?oe:0)+nt+Z),lr=Re+Ve;u.style.height=lr+"px"}else{const Ue=q.length>0&&I===q[0].ref.current;u.style.top="0px";const Ve=Math.max(ue,$+E.offsetTop+(Ue?ae:0)+ye)+Xe;u.style.height=Ve+"px",E.scrollTop=Re-ue+E.offsetTop}u.style.margin=`${Is}px 0`,u.style.minHeight=te+"px",u.style.maxHeight=K+"px",n==null||n(),requestAnimationFrame(()=>b.current=!0)}},[v,o.trigger,o.valueNode,u,f,E,I,R,o.dir,n]);kr(()=>S(),[S]);const[O,k]=N.useState();kr(()=>{f&&k(window.getComputedStyle(f).zIndex)},[f]);const F=N.useCallback(B=>{B&&A.current===!0&&(S(),C==null||C(),A.current=!1)},[S,C]);return p.jsx(pF,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:F,children:p.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:p.jsx(Me.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});M3.displayName=fF;var hF="SelectPopperPosition",og=N.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Is,...o}=t,l=V0(r);return p.jsx(Ox,{...l,...o,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});og.displayName=hF;var[pF,Oy]=Fc(Ga,{}),ag="SelectViewport",k3=N.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,o=Jo(ag,r),l=Oy(ag,r),u=Ze(e,o.onViewportChange),h=N.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),p.jsx(U0.Slot,{scope:r,children:p.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ee(s.onScroll,f=>{const x=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=l;if(v!=null&&v.current&&y){const b=Math.abs(h.current-x.scrollTop);if(b>0){const A=window.innerHeight-Is*2,E=parseFloat(y.style.minHeight),I=parseFloat(y.style.height),R=Math.max(E,I);if(R<A){const C=R+b,S=Math.min(A,C),O=C-S;y.style.height=S+"px",y.style.bottom==="0px"&&(x.scrollTop=O>0?O:0,y.style.justifyContent="flex-end")}}}h.current=x.scrollTop})})})]})});k3.displayName=ag;var P3="SelectGroup",[mF,gF]=Fc(P3),xF=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=pi();return p.jsx(mF,{scope:r,id:s,children:p.jsx(Me.div,{role:"group","aria-labelledby":s,...n,ref:e})})});xF.displayName=P3;var j3="SelectLabel",D3=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=gF(j3,r);return p.jsx(Me.div,{id:s.id,...n,ref:e})});D3.displayName=j3;var Gh="SelectItem",[yF,L3]=Fc(Gh),B3=N.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...l}=t,u=Zo(Gh,r),h=Jo(Gh,r),f=u.value===n,[x,y]=N.useState(o??""),[v,b]=N.useState(!1),A=Ze(e,C=>{var S;return(S=h.itemRefCallback)==null?void 0:S.call(h,C,n,s)}),E=pi(),I=N.useRef("touch"),R=()=>{s||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(yF,{scope:r,value:n,disabled:s,textId:E,isSelected:f,onItemTextChange:N.useCallback(C=>{y(S=>S||((C==null?void 0:C.textContent)??"").trim())},[]),children:p.jsx(U0.ItemSlot,{scope:r,value:n,disabled:s,textValue:x,children:p.jsx(Me.div,{role:"option","aria-labelledby":E,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:A,onFocus:Ee(l.onFocus,()=>b(!0)),onBlur:Ee(l.onBlur,()=>b(!1)),onClick:Ee(l.onClick,()=>{I.current!=="mouse"&&R()}),onPointerUp:Ee(l.onPointerUp,()=>{I.current==="mouse"&&R()}),onPointerDown:Ee(l.onPointerDown,C=>{I.current=C.pointerType}),onPointerMove:Ee(l.onPointerMove,C=>{var S;I.current=C.pointerType,s?(S=h.onItemLeave)==null||S.call(h):I.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(l.onPointerLeave,C=>{var S;C.currentTarget===document.activeElement&&((S=h.onItemLeave)==null||S.call(h))}),onKeyDown:Ee(l.onKeyDown,C=>{var O;((O=h.searchRef)==null?void 0:O.current)!==""&&C.key===" "||(nF.includes(C.key)&&R(),C.key===" "&&C.preventDefault())})})})})});B3.displayName=Gh;var mu="SelectItemText",F3=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...o}=t,l=Zo(mu,r),u=Jo(mu,r),h=L3(mu,r),f=aF(mu,r),[x,y]=N.useState(null),v=Ze(e,R=>y(R),h.onItemTextChange,R=>{var C;return(C=u.itemTextRefCallback)==null?void 0:C.call(u,R,h.value,h.disabled)}),b=x==null?void 0:x.textContent,A=N.useMemo(()=>p.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:E,onNativeOptionRemove:I}=f;return kr(()=>(E(A),()=>I(A)),[E,I,A]),p.jsxs(p.Fragment,{children:[p.jsx(Me.span,{id:h.textId,...o,ref:v}),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?qa.createPortal(o.children,l.valueNode):null]})});F3.displayName=mu;var U3="SelectItemIndicator",z3=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return L3(U3,r).isSelected?p.jsx(Me.span,{"aria-hidden":!0,...n,ref:e}):null});z3.displayName=U3;var lg="SelectScrollUpButton",V3=N.forwardRef((t,e)=>{const r=Jo(lg,t.__scopeSelect),n=Oy(lg,t.__scopeSelect),[s,o]=N.useState(!1),l=Ze(e,n.onScrollButtonChange);return kr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const f=h.scrollTop>0;o(f)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),s?p.jsx($3,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});V3.displayName=lg;var cg="SelectScrollDownButton",H3=N.forwardRef((t,e)=>{const r=Jo(cg,t.__scopeSelect),n=Oy(cg,t.__scopeSelect),[s,o]=N.useState(!1),l=Ze(e,n.onScrollButtonChange);return kr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,x=Math.ceil(h.scrollTop)<f;o(x)};const h=r.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),s?p.jsx($3,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=r;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});H3.displayName=cg;var $3=N.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,o=Jo("SelectScrollButton",r),l=N.useRef(null),u=z0(r),h=N.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return N.useEffect(()=>()=>h(),[h]),kr(()=>{var x;const f=u().find(y=>y.ref.current===document.activeElement);(x=f==null?void 0:f.ref.current)==null||x.scrollIntoView({block:"nearest"})},[u]),p.jsx(Me.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ee(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Ee(s.onPointerMove,()=>{var f;(f=o.onItemLeave)==null||f.call(o),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Ee(s.onPointerLeave,()=>{h()})})}),wF="SelectSeparator",W3=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return p.jsx(Me.div,{"aria-hidden":!0,...n,ref:e})});W3.displayName=wF;var ug="SelectArrow",vF=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=V0(r),o=Zo(ug,r),l=Jo(ug,r);return o.open&&l.position==="popper"?p.jsx(Mx,{...s,...n,ref:e}):null});vF.displayName=ug;var _F="SelectBubbleInput",G3=N.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=N.useRef(null),o=Ze(n,s),l=Cy(e);return N.useEffect(()=>{const u=s.current;if(!u)return;const h=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&x){const y=new Event("change",{bubbles:!0});x.call(u,e),u.dispatchEvent(y)}},[l,e]),p.jsx(Me.select,{...r,style:{...WE,...r.style},ref:o,defaultValue:e})});G3.displayName=_F;function Y3(t){return t===""||t===void 0}function X3(t){const e=fr(t),r=N.useRef(""),n=N.useRef(0),s=N.useCallback(l=>{const u=r.current+l;e(u),function h(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),o=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function q3(t,e,r){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let l=bF(t,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==r));const h=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==r?h:void 0}function bF(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var EF=b3,K3=C3,CF=A3,SF=N3,AF=T3,Q3=I3,NF=k3,Z3=D3,J3=B3,TF=F3,IF=z3,eI=V3,tI=H3,rI=W3;const ms=EF,gs=CF,Wn=N.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(K3,{ref:n,className:Oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,p.jsx(SF,{asChild:!0,children:p.jsx(gC,{className:"h-4 w-4 opacity-50"})})]}));Wn.displayName=K3.displayName;const nI=N.forwardRef(({className:t,...e},r)=>p.jsx(eI,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(gM,{className:"h-4 w-4"})}));nI.displayName=eI.displayName;const sI=N.forwardRef(({className:t,...e},r)=>p.jsx(tI,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(gC,{className:"h-4 w-4"})}));sI.displayName=tI.displayName;const Gn=N.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>p.jsx(AF,{children:p.jsxs(Q3,{ref:s,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[p.jsx(nI,{}),p.jsx(NF,{className:Oe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(sI,{})]})}));Gn.displayName=Q3.displayName;const RF=N.forwardRef(({className:t,...e},r)=>p.jsx(Z3,{ref:r,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));RF.displayName=Z3.displayName;const tt=N.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(J3,{ref:n,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(IF,{children:p.jsx(mC,{className:"h-4 w-4"})})}),p.jsx(TF,{children:e})]}));tt.displayName=J3.displayName;const OF=N.forwardRef(({className:t,...e},r)=>p.jsx(rI,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",t),...e}));OF.displayName=rI.displayName;const MF=()=>{const{user:t}=Mn(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[o,l]=N.useState("all"),[u,h]=N.useState("all"),[f,x]=N.useState(""),[y,v]=N.useState(1),b=6;N.useEffect(()=>{t&&A()},[t]);const A=async()=>{try{const{data:P,error:L}=await xe.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(L)throw L;const{data:W,error:q}=await xe.from("orders").select("*").eq("restaurant_id",P.id).order("created_at",{ascending:!1});if(q)throw q;const K=[...new Set((W||[]).map(re=>re.customer_id))],{data:ie,error:G}=await xe.rpc("get_order_customers",{customer_ids:K});G&&console.error("Failed to load customer details:",G);const $=(W||[]).map(re=>{const Z=ie==null?void 0:ie.find(Q=>Q.user_id===re.customer_id);return{...re,customer_name:(Z==null?void 0:Z.full_name)||"Customer",customer_phone:(Z==null?void 0:Z.phone)||null}});r($)}catch(P){console.error("Error fetching orders:",P),Ce.error("Failed to load orders")}finally{s(!1)}},E=async(P,L)=>{try{const{error:W}=await xe.from("orders").update({status:L}).eq("id",P);if(W)throw W;r(q=>q.map(K=>K.id===P?{...K,status:L}:K)),Ce.success("Order status updated")}catch(W){console.error("Error updating order:",W),Ce.error("Failed to update order status")}};N.useEffect(()=>{const P=L=>{const W=L,{orderId:q,status:K}=W.detail||{};!q||!K||r(ie=>ie.map(G=>G.id===q?{...G,status:K}:G))};return window.addEventListener("orderStatusUpdated",P),()=>{window.removeEventListener("orderStatusUpdated",P)}},[]);const I=()=>{l("all"),h("all"),x(""),v(1)},R=P=>{const L={paid:{label:"Paid",className:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/10"},preparing:{label:"Preparing",className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/10"},ready:{label:"Ready",className:"bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/10"},completed:{label:"Completed",className:"bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-500/10"},cancelled:{label:"Cancelled",className:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/10"},served:{label:"Served",className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/10"}};return L[P]||L.paid},C=P=>{switch(P){case"paid":return"bg-purple-50/60 dark:bg-purple-500/5";case"preparing":return"bg-blue-50/60 dark:bg-blue-500/5";case"ready":return"bg-green-50/60 dark:bg-green-500/5";case"completed":return"bg-slate-50/60 dark:bg-slate-500/5";case"served":return"bg-emerald-50/60 dark:bg-emerald-500/5";case"cancelled":return"bg-red-50/40 dark:bg-red-500/5";default:return"bg-card"}},S=P=>{const L=new Date(P),q=Math.floor((new Date().getTime()-L.getTime())/6e4);return q<60?`${q} mins ago`:q<1440?`${Math.floor(q/60)} hours ago`:`${Math.floor(q/1440)} days ago`},O=e.filter(P=>{const L=o==="all"?!0:P.order_type===o,W=u==="all"?!0:P.status===u,q=f?new Date(P.created_at).toISOString().slice(0,10)===f:!0;return L&&W&&q}),k=Math.max(1,Math.ceil(O.length/b)),F=O.slice((y-1)*b,y*b),B=P=>{P<1||P>k||v(P)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage incoming orders and update their status"})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-card/60 border border-border/40 rounded-2xl p-3 glass-effect",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Order Type"}),p.jsxs(ms,{value:o,onValueChange:P=>l(P),children:[p.jsx(Wn,{className:"h-9 text-xs",children:p.jsx(gs,{placeholder:"All Types"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All Types"}),p.jsx(tt,{value:"dine_in",children:"Dine In"}),p.jsx(tt,{value:"takeaway",children:"Take Away"})]})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Status"}),p.jsxs(ms,{value:u,onValueChange:P=>h(P),children:[p.jsx(Wn,{className:"h-9 text-xs",children:p.jsx(gs,{placeholder:"All Status"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All Status"}),p.jsx(tt,{value:"paid",children:"Paid"}),p.jsx(tt,{value:"preparing",children:"Preparing"}),p.jsx(tt,{value:"ready",children:"Ready"}),p.jsx(tt,{value:"completed",children:"Completed"}),p.jsx(tt,{value:"served",children:"Served"}),p.jsx(tt,{value:"cancelled",children:"Cancelled"})]})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Date"}),p.jsx("input",{type:"date",value:f,onChange:P=>x(P.target.value),className:"h-9 w-full rounded-md border border-border/40 bg-background/60 px-2 text-xs text-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/60"})]})]}),p.jsx("div",{className:"flex justify-end -mt-1",children:p.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-1 text-[10px] text-muted-foreground hover:text-primary transition-colors",children:[p.jsx(yC,{className:"w-3 h-3"}),p.jsx("span",{children:"Clear filters"})]})}),n?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(Rc,{className:"h-8 w-8 animate-spin text-primary"})}):O.length===0?p.jsx(We,{children:p.jsx(bt,{className:"py-12 text-center text-muted-foreground",children:"No orders found for selected filters"})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 auto-rows-fr",children:F.map(P=>{const L=R(P.status);return p.jsxs(We,{className:`border border-border/40 rounded-2xl overflow-hidden transition-all duration-150 hover:shadow-md ${C(P.status)}`,children:[p.jsx(or,{className:"pb-2 px-3 pt-3",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex items-start gap-1.5",children:[p.jsx(Fs,{className:"h-3.5 w-3.5 mt-0.5 shrink-0 text-primary"}),p.jsxs("div",{className:"leading-tight",children:[p.jsx("div",{className:"text-xs font-semibold text-foreground",children:P.customer_name}),P.customer_phone&&p.jsx("div",{className:"text-[10px] text-muted-foreground",children:P.customer_phone})]})]}),p.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[p.jsx(Vs,{className:`px-2 py-0.5 text-[10px] font-medium rounded-full ${L.className}`,children:L.label}),p.jsxs("div",{className:"text-[9px] text-muted-foreground font-mono",children:["#",P.id.substring(0,8)]})]})]})}),p.jsxs(bt,{className:"px-3 pb-3 pt-1 space-y-2.5",children:[p.jsx("div",{className:"space-y-1.5",children:p.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-muted-foreground",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[P.order_type==="dine_in"?p.jsx(yx,{className:"h-3.5 w-3.5"}):p.jsx(_h,{className:"h-3.5 w-3.5"}),p.jsx("span",{className:"capitalize",children:P.order_type==="dine_in"?"Dine in":"Takeaway"})]}),p.jsxs("div",{className:"flex flex-col items-end gap-0",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(gx,{className:"h-3.5 w-3.5"}),p.jsx("span",{children:S(P.created_at)})]}),p.jsx("div",{className:"text-[8px] text-muted-foreground/80",children:(()=>{const W=new Date(P.created_at),q=String(W.getDate()).padStart(2,"0"),K=String(W.getMonth()+1).padStart(2,"0"),ie=W.getFullYear();let G=W.getHours();const $=String(W.getMinutes()).padStart(2,"0"),re=G>=12?"PM":"AM";return G=G%12||12,`${q}/${K}/${ie} - ${G}:${$} ${re}`})()})]})]})}),p.jsxs("div",{className:"space-y-0.5",children:[p.jsx("h4",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:"Items"}),p.jsxs("ul",{className:"space-y-0.5",children:[P.order_items.slice(0,3).map((W,q)=>p.jsxs("li",{className:"text-[10px] text-muted-foreground truncate",children:[W.quantity,"x ",W.name]},q)),P.order_items.length>3&&p.jsxs("li",{className:"text-[9px] text-muted-foreground/80",children:["+",P.order_items.length-3," more item",P.order_items.length-3>1?"s":""]})]})]}),p.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-border/40",children:[p.jsxs("span",{className:"font-semibold text-xs",children:[P.total_amount.toLocaleString()," MMK"]}),p.jsxs(ms,{value:P.status,onValueChange:W=>E(P.id,W),children:[p.jsx(Wn,{className:"h-8 w-32 text-[10px]",children:p.jsx(gs,{})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"paid",children:"Paid"}),p.jsx(tt,{value:"preparing",children:"Preparing"}),p.jsx(tt,{value:"ready",children:"Ready"}),p.jsx(tt,{value:"served",children:"Served"}),p.jsx(tt,{value:"completed",children:"Completed"}),p.jsx(tt,{value:"cancelled",children:"Cancelled"})]})]})]})]})]},P.id)})}),k>1&&p.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 pb-1",children:[p.jsx("button",{type:"button",onClick:()=>B(y-1),disabled:y===1,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===1?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""}),Array.from({length:k}).map((P,L)=>{const W=L+1,q=W===y;return p.jsx("button",{type:"button",onClick:()=>B(W),className:`min-w-9 h-9 px-2 rounded-full flex items-center justify-center text-xs font-semibold border transition-colors ${q?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background text-muted-foreground border-border/70 hover:bg-primary/5 hover:text-primary"}`,children:W},W)}),p.jsx("button",{type:"button",onClick:()=>B(y+1),disabled:y===k,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===k?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""})]})]})]})};var Ne;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ne||(Ne={}));var r_=new Map([[Ne.QR_CODE,"QR_CODE"],[Ne.AZTEC,"AZTEC"],[Ne.CODABAR,"CODABAR"],[Ne.CODE_39,"CODE_39"],[Ne.CODE_93,"CODE_93"],[Ne.CODE_128,"CODE_128"],[Ne.DATA_MATRIX,"DATA_MATRIX"],[Ne.MAXICODE,"MAXICODE"],[Ne.ITF,"ITF"],[Ne.EAN_13,"EAN_13"],[Ne.EAN_8,"EAN_8"],[Ne.PDF_417,"PDF_417"],[Ne.RSS_14,"RSS_14"],[Ne.RSS_EXPANDED,"RSS_EXPANDED"],[Ne.UPC_A,"UPC_A"],[Ne.UPC_E,"UPC_E"],[Ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),n_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(n_||(n_={}));function kF(t){return Object.values(Ne).includes(t)}var Hs;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Hs||(Hs={}));var Ls=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Hs.SCAN_TYPE_CAMERA,Hs.SCAN_TYPE_FILE],t}(),iI=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!r_.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,r_.get(e))},t}(),s_=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),dg;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(dg||(dg={}));var oI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:dg.UNKWOWN_ERROR}},t}(),aI=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ni(t){return typeof t>"u"||t===null}function PF(t,e,r){return t>r?r:t<e?e:t}var Fl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),_t=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),i_=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),lI=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(s),l=Object.keys(e),u=0,h=l;u<h.length;u++){var f=h[u];if(o.has(f))return r.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},t}(),fg={exports:{}};(function(t,e){(function(r,n){n(e)})(qc,function(r){function n(j){return j==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,i){j.__proto__=i}||function(j,i){for(var a in i)i.hasOwnProperty(a)&&(j[a]=i[a])};function o(j,i){s(j,i);function a(){this.constructor=j}j.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function l(j,i){var a=Object.setPrototypeOf;a?a(j,i):j.__proto__=i}function u(j,i){i===void 0&&(i=j.constructor);var a=Error.captureStackTrace;a&&a(j,i)}var h=function(j){o(i,j);function i(a){var c=this.constructor,d=j.call(this,a)||this;return Object.defineProperty(d,"name",{value:c.name,enumerable:!1}),l(d,c.prototype),u(d),d}return i}(Error);class f extends h{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}f.kind="Exception";class x extends f{}x.kind="ArgumentException";class y extends f{}y.kind="IllegalArgumentException";class v{constructor(i){if(this.binarizer=i,i===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,c,d){const m=this.binarizer.getLuminanceSource().crop(i,a,c,d);return new v(this.binarizer.createBinarizer(m))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends f{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class A{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class E{static arraycopy(i,a,c,d,m){for(;m--;)c[d++]=i[a++]}static currentTimeMillis(){return Date.now()}}class I extends f{}I.kind="IndexOutOfBoundsException";class R extends I{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}R.kind="ArrayIndexOutOfBoundsException";class C{static fill(i,a){for(let c=0,d=i.length;c<d;c++)i[c]=a}static fillWithin(i,a,c,d){C.rangeCheck(i.length,a,c);for(let m=a;m<c;m++)i[m]=d}static rangeCheck(i,a,c){if(a>c)throw new y("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new R(a);if(c>i)throw new R(c)}static asList(...i){return i}static create(i,a,c){return Array.from({length:i}).map(m=>Array.from({length:a}).fill(c))}static createInt32Array(i,a,c){return Array.from({length:i}).map(m=>Int32Array.from({length:a}).fill(c))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let c=0,d=i.length;c<d;c++)if(i[c]!==a[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const c of i)a=31*a+c;return a}static fillUint8Array(i,a){for(let c=0;c!==i.length;c++)i[c]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const c=new Uint8Array(a);return c.set(i),c}return i.slice(0,a)}static copyOfRange(i,a,c){const d=c-a,m=new Int32Array(d);return E.arraycopy(i,a,m,0,d),m}static binarySearch(i,a,c){c===void 0&&(c=C.numberComparator);let d=0,m=i.length-1;for(;d<=m;){const g=m+d>>1,w=c(a,i[g]);if(w>0)d=g+1;else if(w<0)m=g-1;else return g}return-d-1}static numberComparator(i,a){return i-a}}class S{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let c=31;return a=i<<16,a!==0&&(c-=16,i=a),a=i<<8,a!==0&&(c-=8,i=a),a=i<<4,a!==0&&(c-=4,i=a),a=i<<2,a!==0&&(c-=2,i=a),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class O{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=O.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=O.makeArray(i);E.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const c=this.bits;let d=Math.floor(i/32),m=c[d];m&=~((1<<(i&31))-1);const g=c.length;for(;m===0;){if(++d===g)return a;m=c[d]}const w=d*32+S.numberOfTrailingZeros(m);return w>a?a:w}getNextUnset(i){const a=this.size;if(i>=a)return a;const c=this.bits;let d=Math.floor(i/32),m=~c[d];m&=~((1<<(i&31))-1);const g=c.length;for(;m===0;){if(++d===g)return a;m=~c[d]}const w=d*32+S.numberOfTrailingZeros(m);return w>a?a:w}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new y;if(a===i)return;a--;const c=Math.floor(i/32),d=Math.floor(a/32),m=this.bits;for(let g=c;g<=d;g++){const w=g>c?0:i&31,T=(2<<(g<d?31:a&31))-(1<<w);m[g]|=T}}clear(){const i=this.bits.length,a=this.bits;for(let c=0;c<i;c++)a[c]=0}isRange(i,a,c){if(a<i||i<0||a>this.size)throw new y;if(a===i)return!0;a--;const d=Math.floor(i/32),m=Math.floor(a/32),g=this.bits;for(let w=d;w<=m;w++){const _=w>d?0:i&31,M=(2<<(w<m?31:a&31))-(1<<_)&4294967295;if((g[w]&M)!==(c?M:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new y("Sizes don't match");const a=this.bits;for(let c=0,d=a.length;c<d;c++)a[c]^=i.bits[c]}toBytes(i,a,c,d){for(let m=0;m<d;m++){let g=0;for(let w=0;w<8;w++)this.get(i)&&(g|=1<<7-w),i++;a[c+m]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,d=this.bits;for(let m=0;m<c;m++){let g=d[m];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[a-m]=g}if(this.size!==c*32){const m=c*32-this.size;let g=i[0]>>>m;for(let w=1;w<c;w++){const _=i[w];g|=_<<32-m,i[w-1]=g,g=_>>>m}i[c-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof O))return!1;const a=i;return this.size===a.size&&C.equals(this.bits,a.bits)}hashCode(){return 31*this.size+C.hashCode(this.bits)}toString(){let i="";for(let a=0,c=this.size;a<c;a++)a&7||(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new O(this.size,this.bits.slice())}}var k;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(k||(k={}));var F=k;class B extends f{static getFormatInstance(){return new B}}B.kind="FormatException";var P;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(P||(P={}));class L{constructor(i,a,c,...d){this.valueIdentifier=i,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=d,L.VALUE_IDENTIFIER_TO_ECI.set(i,this),L.NAME_TO_ECI.set(c,this);const m=this.values;for(let g=0,w=m.length;g!==w;g++){const _=m[g];L.VALUES_TO_ECI.set(_,this)}for(const g of d)L.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const a=L.VALUES_TO_ECI.get(i);if(a===void 0)throw new B("incorect value");return a}static getCharacterSetECIByName(i){const a=L.NAME_TO_ECI.get(i);if(a===void 0)throw new B("incorect value");return a}equals(i){if(!(i instanceof L))return!1;const a=i;return this.getName()===a.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(P.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(P.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(P.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(P.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(P.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(P.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(P.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(P.Big5,28,"Big5"),L.GB18030=new L(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(P.EUC_KR,30,"EUC_KR","EUC-KR");class W extends f{}W.kind="UnsupportedOperationException";class q{static decode(i,a){const c=this.encodingName(a);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!q.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const c=this.encodingName(a);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof L?i:L.getCharacterSetECIByName(i)}static decodeFallback(i,a){const c=this.encodingCharacterSet(a);if(q.isDecodeFallbackSupported(c)){let d="";for(let m=0,g=i.length;m<g;m++){let w=i[m].toString(16);w.length<2&&(w="0"+w),d+="%"+w}return decodeURIComponent(d)}if(c.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new W(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(L.UTF8)||i.equals(L.ISO8859_1)||i.equals(L.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),d=[];for(let m=0;m<c.length;m++)d.push(c[m].charCodeAt(0));return new Uint8Array(d)}}class K{static castAsNonUtf8Char(i,a=null){const c=a?a.getName():this.ISO88591;return q.decode(new Uint8Array([i]),c)}static guessEncoding(i,a){if(a!=null&&a.get(F.CHARACTER_SET)!==void 0)return a.get(F.CHARACTER_SET).toString();const c=i.length;let d=!0,m=!0,g=!0,w=0,_=0,T=0,M=0,D=0,U=0,V=0,Y=0,X=0,J=0,se=0;const ge=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let we=0;we<c&&(d||m||g);we++){const pe=i[we]&255;g&&(w>0?pe&128?w--:g=!1:pe&128&&(pe&64?(w++,pe&32?(w++,pe&16?(w++,pe&8?g=!1:M++):T++):_++):g=!1)),d&&(pe>127&&pe<160?d=!1:pe>159&&(pe<192||pe===215||pe===247)&&se++),m&&(D>0?pe<64||pe===127||pe>252?m=!1:D--:pe===128||pe===160||pe>239?m=!1:pe>160&&pe<224?(U++,Y=0,V++,V>X&&(X=V)):pe>127?(D++,V=0,Y++,Y>J&&(J=Y)):(V=0,Y=0))}return g&&w>0&&(g=!1),m&&D>0&&(m=!1),g&&(ge||_+T+M>0)?K.UTF8:m&&(K.ASSUME_SHIFT_JIS||X>=3||J>=3)?K.SHIFT_JIS:d&&m?X===2&&U===2||se*10>=c?K.SHIFT_JIS:K.ISO88591:d?K.ISO88591:m?K.SHIFT_JIS:g?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let c=-1;function d(g,w,_,T,M,D){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=M?parseInt(M.substr(1)):void 0,V;switch(D){case"s":V=a[c];break;case"c":V=a[c][0];break;case"f":V=parseFloat(a[c]).toFixed(g);break;case"p":V=parseFloat(a[c]).toPrecision(g);break;case"e":V=parseFloat(a[c]).toExponential(g);break;case"x":V=parseInt(a[c]).toString(U||16);break;case"d":V=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(U);let Y=parseInt(_),X=_&&_[0]+""=="0"?"0":" ";for(;V.length<Y;)V=w!==void 0?V+X:X+V;return V}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,d)}static getBytes(i,a){return q.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}K.SHIFT_JIS=L.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=L.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=L.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class ie{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=K.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,c){for(let d=a;a<a+c;d++)this.append(i[d]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class G{constructor(i,a,c,d){if(this.width=i,this.height=a,this.rowSize=c,this.bits=d,a==null&&(a=i),this.height=a,i<1||a<1)throw new y("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,c=i[0].length,d=new G(c,a);for(let m=0;m<a;m++){const g=i[m];for(let w=0;w<c;w++)g[w]&&d.set(w,m)}return d}static parseFromString(i,a,c){if(i===null)throw new y("stringRepresentation cannot be null");const d=new Array(i.length);let m=0,g=0,w=-1,_=0,T=0;for(;T<i.length;)if(i.charAt(T)===`
`||i.charAt(T)==="\r"){if(m>g){if(w===-1)w=m-g;else if(m-g!==w)throw new y("row lengths do not match");g=m,_++}T++}else if(i.substring(T,T+a.length)===a)T+=a.length,d[m]=!0,m++;else if(i.substring(T,T+c.length)===c)T+=c.length,d[m]=!1,m++;else throw new y("illegal character encountered: "+i.substring(T));if(m>g){if(w===-1)w=m-g;else if(m-g!==w)throw new y("row lengths do not match");_++}const M=new G(w,_);for(let D=0;D<m;D++)d[D]&&M.set(Math.floor(D%w),Math.floor(D/w));return M}get(i,a){const c=a*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,a){const c=a*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,a){const c=a*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,a){const c=a*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new y("input matrix dimensions do not match");const a=new O(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits;for(let m=0,g=this.height;m<g;m++){const w=m*c,_=i.getRow(m,a).getBitArray();for(let T=0;T<c;T++)d[w+T]^=_[T]}}clear(){const i=this.bits,a=i.length;for(let c=0;c<a;c++)i[c]=0}setRegion(i,a,c,d){if(a<0||i<0)throw new y("Left and top must be nonnegative");if(d<1||c<1)throw new y("Height and width must be at least 1");const m=i+c,g=a+d;if(g>this.height||m>this.width)throw new y("The region must fit inside the matrix");const w=this.rowSize,_=this.bits;for(let T=a;T<g;T++){const M=T*w;for(let D=i;D<m;D++)_[M+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new O(this.width):a.clear();const c=this.rowSize,d=this.bits,m=i*c;for(let g=0;g<c;g++)a.setBulk(g*32,d[m+g]);return a}setRow(i,a){E.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let c=new O(i),d=new O(i);for(let m=0,g=Math.floor((a+1)/2);m<g;m++)c=this.getRow(m,c),d=this.getRow(a-1-m,d),c.reverse(),d.reverse(),this.setRow(m,d),this.setRow(a-1-m,c)}getEnclosingRectangle(){const i=this.width,a=this.height,c=this.rowSize,d=this.bits;let m=i,g=a,w=-1,_=-1;for(let T=0;T<a;T++)for(let M=0;M<c;M++){const D=d[T*c+M];if(D!==0){if(T<g&&(g=T),T>_&&(_=T),M*32<m){let U=0;for(;!(D<<31-U&4294967295);)U++;M*32+U<m&&(m=M*32+U)}if(M*32+31>w){let U=31;for(;!(D>>>U);)U--;M*32+U>w&&(w=M*32+U)}}}return w<m||_<g?null:Int32Array.from([m,g,w-m+1,_-g+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;const d=c/i;let m=c%i*32;const g=a[c];let w=0;for(;!(g<<31-w&4294967295);)w++;return m+=w,Int32Array.from([m,d])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;const d=Math.floor(c/i);let m=Math.floor(c%i)*32;const g=a[c];let w=31;for(;!(g>>>w);)w--;return m+=w,Int32Array.from([m,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof G))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&C.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+C.hashCode(this.bits),i}toString(i="X ",a="  ",c=`
`){return this.buildToString(i,a,c)}buildToString(i,a,c){let d=new ie;for(let m=0,g=this.height;m<g;m++){for(let w=0,_=this.width;w<_;w++)d.append(this.get(w,m)?i:a);d.append(c)}return d.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends f{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class re extends A{constructor(i){super(i),this.luminances=re.EMPTY,this.buckets=new Int32Array(re.LUMINANCE_BUCKETS)}getBlackRow(i,a){const c=this.getLuminanceSource(),d=c.getWidth();a==null||a.getSize()<d?a=new O(d):a.clear(),this.initArrays(d);const m=c.getRow(i,this.luminances),g=this.buckets;for(let _=0;_<d;_++)g[(m[_]&255)>>re.LUMINANCE_SHIFT]++;const w=re.estimateBlackPoint(g);if(d<3)for(let _=0;_<d;_++)(m[_]&255)<w&&a.set(_);else{let _=m[0]&255,T=m[1]&255;for(let M=1;M<d-1;M++){const D=m[M+1]&255;(T*4-_-D)/2<w&&a.set(M),_=T,T=D}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),c=i.getHeight(),d=new G(a,c);this.initArrays(a);const m=this.buckets;for(let _=1;_<5;_++){const T=Math.floor(c*_/5),M=i.getRow(T,this.luminances),D=Math.floor(a*4/5);for(let U=Math.floor(a/5);U<D;U++){const V=M[U]&255;m[V>>re.LUMINANCE_SHIFT]++}}const g=re.estimateBlackPoint(m),w=i.getMatrix();for(let _=0;_<c;_++){const T=_*a;for(let M=0;M<a;M++)(w[T+M]&255)<g&&d.set(M,_)}return d}createBinarizer(i){return new re(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let c=0;c<re.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(i){const a=i.length;let c=0,d=0,m=0;for(let M=0;M<a;M++)i[M]>m&&(d=M,m=i[M]),i[M]>c&&(c=i[M]);let g=0,w=0;for(let M=0;M<a;M++){const D=M-d,U=i[M]*D*D;U>w&&(g=M,w=U)}if(d>g){const M=d;d=g,g=M}if(g-d<=a/16)throw new $;let _=g-1,T=-1;for(let M=g-1;M>d;M--){const D=M-d,U=D*D*(g-M)*(c-i[M]);U>T&&(_=M,T=U)}return _<<re.LUMINANCE_SHIFT}}re.LUMINANCE_BITS=5,re.LUMINANCE_SHIFT=8-re.LUMINANCE_BITS,re.LUMINANCE_BUCKETS=1<<re.LUMINANCE_BITS,re.EMPTY=Uint8ClampedArray.from([0]);class Z extends re{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),c=i.getHeight();if(a>=Z.MINIMUM_DIMENSION&&c>=Z.MINIMUM_DIMENSION){const d=i.getMatrix();let m=a>>Z.BLOCK_SIZE_POWER;a&Z.BLOCK_SIZE_MASK&&m++;let g=c>>Z.BLOCK_SIZE_POWER;c&Z.BLOCK_SIZE_MASK&&g++;const w=Z.calculateBlackPoints(d,m,g,a,c),_=new G(a,c);Z.calculateThresholdForBlock(d,m,g,a,c,w,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new Z(i)}static calculateThresholdForBlock(i,a,c,d,m,g,w){const _=m-Z.BLOCK_SIZE,T=d-Z.BLOCK_SIZE;for(let M=0;M<c;M++){let D=M<<Z.BLOCK_SIZE_POWER;D>_&&(D=_);const U=Z.cap(M,2,c-3);for(let V=0;V<a;V++){let Y=V<<Z.BLOCK_SIZE_POWER;Y>T&&(Y=T);const X=Z.cap(V,2,a-3);let J=0;for(let ge=-2;ge<=2;ge++){const we=g[U+ge];J+=we[X-2]+we[X-1]+we[X]+we[X+1]+we[X+2]}const se=J/25;Z.thresholdBlock(i,Y,D,se,d,w)}}}static cap(i,a,c){return i<a?a:i>c?c:i}static thresholdBlock(i,a,c,d,m,g){for(let w=0,_=c*m+a;w<Z.BLOCK_SIZE;w++,_+=m)for(let T=0;T<Z.BLOCK_SIZE;T++)(i[_+T]&255)<=d&&g.set(a+T,c+w)}static calculateBlackPoints(i,a,c,d,m){const g=m-Z.BLOCK_SIZE,w=d-Z.BLOCK_SIZE,_=new Array(c);for(let T=0;T<c;T++){_[T]=new Int32Array(a);let M=T<<Z.BLOCK_SIZE_POWER;M>g&&(M=g);for(let D=0;D<a;D++){let U=D<<Z.BLOCK_SIZE_POWER;U>w&&(U=w);let V=0,Y=255,X=0;for(let se=0,ge=M*d+U;se<Z.BLOCK_SIZE;se++,ge+=d){for(let we=0;we<Z.BLOCK_SIZE;we++){const pe=i[ge+we]&255;V+=pe,pe<Y&&(Y=pe),pe>X&&(X=pe)}if(X-Y>Z.MIN_DYNAMIC_RANGE)for(se++,ge+=d;se<Z.BLOCK_SIZE;se++,ge+=d)for(let we=0;we<Z.BLOCK_SIZE;we++)V+=i[ge+we]&255}let J=V>>Z.BLOCK_SIZE_POWER*2;if(X-Y<=Z.MIN_DYNAMIC_RANGE&&(J=Y/2,T>0&&D>0)){const se=(_[T-1][D]+2*_[T][D-1]+_[T-1][D-1])/4;Y<se&&(J=se)}_[T][D]=J}}return _}}Z.BLOCK_SIZE_POWER=3,Z.BLOCK_SIZE=1<<Z.BLOCK_SIZE_POWER,Z.BLOCK_SIZE_MASK=Z.BLOCK_SIZE-1,Z.MINIMUM_DIMENSION=Z.BLOCK_SIZE*5,Z.MIN_DYNAMIC_RANGE=24;class Q{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,c,d){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new ie;for(let c=0;c<this.height;c++){const d=this.getRow(c,i);for(let m=0;m<this.width;m++){const g=d[m]&255;let w;g<64?w="#":g<128?w="+":g<192?w=".":w=" ",a.append(w)}a.append(`
`)}return a.toString()}}class H extends Q{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const c=this.delegate.getRow(i,a),d=this.getWidth();for(let m=0;m<d;m++)c[m]=255-(c[m]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let d=0;d<a;d++)c[d]=255-(i[d]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,c,d){return new H(this.delegate.crop(i,a,c,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new H(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new H(this.delegate.rotateCounterClockwise45())}}class te extends Q{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=te.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return te.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,c){const d=new Uint8ClampedArray(a*c);for(let m=0,g=0,w=i.length;m<w;m+=4,g++){let _;if(i[m+3]===0)_=255;else{const M=i[m],D=i[m+1],U=i[m+2];_=306*M+601*D+117*U+512>>10}d[g]=_}return d}getRow(i,a){if(i<0||i>=this.getHeight())throw new y("Requested row is outside the image: "+i);const c=this.getWidth(),d=i*c;return a===null?a=this.buffer.slice(d,d+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(d,d+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,c,d){return super.crop(i,a,c,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),c=a.getContext("2d"),d=i*te.DEGREE_TO_RADIANS,m=this.canvas.width,g=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(d))*m+Math.abs(Math.sin(d))*g),_=Math.ceil(Math.abs(Math.sin(d))*m+Math.abs(Math.cos(d))*g);return a.width=w,a.height=_,c.translate(w/2,_/2),c.rotate(d),c.drawImage(this.canvas,m/-2,g/-2),this.buffer=te.makeBufferFromCanvasImageData(a),this}invert(){return new H(this)}}te.DEGREE_TO_RADIANS=Math.PI/180;class ce{constructor(i,a,c){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||qc||self||window||void 0)&&(globalThis||qc||self||window||void 0).__awaiter||function(j,i,a,c){function d(m){return m instanceof a?m:new a(function(g){g(m)})}return new(a||(a=Promise))(function(m,g){function w(M){try{T(c.next(M))}catch(D){g(D)}}function _(M){try{T(c.throw(M))}catch(D){g(D)}}function T(M){M.done?m(M.value):d(M.value).then(w,_)}T((c=c.apply(j,i||[])).next())})};class oe{constructor(i,a=500,c){this.reader=i,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const c of i){const d=c.kind==="video"?"videoinput":c.kind;if(d!=="videoinput")continue;const m=c.deviceId||c.id,g=c.label||`Video device ${a.length+1}`,w=c.groupId,_={deviceId:m,label:g,kind:d,groupId:w};a.push(_)}return a})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ce(a.deviceId,a.label))})}findDeviceById(i){return ae(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return ae(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const d={video:c};return yield this.decodeOnceFromConstraints(d,a)})}decodeOnceFromConstraints(i,a){return ae(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(i,a){return ae(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,a,c){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,c)})}decodeFromVideoDevice(i,a,c){return ae(this,void 0,void 0,function*(){let d;i?d={deviceId:{exact:i}}:d={facingMode:"environment"};const m={video:d};return yield this.decodeFromConstraints(m,a,c)})}decodeFromConstraints(i,a,c){return ae(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(d,a,c)})}decodeFromStream(i,a,c){return ae(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(d,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return ae(this,void 0,void 0,function*(){const c=this.prepareVideoElement(a);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((a,c)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const c=document.getElementById(i);if(!c)throw new x(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new x(`element with id '${i}' must be an ${a} element`);return c}decodeFromImage(i,a){if(!i&&!a)throw new x("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new x("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,c){if(i===void 0&&a===void 0)throw new x("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const c=this._decodeOnLoadImage(a);return a.src=i,c}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=i,c}decodeFromVideoUrlContinuously(i,a){if(!i)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,a);return c.src=i,d}_decodeOnLoadImage(i){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,c=!0){this._stopAsyncDecode=!1;const d=(m,g)=>{if(this._stopAsyncDecode){g(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(i);m(w)}catch(w){const _=a&&w instanceof $,M=(w instanceof b||w instanceof B)&&c;if(_||M)return setTimeout(d,this._timeBetweenDecodingAttempts,m,g);g(w)}};return new Promise((m,g)=>d(m,g))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(i);a(d,null),setTimeout(c,this.timeBetweenScansMillis)}catch(d){a(null,d);const m=d instanceof b||d instanceof B,g=d instanceof $;(m||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,c){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),c=new te(a),d=new Z(c);return new v(d)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let c,d;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,d=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,d=i.naturalHeight||i.height)),a.style.width=c+"px",a.style.height=d+"px",a.width=c,a.height=d,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ue{constructor(i,a,c=a==null?0:8*a.length,d,m,g=E.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=c,this.resultPoints=d,this.format=m,this.timestamp=g,this.text=i,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=d,this.format=m,this.resultMetadata=null,g==null?this.timestamp=E.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(a.length+i.length);E.arraycopy(a,0,c,0,a.length),E.arraycopy(i,0,c,a.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ke;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var ye=ke,_e;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_e||(_e={}));var Re=_e;class Xe{constructor(i,a,c,d,m=-1,g=-1){this.rawBytes=i,this.text=a,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ye{exp(i){return this.expTable[i]}log(i){if(i===0)throw new y;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class Ue{constructor(i,a){if(a.length===0)throw new y;this.field=i;const c=a.length;if(c>1&&a[0]===0){let d=1;for(;d<c&&a[d]===0;)d++;d===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-d),E.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let c;if(i===1){c=0;for(let g=0,w=a.length;g!==w;g++){const _=a[g];c=Ye.addOrSubtract(c,_)}return c}c=a[0];const d=a.length,m=this.field;for(let g=1;g<d;g++)c=Ye.addOrSubtract(m.multiply(i,c),a[g]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,c=i.coefficients;if(a.length>c.length){const g=a;a=c,c=g}let d=new Int32Array(c.length);const m=c.length-a.length;E.arraycopy(c,0,d,0,m);for(let g=m;g<c.length;g++)d[g]=Ye.addOrSubtract(a[g-m],c[g]);return new Ue(this.field,d)}multiply(i){if(!this.field.equals(i.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,c=a.length,d=i.coefficients,m=d.length,g=new Int32Array(c+m-1),w=this.field;for(let _=0;_<c;_++){const T=a[_];for(let M=0;M<m;M++)g[_+M]=Ye.addOrSubtract(g[_+M],w.multiply(T,d[M]))}return new Ue(w,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,c=this.field,d=new Int32Array(a),m=this.coefficients;for(let g=0;g<a;g++)d[g]=c.multiply(m[g],i);return new Ue(c,d)}multiplyByMonomial(i,a){if(i<0)throw new y;if(a===0)return this.field.getZero();const c=this.coefficients,d=c.length,m=new Int32Array(d+i),g=this.field;for(let w=0;w<d;w++)m[w]=g.multiply(c[w],a);return new Ue(g,m)}divide(i){if(!this.field.equals(i.field))throw new y("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new y("Divide by 0");const a=this.field;let c=a.getZero(),d=this;const m=i.getCoefficient(i.getDegree()),g=a.inverse(m);for(;d.getDegree()>=i.getDegree()&&!d.isZero();){const w=d.getDegree()-i.getDegree(),_=a.multiply(d.getCoefficient(d.getDegree()),g),T=i.multiplyByMonomial(w,_),M=a.buildMonomial(w,_);c=c.addOrSubtract(M),d=d.addOrSubtract(T)}return[c,d]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),a===0||c!==1){const d=this.field.log(c);d===0?i+="1":d===1?i+="a":(i+="a^",i+=d)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class nt extends f{}nt.kind="ArithmeticException";class Ve extends Ye{constructor(i,a,c){super(),this.primitive=i,this.size=a,this.generatorBase=c;const d=new Int32Array(a);let m=1;for(let w=0;w<a;w++)d[w]=m,m*=2,m>=a&&(m^=i,m&=a-1);this.expTable=d;const g=new Int32Array(a);for(let w=0;w<a-1;w++)g[d[w]]=w;this.logTable=g,this.zero=new Ue(this,Int32Array.from([0])),this.one=new Ue(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new y;if(a===0)return this.zero;const c=new Int32Array(i+1);return c[0]=a,new Ue(this,c)}inverse(i){if(i===0)throw new nt;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Ve.AZTEC_DATA_12=new Ve(4201,4096,1),Ve.AZTEC_DATA_10=new Ve(1033,1024,1),Ve.AZTEC_DATA_6=new Ve(67,64,1),Ve.AZTEC_PARAM=new Ve(19,16,1),Ve.QR_CODE_FIELD_256=new Ve(285,256,0),Ve.DATA_MATRIX_FIELD_256=new Ve(301,256,1),Ve.AZTEC_DATA_8=Ve.DATA_MATRIX_FIELD_256,Ve.MAXICODE_FIELD_64=Ve.AZTEC_DATA_6;class lr extends f{}lr.kind="ReedSolomonException";class wr extends f{}wr.kind="IllegalStateException";class Nr{constructor(i){this.field=i}decode(i,a){const c=this.field,d=new Ue(c,i),m=new Int32Array(a);let g=!0;for(let V=0;V<a;V++){const Y=d.evaluateAt(c.exp(V+c.getGeneratorBase()));m[m.length-1-V]=Y,Y!==0&&(g=!1)}if(g)return;const w=new Ue(c,m),_=this.runEuclideanAlgorithm(c.buildMonomial(a,1),w,a),T=_[0],M=_[1],D=this.findErrorLocations(T),U=this.findErrorMagnitudes(M,D);for(let V=0;V<D.length;V++){const Y=i.length-1-c.log(D[V]);if(Y<0)throw new lr("Bad error location");i[Y]=Ve.addOrSubtract(i[Y],U[V])}}runEuclideanAlgorithm(i,a,c){if(i.getDegree()<a.getDegree()){const V=i;i=a,a=V}const d=this.field;let m=i,g=a,w=d.getZero(),_=d.getOne();for(;g.getDegree()>=(c/2|0);){let V=m,Y=w;if(m=g,w=_,m.isZero())throw new lr("r_{i-1} was zero");g=V;let X=d.getZero();const J=m.getCoefficient(m.getDegree()),se=d.inverse(J);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){const ge=g.getDegree()-m.getDegree(),we=d.multiply(g.getCoefficient(g.getDegree()),se);X=X.addOrSubtract(d.buildMonomial(ge,we)),g=g.addOrSubtract(m.multiplyByMonomial(ge,we))}if(_=X.multiply(w).addOrSubtract(Y),g.getDegree()>=m.getDegree())throw new wr("Division algorithm failed to reduce polynomial?")}const T=_.getCoefficient(0);if(T===0)throw new lr("sigmaTilde(0) was zero");const M=d.inverse(T),D=_.multiplyScalar(M),U=g.multiplyScalar(M);return[D,U]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(a);let d=0;const m=this.field;for(let g=1;g<m.getSize()&&d<a;g++)i.evaluateAt(g)===0&&(c[d]=m.inverse(g),d++);if(d!==a)throw new lr("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,a){const c=a.length,d=new Int32Array(c),m=this.field;for(let g=0;g<c;g++){const w=m.inverse(a[g]);let _=1;for(let T=0;T<c;T++)if(g!==T){const M=m.multiply(a[T],w),D=M&1?M&-2:M|1;_=m.multiply(_,D)}d[g]=m.multiply(i.evaluateAt(w),m.inverse(_)),m.getGeneratorBase()!==0&&(d[g]=m.multiply(d[g],w))}return d}}var he;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(he||(he={}));class Pe{decode(i){this.ddata=i;let a=i.getBits(),c=this.extractBits(a),d=this.correctBits(c),m=Pe.convertBoolArrayToByteArray(d),g=Pe.getEncodedData(d),w=new Xe(m,g,null,null);return w.setNumBits(d.length),w}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,c=he.UPPER,d=he.UPPER,m="",g=0;for(;g<a;)if(d===he.BINARY){if(a-g<5)break;let w=Pe.readCode(i,g,5);if(g+=5,w===0){if(a-g<11)break;w=Pe.readCode(i,g,11)+31,g+=11}for(let _=0;_<w;_++){if(a-g<8){g=a;break}const T=Pe.readCode(i,g,8);m+=K.castAsNonUtf8Char(T),g+=8}d=c}else{let w=d===he.DIGIT?4:5;if(a-g<w)break;let _=Pe.readCode(i,g,w);g+=w;let T=Pe.getCharacter(d,_);T.startsWith("CTRL_")?(c=d,d=Pe.getTable(T.charAt(5)),T.charAt(6)==="L"&&(c=d)):(m+=T,d=c)}return m}static getTable(i){switch(i){case"L":return he.LOWER;case"P":return he.PUNCT;case"M":return he.MIXED;case"D":return he.DIGIT;case"B":return he.BINARY;case"U":default:return he.UPPER}}static getCharacter(i,a){switch(i){case he.UPPER:return Pe.UPPER_TABLE[a];case he.LOWER:return Pe.LOWER_TABLE[a];case he.MIXED:return Pe.MIXED_TABLE[a];case he.PUNCT:return Pe.PUNCT_TABLE[a];case he.DIGIT:return Pe.DIGIT_TABLE[a];default:throw new wr("Bad table")}}correctBits(i){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=Ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=Ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=Ve.AZTEC_DATA_10):(c=12,a=Ve.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),m=i.length/c;if(m<d)throw new B;let g=i.length%c,w=new Int32Array(m);for(let U=0;U<m;U++,g+=c)w[U]=Pe.readCode(i,g,c);try{new Nr(a).decode(w,m-d)}catch(U){throw new B(U)}let _=(1<<c)-1,T=0;for(let U=0;U<d;U++){let V=w[U];if(V===0||V===_)throw new B;(V===1||V===_-1)&&T++}let M=new Array(d*c-T),D=0;for(let U=0;U<d;U++){let V=w[U];if(V===1||V===_-1)M.fill(V>1,D,D+c-1),D+=c-1;else for(let Y=c-1;Y>=0;--Y)M[D++]=(V&1<<Y)!==0}return M}extractBits(i){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(a?11:14)+c*4,m=new Int32Array(d),g=new Array(this.totalBitsInLayer(c,a));if(a)for(let w=0;w<m.length;w++)m[w]=w;else{let w=d+1+2*S.truncDivision(S.truncDivision(d,2)-1,15),_=d/2,T=S.truncDivision(w,2);for(let M=0;M<_;M++){let D=M+S.truncDivision(M,15);m[_-M-1]=T-D-1,m[_+M]=T+D+1}}for(let w=0,_=0;w<c;w++){let T=(c-w)*4+(a?9:12),M=w*2,D=d-1-M;for(let U=0;U<T;U++){let V=U*2;for(let Y=0;Y<2;Y++)g[_+V+Y]=i.get(m[M+Y],m[M+U]),g[_+2*T+V+Y]=i.get(m[M+U],m[D-Y]),g[_+4*T+V+Y]=i.get(m[D-Y],m[D-U]),g[_+6*T+V+Y]=i.get(m[D-U],m[M+Y])}_+=T*8}return g}static readCode(i,a,c){let d=0;for(let m=a;m<a+c;m++)d<<=1,i[m]&&(d|=1);return d}static readByte(i,a){let c=i.length-a;return c>=8?Pe.readCode(i,a,8):Pe.readCode(i,a,c)<<8-c}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let c=0;c<a.length;c++)a[c]=Pe.readByte(i,8*c);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Pe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Pe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Pe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Pe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Pe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Se{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,c,d){const m=i-c,g=a-d;return Math.sqrt(m*m+g*g)}static sum(i){let a=0;for(let c=0,d=i.length;c!==d;c++){const m=i[c];a+=m}return a}}class vt{static floatToIntBits(i){return i}}vt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ve{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ve){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*vt.floatToIntBits(this.x)+vt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),d=this.distance(i[0],i[2]);let m,g,w;if(c>=a&&c>=d?(g=i[0],m=i[1],w=i[2]):d>=c&&d>=a?(g=i[1],m=i[0],w=i[2]):(g=i[2],m=i[0],w=i[1]),this.crossProductZ(m,g,w)<0){const _=m;m=w,w=_}i[0]=m,i[1]=g,i[2]=w}static distance(i,a){return Se.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,c){const d=a.x,m=a.y;return(c.x-d)*(i.y-m)-(c.y-m)*(i.x-d)}}class jr{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it extends jr{constructor(i,a,c,d,m){super(i,a),this.compact=c,this.nbDatablocks=d,this.nbLayers=m}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(i,a,c,d){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=Zt.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),d==null&&(d=i.getHeight()/2|0);const m=a/2|0;if(this.leftInit=c-m,this.rightInit=c+m,this.upInit=d-m,this.downInit=d+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let i=this.leftInit,a=this.rightInit,c=this.upInit,d=this.downInit,m=!1,g=!0,w=!1,_=!1,T=!1,M=!1,D=!1;const U=this.width,V=this.height;for(;g;){g=!1;let Y=!0;for(;(Y||!_)&&a<U;)Y=this.containsBlackPoint(c,d,a,!1),Y?(a++,g=!0,_=!0):_||a++;if(a>=U){m=!0;break}let X=!0;for(;(X||!T)&&d<V;)X=this.containsBlackPoint(i,a,d,!0),X?(d++,g=!0,T=!0):T||d++;if(d>=V){m=!0;break}let J=!0;for(;(J||!M)&&i>=0;)J=this.containsBlackPoint(c,d,i,!1),J?(i--,g=!0,M=!0):M||i--;if(i<0){m=!0;break}let se=!0;for(;(se||!D)&&c>=0;)se=this.containsBlackPoint(i,a,c,!0),se?(c--,g=!0,D=!0):D||c--;if(c<0){m=!0;break}g&&(w=!0)}if(!m&&w){const Y=a-i;let X=null;for(let we=1;X===null&&we<Y;we++)X=this.getBlackPointOnSegment(i,d-we,i+we,d);if(X==null)throw new $;let J=null;for(let we=1;J===null&&we<Y;we++)J=this.getBlackPointOnSegment(i,c+we,i+we,c);if(J==null)throw new $;let se=null;for(let we=1;se===null&&we<Y;we++)se=this.getBlackPointOnSegment(a,c+we,a-we,c);if(se==null)throw new $;let ge=null;for(let we=1;ge===null&&we<Y;we++)ge=this.getBlackPointOnSegment(a,d-we,a-we,d);if(ge==null)throw new $;return this.centerEdges(ge,X,se,J)}else throw new $}getBlackPointOnSegment(i,a,c,d){const m=Se.round(Se.distance(i,a,c,d)),g=(c-i)/m,w=(d-a)/m,_=this.image;for(let T=0;T<m;T++){const M=Se.round(i+T*g),D=Se.round(a+T*w);if(_.get(M,D))return new ve(M,D)}return null}centerEdges(i,a,c,d){const m=i.getX(),g=i.getY(),w=a.getX(),_=a.getY(),T=c.getX(),M=c.getY(),D=d.getX(),U=d.getY(),V=Zt.CORR;return m<this.width/2?[new ve(D-V,U+V),new ve(w+V,_+V),new ve(T-V,M-V),new ve(m+V,g-V)]:[new ve(D+V,U+V),new ve(w+V,_-V),new ve(T-V,M+V),new ve(m-V,g-V)]}containsBlackPoint(i,a,c,d){const m=this.image;if(d){for(let g=i;g<=a;g++)if(m.get(g,c))return!0}else for(let g=i;g<=a;g++)if(m.get(c,g))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class ea{static checkAndNudgePoints(i,a){const c=i.getWidth(),d=i.getHeight();let m=!0;for(let g=0;g<a.length&&m;g+=2){const w=Math.floor(a[g]),_=Math.floor(a[g+1]);if(w<-1||w>c||_<-1||_>d)throw new $;m=!1,w===-1?(a[g]=0,m=!0):w===c&&(a[g]=c-1,m=!0),_===-1?(a[g+1]=0,m=!0):_===d&&(a[g+1]=d-1,m=!0)}m=!0;for(let g=a.length-2;g>=0&&m;g-=2){const w=Math.floor(a[g]),_=Math.floor(a[g+1]);if(w<-1||w>c||_<-1||_>d)throw new $;m=!1,w===-1?(a[g]=0,m=!0):w===c&&(a[g]=c-1,m=!0),_===-1?(a[g+1]=0,m=!0):_===d&&(a[g+1]=d-1,m=!0)}}}class St{constructor(i,a,c,d,m,g,w,_,T){this.a11=i,this.a21=a,this.a31=c,this.a12=d,this.a22=m,this.a32=g,this.a13=w,this.a23=_,this.a33=T}static quadrilateralToQuadrilateral(i,a,c,d,m,g,w,_,T,M,D,U,V,Y,X,J){const se=St.quadrilateralToSquare(i,a,c,d,m,g,w,_);return St.squareToQuadrilateral(T,M,D,U,V,Y,X,J).times(se)}transformPoints(i){const a=i.length,c=this.a11,d=this.a12,m=this.a13,g=this.a21,w=this.a22,_=this.a23,T=this.a31,M=this.a32,D=this.a33;for(let U=0;U<a;U+=2){const V=i[U],Y=i[U+1],X=m*V+_*Y+D;i[U]=(c*V+g*Y+T)/X,i[U+1]=(d*V+w*Y+M)/X}}transformPointsWithValues(i,a){const c=this.a11,d=this.a12,m=this.a13,g=this.a21,w=this.a22,_=this.a23,T=this.a31,M=this.a32,D=this.a33,U=i.length;for(let V=0;V<U;V++){const Y=i[V],X=a[V],J=m*Y+_*X+D;i[V]=(c*Y+g*X+T)/J,a[V]=(d*Y+w*X+M)/J}}static squareToQuadrilateral(i,a,c,d,m,g,w,_){const T=i-c+m-w,M=a-d+g-_;if(T===0&&M===0)return new St(c-i,m-c,i,d-a,g-d,a,0,0,1);{const D=c-m,U=w-m,V=d-g,Y=_-g,X=D*Y-U*V,J=(T*Y-U*M)/X,se=(D*M-T*V)/X;return new St(c-i+J*c,w-i+se*w,i,d-a+J*d,_-a+se*_,a,J,se,1)}}static quadrilateralToSquare(i,a,c,d,m,g,w,_){return St.squareToQuadrilateral(i,a,c,d,m,g,w,_).buildAdjoint()}buildAdjoint(){return new St(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new St(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class bi extends ea{sampleGrid(i,a,c,d,m,g,w,_,T,M,D,U,V,Y,X,J,se,ge,we){const pe=St.quadrilateralToQuadrilateral(d,m,g,w,_,T,M,D,U,V,Y,X,J,se,ge,we);return this.sampleGridWithTransform(i,a,c,pe)}sampleGridWithTransform(i,a,c,d){if(a<=0||c<=0)throw new $;const m=new G(a,c),g=new Float32Array(2*a);for(let w=0;w<c;w++){const _=g.length,T=w+.5;for(let M=0;M<_;M+=2)g[M]=M/2+.5,g[M+1]=T;d.transformPoints(g),ea.checkAndNudgePoints(i,g);try{for(let M=0;M<_;M+=2)i.get(Math.floor(g[M]),Math.floor(g[M+1]))&&m.set(M/2,w)}catch{throw new $}}return m}}class qs{static setGridSampler(i){qs.gridSampler=i}static getInstance(){return qs.gridSampler}}qs.gridSampler=new bi;class Dr{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ta{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(i){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let d=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),m=this.getMatrixCornerPoints(c);return new it(d,m,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new $;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(c,a);let d=0;for(let g=0;g<4;g++){let w=c[(this.shift+g)%4];this.compact?(d<<=7,d+=w>>1&127):(d<<=10,d+=(w>>2&992)+(w>>1&31))}let m=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(m>>6)+1,this.nbDataBlocks=(m&63)+1):(this.nbLayers=(m>>11)+1,this.nbDataBlocks=(m&2047)+1)}getRotation(i,a){let c=0;i.forEach((d,m,g)=>{let w=(d>>a-2<<1)+(d&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let d=0;d<4;d++)if(S.bitCount(c^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new $}getCorrectedParameterData(i,a){let c,d;a?(c=7,d=2):(c=10,d=4);let m=c-d,g=new Int32Array(c);for(let _=c-1;_>=0;--_)g[_]=i&15,i>>=4;try{new Nr(Ve.AZTEC_PARAM).decode(g,m)}catch{throw new $}let w=0;for(let _=0;_<d;_++)w=(w<<4)+g[_];return w}getBullsEyeCorners(i){let a=i,c=i,d=i,m=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(a,g,1,-1),U=this.getFirstDifferent(c,g,1,1),V=this.getFirstDifferent(d,g,-1,1),Y=this.getFirstDifferent(m,g,-1,-1);if(this.nbCenterLayers>2){let X=this.distancePoint(Y,D)*this.nbCenterLayers/(this.distancePoint(m,a)*(this.nbCenterLayers+2));if(X<.75||X>1.25||!this.isWhiteOrBlackRectangle(D,U,V,Y))break}a=D,c=U,d=V,m=Y,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let w=new ve(a.getX()+.5,a.getY()-.5),_=new ve(c.getX()+.5,c.getY()+.5),T=new ve(d.getX()-.5,d.getY()+.5),M=new ve(m.getX()-.5,m.getY()-.5);return this.expandSquare([w,_,T,M],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,c,d;try{let w=new Zt(this.image).detect();i=w[0],a=w[1],c=w[2],d=w[3]}catch{let _=this.image.getWidth()/2,T=this.image.getHeight()/2;i=this.getFirstDifferent(new Dr(_+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Dr(_+7,T+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Dr(_-7,T+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Dr(_-7,T-7),!1,-1,-1).toResultPoint()}let m=Se.round((i.getX()+d.getX()+a.getX()+c.getX())/4),g=Se.round((i.getY()+d.getY()+a.getY()+c.getY())/4);try{let w=new Zt(this.image,15,m,g).detect();i=w[0],a=w[1],c=w[2],d=w[3]}catch{i=this.getFirstDifferent(new Dr(m+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Dr(m+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Dr(m-7,g+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Dr(m-7,g-7),!1,-1,-1).toResultPoint()}return m=Se.round((i.getX()+d.getX()+a.getX()+c.getX())/4),g=Se.round((i.getY()+d.getY()+a.getY()+c.getY())/4),new Dr(m,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,c,d,m){let g=qs.getInstance(),w=this.getDimension(),_=w/2-this.nbCenterLayers,T=w/2+this.nbCenterLayers;return g.sampleGrid(i,w,w,_,_,T,_,T,T,_,T,a.getX(),a.getY(),c.getX(),c.getY(),d.getX(),d.getY(),m.getX(),m.getY())}sampleLine(i,a,c){let d=0,m=this.distanceResultPoint(i,a),g=m/c,w=i.getX(),_=i.getY(),T=g*(a.getX()-i.getX())/m,M=g*(a.getY()-i.getY())/m;for(let D=0;D<c;D++)this.image.get(Se.round(w+D*T),Se.round(_+D*M))&&(d|=1<<c-D-1);return d}isWhiteOrBlackRectangle(i,a,c,d){let m=3;i=new Dr(i.getX()-m,i.getY()+m),a=new Dr(a.getX()-m,a.getY()-m),c=new Dr(c.getX()+m,c.getY()-m),d=new Dr(d.getX()+m,d.getY()+m);let g=this.getColor(d,i);if(g===0)return!1;let w=this.getColor(i,a);return w!==g||(w=this.getColor(a,c),w!==g)?!1:(w=this.getColor(c,d),w===g)}getColor(i,a){let c=this.distancePoint(i,a),d=(a.getX()-i.getX())/c,m=(a.getY()-i.getY())/c,g=0,w=i.getX(),_=i.getY(),T=this.image.get(i.getX(),i.getY()),M=Math.ceil(c);for(let U=0;U<M;U++)w+=d,_+=m,this.image.get(Se.round(w),Se.round(_))!==T&&g++;let D=g/c;return D>.1&&D<.9?0:D<=.1===T?1:-1}getFirstDifferent(i,a,c,d){let m=i.getX()+c,g=i.getY()+d;for(;this.isValid(m,g)&&this.image.get(m,g)===a;)m+=c,g+=d;for(m-=c,g-=d;this.isValid(m,g)&&this.image.get(m,g)===a;)m+=c;for(m-=c;this.isValid(m,g)&&this.image.get(m,g)===a;)g+=d;return g-=d,new Dr(m,g)}expandSquare(i,a,c){let d=c/(2*a),m=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),w=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,T=new ve(w+d*m,_+d*g),M=new ve(w-d*m,_-d*g);m=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),w=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let D=new ve(w+d*m,_+d*g),U=new ve(w-d*m,_-d*g);return[T,D,M,U]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=Se.round(i.getX()),c=Se.round(i.getY());return this.isValid(a,c)}distancePoint(i,a){return Se.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return Se.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class rl{decode(i,a=null){let c=null,d=new ta(i.getBlackMatrix()),m=null,g=null;try{let M=d.detectMirror(!1);m=M.getPoints(),this.reportFoundResultPoints(a,m),g=new Pe().decode(M)}catch(M){c=M}if(g==null)try{let M=d.detectMirror(!0);m=M.getPoints(),this.reportFoundResultPoints(a,m),g=new Pe().decode(M)}catch(M){throw c??M}let w=new ue(g.getText(),g.getRawBytes(),g.getNumBits(),m,ye.AZTEC,E.currentTimeMillis()),_=g.getByteSegments();_!=null&&w.putMetadata(Re.BYTE_SEGMENTS,_);let T=g.getECLevel();return T!=null&&w.putMetadata(Re.ERROR_CORRECTION_LEVEL,T),w}reportFoundResultPoints(i,a){if(i!=null){let c=i.get(F.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((d,m,g)=>{c.foundPossibleResultPoint(d)})}}reset(){}}class jd extends oe{constructor(i=500){super(new rl,i)}}class Bt{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(F.TRY_HARDER)===!0&&i.isRotateSupported()){const m=i.rotateCounterClockwise(),g=this.doDecode(m,a),w=g.getResultMetadata();let _=270;w!==null&&w.get(Re.ORIENTATION)===!0&&(_=_+w.get(Re.ORIENTATION)%360),g.putMetadata(Re.ORIENTATION,_);const T=g.getResultPoints();if(T!==null){const M=m.getHeight();for(let D=0;D<T.length;D++)T[D]=new ve(M-T[D].getY()-1,T[D].getX())}return g}else throw new $}}reset(){}doDecode(i,a){const c=i.getWidth(),d=i.getHeight();let m=new O(c);const g=a&&a.get(F.TRY_HARDER)===!0,w=Math.max(1,d>>(g?8:5));let _;g?_=d:_=15;const T=Math.trunc(d/2);for(let M=0;M<_;M++){const D=Math.trunc((M+1)/2),U=(M&1)===0,V=T+w*(U?D:-D);if(V<0||V>=d)break;try{m=i.getBlackRow(V,m)}catch{continue}for(let Y=0;Y<2;Y++){if(Y===1&&(m.reverse(),a&&a.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const X=new Map;a.forEach((J,se)=>X.set(se,J)),X.delete(F.NEED_RESULT_POINT_CALLBACK),a=X}try{const X=this.decodeRow(V,m,a);if(Y===1){X.putMetadata(Re.ORIENTATION,180);const J=X.getResultPoints();J!==null&&(J[0]=new ve(c-J[0].getX()-1,J[0].getY()),J[1]=new ve(c-J[1].getX()-1,J[1].getY()))}return X}catch{}}}throw new $}static recordPattern(i,a,c){const d=c.length;for(let T=0;T<d;T++)c[T]=0;const m=i.getSize();if(a>=m)throw new $;let g=!i.get(a),w=0,_=a;for(;_<m;){if(i.get(_)!==g)c[w]++;else{if(++w===d)break;c[w]=1,g=!g}_++}if(!(w===d||w===d-1&&_===m))throw new $}static recordPatternInReverse(i,a,c){let d=c.length,m=i.get(a);for(;a>0&&d>=0;)i.get(--a)!==m&&(d--,m=!m);if(d>=0)throw new $;Bt.recordPattern(i,a+1,c)}static patternMatchVariance(i,a,c){const d=i.length;let m=0,g=0;for(let T=0;T<d;T++)m+=i[T],g+=a[T];if(m<g)return Number.POSITIVE_INFINITY;const w=m/g;c*=w;let _=0;for(let T=0;T<d;T++){const M=i[T],D=a[T]*w,U=M>D?M-D:D-M;if(U>c)return Number.POSITIVE_INFINITY;_+=U}return _/m}}class be extends Bt{static findStartPattern(i){const a=i.getSize(),c=i.getNextSet(0);let d=0,m=Int32Array.from([0,0,0,0,0,0]),g=c,w=!1;const _=6;for(let T=c;T<a;T++)if(i.get(T)!==w)m[d]++;else{if(d===_-1){let M=be.MAX_AVG_VARIANCE,D=-1;for(let U=be.CODE_START_A;U<=be.CODE_START_C;U++){const V=Bt.patternMatchVariance(m,be.CODE_PATTERNS[U],be.MAX_INDIVIDUAL_VARIANCE);V<M&&(M=V,D=U)}if(D>=0&&i.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,D]);g+=m[0]+m[1],m=m.slice(2,m.length-1),m[d-1]=0,m[d]=0,d--}else d++;m[d]=1,w=!w}throw new $}static decodeCode(i,a,c){Bt.recordPattern(i,c,a);let d=be.MAX_AVG_VARIANCE,m=-1;for(let g=0;g<be.CODE_PATTERNS.length;g++){const w=be.CODE_PATTERNS[g],_=this.patternMatchVariance(a,w,be.MAX_INDIVIDUAL_VARIANCE);_<d&&(d=_,m=g)}if(m>=0)return m;throw new $}decodeRow(i,a,c){const d=c&&c.get(F.ASSUME_GS1)===!0,m=be.findStartPattern(a),g=m[2];let w=0;const _=new Uint8Array(20);_[w++]=g;let T;switch(g){case be.CODE_START_A:T=be.CODE_CODE_A;break;case be.CODE_START_B:T=be.CODE_CODE_B;break;case be.CODE_START_C:T=be.CODE_CODE_C;break;default:throw new B}let M=!1,D=!1,U="",V=m[0],Y=m[1];const X=Int32Array.from([0,0,0,0,0,0]);let J=0,se=0,ge=g,we=0,pe=!0,lt=!1,Qe=!1;for(;!M;){const dl=D;switch(D=!1,J=se,se=be.decodeCode(a,X,Y),_[w++]=se,se!==be.CODE_STOP&&(pe=!0),se!==be.CODE_STOP&&(we++,ge+=we*se),V=Y,Y+=X.reduce((H4,$4)=>H4+$4,0),se){case be.CODE_START_A:case be.CODE_START_B:case be.CODE_START_C:throw new B}switch(T){case be.CODE_CODE_A:if(se<64)Qe===lt?U+=String.fromCharCode(32+se):U+=String.fromCharCode(32+se+128),Qe=!1;else if(se<96)Qe===lt?U+=String.fromCharCode(se-64):U+=String.fromCharCode(se+64),Qe=!1;else switch(se!==be.CODE_STOP&&(pe=!1),se){case be.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_A:!lt&&Qe?(lt=!0,Qe=!1):lt&&Qe?(lt=!1,Qe=!1):Qe=!0;break;case be.CODE_SHIFT:D=!0,T=be.CODE_CODE_B;break;case be.CODE_CODE_B:T=be.CODE_CODE_B;break;case be.CODE_CODE_C:T=be.CODE_CODE_C;break;case be.CODE_STOP:M=!0;break}break;case be.CODE_CODE_B:if(se<96)Qe===lt?U+=String.fromCharCode(32+se):U+=String.fromCharCode(32+se+128),Qe=!1;else switch(se!==be.CODE_STOP&&(pe=!1),se){case be.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case be.CODE_FNC_2:case be.CODE_FNC_3:break;case be.CODE_FNC_4_B:!lt&&Qe?(lt=!0,Qe=!1):lt&&Qe?(lt=!1,Qe=!1):Qe=!0;break;case be.CODE_SHIFT:D=!0,T=be.CODE_CODE_A;break;case be.CODE_CODE_A:T=be.CODE_CODE_A;break;case be.CODE_CODE_C:T=be.CODE_CODE_C;break;case be.CODE_STOP:M=!0;break}break;case be.CODE_CODE_C:if(se<100)se<10&&(U+="0"),U+=se;else switch(se!==be.CODE_STOP&&(pe=!1),se){case be.CODE_FNC_1:d&&(U.length===0?U+="]C1":U+="");break;case be.CODE_CODE_A:T=be.CODE_CODE_A;break;case be.CODE_CODE_B:T=be.CODE_CODE_B;break;case be.CODE_STOP:M=!0;break}break}dl&&(T=T===be.CODE_CODE_A?be.CODE_CODE_B:be.CODE_CODE_A)}const yn=Y-V;if(Y=a.getNextUnset(Y),!a.isRange(Y,Math.min(a.getSize(),Y+(Y-V)/2),!1))throw new $;if(ge-=we*J,ge%103!==J)throw new b;const Cs=U.length;if(Cs===0)throw new $;Cs>0&&pe&&(T===be.CODE_CODE_C?U=U.substring(0,Cs-2):U=U.substring(0,Cs-1));const wn=(m[1]+m[0])/2,Nt=V+yn/2,Fr=_.length,kn=new Uint8Array(Fr);for(let dl=0;dl<Fr;dl++)kn[dl]=_[dl];const ul=[new ve(wn,i),new ve(Nt,i)];return new ue(U,kn,0,ul,ye.CODE_128,new Date().getTime())}}be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],be.MAX_AVG_VARIANCE=.25,be.MAX_INDIVIDUAL_VARIANCE=.7,be.CODE_SHIFT=98,be.CODE_CODE_C=99,be.CODE_CODE_B=100,be.CODE_CODE_A=101,be.CODE_FNC_1=102,be.CODE_FNC_2=97,be.CODE_FNC_3=96,be.CODE_FNC_4_A=101,be.CODE_FNC_4_B=100,be.CODE_START_A=103,be.CODE_START_B=104,be.CODE_START_C=105,be.CODE_STOP=106;class Jt extends Bt{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let m=Jt.findAsteriskPattern(a,d),g=a.getNextSet(m[1]),w=a.getSize(),_,T;do{Jt.recordPattern(a,g,d);let X=Jt.toNarrowWidePattern(d);if(X<0)throw new $;_=Jt.patternToChar(X),this.decodeRowResult+=_,T=g;for(let J of d)g+=J;g=a.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let M=0;for(let X of d)M+=X;let D=g-T-M;if(g!==w&&D*2<M)throw new $;if(this.usingCheckDigit){let X=this.decodeRowResult.length-1,J=0;for(let se=0;se<X;se++)J+=Jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(X)!==Jt.ALPHABET_STRING.charAt(J%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,X)}if(this.decodeRowResult.length===0)throw new $;let U;this.extendedMode?U=Jt.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let V=(m[1]+m[0])/2,Y=T+M/2;return new ue(U,null,0,[new ve(V,i),new ve(Y,i)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let c=i.getSize(),d=i.getNextSet(0),m=0,g=d,w=!1,_=a.length;for(let T=d;T<c;T++)if(i.get(T)!==w)a[m]++;else{if(m===_-1){if(this.toNarrowWidePattern(a)===Jt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=a[0]+a[1],a.copyWithin(0,2,2+m-1),a[m-1]=0,a[m]=0,m--}else m++;a[m]=1,w=!w}throw new $}static toNarrowWidePattern(i){let a=i.length,c=0,d;do{let m=2147483647;for(let _ of i)_<m&&_>c&&(m=_);c=m,d=0;let g=0,w=0;for(let _=0;_<a;_++){let T=i[_];T>c&&(w|=1<<a-1-_,d++,g+=T)}if(d===3){for(let _=0;_<a&&d>0;_++){let T=i[_];if(T>c&&(d--,T*2>=g))return-1}return w}}while(d>3);return-1}static patternToChar(i){for(let a=0;a<Jt.CHARACTER_ENCODINGS.length;a++)if(Jt.CHARACTER_ENCODINGS[a]===i)return Jt.ALPHABET_STRING.charAt(a);if(i===Jt.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(i){let a=i.length,c="";for(let d=0;d<a;d++){let m=i.charAt(d);if(m==="+"||m==="$"||m==="%"||m==="/"){let g=i.charAt(d+1),w="\0";switch(m){case"+":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)+32);else throw new B;break;case"$":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)-64);else throw new B;break;case"%":if(g>="A"&&g<="E")w=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")w=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")w=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")w="\0";else if(g==="V")w="@";else if(g==="W")w="`";else if(g==="X"||g==="Y"||g==="Z")w="";else throw new B;break;case"/":if(g>="A"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")w=":";else throw new B;break}c+=w,d++}else c+=m}return c}}Jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Jt.ASTERISK_ENCODING=148;class ft extends Bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,c){let d=this.decodeStart(a),m=this.decodeEnd(a),g=new ie;ft.decodeMiddle(a,d[1],m[0],g);let w=g.toString(),_=null;c!=null&&(_=c.get(F.ALLOWED_LENGTHS)),_==null&&(_=ft.DEFAULT_ALLOWED_LENGTHS);let T=w.length,M=!1,D=0;for(let Y of _){if(T===Y){M=!0;break}Y>D&&(D=Y)}if(!M&&T>D&&(M=!0),!M)throw new B;const U=[new ve(d[1],i),new ve(m[0],i)];return new ue(w,null,0,U,ye.ITF,new Date().getTime())}static decodeMiddle(i,a,c,d){let m=new Int32Array(10),g=new Int32Array(5),w=new Int32Array(5);for(m.fill(0),g.fill(0),w.fill(0);a<c;){Bt.recordPattern(i,a,m);for(let T=0;T<5;T++){let M=2*T;g[T]=m[M],w[T]=m[M+1]}let _=ft.decodeDigit(g);d.append(_.toString()),_=this.decodeDigit(w),d.append(_.toString()),m.forEach(function(T){a+=T})}}decodeStart(i){let a=ft.skipWhiteSpace(i),c=ft.findGuardPattern(i,a,ft.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let d=a-1;c>0&&d>=0&&!i.get(d);d--)c--;if(c!==0)throw new $}static skipWhiteSpace(i){const a=i.getSize(),c=i.getNextSet(0);if(c===a)throw new $;return c}decodeEnd(i){i.reverse();try{let a=ft.skipWhiteSpace(i),c;try{c=ft.findGuardPattern(i,a,ft.END_PATTERN_REVERSED[0])}catch(m){m instanceof $&&(c=ft.findGuardPattern(i,a,ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let d=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-d,c}finally{i.reverse()}}static findGuardPattern(i,a,c){let d=c.length,m=new Int32Array(d),g=i.getSize(),w=!1,_=0,T=a;m.fill(0);for(let M=a;M<g;M++)if(i.get(M)!==w)m[_]++;else{if(_===d-1){if(Bt.patternMatchVariance(m,c,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return[T,M];T+=m[0]+m[1],E.arraycopy(m,2,m,0,_-1),m[_-1]=0,m[_]=0,_--}else _++;m[_]=1,w=!w}throw new $}static decodeDigit(i){let a=ft.MAX_AVG_VARIANCE,c=-1,d=ft.PATTERNS.length;for(let m=0;m<d;m++){let g=ft.PATTERNS[m],w=Bt.patternMatchVariance(i,g,ft.MAX_INDIVIDUAL_VARIANCE);w<a?(a=w,c=m):w===a&&(c=-1)}if(c>=0)return c%10;throw new $}}ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ft.MAX_AVG_VARIANCE=.38,ft.MAX_INDIVIDUAL_VARIANCE=.5,ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ft.START_PATTERN=Int32Array.from([1,1,1,1]),ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ft extends Bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,c,d=0,m=Int32Array.from([0,0,0]);for(;!a;){m=Int32Array.from([0,0,0]),c=Ft.findGuardPattern(i,d,!1,this.START_END_PATTERN,m);let g=c[0];d=c[1];let w=g-(d-g);w>=0&&(a=i.isRange(w,g,!1))}return c}static checkChecksum(i){return Ft.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let c=parseInt(i.charAt(a-1),10);return Ft.getStandardUPCEANChecksum(i.substring(0,a-1))===c}static getStandardUPCEANChecksum(i){let a=i.length,c=0;for(let d=a-1;d>=0;d-=2){let m=i.charAt(d).charCodeAt(0)-48;if(m<0||m>9)throw new B;c+=m}c*=3;for(let d=a-2;d>=0;d-=2){let m=i.charAt(d).charCodeAt(0)-48;if(m<0||m>9)throw new B;c+=m}return(1e3-c)%10}static decodeEnd(i,a){return Ft.findGuardPattern(i,a,!1,Ft.START_END_PATTERN,new Int32Array(Ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,c,d){return this.findGuardPattern(i,a,c,d,new Int32Array(d.length))}static findGuardPattern(i,a,c,d,m){let g=i.getSize();a=c?i.getNextUnset(a):i.getNextSet(a);let w=0,_=a,T=d.length,M=c;for(let D=a;D<g;D++)if(i.get(D)!==M)m[w]++;else{if(w===T-1){if(Bt.patternMatchVariance(m,d,Ft.MAX_INDIVIDUAL_VARIANCE)<Ft.MAX_AVG_VARIANCE)return Int32Array.from([_,D]);_+=m[0]+m[1];let U=m.slice(2,m.length-1);for(let V=0;V<w-1;V++)m[V]=U[V];m[w-1]=0,m[w]=0,w--}else w++;m[w]=1,M=!M}throw new $}static decodeDigit(i,a,c,d){this.recordPattern(i,c,a);let m=this.MAX_AVG_VARIANCE,g=-1,w=d.length;for(let _=0;_<w;_++){let T=d[_],M=Bt.patternMatchVariance(a,T,Ft.MAX_INDIVIDUAL_VARIANCE);M<m&&(m=M,g=_)}if(g>=0)return g;throw new $}}Ft.MAX_AVG_VARIANCE=.48,Ft.MAX_INDIVIDUAL_VARIANCE=.7,Ft.START_END_PATTERN=Int32Array.from([1,1,1]),Ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ra{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,c){let d=this.decodeRowStringBuffer,m=this.decodeMiddle(a,c,d),g=d.toString(),w=ra.parseExtensionString(g),_=[new ve((c[0]+c[1])/2,i),new ve(m,i)],T=new ue(g,null,0,_,ye.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(i,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let m=i.getSize(),g=a[1],w=0;for(let T=0;T<5&&g<m;T++){let M=Ft.decodeDigit(i,d,g,Ft.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let D of d)g+=D;M>=10&&(w|=1<<4-T),T!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(c.length!==5)throw new $;let _=this.determineCheckDigit(w);if(ra.extensionChecksum(c.toString())!==_)throw new $;return g}static extensionChecksum(i){let a=i.length,c=0;for(let d=a-2;d>=0;d-=2)c+=i.charAt(d).charCodeAt(0)-48;c*=3;for(let d=a-1;d>=0;d-=2)c+=i.charAt(d).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new $}static parseExtensionString(i){if(i.length!==5)return null;let a=ra.parseExtension5String(i);return a==null?null:new Map([[Re.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(i.substring(1)),d=(c/100).toString(),m=c%100,g=m<10?"0"+m:m.toString();return a+d+"."+g}}class nl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,c){let d=this.decodeRowStringBuffer,m=this.decodeMiddle(a,c,d),g=d.toString(),w=nl.parseExtensionString(g),_=[new ve((c[0]+c[1])/2,i),new ve(m,i)],T=new ue(g,null,0,_,ye.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(i,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let m=i.getSize(),g=a[1],w=0;for(let _=0;_<2&&g<m;_++){let T=Ft.decodeDigit(i,d,g,Ft.L_AND_G_PATTERNS);c+=String.fromCharCode(48+T%10);for(let M of d)g+=M;T>=10&&(w|=1<<1-_),_!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(c.length!==2)throw new $;if(parseInt(c.toString())%4!==w)throw new $;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[Re.ISSUE_NUMBER,parseInt(i)]])}}class Uc{static decodeRow(i,a,c){let d=Ft.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ra().decodeRow(i,a,d)}catch{return new nl().decodeRow(i,a,d)}}}Uc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends Ft{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=ht.L_PATTERNS[i-10],c=new Int32Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[a.length-d-1];ht.L_AND_G_PATTERNS[i]=c}}decodeRow(i,a,c){let d=ht.findStartGuardPattern(a),m=c==null?null:c.get(F.NEED_RESULT_POINT_CALLBACK);if(m!=null){const pe=new ve((d[0]+d[1])/2,i);m.foundPossibleResultPoint(pe)}let g=this.decodeMiddle(a,d,this.decodeRowStringBuffer),w=g.rowOffset,_=g.resultString;if(m!=null){const pe=new ve(w,i);m.foundPossibleResultPoint(pe)}let T=this.decodeEnd(a,w);if(m!=null){const pe=new ve((T[0]+T[1])/2,i);m.foundPossibleResultPoint(pe)}let M=T[1],D=M+(M-T[0]);if(D>=a.getSize()||!a.isRange(M,D,!1))throw new $;let U=_.toString();if(U.length<8)throw new B;if(!ht.checkChecksum(U))throw new b;let V=(d[1]+d[0])/2,Y=(T[1]+T[0])/2,X=this.getBarcodeFormat(),J=[new ve(V,i),new ve(Y,i)],se=new ue(U,null,0,J,X,new Date().getTime()),ge=0;try{let pe=Uc.decodeRow(i,a,T[1]);se.putMetadata(Re.UPC_EAN_EXTENSION,pe.getText()),se.putAllMetadata(pe.getResultMetadata()),se.addResultPoints(pe.getResultPoints()),ge=pe.getText().length}catch{}let we=c==null?null:c.get(F.ALLOWED_EAN_EXTENSIONS);if(we!=null){let pe=!1;for(let lt in we)if(ge.toString()===lt){pe=!0;break}if(!pe)throw new $}return se}decodeEnd(i,a){return ht.findGuardPattern(i,a,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return ht.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let c=parseInt(i.charAt(a-1),10);return ht.getStandardUPCEANChecksum(i.substring(0,a-1))===c}static getStandardUPCEANChecksum(i){let a=i.length,c=0;for(let d=a-1;d>=0;d-=2){let m=i.charAt(d).charCodeAt(0)-48;if(m<0||m>9)throw new B;c+=m}c*=3;for(let d=a-2;d>=0;d-=2){let m=i.charAt(d).charCodeAt(0)-48;if(m<0||m>9)throw new B;c+=m}return(1e3-c)%10}}class bs extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let m=i.getSize(),g=a[1],w=0;for(let T=0;T<6&&g<m;T++){let M=ht.decodeDigit(i,d,g,ht.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let D of d)g+=D;M>=10&&(w|=1<<5-T)}c=bs.determineFirstDigit(c,w),g=ht.findGuardPattern(i,g,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<m;T++){let M=ht.decodeDigit(i,d,g,ht.L_PATTERNS);c+=String.fromCharCode(48+M);for(let D of d)g+=D}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(i,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode(48+c)+i,i;throw new $}}bs.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Es extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,c){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let m=i.getSize(),g=a[1];for(let _=0;_<4&&g<m;_++){let T=ht.decodeDigit(i,d,g,ht.L_PATTERNS);c+=String.fromCharCode(48+T);for(let M of d)g+=M}g=ht.findGuardPattern(i,g,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&g<m;_++){let T=ht.decodeDigit(i,d,g,ht.L_PATTERNS);c+=String.fromCharCode(48+T);for(let M of d)g+=M}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return ye.EAN_8}}class Dd extends ht{constructor(){super(...arguments),this.ean13Reader=new bs}getBarcodeFormat(){return ye.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,c))}decodeMiddle(i,a,c){return this.ean13Reader.decodeMiddle(i,a,c)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let c=new ue(a.substring(1),null,null,i.getResultPoints(),ye.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new $}reset(){this.ean13Reader.reset()}}class Le extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,c){const d=this.decodeMiddleCounters.map(T=>T);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const m=i.getSize();let g=a[1],w=0;for(let T=0;T<6&&g<m;T++){const M=Le.decodeDigit(i,d,g,Le.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let D of d)g+=D;M>=10&&(w|=1<<5-T)}let _=Le.determineNumSysAndCheckDigit(c,w);return{rowOffset:g,resultString:_}}decodeEnd(i,a){return Le.findGuardPatternWithoutCounters(i,a,!0,Le.MIDDLE_END_PATTERN)}checkChecksum(i){return ht.checkChecksum(Le.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let c=0;c<=1;c++)for(let d=0;d<10;d++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d]){let m=String.fromCharCode(48+c),g=String.fromCharCode(48+d);return m+i+g}throw $.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(m=>m.charCodeAt(0)),c=new ie;c.append(i.charAt(0));let d=a[5];switch(d){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(d),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(d);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}Le.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Le.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class gt extends Bt{constructor(i){super();let a=i==null?null:i.get(F.POSSIBLE_FORMATS),c=[];n(a)?(c.push(new bs),c.push(new Dd),c.push(new Es),c.push(new Le)):(a.indexOf(ye.EAN_13)>-1&&c.push(new bs),a.indexOf(ye.UPC_A)>-1&&c.push(new Dd),a.indexOf(ye.EAN_8)>-1&&c.push(new Es),a.indexOf(ye.UPC_E)>-1&&c.push(new Le)),this.readers=c}decodeRow(i,a,c){for(let d of this.readers)try{const m=d.decodeRow(i,a,c),g=m.getBarcodeFormat()===ye.EAN_13&&m.getText().charAt(0)==="0",w=c==null?null:c.get(F.POSSIBLE_FORMATS),_=w==null||w.includes(ye.UPC_A);if(g&&_){const T=m.getRawBytes(),M=new ue(m.getText().substring(1),T,T?T.length:null,m.getResultPoints(),ye.UPC_A);return M.putAllMetadata(m.getResultMetadata()),M}return m}catch{}throw new $}reset(){for(let i of this.readers)i.reset()}}class Je extends Bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let c=0;c<a.length;c++)if(Bt.patternMatchVariance(i,a[c],Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return c;throw new $}static count(i){return Se.sum(new Int32Array(i))}static increment(i,a){let c=0,d=a[0];for(let m=1;m<i.length;m++)a[m]>d&&(d=a[m],c=m);i[c]++}static decrement(i,a){let c=0,d=a[0];for(let m=1;m<i.length;m++)a[m]<d&&(d=a[m],c=m);i[c]--}static isFinderPattern(i){let a=i[0]+i[1],c=a+i[2]+i[3],d=a/c;if(d>=Je.MIN_FINDER_PATTERN_RATIO&&d<=Je.MAX_FINDER_PATTERN_RATIO){let m=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let w of i)w>g&&(g=w),w<m&&(m=w);return g<10*m}return!1}}Je.MAX_AVG_VARIANCE=.2,Je.MAX_INDIVIDUAL_VARIANCE=.45,Je.MIN_FINDER_PATTERN_RATIO=9.5/12,Je.MAX_FINDER_PATTERN_RATIO=12.5/14;class Tr{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Tr))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class $r{constructor(i,a,c,d,m){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ve(c,m)),this.resultPoints.push(new ve(d,m))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof $r))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class vr{constructor(){}static getRSSvalue(i,a,c){let d=0;for(let _ of i)d+=_;let m=0,g=0,w=i.length;for(let _=0;_<w-1;_++){let T;for(T=1,g|=1<<_;T<i[_];T++,g&=~(1<<_)){let M=vr.combins(d-T-1,w-_-2);if(c&&g===0&&d-T-(w-_-1)>=w-_-1&&(M-=vr.combins(d-T-(w-_),w-_-2)),w-_-1>1){let D=0;for(let U=d-T-(w-_-2);U>a;U--)D+=vr.combins(d-T-U-1,w-_-3);M-=D*(w-1-_)}else d-T>a&&M--;m+=M}d-=T}return m}static combins(i,a){let c,d;i-a>a?(d=a,c=i-a):(d=i-a,c=a);let m=1,g=1;for(let w=i;w>c;w--)m*=w,g<=d&&(m/=g,g++);for(;g<=d;)m/=g,g++;return m}}class Ei{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let c=12*a,d=new O(c),m=0,w=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)w&1<<_&&d.set(m),m++;for(let _=1;_<i.length;++_){let T=i[_],M=T.getLeftChar().getValue();for(let D=11;D>=0;--D)M&1<<D&&d.set(m),m++;if(T.getRightChar()!=null){let D=T.getRightChar().getValue();for(let U=11;U>=0;--U)D&1<<U&&d.set(m),m++}}return d}}class _r{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ts{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class mn extends ts{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===mn.FNC1}}mn.FNC1="$";class na extends ts{constructor(i,a,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class rs extends ts{constructor(i,a,c){if(super(i),a<0||a>10||c<0||c>10)throw new B;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===rs.FNC1}isSecondDigitFNC1(){return this.secondDigit===rs.FNC1}isAnyFNC1(){return this.firstDigit===rs.FNC1||this.secondDigit===rs.FNC1}}rs.FNC1=10;class Ae{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new $;let a=i.substring(0,2);for(let m of Ae.TWO_DIGIT_DATA_LENGTH)if(m[0]===a)return m[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(2,m[2],i):Ae.processFixedAI(2,m[1],i);if(i.length<3)throw new $;let c=i.substring(0,3);for(let m of Ae.THREE_DIGIT_DATA_LENGTH)if(m[0]===c)return m[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(3,m[2],i):Ae.processFixedAI(3,m[1],i);for(let m of Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(m[0]===c)return m[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,m[2],i):Ae.processFixedAI(4,m[1],i);if(i.length<4)throw new $;let d=i.substring(0,4);for(let m of Ae.FOUR_DIGIT_DATA_LENGTH)if(m[0]===d)return m[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,m[2],i):Ae.processFixedAI(4,m[1],i);throw new $}static processFixedAI(i,a,c){if(c.length<i)throw new $;let d=c.substring(0,i);if(c.length<i+a)throw new $;let m=c.substring(i,i+a),g=c.substring(i+a),w="("+d+")"+m,_=Ae.parseFieldsInGeneralPurpose(g);return _==null?w:w+_}static processVariableAI(i,a,c){let d=c.substring(0,i),m;c.length<i+a?m=c.length:m=i+a;let g=c.substring(i,m),w=c.substring(m),_="("+d+")"+g,T=Ae.parseFieldsInGeneralPurpose(w);return T==null?_:_+T}}Ae.VARIABLE_LENGTH=[],Ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ae.VARIABLE_LENGTH,20],["22",Ae.VARIABLE_LENGTH,29],["30",Ae.VARIABLE_LENGTH,8],["37",Ae.VARIABLE_LENGTH,8],["90",Ae.VARIABLE_LENGTH,30],["91",Ae.VARIABLE_LENGTH,30],["92",Ae.VARIABLE_LENGTH,30],["93",Ae.VARIABLE_LENGTH,30],["94",Ae.VARIABLE_LENGTH,30],["95",Ae.VARIABLE_LENGTH,30],["96",Ae.VARIABLE_LENGTH,30],["97",Ae.VARIABLE_LENGTH,3],["98",Ae.VARIABLE_LENGTH,30],["99",Ae.VARIABLE_LENGTH,30]],Ae.THREE_DIGIT_DATA_LENGTH=[["240",Ae.VARIABLE_LENGTH,30],["241",Ae.VARIABLE_LENGTH,30],["242",Ae.VARIABLE_LENGTH,6],["250",Ae.VARIABLE_LENGTH,30],["251",Ae.VARIABLE_LENGTH,30],["253",Ae.VARIABLE_LENGTH,17],["254",Ae.VARIABLE_LENGTH,20],["400",Ae.VARIABLE_LENGTH,30],["401",Ae.VARIABLE_LENGTH,30],["402",17],["403",Ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ae.VARIABLE_LENGTH,20],["421",Ae.VARIABLE_LENGTH,15],["422",3],["423",Ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ae.VARIABLE_LENGTH,15],["391",Ae.VARIABLE_LENGTH,18],["392",Ae.VARIABLE_LENGTH,15],["393",Ae.VARIABLE_LENGTH,18],["703",Ae.VARIABLE_LENGTH,30]],Ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ae.VARIABLE_LENGTH,20],["8003",Ae.VARIABLE_LENGTH,30],["8004",Ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ae.VARIABLE_LENGTH,30],["8008",Ae.VARIABLE_LENGTH,12],["8018",18],["8020",Ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ae.VARIABLE_LENGTH,70],["8200",Ae.VARIABLE_LENGTH,70]];class sl{constructor(i){this.buffer=new ie,this.information=i}decodeAllCodes(i,a){let c=a,d=null;do{let m=this.decodeGeneralPurposeField(c,d),g=Ae.parseFieldsInGeneralPurpose(m.getNewString());if(g!=null&&i.append(g),m.isRemaining()?d=""+m.getRemainingValue():d=null,c===m.getNewPosition())break;c=m.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let m=this.extractNumericValueFromBitArray(i,4);return m===0?new rs(this.information.getSize(),rs.FNC1,rs.FNC1):new rs(this.information.getSize(),m-1,rs.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),c=(a-8)/11,d=(a-8)%11;return new rs(i+7,c,d)}extractNumericValueFromBitArray(i,a){return sl.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,c){let d=0;for(let m=0;m<c;++m)i.get(a+m)&&(d|=1<<c-m-1);return d}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new na(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new na(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new na(this.current.getPosition(),this.buffer.toString()):a=new na(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new _r(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new na(this.current.getPosition(),this.buffer.toString());return new _r(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _r(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new na(this.current.getPosition(),this.buffer.toString());return new _r(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _r(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new na(this.current.getPosition(),this.buffer.toString());return new _r(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _r(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(i,8);return d>=232&&d<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new mn(i+5,mn.FNC1);if(a>=5&&a<15)return new mn(i+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new mn(i+7,""+(c+1));if(c>=90&&c<116)return new mn(i+7,""+(c+7));let d=this.extractNumericValueFromBitArray(i,8),m;switch(d){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new B}return new mn(i+8,m)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new mn(i+5,mn.FNC1);if(a>=5&&a<15)return new mn(i+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new mn(i+6,""+(c+33));let d;switch(c){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new wr("Decoding invalid alphanumeric value: "+c)}return new mn(i+6,d)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class Y0{constructor(i){this.information=i,this.generalDecoder=new sl(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gn extends Y0{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,c)}encodeCompressedGtinWithoutAI(i,a,c){for(let d=0;d<4;++d){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*d,10);m/100===0&&i.append("0"),m/10===0&&i.append("0"),i.append(m)}gn.appendCheckDigit(i,c)}static appendCheckDigit(i,a){let c=0;for(let d=0;d<13;d++){let m=i.charAt(d+a).charCodeAt(0)-48;c+=d&1?m:3*m}c=10-c%10,c===10&&(c=0),i.append(c)}}gn.GTIN_SIZE=40;class il extends gn{constructor(i){super(i)}parseInformation(){let i=new ie;i.append("(01)");let a=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(il.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,il.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,il.HEADER_SIZE+44)}}il.HEADER_SIZE=4;class Ld extends Y0{constructor(i){super(i)}parseInformation(){let i=new ie;return this.getGeneralDecoder().decodeAllCodes(i,Ld.HEADER_SIZE)}}Ld.HEADER_SIZE=5;class Bd extends gn{constructor(i){super(i)}encodeCompressedWeight(i,a,c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(i,d);let m=this.checkWeight(d),g=1e5;for(let w=0;w<5;++w)m/g===0&&i.append("0"),g/=10;i.append(m)}}class Ks extends Bd{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ks.HEADER_SIZE+Bd.GTIN_SIZE+Ks.WEIGHT_SIZE)throw new $;let i=new ie;return this.encodeCompressedGtin(i,Ks.HEADER_SIZE),this.encodeCompressedWeight(i,Ks.HEADER_SIZE+Bd.GTIN_SIZE,Ks.WEIGHT_SIZE),i.toString()}}Ks.HEADER_SIZE=5,Ks.WEIGHT_SIZE=15;class g4 extends Ks{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class x4 extends Ks{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Qs extends gn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Qs.HEADER_SIZE+gn.GTIN_SIZE)throw new $;let i=new ie;this.encodeCompressedGtin(i,Qs.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Qs.HEADER_SIZE+gn.GTIN_SIZE,Qs.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Qs.HEADER_SIZE+gn.GTIN_SIZE+Qs.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}Qs.HEADER_SIZE=8,Qs.LAST_DIGIT_SIZE=2;class rn extends gn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<rn.HEADER_SIZE+gn.GTIN_SIZE)throw new $;let i=new ie;this.encodeCompressedGtin(i,rn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(rn.HEADER_SIZE+gn.GTIN_SIZE,rn.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(rn.HEADER_SIZE+gn.GTIN_SIZE+rn.LAST_DIGIT_SIZE,rn.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(rn.HEADER_SIZE+gn.GTIN_SIZE+rn.LAST_DIGIT_SIZE+rn.FIRST_THREE_DIGITS_SIZE,null);return i.append(d.getNewString()),i.toString()}}rn.HEADER_SIZE=8,rn.LAST_DIGIT_SIZE=2,rn.FIRST_THREE_DIGITS_SIZE=10;class Ut extends Bd{constructor(i,a,c){super(i),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Ut.HEADER_SIZE+Ut.GTIN_SIZE+Ut.WEIGHT_SIZE+Ut.DATE_SIZE)throw new $;let i=new ie;return this.encodeCompressedGtin(i,Ut.HEADER_SIZE),this.encodeCompressedWeight(i,Ut.HEADER_SIZE+Ut.GTIN_SIZE,Ut.WEIGHT_SIZE),this.encodeCompressedDate(i,Ut.HEADER_SIZE+Ut.GTIN_SIZE+Ut.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Ut.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let d=c%32;c/=32;let m=c%12+1;c/=12;let g=c;g/10==0&&i.append("0"),i.append(g),m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}Ut.HEADER_SIZE=8,Ut.WEIGHT_SIZE=20,Ut.DATE_SIZE=16;function Vy(j){try{if(j.get(1))return new il(j);if(!j.get(2))return new Ld(j);switch(sl.extractNumericValueFromBitArray(j,1,4)){case 4:return new g4(j);case 5:return new x4(j)}switch(sl.extractNumericValueFromBitArray(j,1,5)){case 12:return new Qs(j);case 13:return new rn(j)}switch(sl.extractNumericValueFromBitArray(j,1,7)){case 56:return new Ut(j,"310","11");case 57:return new Ut(j,"320","11");case 58:return new Ut(j,"310","13");case 59:return new Ut(j,"320","13");case 60:return new Ut(j,"310","15");case 61:return new Ut(j,"320","15");case 62:return new Ut(j,"310","17");case 63:return new Ut(j,"320","17")}}catch(i){throw console.log(i),new wr("unknown decoder: "+j)}}class Ki{constructor(i,a,c,d){this.leftchar=i,this.rightchar=a,this.finderpattern=c,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof Ki?Ki.equalsOrNull(i.leftchar,a.leftchar)&&Ki.equalsOrNull(i.rightchar,a.rightchar)&&Ki.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:Ki.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class X0{constructor(i,a,c){this.pairs=i,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof X0?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let c;return i.forEach((d,m)=>{a.forEach(g=>{d.getLeftChar().getValue()===g.getLeftChar().getValue()&&d.getRightChar().getValue()===g.getRightChar().getValue()&&d.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class de extends Je{constructor(i){super(...arguments),this.pairs=new Array(de.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,c){this.pairs.length=0,this.startFromEven=!1;try{return de.constructResult(this.decodeRow2pairs(i,a))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,de.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(m){if(m instanceof $){if(!this.pairs.length)throw new $;c=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(i,!1),d){let m=this.checkRowsBoolean(!1);if(m!=null||(m=this.checkRowsBoolean(!0),m!=null))return m}throw new $}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let c=a;c<this.rows.length;c++){let d=this.rows[c];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(d.getPairs()),!de.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let m=new Array(i);m.push(d);try{return this.checkRows(m,c+1)}catch(g){this.verbose&&console.log(g)}}throw new $}static isValidSequence(i){for(let a of de.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let c=!0;for(let d=0;d<i.length;d++)if(i[d].getFinderPattern().getValue()!=a[d]){c=!1;break}if(c)return!0}return!1}storeRow(i,a){let c=0,d=!1,m=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>i){m=g.isEquivalent(this.pairs);break}d=g.isEquivalent(this.pairs),c++}m||d||de.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new X0(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let c of a)if(c.getPairs().length!==i.length){for(let d of c.getPairs())for(let m of i)if(Ki.equals(d,m))break}}static isPartialRow(i,a){for(let c of a){let d=!0;for(let m of i){let g=!1;for(let w of c.getPairs())if(m.equals(w)){g=!0;break}if(!g){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=Ei.buildBitArray(i),d=Vy(a).parseInformation(),m=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),w=[m[0],m[1],g[0],g[1]];return new ue(d,null,null,w,ye.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let d=c.getChecksumPortion(),m=2;for(let w=1;w<this.pairs.size();++w){let _=this.pairs.get(w);d+=_.getLeftChar().getChecksumPortion(),m++;let T=_.getRightChar();T!=null&&(d+=T.getChecksumPortion(),m++)}return d%=211,211*(m-4)+d==a.getValue()}static getNextSecondBar(i,a){let c;return i.get(a)?(c=i.getNextUnset(a),c=i.getNextSet(c)):(c=i.getNextSet(a),c=i.getNextUnset(c)),c}retrieveNextPair(i,a,c){let d=a.length%2==0;this.startFromEven&&(d=!d);let m,g=!0,w=-1;do this.findNextPair(i,a,w),m=this.parseFoundFinderPattern(i,c,d),m==null?w=de.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let _=this.decodeDataCharacter(i,m,d,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new $;let T;try{T=this.decodeDataCharacter(i,m,d,!1)}catch(M){T=null,this.verbose&&console.log(M)}return new Ki(_,T,m,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,c){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let m=i.getSize(),g;c>=0?g=c:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let w=a.length%2!=0;this.startFromEven&&(w=!w);let _=!1;for(;g<m&&(_=!i.get(g),!!_);)g++;let T=0,M=g;for(let D=g;D<m;D++)if(i.get(D)!=_)d[T]++;else{if(T==3){if(w&&de.reverseCounters(d),de.isFinderPattern(d)){this.startEnd[0]=M,this.startEnd[1]=D;return}w&&de.reverseCounters(d),M+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,T--}else T++;d[T]=1,_=!_}throw new $}static reverseCounters(i){let a=i.length;for(let c=0;c<a/2;++c){let d=i[c];i[c]=i[a-c-1],i[a-c-1]=d}}parseFoundFinderPattern(i,a,c){let d,m,g;if(c){let T=this.startEnd[0]-1;for(;T>=0&&!i.get(T);)T--;T++,d=this.startEnd[0]-T,m=T,g=this.startEnd[1]}else m=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),d=g-this.startEnd[1];let w=this.getDecodeFinderCounters();E.arraycopy(w,0,w,1,w.length-1),w[0]=d;let _;try{_=this.parseFinderValue(w,de.FINDER_PATTERNS)}catch{return null}return new $r(_,[m,g],m,g,a)}decodeDataCharacter(i,a,c,d){let m=this.getDataCharacterCounters();for(let Nt=0;Nt<m.length;Nt++)m[Nt]=0;if(d)de.recordPatternInReverse(i,a.getStartEnd()[0],m);else{de.recordPattern(i,a.getStartEnd()[1],m);for(let Nt=0,Fr=m.length-1;Nt<Fr;Nt++,Fr--){let kn=m[Nt];m[Nt]=m[Fr],m[Fr]=kn}}let g=17,w=Se.sum(new Int32Array(m))/g,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(w-_)/_>.3)throw new $;let T=this.getOddCounts(),M=this.getEvenCounts(),D=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let Nt=0;Nt<m.length;Nt++){let Fr=1*m[Nt]/w,kn=Fr+.5;if(kn<1){if(Fr<.3)throw new $;kn=1}else if(kn>8){if(Fr>8.7)throw new $;kn=8}let ul=Nt/2;Nt&1?(M[ul]=kn,U[ul]=Fr-kn):(T[ul]=kn,D[ul]=Fr-kn)}this.adjustOddEvenCounts(g);let V=4*a.getValue()+(c?0:2)+(d?0:1)-1,Y=0,X=0;for(let Nt=T.length-1;Nt>=0;Nt--){if(de.isNotA1left(a,c,d)){let Fr=de.WEIGHTS[V][2*Nt];X+=T[Nt]*Fr}Y+=T[Nt]}let J=0;for(let Nt=M.length-1;Nt>=0;Nt--)if(de.isNotA1left(a,c,d)){let Fr=de.WEIGHTS[V][2*Nt+1];J+=M[Nt]*Fr}let se=X+J;if(Y&1||Y>13||Y<4)throw new $;let ge=(13-Y)/2,we=de.SYMBOL_WIDEST[ge],pe=9-we,lt=vr.getRSSvalue(T,we,!0),Qe=vr.getRSSvalue(M,pe,!1),yn=de.EVEN_TOTAL_SUBSET[ge],Cs=de.GSUM[ge],wn=lt*yn+Qe+Cs;return new Tr(wn,se)}static isNotA1left(i,a,c){return!(i.getValue()==0&&a&&c)}adjustOddEvenCounts(i){let a=Se.sum(new Int32Array(this.getOddCounts())),c=Se.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1;a>13?m=!0:a<4&&(d=!0);let g=!1,w=!1;c>13?w=!0:c<4&&(g=!0);let _=a+c-i,T=(a&1)==1,M=(c&1)==0;if(_==1)if(T){if(M)throw new $;m=!0}else{if(!M)throw new $;w=!0}else if(_==-1)if(T){if(M)throw new $;d=!0}else{if(!M)throw new $;g=!0}else if(_==0){if(T){if(!M)throw new $;a<c?(d=!0,w=!0):(m=!0,g=!0)}else if(M)throw new $}else throw new $;if(d){if(m)throw new $;de.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&de.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(w)throw new $;de.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&de.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}de.SYMBOL_WIDEST=[7,5,4,3,1],de.EVEN_TOTAL_SUBSET=[4,20,52,104,204],de.GSUM=[0,348,1388,2948,3988],de.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],de.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],de.FINDER_PAT_A=0,de.FINDER_PAT_B=1,de.FINDER_PAT_C=2,de.FINDER_PAT_D=3,de.FINDER_PAT_E=4,de.FINDER_PAT_F=5,de.FINDER_PATTERN_SEQUENCES=[[de.FINDER_PAT_A,de.FINDER_PAT_A],[de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B],[de.FINDER_PAT_A,de.FINDER_PAT_C,de.FINDER_PAT_B,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_C],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F]],de.MAX_PAIRS=11;class y4 extends Tr{constructor(i,a,c){super(i,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class er extends Je{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,c){const d=this.decodePair(a,!1,i,c);er.addOrTally(this.possibleLeftPairs,d),a.reverse();let m=this.decodePair(a,!0,i,c);er.addOrTally(this.possibleRightPairs,m),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&er.checkChecksum(g,w))return er.constructResult(g,w)}throw new $}static addOrTally(i,a){if(a==null)return;let c=!1;for(let d of i)if(d.getValue()===a.getValue()){d.incrementCount(),c=!0;break}c||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let c=4537077*i.getValue()+a.getValue(),d=new String(c).toString(),m=new ie;for(let T=13-d.length;T>0;T--)m.append("0");m.append(d);let g=0;for(let T=0;T<13;T++){let M=m.charAt(T).charCodeAt(0)-48;g+=T&1?M:3*M}g=10-g%10,g===10&&(g=0),m.append(g.toString());let w=i.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new ue(m.toString(),null,0,[w[0],w[1],_[0],_[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(i,a){let c=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,d=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d}decodePair(i,a,c,d){try{let m=this.findFinderPattern(i,a),g=this.parseFoundFinderPattern(i,c,a,m),w=d==null?null:d.get(F.NEED_RESULT_POINT_CALLBACK);if(w!=null){let M=(m[0]+m[1])/2;a&&(M=i.getSize()-1-M),w.foundPossibleResultPoint(new ve(M,c))}let _=this.decodeDataCharacter(i,g,!0),T=this.decodeDataCharacter(i,g,!1);return new y4(1597*_.getValue()+T.getValue(),_.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,a,c){let d=this.getDataCharacterCounters();for(let J=0;J<d.length;J++)d[J]=0;if(c)Bt.recordPatternInReverse(i,a.getStartEnd()[0],d);else{Bt.recordPattern(i,a.getStartEnd()[1]+1,d);for(let J=0,se=d.length-1;J<se;J++,se--){let ge=d[J];d[J]=d[se],d[se]=ge}}let m=c?16:15,g=Se.sum(new Int32Array(d))/m,w=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let J=0;J<d.length;J++){let se=d[J]/g,ge=Math.floor(se+.5);ge<1?ge=1:ge>8&&(ge=8);let we=Math.floor(J/2);J&1?(_[we]=ge,M[we]=se-ge):(w[we]=ge,T[we]=se-ge)}this.adjustOddEvenCounts(c,m);let D=0,U=0;for(let J=w.length-1;J>=0;J--)U*=9,U+=w[J],D+=w[J];let V=0,Y=0;for(let J=_.length-1;J>=0;J--)V*=9,V+=_[J],Y+=_[J];let X=U+3*V;if(c){if(D&1||D>12||D<4)throw new $;let J=(12-D)/2,se=er.OUTSIDE_ODD_WIDEST[J],ge=9-se,we=vr.getRSSvalue(w,se,!1),pe=vr.getRSSvalue(_,ge,!0),lt=er.OUTSIDE_EVEN_TOTAL_SUBSET[J],Qe=er.OUTSIDE_GSUM[J];return new Tr(we*lt+pe+Qe,X)}else{if(Y&1||Y>10||Y<4)throw new $;let J=(10-Y)/2,se=er.INSIDE_ODD_WIDEST[J],ge=9-se,we=vr.getRSSvalue(w,se,!0),pe=vr.getRSSvalue(_,ge,!1),lt=er.INSIDE_ODD_TOTAL_SUBSET[J],Qe=er.INSIDE_GSUM[J];return new Tr(pe*lt+we+Qe,X)}}findFinderPattern(i,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=i.getSize(),m=!1,g=0;for(;g<d&&(m=!i.get(g),a!==m);)g++;let w=0,_=g;for(let T=g;T<d;T++)if(i.get(T)!==m)c[w]++;else{if(w===3){if(Je.isFinderPattern(c))return[_,T];_+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,m=!m}throw new $}parseFoundFinderPattern(i,a,c,d){let m=i.get(d[0]),g=d[0]-1;for(;g>=0&&m!==i.get(g);)g--;g++;const w=d[0]-g,_=this.getDecodeFinderCounters(),T=new Int32Array(_.length);E.arraycopy(_,0,T,1,_.length-1),T[0]=w;const M=this.parseFinderValue(T,er.FINDER_PATTERNS);let D=g,U=d[1];return c&&(D=i.getSize()-1-D,U=i.getSize()-1-U),new $r(M,[g,d[1]],D,U,a)}adjustOddEvenCounts(i,a){let c=Se.sum(new Int32Array(this.getOddCounts())),d=Se.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1,w=!1,_=!1;i?(c>12?g=!0:c<4&&(m=!0),d>12?_=!0:d<4&&(w=!0)):(c>11?g=!0:c<5&&(m=!0),d>10?_=!0:d<4&&(w=!0));let T=c+d-a,M=(c&1)===(i?1:0),D=(d&1)===1;if(T===1)if(M){if(D)throw new $;g=!0}else{if(!D)throw new $;_=!0}else if(T===-1)if(M){if(D)throw new $;m=!0}else{if(!D)throw new $;w=!0}else if(T===0){if(M){if(!D)throw new $;c<d?(m=!0,_=!0):(g=!0,w=!0)}else if(D)throw new $}else throw new $;if(m){if(g)throw new $;Je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(_)throw new $;Je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}er.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],er.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],er.OUTSIDE_GSUM=[0,161,961,2015,2715],er.INSIDE_GSUM=[0,336,1036,1516],er.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],er.INSIDE_ODD_WIDEST=[2,4,6,8],er.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ol extends Bt{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const c=i?i.get(F.POSSIBLE_FORMATS):null,d=i&&i.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ye.EAN_13)||c.includes(ye.UPC_A)||c.includes(ye.EAN_8)||c.includes(ye.UPC_E))&&this.readers.push(new gt(i)),c.includes(ye.CODE_39)&&this.readers.push(new Jt(d)),c.includes(ye.CODE_128)&&this.readers.push(new be),c.includes(ye.ITF)&&this.readers.push(new ft),c.includes(ye.RSS_14)&&this.readers.push(new er),c.includes(ye.RSS_EXPANDED)&&this.readers.push(new de(this.verbose))):(this.readers.push(new gt(i)),this.readers.push(new Jt),this.readers.push(new gt(i)),this.readers.push(new be),this.readers.push(new ft),this.readers.push(new er),this.readers.push(new de(this.verbose)))}decodeRow(i,a,c){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(i,a,c)}catch{}throw new $}reset(){this.readers.forEach(i=>i.reset())}}class w4 extends oe{constructor(i=500,a){super(new ol(a),i,a)}}class wt{constructor(i,a,c){this.ecCodewords=i,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yt{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ut{constructor(i,a,c,d,m,g){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=m,this.ecBlocks=g;let w=0;const _=g.getECCodewords(),T=g.getECBlocks();for(let M of T)w+=M.getCount()*(M.getDataCodewords()+_);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if(i&1||a&1)throw new B;for(let c of ut.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===a)return c;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new ut(1,10,10,8,8,new wt(5,new yt(1,3))),new ut(2,12,12,10,10,new wt(7,new yt(1,5))),new ut(3,14,14,12,12,new wt(10,new yt(1,8))),new ut(4,16,16,14,14,new wt(12,new yt(1,12))),new ut(5,18,18,16,16,new wt(14,new yt(1,18))),new ut(6,20,20,18,18,new wt(18,new yt(1,22))),new ut(7,22,22,20,20,new wt(20,new yt(1,30))),new ut(8,24,24,22,22,new wt(24,new yt(1,36))),new ut(9,26,26,24,24,new wt(28,new yt(1,44))),new ut(10,32,32,14,14,new wt(36,new yt(1,62))),new ut(11,36,36,16,16,new wt(42,new yt(1,86))),new ut(12,40,40,18,18,new wt(48,new yt(1,114))),new ut(13,44,44,20,20,new wt(56,new yt(1,144))),new ut(14,48,48,22,22,new wt(68,new yt(1,174))),new ut(15,52,52,24,24,new wt(42,new yt(2,102))),new ut(16,64,64,14,14,new wt(56,new yt(2,140))),new ut(17,72,72,16,16,new wt(36,new yt(4,92))),new ut(18,80,80,18,18,new wt(48,new yt(4,114))),new ut(19,88,88,20,20,new wt(56,new yt(4,144))),new ut(20,96,96,22,22,new wt(68,new yt(4,174))),new ut(21,104,104,24,24,new wt(56,new yt(6,136))),new ut(22,120,120,18,18,new wt(68,new yt(6,175))),new ut(23,132,132,20,20,new wt(62,new yt(8,163))),new ut(24,144,144,22,22,new wt(62,new yt(8,156),new yt(2,155))),new ut(25,8,18,6,16,new wt(7,new yt(1,5))),new ut(26,8,32,6,14,new wt(11,new yt(1,10))),new ut(27,12,26,10,24,new wt(14,new yt(1,16))),new ut(28,12,36,10,16,new wt(18,new yt(1,22))),new ut(29,16,36,14,16,new wt(24,new yt(1,32))),new ut(30,16,48,14,22,new wt(28,new yt(1,49)))]}}ut.VERSIONS=ut.buildVersions();class q0{constructor(i){const a=i.getHeight();if(a<8||a>144||a&1)throw new B;this.version=q0.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),c=i.getWidth();return ut.getVersionForDimensions(a,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,c=4,d=0;const m=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let w=!1,_=!1,T=!1,M=!1;do if(c===m&&d===0&&!w)i[a++]=this.readCorner1(m,g)&255,c-=2,d+=2,w=!0;else if(c===m-2&&d===0&&g&3&&!_)i[a++]=this.readCorner2(m,g)&255,c-=2,d+=2,_=!0;else if(c===m+4&&d===2&&!(g&7)&&!T)i[a++]=this.readCorner3(m,g)&255,c-=2,d+=2,T=!0;else if(c===m-2&&d===0&&(g&7)===4&&!M)i[a++]=this.readCorner4(m,g)&255,c-=2,d+=2,M=!0;else{do c<m&&d>=0&&!this.readMappingMatrix.get(d,c)&&(i[a++]=this.readUtah(c,d,m,g)&255),c-=2,d+=2;while(c>=0&&d<g);c+=1,d+=3;do c>=0&&d<g&&!this.readMappingMatrix.get(d,c)&&(i[a++]=this.readUtah(c,d,m,g)&255),c+=2,d-=2;while(c<m&&d>=0);c+=3,d+=1}while(c<m||d<g);if(a!==this.version.getTotalCodewords())throw new B;return i}readModule(i,a,c,d){return i<0&&(i+=c,a+=4-(c+4&7)),a<0&&(a+=d,i+=4-(d+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,c,d){let m=0;return this.readModule(i-2,a-2,c,d)&&(m|=1),m<<=1,this.readModule(i-2,a-1,c,d)&&(m|=1),m<<=1,this.readModule(i-1,a-2,c,d)&&(m|=1),m<<=1,this.readModule(i-1,a-1,c,d)&&(m|=1),m<<=1,this.readModule(i-1,a,c,d)&&(m|=1),m<<=1,this.readModule(i,a-2,c,d)&&(m|=1),m<<=1,this.readModule(i,a-1,c,d)&&(m|=1),m<<=1,this.readModule(i,a,c,d)&&(m|=1),m}readCorner1(i,a){let c=0;return this.readModule(i-1,0,i,a)&&(c|=1),c<<=1,this.readModule(i-1,1,i,a)&&(c|=1),c<<=1,this.readModule(i-1,2,i,a)&&(c|=1),c<<=1,this.readModule(0,a-2,i,a)&&(c|=1),c<<=1,this.readModule(0,a-1,i,a)&&(c|=1),c<<=1,this.readModule(1,a-1,i,a)&&(c|=1),c<<=1,this.readModule(2,a-1,i,a)&&(c|=1),c<<=1,this.readModule(3,a-1,i,a)&&(c|=1),c}readCorner2(i,a){let c=0;return this.readModule(i-3,0,i,a)&&(c|=1),c<<=1,this.readModule(i-2,0,i,a)&&(c|=1),c<<=1,this.readModule(i-1,0,i,a)&&(c|=1),c<<=1,this.readModule(0,a-4,i,a)&&(c|=1),c<<=1,this.readModule(0,a-3,i,a)&&(c|=1),c<<=1,this.readModule(0,a-2,i,a)&&(c|=1),c<<=1,this.readModule(0,a-1,i,a)&&(c|=1),c<<=1,this.readModule(1,a-1,i,a)&&(c|=1),c}readCorner3(i,a){let c=0;return this.readModule(i-1,0,i,a)&&(c|=1),c<<=1,this.readModule(i-1,a-1,i,a)&&(c|=1),c<<=1,this.readModule(0,a-3,i,a)&&(c|=1),c<<=1,this.readModule(0,a-2,i,a)&&(c|=1),c<<=1,this.readModule(0,a-1,i,a)&&(c|=1),c<<=1,this.readModule(1,a-3,i,a)&&(c|=1),c<<=1,this.readModule(1,a-2,i,a)&&(c|=1),c<<=1,this.readModule(1,a-1,i,a)&&(c|=1),c}readCorner4(i,a){let c=0;return this.readModule(i-3,0,i,a)&&(c|=1),c<<=1,this.readModule(i-2,0,i,a)&&(c|=1),c<<=1,this.readModule(i-1,0,i,a)&&(c|=1),c<<=1,this.readModule(0,a-2,i,a)&&(c|=1),c<<=1,this.readModule(0,a-1,i,a)&&(c|=1),c<<=1,this.readModule(1,a-1,i,a)&&(c|=1),c<<=1,this.readModule(2,a-1,i,a)&&(c|=1),c<<=1,this.readModule(3,a-1,i,a)&&(c|=1),c}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new y("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),g=a/d|0,w=c/m|0,_=g*d,T=w*m,M=new G(T,_);for(let D=0;D<g;++D){const U=D*d;for(let V=0;V<w;++V){const Y=V*m;for(let X=0;X<d;++X){const J=D*(d+2)+1+X,se=U+X;for(let ge=0;ge<m;++ge){const we=V*(m+2)+1+ge;if(i.get(we,J)){const pe=Y+ge;M.set(pe,se)}}}}}return M}}class K0{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const c=a.getECBlocks();let d=0;const m=c.getECBlocks();for(let X of m)d+=X.getCount();const g=new Array(d);let w=0;for(let X of m)for(let J=0;J<X.getCount();J++){const se=X.getDataCodewords(),ge=c.getECCodewords()+se;g[w++]=new K0(se,new Uint8Array(ge))}const T=g[0].codewords.length-c.getECCodewords(),M=T-1;let D=0;for(let X=0;X<M;X++)for(let J=0;J<w;J++)g[J].codewords[X]=i[D++];const U=a.getVersionNumber()===24,V=U?8:w;for(let X=0;X<V;X++)g[X].codewords[T-1]=i[D++];const Y=g[0].codewords.length;for(let X=T;X<Y;X++)for(let J=0;J<w;J++){const se=U?(J+8)%w:J,ge=U&&se>7?X-1:X;g[se].codewords[ge]=i[D++]}if(D!==i.length)throw new y;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Q0{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new y(""+i);let a=0,c=this.bitOffset,d=this.byteOffset;const m=this.bytes;if(c>0){const g=8-c,w=i<g?i:g,_=g-w,T=255>>8-w<<_;a=(m[d]&T)>>_,i-=w,c+=w,c===8&&(c=0,d++)}if(i>0){for(;i>=8;)a=a<<8|m[d]&255,d++,i-=8;if(i>0){const g=8-i,w=255>>g<<g;a=a<<i|(m[d]&w)>>g,c+=i}}return this.bitOffset=c,this.byteOffset=d,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var br;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(br||(br={}));class Qi{static decode(i){const a=new Q0(i),c=new ie,d=new ie,m=new Array;let g=br.ASCII_ENCODE;do if(g===br.ASCII_ENCODE)g=this.decodeAsciiSegment(a,c,d);else{switch(g){case br.C40_ENCODE:this.decodeC40Segment(a,c);break;case br.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case br.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case br.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case br.BASE256_ENCODE:this.decodeBase256Segment(a,c,m);break;default:throw new B}g=br.ASCII_ENCODE}while(g!==br.PAD_ENCODE&&a.available()>0);return d.length()>0&&c.append(d.toString()),new Xe(i,c.toString(),m.length===0?null:m,null)}static decodeAsciiSegment(i,a,c){let d=!1;do{let m=i.readBits(8);if(m===0)throw new B;if(m<=128)return d&&(m+=128),a.append(String.fromCharCode(m-1)),br.ASCII_ENCODE;if(m===129)return br.PAD_ENCODE;if(m<=229){const g=m-130;g<10&&a.append("0"),a.append(""+g)}else switch(m){case 230:return br.C40_ENCODE;case 231:return br.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return br.ANSIX12_ENCODE;case 239:return br.TEXT_ENCODE;case 240:return br.EDIFACT_ENCODE;case 241:break;default:if(m!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return br.ASCII_ENCODE}static decodeC40Segment(i,a){let c=!1;const d=[];let m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),d);for(let w=0;w<3;w++){const _=d[w];switch(m){case 0:if(_<3)m=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),m=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}m=0;break;case 3:c?(a.append(String.fromCharCode(_+224)),c=!1):a.append(String.fromCharCode(_+96)),m=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,a){let c=!1,d=[],m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),d);for(let w=0;w<3;w++){const _=d[w];switch(m){case 0:if(_<3)m=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),m=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}m=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T),m=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const c=[];do{if(i.available()===8)return;const d=i.readBits(8);if(d===254)return;this.parseTwoBytes(d,i.readBits(8),c);for(let m=0;m<3;m++){const g=c[m];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,a,c){let d=(i<<8)+a-1,m=Math.floor(d/1600);c[0]=m,d-=m*1600,m=Math.floor(d/40),c[1]=m,c[2]=d-m*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let d=i.readBits(6);if(d===31){const m=8-i.getBitOffset();m!==8&&i.readBits(m);return}d&32||(d|=64),a.append(String.fromCharCode(d))}}while(i.available()>0)}static decodeBase256Segment(i,a,c){let d=1+i.getByteOffset();const m=this.unrandomize255State(i.readBits(8),d++);let g;if(m===0?g=i.available()/8|0:m<250?g=m:g=250*(m-249)+this.unrandomize255State(i.readBits(8),d++),g<0)throw new B;const w=new Uint8Array(g);for(let _=0;_<g;_++){if(i.available()<8)throw new B;w[_]=this.unrandomize255State(i.readBits(8),d++)}c.push(w);try{a.append(q.decode(w,K.ISO88591))}catch(_){throw new wr("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,a){const c=149*a%255+1,d=i-c;return d>=0?d:d+256}}Qi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Qi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Qi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Qi.TEXT_SHIFT2_SET_CHARS=Qi.C40_SHIFT2_SET_CHARS,Qi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class v4{constructor(){this.rsDecoder=new Nr(Ve.DATA_MATRIX_FIELD_256)}decode(i){const a=new q0(i),c=a.getVersion(),d=a.readCodewords(),m=K0.getDataBlocks(d,c);let g=0;for(let T of m)g+=T.getNumDataCodewords();const w=new Uint8Array(g),_=m.length;for(let T=0;T<_;T++){const M=m[T],D=M.getCodewords(),U=M.getNumDataCodewords();this.correctErrors(D,U);for(let V=0;V<U;V++)w[V*_+T]=D[V]}return Qi.decode(w)}correctErrors(i,a){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-a)}catch{throw new b}for(let d=0;d<a;d++)i[d]=c[d]}}class cr{constructor(i){this.image=i,this.rectangleDetector=new Zt(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new $;a=this.shiftToModuleCenter(a);const c=a[0],d=a[1],m=a[2],g=a[3];let w=this.transitionsBetween(c,g)+1,_=this.transitionsBetween(m,g)+1;(w&1)===1&&(w+=1),(_&1)===1&&(_+=1),4*w<7*_&&4*_<7*w&&(w=_=Math.max(w,_));let T=cr.sampleGrid(this.image,c,d,m,g,w,_);return new jr(T,[c,d,m,g])}static shiftPoint(i,a,c){let d=(a.getX()-i.getX())/(c+1),m=(a.getY()-i.getY())/(c+1);return new ve(i.getX()+d,i.getY()+m)}static moveAway(i,a,c){let d=i.getX(),m=i.getY();return d<a?d-=1:d+=1,m<c?m-=1:m+=1,new ve(d,m)}detectSolid1(i){let a=i[0],c=i[1],d=i[3],m=i[2],g=this.transitionsBetween(a,c),w=this.transitionsBetween(c,d),_=this.transitionsBetween(d,m),T=this.transitionsBetween(m,a),M=g,D=[m,a,c,d];return M>w&&(M=w,D[0]=a,D[1]=c,D[2]=d,D[3]=m),M>_&&(M=_,D[0]=c,D[1]=d,D[2]=m,D[3]=a),M>T&&(D[0]=d,D[1]=m,D[2]=a,D[3]=c),D}detectSolid2(i){let a=i[0],c=i[1],d=i[2],m=i[3],g=this.transitionsBetween(a,m),w=cr.shiftPoint(c,d,(g+1)*4),_=cr.shiftPoint(d,c,(g+1)*4),T=this.transitionsBetween(w,a),M=this.transitionsBetween(_,m);return T<M?(i[0]=a,i[1]=c,i[2]=d,i[3]=m):(i[0]=c,i[1]=d,i[2]=m,i[3]=a),i}correctTopRight(i){let a=i[0],c=i[1],d=i[2],m=i[3],g=this.transitionsBetween(a,m),w=this.transitionsBetween(c,m),_=cr.shiftPoint(a,c,(w+1)*4),T=cr.shiftPoint(d,c,(g+1)*4);g=this.transitionsBetween(_,m),w=this.transitionsBetween(T,m);let M=new ve(m.getX()+(d.getX()-c.getX())/(g+1),m.getY()+(d.getY()-c.getY())/(g+1)),D=new ve(m.getX()+(a.getX()-c.getX())/(w+1),m.getY()+(a.getY()-c.getY())/(w+1));if(!this.isValid(M))return this.isValid(D)?D:null;if(!this.isValid(D))return M;let U=this.transitionsBetween(_,M)+this.transitionsBetween(T,M),V=this.transitionsBetween(_,D)+this.transitionsBetween(T,D);return U>V?M:D}shiftToModuleCenter(i){let a=i[0],c=i[1],d=i[2],m=i[3],g=this.transitionsBetween(a,m)+1,w=this.transitionsBetween(d,m)+1,_=cr.shiftPoint(a,c,w*4),T=cr.shiftPoint(d,c,g*4);g=this.transitionsBetween(_,m)+1,w=this.transitionsBetween(T,m)+1,(g&1)===1&&(g+=1),(w&1)===1&&(w+=1);let M=(a.getX()+c.getX()+d.getX()+m.getX())/4,D=(a.getY()+c.getY()+d.getY()+m.getY())/4;a=cr.moveAway(a,M,D),c=cr.moveAway(c,M,D),d=cr.moveAway(d,M,D),m=cr.moveAway(m,M,D);let U,V;return _=cr.shiftPoint(a,c,w*4),_=cr.shiftPoint(_,m,g*4),U=cr.shiftPoint(c,a,w*4),U=cr.shiftPoint(U,d,g*4),T=cr.shiftPoint(d,m,w*4),T=cr.shiftPoint(T,c,g*4),V=cr.shiftPoint(m,d,w*4),V=cr.shiftPoint(V,a,g*4),[_,U,T,V]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,c,d,m,g,w){return qs.getInstance().sampleGrid(i,g,w,.5,.5,g-.5,.5,g-.5,w-.5,.5,w-.5,a.getX(),a.getY(),m.getX(),m.getY(),d.getX(),d.getY(),c.getX(),c.getY())}transitionsBetween(i,a){let c=Math.trunc(i.getX()),d=Math.trunc(i.getY()),m=Math.trunc(a.getX()),g=Math.trunc(a.getY()),w=Math.abs(g-d)>Math.abs(m-c);if(w){let X=c;c=d,d=X,X=m,m=g,g=X}let _=Math.abs(m-c),T=Math.abs(g-d),M=-_/2,D=d<g?1:-1,U=c<m?1:-1,V=0,Y=this.image.get(w?d:c,w?c:d);for(let X=c,J=d;X!==m;X+=U){let se=this.image.get(w?J:X,w?X:J);if(se!==Y&&(V++,Y=se),M+=T,M>0){if(J===g)break;J+=D,M-=_}}return V}}class Zi{constructor(){this.decoder=new v4}decode(i,a=null){let c,d;if(a!=null&&a.has(F.PURE_BARCODE)){const T=Zi.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(T),d=Zi.NO_POINTS}else{const T=new cr(i.getBlackMatrix()).detect();c=this.decoder.decode(T.getBits()),d=T.getPoints()}const m=c.getRawBytes(),g=new ue(c.getText(),m,8*m.length,d,ye.DATA_MATRIX,E.currentTimeMillis()),w=c.getByteSegments();w!=null&&g.putMetadata(Re.BYTE_SEGMENTS,w);const _=c.getECLevel();return _!=null&&g.putMetadata(Re.ERROR_CORRECTION_LEVEL,_),g}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(a==null||c==null)throw new $;const d=this.moduleSize(a,i);let m=a[1];const g=c[1];let w=a[0];const T=(c[0]-w+1)/d,M=(g-m+1)/d;if(T<=0||M<=0)throw new $;const D=d/2;m+=D,w+=D;const U=new G(T,M);for(let V=0;V<M;V++){const Y=m+V*d;for(let X=0;X<T;X++)i.get(w+X*d,Y)&&U.set(X,V)}return U}static moduleSize(i,a){const c=a.getWidth();let d=i[0];const m=i[1];for(;d<c&&a.get(d,m);)d++;if(d===c)throw new $;const g=d-i[0];if(g===0)throw new $;return g}}Zi.NO_POINTS=[];class _4 extends oe{constructor(i=500){super(new Zi,i)}}var al;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(al||(al={}));class Rt{constructor(i,a,c){this.value=i,this.stringValue=a,this.bits=c,Rt.FOR_BITS.set(c,this),Rt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Rt.L;case"M":return Rt.M;case"Q":return Rt.Q;case"H":return Rt.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Rt))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=Rt.FOR_BITS.size)throw new y;return Rt.FOR_BITS.get(i)}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.L=new Rt(al.L,"L",1),Rt.M=new Rt(al.M,"M",0),Rt.Q=new Rt(al.Q,"Q",3),Rt.H=new Rt(al.H,"H",2);class Wr{constructor(i){this.errorCorrectionLevel=Rt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return S.bitCount(i^a)}static decodeFormatInformation(i,a){const c=Wr.doDecodeFormatInformation(i,a);return c!==null?c:Wr.doDecodeFormatInformation(i^Wr.FORMAT_INFO_MASK_QR,a^Wr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let c=Number.MAX_SAFE_INTEGER,d=0;for(const m of Wr.FORMAT_INFO_DECODE_LOOKUP){const g=m[0];if(g===i||g===a)return new Wr(m[1]);let w=Wr.numBitsDiffering(i,g);w<c&&(d=m[1],c=w),i!==a&&(w=Wr.numBitsDiffering(a,g),w<c&&(d=m[1],c=w))}return c<=3?new Wr(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Wr))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Wr.FORMAT_INFO_MASK_QR=21522,Wr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ee{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const c of a)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class je{constructor(i,a,...c){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=c;let d=0;const m=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const w of g)d+=w.getCount()*(w.getDataCodewords()+m);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new y;return je.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,c=0;for(let d=0;d<je.VERSION_DECODE_INFO.length;d++){const m=je.VERSION_DECODE_INFO[d];if(m===i)return je.getVersionForNumber(d+7);const g=Wr.numBitsDiffering(i,m);g<a&&(c=d+7,a=g)}return a<=3?je.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new G(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let d=0;d<c;d++){const m=this.alignmentPatternCenters[d]-2;for(let g=0;g<c;g++)d===0&&(g===0||g===c-1)||d===c-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,m,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}je.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),je.VERSIONS=[new je(1,new Int32Array(0),new ee(7,new z(1,19)),new ee(10,new z(1,16)),new ee(13,new z(1,13)),new ee(17,new z(1,9))),new je(2,Int32Array.from([6,18]),new ee(10,new z(1,34)),new ee(16,new z(1,28)),new ee(22,new z(1,22)),new ee(28,new z(1,16))),new je(3,Int32Array.from([6,22]),new ee(15,new z(1,55)),new ee(26,new z(1,44)),new ee(18,new z(2,17)),new ee(22,new z(2,13))),new je(4,Int32Array.from([6,26]),new ee(20,new z(1,80)),new ee(18,new z(2,32)),new ee(26,new z(2,24)),new ee(16,new z(4,9))),new je(5,Int32Array.from([6,30]),new ee(26,new z(1,108)),new ee(24,new z(2,43)),new ee(18,new z(2,15),new z(2,16)),new ee(22,new z(2,11),new z(2,12))),new je(6,Int32Array.from([6,34]),new ee(18,new z(2,68)),new ee(16,new z(4,27)),new ee(24,new z(4,19)),new ee(28,new z(4,15))),new je(7,Int32Array.from([6,22,38]),new ee(20,new z(2,78)),new ee(18,new z(4,31)),new ee(18,new z(2,14),new z(4,15)),new ee(26,new z(4,13),new z(1,14))),new je(8,Int32Array.from([6,24,42]),new ee(24,new z(2,97)),new ee(22,new z(2,38),new z(2,39)),new ee(22,new z(4,18),new z(2,19)),new ee(26,new z(4,14),new z(2,15))),new je(9,Int32Array.from([6,26,46]),new ee(30,new z(2,116)),new ee(22,new z(3,36),new z(2,37)),new ee(20,new z(4,16),new z(4,17)),new ee(24,new z(4,12),new z(4,13))),new je(10,Int32Array.from([6,28,50]),new ee(18,new z(2,68),new z(2,69)),new ee(26,new z(4,43),new z(1,44)),new ee(24,new z(6,19),new z(2,20)),new ee(28,new z(6,15),new z(2,16))),new je(11,Int32Array.from([6,30,54]),new ee(20,new z(4,81)),new ee(30,new z(1,50),new z(4,51)),new ee(28,new z(4,22),new z(4,23)),new ee(24,new z(3,12),new z(8,13))),new je(12,Int32Array.from([6,32,58]),new ee(24,new z(2,92),new z(2,93)),new ee(22,new z(6,36),new z(2,37)),new ee(26,new z(4,20),new z(6,21)),new ee(28,new z(7,14),new z(4,15))),new je(13,Int32Array.from([6,34,62]),new ee(26,new z(4,107)),new ee(22,new z(8,37),new z(1,38)),new ee(24,new z(8,20),new z(4,21)),new ee(22,new z(12,11),new z(4,12))),new je(14,Int32Array.from([6,26,46,66]),new ee(30,new z(3,115),new z(1,116)),new ee(24,new z(4,40),new z(5,41)),new ee(20,new z(11,16),new z(5,17)),new ee(24,new z(11,12),new z(5,13))),new je(15,Int32Array.from([6,26,48,70]),new ee(22,new z(5,87),new z(1,88)),new ee(24,new z(5,41),new z(5,42)),new ee(30,new z(5,24),new z(7,25)),new ee(24,new z(11,12),new z(7,13))),new je(16,Int32Array.from([6,26,50,74]),new ee(24,new z(5,98),new z(1,99)),new ee(28,new z(7,45),new z(3,46)),new ee(24,new z(15,19),new z(2,20)),new ee(30,new z(3,15),new z(13,16))),new je(17,Int32Array.from([6,30,54,78]),new ee(28,new z(1,107),new z(5,108)),new ee(28,new z(10,46),new z(1,47)),new ee(28,new z(1,22),new z(15,23)),new ee(28,new z(2,14),new z(17,15))),new je(18,Int32Array.from([6,30,56,82]),new ee(30,new z(5,120),new z(1,121)),new ee(26,new z(9,43),new z(4,44)),new ee(28,new z(17,22),new z(1,23)),new ee(28,new z(2,14),new z(19,15))),new je(19,Int32Array.from([6,30,58,86]),new ee(28,new z(3,113),new z(4,114)),new ee(26,new z(3,44),new z(11,45)),new ee(26,new z(17,21),new z(4,22)),new ee(26,new z(9,13),new z(16,14))),new je(20,Int32Array.from([6,34,62,90]),new ee(28,new z(3,107),new z(5,108)),new ee(26,new z(3,41),new z(13,42)),new ee(30,new z(15,24),new z(5,25)),new ee(28,new z(15,15),new z(10,16))),new je(21,Int32Array.from([6,28,50,72,94]),new ee(28,new z(4,116),new z(4,117)),new ee(26,new z(17,42)),new ee(28,new z(17,22),new z(6,23)),new ee(30,new z(19,16),new z(6,17))),new je(22,Int32Array.from([6,26,50,74,98]),new ee(28,new z(2,111),new z(7,112)),new ee(28,new z(17,46)),new ee(30,new z(7,24),new z(16,25)),new ee(24,new z(34,13))),new je(23,Int32Array.from([6,30,54,78,102]),new ee(30,new z(4,121),new z(5,122)),new ee(28,new z(4,47),new z(14,48)),new ee(30,new z(11,24),new z(14,25)),new ee(30,new z(16,15),new z(14,16))),new je(24,Int32Array.from([6,28,54,80,106]),new ee(30,new z(6,117),new z(4,118)),new ee(28,new z(6,45),new z(14,46)),new ee(30,new z(11,24),new z(16,25)),new ee(30,new z(30,16),new z(2,17))),new je(25,Int32Array.from([6,32,58,84,110]),new ee(26,new z(8,106),new z(4,107)),new ee(28,new z(8,47),new z(13,48)),new ee(30,new z(7,24),new z(22,25)),new ee(30,new z(22,15),new z(13,16))),new je(26,Int32Array.from([6,30,58,86,114]),new ee(28,new z(10,114),new z(2,115)),new ee(28,new z(19,46),new z(4,47)),new ee(28,new z(28,22),new z(6,23)),new ee(30,new z(33,16),new z(4,17))),new je(27,Int32Array.from([6,34,62,90,118]),new ee(30,new z(8,122),new z(4,123)),new ee(28,new z(22,45),new z(3,46)),new ee(30,new z(8,23),new z(26,24)),new ee(30,new z(12,15),new z(28,16))),new je(28,Int32Array.from([6,26,50,74,98,122]),new ee(30,new z(3,117),new z(10,118)),new ee(28,new z(3,45),new z(23,46)),new ee(30,new z(4,24),new z(31,25)),new ee(30,new z(11,15),new z(31,16))),new je(29,Int32Array.from([6,30,54,78,102,126]),new ee(30,new z(7,116),new z(7,117)),new ee(28,new z(21,45),new z(7,46)),new ee(30,new z(1,23),new z(37,24)),new ee(30,new z(19,15),new z(26,16))),new je(30,Int32Array.from([6,26,52,78,104,130]),new ee(30,new z(5,115),new z(10,116)),new ee(28,new z(19,47),new z(10,48)),new ee(30,new z(15,24),new z(25,25)),new ee(30,new z(23,15),new z(25,16))),new je(31,Int32Array.from([6,30,56,82,108,134]),new ee(30,new z(13,115),new z(3,116)),new ee(28,new z(2,46),new z(29,47)),new ee(30,new z(42,24),new z(1,25)),new ee(30,new z(23,15),new z(28,16))),new je(32,Int32Array.from([6,34,60,86,112,138]),new ee(30,new z(17,115)),new ee(28,new z(10,46),new z(23,47)),new ee(30,new z(10,24),new z(35,25)),new ee(30,new z(19,15),new z(35,16))),new je(33,Int32Array.from([6,30,58,86,114,142]),new ee(30,new z(17,115),new z(1,116)),new ee(28,new z(14,46),new z(21,47)),new ee(30,new z(29,24),new z(19,25)),new ee(30,new z(11,15),new z(46,16))),new je(34,Int32Array.from([6,34,62,90,118,146]),new ee(30,new z(13,115),new z(6,116)),new ee(28,new z(14,46),new z(23,47)),new ee(30,new z(44,24),new z(7,25)),new ee(30,new z(59,16),new z(1,17))),new je(35,Int32Array.from([6,30,54,78,102,126,150]),new ee(30,new z(12,121),new z(7,122)),new ee(28,new z(12,47),new z(26,48)),new ee(30,new z(39,24),new z(14,25)),new ee(30,new z(22,15),new z(41,16))),new je(36,Int32Array.from([6,24,50,76,102,128,154]),new ee(30,new z(6,121),new z(14,122)),new ee(28,new z(6,47),new z(34,48)),new ee(30,new z(46,24),new z(10,25)),new ee(30,new z(2,15),new z(64,16))),new je(37,Int32Array.from([6,28,54,80,106,132,158]),new ee(30,new z(17,122),new z(4,123)),new ee(28,new z(29,46),new z(14,47)),new ee(30,new z(49,24),new z(10,25)),new ee(30,new z(24,15),new z(46,16))),new je(38,Int32Array.from([6,32,58,84,110,136,162]),new ee(30,new z(4,122),new z(18,123)),new ee(28,new z(13,46),new z(32,47)),new ee(30,new z(48,24),new z(14,25)),new ee(30,new z(42,15),new z(32,16))),new je(39,Int32Array.from([6,26,54,82,110,138,166]),new ee(30,new z(20,117),new z(4,118)),new ee(28,new z(40,47),new z(7,48)),new ee(30,new z(43,24),new z(22,25)),new ee(30,new z(10,15),new z(67,16))),new je(40,Int32Array.from([6,30,58,86,114,142,170]),new ee(30,new z(19,118),new z(6,119)),new ee(28,new z(18,47),new z(31,48)),new ee(30,new z(34,24),new z(34,25)),new ee(30,new z(20,15),new z(61,16)))];var Ir;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Ir||(Ir={}));class ns{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let c=0;c<a;c++)for(let d=0;d<a;d++)this.isMasked(c,d)&&i.flip(d,c)}}ns.values=new Map([[Ir.DATA_MASK_000,new ns(Ir.DATA_MASK_000,(j,i)=>(j+i&1)===0)],[Ir.DATA_MASK_001,new ns(Ir.DATA_MASK_001,(j,i)=>(j&1)===0)],[Ir.DATA_MASK_010,new ns(Ir.DATA_MASK_010,(j,i)=>i%3===0)],[Ir.DATA_MASK_011,new ns(Ir.DATA_MASK_011,(j,i)=>(j+i)%3===0)],[Ir.DATA_MASK_100,new ns(Ir.DATA_MASK_100,(j,i)=>(Math.floor(j/2)+Math.floor(i/3)&1)===0)],[Ir.DATA_MASK_101,new ns(Ir.DATA_MASK_101,(j,i)=>j*i%6===0)],[Ir.DATA_MASK_110,new ns(Ir.DATA_MASK_110,(j,i)=>j*i%6<3)],[Ir.DATA_MASK_111,new ns(Ir.DATA_MASK_111,(j,i)=>(j+i+j*i%3&1)===0)]]);class b4{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let m=0;m<6;m++)i=this.copyBit(m,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let m=5;m>=0;m--)i=this.copyBit(8,m,i);const a=this.bitMatrix.getHeight();let c=0;const d=a-7;for(let m=a-1;m>=d;m--)c=this.copyBit(8,m,c);for(let m=a-8;m<a;m++)c=this.copyBit(m,8,c);if(this.parsedFormatInfo=Wr.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return je.getVersionForNumber(a);let c=0;const d=i-11;for(let g=5;g>=0;g--)for(let w=i-9;w>=d;w--)c=this.copyBit(w,g,c);let m=je.decodeVersionInformation(c);if(m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;c=0;for(let g=5;g>=0;g--)for(let w=i-9;w>=d;w--)c=this.copyBit(g,w,c);if(m=je.decodeVersionInformation(c),m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;throw new B}copyBit(i,a,c){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),c=ns.values.get(i.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);const m=a.buildFunctionPattern();let g=!0;const w=new Uint8Array(a.getTotalCodewords());let _=0,T=0,M=0;for(let D=d-1;D>0;D-=2){D===6&&D--;for(let U=0;U<d;U++){const V=g?d-1-U:U;for(let Y=0;Y<2;Y++)m.get(D-Y,V)||(M++,T<<=1,this.bitMatrix.get(D-Y,V)&&(T|=1),M===8&&(w[_++]=T,M=0,T=0))}g=!g}if(_!==a.getTotalCodewords())throw new B;return w}remask(){if(this.parsedFormatInfo===null)return;const i=ns.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,c=i.getWidth();a<c;a++)for(let d=a+1,m=i.getHeight();d<m;d++)i.get(a,d)!==i.get(d,a)&&(i.flip(d,a),i.flip(a,d))}}class Z0{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,c){if(i.length!==a.getTotalCodewords())throw new y;const d=a.getECBlocksForLevel(c);let m=0;const g=d.getECBlocks();for(const Y of g)m+=Y.getCount();const w=new Array(m);let _=0;for(const Y of g)for(let X=0;X<Y.getCount();X++){const J=Y.getDataCodewords(),se=d.getECCodewordsPerBlock()+J;w[_++]=new Z0(J,new Uint8Array(se))}const T=w[0].codewords.length;let M=w.length-1;for(;M>=0&&w[M].codewords.length!==T;)M--;M++;const D=T-d.getECCodewordsPerBlock();let U=0;for(let Y=0;Y<D;Y++)for(let X=0;X<_;X++)w[X].codewords[Y]=i[U++];for(let Y=M;Y<_;Y++)w[Y].codewords[D]=i[U++];const V=w[0].codewords.length;for(let Y=D;Y<V;Y++)for(let X=0;X<_;X++){const J=X<M?Y:Y+1;w[X].codewords[J]=i[U++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ss;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(ss||(ss={}));class Fe{constructor(i,a,c,d){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=d,Fe.FOR_BITS.set(d,this),Fe.FOR_VALUE.set(i,this)}static forBits(i){const a=Fe.FOR_BITS.get(i);if(a===void 0)throw new y;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Fe))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}Fe.FOR_BITS=new Map,Fe.FOR_VALUE=new Map,Fe.TERMINATOR=new Fe(ss.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Fe.NUMERIC=new Fe(ss.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Fe.ALPHANUMERIC=new Fe(ss.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Fe.STRUCTURED_APPEND=new Fe(ss.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Fe.BYTE=new Fe(ss.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Fe.ECI=new Fe(ss.ECI,"ECI",Int32Array.from([0,0,0]),7),Fe.KANJI=new Fe(ss.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Fe.FNC1_FIRST_POSITION=new Fe(ss.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Fe.FNC1_SECOND_POSITION=new Fe(ss.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Fe.HANZI=new Fe(ss.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class $t{static decode(i,a,c,d){const m=new Q0(i);let g=new ie;const w=new Array;let _=-1,T=-1;try{let M=null,D=!1,U;do{if(m.available()<4)U=Fe.TERMINATOR;else{const V=m.readBits(4);U=Fe.forBits(V)}switch(U){case Fe.TERMINATOR:break;case Fe.FNC1_FIRST_POSITION:case Fe.FNC1_SECOND_POSITION:D=!0;break;case Fe.STRUCTURED_APPEND:if(m.available()<16)throw new B;_=m.readBits(8),T=m.readBits(8);break;case Fe.ECI:const V=$t.parseECIValue(m);if(M=L.getCharacterSetECIByValue(V),M===null)throw new B;break;case Fe.HANZI:const Y=m.readBits(4),X=m.readBits(U.getCharacterCountBits(a));Y===$t.GB2312_SUBSET&&$t.decodeHanziSegment(m,g,X);break;default:const J=m.readBits(U.getCharacterCountBits(a));switch(U){case Fe.NUMERIC:$t.decodeNumericSegment(m,g,J);break;case Fe.ALPHANUMERIC:$t.decodeAlphanumericSegment(m,g,J,D);break;case Fe.BYTE:$t.decodeByteSegment(m,g,J,M,w,d);break;case Fe.KANJI:$t.decodeKanjiSegment(m,g,J);break;default:throw new B}break}}while(U!==Fe.TERMINATOR)}catch{throw new B}return new Xe(i,g.toString(),w.length===0?null:w,c===null?null:c.toString(),_,T)}static decodeHanziSegment(i,a,c){if(c*13>i.available())throw new B;const d=new Uint8Array(2*c);let m=0;for(;c>0;){const g=i.readBits(13);let w=g/96<<8&4294967295|g%96;w<959?w+=41377:w+=42657,d[m]=w>>8&255,d[m+1]=w&255,m+=2,c--}try{a.append(q.decode(d,K.GB2312))}catch(g){throw new B(g)}}static decodeKanjiSegment(i,a,c){if(c*13>i.available())throw new B;const d=new Uint8Array(2*c);let m=0;for(;c>0;){const g=i.readBits(13);let w=g/192<<8&4294967295|g%192;w<7936?w+=33088:w+=49472,d[m]=w>>8,d[m+1]=w,m+=2,c--}try{a.append(q.decode(d,K.SHIFT_JIS))}catch(g){throw new B(g)}}static decodeByteSegment(i,a,c,d,m,g){if(8*c>i.available())throw new B;const w=new Uint8Array(c);for(let T=0;T<c;T++)w[T]=i.readBits(8);let _;d===null?_=K.guessEncoding(w,g):_=d.getName();try{a.append(q.decode(w,_))}catch(T){throw new B(T)}m.push(w)}static toAlphaNumericChar(i){if(i>=$t.ALPHANUMERIC_CHARS.length)throw new B;return $t.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,c,d){const m=a.length();for(;c>1;){if(i.available()<11)throw new B;const g=i.readBits(11);a.append($t.toAlphaNumericChar(Math.floor(g/45))),a.append($t.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(i.available()<6)throw new B;a.append($t.toAlphaNumericChar(i.readBits(6)))}if(d)for(let g=m;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(i,a,c){for(;c>=3;){if(i.available()<10)throw new B;const d=i.readBits(10);if(d>=1e3)throw new B;a.append($t.toAlphaNumericChar(Math.floor(d/100))),a.append($t.toAlphaNumericChar(Math.floor(d/10)%10)),a.append($t.toAlphaNumericChar(d%10)),c-=3}if(c===2){if(i.available()<7)throw new B;const d=i.readBits(7);if(d>=100)throw new B;a.append($t.toAlphaNumericChar(Math.floor(d/10))),a.append($t.toAlphaNumericChar(d%10))}else if(c===1){if(i.available()<4)throw new B;const d=i.readBits(4);if(d>=10)throw new B;a.append($t.toAlphaNumericChar(d))}}static parseECIValue(i){const a=i.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const c=i.readBits(8);return(a&63)<<8&4294967295|c}if((a&224)===192){const c=i.readBits(16);return(a&31)<<16&4294967295|c}throw new B}}$t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",$t.GB2312_SUBSET=1;class Hy{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class E4{constructor(){this.rsDecoder=new Nr(Ve.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(G.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const c=new b4(i);let d=null;try{return this.decodeBitMatrixParser(c,a)}catch(m){d=m}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const m=this.decodeBitMatrixParser(c,a);return m.setOther(new Hy(!0)),m}catch(m){throw d!==null?d:m}}decodeBitMatrixParser(i,a){const c=i.readVersion(),d=i.readFormatInformation().getErrorCorrectionLevel(),m=i.readCodewords(),g=Z0.getDataBlocks(m,c,d);let w=0;for(const M of g)w+=M.getNumDataCodewords();const _=new Uint8Array(w);let T=0;for(const M of g){const D=M.getCodewords(),U=M.getNumDataCodewords();this.correctErrors(D,U);for(let V=0;V<U;V++)_[T++]=D[V]}return $t.decode(_,c,d,a)}correctErrors(i,a){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-a)}catch{throw new b}for(let d=0;d<a;d++)i[d]=c[d]}}class J0 extends ve{constructor(i,a,c){super(i,a),this.estimatedModuleSize=c}aboutEquals(i,a,c){if(Math.abs(a-this.getY())<=i&&Math.abs(c-this.getX())<=i){const d=Math.abs(i-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(i,a,c){const d=(this.getX()+a)/2,m=(this.getY()+i)/2,g=(this.estimatedModuleSize+c)/2;return new J0(d,m,g)}}class Fd{constructor(i,a,c,d,m,g,w){this.image=i,this.startX=a,this.startY=c,this.width=d,this.height=m,this.moduleSize=g,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,c=this.width,d=i+c,m=this.startY+a/2,g=new Int32Array(3),w=this.image;for(let _=0;_<a;_++){const T=m+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));g[0]=0,g[1]=0,g[2]=0;let M=i;for(;M<d&&!w.get(M,T);)M++;let D=0;for(;M<d;){if(w.get(M,T))if(D===1)g[1]++;else if(D===2){if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,M);if(U!==null)return U}g[0]=g[2],g[1]=1,g[2]=0,D=1}else g[++D]++;else D===1&&D++,g[D]++;M++}if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,d);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,c=a/2;for(let d=0;d<3;d++)if(Math.abs(a-i[d])>=c)return!1;return!0}crossCheckVertical(i,a,c,d){const m=this.image,g=m.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let _=i;for(;_>=0&&m.get(a,_)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&!m.get(a,_)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=i+1;_<g&&m.get(a,_)&&w[1]<=c;)w[1]++,_++;if(_===g||w[1]>c)return NaN;for(;_<g&&!m.get(a,_)&&w[2]<=c;)w[2]++,_++;if(w[2]>c)return NaN;const T=w[0]+w[1]+w[2];return 5*Math.abs(T-d)>=2*d?NaN:this.foundPatternCross(w)?Fd.centerFromEnd(w,_):NaN}handlePossibleCenter(i,a,c){const d=i[0]+i[1]+i[2],m=Fd.centerFromEnd(i,c),g=this.crossCheckVertical(a,m,2*i[1],d);if(!isNaN(g)){const w=(i[0]+i[1]+i[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(w,g,m))return T.combineEstimate(g,m,w);const _=new J0(m,g,w);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class e1 extends ve{constructor(i,a,c,d){super(i,a),this.estimatedModuleSize=c,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,c){if(Math.abs(a-this.getY())<=i&&Math.abs(c-this.getX())<=i){const d=Math.abs(i-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(i,a,c){const d=this.count+1,m=(this.count*this.getX()+a)/d,g=(this.count*this.getY()+i)/d,w=(this.count*this.estimatedModuleSize+c)/d;return new e1(m,g,w,d)}}class C4{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Rr{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(F.TRY_HARDER)!==void 0,c=i!=null&&i.get(F.PURE_BARCODE)!==void 0,d=this.image,m=d.getHeight(),g=d.getWidth();let w=Math.floor(3*m/(4*Rr.MAX_MODULES));(w<Rr.MIN_SKIP||a)&&(w=Rr.MIN_SKIP);let _=!1;const T=new Int32Array(5);for(let D=w-1;D<m&&!_;D+=w){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let U=0;for(let V=0;V<g;V++)if(d.get(V,D))(U&1)===1&&U++,T[U]++;else if(U&1)T[U]++;else if(U===4)if(Rr.foundPatternCross(T)){if(this.handlePossibleCenter(T,D,V,c)===!0)if(w=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const X=this.findRowSkip();X>T[2]&&(D+=X-T[2]-w,V=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;continue}U=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;else T[++U]++;Rr.foundPatternCross(T)&&this.handlePossibleCenter(T,D,g,c)===!0&&(w=T[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const M=this.selectBestPatterns();return ve.orderBestPatterns(M),new C4(M)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let m=0;m<5;m++){const g=i[m];if(g===0)return!1;a+=g}if(a<7)return!1;const c=a/7,d=c/2;return Math.abs(c-i[0])<d&&Math.abs(c-i[1])<d&&Math.abs(3*c-i[2])<3*d&&Math.abs(c-i[3])<d&&Math.abs(c-i[4])<d}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,c,d){const m=this.getCrossCheckStateCount();let g=0;const w=this.image;for(;i>=g&&a>=g&&w.get(a-g,i-g);)m[2]++,g++;if(i<g||a<g)return!1;for(;i>=g&&a>=g&&!w.get(a-g,i-g)&&m[1]<=c;)m[1]++,g++;if(i<g||a<g||m[1]>c)return!1;for(;i>=g&&a>=g&&w.get(a-g,i-g)&&m[0]<=c;)m[0]++,g++;if(m[0]>c)return!1;const _=w.getHeight(),T=w.getWidth();for(g=1;i+g<_&&a+g<T&&w.get(a+g,i+g);)m[2]++,g++;if(i+g>=_||a+g>=T)return!1;for(;i+g<_&&a+g<T&&!w.get(a+g,i+g)&&m[3]<c;)m[3]++,g++;if(i+g>=_||a+g>=T||m[3]>=c)return!1;for(;i+g<_&&a+g<T&&w.get(a+g,i+g)&&m[4]<c;)m[4]++,g++;if(m[4]>=c)return!1;const M=m[0]+m[1]+m[2]+m[3]+m[4];return Math.abs(M-d)<2*d&&Rr.foundPatternCross(m)}crossCheckVertical(i,a,c,d){const m=this.image,g=m.getHeight(),w=this.getCrossCheckStateCount();let _=i;for(;_>=0&&m.get(a,_);)w[2]++,_--;if(_<0)return NaN;for(;_>=0&&!m.get(a,_)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&m.get(a,_)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=i+1;_<g&&m.get(a,_);)w[2]++,_++;if(_===g)return NaN;for(;_<g&&!m.get(a,_)&&w[3]<c;)w[3]++,_++;if(_===g||w[3]>=c)return NaN;for(;_<g&&m.get(a,_)&&w[4]<c;)w[4]++,_++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-d)>=2*d?NaN:Rr.foundPatternCross(w)?Rr.centerFromEnd(w,_):NaN}crossCheckHorizontal(i,a,c,d){const m=this.image,g=m.getWidth(),w=this.getCrossCheckStateCount();let _=i;for(;_>=0&&m.get(_,a);)w[2]++,_--;if(_<0)return NaN;for(;_>=0&&!m.get(_,a)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&m.get(_,a)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=i+1;_<g&&m.get(_,a);)w[2]++,_++;if(_===g)return NaN;for(;_<g&&!m.get(_,a)&&w[3]<c;)w[3]++,_++;if(_===g||w[3]>=c)return NaN;for(;_<g&&m.get(_,a)&&w[4]<c;)w[4]++,_++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-d)>=d?NaN:Rr.foundPatternCross(w)?Rr.centerFromEnd(w,_):NaN}handlePossibleCenter(i,a,c,d){const m=i[0]+i[1]+i[2]+i[3]+i[4];let g=Rr.centerFromEnd(i,c),w=this.crossCheckVertical(a,Math.floor(g),i[2],m);if(!isNaN(w)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(w),i[2],m),!isNaN(g)&&(!d||this.crossCheckDiagonal(Math.floor(w),Math.floor(g),i[2],m)))){const _=m/7;let T=!1;const M=this.possibleCenters;for(let D=0,U=M.length;D<U;D++){const V=M[D];if(V.aboutEquals(_,w,g)){M[D]=V.combineEstimate(w,g,_),T=!0;break}}if(!T){const D=new e1(g,w,_);M.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=Rr.CENTER_QUORUM)if(a==null)a=c;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Rr.CENTER_QUORUM&&(i++,a+=g.getEstimatedModuleSize());if(i<3)return!1;const d=a/c;let m=0;for(const g of this.possibleCenters)m+=Math.abs(g.getEstimatedModuleSize()-d);return m<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new $;const a=this.possibleCenters;let c;if(i>3){let d=0,m=0;for(const _ of this.possibleCenters){const T=_.getEstimatedModuleSize();d+=T,m+=T*T}c=d/i;let g=Math.sqrt(m/i-c*c);a.sort((_,T)=>{const M=Math.abs(T.getEstimatedModuleSize()-c),D=Math.abs(_.getEstimatedModuleSize()-c);return M<D?-1:M>D?1:0});const w=Math.max(.2*c,g);for(let _=0;_<a.length&&a.length>3;_++){const T=a[_];Math.abs(T.getEstimatedModuleSize()-c)>w&&(a.splice(_,1),_--)}}if(a.length>3){let d=0;for(const m of a)d+=m.getEstimatedModuleSize();c=d/a.length,a.sort((m,g)=>{if(g.getCount()===m.getCount()){const w=Math.abs(g.getEstimatedModuleSize()-c),_=Math.abs(m.getEstimatedModuleSize()-c);return w<_?1:w>_?-1:0}else return g.getCount()-m.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Rr.CENTER_QUORUM=2,Rr.MIN_SKIP=3,Rr.MAX_MODULES=57;class zc{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(F.NEED_RESULT_POINT_CALLBACK);const c=new Rr(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const a=i.getTopLeft(),c=i.getTopRight(),d=i.getBottomLeft(),m=this.calculateModuleSize(a,c,d);if(m<1)throw new $("No pattern found in proccess finder.");const g=zc.computeDimension(a,c,d,m),w=je.getProvisionalVersionForDimension(g),_=w.getDimensionForVersion()-7;let T=null;if(w.getAlignmentPatternCenters().length>0){const V=c.getX()-a.getX()+d.getX(),Y=c.getY()-a.getY()+d.getY(),X=1-3/_,J=Math.floor(a.getX()+X*(V-a.getX())),se=Math.floor(a.getY()+X*(Y-a.getY()));for(let ge=4;ge<=16;ge<<=1)try{T=this.findAlignmentInRegion(m,J,se,ge);break}catch(we){if(!(we instanceof $))throw we}}const M=zc.createTransform(a,c,d,T,g),D=zc.sampleGrid(this.image,M,g);let U;return T===null?U=[d,a,c]:U=[d,a,c,T],new jr(D,U)}static createTransform(i,a,c,d,m){const g=m-3.5;let w,_,T,M;return d!==null?(w=d.getX(),_=d.getY(),T=g-3,M=T):(w=a.getX()-i.getX()+c.getX(),_=a.getY()-i.getY()+c.getY(),T=g,M=g),St.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,M,3.5,g,i.getX(),i.getY(),a.getX(),a.getY(),w,_,c.getX(),c.getY())}static sampleGrid(i,a,c){return qs.getInstance().sampleGridWithTransform(i,c,c,a)}static computeDimension(i,a,c,d){const m=Se.round(ve.distance(i,a)/d),g=Se.round(ve.distance(i,c)/d);let w=Math.floor((m+g)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new $("Dimensions could be not found.")}return w}calculateModuleSize(i,a,c){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,a){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,c,d){let m=this.sizeOfBlackWhiteBlackRun(i,a,c,d),g=1,w=i-(c-i);w<0?(g=i/(i-w),w=0):w>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(w-i),w=this.image.getWidth()-1);let _=Math.floor(a-(d-a)*g);return g=1,_<0?(g=a/(a-_),_=0):_>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),w=Math.floor(i+(w-i)*g),m+=this.sizeOfBlackWhiteBlackRun(i,a,w,_),m-1}sizeOfBlackWhiteBlackRun(i,a,c,d){const m=Math.abs(d-a)>Math.abs(c-i);if(m){let V=i;i=a,a=V,V=c,c=d,d=V}const g=Math.abs(c-i),w=Math.abs(d-a);let _=-g/2;const T=i<c?1:-1,M=a<d?1:-1;let D=0;const U=c+T;for(let V=i,Y=a;V!==U;V+=T){const X=m?Y:V,J=m?V:Y;if(D===1===this.image.get(X,J)){if(D===2)return Se.distance(V,Y,i,a);D++}if(_+=w,_>0){if(Y===d)break;Y+=M,_-=g}}return D===2?Se.distance(c+T,d,i,a):NaN}findAlignmentInRegion(i,a,c,d){const m=Math.floor(d*i),g=Math.max(0,a-m),w=Math.min(this.image.getWidth()-1,a+m);if(w-g<i*3)throw new $("Alignment top exceeds estimated module size.");const _=Math.max(0,c-m),T=Math.min(this.image.getHeight()-1,c+m);if(T-_<i*3)throw new $("Alignment bottom exceeds estimated module size.");return new Fd(this.image,g,_,w-g,T-_,i,this.resultPointCallback).find()}}class Ji{constructor(){this.decoder=new E4}getDecoder(){return this.decoder}decode(i,a){let c,d;if(a!=null&&a.get(F.PURE_BARCODE)!==void 0){const _=Ji.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(_,a),d=Ji.NO_POINTS}else{const _=new zc(i.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(_.getBits(),a),d=_.getPoints()}c.getOther()instanceof Hy&&c.getOther().applyMirroredCorrection(d);const m=new ue(c.getText(),c.getRawBytes(),void 0,d,ye.QR_CODE,void 0),g=c.getByteSegments();g!==null&&m.putMetadata(Re.BYTE_SEGMENTS,g);const w=c.getECLevel();return w!==null&&m.putMetadata(Re.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(m.putMetadata(Re.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),m.putMetadata(Re.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),m}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(a===null||c===null)throw new $;const d=this.moduleSize(a,i);let m=a[1],g=c[1],w=a[0],_=c[0];if(w>=_||m>=g)throw new $;if(g-m!==_-w&&(_=w+(g-m),_>=i.getWidth()))throw new $;const T=Math.round((_-w+1)/d),M=Math.round((g-m+1)/d);if(T<=0||M<=0)throw new $;if(M!==T)throw new $;const D=Math.floor(d/2);m+=D,w+=D;const U=w+Math.floor((T-1)*d)-_;if(U>0){if(U>D)throw new $;w-=U}const V=m+Math.floor((M-1)*d)-g;if(V>0){if(V>D)throw new $;m-=V}const Y=new G(T,M);for(let X=0;X<M;X++){const J=m+Math.floor(X*d);for(let se=0;se<T;se++)i.get(w+Math.floor(se*d),J)&&Y.set(se,X)}return Y}static moduleSize(i,a){const c=a.getHeight(),d=a.getWidth();let m=i[0],g=i[1],w=!0,_=0;for(;m<d&&g<c;){if(w!==a.get(m,g)){if(++_===5)break;w=!w}m++,g++}if(m===d||g===c)throw new $;return(m-i[0])/7}}Ji.NO_POINTS=new Array;class He{PDF417Common(){}static getBitCountSum(i){return Se.sum(i)}static toIntArray(i){if(i==null||!i.length)return He.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let c=0;for(const d of i)a[c++]=d;return a}static getCodeword(i){const a=C.binarySearch(He.SYMBOL_TABLE,i&262143);return a<0?-1:(He.CODEWORD_TABLE[a]-1)%He.NUMBER_OF_CODEWORDS}}He.NUMBER_OF_CODEWORDS=929,He.MAX_CODEWORDS_IN_BARCODE=He.NUMBER_OF_CODEWORDS-1,He.MIN_ROWS_IN_BARCODE=3,He.MAX_ROWS_IN_BARCODE=90,He.MODULES_IN_CODEWORD=17,He.MODULES_IN_STOP_PATTERN=18,He.BARS_IN_MODULE=8,He.EMPTY_INT_ARRAY=new Int32Array([]),He.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),He.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class S4{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(i,a,c){let d=i.getBlackMatrix(),m=rt.detect(c,d);return m.length||(d=d.clone(),d.rotate180(),m=rt.detect(c,d)),new S4(d,m)}static detect(i,a){const c=new Array;let d=0,m=0,g=!1;for(;d<a.getHeight();){const w=rt.findVertices(a,d,m);if(w[0]==null&&w[3]==null){if(!g)break;g=!1,m=0;for(const _ of c)_[1]!=null&&(d=Math.trunc(Math.max(d,_[1].getY()))),_[3]!=null&&(d=Math.max(d,Math.trunc(_[3].getY())));d+=rt.ROW_STEP;continue}if(g=!0,c.push(w),!i)break;w[2]!=null?(m=Math.trunc(w[2].getX()),d=Math.trunc(w[2].getY())):(m=Math.trunc(w[4].getX()),d=Math.trunc(w[4].getY()))}return c}static findVertices(i,a,c){const d=i.getHeight(),m=i.getWidth(),g=new Array(8);return rt.copyToResult(g,rt.findRowsWithPattern(i,d,m,a,c,rt.START_PATTERN),rt.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),rt.copyToResult(g,rt.findRowsWithPattern(i,d,m,a,c,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),g}static copyToResult(i,a,c){for(let d=0;d<c.length;d++)i[c[d]]=a[d]}static findRowsWithPattern(i,a,c,d,m,g){const w=new Array(4);let _=!1;const T=new Int32Array(g.length);for(;d<a;d+=rt.ROW_STEP){let D=rt.findGuardPattern(i,m,d,c,!1,g,T);if(D!=null){for(;d>0;){const U=rt.findGuardPattern(i,m,--d,c,!1,g,T);if(U!=null)D=U;else{d++;break}}w[0]=new ve(D[0],d),w[1]=new ve(D[1],d),_=!0;break}}let M=d+1;if(_){let D=0,U=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;M<a;M++){const V=rt.findGuardPattern(i,U[0],M,c,!1,g,T);if(V!=null&&Math.abs(U[0]-V[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-V[1])<rt.MAX_PATTERN_DRIFT)U=V,D=0;else{if(D>rt.SKIPPED_ROW_COUNT_MAX)break;D++}}M-=D+1,w[2]=new ve(U[0],M),w[3]=new ve(U[1],M)}return M-d<rt.BARCODE_MIN_HEIGHT&&C.fill(w,null),w}static findGuardPattern(i,a,c,d,m,g,w){C.fillWithin(w,0,w.length,0);let _=a,T=0;for(;i.get(_,c)&&_>0&&T++<rt.MAX_PIXEL_DRIFT;)_--;let M=_,D=0,U=g.length;for(let V=m;M<d;M++)if(i.get(M,c)!==V)w[D]++;else{if(D===U-1){if(rt.patternMatchVariance(w,g,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([_,M]);_+=w[0]+w[1],E.arraycopy(w,2,w,0,D-1),w[D-1]=0,w[D]=0,D--}else D++;w[D]=1,V=!V}return D===U-1&&rt.patternMatchVariance(w,g,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([_,M-1]):null}static patternMatchVariance(i,a,c){let d=i.length,m=0,g=0;for(let T=0;T<d;T++)m+=i[T],g+=a[T];if(m<g)return 1/0;let w=m/g;c*=w;let _=0;for(let T=0;T<d;T++){let M=i[T],D=a[T]*w,U=M>D?M-D:D-M;if(U>c)return 1/0;_+=U}return _/m}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class Lr{constructor(i,a){if(a.length===0)throw new y;this.field=i;let c=a.length;if(c>1&&a[0]===0){let d=1;for(;d<c&&a[d]===0;)d++;d===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-d),E.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let d=0;for(let m of this.coefficients)d=this.field.add(d,m);return d}let a=this.coefficients[0],c=this.coefficients.length;for(let d=1;d<c;d++)a=this.field.add(this.field.multiply(i,a),this.coefficients[d]);return a}add(i){if(!this.field.equals(i.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,c=i.coefficients;if(a.length>c.length){let g=a;a=c,c=g}let d=new Int32Array(c.length),m=c.length-a.length;E.arraycopy(c,0,d,0,m);for(let g=m;g<c.length;g++)d[g]=this.field.add(a[g-m],c[g]);return new Lr(this.field,d)}subtract(i){if(!this.field.equals(i.field))throw new y("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Lr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Lr(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,d=i.coefficients,m=d.length,g=new Int32Array(c+m-1);for(let w=0;w<c;w++){let _=a[w];for(let T=0;T<m;T++)g[w+T]=this.field.add(g[w+T],this.field.multiply(_,d[T]))}return new Lr(this.field,g)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let c=0;c<i;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new Lr(this.field,a)}multiplyScalar(i){if(i===0)return new Lr(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let d=0;d<a;d++)c[d]=this.field.multiply(this.coefficients[d],i);return new Lr(this.field,c)}multiplyByMonomial(i,a){if(i<0)throw new y;if(a===0)return new Lr(this.field,new Int32Array([0]));let c=this.coefficients.length,d=new Int32Array(c+i);for(let m=0;m<c;m++)d[m]=this.field.multiply(this.coefficients[m],a);return new Lr(this.field,d)}toString(){let i=new ie;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(a===0||c!==1)&&i.append(c),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class A4{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new y;return this.logTable[i]}inverse(i){if(i===0)throw new nt;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class t1 extends A4{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let d=0;d<i;d++)this.expTable[d]=c,c=c*a%i;for(let d=0;d<i-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new Lr(this,new Int32Array([0])),this.one=new Lr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new y;if(a===0)return this.zero;let c=new Int32Array(i+1);return c[0]=a,new Lr(this,c)}}t1.PDF417_GF=new t1(He.NUMBER_OF_CODEWORDS,3);class $y{constructor(){this.field=t1.PDF417_GF}decode(i,a,c){let d=new Lr(this.field,i),m=new Int32Array(a),g=!1;for(let Y=a;Y>0;Y--){let X=d.evaluateAt(this.field.exp(Y));m[a-Y]=X,X!==0&&(g=!0)}if(!g)return 0;let w=this.field.getOne();if(c!=null)for(const Y of c){let X=this.field.exp(i.length-1-Y),J=new Lr(this.field,new Int32Array([this.field.subtract(0,X),1]));w=w.multiply(J)}let _=new Lr(this.field,m),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),M=T[0],D=T[1],U=this.findErrorLocations(M),V=this.findErrorMagnitudes(D,M,U);for(let Y=0;Y<U.length;Y++){let X=i.length-1-this.field.log(U[Y]);if(X<0)throw b.getChecksumInstance();i[X]=this.field.subtract(i[X],V[Y])}return U.length}runEuclideanAlgorithm(i,a,c){if(i.getDegree()<a.getDegree()){let U=i;i=a,a=U}let d=i,m=a,g=this.field.getZero(),w=this.field.getOne();for(;m.getDegree()>=Math.round(c/2);){let U=d,V=g;if(d=m,g=w,d.isZero())throw b.getChecksumInstance();m=U;let Y=this.field.getZero(),X=d.getCoefficient(d.getDegree()),J=this.field.inverse(X);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){let se=m.getDegree()-d.getDegree(),ge=this.field.multiply(m.getCoefficient(m.getDegree()),J);Y=Y.add(this.field.buildMonomial(se,ge)),m=m.subtract(d.multiplyByMonomial(se,ge))}w=Y.multiply(g).subtract(V).negative()}let _=w.getCoefficient(0);if(_===0)throw b.getChecksumInstance();let T=this.field.inverse(_),M=w.multiply(T),D=m.multiply(T);return[M,D]}findErrorLocations(i){let a=i.getDegree(),c=new Int32Array(a),d=0;for(let m=1;m<this.field.getSize()&&d<a;m++)i.evaluateAt(m)===0&&(c[d]=this.field.inverse(m),d++);if(d!==a)throw b.getChecksumInstance();return c}findErrorMagnitudes(i,a,c){let d=a.getDegree(),m=new Int32Array(d);for(let T=1;T<=d;T++)m[d-T]=this.field.multiply(T,a.getCoefficient(T));let g=new Lr(this.field,m),w=c.length,_=new Int32Array(w);for(let T=0;T<w;T++){let M=this.field.inverse(c[T]),D=this.field.subtract(0,i.evaluateAt(M)),U=this.field.inverse(g.evaluateAt(M));_[T]=this.field.multiply(D,U)}return _}}class sa{constructor(i,a,c,d,m){i instanceof sa?this.constructor_2(i):this.constructor_1(i,a,c,d,m)}constructor_1(i,a,c,d,m){const g=a==null||c==null,w=d==null||m==null;if(g&&w)throw new $;g?(a=new ve(0,d.getY()),c=new ve(0,m.getY())):w&&(d=new ve(i.getWidth()-1,a.getY()),m=new ve(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=a,this.bottomLeft=c,this.topRight=d,this.bottomRight=m,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),m.getX())),this.minY=Math.trunc(Math.min(a.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),m.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new sa(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,c){let d=this.topLeft,m=this.bottomLeft,g=this.topRight,w=this.bottomRight;if(i>0){let _=c?this.topLeft:this.topRight,T=Math.trunc(_.getY()-i);T<0&&(T=0);let M=new ve(_.getX(),T);c?d=M:g=M}if(a>0){let _=c?this.bottomLeft:this.bottomRight,T=Math.trunc(_.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let M=new ve(_.getX(),T);c?m=M:w=M}return new sa(this.image,d,m,g,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class N4{constructor(i,a,c,d){this.columnCount=i,this.errorCorrectionLevel=d,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vc{constructor(){this.buffer=""}static form(i,a){let c=-1;function d(g,w,_,T,M,D){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=M?parseInt(M.substr(1)):void 0,V;switch(D){case"s":V=a[c];break;case"c":V=a[c][0];break;case"f":V=parseFloat(a[c]).toFixed(g);break;case"p":V=parseFloat(a[c]).toPrecision(g);break;case"e":V=parseFloat(a[c]).toExponential(g);break;case"x":V=parseInt(a[c]).toString(U||16);break;case"d":V=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(U);let Y=parseInt(_),X=_&&_[0]+""=="0"?"0":" ";for(;V.length<Y;)V=w!==void 0?V+X:X+V;return V}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,d)}format(i,...a){this.buffer+=Vc.form(i,a)}toString(){return this.buffer}}class Hc{constructor(i){this.boundingBox=new sa(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let c=1;c<Hc.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(i)-c;if(d>=0&&(a=this.codewords[d],a!=null)||(d=this.imageRowToCodewordIndex(i)+c,d<this.codewords.length&&(a=this.codewords[d],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Vc;let a=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue())}return i.toString()}}Hc.MAX_NEARBY_DISTANCE=5;class $c{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[c,d]of this.values.entries()){const m={getKey:()=>c,getValue:()=>d};m.getValue()>i?(i=m.getValue(),a=[],a.push(m.getKey())):m.getValue()===i&&a.push(m.getKey())}return He.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class Wy extends Hc{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.imageRowToCodewordIndex(Math.trunc(m.getY())),_=-1,T=1,M=0;for(let D=g;D<w;D++){if(a[D]==null)continue;let U=a[D],V=U.getRowNumber()-_;if(V===0)M++;else if(V===1)T=Math.max(T,M),M=1,_=U.getRowNumber();else if(V<0||U.getRowNumber()>=i.getRowCount()||V>D)a[D]=null;else{let Y;T>2?Y=(T-2)*V:Y=V;let X=Y>=D;for(let J=1;J<=Y&&!X;J++)X=a[D-J]!=null;X?a[D]=null:(_=U.getRowNumber(),M=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let d=c.getRowNumber();if(d>=a.length)continue;a[d]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.getCodewords(),_=-1;for(let T=m;T<g;T++){if(w[T]==null)continue;let M=w[T];M.setRowNumberAsRowIndicatorColumn();let D=M.getRowNumber()-_;D===0||(D===1?_=M.getRowNumber():M.getRowNumber()>=i.getRowCount()?w[T]=null:_=M.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new $c,c=new $c,d=new $c,m=new $c;for(let w of i){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let _=w.getValue()%30,T=w.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:c.setValue(_*3+1);break;case 1:m.setValue(_/3),d.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||c.getValue().length===0||d.getValue().length===0||m.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+d.getValue()[0]<He.MIN_ROWS_IN_BARCODE||c.getValue()[0]+d.getValue()[0]>He.MAX_ROWS_IN_BARCODE)return null;let g=new N4(a.getValue()[0],c.getValue()[0],d.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,a){for(let c=0;c<i.length;c++){let d=i[c];if(i[c]==null)continue;let m=d.getValue()%30,g=d.getRowNumber();if(g>a.getRowCount()){i[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:m*3+1!==a.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(m/3)!==a.getErrorCorrectionLevel()||m%3!==a.getRowCountLowerPart())&&(i[c]=null);break;case 2:m+1!==a.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Wc{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=He.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let d=0;d<c.length;d++)c[d]!=null&&(c[d].hasValidRowNumber()||this.adjustRowNumbers(a,d,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&a[c]!=null&&i[c].getRowNumber()===a[c].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let m=this.detectionResultColumns[d].getCodewords()[c];m!=null&&(m.setRowNumber(i[c].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let d=a[c].getRowNumber(),m=0;for(let g=this.barcodeColumnCount+1;g>0&&m<this.ADJUST_ROW_NUMBER_SKIP;g--){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(m=Wc.adjustRowNumberIfValid(d,m,w),w.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let d=a[c].getRowNumber(),m=0;for(let g=1;g<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;g++){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(m=Wc.adjustRowNumberIfValid(d,m,w),w.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,c){if(!this.detectionResultColumns[i-1])return;let d=c[a],m=this.detectionResultColumns[i-1].getCodewords(),g=m;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let w=new Array(14);w[2]=m[a],w[3]=g[a],a>0&&(w[0]=c[a-1],w[4]=m[a-1],w[5]=g[a-1]),a>1&&(w[8]=c[a-2],w[10]=m[a-2],w[11]=g[a-2]),a<c.length-1&&(w[1]=c[a+1],w[6]=m[a+1],w[7]=g[a+1]),a<c.length-2&&(w[9]=c[a+2],w[12]=m[a+2],w[13]=g[a+2]);for(let _ of w)if(Wc.adjustRowNumber(d,_))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Vc;for(let c=0;c<i.getCodewords().length;c++){a.format("CW %3d:",c);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){a.format("    |   ");continue}let m=this.detectionResultColumns[d].getCodewords()[c];if(m==null){a.format("    |   ");continue}a.format(" %3d|%3d",m.getRowNumber(),m.getValue())}a.format("%n")}return a.toString()}}class Gc{constructor(i,a,c,d){this.rowNumber=Gc.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Gc.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Gc.BARCODE_ROW_UNKNOWN=-1;class xn{static initialize(){for(let i=0;i<He.SYMBOL_TABLE.length;i++){let a=He.SYMBOL_TABLE[i],c=a&1;for(let d=0;d<He.BARS_IN_MODULE;d++){let m=0;for(;(a&1)===c;)m+=1,a>>=1;c=a&1,xn.RATIOS_TABLE[i]||(xn.RATIOS_TABLE[i]=new Array(He.BARS_IN_MODULE)),xn.RATIOS_TABLE[i][He.BARS_IN_MODULE-d-1]=Math.fround(m/He.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=xn.getDecodedCodewordValue(xn.sampleBitCounts(i));return a!==-1?a:xn.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=Se.sum(i),c=new Int32Array(He.BARS_IN_MODULE),d=0,m=0;for(let g=0;g<He.MODULES_IN_CODEWORD;g++){let w=a/(2*He.MODULES_IN_CODEWORD)+g*a/He.MODULES_IN_CODEWORD;m+i[d]<=w&&(m+=i[d],d++),c[d]++}return c}static getDecodedCodewordValue(i){let a=xn.getBitValue(i);return He.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let c=0;c<i.length;c++)for(let d=0;d<i[c];d++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=Se.sum(i),c=new Array(He.BARS_IN_MODULE);if(a>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(i[g]/a);let d=vt.MAX_VALUE,m=-1;this.bSymbolTableReady||xn.initialize();for(let g=0;g<xn.RATIOS_TABLE.length;g++){let w=0,_=xn.RATIOS_TABLE[g];for(let T=0;T<He.BARS_IN_MODULE;T++){let M=Math.fround(_[T]-c[T]);if(w+=Math.fround(M*M),w>=d)break}w<d&&(d=w,m=He.SYMBOL_TABLE[g])}return m}}xn.bSymbolTableReady=!1,xn.RATIOS_TABLE=new Array(He.SYMBOL_TABLE.length).map(j=>new Array(He.BARS_IN_MODULE));class Gy{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Yy{static parseLong(i,a=void 0){return parseInt(i,a)}}class Xy extends f{}Xy.kind="NullPointerException";class T4{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,c){if(i==null)throw new Xy;if(a<0||a>i.length||c<0||a+c>i.length||a+c<0)throw new I;if(c===0)return;for(let d=0;d<c;d++)this.write(i[a+d])}flush(){}close(){}}class I4 extends f{}class R4 extends T4{constructor(i=32){if(super(),this.count=0,i<0)throw new y("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new I4;c=S.MAX_VALUE}this.buf=C.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,c){if(a<0||a>i.length||c<0||a+c-i.length>0)throw new I;this.ensureCapacity(this.count+c),E.arraycopy(i,a,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return C.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Ct;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ct||(Ct={}));function qy(){if(typeof window<"u")return window.BigInt||null;if(typeof qc<"u")return qc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ud;function eo(j){if(typeof Ud>"u"&&(Ud=qy()),Ud===null)throw new Error("BigInt is not supported!");return Ud(j)}function O4(){let j=[];j[0]=eo(1);let i=eo(900);j[1]=i;for(let a=2;a<16;a++)j[a]=j[a-1]*i;return j}class ne{static decode(i,a){let c=new ie(""),d=L.ISO8859_1;c.enableDecoding(d);let m=1,g=i[m++],w=new Gy;for(;m<i[0];){switch(g){case ne.TEXT_COMPACTION_MODE_LATCH:m=ne.textCompaction(i,m,c);break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:m=ne.byteCompaction(g,i,d,m,c);break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m++]);break;case ne.NUMERIC_COMPACTION_MODE_LATCH:m=ne.numericCompaction(i,m,c);break;case ne.ECI_CHARSET:L.getCharacterSetECIByValue(i[m++]);break;case ne.ECI_GENERAL_PURPOSE:m+=2;break;case ne.ECI_USER_DEFINED:m++;break;case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=ne.decodeMacroBlock(i,m,w);break;case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:throw new B;default:m--,m=ne.textCompaction(i,m,c);break}if(m<i.length)g=i[m++];else throw B.getFormatInstance()}if(c.length()===0)throw B.getFormatInstance();let _=new Xe(null,c.toString(),null,a);return _.setOther(w),_}static decodeMacroBlock(i,a,c){if(a+ne.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let d=new Int32Array(ne.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<ne.NUMBER_OF_SEQUENCE_CODEWORDS;w++,a++)d[w]=i[a];c.setSegmentIndex(S.parseInt(ne.decodeBase900toBase10(d,ne.NUMBER_OF_SEQUENCE_CODEWORDS)));let m=new ie;a=ne.textCompaction(i,a,m),c.setFileId(m.toString());let g=-1;for(i[a]===ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<i[0];)switch(i[a]){case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new ie;a=ne.textCompaction(i,a+1,w),c.setFileName(w.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new ie;a=ne.textCompaction(i,a+1,_),c.setSender(_.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new ie;a=ne.textCompaction(i,a+1,T),c.setAddressee(T.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let M=new ie;a=ne.numericCompaction(i,a+1,M),c.setSegmentCount(S.parseInt(M.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new ie;a=ne.numericCompaction(i,a+1,D),c.setTimestamp(Yy.parseLong(D.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new ie;a=ne.numericCompaction(i,a+1,U),c.setChecksum(S.parseInt(U.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new ie;a=ne.numericCompaction(i,a+1,V),c.setFileSize(Yy.parseLong(V.toString()));break;default:throw B.getFormatInstance()}break;case ne.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(g!==-1){let w=a-g;c.isLastSegment()&&w--,c.setOptionalData(C.copyOfRange(i,g,g+w))}return a}static textCompaction(i,a,c){let d=new Int32Array((i[0]-a)*2),m=new Int32Array((i[0]-a)*2),g=0,w=!1;for(;a<i[0]&&!w;){let _=i[a++];if(_<ne.TEXT_COMPACTION_MODE_LATCH)d[g]=_/30,d[g+1]=_%30,g+=2;else switch(_){case ne.TEXT_COMPACTION_MODE_LATCH:d[g++]=ne.TEXT_COMPACTION_MODE_LATCH;break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,w=!0;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[g]=ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[a++],m[g]=_,g++;break}}return ne.decodeTextCompaction(d,m,g,c),a}static decodeTextCompaction(i,a,c,d){let m=Ct.ALPHA,g=Ct.ALPHA,w=0;for(;w<c;){let _=i[w],T="";switch(m){case Ct.ALPHA:if(_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case ne.LL:m=Ct.LOWER;break;case ne.ML:m=Ct.MIXED;break;case ne.PS:g=m,m=Ct.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break;case Ct.LOWER:if(_<26)T=String.fromCharCode(97+_);else switch(_){case 26:T=" ";break;case ne.AS:g=m,m=Ct.ALPHA_SHIFT;break;case ne.ML:m=Ct.MIXED;break;case ne.PS:g=m,m=Ct.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break;case Ct.MIXED:if(_<ne.PL)T=ne.MIXED_CHARS[_];else switch(_){case ne.PL:m=Ct.PUNCT;break;case 26:T=" ";break;case ne.LL:m=Ct.LOWER;break;case ne.AL:m=Ct.ALPHA;break;case ne.PS:g=m,m=Ct.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break;case Ct.PUNCT:if(_<ne.PAL)T=ne.PUNCT_CHARS[_];else switch(_){case ne.PAL:m=Ct.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break;case Ct.ALPHA_SHIFT:if(m=g,_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break;case Ct.PUNCT_SHIFT:if(m=g,_<ne.PAL)T=ne.PUNCT_CHARS[_];else switch(_){case ne.PAL:m=Ct.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:m=Ct.ALPHA;break}break}T!==""&&d.append(T),w++}}static byteCompaction(i,a,c,d,m){let g=new R4,w=0,_=0,T=!1;switch(i){case ne.BYTE_COMPACTION_MODE_LATCH:let M=new Int32Array(6),D=a[d++];for(;d<a[0]&&!T;)switch(M[w++]=D,_=900*_+D,D=a[d++],D){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:d--,T=!0;break;default:if(w%5===0&&w>0){for(let U=0;U<6;++U)g.write(Number(eo(_)>>eo(8*(5-U))));_=0,w=0}break}d===a[0]&&D<ne.TEXT_COMPACTION_MODE_LATCH&&(M[w++]=D);for(let U=0;U<w;U++)g.write(M[U]);break;case ne.BYTE_COMPACTION_MODE_LATCH_6:for(;d<a[0]&&!T;){let U=a[d++];if(U<ne.TEXT_COMPACTION_MODE_LATCH)w++,_=900*_+U;else switch(U){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:d--,T=!0;break}if(w%5===0&&w>0){for(let V=0;V<6;++V)g.write(Number(eo(_)>>eo(8*(5-V))));_=0,w=0}}break}return m.append(q.decode(g.toByteArray(),c)),d}static numericCompaction(i,a,c){let d=0,m=!1,g=new Int32Array(ne.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!m;){let w=i[a++];if(a===i[0]&&(m=!0),w<ne.TEXT_COMPACTION_MODE_LATCH)g[d]=w,d++;else switch(w){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,m=!0;break}(d%ne.MAX_NUMERIC_CODEWORDS===0||w===ne.NUMERIC_COMPACTION_MODE_LATCH||m)&&d>0&&(c.append(ne.decodeBase900toBase10(g,d)),d=0)}return a}static decodeBase900toBase10(i,a){let c=eo(0);for(let m=0;m<a;m++)c+=ne.EXP900[a-m-1]*eo(i[m]);let d=c.toString();if(d.charAt(0)!=="1")throw new B;return d.substring(1)}}ne.TEXT_COMPACTION_MODE_LATCH=900,ne.BYTE_COMPACTION_MODE_LATCH=901,ne.NUMERIC_COMPACTION_MODE_LATCH=902,ne.BYTE_COMPACTION_MODE_LATCH_6=924,ne.ECI_USER_DEFINED=925,ne.ECI_GENERAL_PURPOSE=926,ne.ECI_CHARSET=927,ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ne.MACRO_PDF417_TERMINATOR=922,ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ne.MAX_NUMERIC_CODEWORDS=15,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ne.PL=25,ne.LL=27,ne.AS=27,ne.ML=28,ne.AL=28,ne.PS=29,ne.PAL=29,ne.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ne.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ne.EXP900=qy()?O4():[],ne.NUMBER_OF_SEQUENCE_CODEWORDS=2;class st{constructor(){}static decode(i,a,c,d,m,g,w){let _=new sa(i,a,c,d,m),T=null,M=null,D;for(let Y=!0;;Y=!1){if(a!=null&&(T=st.getRowIndicatorColumn(i,_,a,!0,g,w)),d!=null&&(M=st.getRowIndicatorColumn(i,_,d,!1,g,w)),D=st.merge(T,M),D==null)throw $.getNotFoundInstance();let X=D.getBoundingBox();if(Y&&X!=null&&(X.getMinY()<_.getMinY()||X.getMaxY()>_.getMaxY()))_=X;else break}D.setBoundingBox(_);let U=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,T),D.setDetectionResultColumn(U,M);let V=T!=null;for(let Y=1;Y<=U;Y++){let X=V?Y:U-Y;if(D.getDetectionResultColumn(X)!==void 0)continue;let J;X===0||X===U?J=new Wy(_,X===0):J=new Hc(_),D.setDetectionResultColumn(X,J);let se=-1,ge=se;for(let we=_.getMinY();we<=_.getMaxY();we++){if(se=st.getStartColumn(D,X,we,V),se<0||se>_.getMaxX()){if(ge===-1)continue;se=ge}let pe=st.detectCodeword(i,_.getMinX(),_.getMaxX(),V,se,we,g,w);pe!=null&&(J.setCodeword(we,pe),ge=se,g=Math.min(g,pe.getWidth()),w=Math.max(w,pe.getWidth()))}}return st.createDecoderResult(D)}static merge(i,a){if(i==null&&a==null)return null;let c=st.getBarcodeMetadata(i,a);if(c==null)return null;let d=sa.merge(st.adjustBoundingBox(i),st.adjustBoundingBox(a));return new Wc(c,d)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let c=st.getMax(a),d=0;for(let w of a)if(d+=c-w,w>0)break;let m=i.getCodewords();for(let w=0;d>0&&m[w]==null;w++)d--;let g=0;for(let w=a.length-1;w>=0&&(g+=c-a[w],!(a[w]>0));w--);for(let w=m.length-1;g>0&&m[w]==null;w--)g--;return i.getBoundingBox().addMissingRows(d,g,i.isLeft())}static getMax(i){let a=-1;for(let c of i)a=Math.max(a,c);return a}static getBarcodeMetadata(i,a){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let d;return a==null||(d=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c}static getRowIndicatorColumn(i,a,c,d,m,g){let w=new Wy(a,d);for(let _=0;_<2;_++){let T=_===0?1:-1,M=Math.trunc(Math.trunc(c.getX()));for(let D=Math.trunc(Math.trunc(c.getY()));D<=a.getMaxY()&&D>=a.getMinY();D+=T){let U=st.detectCodeword(i,0,i.getWidth(),d,M,D,m,g);U!=null&&(w.setCodeword(D,U),d?M=U.getStartX():M=U.getEndX())}}return w}static adjustCodewordCount(i,a){let c=a[0][1],d=c.getValue(),m=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-st.getNumberOfECCodeWords(i.getBarcodeECLevel());if(d.length===0){if(m<1||m>He.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();c.setValue(m)}else d[0]!==m&&c.setValue(m)}static createDecoderResult(i){let a=st.createBarcodeMatrix(i);st.adjustCodewordCount(i,a);let c=new Array,d=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),m=[],g=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let T=0;T<i.getBarcodeColumnCount();T++){let M=a[_][T+1].getValue(),D=_*i.getBarcodeColumnCount()+T;M.length===0?c.push(D):M.length===1?d[D]=M[0]:(g.push(D),m.push(M))}let w=new Array(m.length);for(let _=0;_<w.length;_++)w[_]=m[_];return st.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),d,He.toIntArray(c),He.toIntArray(g),w)}static createDecoderResultFromAmbiguousValues(i,a,c,d,m){let g=new Int32Array(d.length),w=100;for(;w-- >0;){for(let _=0;_<g.length;_++)a[d[_]]=m[_][g[_]];try{return st.decodeCodewords(a,i,c)}catch(_){if(!(_ instanceof b))throw _}if(g.length===0)throw b.getChecksumInstance();for(let _=0;_<g.length;_++)if(g[_]<m[_].length-1){g[_]++;break}else if(g[_]=0,_===g.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let d=0;d<a.length;d++)for(let m=0;m<a[d].length;m++)a[d][m]=new $c;let c=0;for(let d of i.getDetectionResultColumns()){if(d!=null){for(let m of d.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][c].setValue(m.getValue())}}}c++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,c,d){let m=d?1:-1,g=null;if(st.isValidBarcodeColumn(i,a-m)&&(g=i.getDetectionResultColumn(a-m).getCodeword(c)),g!=null)return d?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(a).getCodewordNearby(c),g!=null)return d?g.getStartX():g.getEndX();if(st.isValidBarcodeColumn(i,a-m)&&(g=i.getDetectionResultColumn(a-m).getCodewordNearby(c)),g!=null)return d?g.getEndX():g.getStartX();let w=0;for(;st.isValidBarcodeColumn(i,a-m);){a-=m;for(let _ of i.getDetectionResultColumn(a).getCodewords())if(_!=null)return(d?_.getEndX():_.getStartX())+m*w*(_.getEndX()-_.getStartX());w++}return d?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,c,d,m,g,w,_){m=st.adjustCodewordStartColumn(i,a,c,d,m,g);let T=st.getModuleBitCount(i,a,c,d,m,g);if(T==null)return null;let M,D=Se.sum(T);if(d)M=m+D;else{for(let Y=0;Y<T.length/2;Y++){let X=T[Y];T[Y]=T[T.length-1-Y],T[T.length-1-Y]=X}M=m,m=M-D}if(!st.checkCodewordSkew(D,w,_))return null;let U=xn.getDecodedValue(T),V=He.getCodeword(U);return V===-1?null:new Gc(m,M,st.getCodewordBucketNumber(U),V)}static getModuleBitCount(i,a,c,d,m,g){let w=m,_=new Int32Array(8),T=0,M=d?1:-1,D=d;for(;(d?w<c:w>=a)&&T<_.length;)i.get(w,g)===D?(_[T]++,w+=M):(T++,D=!D);return T===_.length||w===(d?c:a)&&T===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,c,d,m,g){let w=m,_=d?-1:1;for(let T=0;T<2;T++){for(;(d?w>=a:w<c)&&d===i.get(w,g);){if(Math.abs(m-w)>st.CODEWORD_SKEW_SIZE)return m;w+=_}_=-_,d=!d}return w}static checkCodewordSkew(i,a,c){return a-st.CODEWORD_SKEW_SIZE<=i&&i<=c+st.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,c){if(i.length===0)throw B.getFormatInstance();let d=1<<a+1,m=st.correctErrors(i,c,d);st.verifyCodewordCount(i,d);let g=ne.decode(i,""+a);return g.setErrorsCorrected(m),g.setErasures(c.length),g}static correctErrors(i,a,c){if(a!=null&&a.length>c/2+st.MAX_ERRORS||c<0||c>st.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return st.errorCorrection.decode(i,c,a)}static verifyCodewordCount(i,a){if(i.length<4)throw B.getFormatInstance();let c=i[0];if(c>i.length)throw B.getFormatInstance();if(c===0)if(a<i.length)i[0]=i.length-a;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),c=0,d=a.length-1;for(;!((i&1)!==c&&(c=i&1,d--,d<0));)a[d]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return st.getCodewordBucketNumber(st.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new Vc;for(let c=0;c<i.length;c++){a.format("Row %2d: ",c);for(let d=0;d<i[c].length;d++){let m=i[c][d];m.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}a.format("%n")}return a.toString()}}st.CODEWORD_SKEW_SIZE=2,st.MAX_ERRORS=3,st.MAX_EC_CODEWORDS=512,st.errorCorrection=new $y;class Br{decode(i,a=null){let c=Br.decode(i,a,!1);if(c==null||c.length===0||c[0]==null)throw $.getNotFoundInstance();return c[0]}decodeMultiple(i,a=null){try{return Br.decode(i,a,!0)}catch(c){throw c instanceof B||c instanceof b?$.getNotFoundInstance():c}}static decode(i,a,c){const d=new Array,m=rt.detectMultiple(i,a,c);for(const g of m.getPoints()){const w=st.decode(m.getBits(),g[4],g[5],g[6],g[7],Br.getMinCodewordWidth(g),Br.getMaxCodewordWidth(g)),_=new ue(w.getText(),w.getRawBytes(),void 0,g,ye.PDF_417);_.putMetadata(Re.ERROR_CORRECTION_LEVEL,w.getECLevel());const T=w.getOther();T!=null&&_.putMetadata(Re.PDF417_EXTRA_METADATA,T),d.push(_)}return d.map(g=>g)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?S.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Br.getMaxWidth(i[0],i[4]),Br.getMaxWidth(i[6],i[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.max(Br.getMaxWidth(i[1],i[5]),Br.getMaxWidth(i[7],i[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Br.getMinWidth(i[0],i[4]),Br.getMinWidth(i[6],i[2])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN),Math.min(Br.getMinWidth(i[1],i[5]),Br.getMinWidth(i[7],i[3])*He.MODULES_IN_CODEWORD/He.MODULES_IN_STOP_PATTERN)))}reset(){}}class zd extends f{}zd.kind="ReaderException";class Ky{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!n(i)&&i.get(F.TRY_HARDER)===!0,c=n(i)?null:i.get(F.POSSIBLE_FORMATS),d=new Array;if(!n(c)){const m=c.some(g=>g===ye.UPC_A||g===ye.UPC_E||g===ye.EAN_13||g===ye.EAN_8||g===ye.CODABAR||g===ye.CODE_39||g===ye.CODE_93||g===ye.CODE_128||g===ye.ITF||g===ye.RSS_14||g===ye.RSS_EXPANDED);m&&!a&&d.push(new ol(i,this.verbose)),c.includes(ye.QR_CODE)&&d.push(new Ji),c.includes(ye.DATA_MATRIX)&&d.push(new Zi),c.includes(ye.AZTEC)&&d.push(new rl),c.includes(ye.PDF_417)&&d.push(new Br),m&&a&&d.push(new ol(i,this.verbose))}d.length===0&&(a||d.push(new ol(i,this.verbose)),d.push(new Ji),d.push(new Zi),d.push(new rl),d.push(new Br),a&&d.push(new ol(i,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new zd("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(c){if(c instanceof zd)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class M4 extends oe{constructor(i=null,a=500){const c=new Ky;c.setHints(i),super(c,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class k4 extends oe{constructor(i=500){super(new Br,i)}}class P4 extends oe{constructor(i=500){super(new Ji,i)}}var r1;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(r1||(r1={}));var Er=r1;class n1{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Ue(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let c=a[a.length-1];const d=this.field;for(let m=a.length;m<=i;m++){const g=c.multiply(new Ue(d,Int32Array.from([1,d.exp(m-1+d.getGeneratorBase())])));a.push(g),c=g}}return a[i]}encode(i,a){if(a===0)throw new y("No error correction bytes");const c=i.length-a;if(c<=0)throw new y("No data bytes provided");const d=this.buildGenerator(a),m=new Int32Array(c);E.arraycopy(i,0,m,0,c);let g=new Ue(this.field,m);g=g.multiplyByMonomial(a,1);const _=g.divide(d)[1].getCoefficients(),T=a-_.length;for(let M=0;M<T;M++)i[c+M]=0;E.arraycopy(_,0,i,c+T,_.length)}}class tr{constructor(){}static applyMaskPenaltyRule1(i){return tr.applyMaskPenaltyRule1Internal(i,!0)+tr.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const c=i.getArray(),d=i.getWidth(),m=i.getHeight();for(let g=0;g<m-1;g++){const w=c[g];for(let _=0;_<d-1;_++){const T=w[_];T===w[_+1]&&T===c[g+1][_]&&T===c[g+1][_+1]&&a++}}return tr.N2*a}static applyMaskPenaltyRule3(i){let a=0;const c=i.getArray(),d=i.getWidth(),m=i.getHeight();for(let g=0;g<m;g++)for(let w=0;w<d;w++){const _=c[g];w+6<d&&_[w]===1&&_[w+1]===0&&_[w+2]===1&&_[w+3]===1&&_[w+4]===1&&_[w+5]===0&&_[w+6]===1&&(tr.isWhiteHorizontal(_,w-4,w)||tr.isWhiteHorizontal(_,w+7,w+11))&&a++,g+6<m&&c[g][w]===1&&c[g+1][w]===0&&c[g+2][w]===1&&c[g+3][w]===1&&c[g+4][w]===1&&c[g+5][w]===0&&c[g+6][w]===1&&(tr.isWhiteVertical(c,w,g-4,g)||tr.isWhiteVertical(c,w,g+7,g+11))&&a++}return a*tr.N3}static isWhiteHorizontal(i,a,c){a=Math.max(a,0),c=Math.min(c,i.length);for(let d=a;d<c;d++)if(i[d]===1)return!1;return!0}static isWhiteVertical(i,a,c,d){c=Math.max(c,0),d=Math.min(d,i.length);for(let m=c;m<d;m++)if(i[m][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const c=i.getArray(),d=i.getWidth(),m=i.getHeight();for(let _=0;_<m;_++){const T=c[_];for(let M=0;M<d;M++)T[M]===1&&a++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*tr.N4}static getDataMaskBit(i,a,c){let d,m;switch(i){case 0:d=c+a&1;break;case 1:d=c&1;break;case 2:d=a%3;break;case 3:d=(c+a)%3;break;case 4:d=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:m=c*a,d=(m&1)+m%3;break;case 6:m=c*a,d=(m&1)+m%3&1;break;case 7:m=c*a,d=m%3+(c+a&1)&1;break;default:throw new y("Invalid mask pattern: "+i)}return d===0}static applyMaskPenaltyRule1Internal(i,a){let c=0;const d=a?i.getHeight():i.getWidth(),m=a?i.getWidth():i.getHeight(),g=i.getArray();for(let w=0;w<d;w++){let _=0,T=-1;for(let M=0;M<m;M++){const D=a?g[w][M]:g[M][w];D===T?_++:(_>=5&&(c+=tr.N1+(_-5)),_=1,T=D)}_>=5&&(c+=tr.N1+(_-5))}return c}}tr.N1=3,tr.N2=3,tr.N3=40,tr.N4=10;class Vd{constructor(i,a){this.width=i,this.height=a;const c=new Array(a);for(let d=0;d!==a;d++)c[d]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,c){this.bytes[a][i]=c}setBoolean(i,a,c){this.bytes[a][i]=c?1:0}clear(i){for(const a of this.bytes)C.fill(a,i)}equals(i){if(!(i instanceof Vd))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,d=this.height;c<d;++c){const m=this.bytes[c],g=a.bytes[c];for(let w=0,_=this.width;w<_;++w)if(m[w]!==g[w])return!1}return!0}toString(){const i=new ie;for(let a=0,c=this.height;a<c;++a){const d=this.bytes[a];for(let m=0,g=this.width;m<g;++m)switch(d[m]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class ia{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new ie;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<ia.NUM_MASK_PATTERNS}}ia.NUM_MASK_PATTERNS=8;class At extends f{}At.kind="WriterException";class ze{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,c,d,m){ze.clearMatrix(m),ze.embedBasicPatterns(c,m),ze.embedTypeInfo(a,d,m),ze.maybeEmbedVersionInfo(c,m),ze.embedDataBits(i,d,m)}static embedBasicPatterns(i,a){ze.embedPositionDetectionPatternsAndSeparators(a),ze.embedDarkDotAtLeftBottomCorner(a),ze.maybeEmbedPositionAdjustmentPatterns(i,a),ze.embedTimingPatterns(a)}static embedTypeInfo(i,a,c){const d=new O;ze.makeTypeInfoBits(i,a,d);for(let m=0,g=d.getSize();m<g;++m){const w=d.get(d.getSize()-1-m),_=ze.TYPE_INFO_COORDINATES[m],T=_[0],M=_[1];if(c.setBoolean(T,M,w),m<8){const D=c.getWidth()-m-1;c.setBoolean(D,8,w)}else{const U=c.getHeight()-7+(m-8);c.setBoolean(8,U,w)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const c=new O;ze.makeVersionInfoBits(i,c);let d=6*3-1;for(let m=0;m<6;++m)for(let g=0;g<3;++g){const w=c.get(d);d--,a.setBoolean(m,a.getHeight()-11+g,w),a.setBoolean(a.getHeight()-11+g,m,w)}}static embedDataBits(i,a,c){let d=0,m=-1,g=c.getWidth()-1,w=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);w>=0&&w<c.getHeight();){for(let _=0;_<2;++_){const T=g-_;if(!ze.isEmpty(c.get(T,w)))continue;let M;d<i.getSize()?(M=i.get(d),++d):M=!1,a!==255&&tr.getDataMaskBit(a,T,w)&&(M=!M),c.setBoolean(T,w,M)}w+=m}m=-m,w+=m,g-=2}if(d!==i.getSize())throw new At("Not all bits consumed: "+d+"/"+i.getSize())}static findMSBSet(i){return 32-S.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new y("0 polynomial");const c=ze.findMSBSet(a);for(i<<=c-1;ze.findMSBSet(i)>=c;)i^=a<<ze.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,a,c){if(!ia.isValidMaskPattern(a))throw new At("Invalid mask pattern");const d=i.getBits()<<3|a;c.appendBits(d,5);const m=ze.calculateBCHCode(d,ze.TYPE_INFO_POLY);c.appendBits(m,10);const g=new O;if(g.appendBits(ze.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new At("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const c=ze.calculateBCHCode(i.getVersionNumber(),ze.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new At("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const c=(a+1)%2;ze.isEmpty(i.get(a,6))&&i.setNumber(a,6,c),ze.isEmpty(i.get(6,a))&&i.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new At;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,c){for(let d=0;d<8;++d){if(!ze.isEmpty(c.get(i+d,a)))throw new At;c.setNumber(i+d,a,0)}}static embedVerticalSeparationPattern(i,a,c){for(let d=0;d<7;++d){if(!ze.isEmpty(c.get(i,a+d)))throw new At;c.setNumber(i,a+d,0)}}static embedPositionAdjustmentPattern(i,a,c){for(let d=0;d<5;++d){const m=ze.POSITION_ADJUSTMENT_PATTERN[d];for(let g=0;g<5;++g)c.setNumber(i+g,a+d,m[g])}}static embedPositionDetectionPattern(i,a,c){for(let d=0;d<7;++d){const m=ze.POSITION_DETECTION_PATTERN[d];for(let g=0;g<7;++g)c.setNumber(i+g,a+d,m[g])}}static embedPositionDetectionPatternsAndSeparators(i){const a=ze.POSITION_DETECTION_PATTERN[0].length;ze.embedPositionDetectionPattern(0,0,i),ze.embedPositionDetectionPattern(i.getWidth()-a,0,i),ze.embedPositionDetectionPattern(0,i.getWidth()-a,i);const c=8;ze.embedHorizontalSeparationPattern(0,c-1,i),ze.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),ze.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const d=7;ze.embedVerticalSeparationPattern(d,0,i),ze.embedVerticalSeparationPattern(i.getHeight()-d-1,0,i),ze.embedVerticalSeparationPattern(d,i.getHeight()-d,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,d=ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let m=0,g=d.length;m!==g;m++){const w=d[m];if(w>=0)for(let _=0;_!==g;_++){const T=d[_];T>=0&&ze.isEmpty(a.get(T,w))&&ze.embedPositionAdjustmentPattern(T-2,w-2,a)}}}}ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ze.VERSION_INFO_POLY=7973,ze.TYPE_INFO_POLY=1335,ze.TYPE_INFO_MASK_PATTERN=21522;class j4{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(i){return tr.applyMaskPenaltyRule1(i)+tr.applyMaskPenaltyRule2(i)+tr.applyMaskPenaltyRule3(i)+tr.applyMaskPenaltyRule4(i)}static encode(i,a,c=null){let d=kt.DEFAULT_BYTE_MODE_ENCODING;const m=c!==null&&c.get(Er.CHARACTER_SET)!==void 0;m&&(d=c.get(Er.CHARACTER_SET).toString());const g=this.chooseMode(i,d),w=new O;if(g===Fe.BYTE&&(m||kt.DEFAULT_BYTE_MODE_ENCODING!==d)){const we=L.getCharacterSetECIByName(d);we!==void 0&&this.appendECI(we,w)}this.appendModeInfo(g,w);const _=new O;this.appendBytes(i,g,_,d);let T;if(c!==null&&c.get(Er.QR_VERSION)!==void 0){const we=Number.parseInt(c.get(Er.QR_VERSION).toString(),10);T=je.getVersionForNumber(we);const pe=this.calculateBitsNeeded(g,w,_,T);if(!this.willFit(pe,T,a))throw new At("Data too big for requested version")}else T=this.recommendVersion(a,g,w,_);const M=new O;M.appendBitArray(w);const D=g===Fe.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(D,T,g,M),M.appendBitArray(_);const U=T.getECBlocksForLevel(a),V=T.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(V,M);const Y=this.interleaveWithECBytes(M,T.getTotalCodewords(),V,U.getNumBlocks()),X=new ia;X.setECLevel(a),X.setMode(g),X.setVersion(T);const J=T.getDimensionForVersion(),se=new Vd(J,J),ge=this.chooseMaskPattern(Y,a,T,se);return X.setMaskPattern(ge),ze.buildMatrix(Y,a,T,ge,se),X.setMatrix(se),X}static recommendVersion(i,a,c,d){const m=this.calculateBitsNeeded(a,c,d,je.getVersionForNumber(1)),g=this.chooseVersion(m,i),w=this.calculateBitsNeeded(a,c,d,g);return this.chooseVersion(w,i)}static calculateBitsNeeded(i,a,c,d){return a.getSize()+i.getCharacterCountBits(d)+c.getSize()}static getAlphanumericCode(i){return i<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(L.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return Fe.KANJI;let c=!1,d=!1;for(let m=0,g=i.length;m<g;++m){const w=i.charAt(m);if(kt.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)d=!0;else return Fe.BYTE}return d?Fe.ALPHANUMERIC:c?Fe.NUMERIC:Fe.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=q.encode(i,L.SJIS)}catch{return!1}const c=a.length;if(c%2!==0)return!1;for(let d=0;d<c;d+=2){const m=a[d]&255;if((m<129||m>159)&&(m<224||m>235))return!1}return!0}static chooseMaskPattern(i,a,c,d){let m=Number.MAX_SAFE_INTEGER,g=-1;for(let w=0;w<ia.NUM_MASK_PATTERNS;w++){ze.buildMatrix(i,a,c,w,d);let _=this.calculateMaskPenalty(d);_<m&&(m=_,g=w)}return g}static chooseVersion(i,a){for(let c=1;c<=40;c++){const d=je.getVersionForNumber(c);if(kt.willFit(i,d,a))return d}throw new At("Data too big")}static willFit(i,a,c){const d=a.getTotalCodewords(),g=a.getECBlocksForLevel(c).getTotalECCodewords(),w=d-g,_=(i+7)/8;return w>=_}static terminateBits(i,a){const c=i*8;if(a.getSize()>c)throw new At("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let g=0;g<4&&a.getSize()<c;++g)a.appendBit(!1);const d=a.getSize()&7;if(d>0)for(let g=d;g<8;g++)a.appendBit(!1);const m=i-a.getSizeInBytes();for(let g=0;g<m;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==c)throw new At("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,c,d,m,g){if(d>=c)throw new At("Block ID too large");const w=i%c,_=c-w,T=Math.floor(i/c),M=T+1,D=Math.floor(a/c),U=D+1,V=T-D,Y=M-U;if(V!==Y)throw new At("EC bytes mismatch");if(c!==_+w)throw new At("RS blocks mismatch");if(i!==(D+V)*_+(U+Y)*w)throw new At("Total bytes mismatch");d<_?(m[0]=D,g[0]=V):(m[0]=U,g[0]=Y)}static interleaveWithECBytes(i,a,c,d){if(i.getSizeInBytes()!==c)throw new At("Number of bits and data bytes does not match");let m=0,g=0,w=0;const _=new Array;for(let M=0;M<d;++M){const D=new Int32Array(1),U=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(a,c,d,M,D,U);const V=D[0],Y=new Uint8Array(V);i.toBytes(8*m,Y,0,V);const X=kt.generateECBytes(Y,U[0]);_.push(new j4(Y,X)),g=Math.max(g,V),w=Math.max(w,X.length),m+=D[0]}if(c!==m)throw new At("Data bytes does not match offset");const T=new O;for(let M=0;M<g;++M)for(const D of _){const U=D.getDataBytes();M<U.length&&T.appendBits(U[M],8)}for(let M=0;M<w;++M)for(const D of _){const U=D.getErrorCorrectionBytes();M<U.length&&T.appendBits(U[M],8)}if(a!==T.getSizeInBytes())throw new At("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(i,a){const c=i.length,d=new Int32Array(c+a);for(let g=0;g<c;g++)d[g]=i[g]&255;new n1(Ve.QR_CODE_FIELD_256).encode(d,a);const m=new Uint8Array(a);for(let g=0;g<a;g++)m[g]=d[c+g];return m}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,c,d){const m=c.getCharacterCountBits(a);if(i>=1<<m)throw new At(i+" is bigger than "+((1<<m)-1));d.appendBits(i,m)}static appendBytes(i,a,c,d){switch(a){case Fe.NUMERIC:kt.appendNumericBytes(i,c);break;case Fe.ALPHANUMERIC:kt.appendAlphanumericBytes(i,c);break;case Fe.BYTE:kt.append8BitBytes(i,c,d);break;case Fe.KANJI:kt.appendKanjiBytes(i,c);break;default:throw new At("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=kt.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const c=i.length;let d=0;for(;d<c;){const m=kt.getDigit(i.charAt(d));if(d+2<c){const g=kt.getDigit(i.charAt(d+1)),w=kt.getDigit(i.charAt(d+2));a.appendBits(m*100+g*10+w,10),d+=3}else if(d+1<c){const g=kt.getDigit(i.charAt(d+1));a.appendBits(m*10+g,7),d+=2}else a.appendBits(m,4),d++}}static appendAlphanumericBytes(i,a){const c=i.length;let d=0;for(;d<c;){const m=kt.getAlphanumericCode(i.charCodeAt(d));if(m===-1)throw new At;if(d+1<c){const g=kt.getAlphanumericCode(i.charCodeAt(d+1));if(g===-1)throw new At;a.appendBits(m*45+g,11),d+=2}else a.appendBits(m,6),d++}}static append8BitBytes(i,a,c){let d;try{d=q.encode(i,c)}catch(m){throw new At(m)}for(let m=0,g=d.length;m!==g;m++){const w=d[m];a.appendBits(w,8)}}static appendKanjiBytes(i,a){let c;try{c=q.encode(i,L.SJIS)}catch(m){throw new At(m)}const d=c.length;for(let m=0;m<d;m+=2){const g=c[m]&255,w=c[m+1]&255,_=g<<8&4294967295|w;let T=-1;if(_>=33088&&_<=40956?T=_-33088:_>=57408&&_<=60351&&(T=_-49472),T===-1)throw new At("Invalid byte sequence");const M=(T>>8)*192+(T&255);a.appendBits(M,13)}}static appendECI(i,a){a.appendBits(Fe.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class oa{write(i,a,c,d=null){if(i.length===0)throw new y("Found empty contents");if(a<0||c<0)throw new y("Requested dimensions are too small: "+a+"x"+c);let m=Rt.L,g=oa.QUIET_ZONE_SIZE;d!==null&&(d.get(Er.ERROR_CORRECTION)!==void 0&&(m=Rt.fromString(d.get(Er.ERROR_CORRECTION).toString())),d.get(Er.MARGIN)!==void 0&&(g=Number.parseInt(d.get(Er.MARGIN).toString(),10)));const w=kt.encode(i,m,d);return this.renderResult(w,a,c,g)}writeToDom(i,a,c,d,m=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(a,c,d,m);i&&i.appendChild(g)}renderResult(i,a,c,d){const m=i.getMatrix();if(m===null)throw new wr;const g=m.getWidth(),w=m.getHeight(),_=g+d*2,T=w+d*2,M=Math.max(a,_),D=Math.max(c,T),U=Math.min(Math.floor(M/_),Math.floor(D/T)),V=Math.floor((M-g*U)/2),Y=Math.floor((D-w*U)/2),X=this.createSVGElement(M,D);for(let J=0,se=Y;J<w;J++,se+=U)for(let ge=0,we=V;ge<g;ge++,we+=U)if(m.get(ge,J)===1){const pe=this.createSvgRectElement(we,se,U,U);X.appendChild(pe)}return X}createSVGElement(i,a){const c=document.createElementNS(oa.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(i,a,c,d){const m=document.createElementNS(oa.SVG_NS,"rect");return m.setAttributeNS(null,"x",i.toString()),m.setAttributeNS(null,"y",a.toString()),m.setAttributeNS(null,"height",c.toString()),m.setAttributeNS(null,"width",d.toString()),m.setAttributeNS(null,"fill","#000000"),m}}oa.QUIET_ZONE_SIZE=4,oa.SVG_NS="http://www.w3.org/2000/svg";class ll{encode(i,a,c,d,m){if(i.length===0)throw new y("Found empty contents");if(a!==ye.QR_CODE)throw new y("Can only encode QR_CODE, but got "+a);if(c<0||d<0)throw new y(`Requested dimensions are too small: ${c}x${d}`);let g=Rt.L,w=ll.QUIET_ZONE_SIZE;m!==null&&(m.get(Er.ERROR_CORRECTION)!==void 0&&(g=Rt.fromString(m.get(Er.ERROR_CORRECTION).toString())),m.get(Er.MARGIN)!==void 0&&(w=Number.parseInt(m.get(Er.MARGIN).toString(),10)));const _=kt.encode(i,g,m);return ll.renderResult(_,c,d,w)}static renderResult(i,a,c,d){const m=i.getMatrix();if(m===null)throw new wr;const g=m.getWidth(),w=m.getHeight(),_=g+d*2,T=w+d*2,M=Math.max(a,_),D=Math.max(c,T),U=Math.min(Math.floor(M/_),Math.floor(D/T)),V=Math.floor((M-g*U)/2),Y=Math.floor((D-w*U)/2),X=new G(M,D);for(let J=0,se=Y;J<w;J++,se+=U)for(let ge=0,we=V;ge<g;ge++,we+=U)m.get(ge,J)===1&&X.setRegion(we,se,U,U);return X}}ll.QUIET_ZONE_SIZE=4;class D4{encode(i,a,c,d,m){let g;switch(a){case ye.QR_CODE:g=new ll;break;default:throw new y("No encoder available for format "+a)}return g.encode(i,a,c,d,m)}}class Zs extends Q{constructor(i,a,c,d,m,g,w,_){if(super(g,w),this.yuvData=i,this.dataWidth=a,this.dataHeight=c,this.left=d,this.top=m,d+g>a||m+w>c)throw new y("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(g,w)}getRow(i,a){if(i<0||i>=this.getHeight())throw new y("Requested row is outside the image: "+i);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const d=(i+this.top)*this.dataWidth+this.left;return E.arraycopy(this.yuvData,d,a,0,c),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=i*a,d=new Uint8ClampedArray(c);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return E.arraycopy(this.yuvData,m,d,0,c),d;for(let g=0;g<a;g++){const w=g*i;E.arraycopy(this.yuvData,m,d,w,i),m+=this.dataWidth}return d}isCropSupported(){return!0}crop(i,a,c,d){return new Zs(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,c,d,!1)}renderThumbnail(){const i=this.getWidth()/Zs.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Zs.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*a),d=this.yuvData;let m=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const w=g*i;for(let _=0;_<i;_++){const T=d[m+_*Zs.THUMBNAIL_SCALE_FACTOR]&255;c[w+_]=4278190080|T*65793}m+=this.dataWidth*Zs.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/Zs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Zs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const c=this.yuvData;for(let d=0,m=this.top*this.dataWidth+this.left;d<a;d++,m+=this.dataWidth){const g=m+i/2;for(let w=m,_=m+i-1;w<g;w++,_--){const T=c[w];c[w]=c[_],c[_]=T}}}invert(){return new H(this)}}Zs.THUMBNAIL_SCALE_FACTOR=2;class s1 extends Q{constructor(i,a,c,d,m,g,w){if(super(a,c),this.dataWidth=d,this.dataHeight=m,this.left=g,this.top=w,i.BYTES_PER_ELEMENT===4){const _=a*c,T=new Uint8ClampedArray(_);for(let M=0;M<_;M++){const D=i[M],U=D>>16&255,V=D>>7&510,Y=D&255;T[M]=(U+V+Y)/4&255}this.luminances=T}else this.luminances=i;if(d===void 0&&(this.dataWidth=a),m===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new y("Requested row is outside the image: "+i);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const d=(i+this.top)*this.dataWidth+this.left;return E.arraycopy(this.luminances,d,a,0,c),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const c=i*a,d=new Uint8ClampedArray(c);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return E.arraycopy(this.luminances,m,d,0,c),d;for(let g=0;g<a;g++){const w=g*i;E.arraycopy(this.luminances,m,d,w,i),m+=this.dataWidth}return d}isCropSupported(){return!0}crop(i,a,c,d){return new s1(this.luminances,c,d,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new H(this)}}class Qy extends L{static forName(i){return this.getCharacterSetECIByName(i)}}class i1{}i1.ISO_8859_1=L.ISO8859_1;class Zy{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Jy{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class L4{constructor(i){this.previous=i}getPrevious(){return this.previous}}class cl extends L4{constructor(i,a,c){super(i),this.value=a,this.bitCount=c}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new cl(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new cl(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+S.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class o1 extends cl{constructor(i,a,c){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(i,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(i,a){return new o1(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function B4(j,i,a){return new o1(j,i,a)}function Yc(j,i,a){return new cl(j,i,a)}const F4=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],to=0,Hd=1,is=2,ew=3,Js=4,U4=new cl(null,0,0),a1=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function z4(j){for(let i of j)C.fill(i,-1);return j[to][Js]=0,j[Hd][Js]=0,j[Hd][to]=28,j[ew][Js]=0,j[is][Js]=0,j[is][to]=15,j}const tw=z4(C.createInt32Array(6,6));class ei{constructor(i,a,c,d){this.token=i,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let c=this.bitCount,d=this.token;if(i!==this.mode){let g=a1[this.mode][i];d=Yc(d,g&65535,g>>16),c+=g>>16}let m=i===is?4:5;return d=Yc(d,a,m),new ei(d,i,0,c+m)}shiftAndAppend(i,a){let c=this.token,d=this.mode===is?4:5;return c=Yc(c,tw[this.mode][i],d),c=Yc(c,a,5),new ei(c,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(i){let a=this.token,c=this.mode,d=this.bitCount;if(this.mode===Js||this.mode===is){let w=a1[c][to];a=Yc(a,w&65535,w>>16),d+=w>>16,c=to}let m=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ei(a,c,this.binaryShiftByteCount+1,d+m);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=B4(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ei(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+(a1[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=ei.calculateBinaryShiftCost(i)-ei.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let d=this.endBinaryShift(i.length).token;d!==null;d=d.getPrevious())a.unshift(d);let c=new O;for(const d of a)d.appendTo(c,i);return c}toString(){return K.format("%s bits=%d bytes=%d",F4[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ei.INITIAL_STATE=new ei(U4,to,0,0);function V4(j){const i=K.getCharCode(" "),a=K.getCharCode("."),c=K.getCharCode(",");j[to][i]=1;const d=K.getCharCode("Z"),m=K.getCharCode("A");for(let U=m;U<=d;U++)j[to][U]=U-m+2;j[Hd][i]=1;const g=K.getCharCode("z"),w=K.getCharCode("a");for(let U=w;U<=g;U++)j[Hd][U]=U-w+2;j[is][i]=1;const _=K.getCharCode("9"),T=K.getCharCode("0");for(let U=T;U<=_;U++)j[is][U]=U-T+2;j[is][c]=12,j[is][a]=13;const M=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<M.length;U++)j[ew][K.getCharCode(M[U])]=U;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<D.length;U++)K.getCharCode(D[U])>0&&(j[Js][K.getCharCode(D[U])]=U);return j}const l1=V4(C.createInt32Array(5,256));class Xc{constructor(i){this.text=i}encode(){const i=K.getCharCode(" "),a=K.getCharCode(`
`);let c=Jy.singletonList(ei.INITIAL_STATE);for(let m=0;m<this.text.length;m++){let g,w=m+1<this.text.length?this.text[m+1]:0;switch(this.text[m]){case K.getCharCode("\r"):g=w===a?2:0;break;case K.getCharCode("."):g=w===i?3:0;break;case K.getCharCode(","):g=w===i?4:0;break;case K.getCharCode(":"):g=w===i?5:0;break;default:g=0}g>0?(c=Xc.updateStateListForPair(c,m,g),m++):c=this.updateStateListForChar(c,m)}return Jy.min(c,(m,g)=>m.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const c=[];for(let d of i)this.updateStateForChar(d,a,c);return Xc.simplifyStates(c)}updateStateForChar(i,a,c){let d=this.text[a]&255,m=l1[i.getMode()][d]>0,g=null;for(let w=0;w<=Js;w++){let _=l1[w][d];if(_>0){if(g==null&&(g=i.endBinaryShift(a)),!m||w===i.getMode()||w===is){const T=g.latchAndAppend(w,_);c.push(T)}if(!m&&tw[i.getMode()][w]>=0){const T=g.shiftAndAppend(w,_);c.push(T)}}}if(i.getBinaryShiftByteCount()>0||l1[i.getMode()][d]===0){let w=i.addBinaryShiftChar(a);c.push(w)}}static updateStateListForPair(i,a,c){const d=[];for(let m of i)this.updateStateForPair(m,a,c,d);return this.simplifyStates(d)}static updateStateForPair(i,a,c,d){let m=i.endBinaryShift(a);if(d.push(m.latchAndAppend(Js,c)),i.getMode()!==Js&&d.push(m.shiftAndAppend(Js,c)),c===3||c===4){let g=m.latchAndAppend(is,16-c).latchAndAppend(is,1);d.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);d.push(g)}}static simplifyStates(i){let a=[];for(const c of i){let d=!0;for(const m of a){if(m.isBetterThanOrEqualTo(c)){d=!1;break}c.isBetterThanOrEqualTo(m)&&(a=a.filter(g=>g!==m))}d&&a.push(c)}return a}}class pt{constructor(){}static encodeBytes(i){return pt.encode(i,pt.DEFAULT_EC_PERCENT,pt.DEFAULT_AZTEC_LAYERS)}static encode(i,a,c){let d=new Xc(i).encode(),m=S.truncDivision(d.getSize()*a,100)+11,g=d.getSize()+m,w,_,T,M,D;if(c!==pt.DEFAULT_AZTEC_LAYERS){if(w=c<0,_=Math.abs(c),_>(w?pt.MAX_NB_BITS_COMPACT:pt.MAX_NB_BITS))throw new y(K.format("Illegal value %s for layers",c));T=pt.totalBitsInLayer(_,w),M=pt.WORD_SIZE[_];let pe=T-T%M;if(D=pt.stuffBits(d,M),D.getSize()+m>pe)throw new y("Data to large for user specified layer");if(w&&D.getSize()>M*64)throw new y("Data to large for user specified layer")}else{M=0,D=null;for(let pe=0;;pe++){if(pe>pt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(w=pe<=3,_=w?pe+1:pe,T=pt.totalBitsInLayer(_,w),g>T)continue;(D==null||M!==pt.WORD_SIZE[_])&&(M=pt.WORD_SIZE[_],D=pt.stuffBits(d,M));let lt=T-T%M;if(!(w&&D.getSize()>M*64)&&D.getSize()+m<=lt)break}}let U=pt.generateCheckWords(D,T,M),V=D.getSize()/M,Y=pt.generateModeMessage(w,_,V),X=(w?11:14)+_*4,J=new Int32Array(X),se;if(w){se=X;for(let pe=0;pe<J.length;pe++)J[pe]=pe}else{se=X+1+2*S.truncDivision(S.truncDivision(X,2)-1,15);let pe=S.truncDivision(X,2),lt=S.truncDivision(se,2);for(let Qe=0;Qe<pe;Qe++){let yn=Qe+S.truncDivision(Qe,15);J[pe-Qe-1]=lt-yn-1,J[pe+Qe]=lt+yn+1}}let ge=new G(se);for(let pe=0,lt=0;pe<_;pe++){let Qe=(_-pe)*4+(w?9:12);for(let yn=0;yn<Qe;yn++){let Cs=yn*2;for(let wn=0;wn<2;wn++)U.get(lt+Cs+wn)&&ge.set(J[pe*2+wn],J[pe*2+yn]),U.get(lt+Qe*2+Cs+wn)&&ge.set(J[pe*2+yn],J[X-1-pe*2-wn]),U.get(lt+Qe*4+Cs+wn)&&ge.set(J[X-1-pe*2-wn],J[X-1-pe*2-yn]),U.get(lt+Qe*6+Cs+wn)&&ge.set(J[X-1-pe*2-yn],J[pe*2+wn])}lt+=Qe*8}if(pt.drawModeMessage(ge,w,se,Y),w)pt.drawBullsEye(ge,S.truncDivision(se,2),5);else{pt.drawBullsEye(ge,S.truncDivision(se,2),7);for(let pe=0,lt=0;pe<S.truncDivision(X,2)-1;pe+=15,lt+=16)for(let Qe=S.truncDivision(se,2)&1;Qe<se;Qe+=2)ge.set(S.truncDivision(se,2)-lt,Qe),ge.set(S.truncDivision(se,2)+lt,Qe),ge.set(Qe,S.truncDivision(se,2)-lt),ge.set(Qe,S.truncDivision(se,2)+lt)}let we=new Zy;return we.setCompact(w),we.setSize(se),we.setLayers(_),we.setCodeWords(V),we.setMatrix(ge),we}static drawBullsEye(i,a,c){for(let d=0;d<c;d+=2)for(let m=a-d;m<=a+d;m++)i.set(m,a-d),i.set(m,a+d),i.set(a-d,m),i.set(a+d,m);i.set(a-c,a-c),i.set(a-c+1,a-c),i.set(a-c,a-c+1),i.set(a+c,a-c),i.set(a+c,a-c+1),i.set(a+c,a+c-1)}static generateModeMessage(i,a,c){let d=new O;return i?(d.appendBits(a-1,2),d.appendBits(c-1,6),d=pt.generateCheckWords(d,28,4)):(d.appendBits(a-1,5),d.appendBits(c-1,11),d=pt.generateCheckWords(d,40,4)),d}static drawModeMessage(i,a,c,d){let m=S.truncDivision(c,2);if(a)for(let g=0;g<7;g++){let w=m-3+g;d.get(g)&&i.set(w,m-5),d.get(g+7)&&i.set(m+5,w),d.get(20-g)&&i.set(w,m+5),d.get(27-g)&&i.set(m-5,w)}else for(let g=0;g<10;g++){let w=m-5+g+S.truncDivision(g,5);d.get(g)&&i.set(w,m-7),d.get(g+10)&&i.set(m+7,w),d.get(29-g)&&i.set(w,m+7),d.get(39-g)&&i.set(m-7,w)}}static generateCheckWords(i,a,c){let d=i.getSize()/c,m=new n1(pt.getGF(c)),g=S.truncDivision(a,c),w=pt.bitsToWords(i,c,g);m.encode(w,g-d);let _=a%c,T=new O;T.appendBits(0,_);for(const M of Array.from(w))T.appendBits(M,c);return T}static bitsToWords(i,a,c){let d=new Int32Array(c),m,g;for(m=0,g=i.getSize()/a;m<g;m++){let w=0;for(let _=0;_<a;_++)w|=i.get(m*a+_)?1<<a-_-1:0;d[m]=w}return d}static getGF(i){switch(i){case 4:return Ve.AZTEC_PARAM;case 6:return Ve.AZTEC_DATA_6;case 8:return Ve.AZTEC_DATA_8;case 10:return Ve.AZTEC_DATA_10;case 12:return Ve.AZTEC_DATA_12;default:throw new y("Unsupported word size "+i)}}static stuffBits(i,a){let c=new O,d=i.getSize(),m=(1<<a)-2;for(let g=0;g<d;g+=a){let w=0;for(let _=0;_<a;_++)(g+_>=d||i.get(g+_))&&(w|=1<<a-1-_);(w&m)===m?(c.appendBits(w&m,a),g--):w&m?c.appendBits(w,a):(c.appendBits(w|1,a),g--)}return c}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}pt.DEFAULT_EC_PERCENT=33,pt.DEFAULT_AZTEC_LAYERS=0,pt.MAX_NB_BITS=32,pt.MAX_NB_BITS_COMPACT=4,pt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class $d{encode(i,a,c,d){return this.encodeWithHints(i,a,c,d,null)}encodeWithHints(i,a,c,d,m){let g=i1.ISO_8859_1,w=pt.DEFAULT_EC_PERCENT,_=pt.DEFAULT_AZTEC_LAYERS;return m!=null&&(m.has(Er.CHARACTER_SET)&&(g=Qy.forName(m.get(Er.CHARACTER_SET).toString())),m.has(Er.ERROR_CORRECTION)&&(w=S.parseInt(m.get(Er.ERROR_CORRECTION).toString())),m.has(Er.AZTEC_LAYERS)&&(_=S.parseInt(m.get(Er.AZTEC_LAYERS).toString()))),$d.encodeLayers(i,a,c,d,g,w,_)}static encodeLayers(i,a,c,d,m,g,w){if(a!==ye.AZTEC)throw new y("Can only encode AZTEC, but got "+a);let _=pt.encode(K.getBytes(i,m),g,w);return $d.renderResult(_,c,d)}static renderResult(i,a,c){let d=i.getMatrix();if(d==null)throw new wr;let m=d.getWidth(),g=d.getHeight(),w=Math.max(a,m),_=Math.max(c,g),T=Math.min(w/m,_/g),M=(w-m*T)/2,D=(_-g*T)/2,U=new G(w,_);for(let V=0,Y=D;V<g;V++,Y+=T)for(let X=0,J=M;X<m;X++,J+=T)d.get(X,V)&&U.setRegion(J,Y,T,T);return U}}r.AbstractExpandedDecoder=Y0,r.ArgumentException=x,r.ArithmeticException=nt,r.AztecCode=Zy,r.AztecCodeReader=rl,r.AztecCodeWriter=$d,r.AztecDecoder=Pe,r.AztecDetector=ta,r.AztecDetectorResult=it,r.AztecEncoder=pt,r.AztecHighLevelEncoder=Xc,r.AztecPoint=Dr,r.BarcodeFormat=ye,r.Binarizer=A,r.BinaryBitmap=v,r.BitArray=O,r.BitMatrix=G,r.BitSource=Q0,r.BrowserAztecCodeReader=jd,r.BrowserBarcodeReader=w4,r.BrowserCodeReader=oe,r.BrowserDatamatrixCodeReader=_4,r.BrowserMultiFormatReader=M4,r.BrowserPDF417Reader=k4,r.BrowserQRCodeReader=P4,r.BrowserQRCodeSvgWriter=oa,r.CharacterSetECI=L,r.ChecksumException=b,r.Code128Reader=be,r.Code39Reader=Jt,r.DataMatrixDecodedBitStreamParser=Qi,r.DataMatrixReader=Zi,r.DecodeHintType=F,r.DecoderResult=Xe,r.DefaultGridSampler=bi,r.DetectorResult=jr,r.EAN13Reader=bs,r.EncodeHintType=Er,r.Exception=f,r.FormatException=B,r.GenericGF=Ve,r.GenericGFPoly=Ue,r.GlobalHistogramBinarizer=re,r.GridSampler=ea,r.GridSamplerInstance=qs,r.HTMLCanvasElementLuminanceSource=te,r.HybridBinarizer=Z,r.ITFReader=ft,r.IllegalArgumentException=y,r.IllegalStateException=wr,r.InvertedLuminanceSource=H,r.LuminanceSource=Q,r.MathUtils=Se,r.MultiFormatOneDReader=ol,r.MultiFormatReader=Ky,r.MultiFormatWriter=D4,r.NotFoundException=$,r.OneDReader=Bt,r.PDF417DecodedBitStreamParser=ne,r.PDF417DecoderErrorCorrection=$y,r.PDF417Reader=Br,r.PDF417ResultMetadata=Gy,r.PerspectiveTransform=St,r.PlanarYUVLuminanceSource=Zs,r.QRCodeByteMatrix=Vd,r.QRCodeDataMask=ns,r.QRCodeDecodedBitStreamParser=$t,r.QRCodeDecoderErrorCorrectionLevel=Rt,r.QRCodeDecoderFormatInformation=Wr,r.QRCodeEncoder=kt,r.QRCodeEncoderQRCode=ia,r.QRCodeMaskUtil=tr,r.QRCodeMatrixUtil=ze,r.QRCodeMode=Fe,r.QRCodeReader=Ji,r.QRCodeVersion=je,r.QRCodeWriter=ll,r.RGBLuminanceSource=s1,r.RSS14Reader=er,r.RSSExpandedReader=de,r.ReaderException=zd,r.ReedSolomonDecoder=Nr,r.ReedSolomonEncoder=n1,r.ReedSolomonException=lr,r.Result=ue,r.ResultMetadataType=Re,r.ResultPoint=ve,r.StringUtils=K,r.UnsupportedOperationException=W,r.VideoInputDevice=ce,r.WhiteRectangleDetector=Zt,r.WriterException=At,r.ZXingArrays=C,r.ZXingCharset=Qy,r.ZXingInteger=S,r.ZXingStandardCharsets=i1,r.ZXingStringBuilder=ie,r.ZXingStringEncoding=q,r.ZXingSystem=E,r.createAbstractExpandedDecoder=Vy,Object.defineProperty(r,"__esModule",{value:!0})})})(fg,fg.exports);var Dt=fg.exports;const jF=mg(Dt),DF=pg({__proto__:null,default:jF},[Dt]);var o_=function(){function t(e,r,n){if(this.formatMap=new Map([[Ne.QR_CODE,Dt.BarcodeFormat.QR_CODE],[Ne.AZTEC,Dt.BarcodeFormat.AZTEC],[Ne.CODABAR,Dt.BarcodeFormat.CODABAR],[Ne.CODE_39,Dt.BarcodeFormat.CODE_39],[Ne.CODE_93,Dt.BarcodeFormat.CODE_93],[Ne.CODE_128,Dt.BarcodeFormat.CODE_128],[Ne.DATA_MATRIX,Dt.BarcodeFormat.DATA_MATRIX],[Ne.MAXICODE,Dt.BarcodeFormat.MAXICODE],[Ne.ITF,Dt.BarcodeFormat.ITF],[Ne.EAN_13,Dt.BarcodeFormat.EAN_13],[Ne.EAN_8,Dt.BarcodeFormat.EAN_8],[Ne.PDF_417,Dt.BarcodeFormat.PDF_417],[Ne.RSS_14,Dt.BarcodeFormat.RSS_14],[Ne.RSS_EXPANDED,Dt.BarcodeFormat.RSS_EXPANDED],[Ne.UPC_A,Dt.BarcodeFormat.UPC_A],[Ne.UPC_E,Dt.BarcodeFormat.UPC_E],[Ne.UPC_EAN_EXTENSION,Dt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!DF)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var s=this.createZXingFormats(e),o=new Map;o.set(Dt.DecodeHintType.POSSIBLE_FORMATS,s),o.set(Dt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,s){try{n(r.decode(e))}catch(o){s(o)}})},t.prototype.decode=function(e){var r=new Dt.MultiFormatReader(this.verbose,this.hints),n=new Dt.HTMLCanvasElementLuminanceSource(e),s=new Dt.BinaryBitmap(new Dt.HybridBinarizer(n)),o=r.decode(s);return{text:o.text,format:iI.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var o=s[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),LF=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},BF=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},a_=function(){function t(e,r,n){if(this.formatMap=new Map([[Ne.QR_CODE,"qr_code"],[Ne.AZTEC,"aztec"],[Ne.CODABAR,"codabar"],[Ne.CODE_39,"code_39"],[Ne.CODE_93,"code_93"],[Ne.CODE_128,"code_128"],[Ne.DATA_MATRIX,"data_matrix"],[Ne.ITF,"itf"],[Ne.EAN_13,"ean_13"],[Ne.EAN_8,"ean_8"],[Ne.PDF_417,"pdf417"],[Ne.UPC_A,"upc_a"],[Ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return LF(this,void 0,void 0,function(){var r,n;return BF(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=s.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:iI.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,s=0,o=e;s<o.length;s++){var l=o[s],u=l.boundingBox.width*l.boundingBox.height;u>n&&(n=u,r=l)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var o=s[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),l_=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},c_=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},FF=function(){function t(e,r,n,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&a_.isSupported()?(this.primaryDecoder=new a_(e,n,s),this.secondaryDecoder=new o_(e,n,s)):this.primaryDecoder=new o_(e,n,s)}return t.prototype.decodeAsync=function(e){return l_(this,void 0,void 0,function(){var r;return c_(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return l_(this,void 0,void 0,function(){var r,n;return c_(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(n=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var s=n[r];e+=s}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),My=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yh=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},Xh=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},cI=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),UF=function(t){My(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var s={advanced:[n]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(cI),zF=function(t){My(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(UF),VF=function(t){My(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(cI),HF=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new zF(this.track)},t.prototype.torchFeature=function(){return new VF(this.track)},t}(),$F=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,s),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,s){return Yh(this,void 0,void 0,function(){var o,l;return Xh(this,function(u){switch(u.label){case 0:return o=new t(e,r,s),n.aspectRatio?(l={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:u.sent(),u.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Yh(this,void 0,void 0,function(){return Xh(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var s=e.mediaStream.getVideoTracks(),o=s.length,l=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++l,l>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new HF(this.getFirstTrackOrFail())},t}(),WF=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return Yh(this,void 0,void 0,function(){return Xh(this,function(s){return[2,$F.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return Yh(this,void 0,void 0,function(){var r,n;return Xh(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=s.sent(),[2,new t(n)]}})})},t}(),u_=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},d_=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},GF=function(){function t(){}return t.failIfNotSupported=function(){return u_(this,void 0,void 0,function(){return d_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return u_(this,void 0,void 0,function(){return d_(this,function(r){return[2,WF.create(e)]})})},t}(),YF=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},XF=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},qF=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Fl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Fl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return YF(this,void 0,void 0,function(){var e,r,n,s,o,l,u;return XF(this,function(h){switch(h.label){case 0:return e=function(f){for(var x=f.getVideoTracks(),y=0,v=x;y<v.length;y++){var b=v[y];b.enabled=!1,b.stop(),f.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),s=[],o=0,l=n;o<l.length;o++)u=l[o],u.kind==="videoinput"&&s.push({id:u.deviceId,label:u.label});return e(r),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(o){for(var l=[],u=0,h=o;u<h.length;u++){var f=h[u];f.kind==="video"&&l.push({id:f.id,label:f.label})}e(l)},s=MediaStreamTrack;s.getSources(n)})},t}(),sr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(sr||(sr={}));var KF=function(){function t(){this.state=sr.NOT_STARTED,this.onGoingTransactionNewState=sr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===sr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=sr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===sr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=sr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==sr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case sr.UNKNOWN:throw"Transition from unknown is not allowed";case sr.NOT_STARTED:this.failIfNewStateIs(e,[sr.PAUSED]);break;case sr.SCANNING:break;case sr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,s=r;n<s.length;n++){var o=s[n];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),QF=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===sr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==sr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===sr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===sr.PAUSED},t}(),ZF=function(){function t(){}return t.create=function(){return new QF(new KF)},t}(),JF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pn=function(t){JF(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ls),eU=function(){function t(e,r){this.logger=r,this.fps=Pn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?lI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ni(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),f_=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new aI(this.verbose),this.qrcode=new FF(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ZF.create()}return t.prototype.start=function(e,r,n,s){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;s?l=s:l=this.verbose?this.logger.log:function(){};var u=eU.create(r,this.logger);this.clearElement();var h=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=h,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Pn.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var y=this,v=this.stateManagerProxy.startTransition(sr.SCANNING);return new Promise(function(b,A){var E=f?u.videoConstraints:y.createVideoConstraints(e);if(!E){v.cancel(),A("videoConstraints should be defined");return}var I={};(!f||u.aspectRatio)&&(I.aspectRatio=u.aspectRatio);var R={onRenderSurfaceReady:function(C,S){y.setupUi(C,S,u),y.isScanning=!0,y.foreverScan(u,n,l)}};GF.failIfNotSupported().then(function(C){C.create(E).then(function(S){return S.render(o.element,I,R).then(function(O){y.renderedCamera=O,v.execute(),b(null)}).catch(function(O){v.cancel(),A(O)})}).catch(function(S){v.cancel(),A(Fl.errorGettingUserMedia(S))})}).catch(function(C){v.cancel(),A(Fl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(sr.PAUSED),this.showPausedState(),(ni(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(sr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(sr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var o=document.getElementById(Pn.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),n(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),r.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ni(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,o){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var u=l.width,h=l.height,f=document.getElementById(n.elementId),x=f.clientWidth?f.clientWidth:Pn.DEFAULT_WIDTH,y=Math.max(f.clientHeight?f.clientHeight:h,Pn.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(u,h,x,y);if(r){var b=n.createCanvasElement(x,y,"qr-canvas-visible");b.style.display="inline-block",f.appendChild(b);var A=b.getContext("2d");if(!A)throw"Unable to get 2d context from canvas";A.canvas.width=x,A.canvas.height=y,A.drawImage(l,0,0,u,h,v.x,v.y,v.width,v.height)}var E=Pn.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(l.width,v.width),R=Math.max(l.height,v.height),C=I+2*E,S=R+2*E,O=n.createCanvasElement(C,S);f.appendChild(O);var k=O.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=C,k.canvas.height=S,k.drawImage(l,0,0,u,h,E,E,I,R);try{n.qrcode.decodeRobustlyAsync(O).then(function(F){s(s_.createFromQrcodeResult(F))}).catch(o)}catch(F){o("QR code parse error, error = ".concat(F))}},l.onerror=o,l.onabort=o,l.onstalled=o,l.onsuspend=o,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return qF.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!lI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Ne.QR_CODE,Ne.AZTEC,Ne.CODABAR,Ne.CODE_39,Ne.CODE_93,Ne.CODE_128,Ne.DATA_MATRIX,Ne.MAXICODE,Ne.ITF,Ne.EAN_13,Ne.EAN_8,Ne.PDF_417,Ne.RSS_14,Ne.RSS_EXPANDED,Ne.UPC_A,Ne.UPC_E,Ne.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],s=0,o=e.formatsToSupport;s<o.length;s++){var l=o[s];kF(l)?n.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ni(e))return!0;if(!ni(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ni(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ni(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var s=this,o=n.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,r,o),u=function(f){if(f<Pn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pn.MIN_QR_BOX_SIZE,"px.")},h=function(f){return f>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=e),f};u(l.width),u(l.height),l.width=h(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var s=ni(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,r,s);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=n.isShadedBoxEnabled()&&o.height<=r,u={x:0,y:0,width:e,height:r},h=l?this.getShadedRegionBounds(e,r,o):u,f=this.createCanvasElement(h.width,h.height),x={willReadFrequently:!0},y=f.getContext("2d",x);y.canvas.width=h.width,y.canvas.height=h.height,this.element.append(f),l&&this.possiblyInsertShadingElement(this.element,e,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=y,this.canvasElement=f},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Fl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,s_.createFromQrcodeResult(s)),n.possiblyUpdateShaders(!0),!0}).catch(function(s){n.possiblyUpdateShaders(!1);var o=Fl.codeParseError(s);return r(o,oI.createFrom(o)),!1})},t.prototype.foreverScan=function(e,r,n){var s=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),l=o.videoWidth/o.clientWidth,u=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*l,f=this.qrRegion.height*u,x=this.qrRegion.x*l,y=this.qrRegion.y*u;this.context.drawImage(o,x,y,h,f,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,r,n)},s.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(b){!b&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(r,n).finally(function(){v()})):v()}).catch(function(b){s.logger.logError("Error happend while scanning context",b),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",s={user:!0,environment:!0},o="exact",l=function(A){if(A in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(A,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var h=Object.keys(e)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var f=e.facingMode;if(typeof f=="string"){if(l(f))return{facingMode:f}}else if(typeof f=="object")if(o in f){if(l(f["".concat(o)]))return{facingMode:{exact:f["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof f;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(o in y)return{deviceId:{exact:y["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var v=typeof y;throw"Invalid type of 'deviceId' = ".concat(v)}}}var b=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},t.prototype.computeCanvasDrawConfig=function(e,r,n,s){if(e<=n&&r<=s){var o=(n-e)/2,l=(s-r)/2;return{x:o,y:l,width:e,height:r}}else{var u=e,h=r;return e>n&&(r=n/e*r,e=n),r>s&&(e=s/r*e,r=s),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(h)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Pn.BORDER_SHADER_MATCH_COLOR:Pn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var s=e,o=r,l=document.createElement("canvas");return l.style.width="".concat(s,"px"),l.style.height="".concat(o,"px"),l.style.display="none",l.id=ni(n)?"qr-canvas":n,l},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,s){if(!(r-s.width<1||n-s.height<1)){var o=document.createElement("div");o.style.position="absolute";var l=(r-s.width)/2,u=(n-s.height)/2;if(o.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Pn.SHADED_REGION_ELEMENT_ID),r-s.width<11||n-s.height<11)this.hasBorderShaders=!1;else{var h=5,f=40;this.insertShaderBorders(o,f,h,-h,null,0,!0),this.insertShaderBorders(o,f,h,-h,null,0,!1),this.insertShaderBorders(o,f,h,null,-h,0,!0),this.insertShaderBorders(o,f,h,null,-h,0,!1),this.insertShaderBorders(o,h,f+h,-h,null,-h,!0),this.insertShaderBorders(o,h,f+h,null,-h,-h,!0),this.insertShaderBorders(o,h,f+h,-h,null,-h,!1),this.insertShaderBorders(o,h,f+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,r,n,s,o,l,u){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Pn.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),s!==null&&(h.style.top="".concat(s,"px")),o!==null&&(h.style.bottom="".concat(o,"px")),u?h.style.left="".concat(l,"px"):h.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),ky="data:image/svg+xml;base64,",tU=ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",rU=ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",h_=ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",nU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",p_=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),sU=function(){function t(){this.data=p_.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=p_.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),iU=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=i_.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(s);var o=document.createElement("a");o.innerText=i_.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),oU=function(){function t(e,r){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=h_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=nU,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=h_,this.infoIcon.style.opacity="0.6")},t}(),aU=function(){function t(){var e=this;this.infoDiv=new iU,this.infoIcon=new oU(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),lU=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},cU=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},m_=function(){function t(){}return t.hasPermissions=function(){return lU(this,void 0,void 0,function(){var e,r,n,s;return cU(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=o.sent(),r=0,n=e;r<n.length;r++)if(s=n[r],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),oo=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(e){return e===Hs.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Hs.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Ls.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Ls.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,s=e;n<s.length;n++){var o=s[n];if(!Ls.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return e},t}(),Vn=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Di=function(){function t(){}return t.createElement=function(e,r){var n=document.createElement(e);return n.id=r,n.classList.add(Vn.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},t}(),uI=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function u(x){try{f(n.next(x))}catch(y){l(y)}}function h(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?o(x.value):s(x.value).then(u,h)}f((n=n.apply(t,e||[])).next())})},dI=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(x){return h([f,x])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},g_=function(){function t(e,r,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return uI(this,void 0,void 0,function(){var e,r;return dI(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return r=n.sent(),this.propagateFailure(e,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,r){e===r?(this.buttonController.setText(r?_t.torchOffButton():_t.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(e,r){var n=e?_t.torchOnFailedMessage():_t.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),uU=function(){function t(e,r){this.onTorchActionFailureCallback=r,this.torchButton=Di.createElement("button",Vn.TORCH_BUTTON_ID),this.torchController=new g_(e,this,r)}return t.prototype.render=function(e,r){var n=this;this.torchButton.innerText=_t.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var s=this;this.torchButton.addEventListener("click",function(o){return uI(n,void 0,void 0,function(){return dI(this,function(l){switch(l.label){case 0:return[4,s.torchController.flipState()];case 1:return l.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Vn.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Vn.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Vn.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Vn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new g_(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=_t.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,s){var o=new t(r,s);return o.render(e,n),o},t}(),dU=function(){function t(e,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Di.createElement("button",Vn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(u){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Di.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(u){if(!(u==null||u.target==null)){var h=u.target;if(!(h.files&&h.files.length===0)){var f=h.files,x=f[0],y=x.name;o.setImageNameToButton(y),n(x)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(u){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(u){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(u){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(u){u.stopPropagation(),u.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var h=u.dataTransfer;if(h){var f=h.files;if(!f||f.length===0)return;for(var x=!1,y=0;y<f.length;++y){var v=f.item(y);if(v){var b=/image.*/;if(v.type.match(b)){x=!0;var A=v.name;o.setImageNameToButton(A),n(v),l.innerText=_t.dragAndDropMessage();break}}}x||(l.innerText=_t.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=_t.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var r=20;if(e.length>r){var n=e.substring(0,8),s=e.length,o=e.substring(s-8,s);e="".concat(n,"....").concat(o)}var l=_t.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=l},t.prototype.setInitialValueToButton=function(){var e=_t.fileSelectionChooseImage()+" - "+_t.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){var s=new t(e,r,n);return s},t}(),fU=function(){function t(e){this.selectElement=Di.createElement("select",Vn.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var s=_t.selectCamera();r.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var o=1,l=0,u=this.cameras;l<u.length;l++){var h=u[l],f=h.id,x=h.label==null?f:h.label;(!x||x==="")&&(x=[_t.anonymousCameraPrefix(),o++].join(" "));var y=document.createElement("option");y.value=f,y.innerText=x,this.options.push(y),this.selectElement.appendChild(y)}r.appendChild(this.selectElement),e.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var r=0,n=this.options;r<n.length;r++){var s=n[r];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),hU=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Di.createElement("input",Vn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,r,n,s){this.rangeInput.min=e.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}(),jn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(jn||(jn={}));function pU(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function mU(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var gU=function(){function t(e,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new oo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new aI(this.verbose),this.persistedDataManager=new sU,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,l){if(e)e(o,l);else{if(n.lastMatchFound===o)return;n.lastMatchFound=o,n.setHeaderMessage(_t.lastMatch(o),jn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,l){r&&r(o,l)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new f_(this.getScanRegionId(),mU(this.config,this.verbose))},t.prototype.pause=function(e){(ni(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,r=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,s){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(o){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),r(),n()}).catch(function(o){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",o),s(o)}):(e.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ls.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ls.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ls.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ls.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ls.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ls.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ls.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",e.appendChild(r),oo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),o=this.getDashboardId();s.id=o,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",e.appendChild(r);var n=new aU;n.renderInto(r);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",r.appendChild(s)},t.prototype.createSection=function(e){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",e.appendChild(r)},t.prototype.createCameraListUi=function(e,r,n){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(_t.cameraPermissionRequesting());var o=function(){n||s.createPermissionButton(e,r)};f_.getCameras().then(function(l){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),l&&l.length>0?(e.removeChild(r),s.renderCameraSelection(l)):(s.setHeaderMessage(_t.noCameraFound(),jn.STATUS_WARNING),o())}).catch(function(l){s.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:o(),s.setHeaderMessage(l,jn.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,r){var n=this,s=Di.createElement("button",this.getCameraPermissionButtonId());s.innerText=_t.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,n.createCameraListUi(e,r,s)}),r.appendChild(s)},t.prototype.createPermissionsUi=function(e,r){var n=this;if(oo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){m_.hasPermissions().then(function(s){s?n.createCameraListUi(e,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r))}).catch(function(s){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r)});return}this.createPermissionButton(e,r)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");e.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=oo.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var s=document.createElement("div");s.style.textAlign="center",n.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,s),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(e){var r=oo.isFileScanType(this.currentScanType),n=this,s=function(o){if(!n.html5Qrcode)throw"html5Qrcode not defined";oo.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(_t.loadingImage()),n.html5Qrcode.scanFileV2(o,!0).then(function(l){n.resetHeaderMessage(),n.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){n.setHeaderMessage(l,jn.STATUS_WARNING),n.qrCodeErrorCallback(l,oI.createFrom(l))}))};this.fileSelectionUi=dU.create(e,r,s)},t.prototype.renderCameraSelection=function(e){var r=this,n=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var o=hU.create(s,!1),l=function(E){var I=E.zoomFeature();if(I.isSupported()){o.setOnCameraZoomValueChangeCallback(function(C){I.apply(C)});var R=1;r.config.defaultZoomValueIfSupported&&(R=r.config.defaultZoomValueIfSupported),R=PF(R,I.min(),I.max()),o.setValues(I.min(),I.max(),R,I.step()),o.show()}},u=fU.create(s,e),h=document.createElement("span"),f=Di.createElement("button",Vn.CAMERA_START_BUTTON_ID);f.innerText=_t.scanButtonStartScanningText(),h.appendChild(f);var x=Di.createElement("button",Vn.CAMERA_STOP_BUTTON_ID);x.innerText=_t.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,h.appendChild(x);var y,v=function(E){if(!E.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(E.torchFeature()):y=uU.create(h,E.torchFeature(),{display:"none",marginLeft:"5px"},function(I){n.setHeaderMessage(I,jn.STATUS_WARNING)}),y.show()};s.appendChild(h);var b=function(E){E||(f.style.display="none"),f.innerText=_t.scanButtonStartScanningText(),f.style.opacity="1",f.disabled=!1,E&&(f.style.display="inline-block")};if(f.addEventListener("click",function(E){f.innerText=_t.scanButtonScanningStarting(),u.disable(),f.disabled=!0,f.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var I=u.getValue();n.persistedDataManager.setLastUsedCameraId(I),n.html5Qrcode.start(I,pU(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(R){x.disabled=!1,x.style.display="inline-block",b(!1);var C=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&v(C),r.config.showZoomSliderIfSupported===!0&&l(C)}).catch(function(R){n.showHideScanTypeSwapLink(!0),u.enable(),b(!0),n.setHeaderMessage(R,jn.STATUS_WARNING)})}),u.hasSingleItem()&&f.click(),x.addEventListener("click",function(E){if(!n.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,n.html5Qrcode.stop().then(function(I){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),u.enable(),f.disabled=!1,x.style.display="none",f.style.display="inline-block",y&&(y.reset(),y.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(I){x.disabled=!1,n.setHeaderMessage(I,jn.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var A=n.persistedDataManager.getLastUsedCameraId();u.hasValue(A)?(u.setValue(A),f.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,r=_t.textIfCameraScanSelected(),n=_t.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var l=Di.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=oo.isCameraScanType(this.currentScanType)?r:n,l.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,oo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),l.innerText=n,e.currentScanType=Hs.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),l.innerText=r,e.currentScanType=Hs.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),o.appendChild(l),s.appendChild(o)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){m_.hasPermissions().then(function(n){if(n){var s=document.getElementById(r.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,r){r||(r=jn.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",r){case jn.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case jn.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case jn.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=tU,this.cameraScanImage.alt=_t.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=rU,this.fileScanImage.alt=_t.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Vn.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Vn.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const xU=()=>{var y,v;const[t,e]=N.useState(!1),[r,n]=N.useState(null),s=N.useRef(null),[o,l]=N.useState(!1),u=typeof window<"u"&&(window.isSecureContext||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),h=()=>{if(s.current){try{s.current.clear()}catch{}s.current=null}e(!0),setTimeout(()=>{if(!document.getElementById("qr-reader")){console.error("qr-reader container not found at init time"),Ce.error("Unable to start scanner. Please try again."),e(!1);return}const A={fps:10,qrbox:{width:250,height:250},rememberLastUsedCamera:!0,aspectRatio:1,showTorchButtonIfSupported:!0,supportedScanTypes:u?[Hs.SCAN_TYPE_CAMERA,Hs.SCAN_TYPE_FILE]:[Hs.SCAN_TYPE_FILE]},E=new gU("qr-reader",A,!1);E.render(async I=>{l(!0);try{let R=I;try{const O=JSON.parse(I);R=O.qr_code||O.qrCode||O.orderId||O.id||I}catch{}const{data:C,error:S}=await xe.from("orders").select(`
                *,
                profiles (full_name),
                restaurants (name)
              `).eq("qr_code",R).single();if(S||!C){console.error("Order fetch error:",S),Ce.error("Order not found for this QR code");return}n(C),Ce.success("Order verified successfully!"),f()}catch(R){console.error("Error verifying order:",R),Ce.error("Failed to verify order")}finally{l(!1)}},I=>{typeof I=="string"&&!I.toLowerCase().includes("not found")&&!I.toLowerCase().includes("no qr code")&&!I.toLowerCase().includes("inactive")&&console.debug("QR scan error:",I)}),s.current=E},0)},f=()=>{s.current&&(s.current.clear(),s.current=null),e(!1)};N.useEffect(()=>()=>{s.current&&(s.current.clear(),s.current=null)},[]);const x=async()=>{if(r)try{const{error:b}=await xe.from("orders").update({status:"completed"}).eq("id",r.id);if(b)throw b;Ce.success("Order marked as served!"),n(null)}catch(b){console.error("Error updating order:",b),Ce.error("Failed to update order status")}};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Scanner"}),p.jsx("p",{className:"text-muted-foreground",children:"Scan customer booking QR codes"})]}),!t&&!r&&p.jsx(We,{className:"border-border/50 luxury-shadow",children:p.jsxs(bt,{className:"py-12 text-center space-y-4",children:[p.jsx(wv,{className:"h-16 w-16 mx-auto text-primary"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Scan"}),p.jsx("p",{className:"text-muted-foreground mb-2",children:"Start the scanner to use your camera or upload a QR code image."}),!u&&p.jsx("p",{className:"text-sm text-yellow-600 mb-2",children:"Live camera requires HTTPS or localhost. On this origin, only image upload will be available."}),p.jsxs(Be,{onClick:h,className:"luxury-gradient",size:"lg",children:[p.jsx(wv,{className:"w-5 h-5 mr-2"}),"Start Scanner"]})]})]})}),t&&p.jsxs(We,{className:"border-border/50 luxury-shadow",children:[p.jsxs(or,{className:"pb-2",children:[p.jsxs(hr,{className:"flex items-center justify-between gap-3",children:[p.jsx("span",{children:"Scan QR Code"}),p.jsx("span",{className:"text-[0.65rem] font-normal text-muted-foreground",children:"Align customer QR within the frame"})]}),p.jsx(ji,{className:"mt-1 text-xs text-muted-foreground",children:u?"Choose your camera if available, or upload a QR screenshot. Use landscape for best view.":"On this connection only image upload is available. Use a screenshot/photo of the QR code."})]}),p.jsxs(bt,{className:"space-y-4 pt-2",children:[p.jsxs("div",{id:"qr-reader",className:`\r
                w-full rounded-2xl border border-border/40 bg-muted/40\r
                px-3 py-4 md:px-5 md:py-6\r
                flex flex-col items-stretch\r
                gap-4\r
              `,children:[p.jsx("style",{children:`
                /* 1. Center content in scan region (including default icon/video) */
                #qr-reader__scan_region {
                  display: flex !important;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  text-align: center;
                  gap: 8px;
                }

                #qr-reader__scan_region img,
                #qr-reader__scan_region svg {
                  margin: 0 auto;
                }

                /* 2. Make camera select large, touch-friendly, and separated */
                #html5-qrcode-select-camera {
                  width: 100% !important;
                  padding: 10px 14px !important;
                  margin: 8px 0 4px 0 !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* 3. Lay out dashboard controls vertically with spacing */
                #qr-reader__dashboard {
                  display: flex;
                  flex-direction: column;
                  align-items: stretch;
                  gap: 8px;
                  padding-top: 4px;
                }

                /* 4. Ensure each button is on its own line, full-width, with space */
                #qr-reader__dashboard .html5-qrcode-element,
                #qr-reader__dashboard button {
                  display: block !important;
                  width: 100% !important;
                  margin: 2px 0 !important;
                  text-align: center !important;
                }

                #qr-reader__dashboard button {
                  padding: 9px 14px !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* Specifically separate the camera stop button from others */
                #html5-qrcode-button-camera-stop {
                  margin-top: 10px !important;
                }

                /* Video aesthetics */
                #qr-reader__scan_region video {
                  border-radius: 18px;
                  max-height: 260px;
                  object-fit: cover;
                }

                @media (min-width: 640px) {
                  #qr-reader__dashboard {
                    max-width: 420px;
                    align-self: center;
                  }
                }
              `}),p.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[p.jsx("div",{className:"text-[0.7rem] font-semibold text-muted-foreground tracking-wide uppercase",children:"Select Camera"}),p.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Choose front or back camera from the dropdown below."})]}),p.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[p.jsx("div",{className:"text-[0.7rem] font-semibold text-foreground",children:"Scan Options"}),p.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Use Start Scanning for live camera or Scan an Image File to upload a QR screenshot."})]})]}),p.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center px-3",children:"If camera buttons or options are hidden, scroll inside the scanner box or rotate your phone."}),p.jsxs(Be,{onClick:f,variant:"outline",className:"w-full mt-1 md:mt-2",children:[p.jsx(yC,{className:"w-4 h-4 mr-2"}),"Stop Scanning"]})]})]}),r&&p.jsxs(We,{className:"border-border/50 luxury-shadow",children:[p.jsxs(or,{children:[p.jsx(hr,{className:"text-xl",children:"Order Details"}),p.jsxs(ji,{children:["Order ID: ",r.id]})]}),p.jsxs(bt,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),p.jsx("span",{className:"font-medium",children:((y=r.profiles)==null?void 0:y.full_name)||"Customer"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-muted-foreground",children:"Restaurant:"}),p.jsx("span",{className:"font-medium",children:(v=r.restaurants)==null?void 0:v.name})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-muted-foreground",children:"Order Type:"}),p.jsx("span",{className:"font-medium capitalize",children:r.order_type.replace("_"," ")})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-muted-foreground",children:"Status:"}),p.jsx("span",{className:"font-medium capitalize",children:r.status})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-semibold",children:"Items:"}),p.jsx("ul",{className:"space-y-1",children:r.order_items.map((b,A)=>p.jsxs("li",{className:"flex justify-between text-sm",children:[p.jsxs("span",{children:[b.quantity,"x ",b.name]}),p.jsxs("span",{children:[(b.price*b.quantity).toLocaleString()," MMK"]})]},A))})]}),p.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[p.jsx("span",{className:"font-semibold",children:"Total:"}),p.jsxs("span",{className:"font-bold text-lg",children:[r.total_amount.toLocaleString()," MMK"]})]}),p.jsxs("div",{className:"flex gap-2 pt-4",children:[p.jsxs(Be,{onClick:x,className:"flex-1 luxury-gradient",size:"lg",children:[p.jsx(mx,{className:"w-5 h-5 mr-2"}),"Mark as Served"]}),p.jsx(Be,{onClick:()=>n(null),variant:"outline",className:"flex-1",size:"lg",children:"Scan Another"})]})]})]})]})};var H0="Switch",[yU,yV]=On(H0),[wU,vU]=yU(H0),fI=N.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:l,disabled:u,value:h="on",onCheckedChange:f,form:x,...y}=t,[v,b]=N.useState(null),A=Ze(e,S=>b(S)),E=N.useRef(!1),I=v?x||!!v.closest("form"):!0,[R,C]=Vi({prop:s,defaultProp:o??!1,onChange:f,caller:H0});return p.jsxs(wU,{scope:r,checked:R,disabled:u,children:[p.jsx(Me.button,{type:"button",role:"switch","aria-checked":R,"aria-required":l,"data-state":gI(R),"data-disabled":u?"":void 0,disabled:u,value:h,...y,ref:A,onClick:Ee(t.onClick,S=>{C(O=>!O),I&&(E.current=S.isPropagationStopped(),E.current||S.stopPropagation())})}),I&&p.jsx(mI,{control:v,bubbles:!E.current,name:n,value:h,checked:R,required:l,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});fI.displayName=H0;var hI="SwitchThumb",pI=N.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=vU(hI,r);return p.jsx(Me.span,{"data-state":gI(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});pI.displayName=hI;var _U="SwitchBubbleInput",mI=N.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const l=N.useRef(null),u=Ze(l,o),h=Cy(r),f=Nx(e);return N.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(h!==r&&b){const A=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(A)}},[h,r,n]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:u,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});mI.displayName=_U;function gI(t){return t?"checked":"unchecked"}var xI=fI,bU=pI;const yI=N.forwardRef(({className:t,...e},r)=>p.jsx(xI,{className:Oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:p.jsx(bU,{className:Oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));yI.displayName=xI.displayName;const EU=()=>{const{user:t}=Mn(),[e,r]=N.useState([]),[n,s]=N.useState(!0),[o,l]=N.useState(null),[u,h]=N.useState(!1),[f,x]=N.useState(null),[y,v]=N.useState({name:"",description:"",price:"",image_url:""});N.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const{data:S,error:O}=await xe.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(O)throw O;l(S.id);const{data:k,error:F}=await xe.from("menu_items").select("*").eq("restaurant_id",S.id).order("created_at",{ascending:!1});if(F)throw F;r(k||[])}catch(S){console.error("Error fetching menu:",S),Ce.error("Failed to load menu items")}finally{s(!1)}},A=()=>{x(null),v({name:"",description:"",price:"",image_url:""}),h(!0)},E=S=>{x(S.id),v({name:S.name,description:S.description||"",price:S.price.toString(),image_url:S.image_url||""}),h(!0)},I=async S=>{try{const{error:O}=await xe.from("menu_items").delete().eq("id",S);if(O)throw O;r(e.filter(k=>k.id!==S)),Ce.success("Menu item deleted")}catch(O){console.error("Error deleting item:",O),Ce.error("Failed to delete menu item")}},R=async()=>{if(!y.name||!y.price||!o){Ce.error("Please fill in all required fields");return}try{const S={name:y.name,description:y.description||null,price:parseFloat(y.price),image_url:y.image_url||null,restaurant_id:o};if(f){const{error:O}=await xe.from("menu_items").update(S).eq("id",f);if(O)throw O;r(e.map(k=>k.id===f?{...k,...S}:k)),Ce.success("Menu item updated")}else{const{data:O,error:k}=await xe.from("menu_items").insert([{...S,available:!0}]).select().single();if(k)throw k;r([O,...e]),Ce.success("Menu item added")}h(!1),v({name:"",description:"",price:"",image_url:""})}catch(S){console.error("Error saving menu item:",S),Ce.error("Failed to save menu item")}},C=async S=>{const O=e.find(k=>k.id===S);if(O)try{const{error:k}=await xe.from("menu_items").update({available:!O.available}).eq("id",S);if(k)throw k;r(e.map(F=>F.id===S?{...F,available:!F.available}:F)),Ce.success("Availability updated")}catch(k){console.error("Error updating availability:",k),Ce.error("Failed to update availability")}};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Menu"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage your menu items"})]}),p.jsxs(Be,{onClick:A,className:"luxury-gradient",children:[p.jsx(Ra,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),n?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(Rc,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?p.jsx(We,{children:p.jsx(bt,{className:"py-12 text-center text-muted-foreground",children:"No menu items yet. Add your first item to get started!"})}):p.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(S=>p.jsxs(We,{children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:S.image_url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400",alt:S.name,className:"w-full h-48 object-cover"}),p.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[p.jsx(Be,{size:"icon",variant:"secondary",onClick:()=>E(S),children:p.jsx(EC,{className:"h-4 w-4"})}),p.jsx(Be,{size:"icon",variant:"destructive",onClick:()=>I(S.id),children:p.jsx(xx,{className:"h-4 w-4"})})]})]}),p.jsxs(bt,{className:"p-4 space-y-2",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold",children:S.name}),S.description&&p.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:S.description})]}),p.jsxs("p",{className:"font-semibold text-primary ml-2",children:[S.price.toLocaleString()," MMK"]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsx("span",{className:"text-sm text-muted-foreground",children:"Available"}),p.jsx(yI,{checked:S.available,onCheckedChange:()=>C(S.id)})]})]})]},S.id))}),p.jsx(wi,{open:u,onOpenChange:h,children:p.jsxs(Ys,{children:[p.jsx(Yi,{children:p.jsxs(Xi,{children:[f?"Edit":"Add"," Menu Item"]})}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"name",children:"Name *"}),p.jsx(ct,{id:"name",value:y.name,onChange:S=>v({...y,name:S.target.value}),placeholder:"e.g., Traditional Mohinga"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"price",children:"Price (MMK) *"}),p.jsx(ct,{id:"price",type:"number",value:y.price,onChange:S=>v({...y,price:S.target.value}),placeholder:"5000"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"description",children:"Description"}),p.jsx(ct,{id:"description",value:y.description,onChange:S=>v({...y,description:S.target.value}),placeholder:"Describe the dish..."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"image_url",children:"Image URL"}),p.jsx(ct,{id:"image_url",value:y.image_url,onChange:S=>v({...y,image_url:S.target.value}),placeholder:"https://..."})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[p.jsx(Be,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),p.jsxs(Be,{onClick:R,className:"luxury-gradient",children:[f?"Update":"Add"," Item"]})]})]})]})})]})},Py=N.forwardRef(({className:t,...e},r)=>p.jsx("textarea",{className:Oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Py.displayName="Textarea";const CU=()=>{const{user:t}=Mn(),[e,r]=N.useState(!0),[n,s]=N.useState(!1),[o,l]=N.useState(null),[u,h]=N.useState({name:"",address:"",phone:"",description:"",image_url:"",open_hours:""});N.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{const{data:y,error:v}=await xe.from("restaurants").select("*").eq("owner_id",t==null?void 0:t.id).single();if(v)throw v;l(y.id),h({name:y.name,address:y.address,phone:y.phone||"",description:y.description||"",image_url:y.image_url||"",open_hours:y.open_hours||""})}catch(y){console.error("Error fetching restaurant:",y),Ce.error("Failed to load restaurant data")}finally{r(!1)}},x=async()=>{if(o){s(!0);try{const{error:y}=await xe.from("restaurants").update({name:u.name,address:u.address,phone:u.phone,description:u.description,image_url:u.image_url,open_hours:u.open_hours}).eq("id",o);if(y)throw y;Ce.success("Restaurant information updated successfully!")}catch(y){console.error("Error updating restaurant:",y),Ce.error("Failed to update restaurant information")}finally{s(!1)}}};return e?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx(Rc,{className:"h-8 w-8 animate-spin text-primary"})}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Restaurant Settings"}),p.jsx("p",{className:"text-muted-foreground",children:"Update your restaurant information"})]}),p.jsxs(We,{className:"border-border/50 luxury-shadow",children:[p.jsxs(or,{children:[p.jsx(hr,{children:"Restaurant Information"}),p.jsx(ji,{children:"Update your restaurant details and settings"})]}),p.jsxs(bt,{className:"space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"image_url",children:"Cover Photo URL"}),p.jsxs("div",{className:"space-y-2",children:[u.image_url&&p.jsx("div",{className:"relative h-48 bg-muted rounded-lg overflow-hidden",children:p.jsx("img",{src:u.image_url,alt:"Restaurant cover",className:"w-full h-full object-cover"})}),p.jsx(ct,{id:"image_url",value:u.image_url,onChange:y=>h({...u,image_url:y.target.value}),placeholder:"https://..."})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"name",children:"Restaurant Name *"}),p.jsx(ct,{id:"name",value:u.name,onChange:y=>h({...u,name:y.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"address",children:"Address *"}),p.jsx(ct,{id:"address",value:u.address,onChange:y=>h({...u,address:y.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"phone",children:"Phone Number *"}),p.jsx(ct,{id:"phone",type:"tel",value:u.phone,onChange:y=>h({...u,phone:y.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"open_hours",children:"Open Hours"}),p.jsx(ct,{id:"open_hours",value:u.open_hours,onChange:y=>h({...u,open_hours:y.target.value}),placeholder:"9:00 AM - 10:00 PM"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ke,{htmlFor:"description",children:"Description"}),p.jsx(Py,{id:"description",value:u.description,onChange:y=>h({...u,description:y.target.value}),rows:4,placeholder:"Tell customers about your restaurant..."})]}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Be,{onClick:x,className:"luxury-gradient",children:[p.jsx(EM,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})},SU=()=>{const t=new Audio("/notification.mp3");return t.preload="auto",t};function AU(t={}){const{user:e}=Mn(),[r,n]=N.useState(null),[s,o]=N.useState([]),[l,u]=N.useState(!0),[h,f]=N.useState(!1),x=t.limit??50,y=t.enableSound??!0,v=N.useCallback(()=>{if(y)try{SU().play().catch(()=>{})}catch{}},[y]);N.useEffect(()=>{(async()=>{if(!e){n(null),o([]),u(!1);return}u(!0);const{data:R,error:C}=await xe.from("restaurants").select("id").eq("owner_id",e.id).single();if(C||!R){console.error("Failed to resolve restaurant for owner:",C),n(null),o([]),u(!1);return}n(R.id),u(!1)})()},[e]),N.useEffect(()=>{(async()=>{if(!r||h)return;u(!0);const{data:R,error:C}=await xe.from("order_notifications").select(`
          id,
          order_id,
          restaurant_id,
          customer_id,
          title,
          message,
          status,
          created_at,
          orders!inner (
            total_amount,
            status,
            customer_id
          ),
          profiles!left (
            full_name
          )
        `).eq("restaurant_id",r).order("created_at",{ascending:!1}).limit(x);if(C)console.error("Error fetching order_notifications:",C),o([]);else{const S=(R||[]).map(O=>{const k=Array.isArray(O.orders)?O.orders[0]:O.orders||{},F=Array.isArray(O.profiles)?O.profiles[0]:O.profiles||{};return{id:O.id,order_id:O.order_id,restaurant_id:O.restaurant_id,customer_id:O.customer_id,title:O.title,message:O.message,status:O.status,created_at:O.created_at,customer_name:(F==null?void 0:F.full_name)??null,total_amount:(k==null?void 0:k.total_amount)??null,order_status:(k==null?void 0:k.status)??null}});o(S)}f(!0),u(!1)})()},[r,h,x]),N.useEffect(()=>{if(!r)return;const I=xe.channel(`order-notifications-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"order_notifications",filter:`restaurant_id=eq.${r}`},async R=>{const C=R.new,{data:S}=await xe.from("orders").select("total_amount, status, customer_id").eq("id",C.order_id).single();let O=null;if(S!=null&&S.customer_id){const{data:F}=await xe.from("profiles").select("full_name").eq("id",S.customer_id).single();O=(F==null?void 0:F.full_name)??null}const k={id:C.id,order_id:C.order_id,restaurant_id:C.restaurant_id,customer_id:C.customer_id,title:C.title,message:C.message,status:C.status,created_at:C.created_at,customer_name:O,total_amount:(S==null?void 0:S.total_amount)??null,order_status:(S==null?void 0:S.status)??null};o(F=>F.some(B=>B.id===k.id)?F:[k,...F].slice(0,x)),v()}).subscribe(R=>{R==="SUBSCRIBED"&&console.log(` Subscribed to realtime order_notifications for restaurant ${r}`)});return()=>{xe.removeChannel(I)}},[r,x,v]);const b=s.filter(I=>I.status==="unread").length,A=N.useCallback(async()=>{if(!r||s.length===0)return;const I=s.filter(C=>C.status==="unread").map(C=>C.id);if(I.length===0)return;const{error:R}=await xe.from("order_notifications").update({status:"read"}).in("id",I);if(R){console.error("Failed to mark notifications as read:",R);return}o(C=>C.map(S=>I.includes(S.id)?{...S,status:"read"}:S))},[r,s]),E=N.useCallback(async I=>{if(!I)return;const{error:R}=await xe.from("order_notifications").update({status:"read"}).eq("id",I);if(R){console.error("Failed to mark notification as read:",R);return}o(C=>C.map(S=>S.id===I?{...S,status:"read"}:S))},[]);return{restaurantId:r,notifications:s,unreadCount:b,loading:l,markAllAsRead:A,markAsRead:E}}var hg=["Enter"," "],NU=["ArrowDown","PageUp","Home"],wI=["ArrowUp","PageDown","End"],TU=[...NU,...wI],IU={ltr:[...hg,"ArrowRight"],rtl:[...hg,"ArrowLeft"]},RU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rd="Menu",[hd,OU,MU]=p0(Rd),[el,vI]=On(Rd,[MU,Pc,Bc]),$0=Pc(),_I=Bc(),[kU,tl]=el(Rd),[PU,Od]=el(Rd),bI=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:o,modal:l=!0}=t,u=$0(e),[h,f]=N.useState(null),x=N.useRef(!1),y=fr(o),v=Lc(s);return N.useEffect(()=>{const b=()=>{x.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>x.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),p.jsx(oS,{...u,children:p.jsx(kU,{scope:e,open:r,onOpenChange:y,content:h,onContentChange:f,children:p.jsx(PU,{scope:e,onClose:N.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:x,dir:v,modal:l,children:n})})})};bI.displayName=Rd;var jU="MenuAnchor",jy=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=$0(r);return p.jsx(Rx,{...s,...n,ref:e})});jy.displayName=jU;var Dy="MenuPortal",[DU,EI]=el(Dy,{forceMount:void 0}),CI=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,o=tl(Dy,e);return p.jsx(DU,{scope:e,forceMount:r,children:p.jsx(tn,{present:r||o.open,children:p.jsx(bd,{asChild:!0,container:s,children:n})})})};CI.displayName=Dy;var ys="MenuContent",[LU,Ly]=el(ys),SI=N.forwardRef((t,e)=>{const r=EI(ys,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=tl(ys,t.__scopeMenu),l=Od(ys,t.__scopeMenu);return p.jsx(hd.Provider,{scope:t.__scopeMenu,children:p.jsx(tn,{present:n||o.open,children:p.jsx(hd.Slot,{scope:t.__scopeMenu,children:l.modal?p.jsx(BU,{...s,ref:e}):p.jsx(FU,{...s,ref:e})})})})}),BU=N.forwardRef((t,e)=>{const r=tl(ys,t.__scopeMenu),n=N.useRef(null),s=Ze(e,n);return N.useEffect(()=>{const o=n.current;if(o)return vy(o)},[]),p.jsx(By,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ee(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),FU=N.forwardRef((t,e)=>{const r=tl(ys,t.__scopeMenu);return p.jsx(By,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),UU=Ua("MenuContent.ScrollLock"),By=N.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:f,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,disableOutsideScroll:A,...E}=t,I=tl(ys,r),R=Od(ys,r),C=$0(r),S=_I(r),O=OU(r),[k,F]=N.useState(null),B=N.useRef(null),P=Ze(e,B,I.onContentChange),L=N.useRef(0),W=N.useRef(""),q=N.useRef(0),K=N.useRef(null),ie=N.useRef("right"),G=N.useRef(0),$=A?j0:N.Fragment,re=A?{as:UU,allowPinchZoom:!0}:void 0,Z=H=>{var _e,Re;const te=W.current+H,ce=O().filter(Xe=>!Xe.disabled),ae=document.activeElement,oe=(_e=ce.find(Xe=>Xe.ref.current===ae))==null?void 0:_e.textValue,ue=ce.map(Xe=>Xe.textValue),ke=ZU(ue,te,oe),ye=(Re=ce.find(Xe=>Xe.textValue===ke))==null?void 0:Re.ref.current;(function Xe(Ye){W.current=Ye,window.clearTimeout(L.current),Ye!==""&&(L.current=window.setTimeout(()=>Xe(""),1e3))})(te),ye&&setTimeout(()=>ye.focus())};N.useEffect(()=>()=>window.clearTimeout(L.current),[]),wy();const Q=N.useCallback(H=>{var ce,ae;return ie.current===((ce=K.current)==null?void 0:ce.side)&&ez(H,(ae=K.current)==null?void 0:ae.area)},[]);return p.jsx(LU,{scope:r,searchRef:W,onItemEnter:N.useCallback(H=>{Q(H)&&H.preventDefault()},[Q]),onItemLeave:N.useCallback(H=>{var te;Q(H)||((te=B.current)==null||te.focus(),F(null))},[Q]),onTriggerLeave:N.useCallback(H=>{Q(H)&&H.preventDefault()},[Q]),pointerGraceTimerRef:q,onPointerGraceIntentChange:N.useCallback(H=>{K.current=H},[]),children:p.jsx($,{...re,children:p.jsx(k0,{asChild:!0,trapped:s,onMountAutoFocus:Ee(o,H=>{var te;H.preventDefault(),(te=B.current)==null||te.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:p.jsx(Tc,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,children:p.jsx(py,{asChild:!0,...S,dir:R.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:F,onEntryFocus:Ee(h,H=>{R.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(Ox,{role:"menu","aria-orientation":"vertical","data-state":zI(I.open),"data-radix-menu-content":"",dir:R.dir,...C,...E,ref:P,style:{outline:"none",...E.style},onKeyDown:Ee(E.onKeyDown,H=>{const ce=H.target.closest("[data-radix-menu-content]")===H.currentTarget,ae=H.ctrlKey||H.altKey||H.metaKey,oe=H.key.length===1;ce&&(H.key==="Tab"&&H.preventDefault(),!ae&&oe&&Z(H.key));const ue=B.current;if(H.target!==ue||!TU.includes(H.key))return;H.preventDefault();const ye=O().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);wI.includes(H.key)&&ye.reverse(),KU(ye)}),onBlur:Ee(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(L.current),W.current="")}),onPointerMove:Ee(t.onPointerMove,pd(H=>{const te=H.target,ce=G.current!==H.clientX;if(H.currentTarget.contains(te)&&ce){const ae=H.clientX>G.current?"right":"left";ie.current=ae,G.current=H.clientX}}))})})})})})})});SI.displayName=ys;var zU="MenuGroup",Fy=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Me.div,{role:"group",...n,ref:e})});Fy.displayName=zU;var VU="MenuLabel",AI=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Me.div,{...n,ref:e})});AI.displayName=VU;var qh="MenuItem",x_="menu.itemSelect",W0=N.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,o=N.useRef(null),l=Od(qh,t.__scopeMenu),u=Ly(qh,t.__scopeMenu),h=Ze(e,o),f=N.useRef(!1),x=()=>{const y=o.current;if(!r&&y){const v=new CustomEvent(x_,{bubbles:!0,cancelable:!0});y.addEventListener(x_,b=>n==null?void 0:n(b),{once:!0}),dx(y,v),v.defaultPrevented?f.current=!1:l.onClose()}};return p.jsx(NI,{...s,ref:h,disabled:r,onClick:Ee(t.onClick,x),onPointerDown:y=>{var v;(v=t.onPointerDown)==null||v.call(t,y),f.current=!0},onPointerUp:Ee(t.onPointerUp,y=>{var v;f.current||(v=y.currentTarget)==null||v.click()}),onKeyDown:Ee(t.onKeyDown,y=>{const v=u.searchRef.current!=="";r||v&&y.key===" "||hg.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});W0.displayName=qh;var NI=N.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=t,l=Ly(qh,r),u=_I(r),h=N.useRef(null),f=Ze(e,h),[x,y]=N.useState(!1),[v,b]=N.useState("");return N.useEffect(()=>{const A=h.current;A&&b((A.textContent??"").trim())},[o.children]),p.jsx(hd.ItemSlot,{scope:r,disabled:n,textValue:s??v,children:p.jsx(my,{asChild:!0,...u,focusable:!n,children:p.jsx(Me.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:f,onPointerMove:Ee(t.onPointerMove,pd(A=>{n?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(t.onPointerLeave,pd(A=>l.onItemLeave(A))),onFocus:Ee(t.onFocus,()=>y(!0)),onBlur:Ee(t.onBlur,()=>y(!1))})})})}),HU="MenuCheckboxItem",TI=N.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return p.jsx(kI,{scope:t.__scopeMenu,checked:r,children:p.jsx(W0,{role:"menuitemcheckbox","aria-checked":Kh(r)?"mixed":r,...s,ref:e,"data-state":zy(r),onSelect:Ee(s.onSelect,()=>n==null?void 0:n(Kh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});TI.displayName=HU;var II="MenuRadioGroup",[$U,WU]=el(II,{value:void 0,onValueChange:()=>{}}),RI=N.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,o=fr(n);return p.jsx($U,{scope:t.__scopeMenu,value:r,onValueChange:o,children:p.jsx(Fy,{...s,ref:e})})});RI.displayName=II;var OI="MenuRadioItem",MI=N.forwardRef((t,e)=>{const{value:r,...n}=t,s=WU(OI,t.__scopeMenu),o=r===s.value;return p.jsx(kI,{scope:t.__scopeMenu,checked:o,children:p.jsx(W0,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":zy(o),onSelect:Ee(n.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,r)},{checkForDefaultPrevented:!1})})})});MI.displayName=OI;var Uy="MenuItemIndicator",[kI,GU]=el(Uy,{checked:!1}),PI=N.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,o=GU(Uy,r);return p.jsx(tn,{present:n||Kh(o.checked)||o.checked===!0,children:p.jsx(Me.span,{...s,ref:e,"data-state":zy(o.checked)})})});PI.displayName=Uy;var YU="MenuSeparator",jI=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return p.jsx(Me.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});jI.displayName=YU;var XU="MenuArrow",DI=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=$0(r);return p.jsx(Mx,{...s,...n,ref:e})});DI.displayName=XU;var qU="MenuSub",[wV,LI]=el(qU),gu="MenuSubTrigger",BI=N.forwardRef((t,e)=>{const r=tl(gu,t.__scopeMenu),n=Od(gu,t.__scopeMenu),s=LI(gu,t.__scopeMenu),o=Ly(gu,t.__scopeMenu),l=N.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:h}=o,f={__scopeMenu:t.__scopeMenu},x=N.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return N.useEffect(()=>x,[x]),N.useEffect(()=>{const y=u.current;return()=>{window.clearTimeout(y),h(null)}},[u,h]),p.jsx(jy,{asChild:!0,...f,children:p.jsx(NI,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":zI(r.open),...t,ref:h0(e,s.onTriggerChange),onClick:y=>{var v;(v=t.onClick)==null||v.call(t,y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ee(t.onPointerMove,pd(y=>{o.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:Ee(t.onPointerLeave,pd(y=>{var b,A;x();const v=(b=r.content)==null?void 0:b.getBoundingClientRect();if(v){const E=(A=r.content)==null?void 0:A.dataset.side,I=E==="right",R=I?-5:5,C=v[I?"left":"right"],S=v[I?"right":"left"];o.onPointerGraceIntentChange({area:[{x:y.clientX+R,y:y.clientY},{x:C,y:v.top},{x:S,y:v.top},{x:S,y:v.bottom},{x:C,y:v.bottom}],side:E}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(y),y.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(t.onKeyDown,y=>{var b;const v=o.searchRef.current!=="";t.disabled||v&&y.key===" "||IU[n.dir].includes(y.key)&&(r.onOpenChange(!0),(b=r.content)==null||b.focus(),y.preventDefault())})})})});BI.displayName=gu;var FI="MenuSubContent",UI=N.forwardRef((t,e)=>{const r=EI(ys,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=tl(ys,t.__scopeMenu),l=Od(ys,t.__scopeMenu),u=LI(FI,t.__scopeMenu),h=N.useRef(null),f=Ze(e,h);return p.jsx(hd.Provider,{scope:t.__scopeMenu,children:p.jsx(tn,{present:n||o.open,children:p.jsx(hd.Slot,{scope:t.__scopeMenu,children:p.jsx(By,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var y;l.isUsingKeyboardRef.current&&((y=h.current)==null||y.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Ee(t.onFocusOutside,x=>{x.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ee(t.onEscapeKeyDown,x=>{l.onClose(),x.preventDefault()}),onKeyDown:Ee(t.onKeyDown,x=>{var b;const y=x.currentTarget.contains(x.target),v=RU[l.dir].includes(x.key);y&&v&&(o.onOpenChange(!1),(b=u.trigger)==null||b.focus(),x.preventDefault())})})})})})});UI.displayName=FI;function zI(t){return t?"open":"closed"}function Kh(t){return t==="indeterminate"}function zy(t){return Kh(t)?"indeterminate":t?"checked":"unchecked"}function KU(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function QU(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function ZU(t,e,r){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let l=QU(t,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==r));const h=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return h!==r?h:void 0}function JU(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],h=e[l],f=u.x,x=u.y,y=h.x,v=h.y;x>n!=v>n&&r<(y-f)*(n-x)/(v-x)+f&&(s=!s)}return s}function ez(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return JU(r,e)}function pd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var tz=bI,rz=jy,nz=CI,sz=SI,iz=Fy,oz=AI,az=W0,lz=TI,cz=RI,uz=MI,dz=PI,fz=jI,hz=DI,pz=BI,mz=UI,G0="DropdownMenu",[gz,vV]=On(G0,[vI]),pn=vI(),[xz,VI]=gz(G0),HI=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:l,modal:u=!0}=t,h=pn(e),f=N.useRef(null),[x,y]=Vi({prop:s,defaultProp:o??!1,onChange:l,caller:G0});return p.jsx(xz,{scope:e,triggerId:pi(),triggerRef:f,contentId:pi(),open:x,onOpenChange:y,onOpenToggle:N.useCallback(()=>y(v=>!v),[y]),modal:u,children:p.jsx(tz,{...h,open:x,onOpenChange:y,dir:n,modal:u,children:r})})};HI.displayName=G0;var $I="DropdownMenuTrigger",WI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,o=VI($I,r),l=pn(r);return p.jsx(rz,{asChild:!0,...l,children:p.jsx(Me.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:h0(e,o.triggerRef),onPointerDown:Ee(t.onPointerDown,u=>{!n&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Ee(t.onKeyDown,u=>{n||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});WI.displayName=$I;var yz="DropdownMenuPortal",GI=t=>{const{__scopeDropdownMenu:e,...r}=t,n=pn(e);return p.jsx(nz,{...n,...r})};GI.displayName=yz;var YI="DropdownMenuContent",XI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=VI(YI,r),o=pn(r),l=N.useRef(!1);return p.jsx(sz,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:e,onCloseAutoFocus:Ee(t.onCloseAutoFocus,u=>{var h;l.current||(h=s.triggerRef.current)==null||h.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Ee(t.onInteractOutside,u=>{const h=u.detail.originalEvent,f=h.button===0&&h.ctrlKey===!0,x=h.button===2||f;(!s.modal||x)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XI.displayName=YI;var wz="DropdownMenuGroup",vz=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(iz,{...s,...n,ref:e})});vz.displayName=wz;var _z="DropdownMenuLabel",qI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(oz,{...s,...n,ref:e})});qI.displayName=_z;var bz="DropdownMenuItem",KI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(az,{...s,...n,ref:e})});KI.displayName=bz;var Ez="DropdownMenuCheckboxItem",QI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(lz,{...s,...n,ref:e})});QI.displayName=Ez;var Cz="DropdownMenuRadioGroup",Sz=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(cz,{...s,...n,ref:e})});Sz.displayName=Cz;var Az="DropdownMenuRadioItem",ZI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(uz,{...s,...n,ref:e})});ZI.displayName=Az;var Nz="DropdownMenuItemIndicator",JI=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(dz,{...s,...n,ref:e})});JI.displayName=Nz;var Tz="DropdownMenuSeparator",e4=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(fz,{...s,...n,ref:e})});e4.displayName=Tz;var Iz="DropdownMenuArrow",Rz=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(hz,{...s,...n,ref:e})});Rz.displayName=Iz;var Oz="DropdownMenuSubTrigger",t4=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(pz,{...s,...n,ref:e})});t4.displayName=Oz;var Mz="DropdownMenuSubContent",r4=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=pn(r);return p.jsx(mz,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});r4.displayName=Mz;var kz=HI,Pz=WI,jz=GI,n4=XI,s4=qI,i4=KI,o4=QI,a4=ZI,l4=JI,c4=e4,u4=t4,d4=r4;const Dz=kz,Lz=Pz,Bz=N.forwardRef(({className:t,inset:e,children:r,...n},s)=>p.jsxs(u4,{ref:s,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,p.jsx(xC,{className:"ml-auto h-4 w-4"})]}));Bz.displayName=u4.displayName;const Fz=N.forwardRef(({className:t,...e},r)=>p.jsx(d4,{ref:r,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Fz.displayName=d4.displayName;const f4=N.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(jz,{children:p.jsx(n4,{ref:n,sideOffset:e,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));f4.displayName=n4.displayName;const h4=N.forwardRef(({className:t,inset:e,...r},n)=>p.jsx(i4,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));h4.displayName=i4.displayName;const Uz=N.forwardRef(({className:t,children:e,checked:r,...n},s)=>p.jsxs(o4,{ref:s,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(l4,{children:p.jsx(mC,{className:"h-4 w-4"})})}),e]}));Uz.displayName=o4.displayName;const zz=N.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(a4,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(l4,{children:p.jsx(wC,{className:"h-2 w-2 fill-current"})})}),e]}));zz.displayName=a4.displayName;const p4=N.forwardRef(({className:t,inset:e,...r},n)=>p.jsx(s4,{ref:n,className:Oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));p4.displayName=s4.displayName;const m4=N.forwardRef(({className:t,...e},r)=>p.jsx(c4,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",t),...e}));m4.displayName=c4.displayName;const Vz=()=>{const{signOut:t}=Mn(),e=hn(),[r,n]=N.useState("orders"),{restaurantId:s,notifications:o,unreadCount:l,loading:u,markAllAsRead:h,markAsRead:f}=AU({limit:50,enableSound:!0}),[x,y]=N.useState(null),[v,b]=N.useState(null),[A,E]=N.useState(!1),I=async()=>{await t(),e("/auth")},R=async C=>{if(C!=null&&C.order_id){y(C.order_id),b(null),E(!0),C.id&&f(C.id);try{const{supabase:S}=await zo(async()=>{const{supabase:P}=await Promise.resolve().then(()=>S2);return{supabase:P}},void 0),{data:O,error:k}=await S.from("orders").select(`
          id,
          order_items,
          total_amount,
          status,
          created_at,
          order_type,
          customer_id
        `).eq("id",C.order_id).single();if(k||!O){console.error("Failed to load order detail for notification:",k);return}let F=null,B=null;if(O.customer_id){const{data:P,error:L}=await S.rpc("get_order_customers",{customer_ids:[O.customer_id]});if(L)console.error("Failed to load customer details for modal:",L);else if(P&&P.length>0){const W=P[0];F=W.full_name&&String(W.full_name).trim()||null,B=W.phone&&String(W.phone).trim()||null}}!F&&C.customer_name&&typeof C.customer_name=="string"&&C.customer_name.trim()&&(F=C.customer_name.trim()),b({...O,customer_display_name:F,customer_display_phone:B})}catch(S){console.error("Error loading order detail module:",S)}}};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background pb-20",children:[p.jsx("header",{className:"border-b border-border/50 bg-card/80 backdrop-blur-xl sticky top-0 z-40",children:p.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-full luxury-gradient flex items-center justify-center",children:p.jsx(yx,{className:"w-5 h-5 text-white"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Restaurant Dashboard"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage your restaurant",s?"  Live order notifications enabled":""]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(Dz,{children:[p.jsx(Lz,{asChild:!0,children:p.jsxs("button",{type:"button",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-border bg-card/70 hover:bg-primary/5 transition-colors",children:[p.jsx(pC,{className:"w-5 h-5 text-foreground"}),l>0&&p.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 rounded-full bg-red-500 text-[10px] font-semibold text-white flex items-center justify-center",children:l>99?"99+":l})]})}),p.jsxs(f4,{align:"end",className:"w-[360px] max-h-[420px] p-0 overflow-hidden",children:[p.jsxs(p4,{className:"flex items-center justify-between px-3 py-2",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-semibold",children:"Order Notifications"}),p.jsx("span",{className:"text-[10px] text-muted-foreground",children:u?"Loading...":o.length===0?"No notifications yet":`${l} unread  ${o.length} total`})]}),l>0&&p.jsx("button",{onClick:C=>{C.stopPropagation(),h()},className:"text-[10px] text-primary hover:underline",children:"Mark all read"})]}),p.jsx(m4,{}),p.jsx(Ry,{className:"max-h-[340px]",children:o.length===0?p.jsx("div",{className:"px-3 py-6 text-center text-xs text-muted-foreground",children:"You will see new orders here in real time."}):o.map(C=>{const S=C.customer_name&&C.total_amount?`${C.customer_name} placed an order of ${Number(C.total_amount).toLocaleString()} MMK`:C.message||"New order received";return p.jsxs(h4,{className:`flex items-start gap-3 px-4 py-3 cursor-pointer ${C.status==="unread"?"bg-primary/5 hover:bg-primary/10":"hover:bg-muted/60"}`,onClick:()=>R(C),children:[p.jsx("div",{className:"mt-1",children:C.status==="unread"?p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500 block"}):p.jsx(mx,{className:"w-4 h-4 text-muted-foreground"})}),p.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[p.jsx("div",{className:"flex-1",children:p.jsx("div",{className:`text-xs ${C.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}`,children:S})}),p.jsx("div",{className:"mt-0.5 text-[9px] text-muted-foreground text-right",children:(()=>{const O=new Date(C.created_at),k=String(O.getDate()).padStart(2,"0"),F=String(O.getMonth()+1).padStart(2,"0"),B=O.getFullYear();let P=O.getHours();const L=String(O.getMinutes()).padStart(2,"0"),W=P>=12?"PM":"AM";return P=P%12||12,`${k}/${F}/${B} - ${P}:${L} ${W}`})()})]})]},C.id)})})]})]}),p.jsxs(Be,{variant:"outline",size:"sm",onClick:I,className:"gap-2",children:[p.jsx(y0,{className:"w-4 h-4"}),"Logout"]})]})]})}),p.jsxs("main",{className:"container mx-auto px-4 py-6",children:[r==="orders"&&p.jsx(MF,{}),r==="scanner"&&p.jsx(xU,{}),r==="menu"&&p.jsx(EU,{}),r==="settings"&&p.jsx(CU,{}),p.jsx(wi,{open:A,onOpenChange:E,children:p.jsxs(Ys,{className:"max-w-md",children:[p.jsxs(Yi,{children:[p.jsx(Xi,{children:"Order Details"}),p.jsx(PT,{children:"View details for this order from your notifications."})]}),v?p.jsxs("div",{className:"space-y-3 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Order ID"}),p.jsx("span",{className:"font-mono text-xs",children:String(v.id).substring(0,8)})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Customer"}),p.jsx("span",{children:(()=>{const C=v.customer_display_name&&String(v.customer_display_name).trim()||null,S=v.customer_display_phone&&String(v.customer_display_phone).trim()||null;return C&&S?`${C}  ${S}`:C||S||"Customer"})()})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Total Amount"}),p.jsxs("span",{className:"font-semibold",children:[Number(v.total_amount||0).toLocaleString()," MMK"]})]}),p.jsxs("div",{className:"flex justify-between items-center gap-3",children:[p.jsx("span",{className:"font-medium",children:"Status"}),p.jsxs("select",{className:"text-xs px-2 py-1 border border-border rounded-md bg-background capitalize",value:v.status||"paid",onChange:async C=>{const S=C.target.value;try{const{supabase:O}=await zo(async()=>{const{supabase:F}=await Promise.resolve().then(()=>S2);return{supabase:F}},void 0),{error:k}=await O.from("orders").update({status:S}).eq("id",v.id);if(k){console.error("Failed to update order status from modal:",k);return}b(F=>F&&{...F,status:S}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:v.id,status:S}}))}catch(O){console.error("Error updating order status from modal:",O)}},children:[p.jsx("option",{value:"paid",children:"Paid"}),p.jsx("option",{value:"preparing",children:"Preparing"}),p.jsx("option",{value:"ready",children:"Ready"}),p.jsx("option",{value:"served",children:"Served"}),p.jsx("option",{value:"completed",children:"Completed"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:"Type"}),p.jsx("span",{className:"capitalize",children:v.order_type||"dine_in"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Placed At"}),p.jsx("div",{className:"text-xs text-muted-foreground",children:v.created_at?(()=>{const C=new Date(v.created_at),S=String(C.getDate()).padStart(2,"0"),O=String(C.getMonth()+1).padStart(2,"0"),k=C.getFullYear();let F=C.getHours();const B=String(C.getMinutes()).padStart(2,"0"),P=F>=12?"PM":"AM";return F=F%12||12,`${S}/${O}/${k} - ${F}:${B} ${P}`})():""})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Items"}),p.jsx("ul",{className:"mt-1 space-y-0.5",children:(v.order_items||[]).map((C,S)=>p.jsxs("li",{className:"flex justify-between text-xs text-muted-foreground",children:[p.jsxs("span",{children:[C.quantity,"x ",C.name]}),C.price&&p.jsxs("span",{children:[Number(C.price*C.quantity).toLocaleString()," ","MMK"]})]},S))})]})]}):p.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Loading order details..."})]})})]}),p.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border glass-effect z-50",children:p.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[p.jsxs("button",{onClick:()=>n("orders"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="orders"?"text-primary":"text-muted-foreground"}`,children:[p.jsx(SC,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),p.jsxs("button",{onClick:()=>n("scanner"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="scanner"?"text-primary":"text-muted-foreground"}`,children:[p.jsx(CM,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"QR Scanner"})]}),p.jsxs("button",{onClick:()=>n("menu"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="menu"?"text-primary":"text-muted-foreground"}`,children:[p.jsx(wM,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Menu"})]}),p.jsxs("button",{onClick:()=>n("settings"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="settings"?"text-primary":"text-muted-foreground"}`,children:[p.jsx(SM,{className:"h-5 w-5 mb-1"}),p.jsx("span",{className:"text-xs font-medium",children:"Settings"})]})]})})]})},Hz=()=>{const{user:t,userRole:e,loading:r,signOut:n}=Mn(),s=hn(),[o,l]=N.useState({totalRestaurants:0,totalOrders:0,totalCustomers:0,totalRevenue:0}),[u,h]=N.useState(!0);N.useEffect(()=>{!r&&(!t||e!=="admin")&&(Ce.error("Admin access required"),s("/auth"))},[t,e,r,s]);const f=async()=>{try{await n(),Ce.success("Logged out successfully"),s("/auth")}catch{Ce.error("Failed to logout")}};N.useEffect(()=>{t&&e==="admin"&&x()},[t,e]);const x=async()=>{try{h(!0);const{count:v}=await xe.from("restaurants").select("*",{count:"exact",head:!0}),{data:b,count:A}=await xe.from("orders").select("total_amount",{count:"exact"}),E=(b==null?void 0:b.reduce((R,C)=>R+Number(C.total_amount),0))||0,{count:I}=await xe.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","customer");l({totalRestaurants:v||0,totalOrders:A||0,totalCustomers:I||0,totalRevenue:E})}catch(v){console.error("Error fetching stats:",v),Ce.error("Failed to load statistics")}finally{h(!1)}};if(r||u)return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),p.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading admin dashboard..."})]})});if(!t||e!=="admin")return null;const y=[{title:"Total Restaurants",value:o.totalRestaurants,icon:wh,description:"Active restaurants",color:"text-blue-600"},{title:"Total Orders",value:o.totalOrders,icon:_h,description:"All time orders",color:"text-green-600"},{title:"Total Customers",value:o.totalCustomers,icon:F1,description:"Registered customers",color:"text-purple-600"},{title:"Total Revenue",value:`${o.totalRevenue.toLocaleString()} MMK`,icon:yM,description:"All time revenue",color:"text-yellow-600"}];return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[p.jsx("div",{className:"mb-8",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage your ALAN platform"})]}),p.jsxs(Be,{variant:"outline",onClick:f,className:"flex items-center gap-2 hover:bg-destructive hover:text-destructive-foreground",children:[p.jsx(y0,{className:"h-4 w-4"}),"Logout"]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:y.map(v=>{const b=v.icon;return p.jsxs(We,{className:"hover:shadow-lg transition-shadow",children:[p.jsxs(or,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsx(hr,{className:"text-sm font-medium",children:v.title}),p.jsx(b,{className:`h-5 w-5 ${v.color}`})]}),p.jsxs(bt,{children:[p.jsx("div",{className:"text-2xl font-bold",children:v.value}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description})]})]},v.title)})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(We,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/restaurants"),children:p.jsxs(or,{children:[p.jsxs(hr,{className:"text-lg flex items-center gap-2",children:[p.jsx(wh,{className:"h-5 w-5"}),"Restaurants"]}),p.jsx(ji,{children:"Manage all restaurants"})]})}),p.jsx(We,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/owners"),children:p.jsxs(or,{children:[p.jsxs(hr,{className:"text-lg flex items-center gap-2",children:[p.jsx(F1,{className:"h-5 w-5"}),"Restaurant Owners"]}),p.jsx(ji,{children:"Manage owner accounts"})]})}),p.jsx(We,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/orders"),children:p.jsxs(or,{children:[p.jsxs(hr,{className:"text-lg flex items-center gap-2",children:[p.jsx(_h,{className:"h-5 w-5"}),"Orders Report"]}),p.jsx(ji,{children:"View all orders"})]})}),p.jsx(We,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/users"),children:p.jsxs(or,{children:[p.jsxs(hr,{className:"text-lg flex items-center gap-2",children:[p.jsx(F1,{className:"h-5 w-5"}),"Users"]}),p.jsx(ji,{children:"Manage all users"})]})})]})]})})},Md=N.forwardRef(({className:t,...e},r)=>p.jsx("div",{className:"relative w-full overflow-auto",children:p.jsx("table",{ref:r,className:Oe("w-full caption-bottom text-sm",t),...e})}));Md.displayName="Table";const kd=N.forwardRef(({className:t,...e},r)=>p.jsx("thead",{ref:r,className:Oe("[&_tr]:border-b",t),...e}));kd.displayName="TableHeader";const Pd=N.forwardRef(({className:t,...e},r)=>p.jsx("tbody",{ref:r,className:Oe("[&_tr:last-child]:border-0",t),...e}));Pd.displayName="TableBody";const $z=N.forwardRef(({className:t,...e},r)=>p.jsx("tfoot",{ref:r,className:Oe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));$z.displayName="TableFooter";const gi=N.forwardRef(({className:t,...e},r)=>p.jsx("tr",{ref:r,className:Oe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));gi.displayName="TableRow";const Xt=N.forwardRef(({className:t,...e},r)=>p.jsx("th",{ref:r,className:Oe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Xt.displayName="TableHead";const zt=N.forwardRef(({className:t,...e},r)=>p.jsx("td",{ref:r,className:Oe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));zt.displayName="TableCell";const Wz=N.forwardRef(({className:t,...e},r)=>p.jsx("caption",{ref:r,className:Oe("mt-4 text-sm text-muted-foreground",t),...e}));Wz.displayName="TableCaption";const Gz=()=>{const{user:t,userRole:e,loading:r}=Mn(),n=hn(),[s,o]=N.useState([]),[l,u]=N.useState([]),[h,f]=N.useState(""),[x,y]=N.useState(!1),[v,b]=N.useState(null),[A,E]=N.useState({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""}),I=["7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM"],R=["1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM"],C=P=>{if(!P||!P.includes(" - "))return{start:"",end:""};const[L,W]=P.split(" - ").map(q=>q.trim());return{start:I.includes(L)?L:"",end:R.includes(W)?W:""}};N.useEffect(()=>{!r&&(!t||e!=="admin")&&(Ce.error("Admin access required"),n("/auth"))},[t,e,r,n]),N.useEffect(()=>{t&&e==="admin"&&S()},[t,e]),N.useEffect(()=>{const P=s.filter(L=>L.name.toLowerCase().includes(h.toLowerCase())||L.address.toLowerCase().includes(h.toLowerCase()));u(P)},[h,s]);const S=async()=>{const{data:P,error:L}=await xe.from("restaurants").select("*").order("created_at",{ascending:!1});if(L){Ce.error("Failed to load restaurants");return}o(P||[]),u(P||[])},O=async()=>{if(!A.name||!A.address){Ce.error("Name and address are required");return}const P=A.open_hours&&A.open_hours.includes(" - ")?A.open_hours:null;if(v){const{error:L}=await xe.from("restaurants").update({...A,open_hours:P,rating:A.rating?Number(A.rating):null}).eq("id",v.id);if(L){Ce.error("Failed to update restaurant");return}Ce.success("Restaurant updated successfully")}else{const{error:L}=await xe.from("restaurants").insert([{...A,open_hours:P,rating:A.rating?Number(A.rating):null}]);if(L){Ce.error("Failed to create restaurant");return}Ce.success("Restaurant created successfully")}y(!1),B(),S()},k=async P=>{if(!confirm("Are you sure you want to delete this restaurant?"))return;const{error:L}=await xe.from("restaurants").delete().eq("id",P);if(L){Ce.error("Failed to delete restaurant");return}Ce.success("Restaurant deleted successfully"),S()},F=P=>{b(P);const L=C(P.open_hours);E({name:P.name,address:P.address,description:P.description||"",phone:P.phone||"",cuisine_type:P.cuisine_type||"",image_url:P.image_url||"",open_hours:L.start&&L.end?`${L.start} - ${L.end}`:P.open_hours||"",rating:P.rating!==null&&P.rating!==void 0?String(P.rating):""}),y(!0)},B=()=>{b(null),E({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""})};return r||!t||e!=="admin"?null:p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Management"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurants on the platform"})]}),p.jsxs(wi,{open:x,onOpenChange:P=>{y(P),P||B()},children:[p.jsx(MT,{asChild:!0,children:p.jsxs(Be,{children:[p.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Add Restaurant"]})}),p.jsxs(Ys,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:v?"Edit Restaurant":"Add New Restaurant"})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"name",children:"Restaurant Name *"}),p.jsx(ct,{id:"name",value:A.name,onChange:P=>E({...A,name:P.target.value}),placeholder:"Enter restaurant name"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"address",children:"Address *"}),p.jsx(ct,{id:"address",value:A.address,onChange:P=>E({...A,address:P.target.value}),placeholder:"Enter address"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"phone",children:"Phone"}),p.jsx(ct,{id:"phone",value:A.phone,onChange:P=>E({...A,phone:P.target.value}),placeholder:"Enter phone number"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"cuisine_type",children:"Cuisine Type"}),p.jsx(ct,{id:"cuisine_type",value:A.cuisine_type,onChange:P=>E({...A,cuisine_type:P.target.value}),placeholder:"e.g., Italian, Chinese"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"description",children:"Description"}),p.jsx(Py,{id:"description",value:A.description,onChange:P=>E({...A,description:P.target.value}),placeholder:"Enter restaurant description",rows:3})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"image_url",children:"Image URL"}),p.jsx(ct,{id:"image_url",value:A.image_url,onChange:P=>E({...A,image_url:P.target.value}),placeholder:"Enter image URL"})]}),p.jsxs("div",{children:[p.jsx(Ke,{children:"Opening Hours"}),p.jsxs("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Start"}),p.jsxs("select",{value:C(A.open_hours).start,onChange:P=>{const L=C(A.open_hours),W=P.target.value,q=L.end,K=W&&q?`${W} - ${q}`:W||q?`${W}${q?` - ${q}`:""}`:"";E({...A,open_hours:K})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[p.jsx("option",{value:"",children:"Select start time"}),I.map(P=>p.jsx("option",{value:P,children:P},P))]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"End"}),p.jsxs("select",{value:C(A.open_hours).end,onChange:P=>{const L=C(A.open_hours),W=P.target.value,q=L.start,K=q&&W?`${q} - ${W}`:W&&q?`${q} - ${W}`:W||q?`${q}${W?` - ${W}`:""}`:"";E({...A,open_hours:K})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[p.jsx("option",{value:"",children:"Select end time"}),R.map(P=>p.jsx("option",{value:P,children:P},P))]})]})]}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:'Stored as a single value like "11:00 AM - 11:00 PM" in the database.'})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"rating",children:"Rating"}),p.jsx(ct,{id:"rating",type:"number",step:"0.1",min:"0",max:"5",value:A.rating,onChange:P=>E({...A,rating:P.target.value}),placeholder:"Enter rating (e.g., 4.5)"})]}),p.jsx(Be,{onClick:O,className:"w-full",children:v?"Update Restaurant":"Create Restaurant"})]})]})]})]}),p.jsx(We,{className:"mb-6",children:p.jsx(bt,{className:"pt-6",children:p.jsxs("div",{className:"relative",children:[p.jsx(Cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(ct,{placeholder:"Search restaurants...",value:h,onChange:P=>f(P.target.value),className:"pl-10"})]})})}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{children:["All Restaurants (",l.length,")"]})}),p.jsx(bt,{children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs(Md,{children:[p.jsx(kd,{children:p.jsxs(gi,{children:[p.jsx(Xt,{children:"Name"}),p.jsx(Xt,{children:"Address"}),p.jsx(Xt,{children:"Phone"}),p.jsx(Xt,{children:"Cuisine"}),p.jsx(Xt,{className:"text-right",children:"Actions"})]})}),p.jsx(Pd,{children:l.map(P=>p.jsxs(gi,{children:[p.jsx(zt,{className:"font-medium",children:P.name}),p.jsx(zt,{children:P.address}),p.jsx(zt,{children:P.phone||"N/A"}),p.jsx(zt,{children:P.cuisine_type||"N/A"}),p.jsxs(zt,{className:"text-right",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>F(P),children:p.jsx(NC,{className:"h-4 w-4"})}),p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>k(P.id),children:p.jsx(xx,{className:"h-4 w-4 text-destructive"})})]})]},P.id))})]})})})]})]})})},Yz=()=>{const{user:t,userRole:e,loading:r}=Mn(),n=hn(),[s,o]=N.useState([]),[l,u]=N.useState([]),[h,f]=N.useState([]),[x,y]=N.useState(""),[v,b]=N.useState(!1),[A,E]=N.useState({ownerId:"",restaurantId:""});N.useEffect(()=>{!r&&(!t||e!=="admin")&&(Ce.error("Admin access required"),n("/auth"))},[t,e,r,n]),N.useEffect(()=>{t&&e==="admin"&&(I(),R())},[t,e]),N.useEffect(()=>{const O=s.filter(k=>k.email.toLowerCase().includes(x.toLowerCase())||k.restaurant_name&&k.restaurant_name.toLowerCase().includes(x.toLowerCase()));f(O)},[x,s]);const I=async()=>{try{const{data:O,error:k}=await xe.rpc("get_restaurant_owners");if(!k&&O&&O.length>0){const Z=O||[],Q=Array.from(new Set(Z.map(oe=>oe.restaurant_id).filter(Boolean))),{data:H,error:te}=await xe.from("restaurants").select("id, address").in("id",Q);te&&console.error("Failed to fetch restaurant addresses:",te);const ce=new Map((H||[]).map(oe=>[oe.id,oe.address??null])),ae=Z.map(oe=>({user_id:oe.user_id,full_name:oe.full_name??"Unnamed Owner",email:oe.email??"Email not available",phone:oe.phone??null,restaurant_id:oe.restaurant_id??null,restaurant_name:oe.restaurant_name??null,restaurant_address:oe.restaurant_id?ce.get(oe.restaurant_id)??null:null}));o(ae),f(ae);return}console.warn("RPC get_restaurant_owners unavailable or empty; falling back. Error:",k);const{data:F,error:B}=await xe.from("user_roles").select("user_id").eq("role","restaurant_owner");if(B){console.error("Failed to load owner roles:",B),Ce.error("Failed to load owners");return}const P=Array.from(new Set((F??[]).map(Z=>Z.user_id).filter(Z=>!!Z)));if(P.length===0){o([]),f([]);return}const{data:L,error:W}=await xe.from("profiles").select("id, full_name, phone").in("id",P);W&&console.error("Failed to load owner profiles:",W);let q=new Map;try{const{data:Z,error:Q}=await xe.rpc("get_user_emails",{user_ids:P});if(!Q&&Z)q=new Map((Z??[]).filter(H=>H.email).map(H=>[H.user_id,H.email]));else{console.warn("RPC get_user_emails failed, attempting direct fallback:",Q);const{data:H,error:te}=await xe.from("user_emails").select("user_id, email").in("user_id",P);!te&&H&&(q=new Map((H??[]).map(ce=>[ce.user_id,ce.email])))}}catch(Z){console.warn("Error getting emails via RPC/fallback:",Z)}const{data:K,error:ie}=await xe.from("restaurants").select("id, name, address, owner_id").in("owner_id",P);if(ie){console.error("Failed to load restaurants for owners:",ie),Ce.error("Failed to load owners");return}const G=new Map((L??[]).map(Z=>[Z.id,{fullName:Z.full_name??"Unnamed Owner",phone:Z.phone??null}])),$=new Map;(K??[]).forEach(Z=>{Z.owner_id&&$.set(Z.owner_id,{id:Z.id,name:Z.name??"Unnamed Restaurant",address:Z.address??null})});const re=P.map(Z=>{const Q=G.get(Z),H=q.get(Z)??"Email not available",te=$.get(Z);return{user_id:Z,full_name:(Q==null?void 0:Q.fullName)??"Unnamed Owner",email:H,phone:(Q==null?void 0:Q.phone)??null,restaurant_id:(te==null?void 0:te.id)??null,restaurant_name:(te==null?void 0:te.name)??null,restaurant_address:(te==null?void 0:te.address)??null}});o(re),f(re)}catch(O){console.error("Unexpected error fetching owners:",O),Ce.error("Failed to load owners")}},R=async()=>{const{data:O,error:k}=await xe.from("restaurants").select("id, name").is("owner_id",null).order("name");if(k){console.error("Failed to load restaurants:",k);return}u(O||[])},C=async()=>{if(!A.ownerId||!A.restaurantId){Ce.error("Please select both an owner and a restaurant");return}try{const{data:O,error:k}=await xe.from("user_roles").select("user_id").eq("user_id",A.ownerId).eq("role","restaurant_owner").maybeSingle();if(k){console.error("Error checking owner role:",k),Ce.error("Failed to verify owner role");return}if(!O){const{error:B}=await xe.from("user_roles").insert([{user_id:A.ownerId,role:"restaurant_owner"}]);if(B){Ce.error("Failed to assign owner role");return}}const{error:F}=await xe.from("restaurants").update({owner_id:A.ownerId}).eq("id",A.restaurantId);if(F){Ce.error("Failed to link restaurant to owner");return}Ce.success("Owner linked to restaurant successfully"),b(!1),S(),I(),R()}catch(O){console.error("Error linking owner:",O),Ce.error("Failed to link owner")}},S=()=>{E({ownerId:"",restaurantId:""})};return r||!t||e!=="admin"?null:p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Owner Management"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurant owner accounts"})]}),p.jsxs(wi,{open:v,onOpenChange:O=>{b(O),O||S()},children:[p.jsx(MT,{asChild:!0,children:p.jsxs(Be,{disabled:l.length===0||s.filter(O=>!O.restaurant_id).length===0,children:[p.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Add Owner"]})}),p.jsxs(Ys,{className:"max-w-md",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:"Link Existing Owner to Restaurant"})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"owner",children:"Owner *"}),p.jsxs(ms,{value:A.ownerId,onValueChange:O=>E({...A,ownerId:O}),children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Select owner without restaurant"})}),p.jsx(Gn,{children:s.filter(O=>!O.restaurant_id).map(O=>p.jsxs(tt,{value:O.user_id,children:[O.full_name||"Unnamed Owner","  ",O.email]},O.user_id))})]})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"restaurant",children:"Restaurant *"}),p.jsxs(ms,{value:A.restaurantId,onValueChange:O=>E({...A,restaurantId:O}),children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Select restaurant without owner"})}),p.jsx(Gn,{children:l.map(O=>p.jsx(tt,{value:O.id,children:O.name},O.id))})]})]}),p.jsx(Be,{onClick:C,className:"w-full",disabled:!A.ownerId||!A.restaurantId,children:"Link Owner"})]})]})]})]}),l.length===0&&p.jsx(We,{className:"mb-6 border-amber-200 bg-amber-50",children:p.jsx(bt,{className:"pt-6",children:p.jsx("p",{className:"text-amber-800",children:"No restaurants available without owners. Please create restaurants first before adding owners."})})}),p.jsx(We,{className:"mb-6",children:p.jsx(bt,{className:"pt-6",children:p.jsxs("div",{className:"relative",children:[p.jsx(Cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(ct,{placeholder:"Search owners...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})})}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{children:["All Restaurant Owners (",h.length,")"]})}),p.jsx(bt,{children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs(Md,{children:[p.jsx(kd,{children:p.jsxs(gi,{children:[p.jsx(Xt,{children:"Restaurant"}),p.jsx(Xt,{children:"Address"}),p.jsx(Xt,{children:"Owner"}),p.jsx(Xt,{children:"Email"}),p.jsx(Xt,{children:"Phone"})]})}),p.jsx(Pd,{children:h.map(O=>p.jsxs(gi,{children:[p.jsx(zt,{children:O.restaurant_name?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(wh,{className:"h-4 w-4 text-muted-foreground"}),O.restaurant_name]}):p.jsx("span",{className:"text-muted-foreground",children:"No restaurant"})}),p.jsx(zt,{children:O.restaurant_address||p.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),p.jsx(zt,{children:O.full_name||p.jsx("span",{className:"text-muted-foreground",children:"Unnamed Owner"})}),p.jsx(zt,{className:"text-muted-foreground",children:O.email}),p.jsx(zt,{children:O.phone||"N/A"})]},O.user_id))})]})})})]})]})})};function Xz(t){const e=typeof t=="string"?new Date(t):t,r=e.getMonth()+1,n=e.getDate(),s=e.getFullYear();let o=e.getHours();const l=e.getMinutes(),u=o>=12?"PM":"AM";o=o%12,o=o||12;const h=l<10?`0${l}`:`${l}`;return`${r}/${n}/${s} - ${o}:${h} ${u}`}const qz=()=>{var W,q,K,ie;const{user:t,userRole:e,loading:r}=Mn(),n=hn(),[s,o]=N.useState([]),[l,u]=N.useState([]),[h,f]=N.useState([]),[x,y]=N.useState([]),[v,b]=N.useState(""),[A,E]=N.useState("all"),[I,R]=N.useState("all"),[C,S]=N.useState("all");N.useEffect(()=>{!r&&(!t||e!=="admin")&&(Ce.error("Admin access required"),n("/auth"))},[t,e,r,n]),N.useEffect(()=>{t&&e==="admin"&&O()},[t,e]),N.useEffect(()=>{F()},[v,A,I,C,s]);const O=async()=>{console.log(" Fetching orders data...");const{data:G,error:$}=await xe.from("orders").select("*").order("created_at",{ascending:!1});if($){console.error(" Error fetching orders:",$),Ce.error("Failed to load orders");return}if(console.log(" Orders fetched:",(G==null?void 0:G.length)||0,"orders"),!G||G.length===0){console.log(" No orders found in database"),o([]),u([]);const{data:oe}=await xe.from("restaurants").select("id, name").order("name");f(oe||[]),Ce.info("No orders found in the database");return}console.log(" Found existing orders in database:",G.length);const re=[...new Set(G.map(oe=>oe.customer_id).filter(oe=>!!oe))];console.log(" Looking up customer details for IDs:",re.map(oe=>oe.substring(0,8)));let Z=[];if(re.length>0){try{let oe=await xe.rpc("get_order_customers_fallback",{customer_ids:re});oe.error&&(console.warn(" get_order_customers_fallback not available or failed, trying get_order_customers:",oe.error.message),oe=await xe.rpc("get_order_customers",{customer_ids:re})),oe.error?(console.error(" Error fetching customer details via RPC:",oe.error),Ce.error("Failed to load customer details")):(Z=oe.data||[],console.log(" Customer details fetched via RPC:",Z.length))}catch(oe){console.error(" Unexpected error fetching customer details:",oe),Ce.error("Failed to load customer details")}if(Z.length===0)try{const{data:oe,error:ue}=await xe.from("profiles").select("id, full_name, phone").in("id",re);!ue&&oe&&(Z=oe.map(ke=>({user_id:ke.id,full_name:ke.full_name,email:null,phone:ke.phone})),console.log(" Fallback to profiles fetched:",Z.length))}catch(oe){console.error(" Unexpected error fetching profiles as fallback:",oe)}}const Q=new Map(Z.map(oe=>{var ue,ke,ye;return[oe.user_id,{name:((ue=oe.full_name)==null?void 0:ue.trim())||"",email:((ke=oe.email)==null?void 0:ke.trim())||"Email not available",phone:((ye=oe.phone)==null?void 0:ye.trim())||""}]}));console.log(" Customer mapping (via RPC):",{totalCustomers:Z.length,customerIds:re.map(oe=>oe.substring(0,8)),foundCustomers:Z.map(oe=>({id:oe.user_id.substring(0,8),name:oe.full_name,email:oe.email,phone:oe.phone}))});const{data:H}=await xe.from("restaurants").select("id, name").order("name"),te=[...new Set(G.map(oe=>oe.restaurant_id))],{data:ce}=await xe.from("restaurants").select("id, name").in("id",te),ae=G.map(oe=>{var Xe;const ue=Q.get(oe.customer_id),ke=oe.customer_id?oe.customer_id.substring(0,8):"UNKNOWN",ye=ue!=null&&ue.name&&ue.name.length>0?ue.name:`Customer ${ke}`,_e=ue!=null&&ue.email&&ue.email.length>0?ue.email:"Email not available",Re=ue!=null&&ue.phone&&ue.phone.length>0?ue.phone:"Phone not available";return{...oe,customer_name:ye,customer_email:_e,customer_phone:Re,restaurant_name:((Xe=ce==null?void 0:ce.find(Ye=>Ye.id===oe.restaurant_id))==null?void 0:Xe.name)||"Unknown Restaurant"}});console.log(" Orders enriched with customer data:",{totalOrders:ae.length,ordersWithCustomerNames:ae.filter(oe=>!oe.customer_name.startsWith("Customer ")).length,sampleOrder:ae[0]?{id:ae[0].id.substring(0,8),customerName:ae[0].customer_name,customerEmail:ae[0].customer_email,customerPhone:ae[0].customer_phone}:null}),o(ae),u(ae),f(H||[]),k(ae)},k=G=>{const $=new Map;G.forEach(Z=>{const Q=Z.restaurant_id,H=Z.restaurant_name,te=Number(Z.total_amount);if($.has(Q)){const ce=$.get(Q);ce.total_orders+=1,ce.total_revenue+=te,ce.avg_order_value=ce.total_revenue/ce.total_orders}else $.set(Q,{restaurant_id:Q,restaurant_name:H,total_orders:1,total_revenue:te,avg_order_value:te})});const re=Array.from($.values()).sort((Z,Q)=>Q.total_revenue-Z.total_revenue);y(re)},F=()=>{let G=[...s];if(v&&(G=G.filter($=>$.customer_name.toLowerCase().includes(v.toLowerCase())||$.customer_phone.toLowerCase().includes(v.toLowerCase())||$.restaurant_name.toLowerCase().includes(v.toLowerCase())||$.id.toLowerCase().includes(v.toLowerCase()))),C!=="all"&&(G=G.filter($=>$.restaurant_id===C)),A!=="all"&&(G=G.filter($=>$.status===A)),I!=="all"){const $=new Date,re=new Date;I==="today"?re.setHours(0,0,0,0):I==="week"?re.setDate($.getDate()-7):I==="month"&&re.setMonth($.getMonth()-1),G=G.filter(Z=>new Date(Z.created_at)>=re)}u(G),k(G)},B=()=>{window.print()},P=l.reduce((G,$)=>G+Number($.total_amount),0),L=G=>{const $={paid:"default",preparing:"secondary",ready:"outline",completed:"default"};return p.jsx(Vs,{variant:$[G]||"default",children:G.toUpperCase()})};return r||!t||e!=="admin"?null:p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl print:p-0",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8 print:hidden",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Orders Report"}),p.jsx("p",{className:"text-muted-foreground",children:"View and manage all orders"})]}),p.jsxs(Be,{onClick:B,children:[p.jsx(bM,{className:"h-4 w-4 mr-2"}),"Print Report"]})]}),p.jsx("div",{className:"hidden print:block mb-8",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ALAN - Orders Report"}),p.jsxs("p",{className:"text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]}),C!=="all"&&p.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:["Restaurant: ",((W=h.find(G=>G.id===C))==null?void 0:W.name)||"Selected Restaurant"]}),A!=="all"&&p.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Status Filter: ",A.toUpperCase()]}),I!=="all"&&p.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date Filter: ",I==="today"?"Today":I==="week"?"Last 7 Days":I==="month"?"Last 30 Days":I]})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[p.jsxs(We,{children:[p.jsx(or,{children:p.jsx(hr,{className:"text-sm",children:"Total Orders"})}),p.jsx(bt,{children:p.jsx("p",{className:"text-3xl font-bold",children:l.length})})]}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsx(hr,{className:"text-sm",children:"Total Revenue"})}),p.jsx(bt,{children:p.jsxs("p",{className:"text-3xl font-bold",children:[P.toLocaleString()," MMK"]})})]}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsx(hr,{className:"text-sm",children:"Average Order"})}),p.jsx(bt,{children:p.jsxs("p",{className:"text-3xl font-bold",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]})})]})]}),p.jsx(We,{className:"mb-6 print:hidden",children:p.jsx(bt,{className:"pt-6",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(ct,{placeholder:"Search orders...",value:v,onChange:G=>b(G.target.value),className:"pl-10"})]}),p.jsxs(ms,{value:C,onValueChange:S,children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Filter by restaurant"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All Restaurants"}),h.map(G=>p.jsx(tt,{value:G.id,children:G.name},G.id))]})]}),p.jsxs(ms,{value:A,onValueChange:E,children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Filter by status"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All Statuses"}),p.jsx(tt,{value:"paid",children:"Paid"}),p.jsx(tt,{value:"preparing",children:"Preparing"}),p.jsx(tt,{value:"ready",children:"Ready"}),p.jsx(tt,{value:"completed",children:"Completed"})]})]}),p.jsxs(ms,{value:I,onValueChange:R,children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Filter by date"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All Time"}),p.jsx(tt,{value:"today",children:"Today"}),p.jsx(tt,{value:"week",children:"Last 7 Days"}),p.jsx(tt,{value:"month",children:"Last 30 Days"})]})]}),p.jsxs(Be,{variant:"outline",onClick:()=>{b(""),S("all"),E("all"),R("all")},children:[p.jsx(vv,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})})}),C==="all"&&x.length>0&&p.jsxs(We,{className:"mb-6",children:[p.jsx(or,{children:p.jsxs(hr,{className:"flex items-center gap-2",children:[p.jsx(vv,{className:"h-5 w-5"}),"Restaurant Performance Summary"]})}),p.jsx(bt,{children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(G=>p.jsx(We,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:p.jsxs(bt,{className:"p-4",children:[p.jsx("h3",{className:"font-semibold text-lg mb-2 text-blue-900",children:G.restaurant_name}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-600",children:"Total Orders:"}),p.jsx("span",{className:"font-medium",children:G.total_orders})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),p.jsxs("span",{className:"font-bold text-green-600",children:[G.total_revenue.toLocaleString()," MMK"]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),p.jsxs("span",{className:"font-medium",children:[Math.round(G.avg_order_value).toLocaleString()," MMK"]})]})]}),p.jsx(Be,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>S(G.restaurant_id),children:"View Orders"})]})},G.restaurant_id))})})]}),C!=="all"&&p.jsx(We,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:p.jsx(bt,{className:"pt-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:[((q=h.find(G=>G.id===C))==null?void 0:q.name)||"Selected Restaurant"," Performance"]}),p.jsx("p",{className:"text-sm text-green-700",children:"Filtered results for selected restaurant"})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xl font-bold text-green-800",children:l.length}),p.jsx("p",{className:"text-xs text-green-600",children:"Orders"})]}),p.jsxs("div",{children:[p.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[P.toLocaleString()," MMK"]}),p.jsx("p",{className:"text-xs text-green-600",children:"Revenue"})]}),p.jsxs("div",{children:[p.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]}),p.jsx("p",{className:"text-xs text-green-600",children:"Avg Order"})]})]})]})})}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{className:"flex items-center justify-between",children:[p.jsx("span",{children:"Order Details"}),p.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:C!=="all"?`Showing ${l.length} orders for ${(K=h.find(G=>G.id===C))==null?void 0:K.name}`:`Showing ${l.length} of ${s.length} orders`})]})}),p.jsx(bt,{children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs(Md,{children:[p.jsx(kd,{children:p.jsxs(gi,{children:[p.jsx(Xt,{children:"Order ID"}),p.jsx(Xt,{children:"Customer"}),p.jsx(Xt,{children:"Restaurant"}),p.jsx(Xt,{children:"Type"}),p.jsx(Xt,{children:"Amount"}),p.jsx(Xt,{children:"Status"}),p.jsx(Xt,{children:"Date"})]})}),p.jsx(Pd,{children:l.length>0?l.map(G=>p.jsxs(gi,{children:[p.jsx(zt,{className:"font-mono text-xs",children:G.id.substring(0,8)}),p.jsx(zt,{children:p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"font-medium",children:G.customer_name}),G.customer_email!=="Email not available"&&p.jsx("div",{className:"text-xs text-muted-foreground",children:G.customer_email}),G.customer_phone!=="Phone not available"&&p.jsx("div",{className:"text-xs text-muted-foreground",children:G.customer_phone})]})}),p.jsx(zt,{children:G.restaurant_name}),p.jsx(zt,{className:"capitalize",children:G.order_type}),p.jsxs(zt,{className:"font-semibold",children:[Number(G.total_amount).toLocaleString()," MMK"]}),p.jsx(zt,{children:L(G.status)}),p.jsx(zt,{children:Xz(G.created_at)})]},G.id)):p.jsx(gi,{children:p.jsx(zt,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:C!=="all"?`No orders found for ${((ie=h.find(G=>G.id===C))==null?void 0:ie.name)||"selected restaurant"}`:"No orders found matching the current filters"})})})]})})})]})]})})},Kz=()=>{const{user:t,userRole:e,loading:r}=Mn(),n=hn(),[s,o]=N.useState([]),[l,u]=N.useState([]),[h,f]=N.useState(""),[x,y]=N.useState("all"),[v,b]=N.useState(!1),[A,E]=N.useState(null),[I,R]=N.useState(""),[C,S]=N.useState(null),[O,k]=N.useState(null),[F,B]=N.useState(""),[P,L]=N.useState(""),[W,q]=N.useState("customer"),[K,ie]=N.useState([]),[G,$]=N.useState(!1),[re,Z]=N.useState("customer"),[Q,H]=N.useState(""),[te,ce]=N.useState(""),[ae,oe]=N.useState(""),[ue,ke]=N.useState(""),[ye,_e]=N.useState(null);N.useEffect(()=>{!r&&(!t||e!=="admin")&&(Ce.error("Admin access required"),n("/auth"))},[t,e,r,n]),N.useEffect(()=>{t&&e==="admin"&&(Re(),Xe())},[t,e]),N.useEffect(()=>{const he=h.toLowerCase(),Pe=s.filter(Se=>{const vt=Se.full_name.toLowerCase().includes(he)||Se.role.toLowerCase().includes(he)||Se.phone&&Se.phone.toLowerCase().includes(he)||Se.user_id.toLowerCase().includes(he),ve=x==="all"?!0:Se.role===x;return vt&&ve});u(Pe)},[h,x,s]);const Re=async()=>{console.log(" Fetching users and details via RPC...");try{const{data:he,error:Pe}=await xe.from("user_roles").select("user_id, role, created_at").order("created_at",{ascending:!1});if(Pe){console.error(" Error fetching user roles:",Pe),Ce.error("Failed to load users");return}if(!he||he.length===0){console.log(" No users found in user_roles table"),o([]),u([]);return}const Se=he.map(it=>it.user_id);let vt=[];try{let it=await xe.rpc("get_order_customers_fallback",{customer_ids:Se});it.error&&(console.warn(" get_order_customers_fallback not available, trying get_order_customers:",it.error.message),it=await xe.rpc("get_order_customers",{customer_ids:Se})),it.error?(console.error(" Error fetching user details via RPC:",it.error),Ce.error("Failed to load some user details")):vt=it.data||[]}catch(it){console.error(" Unexpected RPC error:",it)}const ve=new Map(vt.map(it=>[it.user_id,it])),jr=he.map(it=>{var St;const Zt=ve.get(it.user_id),ea=(St=Zt==null?void 0:Zt.full_name)!=null&&St.trim()?Zt.full_name.trim():`User ${it.user_id.substring(0,8)}`;return{user_id:it.user_id,full_name:ea,phone:(Zt==null?void 0:Zt.phone)||null,role:it.role,created_at:it.created_at}});console.log(" Final users data (via RPC):",{total:jr.length,withRealNames:jr.filter(it=>!it.full_name.startsWith("User ")).length,withPhones:jr.filter(it=>it.phone).length}),o(jr),u(jr)}catch(he){console.error(" Unexpected error in fetchUsers:",he),Ce.error("An unexpected error occurred while loading users")}},Xe=async()=>{try{const{data:he,error:Pe}=await xe.from("restaurants").select("id, name").order("name");if(Pe){console.error(" Error fetching restaurants:",Pe);return}ie(he||[])}catch(he){console.error(" Unexpected error fetching restaurants:",he)}},Ye=async he=>{var Pe;console.log(" Opening user details for:",he.user_id.substring(0,8)),E(he),B(he.full_name),L(he.phone||""),q(he.role);try{let Se=await xe.rpc("get_order_customers_fallback",{customer_ids:[he.user_id]});Se.error&&(Se=await xe.rpc("get_order_customers",{customer_ids:[he.user_id]})),!Se.error&&Se.data&&Se.data.length>0?R(Se.data[0].email||"Email not available"):R("Email not available")}catch{R("Email not available")}if(S(null),k(null),he.role==="restaurant_owner")try{const{data:Se,error:vt}=await xe.from("restaurants").select("id, name").eq("owner_id",he.user_id).limit(1).maybeSingle();if(!vt&&Se)S(Se.id),k(Se.name||"Linked Restaurant");else{const{data:ve,error:jr}=await xe.from("restaurant_owners").select("restaurant_id, restaurants(name)").eq("user_id",he.user_id).maybeSingle();!jr&&ve&&(S(ve.restaurant_id),k(((Pe=ve.restaurants)==null?void 0:Pe.name)||"Linked Restaurant"))}}catch(Se){console.error(" Error fetching restaurant for owner:",Se)}b(!0)},Ue=async()=>{if(A)try{const{error:he}=await xe.from("profiles").update({full_name:F.trim(),phone:P.trim()||null,updated_at:new Date().toISOString()}).eq("id",A.user_id);if(he){console.error(" Error updating profile:",he),Ce.error("Failed to update user profile");return}if(W!==A.role){const{error:Pe}=await xe.from("user_roles").update({role:W}).eq("user_id",A.user_id);if(Pe){console.error(" Error updating role:",Pe),Ce.error("Failed to update user role");return}if(W==="restaurant_owner"&&C){const{error:Se}=await xe.from("restaurant_owners").upsert({user_id:A.user_id,restaurant_id:C,created_at:new Date().toISOString()});if(Se){console.error(" Error linking restaurant:",Se),Ce.error("Failed to link restaurant");return}}else A.role==="restaurant_owner"&&W!=="restaurant_owner"&&await xe.from("restaurant_owners").delete().eq("user_id",A.user_id)}Ce.success("User updated successfully"),b(!1),Re()}catch(he){console.error(" Unexpected error updating user:",he),Ce.error("An unexpected error occurred")}},nt=async()=>{if(A&&confirm("Are you sure you want to delete this user? This action cannot be undone."))try{console.log(" Deleting user:",A.user_id.substring(0,8),"with role:",A.role),console.log(" Checking for restaurant ownership...");const{data:he,error:Pe}=await xe.from("restaurant_owners").select("restaurant_id").eq("user_id",A.user_id);if(!Pe&&he&&he.length>0){console.log(" Removing restaurant ownership links...");const{error:ve}=await xe.from("restaurant_owners").delete().eq("user_id",A.user_id);if(ve){console.error(" Error deleting restaurant ownership:",ve),Ce.error(`Failed to remove restaurant links: ${ve.message}`);return}console.log(" Restaurant ownership removed")}console.log(" Deleting user role...");const{error:Se}=await xe.from("user_roles").delete().eq("user_id",A.user_id);if(Se){console.error(" Error deleting user role:",Se),Ce.error(`Failed to delete user role: ${Se.message}`);return}console.log(" User role deleted"),console.log(" Deleting user profile...");const{error:vt}=await xe.from("profiles").delete().eq("id",A.user_id);if(vt){console.error(" Error deleting profile:",vt),Ce.error(`Failed to delete user profile: ${vt.message}`);return}console.log(" User profile deleted");try{console.log(" Attempting to delete auth user...");const{error:ve}=await xe.auth.admin.deleteUser(A.user_id);ve?console.warn(" Could not delete auth user (service role required):",ve.message):console.log(" Auth user deleted")}catch(ve){console.warn(" Auth user deletion not available:",ve)}console.log(" User deletion complete"),Ce.success("User deleted successfully"),b(!1),setTimeout(()=>{Re()},500)}catch(he){console.error(" Unexpected error deleting user:",he),Ce.error("An unexpected error occurred")}},Ve=async()=>{var he,Pe,Se;if(!Q.trim()||!te.trim()||!ae.trim()){Ce.error("Please fill in all required fields");return}try{console.log(" Creating user without auth signup to prevent session interference..."),console.log(" Selected role for new user:",re);const ve=(he=(await xe.auth.getSession()).data.session)==null?void 0:he.user;if(!ve){Ce.error("Admin session not found");return}console.log(" Current admin:",ve.email,"ID:",ve.id.substring(0,8)),console.log(" Creating user via edge function...");const{data:jr,error:it}=await xe.functions.invoke("admin-create-user",{body:{email:te.trim(),password:ae.trim(),full_name:Q.trim(),phone:ue.trim()||null,role:re,restaurant_id:ye}});if(it){console.error(" Edge function error:",it),Ce.error(it.message||"Failed to create user");return}console.log(" Edge function result:",jr);const Zt=await xe.auth.getSession();((Se=(Pe=Zt.data.session)==null?void 0:Pe.user)==null?void 0:Se.id)===ve.id?console.log(" Admin session remained intact:",Zt.data.session.user.email):console.error(" Admin session was somehow changed!"),console.log(" User creation complete without session interference"),Ce.success(`${re.charAt(0).toUpperCase()+re.slice(1)} user created successfully`),$(!1),Z("customer"),H(""),ce(""),oe(""),ke(""),_e(null),Re()}catch(vt){console.error(" Unexpected error creating user:",vt),Ce.error("An unexpected error occurred")}},lr=he=>{const Pe={admin:{variant:"destructive",icon:vh},restaurant_owner:{variant:"default",icon:Fs},customer:{variant:"secondary",icon:Fs}},Se=Pe[he]||Pe.customer,vt=Se.icon;return p.jsxs(Vs,{variant:Se.variant,className:"flex items-center gap-1 w-fit",children:[p.jsx(vt,{className:"h-3 w-3"}),he.replace("_"," ").toUpperCase()]})},Nr=(()=>{const he=s.filter(vt=>vt.role==="admin").length,Pe=s.filter(vt=>vt.role==="restaurant_owner").length,Se=s.filter(vt=>vt.role==="customer").length;return{admins:he,owners:Pe,customers:Se}})();return r||!t||e!=="admin"?null:p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(Be,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:p.jsx(Ic,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"User Management"}),p.jsx("p",{className:"text-muted-foreground",children:"Manage all registered users"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{className:"text-sm flex items-center gap-2",children:[p.jsx(vh,{className:"h-4 w-4 text-destructive"}),"Admins"]})}),p.jsx(bt,{children:p.jsx("p",{className:"text-3xl font-bold",children:Nr.admins})})]}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{className:"text-sm flex items-center gap-2",children:[p.jsx(Fs,{className:"h-4 w-4 text-primary"}),"Restaurant Owners"]})}),p.jsx(bt,{children:p.jsx("p",{className:"text-3xl font-bold",children:Nr.owners})})]}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{className:"text-sm flex items-center gap-2",children:[p.jsx(Fs,{className:"h-4 w-4 text-secondary"}),"Customers"]})}),p.jsx(bt,{children:p.jsx("p",{className:"text-3xl font-bold",children:Nr.customers})})]})]}),p.jsx(We,{className:"mb-6",children:p.jsx(bt,{className:"pt-6",children:p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[p.jsxs("div",{className:"relative md:flex-1",children:[p.jsx(Cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),p.jsx(ct,{placeholder:"Search users...",value:h,onChange:he=>f(he.target.value),className:"pl-10"})]}),p.jsx("div",{className:"md:w-64",children:p.jsxs(ms,{value:x,onValueChange:he=>y(he),children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Filter by role"})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"all",children:"All"}),p.jsx(tt,{value:"admin",children:"Admin"}),p.jsx(tt,{value:"restaurant_owner",children:"Restaurant Owner"}),p.jsx(tt,{value:"customer",children:"Customer"})]})]})})]})})}),p.jsxs(We,{children:[p.jsx(or,{children:p.jsxs(hr,{children:["All Users (",l.length,")"]})}),p.jsx(bt,{children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs(Md,{children:[p.jsx(kd,{children:p.jsxs(gi,{children:[p.jsx(Xt,{children:"Name"}),p.jsx(Xt,{children:"Phone"}),p.jsx(Xt,{children:"Role"}),p.jsx(Xt,{children:"Registered"}),p.jsx(Xt,{className:"text-right",children:"Actions"})]})}),p.jsx(Pd,{children:l.map(he=>p.jsxs(gi,{children:[p.jsx(zt,{className:"font-medium",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{children:he.full_name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:he.phone?he.phone:`ID: ${he.user_id.substring(0,8)}...`})]})}),p.jsx(zt,{children:p.jsx("span",{className:"text-sm",children:he.phone||"N/A"})}),p.jsx(zt,{children:lr(he.role)}),p.jsx(zt,{children:new Date(he.created_at).toLocaleDateString()}),p.jsx(zt,{className:"text-right",children:p.jsx(Be,{variant:"ghost",size:"sm",onClick:()=>Ye(he),children:"View Details"})})]},he.user_id))})]})})})]}),p.jsx(wi,{open:v,onOpenChange:b,children:p.jsxs(Ys,{className:"max-w-2xl",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:"User Details"})}),A&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"detail-name",children:"Full Name"}),p.jsx(ct,{id:"detail-name",value:F,onChange:he=>B(he.target.value)})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"detail-phone",children:"Phone"}),p.jsx(ct,{id:"detail-phone",value:P,onChange:he=>L(he.target.value)})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"detail-email",children:"Email"}),p.jsx(ct,{id:"detail-email",value:I,disabled:!0,className:"bg-muted"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"detail-role",children:"Role"}),p.jsxs(ms,{value:W,onValueChange:q,children:[p.jsx(Wn,{children:p.jsx(gs,{})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"customer",children:"Customer"}),p.jsx(tt,{value:"restaurant_owner",children:"Restaurant Owner"}),p.jsx(tt,{value:"admin",children:"Admin"})]})]})]})]}),W==="restaurant_owner"&&C&&O&&p.jsxs("div",{children:[p.jsx(Ke,{children:"Linked Restaurant"}),p.jsx("p",{className:"mt-1 text-sm font-medium",children:O})]}),p.jsx("div",{className:"border-t pt-4",children:p.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx(Ke,{className:"text-muted-foreground",children:"User ID"}),p.jsx("p",{className:"font-mono",children:A.user_id})]}),p.jsxs("div",{children:[p.jsx(Ke,{className:"text-muted-foreground",children:"Registration Date"}),p.jsx("p",{children:new Date(A.created_at).toLocaleDateString()})]})]})})]}),p.jsxs(rg,{className:"flex justify-between",children:[p.jsxs(Be,{variant:"destructive",onClick:nt,className:"flex items-center gap-2",children:[p.jsx(xx,{className:"h-4 w-4"}),"Delete User"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Be,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),p.jsxs(Be,{onClick:Ue,className:"flex items-center gap-2",children:[p.jsx(NC,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),p.jsx(wi,{open:G,onOpenChange:$,children:p.jsxs(Ys,{className:"max-w-2xl",children:[p.jsx(Yi,{children:p.jsx(Xi,{children:"Create New User"})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-name",children:"Full Name *"}),p.jsx(ct,{id:"create-name",value:Q,onChange:he=>H(he.target.value),placeholder:"Enter full name"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-phone",children:"Phone"}),p.jsx(ct,{id:"create-phone",value:ue,onChange:he=>ke(he.target.value),placeholder:"Enter phone number"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-email",children:"Email *"}),p.jsx(ct,{id:"create-email",type:"email",value:te,onChange:he=>ce(he.target.value),placeholder:"Enter email address"})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-password",children:"Password *"}),p.jsx(ct,{id:"create-password",type:"password",value:ae,onChange:he=>oe(he.target.value),placeholder:"Enter password"})]})]}),p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-role",children:"Role *"}),p.jsxs(ms,{value:re,onValueChange:he=>Z(he),children:[p.jsx(Wn,{children:p.jsx(gs,{})}),p.jsxs(Gn,{children:[p.jsx(tt,{value:"customer",children:"Customer"}),p.jsx(tt,{value:"restaurant_owner",children:"Restaurant Owner"}),p.jsx(tt,{value:"admin",children:"Admin"})]})]})]}),re==="restaurant_owner"&&p.jsxs("div",{children:[p.jsx(Ke,{htmlFor:"create-restaurant",children:"Link to Restaurant"}),p.jsxs(ms,{value:ye||"",onValueChange:_e,children:[p.jsx(Wn,{children:p.jsx(gs,{placeholder:"Select a restaurant (optional)"})}),p.jsx(Gn,{children:K.map(he=>p.jsx(tt,{value:he.id,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(wh,{className:"h-4 w-4"}),he.name]})},he.id))})]}),p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"You can link the user to a restaurant later if needed"})]}),p.jsx("div",{className:"bg-muted p-3 rounded-md",children:p.jsx("p",{className:"text-sm text-muted-foreground",children:"* Required fields. The user will receive an email confirmation to activate their account."})})]}),p.jsxs(rg,{children:[p.jsx(Be,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),p.jsxs(Be,{onClick:Ve,className:"flex items-center gap-2",children:[p.jsx(Ra,{className:"h-4 w-4"}),"Create User"]})]})]})})]})})},Qz=()=>{const t=Xo();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),p.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Zz=new q6,Jz=()=>p.jsx(Q6,{client:Zz,children:p.jsx(SL,{children:p.jsxs(S6,{children:[p.jsx(ck,{}),p.jsx(zk,{}),p.jsx(Xj,{children:p.jsxs(zj,{children:[p.jsx(qr,{path:"/",element:p.jsx($7,{})}),p.jsx(qr,{path:"/auth",element:p.jsx(l9,{})}),p.jsx(qr,{path:"/home",element:p.jsx(f9,{})}),p.jsx(qr,{path:"/restaurant/:id",element:p.jsx(yB,{})}),p.jsx(qr,{path:"/payment",element:p.jsx(RB,{})}),p.jsx(qr,{path:"/confirmation",element:p.jsx(UB,{})}),p.jsx(qr,{path:"/orders",element:p.jsx(zB,{})}),p.jsx(qr,{path:"/profile",element:p.jsx(tF,{})}),p.jsx(qr,{path:"/dashboard",element:p.jsx(Vz,{})}),p.jsx(qr,{path:"/admin",element:p.jsx(Hz,{})}),p.jsx(qr,{path:"/admin/restaurants",element:p.jsx(Gz,{})}),p.jsx(qr,{path:"/admin/owners",element:p.jsx(Yz,{})}),p.jsx(qr,{path:"/admin/orders",element:p.jsx(qz,{})}),p.jsx(qr,{path:"/admin/users",element:p.jsx(Kz,{})}),p.jsx(qr,{path:"*",element:p.jsx(Qz,{})})]})})]})})});UE(document.getElementById("root")).render(p.jsx(Jz,{}));
