var yw=t=>{throw TypeError(t)};var bm=(t,e,r)=>e.has(t)||yw("Cannot "+r);var ce=(t,e,r)=>(bm(t,e,"read from private field"),r?r.call(t):e.get(t)),yt=(t,e,r)=>e.has(t)?yw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ke=(t,e,r,n)=>(bm(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Yr=(t,e,r)=>(bm(t,e,"access private method"),r);var Zd=(t,e,r,n)=>({set _(s){Ke(t,e,s,r)},get _(){return ce(t,e,n)}});function Ig(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Gb={exports:{}},i0={},Yb={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd=Symbol.for("react.element"),vR=Symbol.for("react.portal"),bR=Symbol.for("react.fragment"),_R=Symbol.for("react.strict_mode"),CR=Symbol.for("react.profiler"),ER=Symbol.for("react.provider"),SR=Symbol.for("react.context"),AR=Symbol.for("react.forward_ref"),NR=Symbol.for("react.suspense"),TR=Symbol.for("react.memo"),IR=Symbol.for("react.lazy"),ww=Symbol.iterator;function RR(t){return t===null||typeof t!="object"?null:(t=ww&&t[ww]||t["@@iterator"],typeof t=="function"?t:null)}var qb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xb=Object.assign,Kb={};function Ic(t,e,r){this.props=t,this.context=e,this.refs=Kb,this.updater=r||qb}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qb(){}Qb.prototype=Ic.prototype;function Og(t,e,r){this.props=t,this.context=e,this.refs=Kb,this.updater=r||qb}var Mg=Og.prototype=new Qb;Mg.constructor=Og;Xb(Mg,Ic.prototype);Mg.isPureReactComponent=!0;var vw=Array.isArray,Zb=Object.prototype.hasOwnProperty,jg={current:null},Jb={key:!0,ref:!0,__self:!0,__source:!0};function e_(t,e,r){var n,s={},i=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)Zb.call(e,n)&&!Jb.hasOwnProperty(n)&&(s[n]=e[n]);var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){for(var m=Array(u),h=0;h<u;h++)m[h]=arguments[h+2];s.children=m}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)s[n]===void 0&&(s[n]=u[n]);return{$$typeof:Cd,type:t,key:i,ref:l,props:s,_owner:jg.current}}function OR(t,e){return{$$typeof:Cd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cd}function MR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var bw=/\/+/g;function _m(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MR(""+t.key):e.toString(36)}function Lf(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Cd:case vR:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+_m(l,0):n,vw(s)?(r="",t!=null&&(r=t.replace(bw,"$&/")+"/"),Lf(s,e,r,"",function(h){return h})):s!=null&&(kg(s)&&(s=OR(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(bw,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",vw(t))for(var u=0;u<t.length;u++){i=t[u];var m=n+_m(i,u);l+=Lf(i,e,r,m,s)}else if(m=RR(t),typeof m=="function")for(t=m.call(t),u=0;!(i=t.next()).done;)i=i.value,m=n+_m(i,u++),l+=Lf(i,e,r,m,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Jd(t,e,r){if(t==null)return t;var n=[],s=0;return Lf(t,n,"","",function(i){return e.call(r,i,s++)}),n}function jR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},Bf={transition:null},kR={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:Bf,ReactCurrentOwner:jg};function t_(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:Jd,forEach:function(t,e,r){Jd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jd(t,function(){e++}),e},toArray:function(t){return Jd(t,function(e){return e})||[]},only:function(t){if(!kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Ic;lt.Fragment=bR;lt.Profiler=CR;lt.PureComponent=Og;lt.StrictMode=_R;lt.Suspense=NR;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kR;lt.act=t_;lt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Xb({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=jg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(m in e)Zb.call(e,m)&&!Jb.hasOwnProperty(m)&&(n[m]=e[m]===void 0&&u!==void 0?u[m]:e[m])}var m=arguments.length-2;if(m===1)n.children=r;else if(1<m){u=Array(m);for(var h=0;h<m;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:Cd,type:t.type,key:s,ref:i,props:n,_owner:l}};lt.createContext=function(t){return t={$$typeof:SR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ER,_context:t},t.Consumer=t};lt.createElement=e_;lt.createFactory=function(t){var e=e_.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:AR,render:t}};lt.isValidElement=kg;lt.lazy=function(t){return{$$typeof:IR,_payload:{_status:-1,_result:t},_init:jR}};lt.memo=function(t,e){return{$$typeof:TR,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=Bf.transition;Bf.transition={};try{t()}finally{Bf.transition=e}};lt.unstable_act=t_;lt.useCallback=function(t,e){return hn.current.useCallback(t,e)};lt.useContext=function(t){return hn.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};lt.useEffect=function(t,e){return hn.current.useEffect(t,e)};lt.useId=function(){return hn.current.useId()};lt.useImperativeHandle=function(t,e,r){return hn.current.useImperativeHandle(t,e,r)};lt.useInsertionEffect=function(t,e){return hn.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return hn.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return hn.current.useMemo(t,e)};lt.useReducer=function(t,e,r){return hn.current.useReducer(t,e,r)};lt.useRef=function(t){return hn.current.useRef(t)};lt.useState=function(t){return hn.current.useState(t)};lt.useSyncExternalStore=function(t,e,r){return hn.current.useSyncExternalStore(t,e,r)};lt.useTransition=function(){return hn.current.useTransition()};lt.version="18.3.1";Yb.exports=lt;var E=Yb.exports;const me=Rg(E),Pg=Ig({__proto__:null,default:me},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PR=E,DR=Symbol.for("react.element"),LR=Symbol.for("react.fragment"),BR=Object.prototype.hasOwnProperty,FR=PR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UR={key:!0,ref:!0,__self:!0,__source:!0};function r_(t,e,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)BR.call(e,n)&&!UR.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:DR,type:t,key:i,ref:l,props:s,_owner:FR.current}}i0.Fragment=LR;i0.jsx=r_;i0.jsxs=r_;Gb.exports=i0;var d=Gb.exports,n_={exports:{}},es={},s_={exports:{}},i_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,K){var ne=Z.length;Z.push(K);e:for(;0<ne;){var pe=ne-1>>>1,ae=Z[pe];if(0<s(ae,K))Z[pe]=K,Z[ne]=ae,ne=pe;else break e}}function r(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var K=Z[0],ne=Z.pop();if(ne!==K){Z[0]=ne;e:for(var pe=0,ae=Z.length,le=ae>>>1;pe<le;){var fe=2*(pe+1)-1,ze=Z[fe],ve=fe+1,be=Z[ve];if(0>s(ze,ne))ve<ae&&0>s(be,ze)?(Z[pe]=be,Z[ve]=ne,pe=ve):(Z[pe]=ze,Z[fe]=ne,pe=fe);else if(ve<ae&&0>s(be,ne))Z[pe]=be,Z[ve]=ne,pe=ve;else break e}}return K}function s(Z,K){var ne=Z.sortIndex-K.sortIndex;return ne!==0?ne:Z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var m=[],h=[],x=1,y=null,v=3,b=!1,S=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Z){for(var K=r(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=Z)n(h),K.sortIndex=K.expirationTime,e(m,K);else break;K=r(h)}}function O(Z){if(C=!1,N(Z),!S)if(r(m)!==null)S=!0,te(k);else{var K=r(h);K!==null&&J(O,K.startTime-Z)}}function k(Z,K){S=!1,C&&(C=!1,R(P),P=-1),b=!0;var ne=v;try{for(N(K),y=r(m);y!==null&&(!(y.expirationTime>K)||Z&&!Y());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,v=y.priorityLevel;var ae=pe(y.expirationTime<=K);K=t.unstable_now(),typeof ae=="function"?y.callback=ae:y===r(m)&&n(m),N(K)}else n(m);y=r(m)}if(y!==null)var le=!0;else{var fe=r(h);fe!==null&&J(O,fe.startTime-K),le=!1}return le}finally{y=null,v=ne,b=!1}}var F=!1,B=null,P=-1,j=5,W=-1;function Y(){return!(t.unstable_now()-W<j)}function z(){if(B!==null){var Z=t.unstable_now();W=Z;var K=!0;try{K=B(!0,Z)}finally{K?X():(F=!1,B=null)}}else F=!1}var X;if(typeof A=="function")X=function(){A(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=z,X=function(){H.postMessage(null)}}else X=function(){I(z,0)};function te(Z){B=Z,F||(F=!0,X())}function J(Z,K){P=I(function(){Z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,te(k))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var ne=v;v=K;try{return Z()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,K){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ne=v;v=Z;try{return K()}finally{v=ne}},t.unstable_scheduleCallback=function(Z,K,ne){var pe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,Z){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ne+ae,Z={id:x++,callback:K,priorityLevel:Z,startTime:ne,expirationTime:ae,sortIndex:-1},ne>pe?(Z.sortIndex=ne,e(h,Z),r(m)===null&&Z===r(h)&&(C?(R(P),P=-1):C=!0,J(O,ne-pe))):(Z.sortIndex=ae,e(m,Z),S||b||(S=!0,te(k))),Z},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(Z){var K=v;return function(){var ne=v;v=K;try{return Z.apply(this,arguments)}finally{v=ne}}}})(i_);s_.exports=i_;var zR=s_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR=E,Qn=zR;function xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o_=new Set,Lu={};function qa(t,e){cc(t,e),cc(t+"Capture",e)}function cc(t,e){for(Lu[t]=e,t=0;t<e.length;t++)o_.add(e[t])}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,HR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},Cw={};function $R(t){return Op.call(Cw,t)?!0:Op.call(_w,t)?!1:HR.test(t)?Cw[t]=!0:(_w[t]=!0,!1)}function WR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GR(t,e,r,n){if(e===null||typeof e>"u"||WR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,r,n,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$r[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$r[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$r[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$r[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$r[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$r[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$r[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$r[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$r[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dg=/[\-:]([a-z])/g;function Lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dg,Lg);$r[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dg,Lg);$r[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dg,Lg);$r[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$r[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});$r.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$r[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bg(t,e,r,n){var s=$r.hasOwnProperty(e)?$r[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GR(e,r,s,n)&&(r=null),n||s===null?$R(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Xi=VR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ef=Symbol.for("react.element"),Al=Symbol.for("react.portal"),Nl=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),a_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),Ug=Symbol.for("react.forward_ref"),jp=Symbol.for("react.suspense"),kp=Symbol.for("react.suspense_list"),zg=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),c_=Symbol.for("react.offscreen"),Ew=Symbol.iterator;function Jc(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Cm;function fu(t){if(Cm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Cm=e&&e[1]||""}return`
`+Cm+t}var Em=!1;function Sm(t,e){if(!t||Em)return"";Em=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){n=h}t.call(e.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,u=i.length-1;1<=l&&0<=u&&s[l]!==i[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==i[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==i[u]){var m=`
`+s[l].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=l&&0<=u);break}}}finally{Em=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?fu(t):""}function YR(t){switch(t.tag){case 5:return fu(t.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return t=Sm(t.type,!1),t;case 11:return t=Sm(t.type.render,!1),t;case 1:return t=Sm(t.type,!0),t;default:return""}}function Pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nl:return"Fragment";case Al:return"Portal";case Mp:return"Profiler";case Fg:return"StrictMode";case jp:return"Suspense";case kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case l_:return(t.displayName||"Context")+".Consumer";case a_:return(t._context.displayName||"Context")+".Provider";case Ug:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zg:return e=t.displayName||null,e!==null?e:Pp(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return Pp(t(e))}catch{}}return null}function qR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pp(e);case 8:return e===Fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XR(t){var e=u_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tf(t){t._valueTracker||(t._valueTracker=XR(t))}function d_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=u_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function sh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dp(t,e){var r=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Sw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f_(t,e){e=e.checked,e!=null&&Bg(t,"checked",e,!1)}function Lp(t,e){f_(t,e);var r=Bo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Bp(t,e.type,Bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Aw(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Bp(t,e,r){(e!=="number"||sh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var hu=Array.isArray;function Vl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bo(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(xe(92));if(hu(r)){if(1<r.length)throw Error(xe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bo(r)}}function h_(t,e){var r=Bo(e.value),n=Bo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Tw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rf,p_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rf=rf||document.createElement("div"),rf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KR=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(t){KR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bu[e]=bu[t]})});function g_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||bu.hasOwnProperty(t)&&bu[t]?(""+e).trim():e+"px"}function x_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=g_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var QR=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(t,e){if(e){if(QR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function Vp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function Vg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $p=null,Hl=null,$l=null;function Iw(t){if(t=Ad(t)){if(typeof $p!="function")throw Error(xe(280));var e=t.stateNode;e&&(e=u0(e),$p(t.stateNode,t.type,e))}}function y_(t){Hl?$l?$l.push(t):$l=[t]:Hl=t}function w_(){if(Hl){var t=Hl,e=$l;if($l=Hl=null,Iw(t),e)for(t=0;t<e.length;t++)Iw(e[t])}}function v_(t,e){return t(e)}function b_(){}var Am=!1;function __(t,e,r){if(Am)return t(e,r);Am=!0;try{return v_(t,e,r)}finally{Am=!1,(Hl!==null||$l!==null)&&(b_(),w_())}}function Fu(t,e){var r=t.stateNode;if(r===null)return null;var n=u0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(xe(231,e,typeof r));return r}var Wp=!1;if(zi)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Wp=!1}function ZR(t,e,r,n,s,i,l,u,m){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(x){this.onError(x)}}var _u=!1,ih=null,oh=!1,Gp=null,JR={onError:function(t){_u=!0,ih=t}};function eO(t,e,r,n,s,i,l,u,m){_u=!1,ih=null,ZR.apply(JR,arguments)}function tO(t,e,r,n,s,i,l,u,m){if(eO.apply(this,arguments),_u){if(_u){var h=ih;_u=!1,ih=null}else throw Error(xe(198));oh||(oh=!0,Gp=h)}}function Xa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function C_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rw(t){if(Xa(t)!==t)throw Error(xe(188))}function rO(t){var e=t.alternate;if(!e){if(e=Xa(t),e===null)throw Error(xe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Rw(s),t;if(i===n)return Rw(s),e;i=i.sibling}throw Error(xe(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,u=s.child;u;){if(u===r){l=!0,r=s,n=i;break}if(u===n){l=!0,n=s,r=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===r){l=!0,r=i,n=s;break}if(u===n){l=!0,n=i,r=s;break}u=u.sibling}if(!l)throw Error(xe(189))}}if(r.alternate!==n)throw Error(xe(190))}if(r.tag!==3)throw Error(xe(188));return r.stateNode.current===r?t:e}function E_(t){return t=rO(t),t!==null?S_(t):null}function S_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S_(t);if(e!==null)return e;t=t.sibling}return null}var A_=Qn.unstable_scheduleCallback,Ow=Qn.unstable_cancelCallback,nO=Qn.unstable_shouldYield,sO=Qn.unstable_requestPaint,mr=Qn.unstable_now,iO=Qn.unstable_getCurrentPriorityLevel,Hg=Qn.unstable_ImmediatePriority,N_=Qn.unstable_UserBlockingPriority,ah=Qn.unstable_NormalPriority,oO=Qn.unstable_LowPriority,T_=Qn.unstable_IdlePriority,o0=null,mi=null;function aO(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(o0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:uO,lO=Math.log,cO=Math.LN2;function uO(t){return t>>>=0,t===0?32:31-(lO(t)/cO|0)|0}var nf=64,sf=4194304;function mu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var u=l&~s;u!==0?n=mu(u):(i&=l,i!==0&&(n=mu(i)))}else l=r&~s,l!==0?n=mu(l):i!==0&&(n=mu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vs(e),s=1<<r,n|=t[r],e&=~s;return n}function dO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fO(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Vs(i),u=1<<l,m=s[l];m===-1?(!(u&r)||u&n)&&(s[l]=dO(u,e)):m<=e&&(t.expiredLanes|=u),i&=~u}}function Yp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I_(){var t=nf;return nf<<=1,!(nf&4194240)&&(nf=64),t}function Nm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ed(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=r}function hO(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Vs(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function $g(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Et=0;function R_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O_,Wg,M_,j_,k_,qp=!1,of=[],Ao=null,No=null,To=null,Uu=new Map,zu=new Map,fo=[],mO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mw(t,e){switch(t){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Uu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(e.pointerId)}}function tu(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ad(e),e!==null&&Wg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pO(t,e,r,n,s){switch(e){case"focusin":return Ao=tu(Ao,t,e,r,n,s),!0;case"dragenter":return No=tu(No,t,e,r,n,s),!0;case"mouseover":return To=tu(To,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Uu.set(i,tu(Uu.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,zu.set(i,tu(zu.get(i)||null,t,e,r,n,s)),!0}return!1}function P_(t){var e=wa(t.target);if(e!==null){var r=Xa(e);if(r!==null){if(e=r.tag,e===13){if(e=C_(r),e!==null){t.blockedOn=e,k_(t.priority,function(){M_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ff(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hp=n,r.target.dispatchEvent(n),Hp=null}else return e=Ad(r),e!==null&&Wg(e),t.blockedOn=r,!1;e.shift()}return!0}function jw(t,e,r){Ff(t)&&r.delete(e)}function gO(){qp=!1,Ao!==null&&Ff(Ao)&&(Ao=null),No!==null&&Ff(No)&&(No=null),To!==null&&Ff(To)&&(To=null),Uu.forEach(jw),zu.forEach(jw)}function ru(t,e){t.blockedOn===e&&(t.blockedOn=null,qp||(qp=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,gO)))}function Vu(t){function e(s){return ru(s,t)}if(0<of.length){ru(of[0],t);for(var r=1;r<of.length;r++){var n=of[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ao!==null&&ru(Ao,t),No!==null&&ru(No,t),To!==null&&ru(To,t),Uu.forEach(e),zu.forEach(e),r=0;r<fo.length;r++)n=fo[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<fo.length&&(r=fo[0],r.blockedOn===null);)P_(r),r.blockedOn===null&&fo.shift()}var Wl=Xi.ReactCurrentBatchConfig,ch=!0;function xO(t,e,r,n){var s=Et,i=Wl.transition;Wl.transition=null;try{Et=1,Gg(t,e,r,n)}finally{Et=s,Wl.transition=i}}function yO(t,e,r,n){var s=Et,i=Wl.transition;Wl.transition=null;try{Et=4,Gg(t,e,r,n)}finally{Et=s,Wl.transition=i}}function Gg(t,e,r,n){if(ch){var s=Xp(t,e,r,n);if(s===null)Lm(t,e,n,uh,r),Mw(t,n);else if(pO(s,t,e,r,n))n.stopPropagation();else if(Mw(t,n),e&4&&-1<mO.indexOf(t)){for(;s!==null;){var i=Ad(s);if(i!==null&&O_(i),i=Xp(t,e,r,n),i===null&&Lm(t,e,n,uh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Lm(t,e,n,null,r)}}var uh=null;function Xp(t,e,r,n){if(uh=null,t=Vg(n),t=wa(t),t!==null)if(e=Xa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=C_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function D_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iO()){case Hg:return 1;case N_:return 4;case ah:case oO:return 16;case T_:return 536870912;default:return 16}default:return 16}}var vo=null,Yg=null,Uf=null;function L_(){if(Uf)return Uf;var t,e=Yg,r=e.length,n,s="value"in vo?vo.value:vo.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===s[i-n];n++);return Uf=s.slice(t,1<n?1-n:void 0)}function zf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function af(){return!0}function kw(){return!1}function ts(t){function e(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?af:kw,this.isPropagationStopped=kw,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=af)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=af)},persist:function(){},isPersistent:af}),e}var Rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qg=ts(Rc),Sd=Jt({},Rc,{view:0,detail:0}),wO=ts(Sd),Tm,Im,nu,a0=Jt({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nu&&(nu&&t.type==="mousemove"?(Tm=t.screenX-nu.screenX,Im=t.screenY-nu.screenY):Im=Tm=0,nu=t),Tm)},movementY:function(t){return"movementY"in t?t.movementY:Im}}),Pw=ts(a0),vO=Jt({},a0,{dataTransfer:0}),bO=ts(vO),_O=Jt({},Sd,{relatedTarget:0}),Rm=ts(_O),CO=Jt({},Rc,{animationName:0,elapsedTime:0,pseudoElement:0}),EO=ts(CO),SO=Jt({},Rc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AO=ts(SO),NO=Jt({},Rc,{data:0}),Dw=ts(NO),TO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RO[t])?!!e[t]:!1}function Xg(){return OO}var MO=Jt({},Sd,{key:function(t){if(t.key){var e=TO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(t){return t.type==="keypress"?zf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jO=ts(MO),kO=Jt({},a0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lw=ts(kO),PO=Jt({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),DO=ts(PO),LO=Jt({},Rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),BO=ts(LO),FO=Jt({},a0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UO=ts(FO),zO=[9,13,27,32],Kg=zi&&"CompositionEvent"in window,Cu=null;zi&&"documentMode"in document&&(Cu=document.documentMode);var VO=zi&&"TextEvent"in window&&!Cu,B_=zi&&(!Kg||Cu&&8<Cu&&11>=Cu),Bw=" ",Fw=!1;function F_(t,e){switch(t){case"keyup":return zO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tl=!1;function HO(t,e){switch(t){case"compositionend":return U_(e);case"keypress":return e.which!==32?null:(Fw=!0,Bw);case"textInput":return t=e.data,t===Bw&&Fw?null:t;default:return null}}function $O(t,e){if(Tl)return t==="compositionend"||!Kg&&F_(t,e)?(t=L_(),Uf=Yg=vo=null,Tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B_&&e.locale!=="ko"?null:e.data;default:return null}}var WO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WO[t.type]:e==="textarea"}function z_(t,e,r,n){y_(n),e=dh(e,"onChange"),0<e.length&&(r=new qg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Eu=null,Hu=null;function GO(t){Z_(t,0)}function l0(t){var e=Ol(t);if(d_(e))return t}function YO(t,e){if(t==="change")return e}var V_=!1;if(zi){var Om;if(zi){var Mm="oninput"in document;if(!Mm){var zw=document.createElement("div");zw.setAttribute("oninput","return;"),Mm=typeof zw.oninput=="function"}Om=Mm}else Om=!1;V_=Om&&(!document.documentMode||9<document.documentMode)}function Vw(){Eu&&(Eu.detachEvent("onpropertychange",H_),Hu=Eu=null)}function H_(t){if(t.propertyName==="value"&&l0(Hu)){var e=[];z_(e,Hu,t,Vg(t)),__(GO,e)}}function qO(t,e,r){t==="focusin"?(Vw(),Eu=e,Hu=r,Eu.attachEvent("onpropertychange",H_)):t==="focusout"&&Vw()}function XO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return l0(Hu)}function KO(t,e){if(t==="click")return l0(e)}function QO(t,e){if(t==="input"||t==="change")return l0(e)}function ZO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gs=typeof Object.is=="function"?Object.is:ZO;function $u(t,e){if(Gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Op.call(e,s)||!Gs(t[s],e[s]))return!1}return!0}function Hw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $w(t,e){var r=Hw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hw(r)}}function $_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W_(){for(var t=window,e=sh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=sh(t.document)}return e}function Qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JO(t){var e=W_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&$_(r.ownerDocument.documentElement,r)){if(n!==null&&Qg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=$w(r,i);var l=$w(r,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var e8=zi&&"documentMode"in document&&11>=document.documentMode,Il=null,Kp=null,Su=null,Qp=!1;function Ww(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qp||Il==null||Il!==sh(n)||(n=Il,"selectionStart"in n&&Qg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Su&&$u(Su,n)||(Su=n,n=dh(Kp,"onSelect"),0<n.length&&(e=new qg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Il)))}function lf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Rl={animationend:lf("Animation","AnimationEnd"),animationiteration:lf("Animation","AnimationIteration"),animationstart:lf("Animation","AnimationStart"),transitionend:lf("Transition","TransitionEnd")},jm={},G_={};zi&&(G_=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function c0(t){if(jm[t])return jm[t];if(!Rl[t])return t;var e=Rl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in G_)return jm[t]=e[r];return t}var Y_=c0("animationend"),q_=c0("animationiteration"),X_=c0("animationstart"),K_=c0("transitionend"),Q_=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(t,e){Q_.set(t,e),qa(e,[t])}for(var km=0;km<Gw.length;km++){var Pm=Gw[km],t8=Pm.toLowerCase(),r8=Pm[0].toUpperCase()+Pm.slice(1);Go(t8,"on"+r8)}Go(Y_,"onAnimationEnd");Go(q_,"onAnimationIteration");Go(X_,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(K_,"onTransitionEnd");cc("onMouseEnter",["mouseout","mouseover"]);cc("onMouseLeave",["mouseout","mouseover"]);cc("onPointerEnter",["pointerout","pointerover"]);cc("onPointerLeave",["pointerout","pointerover"]);qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function Yw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,tO(n,e,void 0,t),t.currentTarget=null}function Z_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var l=n.length-1;0<=l;l--){var u=n[l],m=u.instance,h=u.currentTarget;if(u=u.listener,m!==i&&s.isPropagationStopped())break e;Yw(s,u,h),i=m}else for(l=0;l<n.length;l++){if(u=n[l],m=u.instance,h=u.currentTarget,u=u.listener,m!==i&&s.isPropagationStopped())break e;Yw(s,u,h),i=m}}}if(oh)throw t=Gp,oh=!1,Gp=null,t}function Lt(t,e){var r=e[r1];r===void 0&&(r=e[r1]=new Set);var n=t+"__bubble";r.has(n)||(J_(e,t,2,!1),r.add(n))}function Dm(t,e,r){var n=0;e&&(n|=4),J_(r,t,n,e)}var cf="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[cf]){t[cf]=!0,o_.forEach(function(r){r!=="selectionchange"&&(n8.has(r)||Dm(r,!1,t),Dm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cf]||(e[cf]=!0,Dm("selectionchange",!1,e))}}function J_(t,e,r,n){switch(D_(e)){case 1:var s=xO;break;case 4:s=yO;break;default:s=Gg}r=s.bind(null,e,r,t),s=void 0,!Wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Lm(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var u=n.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var m=l.tag;if((m===3||m===4)&&(m=l.stateNode.containerInfo,m===s||m.nodeType===8&&m.parentNode===s))return;l=l.return}for(;u!==null;){if(l=wa(u),l===null)return;if(m=l.tag,m===5||m===6){n=i=l;continue e}u=u.parentNode}}n=n.return}__(function(){var h=i,x=Vg(r),y=[];e:{var v=Q_.get(t);if(v!==void 0){var b=qg,S=t;switch(t){case"keypress":if(zf(r)===0)break e;case"keydown":case"keyup":b=jO;break;case"focusin":S="focus",b=Rm;break;case"focusout":S="blur",b=Rm;break;case"beforeblur":case"afterblur":b=Rm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=bO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=DO;break;case Y_:case q_:case X_:b=EO;break;case K_:b=BO;break;case"scroll":b=wO;break;case"wheel":b=UO;break;case"copy":case"cut":case"paste":b=AO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Lw}var C=(e&4)!==0,I=!C&&t==="scroll",R=C?v!==null?v+"Capture":null:v;C=[];for(var A=h,N;A!==null;){N=A;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,R!==null&&(O=Fu(A,R),O!=null&&C.push(Gu(A,O,N)))),I)break;A=A.return}0<C.length&&(v=new b(v,S,null,r,x),y.push({event:v,listeners:C}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&r!==Hp&&(S=r.relatedTarget||r.fromElement)&&(wa(S)||S[Vi]))break e;if((b||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,b?(S=r.relatedTarget||r.toElement,b=h,S=S?wa(S):null,S!==null&&(I=Xa(S),S!==I||S.tag!==5&&S.tag!==6)&&(S=null)):(b=null,S=h),b!==S)){if(C=Pw,O="onMouseLeave",R="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(C=Lw,O="onPointerLeave",R="onPointerEnter",A="pointer"),I=b==null?v:Ol(b),N=S==null?v:Ol(S),v=new C(O,A+"leave",b,r,x),v.target=I,v.relatedTarget=N,O=null,wa(x)===h&&(C=new C(R,A+"enter",S,r,x),C.target=N,C.relatedTarget=I,O=C),I=O,b&&S)t:{for(C=b,R=S,A=0,N=C;N;N=hl(N))A++;for(N=0,O=R;O;O=hl(O))N++;for(;0<A-N;)C=hl(C),A--;for(;0<N-A;)R=hl(R),N--;for(;A--;){if(C===R||R!==null&&C===R.alternate)break t;C=hl(C),R=hl(R)}C=null}else C=null;b!==null&&qw(y,v,b,C,!1),S!==null&&I!==null&&qw(y,I,S,C,!0)}}e:{if(v=h?Ol(h):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var k=YO;else if(Uw(v))if(V_)k=QO;else{k=XO;var F=qO}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(k=KO);if(k&&(k=k(t,h))){z_(y,k,r,x);break e}F&&F(t,v,h),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&Bp(v,"number",v.value)}switch(F=h?Ol(h):window,t){case"focusin":(Uw(F)||F.contentEditable==="true")&&(Il=F,Kp=h,Su=null);break;case"focusout":Su=Kp=Il=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,Ww(y,r,x);break;case"selectionchange":if(e8)break;case"keydown":case"keyup":Ww(y,r,x)}var B;if(Kg)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Tl?F_(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(B_&&r.locale!=="ko"&&(Tl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Tl&&(B=L_()):(vo=x,Yg="value"in vo?vo.value:vo.textContent,Tl=!0)),F=dh(h,P),0<F.length&&(P=new Dw(P,t,null,r,x),y.push({event:P,listeners:F}),B?P.data=B:(B=U_(r),B!==null&&(P.data=B)))),(B=VO?HO(t,r):$O(t,r))&&(h=dh(h,"onBeforeInput"),0<h.length&&(x=new Dw("onBeforeInput","beforeinput",null,r,x),y.push({event:x,listeners:h}),x.data=B))}Z_(y,e)})}function Gu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function dh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fu(t,r),i!=null&&n.unshift(Gu(t,i,s)),i=Fu(t,e),i!=null&&n.push(Gu(t,i,s))),t=t.return}return n}function hl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qw(t,e,r,n,s){for(var i=e._reactName,l=[];r!==null&&r!==n;){var u=r,m=u.alternate,h=u.stateNode;if(m!==null&&m===n)break;u.tag===5&&h!==null&&(u=h,s?(m=Fu(r,i),m!=null&&l.unshift(Gu(r,m,u))):s||(m=Fu(r,i),m!=null&&l.push(Gu(r,m,u)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var s8=/\r\n?/g,i8=/\u0000|\uFFFD/g;function Xw(t){return(typeof t=="string"?t:""+t).replace(s8,`
`).replace(i8,"")}function uf(t,e,r){if(e=Xw(e),Xw(t)!==e&&r)throw Error(xe(425))}function fh(){}var Zp=null,Jp=null;function e1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,o8=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,a8=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(t){return Kw.resolve(null).then(t).catch(l8)}:t1;function l8(t){setTimeout(function(){throw t})}function Bm(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Vu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Vu(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Oc=Math.random().toString(36).slice(2),ui="__reactFiber$"+Oc,Yu="__reactProps$"+Oc,Vi="__reactContainer$"+Oc,r1="__reactEvents$"+Oc,c8="__reactListeners$"+Oc,u8="__reactHandles$"+Oc;function wa(t){var e=t[ui];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Vi]||r[ui]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qw(t);t!==null;){if(r=t[ui])return r;t=Qw(t)}return e}t=r,r=t.parentNode}return null}function Ad(t){return t=t[ui]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ol(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xe(33))}function u0(t){return t[Yu]||null}var n1=[],Ml=-1;function Yo(t){return{current:t}}function Ft(t){0>Ml||(t.current=n1[Ml],n1[Ml]=null,Ml--)}function kt(t,e){Ml++,n1[Ml]=t.current,t.current=e}var Fo={},en=Yo(Fo),An=Yo(!1),Da=Fo;function uc(t,e){var r=t.type.contextTypes;if(!r)return Fo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(t){return t=t.childContextTypes,t!=null}function hh(){Ft(An),Ft(en)}function Zw(t,e,r){if(en.current!==Fo)throw Error(xe(168));kt(en,e),kt(An,r)}function eC(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(xe(108,qR(t)||"Unknown",s));return Jt({},r,n)}function mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,Da=en.current,kt(en,t),kt(An,An.current),!0}function Jw(t,e,r){var n=t.stateNode;if(!n)throw Error(xe(169));r?(t=eC(t,e,Da),n.__reactInternalMemoizedMergedChildContext=t,Ft(An),Ft(en),kt(en,t)):Ft(An),kt(An,r)}var ji=null,d0=!1,Fm=!1;function tC(t){ji===null?ji=[t]:ji.push(t)}function d8(t){d0=!0,tC(t)}function qo(){if(!Fm&&ji!==null){Fm=!0;var t=0,e=Et;try{var r=ji;for(Et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ji=null,d0=!1}catch(s){throw ji!==null&&(ji=ji.slice(t+1)),A_(Hg,qo),s}finally{Et=e,Fm=!1}}return null}var jl=[],kl=0,ph=null,gh=0,cs=[],us=0,La=null,Di=1,Li="";function ha(t,e){jl[kl++]=gh,jl[kl++]=ph,ph=t,gh=e}function rC(t,e,r){cs[us++]=Di,cs[us++]=Li,cs[us++]=La,La=t;var n=Di;t=Li;var s=32-Vs(n)-1;n&=~(1<<s),r+=1;var i=32-Vs(e)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,Di=1<<32-Vs(e)+s|r<<s|n,Li=i+t}else Di=1<<i|r<<s|n,Li=t}function Zg(t){t.return!==null&&(ha(t,1),rC(t,1,0))}function Jg(t){for(;t===ph;)ph=jl[--kl],jl[kl]=null,gh=jl[--kl],jl[kl]=null;for(;t===La;)La=cs[--us],cs[us]=null,Li=cs[--us],cs[us]=null,Di=cs[--us],cs[us]=null}var qn=null,$n=null,$t=!1,Us=null;function nC(t,e){var r=fs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ev(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,$n=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=La!==null?{id:Di,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=fs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,qn=t,$n=null,!0):!1;default:return!1}}function s1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function i1(t){if($t){var e=$n;if(e){var r=e;if(!ev(t,e)){if(s1(t))throw Error(xe(418));e=Io(r.nextSibling);var n=qn;e&&ev(t,e)?nC(n,r):(t.flags=t.flags&-4097|2,$t=!1,qn=t)}}else{if(s1(t))throw Error(xe(418));t.flags=t.flags&-4097|2,$t=!1,qn=t}}}function tv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function df(t){if(t!==qn)return!1;if(!$t)return tv(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!e1(t.type,t.memoizedProps)),e&&(e=$n)){if(s1(t))throw sC(),Error(xe(418));for(;e;)nC(t,e),e=Io(e.nextSibling)}if(tv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$n=Io(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=qn?Io(t.stateNode.nextSibling):null;return!0}function sC(){for(var t=$n;t;)t=Io(t.nextSibling)}function dc(){$n=qn=null,$t=!1}function ex(t){Us===null?Us=[t]:Us.push(t)}var f8=Xi.ReactCurrentBatchConfig;function su(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xe(309));var n=r.stateNode}if(!n)throw Error(xe(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var u=s.refs;l===null?delete u[i]:u[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(xe(284));if(!r._owner)throw Error(xe(290,t))}return t}function ff(t,e){throw t=Object.prototype.toString.call(e),Error(xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rv(t){var e=t._init;return e(t._payload)}function iC(t){function e(R,A){if(t){var N=R.deletions;N===null?(R.deletions=[A],R.flags|=16):N.push(A)}}function r(R,A){if(!t)return null;for(;A!==null;)e(R,A),A=A.sibling;return null}function n(R,A){for(R=new Map;A!==null;)A.key!==null?R.set(A.key,A):R.set(A.index,A),A=A.sibling;return R}function s(R,A){return R=jo(R,A),R.index=0,R.sibling=null,R}function i(R,A,N){return R.index=N,t?(N=R.alternate,N!==null?(N=N.index,N<A?(R.flags|=2,A):N):(R.flags|=2,A)):(R.flags|=1048576,A)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,A,N,O){return A===null||A.tag!==6?(A=Gm(N,R.mode,O),A.return=R,A):(A=s(A,N),A.return=R,A)}function m(R,A,N,O){var k=N.type;return k===Nl?x(R,A,N.props.children,O,N.key):A!==null&&(A.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&rv(k)===A.type)?(O=s(A,N.props),O.ref=su(R,A,N),O.return=R,O):(O=qf(N.type,N.key,N.props,null,R.mode,O),O.ref=su(R,A,N),O.return=R,O)}function h(R,A,N,O){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=Ym(N,R.mode,O),A.return=R,A):(A=s(A,N.children||[]),A.return=R,A)}function x(R,A,N,O,k){return A===null||A.tag!==7?(A=Oa(N,R.mode,O,k),A.return=R,A):(A=s(A,N),A.return=R,A)}function y(R,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Gm(""+A,R.mode,N),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ef:return N=qf(A.type,A.key,A.props,null,R.mode,N),N.ref=su(R,null,A),N.return=R,N;case Al:return A=Ym(A,R.mode,N),A.return=R,A;case co:var O=A._init;return y(R,O(A._payload),N)}if(hu(A)||Jc(A))return A=Oa(A,R.mode,N,null),A.return=R,A;ff(R,A)}return null}function v(R,A,N,O){var k=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return k!==null?null:u(R,A,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ef:return N.key===k?m(R,A,N,O):null;case Al:return N.key===k?h(R,A,N,O):null;case co:return k=N._init,v(R,A,k(N._payload),O)}if(hu(N)||Jc(N))return k!==null?null:x(R,A,N,O,null);ff(R,N)}return null}function b(R,A,N,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return R=R.get(N)||null,u(A,R,""+O,k);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ef:return R=R.get(O.key===null?N:O.key)||null,m(A,R,O,k);case Al:return R=R.get(O.key===null?N:O.key)||null,h(A,R,O,k);case co:var F=O._init;return b(R,A,N,F(O._payload),k)}if(hu(O)||Jc(O))return R=R.get(N)||null,x(A,R,O,k,null);ff(A,O)}return null}function S(R,A,N,O){for(var k=null,F=null,B=A,P=A=0,j=null;B!==null&&P<N.length;P++){B.index>P?(j=B,B=null):j=B.sibling;var W=v(R,B,N[P],O);if(W===null){B===null&&(B=j);break}t&&B&&W.alternate===null&&e(R,B),A=i(W,A,P),F===null?k=W:F.sibling=W,F=W,B=j}if(P===N.length)return r(R,B),$t&&ha(R,P),k;if(B===null){for(;P<N.length;P++)B=y(R,N[P],O),B!==null&&(A=i(B,A,P),F===null?k=B:F.sibling=B,F=B);return $t&&ha(R,P),k}for(B=n(R,B);P<N.length;P++)j=b(B,R,P,N[P],O),j!==null&&(t&&j.alternate!==null&&B.delete(j.key===null?P:j.key),A=i(j,A,P),F===null?k=j:F.sibling=j,F=j);return t&&B.forEach(function(Y){return e(R,Y)}),$t&&ha(R,P),k}function C(R,A,N,O){var k=Jc(N);if(typeof k!="function")throw Error(xe(150));if(N=k.call(N),N==null)throw Error(xe(151));for(var F=k=null,B=A,P=A=0,j=null,W=N.next();B!==null&&!W.done;P++,W=N.next()){B.index>P?(j=B,B=null):j=B.sibling;var Y=v(R,B,W.value,O);if(Y===null){B===null&&(B=j);break}t&&B&&Y.alternate===null&&e(R,B),A=i(Y,A,P),F===null?k=Y:F.sibling=Y,F=Y,B=j}if(W.done)return r(R,B),$t&&ha(R,P),k;if(B===null){for(;!W.done;P++,W=N.next())W=y(R,W.value,O),W!==null&&(A=i(W,A,P),F===null?k=W:F.sibling=W,F=W);return $t&&ha(R,P),k}for(B=n(R,B);!W.done;P++,W=N.next())W=b(B,R,P,W.value,O),W!==null&&(t&&W.alternate!==null&&B.delete(W.key===null?P:W.key),A=i(W,A,P),F===null?k=W:F.sibling=W,F=W);return t&&B.forEach(function(z){return e(R,z)}),$t&&ha(R,P),k}function I(R,A,N,O){if(typeof N=="object"&&N!==null&&N.type===Nl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ef:e:{for(var k=N.key,F=A;F!==null;){if(F.key===k){if(k=N.type,k===Nl){if(F.tag===7){r(R,F.sibling),A=s(F,N.props.children),A.return=R,R=A;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&rv(k)===F.type){r(R,F.sibling),A=s(F,N.props),A.ref=su(R,F,N),A.return=R,R=A;break e}r(R,F);break}else e(R,F);F=F.sibling}N.type===Nl?(A=Oa(N.props.children,R.mode,O,N.key),A.return=R,R=A):(O=qf(N.type,N.key,N.props,null,R.mode,O),O.ref=su(R,A,N),O.return=R,R=O)}return l(R);case Al:e:{for(F=N.key;A!==null;){if(A.key===F)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){r(R,A.sibling),A=s(A,N.children||[]),A.return=R,R=A;break e}else{r(R,A);break}else e(R,A);A=A.sibling}A=Ym(N,R.mode,O),A.return=R,R=A}return l(R);case co:return F=N._init,I(R,A,F(N._payload),O)}if(hu(N))return S(R,A,N,O);if(Jc(N))return C(R,A,N,O);ff(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,A!==null&&A.tag===6?(r(R,A.sibling),A=s(A,N),A.return=R,R=A):(r(R,A),A=Gm(N,R.mode,O),A.return=R,R=A),l(R)):r(R,A)}return I}var fc=iC(!0),oC=iC(!1),xh=Yo(null),yh=null,Pl=null,tx=null;function rx(){tx=Pl=yh=null}function nx(t){var e=xh.current;Ft(xh),t._currentValue=e}function o1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Gl(t,e){yh=t,tx=Pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function vs(t){var e=t._currentValue;if(tx!==t)if(t={context:t,memoizedValue:e,next:null},Pl===null){if(yh===null)throw Error(xe(308));Pl=t,yh.dependencies={lanes:0,firstContext:t}}else Pl=Pl.next=t;return e}var va=null;function sx(t){va===null?va=[t]:va.push(t)}function aC(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,sx(e)):(r.next=s.next,s.next=r),e.interleaved=r,Hi(t,n)}function Hi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var uo=!1;function ix(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Hi(t,r)}return s=n.interleaved,s===null?(e.next=e,sx(n)):(e.next=s.next,s.next=e),n.interleaved=e,Hi(t,r)}function Vf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$g(t,r)}}function nv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wh(t,e,r,n){var s=t.updateQueue;uo=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var m=u,h=m.next;m.next=null,l===null?i=h:l.next=h,l=m;var x=t.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==l&&(u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=m))}if(i!==null){var y=s.baseState;l=0,x=h=m=null,u=i;do{var v=u.lane,b=u.eventTime;if((n&v)===v){x!==null&&(x=x.next={eventTime:b,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,C=u;switch(v=e,b=r,C.tag){case 1:if(S=C.payload,typeof S=="function"){y=S.call(b,y,v);break e}y=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,v=typeof S=="function"?S.call(b,y,v):S,v==null)break e;y=Jt({},y,v);break e;case 2:uo=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else b={eventTime:b,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(h=x=b,m=y):x=x.next=b,l|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(x===null&&(m=y),s.baseState=m,s.firstBaseUpdate=h,s.lastBaseUpdate=x,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fa|=l,t.lanes=l,t.memoizedState=y}}function sv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(xe(191,s));s.call(n)}}}var Nd={},pi=Yo(Nd),qu=Yo(Nd),Xu=Yo(Nd);function ba(t){if(t===Nd)throw Error(xe(174));return t}function ox(t,e){switch(kt(Xu,e),kt(qu,t),kt(pi,Nd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Up(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Up(e,t)}Ft(pi),kt(pi,e)}function hc(){Ft(pi),Ft(qu),Ft(Xu)}function cC(t){ba(Xu.current);var e=ba(pi.current),r=Up(e,t.type);e!==r&&(kt(qu,t),kt(pi,r))}function ax(t){qu.current===t&&(Ft(pi),Ft(qu))}var qt=Yo(0);function vh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Um=[];function lx(){for(var t=0;t<Um.length;t++)Um[t]._workInProgressVersionPrimary=null;Um.length=0}var Hf=Xi.ReactCurrentDispatcher,zm=Xi.ReactCurrentBatchConfig,Ba=0,Zt=null,Nr=null,Mr=null,bh=!1,Au=!1,Ku=0,h8=0;function qr(){throw Error(xe(321))}function cx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Gs(t[r],e[r]))return!1;return!0}function ux(t,e,r,n,s,i){if(Ba=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hf.current=t===null||t.memoizedState===null?x8:y8,t=r(n,s),Au){i=0;do{if(Au=!1,Ku=0,25<=i)throw Error(xe(301));i+=1,Mr=Nr=null,e.updateQueue=null,Hf.current=w8,t=r(n,s)}while(Au)}if(Hf.current=_h,e=Nr!==null&&Nr.next!==null,Ba=0,Mr=Nr=Zt=null,bh=!1,e)throw Error(xe(300));return t}function dx(){var t=Ku!==0;return Ku=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Zt.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function bs(){if(Nr===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=Nr.next;var e=Mr===null?Zt.memoizedState:Mr.next;if(e!==null)Mr=e,Nr=t;else{if(t===null)throw Error(xe(310));Nr=t,t={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},Mr===null?Zt.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function Qu(t,e){return typeof e=="function"?e(t):e}function Vm(t){var e=bs(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=t;var n=Nr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var u=l=null,m=null,h=i;do{var x=h.lane;if((Ba&x)===x)m!==null&&(m=m.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var y={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};m===null?(u=m=y,l=n):m=m.next=y,Zt.lanes|=x,Fa|=x}h=h.next}while(h!==null&&h!==i);m===null?l=n:m.next=u,Gs(n,e.memoizedState)||(Sn=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=m,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,Fa|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Hm(t){var e=bs(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);Gs(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function uC(){}function dC(t,e){var r=Zt,n=bs(),s=e(),i=!Gs(n.memoizedState,s);if(i&&(n.memoizedState=s,Sn=!0),n=n.queue,fx(mC.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Mr!==null&&Mr.memoizedState.tag&1){if(r.flags|=2048,Zu(9,hC.bind(null,r,n,s,e),void 0,null),jr===null)throw Error(xe(349));Ba&30||fC(r,e,s)}return s}function fC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hC(t,e,r,n){e.value=r,e.getSnapshot=n,pC(e)&&gC(t)}function mC(t,e,r){return r(function(){pC(e)&&gC(t)})}function pC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Gs(t,r)}catch{return!0}}function gC(t){var e=Hi(t,1);e!==null&&Hs(e,t,1,-1)}function iv(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=g8.bind(null,Zt,t),[e.memoizedState,t]}function Zu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function xC(){return bs().memoizedState}function $f(t,e,r,n){var s=si();Zt.flags|=t,s.memoizedState=Zu(1|e,r,void 0,n===void 0?null:n)}function f0(t,e,r,n){var s=bs();n=n===void 0?null:n;var i=void 0;if(Nr!==null){var l=Nr.memoizedState;if(i=l.destroy,n!==null&&cx(n,l.deps)){s.memoizedState=Zu(e,r,i,n);return}}Zt.flags|=t,s.memoizedState=Zu(1|e,r,i,n)}function ov(t,e){return $f(8390656,8,t,e)}function fx(t,e){return f0(2048,8,t,e)}function yC(t,e){return f0(4,2,t,e)}function wC(t,e){return f0(4,4,t,e)}function vC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bC(t,e,r){return r=r!=null?r.concat([t]):null,f0(4,4,vC.bind(null,e,t),r)}function hx(){}function _C(t,e){var r=bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function CC(t,e){var r=bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&cx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function EC(t,e,r){return Ba&21?(Gs(r,e)||(r=I_(),Zt.lanes|=r,Fa|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=r)}function m8(t,e){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var n=zm.transition;zm.transition={};try{t(!1),e()}finally{Et=r,zm.transition=n}}function SC(){return bs().memoizedState}function p8(t,e,r){var n=Mo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},AC(t))NC(e,r);else if(r=aC(t,e,r,n),r!==null){var s=dn();Hs(r,t,n,s),TC(r,e,n)}}function g8(t,e,r){var n=Mo(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(AC(t))NC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,u=i(l,r);if(s.hasEagerState=!0,s.eagerState=u,Gs(u,l)){var m=e.interleaved;m===null?(s.next=s,sx(e)):(s.next=m.next,m.next=s),e.interleaved=s;return}}catch{}finally{}r=aC(t,e,s,n),r!==null&&(s=dn(),Hs(r,t,n,s),TC(r,e,n))}}function AC(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function NC(t,e){Au=bh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function TC(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$g(t,r)}}var _h={readContext:vs,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},x8={readContext:vs,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:vs,useEffect:ov,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,$f(4194308,4,vC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return $f(4194308,4,t,e)},useInsertionEffect:function(t,e){return $f(4,2,t,e)},useMemo:function(t,e){var r=si();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=si();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=p8.bind(null,Zt,t),[n.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:hx,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=m8.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zt,s=si();if($t){if(r===void 0)throw Error(xe(407));r=r()}else{if(r=e(),jr===null)throw Error(xe(349));Ba&30||fC(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,ov(mC.bind(null,n,i,t),[t]),n.flags|=2048,Zu(9,hC.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=si(),e=jr.identifierPrefix;if($t){var r=Li,n=Di;r=(n&~(1<<32-Vs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ku++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=h8++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y8={readContext:vs,useCallback:_C,useContext:vs,useEffect:fx,useImperativeHandle:bC,useInsertionEffect:yC,useLayoutEffect:wC,useMemo:CC,useReducer:Vm,useRef:xC,useState:function(){return Vm(Qu)},useDebugValue:hx,useDeferredValue:function(t){var e=bs();return EC(e,Nr.memoizedState,t)},useTransition:function(){var t=Vm(Qu)[0],e=bs().memoizedState;return[t,e]},useMutableSource:uC,useSyncExternalStore:dC,useId:SC,unstable_isNewReconciler:!1},w8={readContext:vs,useCallback:_C,useContext:vs,useEffect:fx,useImperativeHandle:bC,useInsertionEffect:yC,useLayoutEffect:wC,useMemo:CC,useReducer:Hm,useRef:xC,useState:function(){return Hm(Qu)},useDebugValue:hx,useDeferredValue:function(t){var e=bs();return Nr===null?e.memoizedState=t:EC(e,Nr.memoizedState,t)},useTransition:function(){var t=Hm(Qu)[0],e=bs().memoizedState;return[t,e]},useMutableSource:uC,useSyncExternalStore:dC,useId:SC,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function a1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Jt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var h0={isMounted:function(t){return(t=t._reactInternals)?Xa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=dn(),s=Mo(t),i=Ui(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ro(t,i,s),e!==null&&(Hs(e,t,s,n),Vf(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=dn(),s=Mo(t),i=Ui(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ro(t,i,s),e!==null&&(Hs(e,t,s,n),Vf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=dn(),n=Mo(t),s=Ui(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ro(t,s,n),e!==null&&(Hs(e,t,n,r),Vf(e,t,n))}};function av(t,e,r,n,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):e.prototype&&e.prototype.isPureReactComponent?!$u(r,n)||!$u(s,i):!0}function IC(t,e,r){var n=!1,s=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=vs(i):(s=Nn(e)?Da:en.current,n=e.contextTypes,i=(n=n!=null)?uc(t,s):Fo),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=h0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&h0.enqueueReplaceState(e,e.state,null)}function l1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ix(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vs(i):(i=Nn(e)?Da:en.current,s.context=uc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(a1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&h0.enqueueReplaceState(s,s.state,null),wh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mc(t,e){try{var r="",n=e;do r+=YR(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $m(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function c1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var v8=typeof WeakMap=="function"?WeakMap:Map;function RC(t,e,r){r=Ui(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Eh||(Eh=!0,w1=n),c1(t,e)},r}function OC(t,e,r){r=Ui(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){c1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){c1(t,e),typeof n!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function cv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new v8;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=k8.bind(null,t,e,r),e.then(t,t))}function uv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ui(-1,1),e.tag=2,Ro(r,e,1))),r.lanes|=1),t)}var b8=Xi.ReactCurrentOwner,Sn=!1;function an(t,e,r,n){e.child=t===null?oC(e,null,r,n):fc(e,t.child,r,n)}function fv(t,e,r,n,s){r=r.render;var i=e.ref;return Gl(e,s),n=ux(t,e,r,n,i,s),r=dx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):($t&&r&&Zg(e),e.flags|=1,an(t,e,n,s),e.child)}function hv(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!bx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,MC(t,e,i,n,s)):(t=qf(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:$u,r(l,n)&&t.ref===e.ref)return $i(t,e,s)}return e.flags|=1,t=jo(i,n),t.ref=e.ref,t.return=e,e.child=t}function MC(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if($u(i,n)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,$i(t,e,s)}return u1(t,e,r,n,s)}function jC(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ll,Ln),Ln|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Ll,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,kt(Ll,Ln),Ln|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,kt(Ll,Ln),Ln|=n;return an(t,e,s,r),e.child}function kC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function u1(t,e,r,n,s){var i=Nn(r)?Da:en.current;return i=uc(e,i),Gl(e,s),r=ux(t,e,r,n,i,s),n=dx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):($t&&n&&Zg(e),e.flags|=1,an(t,e,r,s),e.child)}function mv(t,e,r,n,s){if(Nn(r)){var i=!0;mh(e)}else i=!1;if(Gl(e,s),e.stateNode===null)Wf(t,e),IC(e,r,n),l1(e,r,n,s),n=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var m=l.context,h=r.contextType;typeof h=="object"&&h!==null?h=vs(h):(h=Nn(r)?Da:en.current,h=uc(e,h));var x=r.getDerivedStateFromProps,y=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||m!==h)&&lv(e,l,n,h),uo=!1;var v=e.memoizedState;l.state=v,wh(e,n,l,s),m=e.memoizedState,u!==n||v!==m||An.current||uo?(typeof x=="function"&&(a1(e,r,x,n),m=e.memoizedState),(u=uo||av(e,r,u,n,v,m,h))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=m),l.props=n,l.state=m,l.context=h,n=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,lC(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Ms(e.type,u),l.props=h,y=e.pendingProps,v=l.context,m=r.contextType,typeof m=="object"&&m!==null?m=vs(m):(m=Nn(r)?Da:en.current,m=uc(e,m));var b=r.getDerivedStateFromProps;(x=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||v!==m)&&lv(e,l,n,m),uo=!1,v=e.memoizedState,l.state=v,wh(e,n,l,s);var S=e.memoizedState;u!==y||v!==S||An.current||uo?(typeof b=="function"&&(a1(e,r,b,n),S=e.memoizedState),(h=uo||av(e,r,h,n,v,S,m)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,S,m),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,S,m)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=S),l.props=n,l.state=S,l.context=m,n=h):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return d1(t,e,r,n,i,s)}function d1(t,e,r,n,s,i){kC(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&Jw(e,r,!1),$i(t,e,i);n=e.stateNode,b8.current=e;var u=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=fc(e,t.child,null,i),e.child=fc(e,null,u,i)):an(t,e,u,i),e.memoizedState=n.state,s&&Jw(e,r,!0),e.child}function PC(t){var e=t.stateNode;e.pendingContext?Zw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zw(t,e.context,!1),ox(t,e.containerInfo)}function pv(t,e,r,n,s){return dc(),ex(s),e.flags|=256,an(t,e,r,n),e.child}var f1={dehydrated:null,treeContext:null,retryLane:0};function h1(t){return{baseLanes:t,cachePool:null,transitions:null}}function DC(t,e,r){var n=e.pendingProps,s=qt.current,i=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(qt,s&1),t===null)return i1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,i?(n=e.mode,i=e.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=g0(l,n,0,null),t=Oa(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=h1(r),e.memoizedState=f1,t):mx(e,l));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return _8(t,e,l,n,u,s,r);if(i){i=n.fallback,l=e.mode,s=t.child,u=s.sibling;var m={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=m,e.deletions=null):(n=jo(s,m),n.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=jo(u,i):(i=Oa(i,l,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,l=t.child.memoizedState,l=l===null?h1(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,e.memoizedState=f1,n}return i=t.child,t=i.sibling,n=jo(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function mx(t,e){return e=g0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hf(t,e,r,n){return n!==null&&ex(n),fc(e,t.child,null,r),t=mx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _8(t,e,r,n,s,i,l){if(r)return e.flags&256?(e.flags&=-257,n=$m(Error(xe(422))),hf(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=g0({mode:"visible",children:n.children},s,0,null),i=Oa(i,s,l,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&fc(e,t.child,null,l),e.child.memoizedState=h1(l),e.memoizedState=f1,i);if(!(e.mode&1))return hf(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var u=n.dgst;return n=u,i=Error(xe(419)),n=$m(i,n,void 0),hf(t,e,l,n)}if(u=(l&t.childLanes)!==0,Sn||u){if(n=jr,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hi(t,s),Hs(n,t,s,-1))}return vx(),n=$m(Error(xe(421))),hf(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=P8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$n=Io(s.nextSibling),qn=e,$t=!0,Us=null,t!==null&&(cs[us++]=Di,cs[us++]=Li,cs[us++]=La,Di=t.id,Li=t.overflow,La=e),e=mx(e,n.children),e.flags|=4096,e)}function gv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),o1(t.return,e,r)}function Wm(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function LC(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(an(t,e,n.children,r),n=qt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gv(t,r,e);else if(t.tag===19)gv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(kt(qt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&vh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Wm(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Wm(e,!0,r,null,i);break;case"together":Wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fa|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(xe(153));if(e.child!==null){for(t=e.child,r=jo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=jo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function C8(t,e,r){switch(e.tag){case 3:PC(e),dc();break;case 5:cC(e);break;case 1:Nn(e.type)&&mh(e);break;case 4:ox(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;kt(xh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kt(qt,qt.current&1),e.flags|=128,null):r&e.child.childLanes?DC(t,e,r):(kt(qt,qt.current&1),t=$i(t,e,r),t!==null?t.sibling:null);kt(qt,qt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return LC(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(qt,qt.current),n)break;return null;case 22:case 23:return e.lanes=0,jC(t,e,r)}return $i(t,e,r)}var BC,m1,FC,UC;BC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};m1=function(){};FC=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ba(pi.current);var i=null;switch(r){case"input":s=Dp(t,s),n=Dp(t,n),i=[];break;case"select":s=Jt({},s,{value:void 0}),n=Jt({},n,{value:void 0}),i=[];break;case"textarea":s=Fp(t,s),n=Fp(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fh)}zp(r,n);var l;r=null;for(h in s)if(!n.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(l in u)u.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Lu.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var m=n[h];if(u=s!=null?s[h]:void 0,n.hasOwnProperty(h)&&m!==u&&(m!=null||u!=null))if(h==="style")if(u){for(l in u)!u.hasOwnProperty(l)||m&&m.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in m)m.hasOwnProperty(l)&&u[l]!==m[l]&&(r||(r={}),r[l]=m[l])}else r||(i||(i=[]),i.push(h,r)),r=m;else h==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,u=u?u.__html:void 0,m!=null&&u!==m&&(i=i||[]).push(h,m)):h==="children"?typeof m!="string"&&typeof m!="number"||(i=i||[]).push(h,""+m):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Lu.hasOwnProperty(h)?(m!=null&&h==="onScroll"&&Lt("scroll",t),i||u===m||(i=[])):(i=i||[]).push(h,m))}r&&(i=i||[]).push("style",r);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};UC=function(t,e,r,n){r!==n&&(e.flags|=4)};function iu(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function E8(t,e,r){var n=e.pendingProps;switch(Jg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return Nn(e.type)&&hh(),Xr(e),null;case 3:return n=e.stateNode,hc(),Ft(An),Ft(en),lx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(df(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Us!==null&&(_1(Us),Us=null))),m1(t,e),Xr(e),null;case 5:ax(e);var s=ba(Xu.current);if(r=e.type,t!==null&&e.stateNode!=null)FC(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(xe(166));return Xr(e),null}if(t=ba(pi.current),df(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ui]=e,n[Yu]=i,t=(e.mode&1)!==0,r){case"dialog":Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":case"embed":Lt("load",n);break;case"video":case"audio":for(s=0;s<pu.length;s++)Lt(pu[s],n);break;case"source":Lt("error",n);break;case"img":case"image":case"link":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"input":Sw(n,i),Lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Lt("invalid",n);break;case"textarea":Nw(n,i),Lt("invalid",n)}zp(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="children"?typeof u=="string"?n.textContent!==u&&(i.suppressHydrationWarning!==!0&&uf(n.textContent,u,t),s=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&uf(n.textContent,u,t),s=["children",""+u]):Lu.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Lt("scroll",n)}switch(r){case"input":tf(n),Aw(n,i,!0);break;case"textarea":tf(n),Tw(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=fh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[ui]=e,t[Yu]=n,BC(t,e,!1,!1),e.stateNode=t;e:{switch(l=Vp(r,n),r){case"dialog":Lt("cancel",t),Lt("close",t),s=n;break;case"iframe":case"object":case"embed":Lt("load",t),s=n;break;case"video":case"audio":for(s=0;s<pu.length;s++)Lt(pu[s],t);s=n;break;case"source":Lt("error",t),s=n;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),s=n;break;case"details":Lt("toggle",t),s=n;break;case"input":Sw(t,n),s=Dp(t,n),Lt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Jt({},n,{value:void 0}),Lt("invalid",t);break;case"textarea":Nw(t,n),s=Fp(t,n),Lt("invalid",t);break;default:s=n}zp(r,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var m=u[i];i==="style"?x_(t,m):i==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&p_(t,m)):i==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&Bu(t,m):typeof m=="number"&&Bu(t,""+m):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lu.hasOwnProperty(i)?m!=null&&i==="onScroll"&&Lt("scroll",t):m!=null&&Bg(t,i,m,l))}switch(r){case"input":tf(t),Aw(t,n,!1);break;case"textarea":tf(t),Tw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bo(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Vl(t,!!n.multiple,i,!1):n.defaultValue!=null&&Vl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(t&&e.stateNode!=null)UC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(xe(166));if(r=ba(Xu.current),ba(pi.current),df(e)){if(n=e.stateNode,r=e.memoizedProps,n[ui]=e,(i=n.nodeValue!==r)&&(t=qn,t!==null))switch(t.tag){case 3:uf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uf(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ui]=e,e.stateNode=n}return Xr(e),null;case 13:if(Ft(qt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&$n!==null&&e.mode&1&&!(e.flags&128))sC(),dc(),e.flags|=98560,i=!1;else if(i=df(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(xe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(xe(317));i[ui]=e}else dc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),i=!1}else Us!==null&&(_1(Us),Us=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||qt.current&1?Tr===0&&(Tr=3):vx())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return hc(),m1(t,e),t===null&&Wu(e.stateNode.containerInfo),Xr(e),null;case 10:return nx(e.type._context),Xr(e),null;case 17:return Nn(e.type)&&hh(),Xr(e),null;case 19:if(Ft(qt),i=e.memoizedState,i===null)return Xr(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)iu(i,!1);else{if(Tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=vh(t),l!==null){for(e.flags|=128,iu(i,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kt(qt,qt.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>pc&&(e.flags|=128,n=!0,iu(i,!1),e.lanes=4194304)}else{if(!n)if(t=vh(l),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),iu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$t)return Xr(e),null}else 2*mr()-i.renderingStartTime>pc&&r!==1073741824&&(e.flags|=128,n=!0,iu(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(r=i.last,r!==null?r.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,r=qt.current,kt(qt,n?r&1|2:r&1),e):(Xr(e),null);case 22:case 23:return wx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ln&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function S8(t,e){switch(Jg(e),e.tag){case 1:return Nn(e.type)&&hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hc(),Ft(An),Ft(en),lx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ax(e),null;case 13:if(Ft(qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));dc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(qt),null;case 4:return hc(),null;case 10:return nx(e.type._context),null;case 22:case 23:return wx(),null;case 24:return null;default:return null}}var mf=!1,Qr=!1,A8=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Dl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){lr(t,e,n)}else r.current=null}function p1(t,e,r){try{r()}catch(n){lr(t,e,n)}}var xv=!1;function N8(t,e){if(Zp=ch,t=W_(),Qg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,u=-1,m=-1,h=0,x=0,y=t,v=null;t:for(;;){for(var b;y!==r||s!==0&&y.nodeType!==3||(u=l+s),y!==i||n!==0&&y.nodeType!==3||(m=l+n),y.nodeType===3&&(l+=y.nodeValue.length),(b=y.firstChild)!==null;)v=y,y=b;for(;;){if(y===t)break t;if(v===r&&++h===s&&(u=l),v===i&&++x===n&&(m=l),(b=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=b}r=u===-1||m===-1?null:{start:u,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jp={focusedElem:t,selectionRange:r},ch=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,I=S.memoizedState,R=e.stateNode,A=R.getSnapshotBeforeUpdate(e.elementType===e.type?C:Ms(e.type,C),I);R.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(O){lr(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return S=xv,xv=!1,S}function Nu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&p1(e,r,i)}s=s.next}while(s!==n)}}function m0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function g1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function zC(t){var e=t.alternate;e!==null&&(t.alternate=null,zC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ui],delete e[Yu],delete e[r1],delete e[c8],delete e[u8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function VC(t){return t.tag===5||t.tag===3||t.tag===4}function yv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function x1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fh));else if(n!==4&&(t=t.child,t!==null))for(x1(t,e,r),t=t.sibling;t!==null;)x1(t,e,r),t=t.sibling}function y1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(y1(t,e,r),t=t.sibling;t!==null;)y1(t,e,r),t=t.sibling}var zr=null,Ls=!1;function ro(t,e,r){for(r=r.child;r!==null;)HC(t,e,r),r=r.sibling}function HC(t,e,r){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(o0,r)}catch{}switch(r.tag){case 5:Qr||Dl(r,e);case 6:var n=zr,s=Ls;zr=null,ro(t,e,r),zr=n,Ls=s,zr!==null&&(Ls?(t=zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):zr.removeChild(r.stateNode));break;case 18:zr!==null&&(Ls?(t=zr,r=r.stateNode,t.nodeType===8?Bm(t.parentNode,r):t.nodeType===1&&Bm(t,r),Vu(t)):Bm(zr,r.stateNode));break;case 4:n=zr,s=Ls,zr=r.stateNode.containerInfo,Ls=!0,ro(t,e,r),zr=n,Ls=s;break;case 0:case 11:case 14:case 15:if(!Qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&p1(r,e,l),s=s.next}while(s!==n)}ro(t,e,r);break;case 1:if(!Qr&&(Dl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){lr(r,e,u)}ro(t,e,r);break;case 21:ro(t,e,r);break;case 22:r.mode&1?(Qr=(n=Qr)||r.memoizedState!==null,ro(t,e,r),Qr=n):ro(t,e,r);break;default:ro(t,e,r)}}function wv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new A8),e.forEach(function(n){var s=D8.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ns(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:zr=u.stateNode,Ls=!1;break e;case 3:zr=u.stateNode.containerInfo,Ls=!0;break e;case 4:zr=u.stateNode.containerInfo,Ls=!0;break e}u=u.return}if(zr===null)throw Error(xe(160));HC(i,l,s),zr=null,Ls=!1;var m=s.alternate;m!==null&&(m.return=null),s.return=null}catch(h){lr(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$C(e,t),e=e.sibling}function $C(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ns(e,t),ni(t),n&4){try{Nu(3,t,t.return),m0(3,t)}catch(C){lr(t,t.return,C)}try{Nu(5,t,t.return)}catch(C){lr(t,t.return,C)}}break;case 1:Ns(e,t),ni(t),n&512&&r!==null&&Dl(r,r.return);break;case 5:if(Ns(e,t),ni(t),n&512&&r!==null&&Dl(r,r.return),t.flags&32){var s=t.stateNode;try{Bu(s,"")}catch(C){lr(t,t.return,C)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,u=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&f_(s,i),Vp(u,l);var h=Vp(u,i);for(l=0;l<m.length;l+=2){var x=m[l],y=m[l+1];x==="style"?x_(s,y):x==="dangerouslySetInnerHTML"?p_(s,y):x==="children"?Bu(s,y):Bg(s,x,y,h)}switch(u){case"input":Lp(s,i);break;case"textarea":h_(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Vl(s,!!i.multiple,b,!1):v!==!!i.multiple&&(i.defaultValue!=null?Vl(s,!!i.multiple,i.defaultValue,!0):Vl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yu]=i}catch(C){lr(t,t.return,C)}}break;case 6:if(Ns(e,t),ni(t),n&4){if(t.stateNode===null)throw Error(xe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){lr(t,t.return,C)}}break;case 3:if(Ns(e,t),ni(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vu(e.containerInfo)}catch(C){lr(t,t.return,C)}break;case 4:Ns(e,t),ni(t);break;case 13:Ns(e,t),ni(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xx=mr())),n&4&&wv(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(Qr=(h=Qr)||x,Ns(e,t),Qr=h):Ns(e,t),ni(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!x&&t.mode&1)for(Oe=t,x=t.child;x!==null;){for(y=Oe=x;Oe!==null;){switch(v=Oe,b=v.child,v.tag){case 0:case 11:case 14:case 15:Nu(4,v,v.return);break;case 1:Dl(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(C){lr(n,r,C)}}break;case 5:Dl(v,v.return);break;case 22:if(v.memoizedState!==null){bv(y);continue}}b!==null?(b.return=v,Oe=b):bv(y)}x=x.sibling}e:for(x=null,y=t;;){if(y.tag===5){if(x===null){x=y;try{s=y.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=y.stateNode,m=y.memoizedProps.style,l=m!=null&&m.hasOwnProperty("display")?m.display:null,u.style.display=g_("display",l))}catch(C){lr(t,t.return,C)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(C){lr(t,t.return,C)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ns(e,t),ni(t),n&4&&wv(t);break;case 21:break;default:Ns(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(VC(r)){var n=r;break e}r=r.return}throw Error(xe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Bu(s,""),n.flags&=-33);var i=yv(t);y1(t,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=yv(t);x1(t,u,l);break;default:throw Error(xe(161))}}catch(m){lr(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T8(t,e,r){Oe=t,WC(t)}function WC(t,e,r){for(var n=(t.mode&1)!==0;Oe!==null;){var s=Oe,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||mf;if(!l){var u=s.alternate,m=u!==null&&u.memoizedState!==null||Qr;u=mf;var h=Qr;if(mf=l,(Qr=m)&&!h)for(Oe=s;Oe!==null;)l=Oe,m=l.child,l.tag===22&&l.memoizedState!==null?_v(s):m!==null?(m.return=l,Oe=m):_v(s);for(;i!==null;)Oe=i,WC(i),i=i.sibling;Oe=s,mf=u,Qr=h}vv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Oe=i):vv(t)}}function vv(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qr||m0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Qr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ms(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sv(e,i,n);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}sv(e,l,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&Vu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Qr||e.flags&512&&g1(e)}catch(v){lr(e,e.return,v)}}if(e===t){Oe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Oe=r;break}Oe=e.return}}function bv(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Oe=r;break}Oe=e.return}}function _v(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{m0(4,e)}catch(m){lr(e,r,m)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(m){lr(e,s,m)}}var i=e.return;try{g1(e)}catch(m){lr(e,i,m)}break;case 5:var l=e.return;try{g1(e)}catch(m){lr(e,l,m)}}}catch(m){lr(e,e.return,m)}if(e===t){Oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Oe=u;break}Oe=e.return}}var I8=Math.ceil,Ch=Xi.ReactCurrentDispatcher,px=Xi.ReactCurrentOwner,ys=Xi.ReactCurrentBatchConfig,pt=0,jr=null,vr=null,Vr=0,Ln=0,Ll=Yo(0),Tr=0,Ju=null,Fa=0,p0=0,gx=0,Tu=null,En=null,xx=0,pc=1/0,Ii=null,Eh=!1,w1=null,Oo=null,pf=!1,bo=null,Sh=0,Iu=0,v1=null,Gf=-1,Yf=0;function dn(){return pt&6?mr():Gf!==-1?Gf:Gf=mr()}function Mo(t){return t.mode&1?pt&2&&Vr!==0?Vr&-Vr:f8.transition!==null?(Yf===0&&(Yf=I_()),Yf):(t=Et,t!==0||(t=window.event,t=t===void 0?16:D_(t.type)),t):1}function Hs(t,e,r,n){if(50<Iu)throw Iu=0,v1=null,Error(xe(185));Ed(t,r,n),(!(pt&2)||t!==jr)&&(t===jr&&(!(pt&2)&&(p0|=r),Tr===4&&ho(t,Vr)),Tn(t,n),r===1&&pt===0&&!(e.mode&1)&&(pc=mr()+500,d0&&qo()))}function Tn(t,e){var r=t.callbackNode;fO(t,e);var n=lh(t,t===jr?Vr:0);if(n===0)r!==null&&Ow(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ow(r),e===1)t.tag===0?d8(Cv.bind(null,t)):tC(Cv.bind(null,t)),a8(function(){!(pt&6)&&qo()}),r=null;else{switch(R_(n)){case 1:r=Hg;break;case 4:r=N_;break;case 16:r=ah;break;case 536870912:r=T_;break;default:r=ah}r=JC(r,GC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function GC(t,e){if(Gf=-1,Yf=0,pt&6)throw Error(xe(327));var r=t.callbackNode;if(Yl()&&t.callbackNode!==r)return null;var n=lh(t,t===jr?Vr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ah(t,n);else{e=n;var s=pt;pt|=2;var i=qC();(jr!==t||Vr!==e)&&(Ii=null,pc=mr()+500,Ra(t,e));do try{M8();break}catch(u){YC(t,u)}while(!0);rx(),Ch.current=i,pt=s,vr!==null?e=0:(jr=null,Vr=0,e=Tr)}if(e!==0){if(e===2&&(s=Yp(t),s!==0&&(n=s,e=b1(t,s))),e===1)throw r=Ju,Ra(t,0),ho(t,n),Tn(t,mr()),r;if(e===6)ho(t,n);else{if(s=t.current.alternate,!(n&30)&&!R8(s)&&(e=Ah(t,n),e===2&&(i=Yp(t),i!==0&&(n=i,e=b1(t,i))),e===1))throw r=Ju,Ra(t,0),ho(t,n),Tn(t,mr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(xe(345));case 2:ma(t,En,Ii);break;case 3:if(ho(t,n),(n&130023424)===n&&(e=xx+500-mr(),10<e)){if(lh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){dn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=t1(ma.bind(null,t,En,Ii),e);break}ma(t,En,Ii);break;case 4:if(ho(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Vs(n);i=1<<l,l=e[l],l>s&&(s=l),n&=~i}if(n=s,n=mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*I8(n/1960))-n,10<n){t.timeoutHandle=t1(ma.bind(null,t,En,Ii),n);break}ma(t,En,Ii);break;case 5:ma(t,En,Ii);break;default:throw Error(xe(329))}}}return Tn(t,mr()),t.callbackNode===r?GC.bind(null,t):null}function b1(t,e){var r=Tu;return t.current.memoizedState.isDehydrated&&(Ra(t,e).flags|=256),t=Ah(t,e),t!==2&&(e=En,En=r,e!==null&&_1(e)),t}function _1(t){En===null?En=t:En.push.apply(En,t)}function R8(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Gs(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ho(t,e){for(e&=~gx,e&=~p0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vs(e),n=1<<r;t[r]=-1,e&=~n}}function Cv(t){if(pt&6)throw Error(xe(327));Yl();var e=lh(t,0);if(!(e&1))return Tn(t,mr()),null;var r=Ah(t,e);if(t.tag!==0&&r===2){var n=Yp(t);n!==0&&(e=n,r=b1(t,n))}if(r===1)throw r=Ju,Ra(t,0),ho(t,e),Tn(t,mr()),r;if(r===6)throw Error(xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ma(t,En,Ii),Tn(t,mr()),null}function yx(t,e){var r=pt;pt|=1;try{return t(e)}finally{pt=r,pt===0&&(pc=mr()+500,d0&&qo())}}function Ua(t){bo!==null&&bo.tag===0&&!(pt&6)&&Yl();var e=pt;pt|=1;var r=ys.transition,n=Et;try{if(ys.transition=null,Et=1,t)return t()}finally{Et=n,ys.transition=r,pt=e,!(pt&6)&&qo()}}function wx(){Ln=Ll.current,Ft(Ll)}function Ra(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,o8(r)),vr!==null)for(r=vr.return;r!==null;){var n=r;switch(Jg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hh();break;case 3:hc(),Ft(An),Ft(en),lx();break;case 5:ax(n);break;case 4:hc();break;case 13:Ft(qt);break;case 19:Ft(qt);break;case 10:nx(n.type._context);break;case 22:case 23:wx()}r=r.return}if(jr=t,vr=t=jo(t.current,null),Vr=Ln=e,Tr=0,Ju=null,gx=p0=Fa=0,En=Tu=null,va!==null){for(e=0;e<va.length;e++)if(r=va[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}va=null}return t}function YC(t,e){do{var r=vr;try{if(rx(),Hf.current=_h,bh){for(var n=Zt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bh=!1}if(Ba=0,Mr=Nr=Zt=null,Au=!1,Ku=0,px.current=null,r===null||r.return===null){Tr=1,Ju=e,vr=null;break}e:{var i=t,l=r.return,u=r,m=e;if(e=Vr,u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var h=m,x=u,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=uv(l);if(b!==null){b.flags&=-257,dv(b,l,u,i,e),b.mode&1&&cv(i,h,e),e=b,m=h;var S=e.updateQueue;if(S===null){var C=new Set;C.add(m),e.updateQueue=C}else S.add(m);break e}else{if(!(e&1)){cv(i,h,e),vx();break e}m=Error(xe(426))}}else if($t&&u.mode&1){var I=uv(l);if(I!==null){!(I.flags&65536)&&(I.flags|=256),dv(I,l,u,i,e),ex(mc(m,u));break e}}i=m=mc(m,u),Tr!==4&&(Tr=2),Tu===null?Tu=[i]:Tu.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var R=RC(i,m,e);nv(i,R);break e;case 1:u=m;var A=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof A.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Oo===null||!Oo.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=OC(i,u,e);nv(i,O);break e}}i=i.return}while(i!==null)}KC(r)}catch(k){e=k,vr===r&&r!==null&&(vr=r=r.return);continue}break}while(!0)}function qC(){var t=Ch.current;return Ch.current=_h,t===null?_h:t}function vx(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),jr===null||!(Fa&268435455)&&!(p0&268435455)||ho(jr,Vr)}function Ah(t,e){var r=pt;pt|=2;var n=qC();(jr!==t||Vr!==e)&&(Ii=null,Ra(t,e));do try{O8();break}catch(s){YC(t,s)}while(!0);if(rx(),pt=r,Ch.current=n,vr!==null)throw Error(xe(261));return jr=null,Vr=0,Tr}function O8(){for(;vr!==null;)XC(vr)}function M8(){for(;vr!==null&&!nO();)XC(vr)}function XC(t){var e=ZC(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?KC(t):vr=e,px.current=null}function KC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=S8(r,e),r!==null){r.flags&=32767,vr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tr=6,vr=null;return}}else if(r=E8(r,e,Ln),r!==null){vr=r;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Tr===0&&(Tr=5)}function ma(t,e,r){var n=Et,s=ys.transition;try{ys.transition=null,Et=1,j8(t,e,r,n)}finally{ys.transition=s,Et=n}return null}function j8(t,e,r,n){do Yl();while(bo!==null);if(pt&6)throw Error(xe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(xe(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(hO(t,i),t===jr&&(vr=jr=null,Vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pf||(pf=!0,JC(ah,function(){return Yl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ys.transition,ys.transition=null;var l=Et;Et=1;var u=pt;pt|=4,px.current=null,N8(t,r),$C(r,t),JO(Jp),ch=!!Zp,Jp=Zp=null,t.current=r,T8(r),sO(),pt=u,Et=l,ys.transition=i}else t.current=r;if(pf&&(pf=!1,bo=t,Sh=s),i=t.pendingLanes,i===0&&(Oo=null),aO(r.stateNode),Tn(t,mr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Eh)throw Eh=!1,t=w1,w1=null,t;return Sh&1&&t.tag!==0&&Yl(),i=t.pendingLanes,i&1?t===v1?Iu++:(Iu=0,v1=t):Iu=0,qo(),null}function Yl(){if(bo!==null){var t=R_(Sh),e=ys.transition,r=Et;try{if(ys.transition=null,Et=16>t?16:t,bo===null)var n=!1;else{if(t=bo,bo=null,Sh=0,pt&6)throw Error(xe(331));var s=pt;for(pt|=4,Oe=t.current;Oe!==null;){var i=Oe,l=i.child;if(Oe.flags&16){var u=i.deletions;if(u!==null){for(var m=0;m<u.length;m++){var h=u[m];for(Oe=h;Oe!==null;){var x=Oe;switch(x.tag){case 0:case 11:case 15:Nu(8,x,i)}var y=x.child;if(y!==null)y.return=x,Oe=y;else for(;Oe!==null;){x=Oe;var v=x.sibling,b=x.return;if(zC(x),x===h){Oe=null;break}if(v!==null){v.return=b,Oe=v;break}Oe=b}}}var S=i.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}Oe=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Oe=l;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nu(9,i,i.return)}var R=i.sibling;if(R!==null){R.return=i.return,Oe=R;break e}Oe=i.return}}var A=t.current;for(Oe=A;Oe!==null;){l=Oe;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,Oe=N;else e:for(l=A;Oe!==null;){if(u=Oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:m0(9,u)}}catch(k){lr(u,u.return,k)}if(u===l){Oe=null;break e}var O=u.sibling;if(O!==null){O.return=u.return,Oe=O;break e}Oe=u.return}}if(pt=s,qo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(o0,t)}catch{}n=!0}return n}finally{Et=r,ys.transition=e}}return!1}function Ev(t,e,r){e=mc(r,e),e=RC(t,e,1),t=Ro(t,e,1),e=dn(),t!==null&&(Ed(t,1,e),Tn(t,e))}function lr(t,e,r){if(t.tag===3)Ev(t,t,r);else for(;e!==null;){if(e.tag===3){Ev(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oo===null||!Oo.has(n))){t=mc(r,t),t=OC(e,t,1),e=Ro(e,t,1),t=dn(),e!==null&&(Ed(e,1,t),Tn(e,t));break}}e=e.return}}function k8(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=dn(),t.pingedLanes|=t.suspendedLanes&r,jr===t&&(Vr&r)===r&&(Tr===4||Tr===3&&(Vr&130023424)===Vr&&500>mr()-xx?Ra(t,0):gx|=r),Tn(t,e)}function QC(t,e){e===0&&(t.mode&1?(e=sf,sf<<=1,!(sf&130023424)&&(sf=4194304)):e=1);var r=dn();t=Hi(t,e),t!==null&&(Ed(t,e,r),Tn(t,r))}function P8(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),QC(t,r)}function D8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(xe(314))}n!==null&&n.delete(e),QC(t,r)}var ZC;ZC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Sn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Sn=!1,C8(t,e,r);Sn=!!(t.flags&131072)}else Sn=!1,$t&&e.flags&1048576&&rC(e,gh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wf(t,e),t=e.pendingProps;var s=uc(e,en.current);Gl(e,r),s=ux(null,e,n,t,s,r);var i=dx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(n)?(i=!0,mh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ix(e),s.updater=h0,e.stateNode=s,s._reactInternals=e,l1(e,n,t,r),e=d1(null,e,n,!0,i,r)):(e.tag=0,$t&&i&&Zg(e),an(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Wf(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=B8(n),t=Ms(n,t),s){case 0:e=u1(null,e,n,t,r);break e;case 1:e=mv(null,e,n,t,r);break e;case 11:e=fv(null,e,n,t,r);break e;case 14:e=hv(null,e,n,Ms(n.type,t),r);break e}throw Error(xe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),u1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),mv(t,e,n,s,r);case 3:e:{if(PC(e),t===null)throw Error(xe(387));n=e.pendingProps,i=e.memoizedState,s=i.element,lC(t,e),wh(e,n,null,r);var l=e.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mc(Error(xe(423)),e),e=pv(t,e,n,r,s);break e}else if(n!==s){s=mc(Error(xe(424)),e),e=pv(t,e,n,r,s);break e}else for($n=Io(e.stateNode.containerInfo.firstChild),qn=e,$t=!0,Us=null,r=oC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(dc(),n===s){e=$i(t,e,r);break e}an(t,e,n,r)}e=e.child}return e;case 5:return cC(e),t===null&&i1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,e1(n,s)?l=null:i!==null&&e1(n,i)&&(e.flags|=32),kC(t,e),an(t,e,l,r),e.child;case 6:return t===null&&i1(e),null;case 13:return DC(t,e,r);case 4:return ox(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=fc(e,null,n,r):an(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),fv(t,e,n,s,r);case 7:return an(t,e,e.pendingProps,r),e.child;case 8:return an(t,e,e.pendingProps.children,r),e.child;case 12:return an(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,kt(xh,n._currentValue),n._currentValue=l,i!==null)if(Gs(i.value,l)){if(i.children===s.children&&!An.current){e=$i(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){l=i.child;for(var m=u.firstContext;m!==null;){if(m.context===n){if(i.tag===1){m=Ui(-1,r&-r),m.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?m.next=m:(m.next=x.next,x.next=m),h.pending=m}}i.lanes|=r,m=i.alternate,m!==null&&(m.lanes|=r),o1(i.return,r,e),u.lanes|=r;break}m=m.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(xe(341));l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),o1(l,r,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}an(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Gl(e,r),s=vs(s),n=n(s),e.flags|=1,an(t,e,n,r),e.child;case 14:return n=e.type,s=Ms(n,e.pendingProps),s=Ms(n.type,s),hv(t,e,n,s,r);case 15:return MC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ms(n,s),Wf(t,e),e.tag=1,Nn(n)?(t=!0,mh(e)):t=!1,Gl(e,r),IC(e,n,s),l1(e,n,s,r),d1(null,e,n,!0,t,r);case 19:return LC(t,e,r);case 22:return jC(t,e,r)}throw Error(xe(156,e.tag))};function JC(t,e){return A_(t,e)}function L8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,e,r,n){return new L8(t,e,r,n)}function bx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B8(t){if(typeof t=="function")return bx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ug)return 11;if(t===zg)return 14}return 2}function jo(t,e){var r=t.alternate;return r===null?(r=fs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function qf(t,e,r,n,s,i){var l=2;if(n=t,typeof t=="function")bx(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Nl:return Oa(r.children,s,i,e);case Fg:l=8,s|=8;break;case Mp:return t=fs(12,r,e,s|2),t.elementType=Mp,t.lanes=i,t;case jp:return t=fs(13,r,e,s),t.elementType=jp,t.lanes=i,t;case kp:return t=fs(19,r,e,s),t.elementType=kp,t.lanes=i,t;case c_:return g0(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case a_:l=10;break e;case l_:l=9;break e;case Ug:l=11;break e;case zg:l=14;break e;case co:l=16,n=null;break e}throw Error(xe(130,t==null?t:typeof t,""))}return e=fs(l,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Oa(t,e,r,n){return t=fs(7,t,n,e),t.lanes=r,t}function g0(t,e,r,n){return t=fs(22,t,n,e),t.elementType=c_,t.lanes=r,t.stateNode={isHidden:!1},t}function Gm(t,e,r){return t=fs(6,t,null,e),t.lanes=r,t}function Ym(t,e,r){return e=fs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F8(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nm(0),this.expirationTimes=Nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nm(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _x(t,e,r,n,s,i,l,u,m){return t=new F8(t,e,r,u,m),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ix(i),t}function U8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Al,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function eE(t){if(!t)return Fo;t=t._reactInternals;e:{if(Xa(t)!==t||t.tag!==1)throw Error(xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(t.tag===1){var r=t.type;if(Nn(r))return eC(t,r,e)}return e}function tE(t,e,r,n,s,i,l,u,m){return t=_x(r,n,!0,t,s,i,l,u,m),t.context=eE(null),r=t.current,n=dn(),s=Mo(r),i=Ui(n,s),i.callback=e??null,Ro(r,i,s),t.current.lanes=s,Ed(t,s,n),Tn(t,n),t}function x0(t,e,r,n){var s=e.current,i=dn(),l=Mo(s);return r=eE(r),e.context===null?e.context=r:e.pendingContext=r,e=Ui(i,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ro(s,e,l),t!==null&&(Hs(t,s,l,i),Vf(t,s,l)),l}function Nh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Cx(t,e){Sv(t,e),(t=t.alternate)&&Sv(t,e)}function z8(){return null}var rE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ex(t){this._internalRoot=t}y0.prototype.render=Ex.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(xe(409));x0(t,e,null,null)};y0.prototype.unmount=Ex.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ua(function(){x0(null,t,null,null)}),e[Vi]=null}};function y0(t){this._internalRoot=t}y0.prototype.unstable_scheduleHydration=function(t){if(t){var e=j_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<fo.length&&e!==0&&e<fo[r].priority;r++);fo.splice(r,0,t),r===0&&P_(t)}};function Sx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function w0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Av(){}function V8(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var h=Nh(l);i.call(h)}}var l=tE(e,n,t,0,null,!1,!1,"",Av);return t._reactRootContainer=l,t[Vi]=l.current,Wu(t.nodeType===8?t.parentNode:t),Ua(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var u=n;n=function(){var h=Nh(m);u.call(h)}}var m=_x(t,0,!1,null,null,!1,!1,"",Av);return t._reactRootContainer=m,t[Vi]=m.current,Wu(t.nodeType===8?t.parentNode:t),Ua(function(){x0(e,m,r,n)}),m}function v0(t,e,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var u=s;s=function(){var m=Nh(l);u.call(m)}}x0(e,l,t,s)}else l=V8(r,e,t,s,n);return Nh(l)}O_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=mu(e.pendingLanes);r!==0&&($g(e,r|1),Tn(e,mr()),!(pt&6)&&(pc=mr()+500,qo()))}break;case 13:Ua(function(){var n=Hi(t,1);if(n!==null){var s=dn();Hs(n,t,1,s)}}),Cx(t,1)}};Wg=function(t){if(t.tag===13){var e=Hi(t,134217728);if(e!==null){var r=dn();Hs(e,t,134217728,r)}Cx(t,134217728)}};M_=function(t){if(t.tag===13){var e=Mo(t),r=Hi(t,e);if(r!==null){var n=dn();Hs(r,t,e,n)}Cx(t,e)}};j_=function(){return Et};k_=function(t,e){var r=Et;try{return Et=t,e()}finally{Et=r}};$p=function(t,e,r){switch(e){case"input":if(Lp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=u0(n);if(!s)throw Error(xe(90));d_(n),Lp(n,s)}}}break;case"textarea":h_(t,r);break;case"select":e=r.value,e!=null&&Vl(t,!!r.multiple,e,!1)}};v_=yx;b_=Ua;var H8={usingClientEntryPoint:!1,Events:[Ad,Ol,u0,y_,w_,yx]},ou={findFiberByHostInstance:wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$8={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E_(t),t===null?null:t.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||z8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{o0=gf.inject($8),mi=gf}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H8;es.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sx(e))throw Error(xe(200));return U8(t,e,null,r)};es.createRoot=function(t,e){if(!Sx(t))throw Error(xe(299));var r=!1,n="",s=rE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_x(t,1,!1,null,null,r,!1,n,s),t[Vi]=e.current,Wu(t.nodeType===8?t.parentNode:t),new Ex(e)};es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xe(188)):(t=Object.keys(t).join(","),Error(xe(268,t)));return t=E_(e),t=t===null?null:t.stateNode,t};es.flushSync=function(t){return Ua(t)};es.hydrate=function(t,e,r){if(!w0(e))throw Error(xe(200));return v0(null,t,e,!0,r)};es.hydrateRoot=function(t,e,r){if(!Sx(t))throw Error(xe(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=rE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=tE(e,null,t,1,r??null,s,!1,i,l),t[Vi]=e.current,Wu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new y0(e)};es.render=function(t,e,r){if(!w0(e))throw Error(xe(200));return v0(null,t,e,!1,r)};es.unmountComponentAtNode=function(t){if(!w0(t))throw Error(xe(40));return t._reactRootContainer?(Ua(function(){v0(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};es.unstable_batchedUpdates=yx;es.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!w0(r))throw Error(xe(200));if(t==null||t._reactInternals===void 0)throw Error(xe(38));return v0(t,e,r,!1,n)};es.version="18.3.1-next-f1338f8080-20240426";function nE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nE)}catch(t){console.error(t)}}nE(),n_.exports=es;var Ka=n_.exports;const sE=Rg(Ka);var iE,Nv=Ka;iE=Nv.createRoot,Nv.hydrateRoot;const W8=1,G8=1e6;let qm=0;function Y8(){return qm=(qm+1)%Number.MAX_SAFE_INTEGER,qm.toString()}const Xm=new Map,Tv=t=>{if(Xm.has(t))return;const e=setTimeout(()=>{Xm.delete(t),Ru({type:"REMOVE_TOAST",toastId:t})},G8);Xm.set(t,e)},q8=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,W8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Tv(r):t.toasts.forEach(n=>{Tv(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Xf=[];let Kf={toasts:[]};function Ru(t){Kf=q8(Kf,t),Xf.forEach(e=>{e(Kf)})}function X8({...t}){const e=Y8(),r=s=>Ru({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Ru({type:"DISMISS_TOAST",toastId:e});return Ru({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function K8(){const[t,e]=E.useState(Kf);return E.useEffect(()=>(Xf.push(e),()=>{const r=Xf.indexOf(e);r>-1&&Xf.splice(r,1)}),[t]),{...t,toast:X8,dismiss:r=>Ru({type:"DISMISS_TOAST",toastId:r})}}function Ae(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Iv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function b0(...t){return e=>{let r=!1;const n=t.map(s=>{const i=Iv(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Iv(t[s],null)}}}}function Je(...t){return E.useCallback(b0(...t),t)}function Q8(t,e){const r=E.createContext(e),n=i=>{const{children:l,...u}=i,m=E.useMemo(()=>u,Object.values(u));return d.jsx(r.Provider,{value:m,children:l})};n.displayName=t+"Provider";function s(i){const l=E.useContext(r);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function pn(t,e=[]){let r=[];function n(i,l){const u=E.createContext(l),m=r.length;r=[...r,l];const h=y=>{var R;const{scope:v,children:b,...S}=y,C=((R=v==null?void 0:v[t])==null?void 0:R[m])||u,I=E.useMemo(()=>S,Object.values(S));return d.jsx(C.Provider,{value:I,children:b})};h.displayName=i+"Provider";function x(y,v){var C;const b=((C=v==null?void 0:v[t])==null?void 0:C[m])||u,S=E.useContext(b);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[h,x]}const s=()=>{const i=r.map(l=>E.createContext(l));return function(u){const m=(u==null?void 0:u[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:m}}),[u,m])}};return s.scopeName=t,[n,Z8(s,...e)]}function Z8(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=n.reduce((u,{useScope:m,scopeName:h})=>{const y=m(i)[`__scope${h}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function za(t){const e=eM(t),r=E.forwardRef((n,s)=>{const{children:i,...l}=n,u=E.Children.toArray(i),m=u.find(rM);if(m){const h=m.props.children,x=u.map(y=>y===m?E.Children.count(h)>1?E.Children.only(null):E.isValidElement(h)?h.props.children:null:y);return d.jsx(e,{...l,ref:s,children:E.isValidElement(h)?E.cloneElement(h,void 0,x):null})}return d.jsx(e,{...l,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var J8=za("Slot");function eM(t){const e=E.forwardRef((r,n)=>{const{children:s,...i}=r;if(E.isValidElement(s)){const l=sM(s),u=nM(i,s.props);return s.type!==E.Fragment&&(u.ref=n?b0(n,l):l),E.cloneElement(s,u)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var oE=Symbol("radix.slottable");function tM(t){const e=({children:r})=>d.jsx(d.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=oE,e}function rM(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===oE}function nM(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...u)=>{const m=i(...u);return s(...u),m}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function sM(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function _0(t){const e=t+"CollectionProvider",[r,n]=pn(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),l=C=>{const{scope:I,children:R}=C,A=me.useRef(null),N=me.useRef(new Map).current;return d.jsx(s,{scope:I,itemMap:N,collectionRef:A,children:R})};l.displayName=e;const u=t+"CollectionSlot",m=za(u),h=me.forwardRef((C,I)=>{const{scope:R,children:A}=C,N=i(u,R),O=Je(I,N.collectionRef);return d.jsx(m,{ref:O,children:A})});h.displayName=u;const x=t+"CollectionItemSlot",y="data-radix-collection-item",v=za(x),b=me.forwardRef((C,I)=>{const{scope:R,children:A,...N}=C,O=me.useRef(null),k=Je(I,O),F=i(x,R);return me.useEffect(()=>(F.itemMap.set(O,{ref:O,...N}),()=>void F.itemMap.delete(O))),d.jsx(v,{[y]:"",ref:k,children:A})});b.displayName=x;function S(C){const I=i(t+"CollectionConsumer",C);return me.useCallback(()=>{const A=I.collectionRef.current;if(!A)return[];const N=Array.from(A.querySelectorAll(`[${y}]`));return Array.from(I.itemMap.values()).sort((F,B)=>N.indexOf(F.ref.current)-N.indexOf(B.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:l,Slot:h,ItemSlot:b},S,n]}var iM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=iM.reduce((t,e)=>{const r=za(`Primitive.${e}`),n=E.forwardRef((s,i)=>{const{asChild:l,...u}=s,m=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(m,{...u,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Ax(t,e){t&&Ka.flushSync(()=>t.dispatchEvent(e))}function cr(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function oM(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t);E.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var aM="DismissableLayer",C1="dismissableLayer.update",lM="dismissableLayer.pointerDownOutside",cM="dismissableLayer.focusOutside",Rv,aE=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mc=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:u,...m}=t,h=E.useContext(aE),[x,y]=E.useState(null),v=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Je(e,B=>y(B)),C=Array.from(h.layers),[I]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),R=C.indexOf(I),A=x?C.indexOf(x):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,O=A>=R,k=dM(B=>{const P=B.target,j=[...h.branches].some(W=>W.contains(P));!O||j||(s==null||s(B),l==null||l(B),B.defaultPrevented||u==null||u())},v),F=fM(B=>{const P=B.target;[...h.branches].some(W=>W.contains(P))||(i==null||i(B),l==null||l(B),B.defaultPrevented||u==null||u())},v);return oM(B=>{A===h.layers.size-1&&(n==null||n(B),!B.defaultPrevented&&u&&(B.preventDefault(),u()))},v),E.useEffect(()=>{if(x)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Rv=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(x)),h.layers.add(x),Ov(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Rv)}},[x,v,r,h]),E.useEffect(()=>()=>{x&&(h.layers.delete(x),h.layersWithOutsidePointerEventsDisabled.delete(x),Ov())},[x,h]),E.useEffect(()=>{const B=()=>b({});return document.addEventListener(C1,B),()=>document.removeEventListener(C1,B)},[]),d.jsx(Le.div,{...m,ref:S,style:{pointerEvents:N?O?"auto":"none":void 0,...t.style},onFocusCapture:Ae(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Ae(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Ae(t.onPointerDownCapture,k.onPointerDownCapture)})});Mc.displayName=aM;var uM="DismissableLayerBranch",lE=E.forwardRef((t,e)=>{const r=E.useContext(aE),n=E.useRef(null),s=Je(e,n);return E.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),d.jsx(Le.div,{...t,ref:s})});lE.displayName=uM;function dM(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t),n=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const i=u=>{if(u.target&&!n.current){let m=function(){cE(lM,r,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=m,e.addEventListener("click",s.current,{once:!0})):m()}else e.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function fM(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t),n=E.useRef(!1);return E.useEffect(()=>{const s=i=>{i.target&&!n.current&&cE(cM,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ov(){const t=new CustomEvent(C1);document.dispatchEvent(t)}function cE(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ax(s,i):s.dispatchEvent(i)}var hM=Mc,mM=lE,gr=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},pM="Portal",Td=E.forwardRef((t,e)=>{var u;const{container:r,...n}=t,[s,i]=E.useState(!1);gr(()=>i(!0),[]);const l=r||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?sE.createPortal(d.jsx(Le.div,{...n,ref:e}),l):null});Td.displayName=pM;function gM(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var tn=t=>{const{present:e,children:r}=t,n=xM(e),s=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),i=Je(n.ref,yM(s));return typeof r=="function"||n.isPresent?E.cloneElement(s,{ref:i}):null};tn.displayName="Presence";function xM(t){const[e,r]=E.useState(),n=E.useRef(null),s=E.useRef(t),i=E.useRef("none"),l=t?"mounted":"unmounted",[u,m]=gM(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const h=xf(n.current);i.current=u==="mounted"?h:"none"},[u]),gr(()=>{const h=n.current,x=s.current;if(x!==t){const v=i.current,b=xf(h);t?m("MOUNT"):b==="none"||(h==null?void 0:h.display)==="none"?m("UNMOUNT"):m(x&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,m]),gr(()=>{if(e){let h;const x=e.ownerDocument.defaultView??window,y=b=>{const C=xf(n.current).includes(b.animationName);if(b.target===e&&C&&(m("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",h=x.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},v=b=>{b.target===e&&(i.current=xf(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{x.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(h=>{n.current=h?getComputedStyle(h):null,r(h)},[])}}function xf(t){return(t==null?void 0:t.animationName)||"none"}function yM(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var wM=Pg[" useInsertionEffect ".trim().toString()]||gr;function yi({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,i,l]=vM({defaultProp:e,onChange:r}),u=t!==void 0,m=u?t:s;{const x=E.useRef(t!==void 0);E.useEffect(()=>{const y=x.current;y!==u&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,n])}const h=E.useCallback(x=>{var y;if(u){const v=bM(x)?x(t):x;v!==t&&((y=l.current)==null||y.call(l,v))}else i(x)},[u,t,i,l]);return[m,h]}function vM({defaultProp:t,onChange:e}){const[r,n]=E.useState(t),s=E.useRef(r),i=E.useRef(e);return wM(()=>{i.current=e},[e]),E.useEffect(()=>{var l;s.current!==r&&((l=i.current)==null||l.call(i,r),s.current=r)},[r,s]),[r,n,i]}function bM(t){return typeof t=="function"}var uE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_M="VisuallyHidden",C0=E.forwardRef((t,e)=>d.jsx(Le.span,{...t,ref:e,style:{...uE,...t.style}}));C0.displayName=_M;var CM=C0,Nx="ToastProvider",[Tx,EM,SM]=_0("Toast"),[dE,JV]=pn("Toast",[SM]),[AM,E0]=dE(Nx),fE=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=t,[u,m]=E.useState(null),[h,x]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Nx}\`. Expected non-empty \`string\`.`),d.jsx(Tx.Provider,{scope:e,children:d.jsx(AM,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:u,onViewportChange:m,onToastAdd:E.useCallback(()=>x(b=>b+1),[]),onToastRemove:E.useCallback(()=>x(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:l})})};fE.displayName=Nx;var hE="ToastViewport",NM=["F8"],E1="toast.viewportPause",S1="toast.viewportResume",mE=E.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=NM,label:s="Notifications ({hotkey})",...i}=t,l=E0(hE,r),u=EM(r),m=E.useRef(null),h=E.useRef(null),x=E.useRef(null),y=E.useRef(null),v=Je(e,y,l.onViewportChange),b=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;E.useEffect(()=>{const I=R=>{var N;n.length!==0&&n.every(O=>R[O]||R.code===O)&&((N=y.current)==null||N.focus())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n]),E.useEffect(()=>{const I=m.current,R=y.current;if(S&&I&&R){const A=()=>{if(!l.isClosePausedRef.current){const F=new CustomEvent(E1);R.dispatchEvent(F),l.isClosePausedRef.current=!0}},N=()=>{if(l.isClosePausedRef.current){const F=new CustomEvent(S1);R.dispatchEvent(F),l.isClosePausedRef.current=!1}},O=F=>{!I.contains(F.relatedTarget)&&N()},k=()=>{I.contains(document.activeElement)||N()};return I.addEventListener("focusin",A),I.addEventListener("focusout",O),I.addEventListener("pointermove",A),I.addEventListener("pointerleave",k),window.addEventListener("blur",A),window.addEventListener("focus",N),()=>{I.removeEventListener("focusin",A),I.removeEventListener("focusout",O),I.removeEventListener("pointermove",A),I.removeEventListener("pointerleave",k),window.removeEventListener("blur",A),window.removeEventListener("focus",N)}}},[S,l.isClosePausedRef]);const C=E.useCallback(({tabbingDirection:I})=>{const A=u().map(N=>{const O=N.ref.current,k=[O,...UM(O)];return I==="forwards"?k:k.reverse()});return(I==="forwards"?A.reverse():A).flat()},[u]);return E.useEffect(()=>{const I=y.current;if(I){const R=A=>{var k,F,B;const N=A.altKey||A.ctrlKey||A.metaKey;if(A.key==="Tab"&&!N){const P=document.activeElement,j=A.shiftKey;if(A.target===I&&j){(k=h.current)==null||k.focus();return}const z=C({tabbingDirection:j?"backwards":"forwards"}),X=z.findIndex(G=>G===P);Km(z.slice(X+1))?A.preventDefault():j?(F=h.current)==null||F.focus():(B=x.current)==null||B.focus()}};return I.addEventListener("keydown",R),()=>I.removeEventListener("keydown",R)}},[u,C]),d.jsxs(mM,{ref:m,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&d.jsx(A1,{ref:h,onFocusFromOutsideViewport:()=>{const I=C({tabbingDirection:"forwards"});Km(I)}}),d.jsx(Tx.Slot,{scope:r,children:d.jsx(Le.ol,{tabIndex:-1,...i,ref:v})}),S&&d.jsx(A1,{ref:x,onFocusFromOutsideViewport:()=>{const I=C({tabbingDirection:"backwards"});Km(I)}})]})});mE.displayName=hE;var pE="ToastFocusProxy",A1=E.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=E0(pE,r);return d.jsx(C0,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var h;const u=l.relatedTarget;!((h=i.viewport)!=null&&h.contains(u))&&n()}})});A1.displayName=pE;var Id="Toast",TM="toast.swipeStart",IM="toast.swipeMove",RM="toast.swipeCancel",OM="toast.swipeEnd",gE=E.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...l}=t,[u,m]=yi({prop:n,defaultProp:s??!0,onChange:i,caller:Id});return d.jsx(tn,{present:r||u,children:d.jsx(kM,{open:u,...l,ref:e,onClose:()=>m(!1),onPause:cr(t.onPause),onResume:cr(t.onResume),onSwipeStart:Ae(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ae(t.onSwipeMove,h=>{const{x,y}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Ae(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ae(t.onSwipeEnd,h=>{const{x,y}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),m(!1)})})})});gE.displayName=Id;var[MM,jM]=dE(Id,{onClose(){}}),kM=E.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:u,onPause:m,onResume:h,onSwipeStart:x,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...S}=t,C=E0(Id,r),[I,R]=E.useState(null),A=Je(e,G=>R(G)),N=E.useRef(null),O=E.useRef(null),k=s||C.duration,F=E.useRef(0),B=E.useRef(k),P=E.useRef(0),{onToastAdd:j,onToastRemove:W}=C,Y=cr(()=>{var H;(I==null?void 0:I.contains(document.activeElement))&&((H=C.viewport)==null||H.focus()),l()}),z=E.useCallback(G=>{!G||G===1/0||(window.clearTimeout(P.current),F.current=new Date().getTime(),P.current=window.setTimeout(Y,G))},[Y]);E.useEffect(()=>{const G=C.viewport;if(G){const H=()=>{z(B.current),h==null||h()},te=()=>{const J=new Date().getTime()-F.current;B.current=B.current-J,window.clearTimeout(P.current),m==null||m()};return G.addEventListener(E1,te),G.addEventListener(S1,H),()=>{G.removeEventListener(E1,te),G.removeEventListener(S1,H)}}},[C.viewport,k,m,h,z]),E.useEffect(()=>{i&&!C.isClosePausedRef.current&&z(k)},[i,k,C.isClosePausedRef,z]),E.useEffect(()=>(j(),()=>W()),[j,W]);const X=E.useMemo(()=>I?CE(I):null,[I]);return C.viewport?d.jsxs(d.Fragment,{children:[X&&d.jsx(PM,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:X}),d.jsx(MM,{scope:r,onClose:Y,children:Ka.createPortal(d.jsx(Tx.ItemSlot,{scope:r,children:d.jsx(hM,{asChild:!0,onEscapeKeyDown:Ae(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||Y(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":C.swipeDirection,...S,ref:A,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ae(t.onKeyDown,G=>{G.key==="Escape"&&(u==null||u(G.nativeEvent),G.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:Ae(t.onPointerDown,G=>{G.button===0&&(N.current={x:G.clientX,y:G.clientY})}),onPointerMove:Ae(t.onPointerMove,G=>{if(!N.current)return;const H=G.clientX-N.current.x,te=G.clientY-N.current.y,J=!!O.current,Z=["left","right"].includes(C.swipeDirection),K=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ne=Z?K(0,H):0,pe=Z?0:K(0,te),ae=G.pointerType==="touch"?10:2,le={x:ne,y:pe},fe={originalEvent:G,delta:le};J?(O.current=le,yf(IM,y,fe,{discrete:!1})):Mv(le,C.swipeDirection,ae)?(O.current=le,yf(TM,x,fe,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(H)>ae||Math.abs(te)>ae)&&(N.current=null)}),onPointerUp:Ae(t.onPointerUp,G=>{const H=O.current,te=G.target;if(te.hasPointerCapture(G.pointerId)&&te.releasePointerCapture(G.pointerId),O.current=null,N.current=null,H){const J=G.currentTarget,Z={originalEvent:G,delta:H};Mv(H,C.swipeDirection,C.swipeThreshold)?yf(OM,b,Z,{discrete:!0}):yf(RM,v,Z,{discrete:!0}),J.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),PM=t=>{const{__scopeToast:e,children:r,...n}=t,s=E0(Id,e),[i,l]=E.useState(!1),[u,m]=E.useState(!1);return BM(()=>l(!0)),E.useEffect(()=>{const h=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:d.jsx(Td,{asChild:!0,children:d.jsx(C0,{...n,children:i&&d.jsxs(d.Fragment,{children:[s.label," ",r]})})})},DM="ToastTitle",xE=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return d.jsx(Le.div,{...n,ref:e})});xE.displayName=DM;var LM="ToastDescription",yE=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return d.jsx(Le.div,{...n,ref:e})});yE.displayName=LM;var wE="ToastAction",vE=E.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?d.jsx(_E,{altText:r,asChild:!0,children:d.jsx(Ix,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${wE}\`. Expected non-empty \`string\`.`),null)});vE.displayName=wE;var bE="ToastClose",Ix=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=jM(bE,r);return d.jsx(_E,{asChild:!0,children:d.jsx(Le.button,{type:"button",...n,ref:e,onClick:Ae(t.onClick,s.onClose)})})});Ix.displayName=bE;var _E=E.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return d.jsx(Le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function CE(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),FM(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...CE(n))}}),e}function yf(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Ax(s,i):s.dispatchEvent(i)}var Mv=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function BM(t=()=>{}){const e=cr(t);gr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function FM(t){return t.nodeType===t.ELEMENT_NODE}function UM(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Km(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var zM=fE,EE=mE,SE=gE,AE=xE,NE=yE,TE=vE,IE=Ix;function RE(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=RE(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function OE(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=RE(t))&&(n&&(n+=" "),n+=e);return n}const jv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,kv=OE,S0=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return kv(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(h=>{const x=r==null?void 0:r[h],y=i==null?void 0:i[h];if(x===null)return null;const v=jv(x)||jv(y);return s[h][v]}),u=r&&Object.entries(r).reduce((h,x)=>{let[y,v]=x;return v===void 0||(h[y]=v),h},{}),m=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,x)=>{let{class:y,className:v,...b}=x;return Object.entries(b).every(S=>{let[C,I]=S;return Array.isArray(I)?I.includes({...i,...u}[C]):{...i,...u}[C]===I})?[...h,y,v]:h},[]);return kv(t,l,m,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ME=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},m)=>E.createElement("svg",{ref:m,...HM,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:ME("lucide",s),...u},[...l.map(([h,x])=>E.createElement(h,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const r=E.forwardRef(({className:n,...s},i)=>E.createElement($M,{ref:i,iconNode:e,className:ME(`lucide-${VM(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=We("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=We("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=We("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=We("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=We("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=We("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=We("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=We("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=We("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=We("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=We("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=We("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=We("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=We("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=We("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=We("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=We("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=We("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=We("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=We("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=We("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=We("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=We("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=We("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=We("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=We("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=We("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=We("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=We("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=We("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=We("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=We("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=We("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=We("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=We("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Px="-",aj=t=>{const e=cj(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const u=l.split(Px);return u[0]===""&&u.length!==1&&u.shift(),WE(u,e)||lj(l)},getConflictingClassGroupIds:(l,u)=>{const m=r[l]||[];return u&&n[l]?[...m,...n[l]]:m}}},WE=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?WE(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Px);return(l=e.validators.find(({validator:u})=>u(i)))==null?void 0:l.classGroupId},Uv=/^\[(.+)\]$/,lj=t=>{if(Uv.test(t)){const e=Uv.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},cj=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return dj(Object.entries(t.classGroups),r).forEach(([i,l])=>{T1(l,n,i,e)}),n},T1=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:zv(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(uj(s)){T1(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,l])=>{T1(l,zv(e,i),r,n)})})},zv=(t,e)=>{let r=t;return e.split(Px).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},uj=t=>t.isThemeGetter,dj=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,u])=>[e+l,u])):i);return[r,s]}):t,fj=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,l)=>{r.set(i,l),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return s(i,l),l},set(i,l){r.has(i)?r.set(i,l):s(i,l)}}},GE="!",hj=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,l=u=>{const m=[];let h=0,x=0,y;for(let I=0;I<u.length;I++){let R=u[I];if(h===0){if(R===s&&(n||u.slice(I,I+i)===e)){m.push(u.slice(x,I)),x=I+i;continue}if(R==="/"){y=I;continue}}R==="["?h++:R==="]"&&h--}const v=m.length===0?u:u.substring(x),b=v.startsWith(GE),S=b?v.substring(1):v,C=y&&y>x?y-x:void 0;return{modifiers:m,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:C}};return r?u=>r({className:u,parseClassName:l}):l},mj=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},pj=t=>({cache:fj(t.cacheSize),parseClassName:hj(t),...aj(t)}),gj=/\s+/,xj=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],l=t.trim().split(gj);let u="";for(let m=l.length-1;m>=0;m-=1){const h=l[m],{modifiers:x,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=r(h);let S=!!b,C=n(S?v.substring(0,b):v);if(!C){if(!S){u=h+(u.length>0?" "+u:u);continue}if(C=n(v),!C){u=h+(u.length>0?" "+u:u);continue}S=!1}const I=mj(x).join(":"),R=y?I+GE:I,A=R+C;if(i.includes(A))continue;i.push(A);const N=s(C,S);for(let O=0;O<N.length;++O){const k=N[O];i.push(R+k)}u=h+(u.length>0?" "+u:u)}return u};function yj(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=YE(e))&&(n&&(n+=" "),n+=r);return n}const YE=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=YE(t[n]))&&(r&&(r+=" "),r+=e);return r};function wj(t,...e){let r,n,s,i=l;function l(m){const h=e.reduce((x,y)=>y(x),t());return r=pj(h),n=r.cache.get,s=r.cache.set,i=u,u(m)}function u(m){const h=n(m);if(h)return h;const x=xj(m,r);return s(m,x),x}return function(){return i(yj.apply(null,arguments))}}const Dt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},qE=/^\[(?:([a-z-]+):)?(.+)\]$/i,vj=/^\d+\/\d+$/,bj=new Set(["px","full","screen"]),_j=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Cj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ej=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Aj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ni=t=>ql(t)||bj.has(t)||vj.test(t),no=t=>kc(t,"length",kj),ql=t=>!!t&&!Number.isNaN(Number(t)),Zm=t=>kc(t,"number",ql),au=t=>!!t&&Number.isInteger(Number(t)),Nj=t=>t.endsWith("%")&&ql(t.slice(0,-1)),tt=t=>qE.test(t),so=t=>_j.test(t),Tj=new Set(["length","size","percentage"]),Ij=t=>kc(t,Tj,XE),Rj=t=>kc(t,"position",XE),Oj=new Set(["image","url"]),Mj=t=>kc(t,Oj,Dj),jj=t=>kc(t,"",Pj),lu=()=>!0,kc=(t,e,r)=>{const n=qE.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},kj=t=>Cj.test(t)&&!Ej.test(t),XE=()=>!1,Pj=t=>Sj.test(t),Dj=t=>Aj.test(t),Lj=()=>{const t=Dt("colors"),e=Dt("spacing"),r=Dt("blur"),n=Dt("brightness"),s=Dt("borderColor"),i=Dt("borderRadius"),l=Dt("borderSpacing"),u=Dt("borderWidth"),m=Dt("contrast"),h=Dt("grayscale"),x=Dt("hueRotate"),y=Dt("invert"),v=Dt("gap"),b=Dt("gradientColorStops"),S=Dt("gradientColorStopPositions"),C=Dt("inset"),I=Dt("margin"),R=Dt("opacity"),A=Dt("padding"),N=Dt("saturate"),O=Dt("scale"),k=Dt("sepia"),F=Dt("skew"),B=Dt("space"),P=Dt("translate"),j=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",tt,e],z=()=>[tt,e],X=()=>["",Ni,no],G=()=>["auto",ql,tt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",tt],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],pe=()=>[ql,tt];return{cacheSize:500,separator:":",theme:{colors:[lu],spacing:[Ni,no],blur:["none","",so,tt],brightness:pe(),borderColor:[t],borderRadius:["none","","full",so,tt],borderSpacing:z(),borderWidth:X(),contrast:pe(),grayscale:K(),hueRotate:pe(),invert:K(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[Nj,no],inset:Y(),margin:Y(),opacity:pe(),padding:z(),saturate:pe(),scale:pe(),sepia:K(),skew:pe(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),tt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",au,tt]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",au,tt]}],"grid-cols":[{"grid-cols":[lu]}],"col-start-end":[{col:["auto",{span:["full",au,tt]},tt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[lu]}],"row-start-end":[{row:["auto",{span:[au,tt]},tt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[A]}],px:[{px:[A]}],py:[{py:[A]}],ps:[{ps:[A]}],pe:[{pe:[A]}],pt:[{pt:[A]}],pr:[{pr:[A]}],pb:[{pb:[A]}],pl:[{pl:[A]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,no]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zm]}],"font-family":[{font:[lu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",ql,Zm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ni,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ni,no]}],"underline-offset":[{"underline-offset":["auto",Ni,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),Rj]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ij]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mj]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:te()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Ni,tt]}],"outline-w":[{outline:[Ni,no]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Ni,no]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,jj]}],"shadow-color":[{shadow:[lu]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",so,tt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[y]}],saturate:[{saturate:[N]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:pe()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:pe()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[au,tt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ni,no,Zm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Bj=wj(Lj);function Te(...t){return Bj(OE(t))}const Fj=zM,KE=E.forwardRef(({className:t,...e},r)=>d.jsx(EE,{ref:r,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));KE.displayName=EE.displayName;const Uj=S0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),QE=E.forwardRef(({className:t,variant:e,...r},n)=>d.jsx(SE,{ref:n,className:Te(Uj({variant:e}),t),...r}));QE.displayName=SE.displayName;const zj=E.forwardRef(({className:t,...e},r)=>d.jsx(TE,{ref:r,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));zj.displayName=TE.displayName;const ZE=E.forwardRef(({className:t,...e},r)=>d.jsx(IE,{ref:r,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:d.jsx($E,{className:"h-4 w-4"})}));ZE.displayName=IE.displayName;const JE=E.forwardRef(({className:t,...e},r)=>d.jsx(AE,{ref:r,className:Te("text-sm font-semibold",t),...e}));JE.displayName=AE.displayName;const eS=E.forwardRef(({className:t,...e},r)=>d.jsx(NE,{ref:r,className:Te("text-sm opacity-90",t),...e}));eS.displayName=NE.displayName;function Vj(){const{toasts:t}=K8();return d.jsxs(Fj,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return d.jsxs(QE,{...i,children:[d.jsxs("div",{className:"grid gap-1",children:[r&&d.jsx(JE,{children:r}),n&&d.jsx(eS,{children:n})]}),s,d.jsx(ZE,{})]},e)}),d.jsx(KE,{})]})}var Vv=["light","dark"],Hj="(prefers-color-scheme: dark)",$j=E.createContext(void 0),Wj={setTheme:t=>{},themes:[]},Gj=()=>{var t;return(t=E.useContext($j))!=null?t:Wj};E.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:l,attrs:u,nonce:m})=>{let h=i==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,y=s?Vv.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,C=!1,I=!0)=>{let R=l?l[S]:S,A=C?S+"|| ''":`'${R}'`,N="";return s&&I&&!C&&Vv.includes(S)&&(N+=`d.style.colorScheme = '${S}';`),r==="class"?C||R?N+=`c.add(${A})`:N+="null":R&&(N+=`d[s](n,${A})`),N},b=t?`!function(){${x}${v(t)}}()`:n?`!function(){try{${x}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${Hj}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}${h?"":"else{"+v(i,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${e}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:b}})});var Yj=t=>{switch(t){case"success":return Kj;case"info":return Zj;case"warning":return Qj;case"error":return Jj;default:return null}},qj=Array(12).fill(0),Xj=({visible:t,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},me.createElement("div",{className:"sonner-spinner"},qj.map((r,n)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Kj=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Qj=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Zj=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Jj=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ek=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),tk=()=>{let[t,e]=me.useState(document.hidden);return me.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},I1=1,rk=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:I1++,i=this.toasts.find(u=>u.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...t,id:s,title:r}),{...u,...t,id:s,dismissible:l,title:r}):u):this.addToast({title:r,...n,dismissible:l,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,i,l=n.then(async m=>{if(i=["resolve",m],me.isValidElement(m))s=!1,this.create({id:r,type:"default",message:m});else if(sk(m)&&!m.ok){s=!1;let h=typeof e.error=="function"?await e.error(`HTTP error! status: ${m.status}`):e.error,x=typeof e.description=="function"?await e.description(`HTTP error! status: ${m.status}`):e.description;this.create({id:r,type:"error",message:h,description:x})}else if(e.success!==void 0){s=!1;let h=typeof e.success=="function"?await e.success(m):e.success,x=typeof e.description=="function"?await e.description(m):e.description;this.create({id:r,type:"success",message:h,description:x})}}).catch(async m=>{if(i=["reject",m],e.error!==void 0){s=!1;let h=typeof e.error=="function"?await e.error(m):e.error,x=typeof e.description=="function"?await e.description(m):e.description;this.create({id:r,type:"error",message:h,description:x})}}).finally(()=>{var m;s&&(this.dismiss(r),r=void 0),(m=e.finally)==null||m.call(e)}),u=()=>new Promise((m,h)=>l.then(()=>i[0]==="reject"?h(i[1]):m(i[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||I1++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Cn=new rk,nk=(t,e)=>{let r=(e==null?void 0:e.id)||I1++;return Cn.addToast({title:t,...e,id:r}),r},sk=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",ik=nk,ok=()=>Cn.toasts,ak=()=>Cn.getActiveToasts(),we=Object.assign(ik,{success:Cn.success,info:Cn.info,warning:Cn.warning,error:Cn.error,custom:Cn.custom,message:Cn.message,promise:Cn.promise,dismiss:Cn.dismiss,loading:Cn.loading},{getHistory:ok,getToasts:ak});function lk(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}lk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wf(t){return t.label!==void 0}var ck=3,uk="32px",dk="16px",Hv=4e3,fk=356,hk=14,mk=20,pk=200;function Ts(...t){return t.filter(Boolean).join(" ")}function gk(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var xk=t=>{var e,r,n,s,i,l,u,m,h,x,y;let{invert:v,toast:b,unstyled:S,interacting:C,setHeights:I,visibleToasts:R,heights:A,index:N,toasts:O,expanded:k,removeToast:F,defaultRichColors:B,closeButton:P,style:j,cancelButtonStyle:W,actionButtonStyle:Y,className:z="",descriptionClassName:X="",duration:G,position:H,gap:te,loadingIcon:J,expandByDefault:Z,classNames:K,icons:ne,closeButtonAriaLabel:pe="Close toast",pauseWhenPageIsHidden:ae}=t,[le,fe]=me.useState(null),[ze,ve]=me.useState(null),[be,ke]=me.useState(!1),[Xe,oe]=me.useState(!1),[Ee,je]=me.useState(!1),[Me,gt]=me.useState(!1),[St,er]=me.useState(!1),[he,Be]=me.useState(0),[Ne,bt]=me.useState(0),Ce=me.useRef(b.duration||G||Hv),Pr=me.useRef(null),it=me.useRef(null),tr=N===0,ra=N+1<=R,Nt=b.type,Si=b.dismissible!==!1,Qs=b.className||"",Dr=b.descriptionClassName||"",na=me.useMemo(()=>A.findIndex(Ve=>Ve.toastId===b.id)||0,[A,b.id]),nl=me.useMemo(()=>{var Ve;return(Ve=b.closeButton)!=null?Ve:P},[b.closeButton,P]),Vd=me.useMemo(()=>b.duration||G||Hv,[b.duration,G]),Ut=me.useRef(0),Se=me.useRef(0),rr=me.useRef(0),ft=me.useRef(null),[zt,sa]=H.split("-"),sl=me.useMemo(()=>A.reduce((Ve,xt,et)=>et>=na?Ve:Ve+xt.height,0),[A,na]),Hc=tk(),ht=b.invert||v,Es=Nt==="loading";Se.current=me.useMemo(()=>na*te+sl,[na,sl]),me.useEffect(()=>{Ce.current=Vd},[Vd]),me.useEffect(()=>{ke(!0)},[]),me.useEffect(()=>{let Ve=it.current;if(Ve){let xt=Ve.getBoundingClientRect().height;return bt(xt),I(et=>[{toastId:b.id,height:xt,position:b.position},...et]),()=>I(et=>et.filter(Ir=>Ir.toastId!==b.id))}},[I,b.id]),me.useLayoutEffect(()=>{if(!be)return;let Ve=it.current,xt=Ve.style.height;Ve.style.height="auto";let et=Ve.getBoundingClientRect().height;Ve.style.height=xt,bt(et),I(Ir=>Ir.find(Wr=>Wr.toastId===b.id)?Ir.map(Wr=>Wr.toastId===b.id?{...Wr,height:et}:Wr):[{toastId:b.id,height:et,position:b.position},...Ir])},[be,b.title,b.description,I,b.id]);let Ss=me.useCallback(()=>{oe(!0),Be(Se.current),I(Ve=>Ve.filter(xt=>xt.toastId!==b.id)),setTimeout(()=>{F(b)},pk)},[b,F,I,Se]);me.useEffect(()=>{if(b.promise&&Nt==="loading"||b.duration===1/0||b.type==="loading")return;let Ve;return k||C||ae&&Hc?(()=>{if(rr.current<Ut.current){let xt=new Date().getTime()-Ut.current;Ce.current=Ce.current-xt}rr.current=new Date().getTime()})():Ce.current!==1/0&&(Ut.current=new Date().getTime(),Ve=setTimeout(()=>{var xt;(xt=b.onAutoClose)==null||xt.call(b,b),Ss()},Ce.current)),()=>clearTimeout(Ve)},[k,C,b,Nt,ae,Hc,Ss]),me.useEffect(()=>{b.delete&&Ss()},[Ss,b.delete]);function Hd(){var Ve,xt,et;return ne!=null&&ne.loading?me.createElement("div",{className:Ts(K==null?void 0:K.loader,(Ve=b==null?void 0:b.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":Nt==="loading"},ne.loading):J?me.createElement("div",{className:Ts(K==null?void 0:K.loader,(xt=b==null?void 0:b.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":Nt==="loading"},J):me.createElement(Xj,{className:Ts(K==null?void 0:K.loader,(et=b==null?void 0:b.classNames)==null?void 0:et.loader),visible:Nt==="loading"})}return me.createElement("li",{tabIndex:0,ref:it,className:Ts(z,Qs,K==null?void 0:K.toast,(e=b==null?void 0:b.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[Nt],(r=b==null?void 0:b.classNames)==null?void 0:r[Nt]),"data-sonner-toast":"","data-rich-colors":(n=b.richColors)!=null?n:B,"data-styled":!(b.jsx||b.unstyled||S),"data-mounted":be,"data-promise":!!b.promise,"data-swiped":St,"data-removed":Xe,"data-visible":ra,"data-y-position":zt,"data-x-position":sa,"data-index":N,"data-front":tr,"data-swiping":Ee,"data-dismissible":Si,"data-type":Nt,"data-invert":ht,"data-swipe-out":Me,"data-swipe-direction":ze,"data-expanded":!!(k||Z&&be),style:{"--index":N,"--toasts-before":N,"--z-index":O.length-N,"--offset":`${Xe?he:Se.current}px`,"--initial-height":Z?"auto":`${Ne}px`,...j,...b.style},onDragEnd:()=>{je(!1),fe(null),ft.current=null},onPointerDown:Ve=>{Es||!Si||(Pr.current=new Date,Be(Se.current),Ve.target.setPointerCapture(Ve.pointerId),Ve.target.tagName!=="BUTTON"&&(je(!0),ft.current={x:Ve.clientX,y:Ve.clientY}))},onPointerUp:()=>{var Ve,xt,et,Ir;if(Me||!Si)return;ft.current=null;let Wr=Number(((Ve=it.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_r=Number(((xt=it.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ai=new Date().getTime()-((et=Pr.current)==null?void 0:et.getTime()),Cr=le==="x"?Wr:_r,rs=Math.abs(Cr)/Ai;if(Math.abs(Cr)>=mk||rs>.11){Be(Se.current),(Ir=b.onDismiss)==null||Ir.call(b,b),ve(le==="x"?Wr>0?"right":"left":_r>0?"down":"up"),Ss(),gt(!0),er(!1);return}je(!1),fe(null)},onPointerMove:Ve=>{var xt,et,Ir,Wr;if(!ft.current||!Si||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;let _r=Ve.clientY-ft.current.y,Ai=Ve.clientX-ft.current.x,Cr=(et=t.swipeDirections)!=null?et:gk(H);!le&&(Math.abs(Ai)>1||Math.abs(_r)>1)&&fe(Math.abs(Ai)>Math.abs(_r)?"x":"y");let rs={x:0,y:0};le==="y"?(Cr.includes("top")||Cr.includes("bottom"))&&(Cr.includes("top")&&_r<0||Cr.includes("bottom")&&_r>0)&&(rs.y=_r):le==="x"&&(Cr.includes("left")||Cr.includes("right"))&&(Cr.includes("left")&&Ai<0||Cr.includes("right")&&Ai>0)&&(rs.x=Ai),(Math.abs(rs.x)>0||Math.abs(rs.y)>0)&&er(!0),(Ir=it.current)==null||Ir.style.setProperty("--swipe-amount-x",`${rs.x}px`),(Wr=it.current)==null||Wr.style.setProperty("--swipe-amount-y",`${rs.y}px`)}},nl&&!b.jsx?me.createElement("button",{"aria-label":pe,"data-disabled":Es,"data-close-button":!0,onClick:Es||!Si?()=>{}:()=>{var Ve;Ss(),(Ve=b.onDismiss)==null||Ve.call(b,b)},className:Ts(K==null?void 0:K.closeButton,(s=b==null?void 0:b.classNames)==null?void 0:s.closeButton)},(i=ne==null?void 0:ne.close)!=null?i:ek):null,b.jsx||E.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:me.createElement(me.Fragment,null,Nt||b.icon||b.promise?me.createElement("div",{"data-icon":"",className:Ts(K==null?void 0:K.icon,(l=b==null?void 0:b.classNames)==null?void 0:l.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Hd():null,b.type!=="loading"?b.icon||(ne==null?void 0:ne[Nt])||Yj(Nt):null):null,me.createElement("div",{"data-content":"",className:Ts(K==null?void 0:K.content,(u=b==null?void 0:b.classNames)==null?void 0:u.content)},me.createElement("div",{"data-title":"",className:Ts(K==null?void 0:K.title,(m=b==null?void 0:b.classNames)==null?void 0:m.title)},typeof b.title=="function"?b.title():b.title),b.description?me.createElement("div",{"data-description":"",className:Ts(X,Dr,K==null?void 0:K.description,(h=b==null?void 0:b.classNames)==null?void 0:h.description)},typeof b.description=="function"?b.description():b.description):null),E.isValidElement(b.cancel)?b.cancel:b.cancel&&wf(b.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||W,onClick:Ve=>{var xt,et;wf(b.cancel)&&Si&&((et=(xt=b.cancel).onClick)==null||et.call(xt,Ve),Ss())},className:Ts(K==null?void 0:K.cancelButton,(x=b==null?void 0:b.classNames)==null?void 0:x.cancelButton)},b.cancel.label):null,E.isValidElement(b.action)?b.action:b.action&&wf(b.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||Y,onClick:Ve=>{var xt,et;wf(b.action)&&((et=(xt=b.action).onClick)==null||et.call(xt,Ve),!Ve.defaultPrevented&&Ss())},className:Ts(K==null?void 0:K.actionButton,(y=b==null?void 0:b.classNames)==null?void 0:y.actionButton)},b.action.label):null))};function $v(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function yk(t,e){let r={};return[t,e].forEach((n,s)=>{let i=s===1,l=i?"--mobile-offset":"--offset",u=i?dk:uk;function m(h){["top","right","bottom","left"].forEach(x=>{r[`${l}-${x}`]=typeof h=="number"?`${h}px`:h})}typeof n=="number"||typeof n=="string"?m(n):typeof n=="object"?["top","right","bottom","left"].forEach(h=>{n[h]===void 0?r[`${l}-${h}`]=u:r[`${l}-${h}`]=typeof n[h]=="number"?`${n[h]}px`:n[h]}):m(u)}),r}var wk=E.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:l,className:u,offset:m,mobileOffset:h,theme:x="light",richColors:y,duration:v,style:b,visibleToasts:S=ck,toastOptions:C,dir:I=$v(),gap:R=hk,loadingIcon:A,icons:N,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:k}=t,[F,B]=me.useState([]),P=me.useMemo(()=>Array.from(new Set([n].concat(F.filter(ae=>ae.position).map(ae=>ae.position)))),[F,n]),[j,W]=me.useState([]),[Y,z]=me.useState(!1),[X,G]=me.useState(!1),[H,te]=me.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=me.useRef(null),Z=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=me.useRef(null),ne=me.useRef(!1),pe=me.useCallback(ae=>{B(le=>{var fe;return(fe=le.find(ze=>ze.id===ae.id))!=null&&fe.delete||Cn.dismiss(ae.id),le.filter(({id:ze})=>ze!==ae.id)})},[]);return me.useEffect(()=>Cn.subscribe(ae=>{if(ae.dismiss){B(le=>le.map(fe=>fe.id===ae.id?{...fe,delete:!0}:fe));return}setTimeout(()=>{sE.flushSync(()=>{B(le=>{let fe=le.findIndex(ze=>ze.id===ae.id);return fe!==-1?[...le.slice(0,fe),{...le[fe],...ae},...le.slice(fe+1)]:[ae,...le]})})})}),[]),me.useEffect(()=>{if(x!=="system"){te(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:le})=>{te(le?"dark":"light")})}catch{ae.addListener(({matches:fe})=>{try{te(fe?"dark":"light")}catch(ze){console.error(ze)}})}},[x]),me.useEffect(()=>{F.length<=1&&z(!1)},[F]),me.useEffect(()=>{let ae=le=>{var fe,ze;s.every(ve=>le[ve]||le.code===ve)&&(z(!0),(fe=J.current)==null||fe.focus()),le.code==="Escape"&&(document.activeElement===J.current||(ze=J.current)!=null&&ze.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[s]),me.useEffect(()=>{if(J.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ne.current=!1)}},[J.current]),me.createElement("section",{ref:e,"aria-label":`${O} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ae,le)=>{var fe;let[ze,ve]=ae.split("-");return F.length?me.createElement("ol",{key:ae,dir:I==="auto"?$v():I,tabIndex:-1,ref:J,className:u,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":ze,"data-lifted":Y&&F.length>1&&!i,"data-x-position":ve,style:{"--front-toast-height":`${((fe=j[0])==null?void 0:fe.height)||0}px`,"--width":`${fk}px`,"--gap":`${R}px`,...b,...yk(m,h)},onBlur:be=>{ne.current&&!be.currentTarget.contains(be.relatedTarget)&&(ne.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,K.current=be.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{X||z(!1)},onDragEnd:()=>z(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},F.filter(be=>!be.position&&le===0||be.position===ae).map((be,ke)=>{var Xe,oe;return me.createElement(xk,{key:be.id,icons:N,index:ke,toast:be,defaultRichColors:y,duration:(Xe=C==null?void 0:C.duration)!=null?Xe:v,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:r,visibleToasts:S,closeButton:(oe=C==null?void 0:C.closeButton)!=null?oe:l,interacting:X,position:ae,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:pe,toasts:F.filter(Ee=>Ee.position==be.position),heights:j.filter(Ee=>Ee.position==be.position),setHeights:W,expandByDefault:i,gap:R,loadingIcon:A,expanded:Y,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const vk=({...t})=>{const{theme:e="system"}=Gj();return d.jsx(wk,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var bk=Pg[" useId ".trim().toString()]||(()=>{}),_k=0;function $s(t){const[e,r]=E.useState(bk());return gr(()=>{t||r(n=>n??String(_k++))},[t]),t||(e?`radix-${e}`:"")}const Ck=["top","right","bottom","left"],zo=Math.min,Fn=Math.max,Oh=Math.round,vf=Math.floor,gi=t=>({x:t,y:t}),Ek={left:"right",right:"left",bottom:"top",top:"bottom"},Sk={start:"end",end:"start"};function R1(t,e,r){return Fn(t,zo(e,r))}function Wi(t,e){return typeof t=="function"?t(e):t}function Gi(t){return t.split("-")[0]}function Pc(t){return t.split("-")[1]}function Dx(t){return t==="x"?"y":"x"}function Lx(t){return t==="y"?"height":"width"}const Ak=new Set(["top","bottom"]);function fi(t){return Ak.has(Gi(t))?"y":"x"}function Bx(t){return Dx(fi(t))}function Nk(t,e,r){r===void 0&&(r=!1);const n=Pc(t),s=Bx(t),i=Lx(s);let l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Mh(l)),[l,Mh(l)]}function Tk(t){const e=Mh(t);return[O1(t),e,O1(e)]}function O1(t){return t.replace(/start|end/g,e=>Sk[e])}const Wv=["left","right"],Gv=["right","left"],Ik=["top","bottom"],Rk=["bottom","top"];function Ok(t,e,r){switch(t){case"top":case"bottom":return r?e?Gv:Wv:e?Wv:Gv;case"left":case"right":return e?Ik:Rk;default:return[]}}function Mk(t,e,r,n){const s=Pc(t);let i=Ok(Gi(t),r==="start",n);return s&&(i=i.map(l=>l+"-"+s),e&&(i=i.concat(i.map(O1)))),i}function Mh(t){return t.replace(/left|right|bottom|top/g,e=>Ek[e])}function jk(t){return{top:0,right:0,bottom:0,left:0,...t}}function tS(t){return typeof t!="number"?jk(t):{top:t,right:t,bottom:t,left:t}}function jh(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Yv(t,e,r){let{reference:n,floating:s}=t;const i=fi(e),l=Bx(e),u=Lx(l),m=Gi(e),h=i==="y",x=n.x+n.width/2-s.width/2,y=n.y+n.height/2-s.height/2,v=n[u]/2-s[u]/2;let b;switch(m){case"top":b={x,y:n.y-s.height};break;case"bottom":b={x,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y};break;case"left":b={x:n.x-s.width,y};break;default:b={x:n.x,y:n.y}}switch(Pc(e)){case"start":b[l]-=v*(r&&h?-1:1);break;case"end":b[l]+=v*(r&&h?-1:1);break}return b}const kk=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:l}=r,u=i.filter(Boolean),m=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:s}),{x,y}=Yv(h,n,m),v=n,b={},S=0;for(let C=0;C<u.length;C++){const{name:I,fn:R}=u[C],{x:A,y:N,data:O,reset:k}=await R({x,y,initialPlacement:n,placement:v,strategy:s,middlewareData:b,rects:h,platform:l,elements:{reference:t,floating:e}});x=A??x,y=N??y,b={...b,[I]:{...b[I],...O}},k&&S<=50&&(S++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(h=k.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x,y}=Yv(h,v,m)),C=-1)}return{x,y,placement:v,strategy:s,middlewareData:b}};async function td(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:l,elements:u,strategy:m}=t,{boundary:h="clippingAncestors",rootBoundary:x="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=Wi(e,t),S=tS(b),I=u[v?y==="floating"?"reference":"floating":y],R=jh(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(I)))==null||r?I:I.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:h,rootBoundary:x,strategy:m})),A=y==="floating"?{x:n,y:s,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),O=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},k=jh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:A,offsetParent:N,strategy:m}):A);return{top:(R.top-k.top+S.top)/O.y,bottom:(k.bottom-R.bottom+S.bottom)/O.y,left:(R.left-k.left+S.left)/O.x,right:(k.right-R.right+S.right)/O.x}}const Pk=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:l,elements:u,middlewareData:m}=e,{element:h,padding:x=0}=Wi(t,e)||{};if(h==null)return{};const y=tS(x),v={x:r,y:n},b=Bx(s),S=Lx(b),C=await l.getDimensions(h),I=b==="y",R=I?"top":"left",A=I?"bottom":"right",N=I?"clientHeight":"clientWidth",O=i.reference[S]+i.reference[b]-v[b]-i.floating[S],k=v[b]-i.reference[b],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let B=F?F[N]:0;(!B||!await(l.isElement==null?void 0:l.isElement(F)))&&(B=u.floating[N]||i.floating[S]);const P=O/2-k/2,j=B/2-C[S]/2-1,W=zo(y[R],j),Y=zo(y[A],j),z=W,X=B-C[S]-Y,G=B/2-C[S]/2+P,H=R1(z,G,X),te=!m.arrow&&Pc(s)!=null&&G!==H&&i.reference[S]/2-(G<z?W:Y)-C[S]/2<0,J=te?G<z?G-z:G-X:0;return{[b]:v[b]+J,data:{[b]:H,centerOffset:G-H-J,...te&&{alignmentOffset:J}},reset:te}}}),Dk=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:l,initialPlacement:u,platform:m,elements:h}=e,{mainAxis:x=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,...I}=Wi(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const R=Gi(s),A=fi(u),N=Gi(u)===u,O=await(m.isRTL==null?void 0:m.isRTL(h.floating)),k=v||(N||!C?[Mh(u)]:Tk(u)),F=S!=="none";!v&&F&&k.push(...Mk(u,C,S,O));const B=[u,...k],P=await td(e,I),j=[];let W=((n=i.flip)==null?void 0:n.overflows)||[];if(x&&j.push(P[R]),y){const G=Nk(s,l,O);j.push(P[G[0]],P[G[1]])}if(W=[...W,{placement:s,overflows:j}],!j.every(G=>G<=0)){var Y,z;const G=(((Y=i.flip)==null?void 0:Y.index)||0)+1,H=B[G];if(H&&(!(y==="alignment"?A!==fi(H):!1)||W.every(Z=>Z.overflows[0]>0&&fi(Z.placement)===A)))return{data:{index:G,overflows:W},reset:{placement:H}};let te=(z=W.filter(J=>J.overflows[0]<=0).sort((J,Z)=>J.overflows[1]-Z.overflows[1])[0])==null?void 0:z.placement;if(!te)switch(b){case"bestFit":{var X;const J=(X=W.filter(Z=>{if(F){const K=fi(Z.placement);return K===A||K==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(K=>K>0).reduce((K,ne)=>K+ne,0)]).sort((Z,K)=>Z[1]-K[1])[0])==null?void 0:X[0];J&&(te=J);break}case"initialPlacement":te=u;break}if(s!==te)return{reset:{placement:te}}}return{}}}};function qv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Xv(t){return Ck.some(e=>t[e]>=0)}const Lk=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Wi(t,e);switch(n){case"referenceHidden":{const i=await td(e,{...s,elementContext:"reference"}),l=qv(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Xv(l)}}}case"escaped":{const i=await td(e,{...s,altBoundary:!0}),l=qv(i,r.floating);return{data:{escapedOffsets:l,escaped:Xv(l)}}}default:return{}}}}},rS=new Set(["left","top"]);async function Bk(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),l=Gi(r),u=Pc(r),m=fi(r)==="y",h=rS.has(l)?-1:1,x=i&&m?-1:1,y=Wi(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),m?{x:b*x,y:v*h}:{x:v*h,y:b*x}}const Fk=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:l,middlewareData:u}=e,m=await Bk(e,t);return l===((r=u.offset)==null?void 0:r.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:s+m.x,y:i+m.y,data:{...m,placement:l}}}}},Uk=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:u={fn:I=>{let{x:R,y:A}=I;return{x:R,y:A}}},...m}=Wi(t,e),h={x:r,y:n},x=await td(e,m),y=fi(Gi(s)),v=Dx(y);let b=h[v],S=h[y];if(i){const I=v==="y"?"top":"left",R=v==="y"?"bottom":"right",A=b+x[I],N=b-x[R];b=R1(A,b,N)}if(l){const I=y==="y"?"top":"left",R=y==="y"?"bottom":"right",A=S+x[I],N=S-x[R];S=R1(A,S,N)}const C=u.fn({...e,[v]:b,[y]:S});return{...C,data:{x:C.x-r,y:C.y-n,enabled:{[v]:i,[y]:l}}}}}},zk=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:l}=e,{offset:u=0,mainAxis:m=!0,crossAxis:h=!0}=Wi(t,e),x={x:r,y:n},y=fi(s),v=Dx(y);let b=x[v],S=x[y];const C=Wi(u,e),I=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(m){const N=v==="y"?"height":"width",O=i.reference[v]-i.floating[N]+I.mainAxis,k=i.reference[v]+i.reference[N]-I.mainAxis;b<O?b=O:b>k&&(b=k)}if(h){var R,A;const N=v==="y"?"width":"height",O=rS.has(Gi(s)),k=i.reference[y]-i.floating[N]+(O&&((R=l.offset)==null?void 0:R[y])||0)+(O?0:I.crossAxis),F=i.reference[y]+i.reference[N]+(O?0:((A=l.offset)==null?void 0:A[y])||0)-(O?I.crossAxis:0);S<k?S=k:S>F&&(S=F)}return{[v]:b,[y]:S}}}},Vk=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:l,elements:u}=e,{apply:m=()=>{},...h}=Wi(t,e),x=await td(e,h),y=Gi(s),v=Pc(s),b=fi(s)==="y",{width:S,height:C}=i.floating;let I,R;y==="top"||y==="bottom"?(I=y,R=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(R=y,I=v==="end"?"top":"bottom");const A=C-x.top-x.bottom,N=S-x.left-x.right,O=zo(C-x[I],A),k=zo(S-x[R],N),F=!e.middlewareData.shift;let B=O,P=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(B=A),F&&!v){const W=Fn(x.left,0),Y=Fn(x.right,0),z=Fn(x.top,0),X=Fn(x.bottom,0);b?P=S-2*(W!==0||Y!==0?W+Y:Fn(x.left,x.right)):B=C-2*(z!==0||X!==0?z+X:Fn(x.top,x.bottom))}await m({...e,availableWidth:P,availableHeight:B});const j=await l.getDimensions(u.floating);return S!==j.width||C!==j.height?{reset:{rects:!0}}:{}}}};function I0(){return typeof window<"u"}function Dc(t){return nS(t)?(t.nodeName||"").toLowerCase():"#document"}function Xn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ci(t){var e;return(e=(nS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nS(t){return I0()?t instanceof Node||t instanceof Xn(t).Node:!1}function Ys(t){return I0()?t instanceof Element||t instanceof Xn(t).Element:!1}function wi(t){return I0()?t instanceof HTMLElement||t instanceof Xn(t).HTMLElement:!1}function Kv(t){return!I0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xn(t).ShadowRoot}const Hk=new Set(["inline","contents"]);function Od(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=qs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Hk.has(s)}const $k=new Set(["table","td","th"]);function Wk(t){return $k.has(Dc(t))}const Gk=[":popover-open",":modal"];function R0(t){return Gk.some(e=>{try{return t.matches(e)}catch{return!1}})}const Yk=["transform","translate","scale","rotate","perspective"],qk=["transform","translate","scale","rotate","perspective","filter"],Xk=["paint","layout","strict","content"];function Fx(t){const e=Ux(),r=Ys(t)?qs(t):t;return Yk.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||qk.some(n=>(r.willChange||"").includes(n))||Xk.some(n=>(r.contain||"").includes(n))}function Kk(t){let e=Vo(t);for(;wi(e)&&!xc(e);){if(Fx(e))return e;if(R0(e))return null;e=Vo(e)}return null}function Ux(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Qk=new Set(["html","body","#document"]);function xc(t){return Qk.has(Dc(t))}function qs(t){return Xn(t).getComputedStyle(t)}function O0(t){return Ys(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vo(t){if(Dc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Kv(t)&&t.host||Ci(t);return Kv(e)?e.host:e}function sS(t){const e=Vo(t);return xc(e)?t.ownerDocument?t.ownerDocument.body:t.body:wi(e)&&Od(e)?e:sS(e)}function rd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=sS(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),l=Xn(s);if(i){const u=M1(l);return e.concat(l,l.visualViewport||[],Od(s)?s:[],u&&r?rd(u):[])}return e.concat(s,rd(s,[],r))}function M1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function iS(t){const e=qs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=wi(t),i=s?t.offsetWidth:r,l=s?t.offsetHeight:n,u=Oh(r)!==i||Oh(n)!==l;return u&&(r=i,n=l),{width:r,height:n,$:u}}function zx(t){return Ys(t)?t:t.contextElement}function Xl(t){const e=zx(t);if(!wi(e))return gi(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=iS(e);let l=(i?Oh(r.width):r.width)/n,u=(i?Oh(r.height):r.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const Zk=gi(0);function oS(t){const e=Xn(t);return!Ux()||!e.visualViewport?Zk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jk(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Xn(t)?!1:e}function Va(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=zx(t);let l=gi(1);e&&(n?Ys(n)&&(l=Xl(n)):l=Xl(t));const u=Jk(i,r,n)?oS(i):gi(0);let m=(s.left+u.x)/l.x,h=(s.top+u.y)/l.y,x=s.width/l.x,y=s.height/l.y;if(i){const v=Xn(i),b=n&&Ys(n)?Xn(n):n;let S=v,C=M1(S);for(;C&&n&&b!==S;){const I=Xl(C),R=C.getBoundingClientRect(),A=qs(C),N=R.left+(C.clientLeft+parseFloat(A.paddingLeft))*I.x,O=R.top+(C.clientTop+parseFloat(A.paddingTop))*I.y;m*=I.x,h*=I.y,x*=I.x,y*=I.y,m+=N,h+=O,S=Xn(C),C=M1(S)}}return jh({width:x,height:y,x:m,y:h})}function Vx(t,e){const r=O0(t).scrollLeft;return e?e.left+r:Va(Ci(t)).left+r}function aS(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Vx(t,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function eP(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",l=Ci(n),u=e?R0(e.floating):!1;if(n===l||u&&i)return r;let m={scrollLeft:0,scrollTop:0},h=gi(1);const x=gi(0),y=wi(n);if((y||!y&&!i)&&((Dc(n)!=="body"||Od(l))&&(m=O0(n)),wi(n))){const b=Va(n);h=Xl(n),x.x=b.x+n.clientLeft,x.y=b.y+n.clientTop}const v=l&&!y&&!i?aS(l,m,!0):gi(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-m.scrollLeft*h.x+x.x+v.x,y:r.y*h.y-m.scrollTop*h.y+x.y+v.y}}function tP(t){return Array.from(t.getClientRects())}function rP(t){const e=Ci(t),r=O0(t),n=t.ownerDocument.body,s=Fn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Fn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Vx(t);const u=-r.scrollTop;return qs(n).direction==="rtl"&&(l+=Fn(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:l,y:u}}function nP(t,e){const r=Xn(t),n=Ci(t),s=r.visualViewport;let i=n.clientWidth,l=n.clientHeight,u=0,m=0;if(s){i=s.width,l=s.height;const h=Ux();(!h||h&&e==="fixed")&&(u=s.offsetLeft,m=s.offsetTop)}return{width:i,height:l,x:u,y:m}}const sP=new Set(["absolute","fixed"]);function iP(t,e){const r=Va(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=wi(t)?Xl(t):gi(1),l=t.clientWidth*i.x,u=t.clientHeight*i.y,m=s*i.x,h=n*i.y;return{width:l,height:u,x:m,y:h}}function Qv(t,e,r){let n;if(e==="viewport")n=nP(t,r);else if(e==="document")n=rP(Ci(t));else if(Ys(e))n=iP(e,r);else{const s=oS(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return jh(n)}function lS(t,e){const r=Vo(t);return r===e||!Ys(r)||xc(r)?!1:qs(r).position==="fixed"||lS(r,e)}function oP(t,e){const r=e.get(t);if(r)return r;let n=rd(t,[],!1).filter(u=>Ys(u)&&Dc(u)!=="body"),s=null;const i=qs(t).position==="fixed";let l=i?Vo(t):t;for(;Ys(l)&&!xc(l);){const u=qs(l),m=Fx(l);!m&&u.position==="fixed"&&(s=null),(i?!m&&!s:!m&&u.position==="static"&&!!s&&sP.has(s.position)||Od(l)&&!m&&lS(t,l))?n=n.filter(x=>x!==l):s=u,l=Vo(l)}return e.set(t,n),n}function aP(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const l=[...r==="clippingAncestors"?R0(e)?[]:oP(e,this._c):[].concat(r),n],u=l[0],m=l.reduce((h,x)=>{const y=Qv(e,x,s);return h.top=Fn(y.top,h.top),h.right=zo(y.right,h.right),h.bottom=zo(y.bottom,h.bottom),h.left=Fn(y.left,h.left),h},Qv(e,u,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function lP(t){const{width:e,height:r}=iS(t);return{width:e,height:r}}function cP(t,e,r){const n=wi(e),s=Ci(e),i=r==="fixed",l=Va(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const m=gi(0);function h(){m.x=Vx(s)}if(n||!n&&!i)if((Dc(e)!=="body"||Od(s))&&(u=O0(e)),n){const b=Va(e,!0,i,e);m.x=b.x+e.clientLeft,m.y=b.y+e.clientTop}else s&&h();i&&!n&&s&&h();const x=s&&!n&&!i?aS(s,u):gi(0),y=l.left+u.scrollLeft-m.x-x.x,v=l.top+u.scrollTop-m.y-x.y;return{x:y,y:v,width:l.width,height:l.height}}function Jm(t){return qs(t).position==="static"}function Zv(t,e){if(!wi(t)||qs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ci(t)===r&&(r=r.ownerDocument.body),r}function cS(t,e){const r=Xn(t);if(R0(t))return r;if(!wi(t)){let s=Vo(t);for(;s&&!xc(s);){if(Ys(s)&&!Jm(s))return s;s=Vo(s)}return r}let n=Zv(t,e);for(;n&&Wk(n)&&Jm(n);)n=Zv(n,e);return n&&xc(n)&&Jm(n)&&!Fx(n)?r:n||Kk(t)||r}const uP=async function(t){const e=this.getOffsetParent||cS,r=this.getDimensions,n=await r(t.floating);return{reference:cP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function dP(t){return qs(t).direction==="rtl"}const fP={convertOffsetParentRelativeRectToViewportRelativeRect:eP,getDocumentElement:Ci,getClippingRect:aP,getOffsetParent:cS,getElementRects:uP,getClientRects:tP,getDimensions:lP,getScale:Xl,isElement:Ys,isRTL:dP};function uS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function hP(t,e){let r=null,n;const s=Ci(t);function i(){var u;clearTimeout(n),(u=r)==null||u.disconnect(),r=null}function l(u,m){u===void 0&&(u=!1),m===void 0&&(m=1),i();const h=t.getBoundingClientRect(),{left:x,top:y,width:v,height:b}=h;if(u||e(),!v||!b)return;const S=vf(y),C=vf(s.clientWidth-(x+v)),I=vf(s.clientHeight-(y+b)),R=vf(x),N={rootMargin:-S+"px "+-C+"px "+-I+"px "+-R+"px",threshold:Fn(0,zo(1,m))||1};let O=!0;function k(F){const B=F[0].intersectionRatio;if(B!==m){if(!O)return l();B?l(!1,B):n=setTimeout(()=>{l(!1,1e-7)},1e3)}B===1&&!uS(h,t.getBoundingClientRect())&&l(),O=!1}try{r=new IntersectionObserver(k,{...N,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,N)}r.observe(t)}return l(!0),i}function mP(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,h=zx(t),x=s||i?[...h?rd(h):[],...rd(e)]:[];x.forEach(R=>{s&&R.addEventListener("scroll",r,{passive:!0}),i&&R.addEventListener("resize",r)});const y=h&&u?hP(h,r):null;let v=-1,b=null;l&&(b=new ResizeObserver(R=>{let[A]=R;A&&A.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(e)})),r()}),h&&!m&&b.observe(h),b.observe(e));let S,C=m?Va(t):null;m&&I();function I(){const R=Va(t);C&&!uS(C,R)&&r(),C=R,S=requestAnimationFrame(I)}return r(),()=>{var R;x.forEach(A=>{s&&A.removeEventListener("scroll",r),i&&A.removeEventListener("resize",r)}),y==null||y(),(R=b)==null||R.disconnect(),b=null,m&&cancelAnimationFrame(S)}}const pP=Fk,gP=Uk,xP=Dk,yP=Vk,wP=Lk,Jv=Pk,vP=zk,bP=(t,e,r)=>{const n=new Map,s={platform:fP,...r},i={...s.platform,_c:n};return kk(t,e,{...s,platform:i})};var _P=typeof document<"u",CP=function(){},Qf=_P?E.useLayoutEffect:CP;function kh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!kh(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!kh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function dS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function e2(t,e){const r=dS(t);return Math.round(e*r)/r}function ep(t){const e=E.useRef(t);return Qf(()=>{e.current=t}),e}function EP(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:l}={},transform:u=!0,whileElementsMounted:m,open:h}=t,[x,y]=E.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=E.useState(n);kh(v,n)||b(n);const[S,C]=E.useState(null),[I,R]=E.useState(null),A=E.useCallback(Z=>{Z!==F.current&&(F.current=Z,C(Z))},[]),N=E.useCallback(Z=>{Z!==B.current&&(B.current=Z,R(Z))},[]),O=i||S,k=l||I,F=E.useRef(null),B=E.useRef(null),P=E.useRef(x),j=m!=null,W=ep(m),Y=ep(s),z=ep(h),X=E.useCallback(()=>{if(!F.current||!B.current)return;const Z={placement:e,strategy:r,middleware:v};Y.current&&(Z.platform=Y.current),bP(F.current,B.current,Z).then(K=>{const ne={...K,isPositioned:z.current!==!1};G.current&&!kh(P.current,ne)&&(P.current=ne,Ka.flushSync(()=>{y(ne)}))})},[v,e,r,Y,z]);Qf(()=>{h===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,y(Z=>({...Z,isPositioned:!1})))},[h]);const G=E.useRef(!1);Qf(()=>(G.current=!0,()=>{G.current=!1}),[]),Qf(()=>{if(O&&(F.current=O),k&&(B.current=k),O&&k){if(W.current)return W.current(O,k,X);X()}},[O,k,X,W,j]);const H=E.useMemo(()=>({reference:F,floating:B,setReference:A,setFloating:N}),[A,N]),te=E.useMemo(()=>({reference:O,floating:k}),[O,k]),J=E.useMemo(()=>{const Z={position:r,left:0,top:0};if(!te.floating)return Z;const K=e2(te.floating,x.x),ne=e2(te.floating,x.y);return u?{...Z,transform:"translate("+K+"px, "+ne+"px)",...dS(te.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:K,top:ne}},[r,u,te.floating,x.x,x.y]);return E.useMemo(()=>({...x,update:X,refs:H,elements:te,floatingStyles:J}),[x,X,H,te,J])}const SP=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Jv({element:n.current,padding:s}).fn(r):{}:n?Jv({element:n,padding:s}).fn(r):{}}}},AP=(t,e)=>({...pP(t),options:[t,e]}),NP=(t,e)=>({...gP(t),options:[t,e]}),TP=(t,e)=>({...vP(t),options:[t,e]}),IP=(t,e)=>({...xP(t),options:[t,e]}),RP=(t,e)=>({...yP(t),options:[t,e]}),OP=(t,e)=>({...wP(t),options:[t,e]}),MP=(t,e)=>({...SP(t),options:[t,e]});var jP="Arrow",fS=E.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return d.jsx(Le.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});fS.displayName=jP;var kP=fS;function Hx(t){const[e,r]=E.useState(void 0);return gr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,u;if("borderBoxSize"in i){const m=i.borderBoxSize,h=Array.isArray(m)?m[0]:m;l=h.inlineSize,u=h.blockSize}else l=t.offsetWidth,u=t.offsetHeight;r({width:l,height:u})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var $x="Popper",[hS,Lc]=pn($x),[PP,mS]=hS($x),pS=t=>{const{__scopePopper:e,children:r}=t,[n,s]=E.useState(null);return d.jsx(PP,{scope:e,anchor:n,onAnchorChange:s,children:r})};pS.displayName=$x;var gS="PopperAnchor",xS=E.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=mS(gS,r),l=E.useRef(null),u=Je(e,l);return E.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||l.current)}),n?null:d.jsx(Le.div,{...s,ref:u})});xS.displayName=gS;var Wx="PopperContent",[DP,LP]=hS(Wx),yS=E.forwardRef((t,e)=>{var be,ke,Xe,oe,Ee,je;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:m=!0,collisionBoundary:h=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,...C}=t,I=mS(Wx,r),[R,A]=E.useState(null),N=Je(e,Me=>A(Me)),[O,k]=E.useState(null),F=Hx(O),B=(F==null?void 0:F.width)??0,P=(F==null?void 0:F.height)??0,j=n+(i!=="center"?"-"+i:""),W=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Y=Array.isArray(h)?h:[h],z=Y.length>0,X={padding:W,boundary:Y.filter(FP),altBoundary:z},{refs:G,floatingStyles:H,placement:te,isPositioned:J,middlewareData:Z}=EP({strategy:"fixed",placement:j,whileElementsMounted:(...Me)=>mP(...Me,{animationFrame:b==="always"}),elements:{reference:I.anchor},middleware:[AP({mainAxis:s+P,alignmentAxis:l}),m&&NP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?TP():void 0,...X}),m&&IP({...X}),RP({...X,apply:({elements:Me,rects:gt,availableWidth:St,availableHeight:er})=>{const{width:he,height:Be}=gt.reference,Ne=Me.floating.style;Ne.setProperty("--radix-popper-available-width",`${St}px`),Ne.setProperty("--radix-popper-available-height",`${er}px`),Ne.setProperty("--radix-popper-anchor-width",`${he}px`),Ne.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),O&&MP({element:O,padding:u}),UP({arrowWidth:B,arrowHeight:P}),v&&OP({strategy:"referenceHidden",...X})]}),[K,ne]=bS(te),pe=cr(S);gr(()=>{J&&(pe==null||pe())},[J,pe]);const ae=(be=Z.arrow)==null?void 0:be.x,le=(ke=Z.arrow)==null?void 0:ke.y,fe=((Xe=Z.arrow)==null?void 0:Xe.centerOffset)!==0,[ze,ve]=E.useState();return gr(()=>{R&&ve(window.getComputedStyle(R).zIndex)},[R]),d.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:J?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[(oe=Z.transformOrigin)==null?void 0:oe.x,(Ee=Z.transformOrigin)==null?void 0:Ee.y].join(" "),...((je=Z.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(DP,{scope:r,placedSide:K,onArrowChange:k,arrowX:ae,arrowY:le,shouldHideArrow:fe,children:d.jsx(Le.div,{"data-side":K,"data-align":ne,...C,ref:N,style:{...C.style,animation:J?void 0:"none"}})})})});yS.displayName=Wx;var wS="PopperArrow",BP={top:"bottom",right:"left",bottom:"top",left:"right"},vS=E.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=LP(wS,n),l=BP[i.placedSide];return d.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:d.jsx(kP,{...s,ref:r,style:{...s.style,display:"block"}})})});vS.displayName=wS;function FP(t){return t!==null}var UP=t=>({name:"transformOrigin",options:t,fn(e){var I,R,A;const{placement:r,rects:n,middlewareData:s}=e,l=((I=s.arrow)==null?void 0:I.centerOffset)!==0,u=l?0:t.arrowWidth,m=l?0:t.arrowHeight,[h,x]=bS(r),y={start:"0%",center:"50%",end:"100%"}[x],v=(((R=s.arrow)==null?void 0:R.x)??0)+u/2,b=(((A=s.arrow)==null?void 0:A.y)??0)+m/2;let S="",C="";return h==="bottom"?(S=l?y:`${v}px`,C=`${-m}px`):h==="top"?(S=l?y:`${v}px`,C=`${n.floating.height+m}px`):h==="right"?(S=`${-m}px`,C=l?y:`${b}px`):h==="left"&&(S=`${n.floating.width+m}px`,C=l?y:`${b}px`),{data:{x:S,y:C}}}});function bS(t){const[e,r="center"]=t.split("-");return[e,r]}var Gx=pS,Yx=xS,qx=yS,Xx=vS,[M0,eH]=pn("Tooltip",[Lc]),j0=Lc(),_S="TooltipProvider",zP=700,j1="tooltip.open",[VP,Kx]=M0(_S),CS=t=>{const{__scopeTooltip:e,delayDuration:r=zP,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,l=E.useRef(!0),u=E.useRef(!1),m=E.useRef(0);return E.useEffect(()=>{const h=m.current;return()=>window.clearTimeout(h)},[]),d.jsx(VP,{scope:e,isOpenDelayedRef:l,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(m.current),l.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:E.useCallback(h=>{u.current=h},[]),disableHoverableContent:s,children:i})};CS.displayName=_S;var nd="Tooltip",[HP,k0]=M0(nd),ES=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:l,delayDuration:u}=t,m=Kx(nd,t.__scopeTooltip),h=j0(e),[x,y]=E.useState(null),v=$s(),b=E.useRef(0),S=l??m.disableHoverableContent,C=u??m.delayDuration,I=E.useRef(!1),[R,A]=yi({prop:n,defaultProp:s??!1,onChange:B=>{B?(m.onOpen(),document.dispatchEvent(new CustomEvent(j1))):m.onClose(),i==null||i(B)},caller:nd}),N=E.useMemo(()=>R?I.current?"delayed-open":"instant-open":"closed",[R]),O=E.useCallback(()=>{window.clearTimeout(b.current),b.current=0,I.current=!1,A(!0)},[A]),k=E.useCallback(()=>{window.clearTimeout(b.current),b.current=0,A(!1)},[A]),F=E.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{I.current=!0,A(!0),b.current=0},C)},[C,A]);return E.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),d.jsx(Gx,{...h,children:d.jsx(HP,{scope:e,contentId:v,open:R,stateAttribute:N,trigger:x,onTriggerChange:y,onTriggerEnter:E.useCallback(()=>{m.isOpenDelayedRef.current?F():O()},[m.isOpenDelayedRef,F,O]),onTriggerLeave:E.useCallback(()=>{S?k():(window.clearTimeout(b.current),b.current=0)},[k,S]),onOpen:O,onClose:k,disableHoverableContent:S,children:r})})};ES.displayName=nd;var k1="TooltipTrigger",SS=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=k0(k1,r),i=Kx(k1,r),l=j0(r),u=E.useRef(null),m=Je(e,u,s.onTriggerChange),h=E.useRef(!1),x=E.useRef(!1),y=E.useCallback(()=>h.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),d.jsx(Yx,{asChild:!0,...l,children:d.jsx(Le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:m,onPointerMove:Ae(t.onPointerMove,v=>{v.pointerType!=="touch"&&!x.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),x.current=!0)}),onPointerLeave:Ae(t.onPointerLeave,()=>{s.onTriggerLeave(),x.current=!1}),onPointerDown:Ae(t.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Ae(t.onFocus,()=>{h.current||s.onOpen()}),onBlur:Ae(t.onBlur,s.onClose),onClick:Ae(t.onClick,s.onClose)})})});SS.displayName=k1;var $P="TooltipPortal",[tH,WP]=M0($P,{forceMount:void 0}),yc="TooltipContent",AS=E.forwardRef((t,e)=>{const r=WP(yc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,l=k0(yc,t.__scopeTooltip);return d.jsx(tn,{present:n||l.open,children:l.disableHoverableContent?d.jsx(NS,{side:s,...i,ref:e}):d.jsx(GP,{side:s,...i,ref:e})})}),GP=E.forwardRef((t,e)=>{const r=k0(yc,t.__scopeTooltip),n=Kx(yc,t.__scopeTooltip),s=E.useRef(null),i=Je(e,s),[l,u]=E.useState(null),{trigger:m,onClose:h}=r,x=s.current,{onPointerInTransitChange:y}=n,v=E.useCallback(()=>{u(null),y(!1)},[y]),b=E.useCallback((S,C)=>{const I=S.currentTarget,R={x:S.clientX,y:S.clientY},A=QP(R,I.getBoundingClientRect()),N=ZP(R,A),O=JP(C.getBoundingClientRect()),k=t6([...N,...O]);u(k),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(m&&x){const S=I=>b(I,x),C=I=>b(I,m);return m.addEventListener("pointerleave",S),x.addEventListener("pointerleave",C),()=>{m.removeEventListener("pointerleave",S),x.removeEventListener("pointerleave",C)}}},[m,x,b,v]),E.useEffect(()=>{if(l){const S=C=>{const I=C.target,R={x:C.clientX,y:C.clientY},A=(m==null?void 0:m.contains(I))||(x==null?void 0:x.contains(I)),N=!e6(R,l);A?v():N&&(v(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[m,x,l,h,v]),d.jsx(NS,{...t,ref:i})}),[YP,qP]=M0(nd,{isInside:!1}),XP=tM("TooltipContent"),NS=E.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...u}=t,m=k0(yc,r),h=j0(r),{onClose:x}=m;return E.useEffect(()=>(document.addEventListener(j1,x),()=>document.removeEventListener(j1,x)),[x]),E.useEffect(()=>{if(m.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(m.trigger)&&x()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[m.trigger,x]),d.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:y=>y.preventDefault(),onDismiss:x,children:d.jsxs(qx,{"data-state":m.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(XP,{children:n}),d.jsx(YP,{scope:r,isInside:!0,children:d.jsx(CM,{id:m.contentId,role:"tooltip",children:s||n})})]})})});AS.displayName=yc;var TS="TooltipArrow",KP=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=j0(r);return qP(TS,r).isInside?null:d.jsx(Xx,{...s,...n,ref:e})});KP.displayName=TS;function QP(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function ZP(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function JP(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function e6(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i],m=e[l],h=u.x,x=u.y,y=m.x,v=m.y;x>n!=v>n&&r<(y-h)*(n-x)/(v-x)+h&&(s=!s)}return s}function t6(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),r6(e)}function r6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var n6=CS,s6=ES,i6=SS,IS=AS;const o6=n6,tp=s6,rp=i6,Zf=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>d.jsx(IS,{ref:n,sideOffset:e,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Zf.displayName=IS.displayName;var P0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},D0=typeof window>"u"||"Deno"in globalThis;function js(){}function a6(t,e){return typeof t=="function"?t(e):t}function l6(t){return typeof t=="number"&&t>=0&&t!==1/0}function c6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function P1(t,e){return typeof t=="function"?t(e):t}function u6(t,e){return typeof t=="function"?t(e):t}function t2(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==Qx(l,e.options))return!1}else if(!id(e.queryKey,l))return!1}if(r!=="all"){const m=e.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||i&&!i(e))}function r2(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(sd(e.options.mutationKey)!==sd(i))return!1}else if(!id(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Qx(t,e){return((e==null?void 0:e.queryKeyHashFn)||sd)(t)}function sd(t){return JSON.stringify(t,(e,r)=>D1(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function id(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>id(t[r],e[r])):!1}function RS(t,e){if(t===e)return t;const r=n2(t)&&n2(e);if(r||D1(t)&&D1(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),l=i.length,u=r?[]:{},m=new Set(n);let h=0;for(let x=0;x<l;x++){const y=r?x:i[x];(!r&&m.has(y)||r)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,h++):(u[y]=RS(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&h++)}return s===l&&h===s?t:u}return e}function n2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function D1(t){if(!s2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!s2(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function s2(t){return Object.prototype.toString.call(t)==="[object Object]"}function d6(t){return new Promise(e=>{setTimeout(e,t)})}function f6(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?RS(t,e):e}function h6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function m6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Zx=Symbol();function OS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Zx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ea,po,tc,Lb,p6=(Lb=class extends P0{constructor(){super();yt(this,Ea);yt(this,po);yt(this,tc);Ke(this,tc,e=>{if(!D0&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ce(this,po)||this.setEventListener(ce(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,po))==null||e.call(this),Ke(this,po,void 0))}setEventListener(e){var r;Ke(this,tc,e),(r=ce(this,po))==null||r.call(this),Ke(this,po,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ce(this,Ea)!==e&&(Ke(this,Ea,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof ce(this,Ea)=="boolean"?ce(this,Ea):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ea=new WeakMap,po=new WeakMap,tc=new WeakMap,Lb),MS=new p6,rc,go,nc,Bb,g6=(Bb=class extends P0{constructor(){super();yt(this,rc,!0);yt(this,go);yt(this,nc);Ke(this,nc,e=>{if(!D0&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ce(this,go)||this.setEventListener(ce(this,nc))}onUnsubscribe(){var e;this.hasListeners()||((e=ce(this,go))==null||e.call(this),Ke(this,go,void 0))}setEventListener(e){var r;Ke(this,nc,e),(r=ce(this,go))==null||r.call(this),Ke(this,go,e(this.setOnline.bind(this)))}setOnline(e){ce(this,rc)!==e&&(Ke(this,rc,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ce(this,rc)}},rc=new WeakMap,go=new WeakMap,nc=new WeakMap,Bb),Ph=new g6;function x6(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function y6(t){return Math.min(1e3*2**t,3e4)}function jS(t){return(t??"online")==="online"?Ph.isOnline():!0}var kS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function np(t){return t instanceof kS}function PS(t){let e=!1,r=0,n=!1,s;const i=x6(),l=C=>{var I;n||(v(new kS(C)),(I=t.abort)==null||I.call(t))},u=()=>{e=!0},m=()=>{e=!1},h=()=>MS.isFocused()&&(t.networkMode==="always"||Ph.isOnline())&&t.canRun(),x=()=>jS(t.networkMode)&&t.canRun(),y=C=>{var I;n||(n=!0,(I=t.onSuccess)==null||I.call(t,C),s==null||s(),i.resolve(C))},v=C=>{var I;n||(n=!0,(I=t.onError)==null||I.call(t,C),s==null||s(),i.reject(C))},b=()=>new Promise(C=>{var I;s=R=>{(n||h())&&C(R)},(I=t.onPause)==null||I.call(t)}).then(()=>{var C;s=void 0,n||(C=t.onContinue)==null||C.call(t)}),S=()=>{if(n)return;let C;const I=r===0?t.initialPromise:void 0;try{C=I??t.fn()}catch(R){C=Promise.reject(R)}Promise.resolve(C).then(y).catch(R=>{var F;if(n)return;const A=t.retry??(D0?0:3),N=t.retryDelay??y6,O=typeof N=="function"?N(r,R):N,k=A===!0||typeof A=="number"&&r<A||typeof A=="function"&&A(r,R);if(e||!k){v(R);return}r++,(F=t.onFail)==null||F.call(t,r,R),d6(O).then(()=>h()?void 0:b()).then(()=>{e?v(R):S()})})};return{promise:i,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:u,continueRetry:m,canStart:x,start:()=>(x()?S():b().then(S),i)}}var w6=t=>setTimeout(t,0);function v6(){let t=[],e=0,r=u=>{u()},n=u=>{u()},s=w6;const i=u=>{e?t.push(u):s(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&s(()=>{n(()=>{u.forEach(m=>{r(m)})})})};return{batch:u=>{let m;e++;try{m=u()}finally{e--,e||l()}return m},batchCalls:u=>(...m)=>{i(()=>{u(...m)})},schedule:i,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{s=u}}}var ln=v6(),Sa,Fb,DS=(Fb=class{constructor(){yt(this,Sa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),l6(this.gcTime)&&Ke(this,Sa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(D0?1/0:5*60*1e3))}clearGcTimeout(){ce(this,Sa)&&(clearTimeout(ce(this,Sa)),Ke(this,Sa,void 0))}},Sa=new WeakMap,Fb),sc,Aa,ls,Na,Kr,bd,Ta,Ps,Ti,Ub,b6=(Ub=class extends DS{constructor(e){super();yt(this,Ps);yt(this,sc);yt(this,Aa);yt(this,ls);yt(this,Na);yt(this,Kr);yt(this,bd);yt(this,Ta);Ke(this,Ta,!1),Ke(this,bd,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ke(this,Na,e.client),Ke(this,ls,ce(this,Na).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ke(this,sc,C6(this.options)),this.state=e.state??ce(this,sc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ce(this,Kr))==null?void 0:e.promise}setOptions(e){this.options={...ce(this,bd),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ce(this,ls).remove(this)}setData(e,r){const n=f6(this.state.data,e,this.options);return Yr(this,Ps,Ti).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Yr(this,Ps,Ti).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=ce(this,Kr))==null?void 0:n.promise;return(s=ce(this,Kr))==null||s.cancel(e),r?r.then(js).catch(js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ce(this,sc))}isActive(){return this.observers.some(e=>u6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>P1(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!c6(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=ce(this,Kr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=ce(this,Kr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ce(this,ls).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(ce(this,Kr)&&(ce(this,Ta)?ce(this,Kr).cancel({revert:!0}):ce(this,Kr).cancelRetry()),this.scheduleGc()),ce(this,ls).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yr(this,Ps,Ti).call(this,{type:"invalidate"})}fetch(e,r){var h,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ce(this,Kr))return ce(this,Kr).continueRetry(),ce(this,Kr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const n=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ke(this,Ta,!0),n.signal)})},i=()=>{const v=OS(this.options,r),S=(()=>{const C={client:ce(this,Na),queryKey:this.queryKey,meta:this.meta};return s(C),C})();return Ke(this,Ta,!1),this.options.persister?this.options.persister(v,S,this):v(S)},u=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ce(this,Na),state:this.state,fetchFn:i};return s(v),v})();(h=this.options.behavior)==null||h.onFetch(u,this),Ke(this,Aa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&Yr(this,Ps,Ti).call(this,{type:"fetch",meta:(y=u.fetchOptions)==null?void 0:y.meta});const m=v=>{var b,S,C,I;np(v)&&v.silent||Yr(this,Ps,Ti).call(this,{type:"error",error:v}),np(v)||((S=(b=ce(this,ls).config).onError)==null||S.call(b,v,this),(I=(C=ce(this,ls).config).onSettled)==null||I.call(C,this.state.data,v,this)),this.scheduleGc()};return Ke(this,Kr,PS({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,abort:n.abort.bind(n),onSuccess:v=>{var b,S,C,I;if(v===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(R){m(R);return}(S=(b=ce(this,ls).config).onSuccess)==null||S.call(b,v,this),(I=(C=ce(this,ls).config).onSettled)==null||I.call(C,v,this.state.error,this),this.scheduleGc()},onError:m,onFail:(v,b)=>{Yr(this,Ps,Ti).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{Yr(this,Ps,Ti).call(this,{type:"pause"})},onContinue:()=>{Yr(this,Ps,Ti).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),ce(this,Kr).start()}},sc=new WeakMap,Aa=new WeakMap,ls=new WeakMap,Na=new WeakMap,Kr=new WeakMap,bd=new WeakMap,Ta=new WeakMap,Ps=new WeakSet,Ti=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,..._6(n.data,this.options),fetchMeta:e.meta??null};case"success":return Ke(this,Aa,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return np(s)&&s.revert&&ce(this,Aa)?{...ce(this,Aa),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),ln.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ce(this,ls).notify({query:this,type:"updated",action:e})})},Ub);function _6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function C6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ai,zb,E6=(zb=class extends P0{constructor(e={}){super();yt(this,ai);this.config=e,Ke(this,ai,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Qx(s,r);let l=this.get(i);return l||(l=new b6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){ce(this,ai).has(e.queryHash)||(ce(this,ai).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=ce(this,ai).get(e.queryHash);r&&(e.destroy(),r===e&&ce(this,ai).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ce(this,ai).get(e)}getAll(){return[...ce(this,ai).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>t2(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>t2(e,n)):r}notify(e){ln.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ai=new WeakMap,zb),li,on,Ia,ci,ao,Vb,S6=(Vb=class extends DS{constructor(e){super();yt(this,ci);yt(this,li);yt(this,on);yt(this,Ia);this.mutationId=e.mutationId,Ke(this,on,e.mutationCache),Ke(this,li,[]),this.state=e.state||A6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ce(this,li).includes(e)||(ce(this,li).push(e),this.clearGcTimeout(),ce(this,on).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ke(this,li,ce(this,li).filter(r=>r!==e)),this.scheduleGc(),ce(this,on).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ce(this,li).length||(this.state.status==="pending"?this.scheduleGc():ce(this,on).remove(this))}continue(){var e;return((e=ce(this,Ia))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,l,u,m,h,x,y,v,b,S,C,I,R,A,N,O,k,F,B,P;const r=()=>{Yr(this,ci,ao).call(this,{type:"continue"})};Ke(this,Ia,PS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(j,W)=>{Yr(this,ci,ao).call(this,{type:"failed",failureCount:j,error:W})},onPause:()=>{Yr(this,ci,ao).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ce(this,on).canRun(this)}));const n=this.state.status==="pending",s=!ce(this,Ia).canStart();try{if(n)r();else{Yr(this,ci,ao).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(i=ce(this,on).config).onMutate)==null?void 0:l.call(i,e,this));const W=await((m=(u=this.options).onMutate)==null?void 0:m.call(u,e));W!==this.state.context&&Yr(this,ci,ao).call(this,{type:"pending",context:W,variables:e,isPaused:s})}const j=await ce(this,Ia).start();return await((x=(h=ce(this,on).config).onSuccess)==null?void 0:x.call(h,j,e,this.state.context,this)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,j,e,this.state.context)),await((S=(b=ce(this,on).config).onSettled)==null?void 0:S.call(b,j,null,this.state.variables,this.state.context,this)),await((I=(C=this.options).onSettled)==null?void 0:I.call(C,j,null,e,this.state.context)),Yr(this,ci,ao).call(this,{type:"success",data:j}),j}catch(j){try{throw await((A=(R=ce(this,on).config).onError)==null?void 0:A.call(R,j,e,this.state.context,this)),await((O=(N=this.options).onError)==null?void 0:O.call(N,j,e,this.state.context)),await((F=(k=ce(this,on).config).onSettled)==null?void 0:F.call(k,void 0,j,this.state.variables,this.state.context,this)),await((P=(B=this.options).onSettled)==null?void 0:P.call(B,void 0,j,e,this.state.context)),j}finally{Yr(this,ci,ao).call(this,{type:"error",error:j})}}finally{ce(this,on).runNext(this)}}},li=new WeakMap,on=new WeakMap,Ia=new WeakMap,ci=new WeakSet,ao=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ln.batch(()=>{ce(this,li).forEach(n=>{n.onMutationUpdate(e)}),ce(this,on).notify({mutation:this,type:"updated",action:e})})},Vb);function A6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pi,Ds,_d,Hb,N6=(Hb=class extends P0{constructor(e={}){super();yt(this,Pi);yt(this,Ds);yt(this,_d);this.config=e,Ke(this,Pi,new Set),Ke(this,Ds,new Map),Ke(this,_d,0)}build(e,r,n){const s=new S6({mutationCache:this,mutationId:++Zd(this,_d)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){ce(this,Pi).add(e);const r=bf(e);if(typeof r=="string"){const n=ce(this,Ds).get(r);n?n.push(e):ce(this,Ds).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ce(this,Pi).delete(e)){const r=bf(e);if(typeof r=="string"){const n=ce(this,Ds).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&ce(this,Ds).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=bf(e);if(typeof r=="string"){const n=ce(this,Ds).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=bf(e);if(typeof r=="string"){const s=(n=ce(this,Ds).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ln.batch(()=>{ce(this,Pi).forEach(e=>{this.notify({type:"removed",mutation:e})}),ce(this,Pi).clear(),ce(this,Ds).clear()})}getAll(){return Array.from(ce(this,Pi))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>r2(r,n))}findAll(e={}){return this.getAll().filter(r=>r2(e,r))}notify(e){ln.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return ln.batch(()=>Promise.all(e.map(r=>r.continue().catch(js))))}},Pi=new WeakMap,Ds=new WeakMap,_d=new WeakMap,Hb);function bf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function i2(t){return{onFetch:(e,r)=>{var x,y,v,b,S;const n=e.options,s=(v=(y=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,i=((b=e.state.data)==null?void 0:b.pages)||[],l=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},m=0;const h=async()=>{let C=!1;const I=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?C=!0:e.signal.addEventListener("abort",()=>{C=!0}),e.signal)})},R=OS(e.options,e.fetchOptions),A=async(N,O,k)=>{if(C)return Promise.reject();if(O==null&&N.pages.length)return Promise.resolve(N);const B=(()=>{const Y={client:e.client,queryKey:e.queryKey,pageParam:O,direction:k?"backward":"forward",meta:e.options.meta};return I(Y),Y})(),P=await R(B),{maxPages:j}=e.options,W=k?m6:h6;return{pages:W(N.pages,P,j),pageParams:W(N.pageParams,O,j)}};if(s&&i.length){const N=s==="backward",O=N?T6:o2,k={pages:i,pageParams:l},F=O(n,k);u=await A(k,F,N)}else{const N=t??i.length;do{const O=m===0?l[0]??n.initialPageParam:o2(n,u);if(m>0&&O==null)break;u=await A(u,O),m++}while(m<N)}return u};e.options.persister?e.fetchFn=()=>{var C,I;return(I=(C=e.options).persister)==null?void 0:I.call(C,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=h}}}function o2(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function T6(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var or,xo,yo,ic,oc,wo,ac,lc,$b,I6=($b=class{constructor(t={}){yt(this,or);yt(this,xo);yt(this,yo);yt(this,ic);yt(this,oc);yt(this,wo);yt(this,ac);yt(this,lc);Ke(this,or,t.queryCache||new E6),Ke(this,xo,t.mutationCache||new N6),Ke(this,yo,t.defaultOptions||{}),Ke(this,ic,new Map),Ke(this,oc,new Map),Ke(this,wo,0)}mount(){Zd(this,wo)._++,ce(this,wo)===1&&(Ke(this,ac,MS.subscribe(async t=>{t&&(await this.resumePausedMutations(),ce(this,or).onFocus())})),Ke(this,lc,Ph.subscribe(async t=>{t&&(await this.resumePausedMutations(),ce(this,or).onOnline())})))}unmount(){var t,e;Zd(this,wo)._--,ce(this,wo)===0&&((t=ce(this,ac))==null||t.call(this),Ke(this,ac,void 0),(e=ce(this,lc))==null||e.call(this),Ke(this,lc,void 0))}isFetching(t){return ce(this,or).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ce(this,xo).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ce(this,or).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=ce(this,or).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(P1(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return ce(this,or).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=ce(this,or).get(n.queryHash),i=s==null?void 0:s.state.data,l=a6(e,i);if(l!==void 0)return ce(this,or).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return ln.batch(()=>ce(this,or).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=ce(this,or).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=ce(this,or);ln.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=ce(this,or);return ln.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=ln.batch(()=>ce(this,or).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(js).catch(js)}invalidateQueries(t,e={}){return ln.batch(()=>(ce(this,or).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=ln.batch(()=>ce(this,or).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(js)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(js)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=ce(this,or).build(this,e);return r.isStaleByTime(P1(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(js).catch(js)}fetchInfiniteQuery(t){return t.behavior=i2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(js).catch(js)}ensureInfiniteQueryData(t){return t.behavior=i2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ph.isOnline()?ce(this,xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ce(this,or)}getMutationCache(){return ce(this,xo)}getDefaultOptions(){return ce(this,yo)}setDefaultOptions(t){Ke(this,yo,t)}setQueryDefaults(t,e){ce(this,ic).set(sd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ce(this,ic).values()],r={};return e.forEach(n=>{id(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){ce(this,oc).set(sd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ce(this,oc).values()],r={};return e.forEach(n=>{id(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ce(this,yo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Qx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Zx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ce(this,yo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ce(this,or).clear(),ce(this,xo).clear()}},or=new WeakMap,xo=new WeakMap,yo=new WeakMap,ic=new WeakMap,oc=new WeakMap,wo=new WeakMap,ac=new WeakMap,lc=new WeakMap,$b),R6=E.createContext(void 0),O6=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(R6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function od(){return od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},od.apply(this,arguments)}var _o;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_o||(_o={}));const a2="popstate";function M6(t){t===void 0&&(t={});function e(s,i){let{pathname:l="/",search:u="",hash:m=""}=Qa(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),L1("",{pathname:l,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let m=s.location.href,h=m.indexOf("#");u=h===-1?m:m.slice(0,h)}return u+"#"+(typeof i=="string"?i:Dh(i))}function n(s,i){Jx(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return k6(e,r,n,t)}function br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j6(){return Math.random().toString(36).substr(2,8)}function l2(t,e){return{usr:t.state,key:t.key,idx:e}}function L1(t,e,r,n){return r===void 0&&(r=null),od({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qa(e):e,{state:r,key:e&&e.key||n||j6()})}function Dh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Qa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function k6(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u=_o.Pop,m=null,h=x();h==null&&(h=0,l.replaceState(od({},l.state,{idx:h}),""));function x(){return(l.state||{idx:null}).idx}function y(){u=_o.Pop;let I=x(),R=I==null?null:I-h;h=I,m&&m({action:u,location:C.location,delta:R})}function v(I,R){u=_o.Push;let A=L1(C.location,I,R);r&&r(A,I),h=x()+1;let N=l2(A,h),O=C.createHref(A);try{l.pushState(N,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(O)}i&&m&&m({action:u,location:C.location,delta:1})}function b(I,R){u=_o.Replace;let A=L1(C.location,I,R);r&&r(A,I),h=x();let N=l2(A,h),O=C.createHref(A);l.replaceState(N,"",O),i&&m&&m({action:u,location:C.location,delta:0})}function S(I){let R=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof I=="string"?I:Dh(I);return A=A.replace(/ $/,"%20"),br(R,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,R)}let C={get action(){return u},get location(){return t(s,l)},listen(I){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(a2,y),m=I,()=>{s.removeEventListener(a2,y),m=null}},createHref(I){return e(s,I)},createURL:S,encodeLocation(I){let R=S(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(I){return l.go(I)}};return C}var c2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(c2||(c2={}));function P6(t,e,r){return r===void 0&&(r="/"),D6(t,e,r,!1)}function D6(t,e,r,n){let s=typeof e=="string"?Qa(e):e,i=ey(s.pathname||"/",r);if(i==null)return null;let l=LS(t);L6(l);let u=null;for(let m=0;u==null&&m<l.length;++m){let h=q6(i);u=G6(l[m],h,n)}return u}function LS(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,l,u)=>{let m={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};m.relativePath.startsWith("/")&&(br(m.relativePath.startsWith(n),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(n.length));let h=Po([n,m.relativePath]),x=r.concat(m);i.children&&i.children.length>0&&(br(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),LS(i.children,e,x,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:$6(h,i.index),routesMeta:x})};return t.forEach((i,l)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,l);else for(let m of BS(i.path))s(i,l,m)}),e}function BS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=BS(n.join("/")),u=[];return u.push(...l.map(m=>m===""?i:[i,m].join("/"))),s&&u.push(...l),u.map(m=>t.startsWith("/")&&m===""?"/":m)}function L6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:W6(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const B6=/^:[\w-]+$/,F6=3,U6=2,z6=1,V6=10,H6=-2,u2=t=>t==="*";function $6(t,e){let r=t.split("/"),n=r.length;return r.some(u2)&&(n+=H6),e&&(n+=U6),r.filter(s=>!u2(s)).reduce((s,i)=>s+(B6.test(i)?F6:i===""?z6:V6),n)}function W6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function G6(t,e,r){let{routesMeta:n}=t,s={},i="/",l=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,x=i==="/"?e:e.slice(i.length)||"/",y=d2({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},x),v=m.route;if(!y&&h&&r&&!n[n.length-1].route.index&&(y=d2({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Po([i,y.pathname]),pathnameBase:Z6(Po([i,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(i=Po([i,y.pathnameBase]))}return l}function d2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Y6(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((h,x,y)=>{let{paramName:v,isOptional:b}=x;if(v==="*"){let C=u[y]||"";l=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const S=u[y];return b&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function Y6(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Jx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,m)=>(n.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function q6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ey(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function X6(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Qa(t):t;return{pathname:r?r.startsWith("/")?r:K6(r,e):e,search:J6(n),hash:e5(s)}}function K6(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function sp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Q6(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function FS(t,e){let r=Q6(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function US(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Qa(t):(s=od({},t),br(!s.pathname||!s.pathname.includes("?"),sp("?","pathname","search",s)),br(!s.pathname||!s.pathname.includes("#"),sp("#","pathname","hash",s)),br(!s.search||!s.search.includes("#"),sp("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let y=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let m=X6(s,u),h=l&&l!=="/"&&l.endsWith("/"),x=(i||l===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||x)&&(m.pathname+="/"),m}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),Z6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zS=["post","put","patch","delete"];new Set(zS);const r5=["get",...zS];new Set(r5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ad.apply(this,arguments)}const ty=E.createContext(null),n5=E.createContext(null),Za=E.createContext(null),L0=E.createContext(null),Xo=E.createContext({outlet:null,matches:[],isDataRoute:!1}),VS=E.createContext(null);function s5(t,e){let{relative:r}=e===void 0?{}:e;Md()||br(!1);let{basename:n,navigator:s}=E.useContext(Za),{hash:i,pathname:l,search:u}=$S(t,{relative:r}),m=l;return n!=="/"&&(m=l==="/"?n:Po([n,l])),s.createHref({pathname:m,search:u,hash:i})}function Md(){return E.useContext(L0)!=null}function Ko(){return Md()||br(!1),E.useContext(L0).location}function HS(t){E.useContext(Za).static||E.useLayoutEffect(t)}function rn(){let{isDataRoute:t}=E.useContext(Xo);return t?y5():i5()}function i5(){Md()||br(!1);let t=E.useContext(ty),{basename:e,future:r,navigator:n}=E.useContext(Za),{matches:s}=E.useContext(Xo),{pathname:i}=Ko(),l=JSON.stringify(FS(s,r.v7_relativeSplatPath)),u=E.useRef(!1);return HS(()=>{u.current=!0}),E.useCallback(function(h,x){if(x===void 0&&(x={}),!u.current)return;if(typeof h=="number"){n.go(h);return}let y=US(h,JSON.parse(l),i,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Po([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,l,i,t])}function o5(){let{matches:t}=E.useContext(Xo),e=t[t.length-1];return e?e.params:{}}function $S(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=E.useContext(Za),{matches:s}=E.useContext(Xo),{pathname:i}=Ko(),l=JSON.stringify(FS(s,n.v7_relativeSplatPath));return E.useMemo(()=>US(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function a5(t,e){return l5(t,e)}function l5(t,e,r,n){Md()||br(!1);let{navigator:s}=E.useContext(Za),{matches:i}=E.useContext(Xo),l=i[i.length-1],u=l?l.params:{};l&&l.pathname;let m=l?l.pathnameBase:"/";l&&l.route;let h=Ko(),x;if(e){var y;let I=typeof e=="string"?Qa(e):e;m==="/"||(y=I.pathname)!=null&&y.startsWith(m)||br(!1),x=I}else x=h;let v=x.pathname||"/",b=v;if(m!=="/"){let I=m.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=P6(t,{pathname:b}),C=h5(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Po([m,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?m:Po([m,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,r,n);return e&&C?E.createElement(L0.Provider,{value:{location:ad({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:_o.Pop}},C):C}function c5(){let t=x5(),e=t5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:s},r):null,null)}const u5=E.createElement(c5,null);class d5 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?E.createElement(Xo.Provider,{value:this.props.routeContext},E.createElement(VS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f5(t){let{routeContext:e,match:r,children:n}=t,s=E.useContext(ty);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(Xo.Provider,{value:e},n)}function h5(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,u=(s=r)==null?void 0:s.errors;if(u!=null){let x=l.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);x>=0||br(!1),l=l.slice(0,Math.min(l.length,x+1))}let m=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=x),y.route.id){let{loaderData:v,errors:b}=r,S=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){m=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((x,y,v)=>{let b,S=!1,C=null,I=null;r&&(b=u&&y.route.id?u[y.route.id]:void 0,C=y.route.errorElement||u5,m&&(h<0&&v===0?(S=!0,I=null):h===v&&(S=!0,I=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,v+1)),A=()=>{let N;return b?N=C:S?N=I:y.route.Component?N=E.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=x,E.createElement(f5,{match:y,routeContext:{outlet:x,matches:R,isDataRoute:r!=null},children:N})};return r&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(d5,{location:r.location,revalidation:r.revalidation,component:C,error:b,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):A()},null)}var WS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(WS||{}),Lh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lh||{});function m5(t){let e=E.useContext(ty);return e||br(!1),e}function p5(t){let e=E.useContext(n5);return e||br(!1),e}function g5(t){let e=E.useContext(Xo);return e||br(!1),e}function GS(t){let e=g5(),r=e.matches[e.matches.length-1];return r.route.id||br(!1),r.route.id}function x5(){var t;let e=E.useContext(VS),r=p5(Lh.UseRouteError),n=GS(Lh.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function y5(){let{router:t}=m5(WS.UseNavigateStable),e=GS(Lh.UseNavigateStable),r=E.useRef(!1);return HS(()=>{r.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ad({fromRouteId:e},i)))},[t,e])}function w5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ur(t){br(!1)}function v5(t){let{basename:e="/",children:r=null,location:n,navigationType:s=_o.Pop,navigator:i,static:l=!1,future:u}=t;Md()&&br(!1);let m=e.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:m,navigator:i,static:l,future:ad({v7_relativeSplatPath:!1},u)}),[m,u,i,l]);typeof n=="string"&&(n=Qa(n));let{pathname:x="/",search:y="",hash:v="",state:b=null,key:S="default"}=n,C=E.useMemo(()=>{let I=ey(x,m);return I==null?null:{location:{pathname:I,search:y,hash:v,state:b,key:S},navigationType:s}},[m,x,y,v,b,S,s]);return C==null?null:E.createElement(Za.Provider,{value:h},E.createElement(L0.Provider,{children:r,value:C}))}function b5(t){let{children:e,location:r}=t;return a5(B1(e),r)}new Promise(()=>{});function B1(t,e){e===void 0&&(e=[]);let r=[];return E.Children.forEach(t,(n,s)=>{if(!E.isValidElement(n))return;let i=[...e,s];if(n.type===E.Fragment){r.push.apply(r,B1(n.props.children,i));return}n.type!==Ur&&br(!1),!n.props.index||!n.props.children||br(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=B1(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},F1.apply(this,arguments)}function _5(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function C5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function E5(t,e){return t.button===0&&(!e||e==="_self")&&!C5(t)}const S5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A5="6";try{window.__reactRouterVersion=A5}catch{}const N5="startTransition",f2=Pg[N5];function T5(t){let{basename:e,children:r,future:n,window:s}=t,i=E.useRef();i.current==null&&(i.current=M6({window:s,v5Compat:!0}));let l=i.current,[u,m]=E.useState({action:l.action,location:l.location}),{v7_startTransition:h}=n||{},x=E.useCallback(y=>{h&&f2?f2(()=>m(y)):m(y)},[m,h]);return E.useLayoutEffect(()=>l.listen(x),[l,x]),E.useEffect(()=>w5(n),[n]),E.createElement(v5,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:l,future:n})}const I5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_f=E.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:u,target:m,to:h,preventScrollReset:x,viewTransition:y}=e,v=_5(e,S5),{basename:b}=E.useContext(Za),S,C=!1;if(typeof h=="string"&&R5.test(h)&&(S=h,I5))try{let N=new URL(window.location.href),O=h.startsWith("//")?new URL(N.protocol+h):new URL(h),k=ey(O.pathname,b);O.origin===N.origin&&k!=null?h=k+O.search+O.hash:C=!0}catch{}let I=s5(h,{relative:s}),R=O5(h,{replace:l,state:u,target:m,preventScrollReset:x,relative:s,viewTransition:y});function A(N){n&&n(N),N.defaultPrevented||R(N)}return E.createElement("a",F1({},v,{href:S||I,onClick:C||i?n:A,ref:r,target:m}))});var h2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h2||(h2={}));var m2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(m2||(m2={}));function O5(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:u}=e===void 0?{}:e,m=rn(),h=Ko(),x=$S(t,{relative:l});return E.useCallback(y=>{if(E5(y,r)){y.preventDefault();let v=n!==void 0?n:Dh(h)===Dh(x);m(t,{replace:v,state:s,preventScrollReset:i,relative:l,viewTransition:u})}},[h,m,x,n,s,r,t,i,l,u])}var U1=function(t,e){return U1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},U1(t,e)};function YS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");U1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ds=function(){return ds=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ds.apply(this,arguments)};function Qo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function qS(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(i=(s<3?l(i):s>3?l(e,r,i):l(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function XS(t,e){return function(r,n){e(r,n,t)}}function KS(t,e,r,n,s,i){function l(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var u=n.kind,m=u==="getter"?"get":u==="setter"?"set":"value",h=!e&&t?n.static?t:t.prototype:null,x=e||(h?Object.getOwnPropertyDescriptor(h,n.name):{}),y,v=!1,b=r.length-1;b>=0;b--){var S={};for(var C in n)S[C]=C==="access"?{}:n[C];for(var C in n.access)S.access[C]=n.access[C];S.addInitializer=function(R){if(v)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(R||null))};var I=(0,r[b])(u==="accessor"?{get:x.get,set:x.set}:x[m],S);if(u==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(y=l(I.get))&&(x.get=y),(y=l(I.set))&&(x.set=y),(y=l(I.init))&&s.unshift(y)}else(y=l(I))&&(u==="field"?s.unshift(y):x[m]=y)}h&&Object.defineProperty(h,n.name,x),v=!0}function QS(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function ZS(t){return typeof t=="symbol"?t:"".concat(t)}function JS(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function eA(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Pe(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})}function tA(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var B0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function rA(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&B0(e,t,r)}function Bh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ry(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],l;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return i}function nA(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ry(arguments[e]));return t}function sA(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],l=0,u=i.length;l<u;l++,s++)n[s]=i[l];return n}function ny(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function wc(t){return this instanceof wc?(this.v=t,this):new wc(t)}function iA(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(b){return function(S){return Promise.resolve(S).then(b,y)}}function u(b,S){n[b]&&(s[b]=function(C){return new Promise(function(I,R){i.push([b,C,I,R])>1||m(b,C)})},S&&(s[b]=S(s[b])))}function m(b,S){try{h(n[b](S))}catch(C){v(i[0][3],C)}}function h(b){b.value instanceof wc?Promise.resolve(b.value.v).then(x,y):v(i[0][2],b)}function x(b){m("next",b)}function y(b){m("throw",b)}function v(b,S){b(S),i.shift(),i.length&&m(i[0][0],i[0][1])}}function oA(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(l){return(r=!r)?{value:wc(t[s](l)),done:!1}:i?i(l):l}:i}}function aA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bh=="function"?Bh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(l){return new Promise(function(u,m){l=t[i](l),s(u,m,l.done,l.value)})}}function s(i,l,u,m){Promise.resolve(m).then(function(h){i({value:h,done:u})},l)}}function lA(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var M5=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},z1=function(t){return z1=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},z1(t)};function cA(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=z1(t),n=0;n<r.length;n++)r[n]!=="default"&&B0(e,t,r[n]);return M5(e,t),e}function uA(t){return t&&t.__esModule?t:{default:t}}function dA(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function fA(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function hA(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function mA(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var j5=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function pA(t){function e(i){t.error=t.hasError?new j5(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(l){return e(l),s()})}else n|=1}catch(l){e(l)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function gA(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,l){return n?e?".jsx":".js":s&&(!i||!l)?r:s+i+"."+l.toLowerCase()+"js"}):t}const k5={__extends:YS,__assign:ds,__rest:Qo,__decorate:qS,__param:XS,__esDecorate:KS,__runInitializers:QS,__propKey:ZS,__setFunctionName:JS,__metadata:eA,__awaiter:Pe,__generator:tA,__createBinding:B0,__exportStar:rA,__values:Bh,__read:ry,__spread:nA,__spreadArrays:sA,__spreadArray:ny,__await:wc,__asyncGenerator:iA,__asyncDelegator:oA,__asyncValues:aA,__makeTemplateObject:lA,__importStar:cA,__importDefault:uA,__classPrivateFieldGet:dA,__classPrivateFieldSet:fA,__classPrivateFieldIn:hA,__addDisposableResource:mA,__disposeResources:pA,__rewriteRelativeImportExtension:gA},P5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:mA,get __assign(){return ds},__asyncDelegator:oA,__asyncGenerator:iA,__asyncValues:aA,__await:wc,__awaiter:Pe,__classPrivateFieldGet:dA,__classPrivateFieldIn:hA,__classPrivateFieldSet:fA,__createBinding:B0,__decorate:qS,__disposeResources:pA,__esDecorate:KS,__exportStar:rA,__extends:YS,__generator:tA,__importDefault:uA,__importStar:cA,__makeTemplateObject:lA,__metadata:eA,__param:XS,__propKey:ZS,__read:ry,__rest:Qo,__rewriteRelativeImportExtension:gA,__runInitializers:QS,__setFunctionName:JS,__spread:nA,__spreadArray:ny,__spreadArrays:sA,__values:Bh,default:k5},Symbol.toStringTag,{value:"Module"})),D5="modulepreload",L5=function(t){return"/ALAN_NEW/"+t},p2={},Ho=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(m=>{if(m=L5(m),m in p2)return;p2[m]=!0;const h=m.endsWith(".css"),x=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":D5,h||(y.as="script"),y.crossOrigin="",y.href=m,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((v,b)=>{y.addEventListener("load",v),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},B5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>Ja);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class sy extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class g2 extends sy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class x2 extends sy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class y2 extends sy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var V1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(V1||(V1={}));class F5{constructor(e,{headers:r={},customFetch:n,region:s=V1.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=B5(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Pe(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:m}=n;let h={},{region:x}=n;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(h["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let v;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)):v=u;const b=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:v,signal:m}).catch(R=>{throw R.name==="AbortError"?R:new g2(R)}),S=b.headers.get("x-relay-error");if(S&&S==="true")throw new x2(b);if(!b.ok)throw new y2(b);let C=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),I;return C==="application/json"?I=yield b.json():C==="application/octet-stream"||C==="application/pdf"?I=yield b.blob():C==="text/event-stream"?I=b:C==="multipart/form-data"?I=yield b.formData():I=yield b.text(),{data:I,error:null,response:b}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new g2(i)}:{data:null,error:i,response:i instanceof y2||i instanceof x2?i.context:void 0}}})}}var cn={};const Bc=Wb(P5);var Cf={},Ef={},Sf={},Af={},Nf={},U5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vc=U5();const z5=vc.fetch,xA=vc.fetch.bind(vc),yA=vc.Headers,V5=vc.Request,H5=vc.Response,Ja=Object.freeze(Object.defineProperty({__proto__:null,Headers:yA,Request:V5,Response:H5,default:xA,fetch:z5},Symbol.toStringTag,{value:"Module"})),$5=Wb(Ja);var Tf={},w2;function wA(){if(w2)return Tf;w2=1,Object.defineProperty(Tf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Tf.default=t,Tf}var v2;function vA(){if(v2)return Nf;v2=1,Object.defineProperty(Nf,"__esModule",{value:!0});const t=Bc,e=t.__importDefault($5),r=t.__importDefault(wA());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let m=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var x,y,v,b;let S=null,C=null,I=null,R=h.status,A=h.statusText;if(h.ok){if(this.method!=="HEAD"){const F=await h.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?C=F:C=JSON.parse(F))}const O=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),k=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");O&&k&&k.length>1&&(I=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(S={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,I=null,R=406,A="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const O=await h.text();try{S=JSON.parse(O),Array.isArray(S)&&h.status===404&&(C=[],S=null,R=200,A="OK")}catch{h.status===404&&O===""?(R=204,A="No Content"):S={message:O}}if(S&&this.isMaybeSingle&&(!((b=S==null?void 0:S.details)===null||b===void 0)&&b.includes("0 rows"))&&(S=null,R=200,A="OK"),S&&this.shouldThrowOnError)throw new r.default(S)}return{error:S,data:C,count:I,status:R,statusText:A}});return this.shouldThrowOnError||(m=m.catch(h=>{var x,y,v;return{error:{message:`${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(y=h==null?void 0:h.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=h==null?void 0:h.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),m.then(i,l)}returns(){return this}overrideTypes(){return this}}return Nf.default=n,Nf}var b2;function bA(){if(b2)return Af;b2=1,Object.defineProperty(Af,"__esModule",{value:!0});const e=Bc.__importDefault(vA());class r extends e.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:m=u}={}){const h=m?`${m}.order`:"order",x=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${x?`${x},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const m=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${s}`),this.url.searchParams.set(h,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:m=!1,format:h="text"}={}){var x;const y=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,m?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${y};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Af.default=r,Af}var _2;function iy(){if(_2)return Sf;_2=1,Object.defineProperty(Sf,"__esModule",{value:!0});const e=Bc.__importDefault(bA()),r=new RegExp("[,()]");class n extends e.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}in(i,l){const u=Array.from(new Set(l)).map(m=>typeof m=="string"&&r.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:u,type:m}={}){let h="";m==="plain"?h="pl":m==="phrase"?h="ph":m==="websearch"&&(h="w");const x=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${h}fts${x}.${l}`),this}match(i){return Object.entries(i).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(i,l,u){return this.url.searchParams.append(i,`not.${l}.${u}`),this}or(i,{foreignTable:l,referencedTable:u=l}={}){const m=u?`${u}.or`:"or";return this.url.searchParams.append(m,`(${i})`),this}filter(i,l,u){return this.url.searchParams.append(i,`${l}.${u}`),this}}return Sf.default=n,Sf}var C2;function _A(){if(C2)return Ef;C2=1,Object.defineProperty(Ef,"__esModule",{value:!0});const e=Bc.__importDefault(iy());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},m=l?"HEAD":"GET";let h=!1;const x=(s??"*").split("").map(y=>/\s/.test(y)&&!h?"":(y==='"'&&(h=!h),y)).join("");return this.url.searchParams.set("select",x),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const m="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(h.length>0){const x=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:m=!0}={}){var h;const x="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Ef.default=r,Ef}var E2;function W5(){if(E2)return Cf;E2=1,Object.defineProperty(Cf,"__esModule",{value:!0});const t=Bc,e=t.__importDefault(_A()),r=t.__importDefault(iy());class n{constructor(i,{headers:l={},schema:u,fetch:m}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=m}from(i){const l=new URL(`${this.url}/${i}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:m=!1,count:h}={}){var x;let y;const v=new URL(`${this.url}/rpc/${i}`);let b;u||m?(y=u?"HEAD":"GET",Object.entries(l).filter(([C,I])=>I!==void 0).map(([C,I])=>[C,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([C,I])=>{v.searchParams.append(C,I)})):(y="POST",b=l);const S=new Headers(this.headers);return h&&S.set("Prefer",`count=${h}`),new r.default({method:y,url:v,headers:S,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Cf.default=n,Cf}Object.defineProperty(cn,"__esModule",{value:!0});var CA=cn.PostgrestError=jA=cn.PostgrestBuilder=OA=cn.PostgrestTransformBuilder=IA=cn.PostgrestFilterBuilder=NA=cn.PostgrestQueryBuilder=SA=cn.PostgrestClient=void 0;const Fc=Bc,EA=Fc.__importDefault(W5());var SA=cn.PostgrestClient=EA.default;const AA=Fc.__importDefault(_A());var NA=cn.PostgrestQueryBuilder=AA.default;const TA=Fc.__importDefault(iy());var IA=cn.PostgrestFilterBuilder=TA.default;const RA=Fc.__importDefault(bA());var OA=cn.PostgrestTransformBuilder=RA.default;const MA=Fc.__importDefault(vA());var jA=cn.PostgrestBuilder=MA.default;const kA=Fc.__importDefault(wA());CA=cn.PostgrestError=kA.default;var PA=cn.default={PostgrestClient:EA.default,PostgrestQueryBuilder:AA.default,PostgrestFilterBuilder:TA.default,PostgrestTransformBuilder:RA.default,PostgrestBuilder:MA.default,PostgrestError:kA.default};const G5=Ig({__proto__:null,get PostgrestBuilder(){return jA},get PostgrestClient(){return SA},get PostgrestError(){return CA},get PostgrestFilterBuilder(){return IA},get PostgrestQueryBuilder(){return NA},get PostgrestTransformBuilder(){return OA},default:PA},[cn]),{PostgrestClient:Y5,PostgrestQueryBuilder:rH,PostgrestFilterBuilder:nH,PostgrestTransformBuilder:sH,PostgrestBuilder:iH,PostgrestError:oH}=PA||G5;class q5{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X5="2.78.0",K5=`realtime-js/${X5}`,Q5="1.0.0",H1=1e4,Z5=1e3,J5=100;var Ou;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ou||(Ou={}));var Ar;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ar||(Ar={}));var Bs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bs||(Bs={}));var $1;(function(t){t.websocket="websocket"})($1||($1={}));var xa;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xa||(xa={}));class eD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(e.slice(l,l+s));l=l+s;const m=n.decode(e.slice(l,l+i));l=l+i;const h=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:m,payload:h}}}class DA{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(jt||(jt={}));const S2=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,l)=>(i[l]=tD(l,t,e,s),i),{}):{}},tD=(t,e,r,n)=>{const s=e.find(u=>u.name===t),i=s==null?void 0:s.type,l=r[t];return i&&!n.includes(i)?LA(i,l):W1(l)},LA=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return iD(e,r)}switch(t){case jt.bool:return rD(e);case jt.float4:case jt.float8:case jt.int2:case jt.int4:case jt.int8:case jt.numeric:case jt.oid:return nD(e);case jt.json:case jt.jsonb:return sD(e);case jt.timestamp:return oD(e);case jt.abstime:case jt.date:case jt.daterange:case jt.int4range:case jt.int8range:case jt.money:case jt.reltime:case jt.text:case jt.time:case jt.timestamptz:case jt.timetz:case jt.tsrange:case jt.tstzrange:return W1(e);default:return W1(e)}},W1=t=>t,rD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},sD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},iD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const l=t.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>LA(e,u))}return t},oD=t=>typeof t=="string"?t.replace(" ","T"):t,BA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ip{constructor(e,r,n={},s=H1){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var A2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(A2||(A2={}));class Mu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(m=>{this.state=Mu.syncDiff(this.state,m,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),l=this.transformState(r),u={},m={};return this.map(i,(h,x)=>{l[h]||(m[h]=x)}),this.map(l,(h,x)=>{const y=i[h];if(y){const v=x.map(I=>I.presence_ref),b=y.map(I=>I.presence_ref),S=x.filter(I=>b.indexOf(I.presence_ref)<0),C=y.filter(I=>v.indexOf(I.presence_ref)<0);S.length>0&&(u[h]=S),C.length>0&&(m[h]=C)}else u[h]=x}),this.syncDiff(i,{joins:u,leaves:m},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,m)=>{var h;const x=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(m),x.length>0){const y=e[u].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);e[u].unshift(...v)}n(u,x,m)}),this.map(l,(u,m)=>{let h=e[u];if(!h)return;const x=m.map(y=>y.presence_ref);h=h.filter(y=>x.indexOf(y.presence_ref)<0),e[u]=h,s(u,h,m),h.length===0&&delete e[u]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var N2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(N2||(N2={}));var ju;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ju||(ju={}));var Ri;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ri||(Ri={}));class oy{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ar.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ip(this,Bs.join,this.params,this.timeout),this.rejoinTimer=new DA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ar.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ar.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ar.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bs.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Mu(this),this.broadcastEndpointURL=BA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ar.closed){const{config:{broadcast:l,presence:u,private:m}}=this.params,h=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&s!==void 0?s:[],x=!!this.bindings[ju.PRESENCE]&&this.bindings[ju.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:h,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Ri.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Ri.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket.setAuth(),b===void 0){e==null||e(Ri.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,I=(S=C==null?void 0:C.length)!==null&&S!==void 0?S:0,R=[];for(let A=0;A<I;A++){const N=C[A],{filter:{event:O,schema:k,table:F,filter:B}}=N,P=b&&b[A];if(P&&P.event===O&&P.schema===k&&P.table===F&&P.filter===B)R.push(Object.assign(Object.assign({},N),{id:P.id}));else{this.unsubscribe(),this.state=Ar.errored,e==null||e(Ri.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Ri.SUBSCRIBED);return}}).receive("error",b=>{this.state=Ar.errored,e==null||e(Ri.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ri.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ar.joined&&e===ju.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let m=u.statusText;try{const h=await u.json();m=h.error||h.message||m}catch{}return Promise.reject(new Error(m))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,m;const h=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||m===void 0)&&m.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ar.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ip(this,Bs.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ar.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ip(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>J5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const l=e.toLocaleLowerCase(),{close:u,error:m,leave:h,join:x}=Bs;if(n&&[u,m,h,x].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var S,C,I;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((I=(C=b.filter)===null||C===void 0?void 0:C.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===l}).map(b=>b.callback(v,n)):(i=this.bindings[l])===null||i===void 0||i.filter(b=>{var S,C,I,R,A,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,k=(S=b.filter)===null||S===void 0?void 0:S.event;return O&&((C=r.ids)===null||C===void 0?void 0:C.includes(O))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const O=(A=(R=b==null?void 0:b.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return O==="*"||O===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:C,table:I,commit_timestamp:R,type:A,errors:N}=S;v=Object.assign(Object.assign({},{schema:C,table:I,commit_timestamp:R,eventType:A,new:{},old:{},errors:N}),this._getPayloadRecords(S))}b.callback(v,n)})}_isClosed(){return this.state===Ar.closed}_isJoined(){return this.state===Ar.joined}_isJoining(){return this.state===Ar.joining}_isLeaving(){return this.state===Ar.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&oy.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bs.close,{},e)}_onError(e){this._on(Bs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ar.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=S2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=S2(e.columns,e.old_record)),r}}const op=()=>{},If={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aD=[1e3,2e3,5e3,1e4],lD=1e4,cD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=H1,this.transport=null,this.heartbeatIntervalMs=If.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=op,this.ref=0,this.reconnectTimer=null,this.logger=op,this.conn=null,this.sendBuffer=[],this.serializer=new eD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Ho(async()=>{const{default:u}=await Promise.resolve().then(()=>Ja);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${$1.websocket}`,this.httpEndpoint=BA(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=q5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Q5}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ou.connecting:return xa.Connecting;case Ou.open:return xa.Open;case Ou.closing:return xa.Closing;default:return xa.Closed}}isConnected(){return this.connectionState()===xa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new oy(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,l=()=>{this.encode(e,u=>{var m;(m=this.conn)===null||m===void 0||m.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Z5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},If.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",m=i.status||"";this.log("receive",`${m} ${n} ${s} ${u}`.trim(),i),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([cD],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:K5};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Bs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new DA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},If.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,l,u,m,h,x;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:H1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:If.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:op,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:y=>aD[y-1]||lD,this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(y,v)=>v(JSON.stringify(y)),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ay extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class dD extends ay{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class G1 extends ay{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const ly=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>Ja);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},fD=()=>Pe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ho(()=>Promise.resolve().then(()=>Ja),void 0)).Response:Response}),Y1=t=>{if(Array.isArray(t))return t.map(r=>Y1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Y1(n)}),e},hD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ap=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},mD=(t,e,r)=>Pe(void 0,void 0,void 0,function*(){const n=yield fD();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,l=(s==null?void 0:s.statusCode)||i+"";e(new dD(ap(s),i,l))}).catch(s=>{e(new G1(ap(s),s))}):e(new G1(ap(t),t))}),pD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(hD(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function jd(t,e,r,n,s,i){return Pe(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(r,pD(e,n,s,i)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>l(m)).catch(m=>mD(m,u,n))})})}function ld(t,e,r,n){return Pe(this,void 0,void 0,function*(){return jd(t,"GET",e,r,n)})}function ks(t,e,r,n,s){return Pe(this,void 0,void 0,function*(){return jd(t,"POST",e,n,s,r)})}function q1(t,e,r,n,s){return Pe(this,void 0,void 0,function*(){return jd(t,"PUT",e,n,s,r)})}function gD(t,e,r,n){return Pe(this,void 0,void 0,function*(){return jd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function cy(t,e,r,n,s){return Pe(this,void 0,void 0,function*(){return jd(t,"DELETE",e,n,s,r)})}class xD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Pe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}var FA;class yD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[FA]="BlobDownloadBuilder",this.promise=null}asStream(){return new xD(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Pe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}FA=Symbol.toStringTag;const wD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},T2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vD{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=ly(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return Pe(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},T2),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const m=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),m&&i.append("metadata",this.encodeMetadata(m)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),m&&i.append("metadata",this.encodeMetadata(m))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,m&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(r),x=this._getFinalPath(h),y=yield(e=="PUT"?q1:ks)(this.fetch,`${this.url}/object/${x}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:y.Id,fullPath:y.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Pe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let m;const h=Object.assign({upsert:T2.upsert},s),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",h.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",h.cacheControl)):(m=n,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType);const y=yield q1(this.fetch,u.toString(),m,{headers:x});return{data:{path:i,fullPath:y.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Yt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return Pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ks(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new ay("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}update(e,r,n){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Pe(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Pe(this,void 0,void 0,function*(){try{return{data:{path:(yield ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Pe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ks(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Pe(this,void 0,void 0,function*(){try{const s=yield ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(e),m=()=>ld(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new yD(m,this.shouldThrowOnError)}info(e){return Pe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ld(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Y1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}exists(e){return Pe(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield gD(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n)&&n instanceof G1){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});m!==""&&s.push(m);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${h}`)}}}remove(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield cy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}list(e,r,n){return Pe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},wD),r),{prefix:e||""});return{data:yield ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}listV2(e,r){return Pe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ks(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const UA="2.78.0",zA={"X-Client-Info":`storage-js/${UA}`};class bD{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zA),r),this.fetch=ly(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Pe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield ld(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}getBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}createBucket(e){return Pe(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Pe(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield cy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class _D{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zA),r),this.fetch=ly(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listBuckets(e){return Pe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ld(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield cy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}}const uy={"X-Client-Info":`storage-js/${UA}`,"Content-Type":"application/json"};class VA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Un(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class lp extends VA{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class CD extends VA{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var I2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(I2||(I2={}));const dy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>Ja);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ED=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},R2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SD=(t,e,r)=>Pe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new lp(R2(l),s,u))}).catch(()=>{const l=s+"",u=i.statusText||`HTTP ${s} error`;e(new lp(u,s,l))});else{const l=s+"",u=i.statusText||`HTTP ${s} error`;e(new lp(u,s,l))}}else e(new CD(R2(t),t))}),AD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(ED(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function ND(t,e,r,n,s,i){return Pe(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(r,AD(e,n,s,i)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const h=m.headers.get("content-type");return!h||!h.includes("application/json")?{}:m.json()}).then(m=>l(m)).catch(m=>SD(m,u,n))})})}function zn(t,e,r,n,s){return Pe(this,void 0,void 0,function*(){return ND(t,"POST",e,n,s,r)})}class TD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uy),r),this.fetch=dy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Pe(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Pe(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}})}listIndexes(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Pe(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}})}}class ID{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uy),r),this.fetch=dy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Pe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getVectors(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}listVectors(e){return Pe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield zn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}queryVectors(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Pe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}}class RD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uy),r),this.fetch=dy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}listBuckets(){return Pe(this,arguments,void 0,function*(e={}){try{return{data:yield zn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Pe(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}}class OD extends RD{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new MD(this.url,this.headers,e,this.fetch)}}class MD extends TD{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Pe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Pe(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Pe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Pe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new jD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class jD extends ID{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Pe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Pe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Pe(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Pe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Pe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class kD extends bD{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new vD(this.url,this.headers,e,this.fetch)}get vectors(){return new OD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _D(this.url+"/iceberg",this.headers,this.fetch)}}const PD="2.78.0";let gu="";typeof Deno<"u"?gu="deno":typeof document<"u"?gu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gu="react-native":gu="node";const DD={"X-Client-Info":`supabase-js-${gu}/${PD}`},LD={headers:DD},BD={schema:"public"},FD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UD={},zD=t=>{let e;return t?e=t:typeof fetch>"u"?e=xA:e=fetch,(...r)=>e(...r)},VD=()=>typeof Headers>"u"?yA:Headers,HD=(t,e,r)=>{const n=zD(r),s=VD();return async(i,l)=>{var u;const m=(u=await e())!==null&&u!==void 0?u:t;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${m}`),n(i,Object.assign(Object.assign({},l),{headers:h}))}};function $D(t){return t.endsWith("/")?t:t+"/"}function WD(t,e){var r,n;const{db:s,auth:i,realtime:l,global:u}=t,{db:m,auth:h,realtime:x,global:y}=e,v={db:Object.assign(Object.assign({},m),s),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},x),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),u),{headers:Object.assign(Object.assign({},(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function GD(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($D(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const HA="2.78.0",El=30*1e3,X1=3,cp=X1*El,YD="http://localhost:9999",qD="supabase.auth.token",XD={"X-Client-Info":`gotrue-js/${HA}`},K1="X-Supabase-Api-Version",$A={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=10*60*1e3;class cd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ZD extends cd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function JD(t){return Ue(t)&&t.name==="AuthApiError"}class ya extends cd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Zo extends cd{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Is extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eL(t){return Ue(t)&&t.name==="AuthSessionMissingError"}class ml extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rf extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Of extends Zo{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tL(t){return Ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class O2 extends Zo{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q1 extends Zo{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function up(t){return Ue(t)&&t.name==="AuthRetryableFetchError"}class M2 extends Zo{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Z1 extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),j2=` 	
\r=`.split(""),rL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<j2.length;e+=1)t[j2[e].charCodeAt(0)]=-2;for(let e=0;e<Fh.length;e+=1)t[Fh[e].charCodeAt(0)]=e;return t})();function k2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Fh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Fh[n]),e.queuedBits-=6}}function WA(t,e,r){const n=rL[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function P2(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{iL(l,n,r)};for(let l=0;l<t.length;l+=1)WA(t.charCodeAt(l),s,i);return e.join("")}function nL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sL(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}nL(n,e)}}function iL(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Kl(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)WA(t.charCodeAt(s),r,n);return new Uint8Array(e)}function oL(t){const e=[];return sL(t,r=>e.push(r)),new Uint8Array(e)}function _a(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>k2(s,r,n)),k2(null,r,n),e.join("")}function aL(t){return Math.round(Date.now()/1e3)+t}function lL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const sn=()=>typeof window<"u"&&typeof document<"u",ca={tested:!1,writable:!1},GA=()=>{if(!sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ca.tested)return ca.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ca.tested=!0,ca.writable=!0}catch{ca.tested=!0,ca.writable=!1}return ca.writable};function cL(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const YA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>Ja);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},uL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Sl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ua=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},io=async(t,e)=>{await t.removeItem(e)};class F0{constructor(){this.promise=new F0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}F0.promiseConstructor=Promise;function dp(t){const e=t.split(".");if(e.length!==3)throw new Z1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!KD.test(e[n]))throw new Z1("JWT not in base64url format");return{header:JSON.parse(P2(e[0])),payload:JSON.parse(P2(e[1])),signature:Kl(e[2]),raw:{header:e[0],payload:e[1]}}}async function dL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fL(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){n(l);return}}catch(l){if(!e(i,l)){s(l);return}}})()})}function hL(t){return("0"+t.toString(16)).substr(-2)}function mL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,hL).join("")}async function pL(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await pL(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pl(t,e,r=!1){const n=mL();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Sl(t,`${e}-code-verifier`,s);const i=await gL(n);return[i,n===i?"plain":"s256"]}const xL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yL(t){const e=t.headers.get(K1);if(!e||!e.match(xL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function wL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gl(t){if(!bL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _L(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function D2(t){return JSON.parse(JSON.stringify(t))}const pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CL=[502,503,504];async function L2(t){var e;if(!uL(t))throw new Q1(pa(t),0);if(CL.includes(t.status))throw new Q1(pa(t),t.status);let r;try{r=await t.json()}catch(i){throw new ya(pa(i),i)}let n;const s=yL(t);if(s&&s.getTime()>=$A["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new M2(pa(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Is}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new M2(pa(r),t.status,r.weak_password.reasons);throw new ZD(pa(r),t.status||500,n)}const EL=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function qe(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[K1]||(i[K1]=$A["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",m=await SL(t,e,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}}async function SL(t,e,r,n,s,i){const l=EL(e,n,s,i);let u;try{u=await t(r,Object.assign({},l))}catch(m){throw console.error(m),new Q1(pa(m),0)}if(u.ok||await L2(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(m){await L2(m)}}function Rs(t){var e;let r=null;TL(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=aL(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function B2(t){const e=Rs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function mo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function AL(t){return{data:t,error:null}}function NL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,l=Qo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},m=Object.assign({},l);return{data:{properties:u,user:m},error:null}}function F2(t){return t}function TL(t){return t.access_token&&t.refresh_token&&t.expires_in}const hp=["global","local","others"];class IL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=YA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=hp[0]){if(hp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hp.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:mo})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Qo(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mo})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,l,u,m;try{const h={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:F2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(m=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(S.split(";")[1].split("=")[1]);h[`${I}Page`]=C}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(Ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){gl(e);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mo})}catch(r){if(Ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){gl(e);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:mo})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){gl(e);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:mo})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){gl(e.userId);try{const{data:r,error:n}=await qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _deleteFactor(e){gl(e.userId),gl(e.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,l,u,m;try{const h={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:F2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(m=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(S.split(";")[1].split("=")[1]);h[`${I}Page`]=C}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(Ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}}function U2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const xl={debug:!!(globalThis&&GA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class RL extends qA{}async function OL(t,e,r){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),xl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new RL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function ML(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function XA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function jL(t){return parseInt(t,16)}function kL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function PL(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:m,resources:h,scheme:x,uri:y,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=XA(t.address),S=x?`${x}://${n}`:n,C=t.statement?`${t.statement}
`:"",I=`${S} wants you to sign in with your Ethereum account:
${b}

${C}`;let R=`URI: ${y}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(R+=`
Expiration Time: ${s.toISOString()}`),u&&(R+=`
Not Before: ${u.toISOString()}`),m&&(R+=`
Request ID: ${m}`),h){let A=`
Resources:`;for(const N of h){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);A+=`
- ${N}`}R+=A}return`${I}
${R}`}class xr extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Uh extends xr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function DL({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new xr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new xr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new xr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new xr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new xr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new xr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new xr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(KA(l)){if(i.rp.id!==l)return new xr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new xr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function LL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new xr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(KA(n)){if(r.rpId!==n)return new xr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class BL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const FL=new BL;function UL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Qo(t,["challenge","user","excludeCredentials"]),i=Kl(e).buffer,l=Object.assign(Object.assign({},r),{id:Kl(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const h=n[m];u.excludeCredentials[m]=Object.assign(Object.assign({},h),{id:Kl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function zL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Qo(t,["challenge","allowCredentials"]),s=Kl(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Kl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function VL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:_a(new Uint8Array(t.response.attestationObject)),clientDataJSON:_a(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function HL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:_a(new Uint8Array(s.authenticatorData)),clientDataJSON:_a(new Uint8Array(s.clientDataJSON)),signature:_a(new Uint8Array(s.signature)),userHandle:s.userHandle?_a(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function KA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function z2(){var t,e;return!!(sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $L(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uh("Browser returned unexpected credential type",e)}:{data:null,error:new Uh("Empty credential response",e)}}catch(e){return{data:null,error:DL({error:e,options:t})}}}async function WL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uh("Browser returned unexpected credential type",e)}:{data:null,error:new Uh("Empty credential response",e)}}catch(e){return{data:null,error:LL({error:e,options:t})}}}const GL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},YL={userVerification:"preferred",hints:["security-key"]};function zh(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(e(l)){const u=n[i];e(u)?n[i]=zh(u,l):n[i]=zh(l)}else n[i]=l}return n}function qL(t,e){return zh(GL,t,e||{})}function XL(t,e){return zh(YL,t,e||{})}class KL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:u};const m=s??FL.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${n}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=qL(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:x,error:y}=await $L({publicKey:h,signal:m});return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}case"request":{const h=XL(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:x,error:y}=await WL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:m}));return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}}}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new cd("rpId is required for WebAuthn authentication")};try{if(!z2())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:m}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:n,credential_response:m.credential_response}})}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new cd("rpId is required for WebAuthn registration")};try{if(!z2())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(x=>{var y;return(y=x.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:m,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return m?this._verify({factorId:l.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:n,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ue(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in register",l)}}}}ML();const QL={url:YD,storageKey:qD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function V2(t,e,r){return await r()}const yl={};class ud{get jwks(){var e,r;return(r=(e=yl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){yl[this.storageKey]=Object.assign(Object.assign({},yl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=yl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yl[this.storageKey]=Object.assign(Object.assign({},yl[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ud.nextInstanceID,ud.nextInstanceID+=1,this.instanceID>0&&sn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},QL),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new IL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=YA(s.fetch),this.lock=s.lock||V2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:sn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=OL:this.lock=V2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new KL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:GA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=U2(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=U2(this.memoryStorage)),sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${HA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=cL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),sn()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tL(i)){const m=(e=i.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ue(r)?{error:r}:{error:new ya("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rs}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const m=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:x,password:y,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await pl(this.storage,this.storageKey)),i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:x,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:S},xform:Rs})}else if("phone"in e){const{phone:x,password:y,options:v}=e;i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Rs})}else throw new Rf("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const m=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:l,options:u}=e;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:B2})}else if("phone"in e){const{phone:i,password:l,options:u}=e;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:B2})}else throw new Rf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ml}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,l,u,m,h,x,y,v;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:C,wallet:I,statement:R,options:A}=e;let N;if(sn())if(typeof I=="object")N=I;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")N=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=I}const O=new URL((r=A==null?void 0:A.url)!==null&&r!==void 0?r:window.location.href),k=await N.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=XA(k[0]);let B=(n=A==null?void 0:A.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const j=await N.request({method:"eth_chainId"});B=jL(j)}const P={domain:O.host,address:F,statement:R,uri:O.href,version:"1",chainId:B,nonce:(s=A==null?void 0:A.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=A==null?void 0:A.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=A==null?void 0:A.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(m=A==null?void 0:A.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(h=A==null?void 0:A.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(x=A==null?void 0:A.signInWithEthereum)===null||x===void 0?void 0:x.resources};b=PL(P),S=await N.request({method:"personal_sign",params:[kL(b),F]})}try{const{data:C,error:I}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Rs});if(I)throw I;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new ml}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:I})}catch(C){if(Ue(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var r,n,s,i,l,u,m,h,x,y,v,b;let S,C;if("message"in e)S=e.message,C=e.signature;else{const{chain:I,wallet:R,statement:A,options:N}=e;let O;if(sn())if(typeof R=="object")O=R;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))O=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=R}const k=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const F=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),A?{statement:A}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)S=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),C=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${k.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((y=(x=N==null?void 0:N.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...N.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await O.signMessage(new TextEncoder().encode(S),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=F}}try{const{data:I,error:R}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:_a(C)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Rs});if(R)throw R;return!I||!I.session||!I.user?{data:{user:null,session:null},error:new ml}:(I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),{data:Object.assign({},I),error:R})}catch(I){if(Ue(I))return{data:{user:null,session:null},error:I};throw I}}async _exchangeCodeForSession(e){const r=await ua(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Rs});if(await io(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ml}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(Ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=e,u=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rs}),{data:m,error:h}=u;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new ml}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:h})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,l;try{if("email"in e){const{email:u,options:m}=e;let h=null,x=null;this.flowType==="pkce"&&([h,x]=await pl(this.storage,this.storageKey));const{error:y}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:u,options:m}=e,{data:h,error:x}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(l=m==null?void 0:m.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x}}throw new Rf("You must provide either an email or phone number.")}catch(u){if(Ue(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Rs});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const m=l.session,h=l.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:h,session:m},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await pl(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:AL})}catch(i){if(Ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Is;const{error:s}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:l}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:l,error:u}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Rf("You must provide either an email or phone number and a type")}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<cp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await ua(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=fp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=_L(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mo}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:mo})})}catch(r){if(Ue(r))return eL(r)&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Is;const l=s.session;let u=null,m=null;this.flowType==="pkce"&&e.email!=null&&([u,m]=await pl(this.storage,this.storageKey));const{data:h,error:x}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:m}),jwt:l.access_token,xform:mo});if(x)throw x;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Is;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=dp(e.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:m}=await this._getUser(e.access_token);if(m)throw m;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Ue(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:u}=r;if(u)throw u;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Is;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!sn())throw new Of("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Of(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new O2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Of("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new O2("No code detected.");const{data:A,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:m,token_type:h}=e;if(!i||!u||!l||!h)throw new Of("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(u);let v=x+y;m&&(v=parseInt(m));const b=v-x;b*1e3<=El&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const S=v-y;x-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,x):x-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,x);const{data:C,error:I}=await this._getUser(i);if(I)throw I;const R={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:v,refresh_token:l,token_type:h,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(n){if(Ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(JD(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=lL(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await pl(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,m,h,x;const{data:y,error:v}=i;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(h=y.session)===null||h===void 0?void 0:h.access_token)!==null&&x!==void 0?x:void 0})});if(s)throw s;return sn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ue(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:m,access_token:h,nonce:x}=e,y=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:m,access_token:h,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Rs}),{data:v,error:b}=y;return b?{data:{user:null,session:null},error:b}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new ml}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:b})}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await fL(async s=>(s>0&&await dL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rs})),(s,i)=>{const l=200*Math.pow(2,s);return i&&up(i)&&Date.now()+l-n<El})}catch(n){if(this._debug(r,"error",n),Ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),sn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ua(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ua(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Sl(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:fp()}else if(s&&!s.user&&!s.user){const l=await ua(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await io(this.storage,this.storageKey+"-user"),await Sl(this.storage,this.storageKey,s)):s.user=fp()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<cp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${cp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),up(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new F0;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Is;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),Ue(i)){const l={data:null,error:i};return up(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,r)}catch(m){i.push(m)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Sl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=D2(s);await Sl(this.storage,this.storageKey,i)}else{const s=D2(r);await Sl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await io(this.storage,this.storageKey),await io(this.storage,this.storageKey+"-code-verifier"),await io(this.storage,this.storageKey+"-user"),this.userStorage&&await io(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),El);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/El);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${El}ms, refresh threshold is ${X1} ticks`),s<=X1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await pl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:h}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&m.type==="totp"&&(!((s=m==null?void 0:m.totp)===null||s===void 0)&&s.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?VL(e.webauthn.credential_response):HL(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:m}=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:m})})}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:UL(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:zL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=dp(n.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new Is}})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return{data:null,error:i};if(!s)return{data:null,error:new Is};const l=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&sn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return{data:null,error:i};if(!s)return{data:null,error:new Is};const l=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&sn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(u=>u.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+QD>s)return n;const{data:i,error:l}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};n=b.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:m}}=dp(n);r!=null&&r.allowExpired||wL(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:i,header:s,signature:l},error:null}}const x=vL(s.alg),y=await crypto.subtle.importKey("jwk",h,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,l,oL(`${u}.${m}`)))throw new Z1("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}ud.nextInstanceID=0;const ZL=ud;class JL extends ZL{constructor(e){super(e)}}class e7{constructor(e,r,n){var s,i,l;this.supabaseUrl=e,this.supabaseKey=r;const u=GD(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const m=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:BD,realtime:UD,auth:Object.assign(Object.assign({},FD),{storageKey:m}),global:LD},x=WD(n??{},h);this.storageKey=(s=x.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=x.global.headers)!==null&&i!==void 0?i:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,x.global.fetch),this.fetch=HD(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new Y5(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new kD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new F5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:m,debug:h},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JL({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:m,debug:h,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new uD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const t7=(t,e,r)=>new e7(t,e,r);function r7(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}r7()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n7="https://mtwburwdescvdngmzcmu.supabase.co",s7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10d2J1cndkZXNjdmRuZ216Y211Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM2MzMsImV4cCI6MjA3NzY4OTYzM30.9Ez2Dg9DdMaqNJy960B5V4U8H8uvz5RS5KyVsSHIZ2c",ue=t7(n7,s7,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),H2=Object.freeze(Object.defineProperty({__proto__:null,supabase:ue},Symbol.toStringTag,{value:"Module"})),QA=E.createContext(void 0),i7=({children:t})=>{const[e,r]=E.useState(null),[n,s]=E.useState(null),[i,l]=E.useState(null),[u,m]=E.useState(!0);E.useEffect(()=>{const{data:{subscription:b}}=ue.auth.onAuthStateChange((S,C)=>{s(C),r((C==null?void 0:C.user)??null),C!=null&&C.user?setTimeout(()=>{h(C.user.id)},0):l(null)});return ue.auth.getSession().then(({data:{session:S}})=>{s(S),r((S==null?void 0:S.user)??null),S!=null&&S.user?h(S.user.id).then(()=>m(!1)):m(!1)}),()=>b.unsubscribe()},[]);const h=async b=>{const{data:S,error:C}=await ue.from("user_roles").select("role").eq("user_id",b).single();l(!C&&S?S.role:"customer")},x=async(b,S,C,I)=>{const R=`${window.location.origin}/home`,{error:A}=await ue.auth.signUp({email:b,password:S,options:{emailRedirectTo:R,data:{full_name:C,phone:I}}});return{error:A}},y=async(b,S)=>{const{error:C}=await ue.auth.signInWithPassword({email:b,password:S});return{error:C}},v=async()=>{await ue.auth.signOut()};return d.jsx(QA.Provider,{value:{user:e,session:n,userRole:i,signUp:x,signIn:y,signOut:v,loading:u},children:t})},gn=()=>{const t=E.useContext(QA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},o7=S0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),De=E.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const l=n?J8:"button";return d.jsx(l,{className:Te(o7({variant:e,size:r,className:t})),ref:i,...s})});De.displayName="Button";function Oi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Kn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bc={duration:.5,overwrite:!1,delay:0},fy,Hr,Wt,hs=1e8,Ot=1/hs,J1=Math.PI*2,a7=J1/4,l7=0,JA=Math.sqrt,c7=Math.cos,u7=Math.sin,kr=function(e){return typeof e=="string"},dr=function(e){return typeof e=="function"},Yi=function(e){return typeof e=="number"},hy=function(e){return typeof e>"u"},vi=function(e){return typeof e=="object"},In=function(e){return e!==!1},my=function(){return typeof window<"u"},Mf=function(e){return dr(e)||kr(e)},eN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Jr=Array.isArray,eg=/(?:-?\.?\d|\.)+/gi,tN=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Bl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,mp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,rN=/[+-]=-?[.\d]+/,nN=/[^,'"\[\]\s]+/gi,d7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xt,oi,tg,py,Zn={},Vh={},sN,iN=function(e){return(Vh=_c(e,Zn))&&jn},gy=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},dd=function(e,r){return!r&&console.warn(e)},oN=function(e,r){return e&&(Zn[e]=r)&&Vh&&(Vh[e]=r)||Zn},fd=function(){return 0},f7={suppressEvents:!0,isStart:!0,kill:!1},Jf={suppressEvents:!0,kill:!1},h7={suppressEvents:!0},xy={},Do=[],rg={},aN,Bn={},pp={},$2=30,eh=[],yy="",wy=function(e){var r=e[0],n,s;if(vi(r)||dr(r)||(e=[e]),!(n=(r._gsap||{}).harness)){for(s=eh.length;s--&&!eh[s].targetTest(r););n=eh[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new ON(e[s],n)))||e.splice(s,1);return e},Ma=function(e){return e._gsap||wy(ms(e))[0]._gsap},lN=function(e,r,n){return(n=e[r])&&dr(n)?e[r]():hy(n)&&e.getAttribute&&e.getAttribute(r)||n},Rn=function(e,r){return(e=e.split(",")).forEach(r)||e},hr=function(e){return Math.round(e*1e5)/1e5||0},wr=function(e){return Math.round(e*1e7)/1e7||0},Ql=function(e,r){var n=r.charAt(0),s=parseFloat(r.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},m7=function(e,r){for(var n=r.length,s=0;e.indexOf(r[s])<0&&++s<n;);return s<n},Hh=function(){var e=Do.length,r=Do.slice(0),n,s;for(rg={},Do.length=0,n=0;n<e;n++)s=r[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},vy=function(e){return!!(e._initted||e._startAt||e.add)},cN=function(e,r,n,s){Do.length&&!Hr&&Hh(),e.render(r,n,!!(Hr&&r<0&&vy(e))),Do.length&&!Hr&&Hh()},uN=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(nN).length<2?r:kr(e)?e.trim():e},dN=function(e){return e},Jn=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e},p7=function(e){return function(r,n){for(var s in n)s in r||s==="duration"&&e||s==="ease"||(r[s]=n[s])}},_c=function(e,r){for(var n in r)e[n]=r[n];return e},W2=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=vi(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},$h=function(e,r){var n={},s;for(s in e)s in r||(n[s]=e[s]);return n},ku=function(e){var r=e.parent||Xt,n=e.keyframes?p7(Jr(e.keyframes)):Jn;if(In(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},g7=function(e,r){for(var n=e.length,s=n===r.length;s&&n--&&e[n]===r[n];);return n<0},fN=function(e,r,n,s,i){var l=e[s],u;if(i)for(u=r[i];l&&l[i]>u;)l=l._prev;return l?(r._next=l._next,l._next=r):(r._next=e[n],e[n]=r),r._next?r._next._prev=r:e[s]=r,r._prev=l,r.parent=r._dp=e,r},U0=function(e,r,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var i=r._prev,l=r._next;i?i._next=l:e[n]===r&&(e[n]=l),l?l._prev=i:e[s]===r&&(e[s]=i),r._next=r._prev=r.parent=null},$o=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ja=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},x7=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},ng=function(e,r,n,s){return e._startAt&&(Hr?e._startAt.revert(Jf):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(r,!0,s))},y7=function t(e){return!e||e._ts&&t(e.parent)},G2=function(e){return e._repeat?Cc(e._tTime,e=e.duration()+e._rDelay)*e:0},Cc=function(e,r){var n=Math.floor(e=wr(e/r));return e&&n===e?n-1:n},Wh=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},z0=function(e){return e._end=wr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ot)||0))},V0=function(e,r){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=wr(n._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),z0(e),n._dirty||ja(n,e)),e},hN=function(e,r){var n;if((r._time||!r._dur&&r._initted||r._start<e._time&&(r._dur||!r.add))&&(n=Wh(e.rawTime(),r),(!r._dur||kd(0,r.totalDuration(),n)-r._tTime>Ot)&&r.render(n,!0)),ja(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Ot}},di=function(e,r,n,s){return r.parent&&$o(r),r._start=wr((Yi(n)?n:n||e!==Xt?as(e,n,r):e._time)+r._delay),r._end=wr(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),fN(e,r,"_first","_last",e._sort?"_start":0),sg(r)||(e._recent=r),s||hN(e,r),e._ts<0&&V0(e,e._tTime),e},mN=function(e,r){return(Zn.ScrollTrigger||gy("scrollTrigger",r))&&Zn.ScrollTrigger.create(r,e)},pN=function(e,r,n,s,i){if(_y(e,r,i),!e._initted)return 1;if(!n&&e._pt&&!Hr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&aN!==Vn.frame)return Do.push(e),e._lazy=[i,s],1},w7=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},sg=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},v7=function(e,r,n,s){var i=e.ratio,l=r<0||!r&&(!e._start&&w7(e)&&!(!e._initted&&sg(e))||(e._ts<0||e._dp._ts<0)&&!sg(e))?0:1,u=e._rDelay,m=0,h,x,y;if(u&&e._repeat&&(m=kd(0,e._tDur,r),x=Cc(m,u),e._yoyo&&x&1&&(l=1-l),x!==Cc(e._tTime,u)&&(i=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==i||Hr||s||e._zTime===Ot||!r&&e._zTime){if(!e._initted&&pN(e,r,s,n,m))return;for(y=e._zTime,e._zTime=r||(n?Ot:0),n||(n=r&&!y),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=m,h=e._pt;h;)h.r(l,h.d),h=h._next;r<0&&ng(e,r,n,!0),e._onUpdate&&!n&&Wn(e,"onUpdate"),m&&e._repeat&&!n&&e.parent&&Wn(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===l&&(l&&$o(e,1),!n&&!Hr&&(Wn(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},b7=function(e,r,n){var s;if(n>r)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>r)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<r)return s;s=s._prev}},Ec=function(e,r,n,s){var i=e._repeat,l=wr(r)||0,u=e._tTime/e._tDur;return u&&!s&&(e._time*=l/e._dur),e._dur=l,e._tDur=i?i<0?1e10:wr(l*(i+1)+e._rDelay*i):l,u>0&&!s&&V0(e,e._tTime=e._tDur*u),e.parent&&z0(e),n||ja(e.parent,e),e},Y2=function(e){return e instanceof un?ja(e):Ec(e,e._dur)},_7={_start:0,endTime:fd,totalDuration:fd},as=function t(e,r,n){var s=e.labels,i=e._recent||_7,l=e.duration()>=hs?i.endTime(!1):e._dur,u,m,h;return kr(r)&&(isNaN(r)||r in s)?(m=r.charAt(0),h=r.substr(-1)==="%",u=r.indexOf("="),m==="<"||m===">"?(u>=0&&(r=r.replace(/=/,"")),(m==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(r.substr(1))||0)*(h?(u<0?i:n).totalDuration()/100:1)):u<0?(r in s||(s[r]=l),s[r]):(m=parseFloat(r.charAt(u-1)+r.substr(u+1)),h&&n&&(m=m/100*(Jr(n)?n[0]:n).totalDuration()),u>1?t(e,r.substr(0,u-1),n)+m:l+m)):r==null?l:+r},Pu=function(e,r,n){var s=Yi(r[1]),i=(s?2:1)+(e<2?0:1),l=r[i],u,m;if(s&&(l.duration=r[1]),l.parent=n,e){for(u=l,m=n;m&&!("immediateRender"in u);)u=m.vars.defaults||{},m=In(m.vars.inherit)&&m.parent;l.immediateRender=In(u.immediateRender),e<2?l.runBackwards=1:l.startAt=r[i-1]}return new yr(r[0],l,r[i+1])},Jo=function(e,r){return e||e===0?r(e):r},kd=function(e,r,n){return n<e?e:n>r?r:n},Zr=function(e,r){return!kr(e)||!(r=d7.exec(e))?"":r[1]},C7=function(e,r,n){return Jo(n,function(s){return kd(e,r,s)})},ig=[].slice,gN=function(e,r){return e&&vi(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&vi(e[0]))&&!e.nodeType&&e!==oi},E7=function(e,r,n){return n===void 0&&(n=[]),e.forEach(function(s){var i;return kr(s)&&!r||gN(s,1)?(i=n).push.apply(i,ms(s)):n.push(s)})||n},ms=function(e,r,n){return Wt&&!r&&Wt.selector?Wt.selector(e):kr(e)&&!n&&(tg||!Sc())?ig.call((r||py).querySelectorAll(e),0):Jr(e)?E7(e,n):gN(e)?ig.call(e,0):e?[e]:[]},og=function(e){return e=ms(e)[0]||dd("Invalid scope")||{},function(r){var n=e.current||e.nativeElement||e;return ms(r,n.querySelectorAll?n:n===e?dd("Invalid scope")||py.createElement("div"):e)}},xN=function(e){return e.sort(function(){return .5-Math.random()})},yN=function(e){if(dr(e))return e;var r=vi(e)?e:{each:e},n=ka(r.ease),s=r.from||0,i=parseFloat(r.base)||0,l={},u=s>0&&s<1,m=isNaN(s)||u,h=r.axis,x=s,y=s;return kr(s)?x=y={center:.5,edges:.5,end:1}[s]||0:!u&&m&&(x=s[0],y=s[1]),function(v,b,S){var C=(S||r).length,I=l[C],R,A,N,O,k,F,B,P,j;if(!I){if(j=r.grid==="auto"?0:(r.grid||[1,hs])[1],!j){for(B=-hs;B<(B=S[j++].getBoundingClientRect().left)&&j<C;);j<C&&j--}for(I=l[C]=[],R=m?Math.min(j,C)*x-.5:s%j,A=j===hs?0:m?C*y/j-.5:s/j|0,B=0,P=hs,F=0;F<C;F++)N=F%j-R,O=A-(F/j|0),I[F]=k=h?Math.abs(h==="y"?O:N):JA(N*N+O*O),k>B&&(B=k),k<P&&(P=k);s==="random"&&xN(I),I.max=B-P,I.min=P,I.v=C=(parseFloat(r.amount)||parseFloat(r.each)*(j>C?C-1:h?h==="y"?C/j:j:Math.max(j,C/j))||0)*(s==="edges"?-1:1),I.b=C<0?i-C:i,I.u=Zr(r.amount||r.each)||0,n=n&&C<0?TN(n):n}return C=(I[v]-I.min)/I.max||0,wr(I.b+(n?n(C):C)*I.v)+I.u}},ag=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=wr(Math.round(parseFloat(n)/e)*e*r);return(s-s%1)/r+(Yi(n)?0:Zr(n))}},wN=function(e,r){var n=Jr(e),s,i;return!n&&vi(e)&&(s=n=e.radius||hs,e.values?(e=ms(e.values),(i=!Yi(e[0]))&&(s*=s)):e=ag(e.increment)),Jo(r,n?dr(e)?function(l){return i=e(l),Math.abs(i-l)<=s?i:l}:function(l){for(var u=parseFloat(i?l.x:l),m=parseFloat(i?l.y:0),h=hs,x=0,y=e.length,v,b;y--;)i?(v=e[y].x-u,b=e[y].y-m,v=v*v+b*b):v=Math.abs(e[y]-u),v<h&&(h=v,x=y);return x=!s||h<=s?e[x]:l,i||x===l||Yi(l)?x:x+Zr(l)}:ag(e))},vN=function(e,r,n,s){return Jo(Jr(e)?!r:n===!0?!!(n=0):!s,function(){return Jr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(r-e+n*.99))/n)*n*s)/s})},S7=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(s){return r.reduce(function(i,l){return l(i)},s)}},A7=function(e,r){return function(n){return e(parseFloat(n))+(r||Zr(n))}},N7=function(e,r,n){return _N(e,r,0,1,n)},bN=function(e,r,n){return Jo(n,function(s){return e[~~r(s)]})},T7=function t(e,r,n){var s=r-e;return Jr(e)?bN(e,t(0,e.length),r):Jo(n,function(i){return(s+(i-e)%s)%s+e})},I7=function t(e,r,n){var s=r-e,i=s*2;return Jr(e)?bN(e,t(0,e.length-1),r):Jo(n,function(l){return l=(i+(l-e)%i)%i||0,e+(l>s?i-l:l)})},hd=function(e){for(var r=0,n="",s,i,l,u;~(s=e.indexOf("random(",r));)l=e.indexOf(")",s),u=e.charAt(s+7)==="[",i=e.substr(s+7,l-s-7).match(u?nN:eg),n+=e.substr(r,s-r)+vN(u?i:+i[0],u?0:+i[1],+i[2]||1e-5),r=l+1;return n+e.substr(r,e.length-r)},_N=function(e,r,n,s,i){var l=r-e,u=s-n;return Jo(i,function(m){return n+((m-e)/l*u||0)})},R7=function t(e,r,n,s){var i=isNaN(e+r)?0:function(b){return(1-b)*e+b*r};if(!i){var l=kr(e),u={},m,h,x,y,v;if(n===!0&&(s=1)&&(n=null),l)e={p:e},r={p:r};else if(Jr(e)&&!Jr(r)){for(x=[],y=e.length,v=y-2,h=1;h<y;h++)x.push(t(e[h-1],e[h]));y--,i=function(S){S*=y;var C=Math.min(v,~~S);return x[C](S-C)},n=r}else s||(e=_c(Jr(e)?[]:{},e));if(!x){for(m in r)by.call(u,e,m,"get",r[m]);i=function(S){return Sy(S,u)||(l?e.p:e)}}}return Jo(n,i)},q2=function(e,r,n){var s=e.labels,i=hs,l,u,m;for(l in s)u=s[l]-r,u<0==!!n&&u&&i>(u=Math.abs(u))&&(m=l,i=u);return m},Wn=function(e,r,n){var s=e.vars,i=s[r],l=Wt,u=e._ctx,m,h,x;if(i)return m=s[r+"Params"],h=s.callbackScope||e,n&&Do.length&&Hh(),u&&(Wt=u),x=m?i.apply(h,m):i.call(h),Wt=l,x},xu=function(e){return $o(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Hr),e.progress()<1&&Wn(e,"onInterrupt"),e},Fl,CN=[],EN=function(e){if(e)if(e=!e.name&&e.default||e,my()||e.headless){var r=e.name,n=dr(e),s=r&&!n&&e.init?function(){this._props=[]}:e,i={init:fd,render:Sy,add:by,kill:G7,modifier:W7,rawVars:0},l={targetTest:0,get:0,getSetter:Ey,aliases:{},register:0};if(Sc(),e!==s){if(Bn[r])return;Jn(s,Jn($h(e,i),l)),_c(s.prototype,_c(i,$h(e,l))),Bn[s.prop=r]=s,e.targetTest&&(eh.push(s),xy[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}oN(r,s),e.register&&e.register(jn,s,On)}else CN.push(e)},Rt=255,yu={aqua:[0,Rt,Rt],lime:[0,Rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rt],navy:[0,0,128],white:[Rt,Rt,Rt],olive:[128,128,0],yellow:[Rt,Rt,0],orange:[Rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rt,0,0],pink:[Rt,192,203],cyan:[0,Rt,Rt],transparent:[Rt,Rt,Rt,0]},gp=function(e,r,n){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(n-r)*e*6:e<.5?n:e*3<2?r+(n-r)*(2/3-e)*6:r)*Rt+.5|0},SN=function(e,r,n){var s=e?Yi(e)?[e>>16,e>>8&Rt,e&Rt]:0:yu.black,i,l,u,m,h,x,y,v,b,S;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),yu[e])s=yu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),l=e.charAt(2),u=e.charAt(3),e="#"+i+i+l+l+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Rt,s&Rt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Rt,e&Rt]}else if(e.substr(0,3)==="hsl"){if(s=S=e.match(eg),!r)m=+s[0]%360/360,h=+s[1]/100,x=+s[2]/100,l=x<=.5?x*(h+1):x+h-x*h,i=x*2-l,s.length>3&&(s[3]*=1),s[0]=gp(m+1/3,i,l),s[1]=gp(m,i,l),s[2]=gp(m-1/3,i,l);else if(~e.indexOf("="))return s=e.match(tN),n&&s.length<4&&(s[3]=1),s}else s=e.match(eg)||yu.transparent;s=s.map(Number)}return r&&!S&&(i=s[0]/Rt,l=s[1]/Rt,u=s[2]/Rt,y=Math.max(i,l,u),v=Math.min(i,l,u),x=(y+v)/2,y===v?m=h=0:(b=y-v,h=x>.5?b/(2-y-v):b/(y+v),m=y===i?(l-u)/b+(l<u?6:0):y===l?(u-i)/b+2:(i-l)/b+4,m*=60),s[0]=~~(m+.5),s[1]=~~(h*100+.5),s[2]=~~(x*100+.5)),n&&s.length<4&&(s[3]=1),s},AN=function(e){var r=[],n=[],s=-1;return e.split(Lo).forEach(function(i){var l=i.match(Bl)||[];r.push.apply(r,l),n.push(s+=l.length+1)}),r.c=n,r},X2=function(e,r,n){var s="",i=(e+s).match(Lo),l=r?"hsla(":"rgba(",u=0,m,h,x,y;if(!i)return e;if(i=i.map(function(v){return(v=SN(v,r,1))&&l+(r?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(x=AN(e),m=n.c,m.join(s)!==x.c.join(s)))for(h=e.replace(Lo,"1").split(Bl),y=h.length-1;u<y;u++)s+=h[u]+(~m.indexOf(u)?i.shift()||l+"0,0,0,0)":(x.length?x:i.length?i:n).shift());if(!h)for(h=e.split(Lo),y=h.length-1;u<y;u++)s+=h[u]+i[u];return s+h[y]},Lo=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in yu)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),O7=/hsl[a]?\(/,NN=function(e){var r=e.join(" "),n;if(Lo.lastIndex=0,Lo.test(r))return n=O7.test(r),e[1]=X2(e[1],n),e[0]=X2(e[0],n,AN(e[1])),!0},md,Vn=function(){var t=Date.now,e=500,r=33,n=t(),s=n,i=1e3/240,l=i,u=[],m,h,x,y,v,b,S=function C(I){var R=t()-s,A=I===!0,N,O,k,F;if((R>e||R<0)&&(n+=R-r),s+=R,k=s-n,N=k-l,(N>0||A)&&(F=++y.frame,v=k-y.time*1e3,y.time=k=k/1e3,l+=N+(N>=i?4:i-N),O=1),A||(m=h(C)),O)for(b=0;b<u.length;b++)u[b](k,v,F,I)};return y={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(I){return v/(1e3/(I||60))},wake:function(){sN&&(!tg&&my()&&(oi=tg=window,py=oi.document||{},Zn.gsap=jn,(oi.gsapVersions||(oi.gsapVersions=[])).push(jn.version),iN(Vh||oi.GreenSockGlobals||!oi.gsap&&oi||{}),CN.forEach(EN)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,m&&y.sleep(),h=x||function(I){return setTimeout(I,l-y.time*1e3+1|0)},md=1,S(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(m),md=0,h=fd},lagSmoothing:function(I,R){e=I||1/0,r=Math.min(R||33,e)},fps:function(I){i=1e3/(I||240),l=y.time*1e3+i},add:function(I,R,A){var N=R?function(O,k,F,B){I(O,k,F,B),y.remove(N)}:I;return y.remove(I),u[A?"unshift":"push"](N),Sc(),N},remove:function(I,R){~(R=u.indexOf(I))&&u.splice(R,1)&&b>=R&&b--},_listeners:u},y}(),Sc=function(){return!md&&Vn.wake()},dt={},M7=/^[\d.\-M][\d.\-,\s]/,j7=/["']/g,k7=function(e){for(var r={},n=e.substr(1,e.length-3).split(":"),s=n[0],i=1,l=n.length,u,m,h;i<l;i++)m=n[i],u=i!==l-1?m.lastIndexOf(","):m.length,h=m.substr(0,u),r[s]=isNaN(h)?h.replace(j7,"").trim():+h,s=m.substr(u+1).trim();return r},P7=function(e){var r=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",r);return e.substring(r,~s&&s<n?e.indexOf(")",n+1):n)},D7=function(e){var r=(e+"").split("("),n=dt[r[0]];return n&&r.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[k7(r[1])]:P7(e).split(",").map(uN)):dt._CE&&M7.test(e)?dt._CE("",e):n},TN=function(e){return function(r){return 1-e(1-r)}},IN=function t(e,r){for(var n=e._first,s;n;)n instanceof un?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=r)),n=n._next},ka=function(e,r){return e&&(dr(e)?e:dt[e]||D7(e))||r},el=function(e,r,n,s){n===void 0&&(n=function(m){return 1-r(1-m)}),s===void 0&&(s=function(m){return m<.5?r(m*2)/2:1-r((1-m)*2)/2});var i={easeIn:r,easeOut:n,easeInOut:s},l;return Rn(e,function(u){dt[u]=Zn[u]=i,dt[l=u.toLowerCase()]=n;for(var m in i)dt[l+(m==="easeIn"?".in":m==="easeOut"?".out":".inOut")]=dt[u+"."+m]=i[m]}),i},RN=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},xp=function t(e,r,n){var s=r>=1?r:1,i=(n||(e?.3:.45))/(r<1?r:1),l=i/J1*(Math.asin(1/s)||0),u=function(x){return x===1?1:s*Math.pow(2,-10*x)*u7((x-l)*i)+1},m=e==="out"?u:e==="in"?function(h){return 1-u(1-h)}:RN(u);return i=J1/i,m.config=function(h,x){return t(e,h,x)},m},yp=function t(e,r){r===void 0&&(r=1.70158);var n=function(l){return l?--l*l*((r+1)*l+r)+1:0},s=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:RN(n);return s.config=function(i){return t(e,i)},s};Rn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;el(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});dt.Linear.easeNone=dt.none=dt.Linear.easeIn;el("Elastic",xp("in"),xp("out"),xp());(function(t,e){var r=1/e,n=2*r,s=2.5*r,i=function(u){return u<r?t*u*u:u<n?t*Math.pow(u-1.5/e,2)+.75:u<s?t*(u-=2.25/e)*u+.9375:t*Math.pow(u-2.625/e,2)+.984375};el("Bounce",function(l){return 1-i(1-l)},i)})(7.5625,2.75);el("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});el("Circ",function(t){return-(JA(1-t*t)-1)});el("Sine",function(t){return t===1?1:-c7(t*a7)+1});el("Back",yp("in"),yp("out"),yp());dt.SteppedEase=dt.steps=Zn.SteppedEase={config:function(e,r){e===void 0&&(e=1);var n=1/e,s=e+(r?0:1),i=r?1:0,l=1-Ot;return function(u){return((s*kd(0,l,u)|0)+i)*n}}};bc.ease=dt["quad.out"];Rn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return yy+=t+","+t+"Params,"});var ON=function(e,r){this.id=l7++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:lN,this.set=r?r.getSetter:Ey},pd=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Ec(this,+r.duration,1,1),this.data=r.data,Wt&&(this._ctx=Wt,Wt.data.push(this)),md||Vn.wake()}var e=t.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Ec(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(Sc(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(V0(this,n),!i._dp||i.parent||hN(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&di(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Ot||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),cN(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+G2(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+G2(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,s):this._repeat?Cc(this._tTime,i)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Ot?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Wh(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ot?0:this._rts,this.totalTime(kd(-Math.abs(this._delay),this.totalDuration(),i),s!==!1),z0(this),x7(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Sc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ot&&(this._tTime-=Ot)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&di(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(In(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Wh(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=h7);var s=Hr;return Hr=n,vy(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Hr=s,this},e.globalTime=function(n){for(var s=this,i=arguments.length?n:s.rawTime();s;)i=s._start+i/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Y2(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,Y2(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(as(this,n),In(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,In(s)),this._dur||(this._zTime=-Ot),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ot:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ot,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=s&&i<this.endTime(!0)-Ot)},e.eventCallback=function(n,s,i){var l=this.vars;return arguments.length>1?(s?(l[n]=s,i&&(l[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=s)):delete l[n],this):l[n]},e.then=function(n){var s=this;return new Promise(function(i){var l=dr(n)?n:dN,u=function(){var h=s.then;s.then=null,dr(l)&&(l=l(s))&&(l.then||l===s)&&(s.then=h),i(l),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?u():s._prom=u})},e.kill=function(){xu(this)},t}();Jn(pd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ot,_prom:0,_ps:!1,_rts:1});var un=function(t){ZA(e,t);function e(n,s){var i;return n===void 0&&(n={}),i=t.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=In(n.sortChildren),Xt&&di(n.parent||Xt,Oi(i),s),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&mN(Oi(i),n.scrollTrigger),i}var r=e.prototype;return r.to=function(s,i,l){return Pu(0,arguments,this),this},r.from=function(s,i,l){return Pu(1,arguments,this),this},r.fromTo=function(s,i,l,u){return Pu(2,arguments,this),this},r.set=function(s,i,l){return i.duration=0,i.parent=this,ku(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new yr(s,i,as(this,l),1),this},r.call=function(s,i,l){return di(this,yr.delayedCall(0,s,i),l)},r.staggerTo=function(s,i,l,u,m,h,x){return l.duration=i,l.stagger=l.stagger||u,l.onComplete=h,l.onCompleteParams=x,l.parent=this,new yr(s,l,as(this,m)),this},r.staggerFrom=function(s,i,l,u,m,h,x){return l.runBackwards=1,ku(l).immediateRender=In(l.immediateRender),this.staggerTo(s,i,l,u,m,h,x)},r.staggerFromTo=function(s,i,l,u,m,h,x,y){return u.startAt=l,ku(u).immediateRender=In(u.immediateRender),this.staggerTo(s,i,u,m,h,x,y)},r.render=function(s,i,l){var u=this._time,m=this._dirty?this.totalDuration():this._tDur,h=this._dur,x=s<=0?0:wr(s),y=this._zTime<0!=s<0&&(this._initted||!h),v,b,S,C,I,R,A,N,O,k,F,B;if(this!==Xt&&x>m&&s>=0&&(x=m),x!==this._tTime||l||y){if(u!==this._time&&h&&(x+=this._time-u,s+=this._time-u),v=x,O=this._start,N=this._ts,R=!N,y&&(h||(u=this._zTime),(s||!i)&&(this._zTime=s)),this._repeat){if(F=this._yoyo,I=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(I*100+s,i,l);if(v=wr(x%I),x===m?(C=this._repeat,v=h):(k=wr(x/I),C=~~k,C&&C===k&&(v=h,C--),v>h&&(v=h)),k=Cc(this._tTime,I),!u&&this._tTime&&k!==C&&this._tTime-k*I-this._dur<=0&&(k=C),F&&C&1&&(v=h-v,B=1),C!==k&&!this._lock){var P=F&&k&1,j=P===(F&&C&1);if(C<k&&(P=!P),u=P?0:x%h?h:x,this._lock=1,this.render(u||(B?0:wr(C*I)),i,!h)._lock=0,this._tTime=x,!i&&this.parent&&Wn(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1),u&&u!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,m=this._tDur,j&&(this._lock=2,u=P?h:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;IN(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=b7(this,wr(u),wr(v)),A&&(x-=v-(v=A._start))),this._tTime=x,this._time=v,this._act=!N,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,u=0),!u&&x&&!i&&!k&&(Wn(this,"onStart"),this._tTime!==x))return this;if(v>=u&&s>=0)for(b=this._first;b;){if(S=b._next,(b._act||v>=b._start)&&b._ts&&A!==b){if(b.parent!==this)return this.render(s,i,l);if(b.render(b._ts>0?(v-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(v-b._start)*b._ts,i,l),v!==this._time||!this._ts&&!R){A=0,S&&(x+=this._zTime=-Ot);break}}b=S}else{b=this._last;for(var W=s<0?s:v;b;){if(S=b._prev,(b._act||W<=b._end)&&b._ts&&A!==b){if(b.parent!==this)return this.render(s,i,l);if(b.render(b._ts>0?(W-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(W-b._start)*b._ts,i,l||Hr&&vy(b)),v!==this._time||!this._ts&&!R){A=0,S&&(x+=this._zTime=W?-Ot:Ot);break}}b=S}}if(A&&!i&&(this.pause(),A.render(v>=u?0:-Ot)._zTime=v>=u?1:-1,this._ts))return this._start=O,z0(this),this.render(s,i,l);this._onUpdate&&!i&&Wn(this,"onUpdate",!0),(x===m&&this._tTime>=this.totalDuration()||!x&&u)&&(O===this._start||Math.abs(N)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(x===m&&this._ts>0||!x&&this._ts<0)&&$o(this,1),!i&&!(s<0&&!u)&&(x||u||!m)&&(Wn(this,x===m&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<m&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(s,i){var l=this;if(Yi(i)||(i=as(this,i,s)),!(s instanceof pd)){if(Jr(s))return s.forEach(function(u){return l.add(u,i)}),this;if(kr(s))return this.addLabel(s,i);if(dr(s))s=yr.delayedCall(0,s);else return this}return this!==s?di(this,s,i):this},r.getChildren=function(s,i,l,u){s===void 0&&(s=!0),i===void 0&&(i=!0),l===void 0&&(l=!0),u===void 0&&(u=-hs);for(var m=[],h=this._first;h;)h._start>=u&&(h instanceof yr?i&&m.push(h):(l&&m.push(h),s&&m.push.apply(m,h.getChildren(!0,i,l)))),h=h._next;return m},r.getById=function(s){for(var i=this.getChildren(1,1,1),l=i.length;l--;)if(i[l].vars.id===s)return i[l]},r.remove=function(s){return kr(s)?this.removeLabel(s):dr(s)?this.killTweensOf(s):(s.parent===this&&U0(this,s),s===this._recent&&(this._recent=this._last),ja(this))},r.totalTime=function(s,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=wr(Vn.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),t.prototype.totalTime.call(this,s,i),this._forcing=0,this):this._tTime},r.addLabel=function(s,i){return this.labels[s]=as(this,i),this},r.removeLabel=function(s){return delete this.labels[s],this},r.addPause=function(s,i,l){var u=yr.delayedCall(0,i||fd,l);return u.data="isPause",this._hasPause=1,di(this,u,as(this,s))},r.removePause=function(s){var i=this._first;for(s=as(this,s);i;)i._start===s&&i.data==="isPause"&&$o(i),i=i._next},r.killTweensOf=function(s,i,l){for(var u=this.getTweensOf(s,l),m=u.length;m--;)Co!==u[m]&&u[m].kill(s,i);return this},r.getTweensOf=function(s,i){for(var l=[],u=ms(s),m=this._first,h=Yi(i),x;m;)m instanceof yr?m7(m._targets,u)&&(h?(!Co||m._initted&&m._ts)&&m.globalTime(0)<=i&&m.globalTime(m.totalDuration())>i:!i||m.isActive())&&l.push(m):(x=m.getTweensOf(u,i)).length&&l.push.apply(l,x),m=m._next;return l},r.tweenTo=function(s,i){i=i||{};var l=this,u=as(l,s),m=i,h=m.startAt,x=m.onStart,y=m.onStartParams,v=m.immediateRender,b,S=yr.to(l,Jn({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:i.duration||Math.abs((u-(h&&"time"in h?h.time:l._time))/l.timeScale())||Ot,onStart:function(){if(l.pause(),!b){var I=i.duration||Math.abs((u-(h&&"time"in h?h.time:l._time))/l.timeScale());S._dur!==I&&Ec(S,I,0,1).render(S._time,!0,!0),b=1}x&&x.apply(S,y||[])}},i));return v?S.render(0):S},r.tweenFromTo=function(s,i,l){return this.tweenTo(i,Jn({startAt:{time:as(this,s)}},l))},r.recent=function(){return this._recent},r.nextLabel=function(s){return s===void 0&&(s=this._time),q2(this,as(this,s))},r.previousLabel=function(s){return s===void 0&&(s=this._time),q2(this,as(this,s),1)},r.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Ot)},r.shiftChildren=function(s,i,l){l===void 0&&(l=0);for(var u=this._first,m=this.labels,h;u;)u._start>=l&&(u._start+=s,u._end+=s),u=u._next;if(i)for(h in m)m[h]>=l&&(m[h]+=s);return ja(this)},r.invalidate=function(s){var i=this._first;for(this._lock=0;i;)i.invalidate(s),i=i._next;return t.prototype.invalidate.call(this,s)},r.clear=function(s){s===void 0&&(s=!0);for(var i=this._first,l;i;)l=i._next,this.remove(i),i=l;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),ja(this)},r.totalDuration=function(s){var i=0,l=this,u=l._last,m=hs,h,x,y;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-s:s));if(l._dirty){for(y=l.parent;u;)h=u._prev,u._dirty&&u.totalDuration(),x=u._start,x>m&&l._sort&&u._ts&&!l._lock?(l._lock=1,di(l,u,x-u._delay,1)._lock=0):m=x,x<0&&u._ts&&(i-=x,(!y&&!l._dp||y&&y.smoothChildTiming)&&(l._start+=x/l._ts,l._time-=x,l._tTime-=x),l.shiftChildren(-x,!1,-1/0),m=0),u._end>i&&u._ts&&(i=u._end),u=h;Ec(l,l===Xt&&l._time>i?l._time:i,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(s){if(Xt._ts&&(cN(Xt,Wh(s,Xt)),aN=Vn.frame),Vn.frame>=$2){$2+=Kn.autoSleep||120;var i=Xt._first;if((!i||!i._ts)&&Kn.autoSleep&&Vn._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Vn.sleep()}}},e}(pd);Jn(un.prototype,{_lock:0,_hasPause:0,_forcing:0});var L7=function(e,r,n,s,i,l,u){var m=new On(this._pt,e,r,0,1,LN,null,i),h=0,x=0,y,v,b,S,C,I,R,A;for(m.b=n,m.e=s,n+="",s+="",(R=~s.indexOf("random("))&&(s=hd(s)),l&&(A=[n,s],l(A,e,r),n=A[0],s=A[1]),v=n.match(mp)||[];y=mp.exec(s);)S=y[0],C=s.substring(h,y.index),b?b=(b+1)%5:C.substr(-5)==="rgba("&&(b=1),S!==v[x++]&&(I=parseFloat(v[x-1])||0,m._pt={_next:m._pt,p:C||x===1?C:",",s:I,c:S.charAt(1)==="="?Ql(I,S)-I:parseFloat(S)-I,m:b&&b<4?Math.round:0},h=mp.lastIndex);return m.c=h<s.length?s.substring(h,s.length):"",m.fp=u,(rN.test(s)||R)&&(m.e=0),this._pt=m,m},by=function(e,r,n,s,i,l,u,m,h,x){dr(s)&&(s=s(i||0,e,l));var y=e[r],v=n!=="get"?n:dr(y)?h?e[r.indexOf("set")||!dr(e["get"+r.substr(3)])?r:"get"+r.substr(3)](h):e[r]():y,b=dr(y)?h?V7:PN:Cy,S;if(kr(s)&&(~s.indexOf("random(")&&(s=hd(s)),s.charAt(1)==="="&&(S=Ql(v,s)+(Zr(v)||0),(S||S===0)&&(s=S))),!x||v!==s||lg)return!isNaN(v*s)&&s!==""?(S=new On(this._pt,e,r,+v||0,s-(v||0),typeof y=="boolean"?$7:DN,0,b),h&&(S.fp=h),u&&S.modifier(u,this,e),this._pt=S):(!y&&!(r in e)&&gy(r,s),L7.call(this,e,r,v,s,b,m||Kn.stringFilter,h))},B7=function(e,r,n,s,i){if(dr(e)&&(e=Du(e,i,r,n,s)),!vi(e)||e.style&&e.nodeType||Jr(e)||eN(e))return kr(e)?Du(e,i,r,n,s):e;var l={},u;for(u in e)l[u]=Du(e[u],i,r,n,s);return l},MN=function(e,r,n,s,i,l){var u,m,h,x;if(Bn[e]&&(u=new Bn[e]).init(i,u.rawVars?r[e]:B7(r[e],s,i,l,n),n,s,l)!==!1&&(n._pt=m=new On(n._pt,i,e,0,1,u.render,u,0,u.priority),n!==Fl))for(h=n._ptLookup[n._targets.indexOf(i)],x=u._props.length;x--;)h[u._props[x]]=m;return u},Co,lg,_y=function t(e,r,n){var s=e.vars,i=s.ease,l=s.startAt,u=s.immediateRender,m=s.lazy,h=s.onUpdate,x=s.runBackwards,y=s.yoyoEase,v=s.keyframes,b=s.autoRevert,S=e._dur,C=e._startAt,I=e._targets,R=e.parent,A=R&&R.data==="nested"?R.vars.targets:I,N=e._overwrite==="auto"&&!fy,O=e.timeline,k,F,B,P,j,W,Y,z,X,G,H,te,J;if(O&&(!v||!i)&&(i="none"),e._ease=ka(i,bc.ease),e._yEase=y?TN(ka(y===!0?i:y,bc.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!O&&!!s.runBackwards,!O||v&&!s.stagger){if(z=I[0]?Ma(I[0]).harness:0,te=z&&s[z.prop],k=$h(s,xy),C&&(C._zTime<0&&C.progress(1),r<0&&x&&u&&!b?C.render(-1,!0):C.revert(x&&S?Jf:f7),C._lazy=0),l){if($o(e._startAt=yr.set(I,Jn({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!C&&In(m),startAt:null,delay:0,onUpdate:h&&function(){return Wn(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Hr||!u&&!b)&&e._startAt.revert(Jf),u&&S&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(x&&S&&!C){if(r&&(u=!1),B=Jn({overwrite:!1,data:"isFromStart",lazy:u&&!C&&In(m),immediateRender:u,stagger:0,parent:R},k),te&&(B[z.prop]=te),$o(e._startAt=yr.set(I,B)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Hr?e._startAt.revert(Jf):e._startAt.render(-1,!0)),e._zTime=r,!u)t(e._startAt,Ot,Ot);else if(!r)return}for(e._pt=e._ptCache=0,m=S&&In(m)||m&&!S,F=0;F<I.length;F++){if(j=I[F],Y=j._gsap||wy(I)[F]._gsap,e._ptLookup[F]=G={},rg[Y.id]&&Do.length&&Hh(),H=A===I?F:A.indexOf(j),z&&(X=new z).init(j,te||k,e,H,A)!==!1&&(e._pt=P=new On(e._pt,j,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(Z){G[Z]=P}),X.priority&&(W=1)),!z||te)for(B in k)Bn[B]&&(X=MN(B,k,e,H,j,A))?X.priority&&(W=1):G[B]=P=by.call(e,j,B,"get",k[B],H,A,0,s.stringFilter);e._op&&e._op[F]&&e.kill(j,e._op[F]),N&&e._pt&&(Co=e,Xt.killTweensOf(j,G,e.globalTime(r)),J=!e.parent,Co=0),e._pt&&m&&(rg[Y.id]=1)}W&&BN(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!J,v&&r<=0&&O.render(hs,!0,!0)},F7=function(e,r,n,s,i,l,u,m){var h=(e._pt&&e._ptCache||(e._ptCache={}))[r],x,y,v,b;if(!h)for(h=e._ptCache[r]=[],v=e._ptLookup,b=e._targets.length;b--;){if(x=v[b][r],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==r&&x.fp!==r;)x=x._next;if(!x)return lg=1,e.vars[r]="+=0",_y(e,u),lg=0,m?dd(r+" not eligible for reset"):1;h.push(x)}for(b=h.length;b--;)y=h[b],x=y._pt||y,x.s=(s||s===0)&&!i?s:x.s+(s||0)+l*x.c,x.c=n-x.s,y.e&&(y.e=hr(n)+Zr(y.e)),y.b&&(y.b=x.s+Zr(y.b))},U7=function(e,r){var n=e[0]?Ma(e[0]).harness:0,s=n&&n.aliases,i,l,u,m;if(!s)return r;i=_c({},r);for(l in s)if(l in i)for(m=s[l].split(","),u=m.length;u--;)i[m[u]]=i[l];return i},z7=function(e,r,n,s){var i=r.ease||s||"power1.inOut",l,u;if(Jr(r))u=n[e]||(n[e]=[]),r.forEach(function(m,h){return u.push({t:h/(r.length-1)*100,v:m,e:i})});else for(l in r)u=n[l]||(n[l]=[]),l==="ease"||u.push({t:parseFloat(e),v:r[l],e:i})},Du=function(e,r,n,s,i){return dr(e)?e.call(r,n,s,i):kr(e)&&~e.indexOf("random(")?hd(e):e},jN=yy+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",kN={};Rn(jN+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return kN[t]=1});var yr=function(t){ZA(e,t);function e(n,s,i,l){var u;typeof s=="number"&&(i.duration=s,s=i,i=null),u=t.call(this,l?s:ku(s))||this;var m=u.vars,h=m.duration,x=m.delay,y=m.immediateRender,v=m.stagger,b=m.overwrite,S=m.keyframes,C=m.defaults,I=m.scrollTrigger,R=m.yoyoEase,A=s.parent||Xt,N=(Jr(n)||eN(n)?Yi(n[0]):"length"in s)?[n]:ms(n),O,k,F,B,P,j,W,Y;if(u._targets=N.length?wy(N):dd("GSAP target "+n+" not found. https://gsap.com",!Kn.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=b,S||v||Mf(h)||Mf(x)){if(s=u.vars,O=u.timeline=new un({data:"nested",defaults:C||{},targets:A&&A.data==="nested"?A.vars.targets:N}),O.kill(),O.parent=O._dp=Oi(u),O._start=0,v||Mf(h)||Mf(x)){if(B=N.length,W=v&&yN(v),vi(v))for(P in v)~jN.indexOf(P)&&(Y||(Y={}),Y[P]=v[P]);for(k=0;k<B;k++)F=$h(s,kN),F.stagger=0,R&&(F.yoyoEase=R),Y&&_c(F,Y),j=N[k],F.duration=+Du(h,Oi(u),k,j,N),F.delay=(+Du(x,Oi(u),k,j,N)||0)-u._delay,!v&&B===1&&F.delay&&(u._delay=x=F.delay,u._start+=x,F.delay=0),O.to(j,F,W?W(k,j,N):0),O._ease=dt.none;O.duration()?h=x=0:u.timeline=0}else if(S){ku(Jn(O.vars.defaults,{ease:"none"})),O._ease=ka(S.ease||s.ease||"none");var z=0,X,G,H;if(Jr(S))S.forEach(function(te){return O.to(N,te,">")}),O.duration();else{F={};for(P in S)P==="ease"||P==="easeEach"||z7(P,S[P],F,S.easeEach);for(P in F)for(X=F[P].sort(function(te,J){return te.t-J.t}),z=0,k=0;k<X.length;k++)G=X[k],H={ease:G.e,duration:(G.t-(k?X[k-1].t:0))/100*h},H[P]=G.v,O.to(N,H,z),z+=H.duration;O.duration()<h&&O.to({},{duration:h-O.duration()})}}h||u.duration(h=O.duration())}else u.timeline=0;return b===!0&&!fy&&(Co=Oi(u),Xt.killTweensOf(N),Co=0),di(A,Oi(u),i),s.reversed&&u.reverse(),s.paused&&u.paused(!0),(y||!h&&!S&&u._start===wr(A._time)&&In(y)&&y7(Oi(u))&&A.data!=="nested")&&(u._tTime=-Ot,u.render(Math.max(0,-x)||0)),I&&mN(Oi(u),I),u}var r=e.prototype;return r.render=function(s,i,l){var u=this._time,m=this._tDur,h=this._dur,x=s<0,y=s>m-Ot&&!x?m:s<Ot?0:s,v,b,S,C,I,R,A,N,O;if(!h)v7(this,s,i,l);else if(y!==this._tTime||!s||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(v=y,N=this.timeline,this._repeat){if(C=h+this._rDelay,this._repeat<-1&&x)return this.totalTime(C*100+s,i,l);if(v=wr(y%C),y===m?(S=this._repeat,v=h):(I=wr(y/C),S=~~I,S&&S===I?(v=h,S--):v>h&&(v=h)),R=this._yoyo&&S&1,R&&(O=this._yEase,v=h-v),I=Cc(this._tTime,C),v===u&&!l&&this._initted&&S===I)return this._tTime=y,this;S!==I&&(N&&this._yEase&&IN(N,R),this.vars.repeatRefresh&&!R&&!this._lock&&v!==C&&this._initted&&(this._lock=l=1,this.render(wr(C*S),!0).invalidate()._lock=0))}if(!this._initted){if(pN(this,x?s:v,l,i,y))return this._tTime=0,this;if(u!==this._time&&!(l&&this.vars.repeatRefresh&&S!==I))return this;if(h!==this._dur)return this.render(s,i,l)}if(this._tTime=y,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(O||this._ease)(v/h),this._from&&(this.ratio=A=1-A),!u&&y&&!i&&!I&&(Wn(this,"onStart"),this._tTime!==y))return this;for(b=this._pt;b;)b.r(A,b.d),b=b._next;N&&N.render(s<0?s:N._dur*N._ease(v/this._dur),i,l)||this._startAt&&(this._zTime=s),this._onUpdate&&!i&&(x&&ng(this,s,i,l),Wn(this,"onUpdate")),this._repeat&&S!==I&&this.vars.onRepeat&&!i&&this.parent&&Wn(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(x&&!this._onUpdate&&ng(this,s,!0,!0),(s||!h)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&$o(this,1),!i&&!(x&&!u)&&(y||u||R)&&(Wn(this,y===m?"onComplete":"onReverseComplete",!0),this._prom&&!(y<m&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),t.prototype.invalidate.call(this,s)},r.resetTo=function(s,i,l,u,m){md||Vn.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||_y(this,h),x=this._ease(h/this._dur),F7(this,s,i,l,u,x,h,m)?this.resetTo(s,i,l,u,1):(V0(this,0),this.parent||fN(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(s,i){if(i===void 0&&(i="all"),!s&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?xu(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Hr),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(s,i,Co&&Co.vars.overwrite!==!0)._first||xu(this),this.parent&&l!==this.timeline.totalDuration()&&Ec(this,this._dur*this.timeline._tDur/l,0,1),this}var u=this._targets,m=s?ms(s):u,h=this._ptLookup,x=this._pt,y,v,b,S,C,I,R;if((!i||i==="all")&&g7(u,m))return i==="all"&&(this._pt=0),xu(this);for(y=this._op=this._op||[],i!=="all"&&(kr(i)&&(C={},Rn(i,function(A){return C[A]=1}),i=C),i=U7(u,i)),R=u.length;R--;)if(~m.indexOf(u[R])){v=h[R],i==="all"?(y[R]=i,S=v,b={}):(b=y[R]=y[R]||{},S=i);for(C in S)I=v&&v[C],I&&((!("kill"in I.d)||I.d.kill(C)===!0)&&U0(this,I,"_pt"),delete v[C]),b!=="all"&&(b[C]=1)}return this._initted&&!this._pt&&x&&xu(this),this},e.to=function(s,i){return new e(s,i,arguments[2])},e.from=function(s,i){return Pu(1,arguments)},e.delayedCall=function(s,i,l,u){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:i,onReverseComplete:i,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:u})},e.fromTo=function(s,i,l){return Pu(2,arguments)},e.set=function(s,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(s,i)},e.killTweensOf=function(s,i,l){return Xt.killTweensOf(s,i,l)},e}(pd);Jn(yr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Rn("staggerTo,staggerFrom,staggerFromTo",function(t){yr[t]=function(){var e=new un,r=ig.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var Cy=function(e,r,n){return e[r]=n},PN=function(e,r,n){return e[r](n)},V7=function(e,r,n,s){return e[r](s.fp,n)},H7=function(e,r,n){return e.setAttribute(r,n)},Ey=function(e,r){return dr(e[r])?PN:hy(e[r])&&e.setAttribute?H7:Cy},DN=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},$7=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},LN=function(e,r){var n=r._pt,s="";if(!e&&r.b)s=r.b;else if(e===1&&r.e)s=r.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=r.c}r.set(r.t,r.p,s,r)},Sy=function(e,r){for(var n=r._pt;n;)n.r(e,n.d),n=n._next},W7=function(e,r,n,s){for(var i=this._pt,l;i;)l=i._next,i.p===s&&i.modifier(e,r,n),i=l},G7=function(e){for(var r=this._pt,n,s;r;)s=r._next,r.p===e&&!r.op||r.op===e?U0(this,r,"_pt"):r.dep||(n=1),r=s;return!n},Y7=function(e,r,n,s){s.mSet(e,r,s.m.call(s.tween,n,s.mt),s)},BN=function(e){for(var r=e._pt,n,s,i,l;r;){for(n=r._next,s=i;s&&s.pr>r.pr;)s=s._next;(r._prev=s?s._prev:l)?r._prev._next=r:i=r,(r._next=s)?s._prev=r:l=r,r=n}e._pt=i},On=function(){function t(r,n,s,i,l,u,m,h,x){this.t=n,this.s=i,this.c=l,this.p=s,this.r=u||DN,this.d=m||this,this.set=h||Cy,this.pr=x||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(n,s,i){this.mSet=this.mSet||this.set,this.set=Y7,this.m=n,this.mt=i,this.tween=s},t}();Rn(yy+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return xy[t]=1});Zn.TweenMax=Zn.TweenLite=yr;Zn.TimelineLite=Zn.TimelineMax=un;Xt=new un({sortChildren:!1,defaults:bc,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Kn.stringFilter=NN;var Pa=[],th={},q7=[],K2=0,X7=0,wp=function(e){return(th[e]||q7).map(function(r){return r()})},cg=function(){var e=Date.now(),r=[];e-K2>2&&(wp("matchMediaInit"),Pa.forEach(function(n){var s=n.queries,i=n.conditions,l,u,m,h;for(u in s)l=oi.matchMedia(s[u]).matches,l&&(m=1),l!==i[u]&&(i[u]=l,h=1);h&&(n.revert(),m&&r.push(n))}),wp("matchMediaRevert"),r.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),K2=e,wp("matchMedia"))},FN=function(){function t(r,n){this.selector=n&&og(n),this.data=[],this._r=[],this.isReverted=!1,this.id=X7++,r&&this.add(r)}var e=t.prototype;return e.add=function(n,s,i){dr(n)&&(i=s,s=n,n=dr);var l=this,u=function(){var h=Wt,x=l.selector,y;return h&&h!==l&&h.data.push(l),i&&(l.selector=og(i)),Wt=l,y=s.apply(l,arguments),dr(y)&&l._r.push(y),Wt=h,l.selector=x,l.isReverted=!1,y};return l.last=u,n===dr?u(l,function(m){return l.add(null,m)}):n?l[n]=u:u},e.ignore=function(n){var s=Wt;Wt=null,n(this),Wt=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof t?n.push.apply(n,s.getTweens()):s instanceof yr&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var i=this;if(n?function(){for(var u=i.getTweens(),m=i.data.length,h;m--;)h=i.data[m],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(x){return u.splice(u.indexOf(x),1)}));for(u.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,y){return y.g-x.g||-1/0}).forEach(function(x){return x.t.revert(n)}),m=i.data.length;m--;)h=i.data[m],h instanceof un?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof yr)&&h.revert&&h.revert(n);i._r.forEach(function(x){return x(n,i)}),i.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),s)for(var l=Pa.length;l--;)Pa[l].id===this.id&&Pa.splice(l,1)},e.revert=function(n){this.kill(n||{})},t}(),K7=function(){function t(r){this.contexts=[],this.scope=r,Wt&&Wt.data.push(this)}var e=t.prototype;return e.add=function(n,s,i){vi(n)||(n={matches:n});var l=new FN(0,i||this.scope),u=l.conditions={},m,h,x;Wt&&!l.selector&&(l.selector=Wt.selector),this.contexts.push(l),s=l.add("onMatch",s),l.queries=n;for(h in n)h==="all"?x=1:(m=oi.matchMedia(n[h]),m&&(Pa.indexOf(l)<0&&Pa.push(l),(u[h]=m.matches)&&(x=1),m.addListener?m.addListener(cg):m.addEventListener("change",cg)));return x&&s(l,function(y){return l.add(null,y)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},t}(),Gh={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(s){return EN(s)})},timeline:function(e){return new un(e)},getTweensOf:function(e,r){return Xt.getTweensOf(e,r)},getProperty:function(e,r,n,s){kr(e)&&(e=ms(e)[0]);var i=Ma(e||{}).get,l=n?dN:uN;return n==="native"&&(n=""),e&&(r?l((Bn[r]&&Bn[r].get||i)(e,r,n,s)):function(u,m,h){return l((Bn[u]&&Bn[u].get||i)(e,u,m,h))})},quickSetter:function(e,r,n){if(e=ms(e),e.length>1){var s=e.map(function(x){return jn.quickSetter(x,r,n)}),i=s.length;return function(x){for(var y=i;y--;)s[y](x)}}e=e[0]||{};var l=Bn[r],u=Ma(e),m=u.harness&&(u.harness.aliases||{})[r]||r,h=l?function(x){var y=new l;Fl._pt=0,y.init(e,n?x+n:x,Fl,0,[e]),y.render(1,y),Fl._pt&&Sy(1,Fl)}:u.set(e,m);return l?h:function(x){return h(e,m,n?x+n:x,u,1)}},quickTo:function(e,r,n){var s,i=jn.to(e,Jn((s={},s[r]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),l=function(m,h,x){return i.resetTo(r,m,h,x)};return l.tween=i,l},isTweening:function(e){return Xt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ka(e.ease,bc.ease)),W2(bc,e||{})},config:function(e){return W2(Kn,e||{})},registerEffect:function(e){var r=e.name,n=e.effect,s=e.plugins,i=e.defaults,l=e.extendTimeline;(s||"").split(",").forEach(function(u){return u&&!Bn[u]&&!Zn[u]&&dd(r+" effect requires "+u+" plugin.")}),pp[r]=function(u,m,h){return n(ms(u),Jn(m||{},i),h)},l&&(un.prototype[r]=function(u,m,h){return this.add(pp[r](u,vi(m)?m:(h=m)&&{},this),h)})},registerEase:function(e,r){dt[e]=ka(r)},parseEase:function(e,r){return arguments.length?ka(e,r):dt},getById:function(e){return Xt.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var n=new un(e),s,i;for(n.smoothChildTiming=In(e.smoothChildTiming),Xt.remove(n),n._dp=0,n._time=n._tTime=Xt._time,s=Xt._first;s;)i=s._next,(r||!(!s._dur&&s instanceof yr&&s.vars.onComplete===s._targets[0]))&&di(n,s,s._start-s._delay),s=i;return di(Xt,n,0),n},context:function(e,r){return e?new FN(e,r):Wt},matchMedia:function(e){return new K7(e)},matchMediaRefresh:function(){return Pa.forEach(function(e){var r=e.conditions,n,s;for(s in r)r[s]&&(r[s]=!1,n=1);n&&e.revert()})||cg()},addEventListener:function(e,r){var n=th[e]||(th[e]=[]);~n.indexOf(r)||n.push(r)},removeEventListener:function(e,r){var n=th[e],s=n&&n.indexOf(r);s>=0&&n.splice(s,1)},utils:{wrap:T7,wrapYoyo:I7,distribute:yN,random:vN,snap:wN,normalize:N7,getUnit:Zr,clamp:C7,splitColor:SN,toArray:ms,selector:og,mapRange:_N,pipe:S7,unitize:A7,interpolate:R7,shuffle:xN},install:iN,effects:pp,ticker:Vn,updateRoot:un.updateRoot,plugins:Bn,globalTimeline:Xt,core:{PropTween:On,globals:oN,Tween:yr,Timeline:un,Animation:pd,getCache:Ma,_removeLinkedListItem:U0,reverting:function(){return Hr},context:function(e){return e&&Wt&&(Wt.data.push(e),e._ctx=Wt),Wt},suppressOverwrites:function(e){return fy=e}}};Rn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Gh[t]=yr[t]});Vn.add(un.updateRoot);Fl=Gh.to({},{duration:0});var Q7=function(e,r){for(var n=e._pt;n&&n.p!==r&&n.op!==r&&n.fp!==r;)n=n._next;return n},Z7=function(e,r){var n=e._targets,s,i,l;for(s in r)for(i=n.length;i--;)l=e._ptLookup[i][s],l&&(l=l.d)&&(l._pt&&(l=Q7(l,s)),l&&l.modifier&&l.modifier(r[s],e,n[i],s))},vp=function(e,r){return{name:e,headless:1,rawVars:1,init:function(s,i,l){l._onInit=function(u){var m,h;if(kr(i)&&(m={},Rn(i,function(x){return m[x]=1}),i=m),r){m={};for(h in i)m[h]=r(i[h]);i=m}Z7(u,i)}}}},jn=Gh.registerPlugin({name:"attr",init:function(e,r,n,s,i){var l,u,m;this.tween=n;for(l in r)m=e.getAttribute(l)||"",u=this.add(e,"setAttribute",(m||0)+"",r[l],s,i,0,0,l),u.op=l,u.b=m,this._props.push(l)},render:function(e,r){for(var n=r._pt;n;)Hr?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,r){for(var n=r.length;n--;)this.add(e,n,e[n]||0,r[n],0,0,0,0,0,1)}},vp("roundProps",ag),vp("modifiers"),vp("snap",wN))||Gh;yr.version=un.version=jn.version="3.13.0";sN=1;my()&&Sc();dt.Power0;dt.Power1;dt.Power2;dt.Power3;dt.Power4;dt.Linear;dt.Quad;dt.Cubic;dt.Quart;dt.Quint;dt.Strong;dt.Elastic;dt.Back;dt.SteppedEase;dt.Bounce;dt.Sine;dt.Expo;dt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Q2,Eo,Zl,Ay,Ca,Z2,Ny,J7=function(){return typeof window<"u"},qi={},ga=180/Math.PI,Jl=Math.PI/180,wl=Math.atan2,J2=1e8,Ty=/([A-Z])/g,e9=/(left|right|width|margin|padding|x)/i,t9=/[\s,\(]\S/,hi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ug=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},r9=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},n9=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},s9=function(e,r){var n=r.s+r.c*e;r.set(r.t,r.p,~~(n+(n<0?-.5:.5))+r.u,r)},UN=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},zN=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},i9=function(e,r,n){return e.style[r]=n},o9=function(e,r,n){return e.style.setProperty(r,n)},a9=function(e,r,n){return e._gsap[r]=n},l9=function(e,r,n){return e._gsap.scaleX=e._gsap.scaleY=n},c9=function(e,r,n,s,i){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(i,l)},u9=function(e,r,n,s,i){var l=e._gsap;l[r]=n,l.renderTransform(i,l)},Qt="transform",Mn=Qt+"Origin",d9=function t(e,r){var n=this,s=this.target,i=s.style,l=s._gsap;if(e in qi&&i){if(this.tfm=this.tfm||{},e!=="transform")e=hi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(u){return n.tfm[u]=ki(s,u)}):this.tfm[e]=l.x?l[e]:ki(s,e),e===Mn&&(this.tfm.zOrigin=l.zOrigin);else return hi.transform.split(",").forEach(function(u){return t.call(n,u,r)});if(this.props.indexOf(Qt)>=0)return;l.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Mn,r,"")),e=Qt}(i||r)&&this.props.push(e,r,i[e])},VN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},f9=function(){var e=this.props,r=this.target,n=r.style,s=r._gsap,i,l;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?r[e[i]](e[i+2]):r[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(Ty,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)s[l]=this.tfm[l];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),i=Ny(),(!i||!i.isStart)&&!n[Qt]&&(VN(n),s.zOrigin&&n[Mn]&&(n[Mn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},HN=function(e,r){var n={target:e,props:[],revert:f9,save:d9};return e._gsap||jn.core.getCache(e),r&&e.style&&e.nodeType&&r.split(",").forEach(function(s){return n.save(s)}),n},$N,dg=function(e,r){var n=Eo.createElementNS?Eo.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Eo.createElement(e);return n&&n.style?n:Eo.createElement(e)},ps=function t(e,r,n){var s=getComputedStyle(e);return s[r]||s.getPropertyValue(r.replace(Ty,"-$1").toLowerCase())||s.getPropertyValue(r)||!n&&t(e,Ac(r)||r,1)||""},eb="O,Moz,ms,Ms,Webkit".split(","),Ac=function(e,r,n){var s=r||Ca,i=s.style,l=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(eb[l]+e in i););return l<0?null:(l===3?"ms":l>=0?eb[l]:"")+e},fg=function(){J7()&&window.document&&(Q2=window,Eo=Q2.document,Zl=Eo.documentElement,Ca=dg("div")||{style:{}},dg("div"),Qt=Ac(Qt),Mn=Qt+"Origin",Ca.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$N=!!Ac("perspective"),Ny=jn.core.reverting,Ay=1)},tb=function(e){var r=e.ownerSVGElement,n=dg("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),i;s.style.display="block",n.appendChild(s),Zl.appendChild(n);try{i=s.getBBox()}catch{}return n.removeChild(s),Zl.removeChild(n),i},rb=function(e,r){for(var n=r.length;n--;)if(e.hasAttribute(r[n]))return e.getAttribute(r[n])},WN=function(e){var r,n;try{r=e.getBBox()}catch{r=tb(e),n=1}return r&&(r.width||r.height)||n||(r=tb(e)),r&&!r.width&&!r.x&&!r.y?{x:+rb(e,["x","cx","x1"])||0,y:+rb(e,["y","cy","y1"])||0,width:0,height:0}:r},GN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&WN(e))},Ha=function(e,r){if(r){var n=e.style,s;r in qi&&r!==Mn&&(r=Qt),n.removeProperty?(s=r.substr(0,2),(s==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),n.removeProperty(s==="--"?r:r.replace(Ty,"-$1").toLowerCase())):n.removeAttribute(r)}},So=function(e,r,n,s,i,l){var u=new On(e._pt,r,n,0,1,l?zN:UN);return e._pt=u,u.b=s,u.e=i,e._props.push(n),u},nb={deg:1,rad:1,turn:1},h9={grid:1,flex:1},Wo=function t(e,r,n,s){var i=parseFloat(n)||0,l=(n+"").trim().substr((i+"").length)||"px",u=Ca.style,m=e9.test(r),h=e.tagName.toLowerCase()==="svg",x=(h?"client":"offset")+(m?"Width":"Height"),y=100,v=s==="px",b=s==="%",S,C,I,R;if(s===l||!i||nb[s]||nb[l])return i;if(l!=="px"&&!v&&(i=t(e,r,n,"px")),R=e.getCTM&&GN(e),(b||l==="%")&&(qi[r]||~r.indexOf("adius")))return S=R?e.getBBox()[m?"width":"height"]:e[x],hr(b?i/S*y:i/100*S);if(u[m?"width":"height"]=y+(v?l:s),C=s!=="rem"&&~r.indexOf("adius")||s==="em"&&e.appendChild&&!h?e:e.parentNode,R&&(C=(e.ownerSVGElement||{}).parentNode),(!C||C===Eo||!C.appendChild)&&(C=Eo.body),I=C._gsap,I&&b&&I.width&&m&&I.time===Vn.time&&!I.uncache)return hr(i/I.width*y);if(b&&(r==="height"||r==="width")){var A=e.style[r];e.style[r]=y+s,S=e[x],A?e.style[r]=A:Ha(e,r)}else(b||l==="%")&&!h9[ps(C,"display")]&&(u.position=ps(e,"position")),C===e&&(u.position="static"),C.appendChild(Ca),S=Ca[x],C.removeChild(Ca),u.position="absolute";return m&&b&&(I=Ma(C),I.time=Vn.time,I.width=C[x]),hr(v?S*i/y:S&&i?y/S*i:0)},ki=function(e,r,n,s){var i;return Ay||fg(),r in hi&&r!=="transform"&&(r=hi[r],~r.indexOf(",")&&(r=r.split(",")[0])),qi[r]&&r!=="transform"?(i=xd(e,s),i=r!=="transformOrigin"?i[r]:i.svg?i.origin:qh(ps(e,Mn))+" "+i.zOrigin+"px"):(i=e.style[r],(!i||i==="auto"||s||~(i+"").indexOf("calc("))&&(i=Yh[r]&&Yh[r](e,r,n)||ps(e,r)||lN(e,r)||(r==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Wo(e,r,i,n)+n:i},m9=function(e,r,n,s){if(!n||n==="none"){var i=Ac(r,e,1),l=i&&ps(e,i,1);l&&l!==n?(r=i,n=l):r==="borderColor"&&(n=ps(e,"borderTopColor"))}var u=new On(this._pt,e.style,r,0,1,LN),m=0,h=0,x,y,v,b,S,C,I,R,A,N,O,k;if(u.b=n,u.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=ps(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(C=e.style[r],e.style[r]=s,s=ps(e,r)||s,C?e.style[r]=C:Ha(e,r)),x=[n,s],NN(x),n=x[0],s=x[1],v=n.match(Bl)||[],k=s.match(Bl)||[],k.length){for(;y=Bl.exec(s);)I=y[0],A=s.substring(m,y.index),S?S=(S+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(S=1),I!==(C=v[h++]||"")&&(b=parseFloat(C)||0,O=C.substr((b+"").length),I.charAt(1)==="="&&(I=Ql(b,I)+O),R=parseFloat(I),N=I.substr((R+"").length),m=Bl.lastIndex-N.length,N||(N=N||Kn.units[r]||O,m===s.length&&(s+=N,u.e+=N)),O!==N&&(b=Wo(e,r,C,N)||0),u._pt={_next:u._pt,p:A||h===1?A:",",s:b,c:R-b,m:S&&S<4||r==="zIndex"?Math.round:0});u.c=m<s.length?s.substring(m,s.length):""}else u.r=r==="display"&&s==="none"?zN:UN;return rN.test(s)&&(u.e=0),this._pt=u,u},sb={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},p9=function(e){var r=e.split(" "),n=r[0],s=r[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),r[0]=sb[n]||n,r[1]=sb[s]||s,r.join(" ")},g9=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var n=r.t,s=n.style,i=r.u,l=n._gsap,u,m,h;if(i==="all"||i===!0)s.cssText="",m=1;else for(i=i.split(","),h=i.length;--h>-1;)u=i[h],qi[u]&&(m=1,u=u==="transformOrigin"?Mn:Qt),Ha(n,u);m&&(Ha(n,Qt),l&&(l.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",xd(n,1),l.uncache=1,VN(s)))}},Yh={clearProps:function(e,r,n,s,i){if(i.data!=="isFromStart"){var l=e._pt=new On(e._pt,r,n,0,0,g9);return l.u=s,l.pr=-10,l.tween=i,e._props.push(n),1}}},gd=[1,0,0,1,0,0],YN={},qN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},ib=function(e){var r=ps(e,Qt);return qN(r)?gd:r.substr(7).match(tN).map(hr)},Iy=function(e,r){var n=e._gsap||Ma(e),s=e.style,i=ib(e),l,u,m,h;return n.svg&&e.getAttribute("transform")?(m=e.transform.baseVal.consolidate().matrix,i=[m.a,m.b,m.c,m.d,m.e,m.f],i.join(",")==="1,0,0,1,0,0"?gd:i):(i===gd&&!e.offsetParent&&e!==Zl&&!n.svg&&(m=s.display,s.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,u=e.nextElementSibling,Zl.appendChild(e)),i=ib(e),m?s.display=m:Ha(e,"display"),h&&(u?l.insertBefore(e,u):l?l.appendChild(e):Zl.removeChild(e))),r&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},hg=function(e,r,n,s,i,l){var u=e._gsap,m=i||Iy(e,!0),h=u.xOrigin||0,x=u.yOrigin||0,y=u.xOffset||0,v=u.yOffset||0,b=m[0],S=m[1],C=m[2],I=m[3],R=m[4],A=m[5],N=r.split(" "),O=parseFloat(N[0])||0,k=parseFloat(N[1])||0,F,B,P,j;n?m!==gd&&(B=b*I-S*C)&&(P=O*(I/B)+k*(-C/B)+(C*A-I*R)/B,j=O*(-S/B)+k*(b/B)-(b*A-S*R)/B,O=P,k=j):(F=WN(e),O=F.x+(~N[0].indexOf("%")?O/100*F.width:O),k=F.y+(~(N[1]||N[0]).indexOf("%")?k/100*F.height:k)),s||s!==!1&&u.smooth?(R=O-h,A=k-x,u.xOffset=y+(R*b+A*C)-R,u.yOffset=v+(R*S+A*I)-A):u.xOffset=u.yOffset=0,u.xOrigin=O,u.yOrigin=k,u.smooth=!!s,u.origin=r,u.originIsAbsolute=!!n,e.style[Mn]="0px 0px",l&&(So(l,u,"xOrigin",h,O),So(l,u,"yOrigin",x,k),So(l,u,"xOffset",y,u.xOffset),So(l,u,"yOffset",v,u.yOffset)),e.setAttribute("data-svg-origin",O+" "+k)},xd=function(e,r){var n=e._gsap||new ON(e);if("x"in n&&!r&&!n.uncache)return n;var s=e.style,i=n.scaleX<0,l="px",u="deg",m=getComputedStyle(e),h=ps(e,Mn)||"0",x,y,v,b,S,C,I,R,A,N,O,k,F,B,P,j,W,Y,z,X,G,H,te,J,Z,K,ne,pe,ae,le,fe,ze;return x=y=v=C=I=R=A=N=O=0,b=S=1,n.svg=!!(e.getCTM&&GN(e)),m.translate&&((m.translate!=="none"||m.scale!=="none"||m.rotate!=="none")&&(s[Qt]=(m.translate!=="none"?"translate3d("+(m.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(m.rotate!=="none"?"rotate("+m.rotate+") ":"")+(m.scale!=="none"?"scale("+m.scale.split(" ").join(",")+") ":"")+(m[Qt]!=="none"?m[Qt]:"")),s.scale=s.rotate=s.translate="none"),B=Iy(e,n.svg),n.svg&&(n.uncache?(Z=e.getBBox(),h=n.xOrigin-Z.x+"px "+(n.yOrigin-Z.y)+"px",J=""):J=!r&&e.getAttribute("data-svg-origin"),hg(e,J||h,!!J||n.originIsAbsolute,n.smooth!==!1,B)),k=n.xOrigin||0,F=n.yOrigin||0,B!==gd&&(Y=B[0],z=B[1],X=B[2],G=B[3],x=H=B[4],y=te=B[5],B.length===6?(b=Math.sqrt(Y*Y+z*z),S=Math.sqrt(G*G+X*X),C=Y||z?wl(z,Y)*ga:0,A=X||G?wl(X,G)*ga+C:0,A&&(S*=Math.abs(Math.cos(A*Jl))),n.svg&&(x-=k-(k*Y+F*X),y-=F-(k*z+F*G))):(ze=B[6],le=B[7],ne=B[8],pe=B[9],ae=B[10],fe=B[11],x=B[12],y=B[13],v=B[14],P=wl(ze,ae),I=P*ga,P&&(j=Math.cos(-P),W=Math.sin(-P),J=H*j+ne*W,Z=te*j+pe*W,K=ze*j+ae*W,ne=H*-W+ne*j,pe=te*-W+pe*j,ae=ze*-W+ae*j,fe=le*-W+fe*j,H=J,te=Z,ze=K),P=wl(-X,ae),R=P*ga,P&&(j=Math.cos(-P),W=Math.sin(-P),J=Y*j-ne*W,Z=z*j-pe*W,K=X*j-ae*W,fe=G*W+fe*j,Y=J,z=Z,X=K),P=wl(z,Y),C=P*ga,P&&(j=Math.cos(P),W=Math.sin(P),J=Y*j+z*W,Z=H*j+te*W,z=z*j-Y*W,te=te*j-H*W,Y=J,H=Z),I&&Math.abs(I)+Math.abs(C)>359.9&&(I=C=0,R=180-R),b=hr(Math.sqrt(Y*Y+z*z+X*X)),S=hr(Math.sqrt(te*te+ze*ze)),P=wl(H,te),A=Math.abs(P)>2e-4?P*ga:0,O=fe?1/(fe<0?-fe:fe):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!qN(ps(e,Qt)),J&&e.setAttribute("transform",J))),Math.abs(A)>90&&Math.abs(A)<270&&(i?(b*=-1,A+=C<=0?180:-180,C+=C<=0?180:-180):(S*=-1,A+=A<=0?180:-180)),r=r||n.uncache,n.x=x-((n.xPercent=x&&(!r&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-x)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=y-((n.yPercent=y&&(!r&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=v+l,n.scaleX=hr(b),n.scaleY=hr(S),n.rotation=hr(C)+u,n.rotationX=hr(I)+u,n.rotationY=hr(R)+u,n.skewX=A+u,n.skewY=N+u,n.transformPerspective=O+l,(n.zOrigin=parseFloat(h.split(" ")[2])||!r&&n.zOrigin||0)&&(s[Mn]=qh(h)),n.xOffset=n.yOffset=0,n.force3D=Kn.force3D,n.renderTransform=n.svg?y9:$N?XN:x9,n.uncache=0,n},qh=function(e){return(e=e.split(" "))[0]+" "+e[1]},bp=function(e,r,n){var s=Zr(r);return hr(parseFloat(r)+parseFloat(Wo(e,"x",n+"px",s)))+s},x9=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,XN(e,r)},da="0deg",cu="0px",fa=") ",XN=function(e,r){var n=r||this,s=n.xPercent,i=n.yPercent,l=n.x,u=n.y,m=n.z,h=n.rotation,x=n.rotationY,y=n.rotationX,v=n.skewX,b=n.skewY,S=n.scaleX,C=n.scaleY,I=n.transformPerspective,R=n.force3D,A=n.target,N=n.zOrigin,O="",k=R==="auto"&&e&&e!==1||R===!0;if(N&&(y!==da||x!==da)){var F=parseFloat(x)*Jl,B=Math.sin(F),P=Math.cos(F),j;F=parseFloat(y)*Jl,j=Math.cos(F),l=bp(A,l,B*j*-N),u=bp(A,u,-Math.sin(F)*-N),m=bp(A,m,P*j*-N+N)}I!==cu&&(O+="perspective("+I+fa),(s||i)&&(O+="translate("+s+"%, "+i+"%) "),(k||l!==cu||u!==cu||m!==cu)&&(O+=m!==cu||k?"translate3d("+l+", "+u+", "+m+") ":"translate("+l+", "+u+fa),h!==da&&(O+="rotate("+h+fa),x!==da&&(O+="rotateY("+x+fa),y!==da&&(O+="rotateX("+y+fa),(v!==da||b!==da)&&(O+="skew("+v+", "+b+fa),(S!==1||C!==1)&&(O+="scale("+S+", "+C+fa),A.style[Qt]=O||"translate(0, 0)"},y9=function(e,r){var n=r||this,s=n.xPercent,i=n.yPercent,l=n.x,u=n.y,m=n.rotation,h=n.skewX,x=n.skewY,y=n.scaleX,v=n.scaleY,b=n.target,S=n.xOrigin,C=n.yOrigin,I=n.xOffset,R=n.yOffset,A=n.forceCSS,N=parseFloat(l),O=parseFloat(u),k,F,B,P,j;m=parseFloat(m),h=parseFloat(h),x=parseFloat(x),x&&(x=parseFloat(x),h+=x,m+=x),m||h?(m*=Jl,h*=Jl,k=Math.cos(m)*y,F=Math.sin(m)*y,B=Math.sin(m-h)*-v,P=Math.cos(m-h)*v,h&&(x*=Jl,j=Math.tan(h-x),j=Math.sqrt(1+j*j),B*=j,P*=j,x&&(j=Math.tan(x),j=Math.sqrt(1+j*j),k*=j,F*=j)),k=hr(k),F=hr(F),B=hr(B),P=hr(P)):(k=y,P=v,F=B=0),(N&&!~(l+"").indexOf("px")||O&&!~(u+"").indexOf("px"))&&(N=Wo(b,"x",l,"px"),O=Wo(b,"y",u,"px")),(S||C||I||R)&&(N=hr(N+S-(S*k+C*B)+I),O=hr(O+C-(S*F+C*P)+R)),(s||i)&&(j=b.getBBox(),N=hr(N+s/100*j.width),O=hr(O+i/100*j.height)),j="matrix("+k+","+F+","+B+","+P+","+N+","+O+")",b.setAttribute("transform",j),A&&(b.style[Qt]=j)},w9=function(e,r,n,s,i){var l=360,u=kr(i),m=parseFloat(i)*(u&&~i.indexOf("rad")?ga:1),h=m-s,x=s+h+"deg",y,v;return u&&(y=i.split("_")[1],y==="short"&&(h%=l,h!==h%(l/2)&&(h+=h<0?l:-l)),y==="cw"&&h<0?h=(h+l*J2)%l-~~(h/l)*l:y==="ccw"&&h>0&&(h=(h-l*J2)%l-~~(h/l)*l)),e._pt=v=new On(e._pt,r,n,s,h,r9),v.e=x,v.u="deg",e._props.push(n),v},ob=function(e,r){for(var n in r)e[n]=r[n];return e},v9=function(e,r,n){var s=ob({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",l=n.style,u,m,h,x,y,v,b,S;s.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),l[Qt]=r,u=xd(n,1),Ha(n,Qt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[Qt],l[Qt]=r,u=xd(n,1),l[Qt]=h);for(m in qi)h=s[m],x=u[m],h!==x&&i.indexOf(m)<0&&(b=Zr(h),S=Zr(x),y=b!==S?Wo(n,m,h,S):parseFloat(h),v=parseFloat(x),e._pt=new On(e._pt,u,m,y,v-y,ug),e._pt.u=S||0,e._props.push(m));ob(u,s)};Rn("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",s="Bottom",i="Left",l=(e<3?[r,n,s,i]:[r+i,r+n,s+n,s+i]).map(function(u){return e<2?t+u:"border"+u+t});Yh[e>1?"border"+t:t]=function(u,m,h,x,y){var v,b;if(arguments.length<4)return v=l.map(function(S){return ki(u,S,h)}),b=v.join(" "),b.split(v[0]).length===5?v[0]:b;v=(x+"").split(" "),b={},l.forEach(function(S,C){return b[S]=v[C]=v[C]||v[(C-1)/2|0]}),u.init(m,b,y)}});var KN={name:"css",register:fg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,n,s,i){var l=this._props,u=e.style,m=n.vars.startAt,h,x,y,v,b,S,C,I,R,A,N,O,k,F,B,P;Ay||fg(),this.styles=this.styles||HN(e),P=this.styles.props,this.tween=n;for(C in r)if(C!=="autoRound"&&(x=r[C],!(Bn[C]&&MN(C,r,n,s,e,i)))){if(b=typeof x,S=Yh[C],b==="function"&&(x=x.call(n,s,e,i),b=typeof x),b==="string"&&~x.indexOf("random(")&&(x=hd(x)),S)S(this,e,C,x,n)&&(B=1);else if(C.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(C)+"").trim(),x+="",Lo.lastIndex=0,Lo.test(h)||(I=Zr(h),R=Zr(x)),R?I!==R&&(h=Wo(e,C,h,R)+R):I&&(x+=I),this.add(u,"setProperty",h,x,s,i,0,0,C),l.push(C),P.push(C,0,u[C]);else if(b!=="undefined"){if(m&&C in m?(h=typeof m[C]=="function"?m[C].call(n,s,e,i):m[C],kr(h)&&~h.indexOf("random(")&&(h=hd(h)),Zr(h+"")||h==="auto"||(h+=Kn.units[C]||Zr(ki(e,C))||""),(h+"").charAt(1)==="="&&(h=ki(e,C))):h=ki(e,C),v=parseFloat(h),A=b==="string"&&x.charAt(1)==="="&&x.substr(0,2),A&&(x=x.substr(2)),y=parseFloat(x),C in hi&&(C==="autoAlpha"&&(v===1&&ki(e,"visibility")==="hidden"&&y&&(v=0),P.push("visibility",0,u.visibility),So(this,u,"visibility",v?"inherit":"hidden",y?"inherit":"hidden",!y)),C!=="scale"&&C!=="transform"&&(C=hi[C],~C.indexOf(",")&&(C=C.split(",")[0]))),N=C in qi,N){if(this.styles.save(C),b==="string"&&x.substring(0,6)==="var(--"&&(x=ps(e,x.substring(4,x.indexOf(")"))),y=parseFloat(x)),O||(k=e._gsap,k.renderTransform&&!r.parseTransform||xd(e,r.parseTransform),F=r.smoothOrigin!==!1&&k.smooth,O=this._pt=new On(this._pt,u,Qt,0,1,k.renderTransform,k,0,-1),O.dep=1),C==="scale")this._pt=new On(this._pt,k,"scaleY",k.scaleY,(A?Ql(k.scaleY,A+y):y)-k.scaleY||0,ug),this._pt.u=0,l.push("scaleY",C),C+="X";else if(C==="transformOrigin"){P.push(Mn,0,u[Mn]),x=p9(x),k.svg?hg(e,x,0,F,0,this):(R=parseFloat(x.split(" ")[2])||0,R!==k.zOrigin&&So(this,k,"zOrigin",k.zOrigin,R),So(this,u,C,qh(h),qh(x)));continue}else if(C==="svgOrigin"){hg(e,x,1,F,0,this);continue}else if(C in YN){w9(this,k,C,v,A?Ql(v,A+x):x);continue}else if(C==="smoothOrigin"){So(this,k,"smooth",k.smooth,x);continue}else if(C==="force3D"){k[C]=x;continue}else if(C==="transform"){v9(this,x,e);continue}}else C in u||(C=Ac(C)||C);if(N||(y||y===0)&&(v||v===0)&&!t9.test(x)&&C in u)I=(h+"").substr((v+"").length),y||(y=0),R=Zr(x)||(C in Kn.units?Kn.units[C]:I),I!==R&&(v=Wo(e,C,h,R)),this._pt=new On(this._pt,N?k:u,C,v,(A?Ql(v,A+y):y)-v,!N&&(R==="px"||C==="zIndex")&&r.autoRound!==!1?s9:ug),this._pt.u=R||0,I!==R&&R!=="%"&&(this._pt.b=h,this._pt.r=n9);else if(C in u)m9.call(this,e,C,h,A?A+x:x);else if(C in e)this.add(e,C,h||e[C],A?A+x:x,s,i);else if(C!=="parseTransform"){gy(C,x);continue}N||(C in u?P.push(C,0,u[C]):typeof e[C]=="function"?P.push(C,2,e[C]()):P.push(C,1,h||e[C])),l.push(C)}}B&&BN(this)},render:function(e,r){if(r.tween._time||!Ny())for(var n=r._pt;n;)n.r(e,n.d),n=n._next;else r.styles.revert()},get:ki,aliases:hi,getSetter:function(e,r,n){var s=hi[r];return s&&s.indexOf(",")<0&&(r=s),r in qi&&r!==Mn&&(e._gsap.x||ki(e,"x"))?n&&Z2===n?r==="scale"?l9:a9:(Z2=n||{})&&(r==="scale"?c9:u9):e.style&&!hy(e.style[r])?i9:~r.indexOf("-")?o9:Ey(e,r)},core:{_removeProperty:Ha,_getMatrix:Iy}};jn.utils.checkPrefix=Ac;jn.core.getStyleSaver=HN;(function(t,e,r,n){var s=Rn(t+","+e+","+r,function(i){qi[i]=1});Rn(e,function(i){Kn.units[i]="deg",YN[i]=1}),hi[s[13]]=t+","+e,Rn(n,function(i){var l=i.split(":");hi[l[1]]=s[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Rn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Kn.units[t]="px"});jn.registerPlugin(KN);var Mi=jn.registerPlugin(KN)||jn;Mi.core.Tween;const Ry="/ALAN_NEW/assets/ALANLOGO-CiZZgqjV.png",b9="/ALAN_NEW/assets/onbarding1-DYox49Gq.png",_9="/ALAN_NEW/assets/onbarding2-vDKFdda2.png",C9="/ALAN_NEW/assets/onbarding3-D_6Pmr_M.png",uu=[{title:"Discover Premium Dining",description:"Browse the finest restaurants in Yangon with detailed menus and exclusive offerings",image:b9},{title:"Prepay with Ease",description:"Secure your table and meals in advance with convenient payment options",image:_9},{title:"Skip the Wait",description:"Show your QR code and enjoy your meal immediately upon arrival",image:C9}],E9=()=>{const[t,e]=E.useState(0),r=rn(),n=E.useRef(null),s=E.useRef(null),i=E.useRef(null),l=E.useRef(null);E.useEffect(()=>{if(!n.current)return;const x=Mi.timeline();return x.fromTo(s.current,{opacity:0,y:10,scale:.98},{opacity:1,y:0,scale:1,duration:.4,ease:"power2.out"}).fromTo(i.current,{opacity:0,y:12},{opacity:1,y:0,duration:.45,ease:"power2.out"},"-=0.15").fromTo(l.current,{opacity:0,y:16,rotate:-2},{opacity:1,y:0,rotate:0,duration:.5,ease:"power2.out"},"-=0.2"),()=>{x.kill()}},[t]);const u=()=>{t<uu.length-1?e(t+1):r("/auth")},m=()=>{r("/auth")},h=uu[t];return d.jsxs("div",{ref:n,className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col",children:[d.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:d.jsxs("div",{className:"w-full max-w-md space-y-8",children:[d.jsx("div",{className:"flex justify-center",ref:s,children:d.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full luxury-gradient flex items-center justify-center luxury-shadow overflow-hidden",children:d.jsx("img",{src:Ry,alt:"ALAN Logo",className:"w-16 h-16 object-contain drop-shadow"})})}),d.jsxs("div",{className:"text-center space-y-4",ref:i,children:[d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:h.title}),d.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:h.description})]}),d.jsx("div",{className:"flex justify-center",ref:l,children:d.jsx("div",{className:"w-full flex items-center justify-center",children:d.jsx("img",{src:h.image,alt:"Onboarding illustration",className:"max-h-56 sm:max-h-64 object-contain"})})}),d.jsx("div",{className:"flex justify-center gap-2",children:uu.map((x,y)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${y===t?"w-8 bg-primary":"w-2 bg-muted"}`},y))})]})}),d.jsxs("div",{className:"p-6 space-y-3 max-w-md mx-auto w-full",children:[d.jsxs(De,{onClick:u,className:"w-full h-12 text-base font-medium luxury-gradient",size:"lg",children:[t<uu.length-1?"Next":"Get Started",d.jsx(PE,{className:"ml-2 h-5 w-5"})]}),t<uu.length-1&&d.jsx(De,{onClick:m,variant:"ghost",className:"w-full h-12 text-base font-medium",size:"lg",children:"Skip"})]})]})},ot=E.forwardRef(({className:t,type:e,...r},n)=>d.jsx("input",{type:e,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ot.displayName="Input";var S9="Label",QN=E.forwardRef((t,e)=>d.jsx(Le.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));QN.displayName=S9;var ZN=QN;const A9=S0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=E.forwardRef(({className:t,...e},r)=>d.jsx(ZN,{ref:r,className:Te(A9(),t),...e}));Qe.displayName=ZN.displayName;const $e=E.forwardRef(({className:t,...e},r)=>d.jsx("div",{ref:r,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));$e.displayName="Card";const ur=E.forwardRef(({className:t,...e},r)=>d.jsx("div",{ref:r,className:Te("flex flex-col space-y-1.5 p-6",t),...e}));ur.displayName="CardHeader";const pr=E.forwardRef(({className:t,...e},r)=>d.jsx("h3",{ref:r,className:Te("text-2xl font-semibold leading-none tracking-tight",t),...e}));pr.displayName="CardTitle";const Bi=E.forwardRef(({className:t,...e},r)=>d.jsx("p",{ref:r,className:Te("text-sm text-muted-foreground",t),...e}));Bi.displayName="CardDescription";const Ct=E.forwardRef(({className:t,...e},r)=>d.jsx("div",{ref:r,className:Te("p-6 pt-0",t),...e}));Ct.displayName="CardContent";const N9=E.forwardRef(({className:t,...e},r)=>d.jsx("div",{ref:r,className:Te("flex items-center p-6 pt-0",t),...e}));N9.displayName="CardFooter";var T9=E.createContext(void 0);function Uc(t){const e=E.useContext(T9);return t||e||"ltr"}var _p="rovingFocusGroup.onEntryFocus",I9={bubbles:!1,cancelable:!0},Pd="RovingFocusGroup",[mg,JN,R9]=_0(Pd),[O9,zc]=pn(Pd,[R9]),[M9,j9]=O9(Pd),eT=E.forwardRef((t,e)=>d.jsx(mg.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(mg.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(k9,{...t,ref:e})})}));eT.displayName=Pd;var k9=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:m,onEntryFocus:h,preventScrollOnEntryFocus:x=!1,...y}=t,v=E.useRef(null),b=Je(e,v),S=Uc(i),[C,I]=yi({prop:l,defaultProp:u??null,onChange:m,caller:Pd}),[R,A]=E.useState(!1),N=cr(h),O=JN(r),k=E.useRef(!1),[F,B]=E.useState(0);return E.useEffect(()=>{const P=v.current;if(P)return P.addEventListener(_p,N),()=>P.removeEventListener(_p,N)},[N]),d.jsx(M9,{scope:r,orientation:n,dir:S,loop:s,currentTabStopId:C,onItemFocus:E.useCallback(P=>I(P),[I]),onItemShiftTab:E.useCallback(()=>A(!0),[]),onFocusableItemAdd:E.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:E.useCallback(()=>B(P=>P-1),[]),children:d.jsx(Le.div,{tabIndex:R||F===0?-1:0,"data-orientation":n,...y,ref:b,style:{outline:"none",...t.style},onMouseDown:Ae(t.onMouseDown,()=>{k.current=!0}),onFocus:Ae(t.onFocus,P=>{const j=!k.current;if(P.target===P.currentTarget&&j&&!R){const W=new CustomEvent(_p,I9);if(P.currentTarget.dispatchEvent(W),!W.defaultPrevented){const Y=O().filter(te=>te.focusable),z=Y.find(te=>te.active),X=Y.find(te=>te.id===C),H=[z,X,...Y].filter(Boolean).map(te=>te.ref.current);nT(H,x)}}k.current=!1}),onBlur:Ae(t.onBlur,()=>A(!1))})})}),tT="RovingFocusGroupItem",rT=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:l,...u}=t,m=$s(),h=i||m,x=j9(tT,r),y=x.currentTabStopId===h,v=JN(r),{onFocusableItemAdd:b,onFocusableItemRemove:S,currentTabStopId:C}=x;return E.useEffect(()=>{if(n)return b(),()=>S()},[n,b,S]),d.jsx(mg.ItemSlot,{scope:r,id:h,focusable:n,active:s,children:d.jsx(Le.span,{tabIndex:y?0:-1,"data-orientation":x.orientation,...u,ref:e,onMouseDown:Ae(t.onMouseDown,I=>{n?x.onItemFocus(h):I.preventDefault()}),onFocus:Ae(t.onFocus,()=>x.onItemFocus(h)),onKeyDown:Ae(t.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){x.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const R=L9(I,x.orientation,x.dir);if(R!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let N=v().filter(O=>O.focusable).map(O=>O.ref.current);if(R==="last")N.reverse();else if(R==="prev"||R==="next"){R==="prev"&&N.reverse();const O=N.indexOf(I.currentTarget);N=x.loop?B9(N,O+1):N.slice(O+1)}setTimeout(()=>nT(N))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:C!=null}):l})})});rT.displayName=tT;var P9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function L9(t,e,r){const n=D9(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return P9[n]}function nT(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function B9(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Oy=eT,My=rT,H0="Tabs",[F9,aH]=pn(H0,[zc]),sT=zc(),[U9,jy]=F9(H0),iT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:u,activationMode:m="automatic",...h}=t,x=Uc(u),[y,v]=yi({prop:n,onChange:s,defaultProp:i??"",caller:H0});return d.jsx(U9,{scope:r,baseId:$s(),value:y,onValueChange:v,orientation:l,dir:x,activationMode:m,children:d.jsx(Le.div,{dir:x,"data-orientation":l,...h,ref:e})})});iT.displayName=H0;var oT="TabsList",aT=E.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=jy(oT,r),l=sT(r);return d.jsx(Oy,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:d.jsx(Le.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});aT.displayName=oT;var lT="TabsTrigger",cT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,l=jy(lT,r),u=sT(r),m=fT(l.baseId,n),h=hT(l.baseId,n),x=n===l.value;return d.jsx(My,{asChild:!0,...u,focusable:!s,active:x,children:d.jsx(Le.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:m,...i,ref:e,onMouseDown:Ae(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?l.onValueChange(n):y.preventDefault()}),onKeyDown:Ae(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&l.onValueChange(n)}),onFocus:Ae(t.onFocus,()=>{const y=l.activationMode!=="manual";!x&&!s&&y&&l.onValueChange(n)})})})});cT.displayName=lT;var uT="TabsContent",dT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...l}=t,u=jy(uT,r),m=fT(u.baseId,n),h=hT(u.baseId,n),x=n===u.value,y=E.useRef(x);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),d.jsx(tn,{present:s||x,children:({present:v})=>d.jsx(Le.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!v,id:h,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&i})})});dT.displayName=uT;function fT(t,e){return`${t}-trigger-${e}`}function hT(t,e){return`${t}-content-${e}`}var z9=iT,mT=aT,pT=cT,gT=dT;const xT=z9,ky=E.forwardRef(({className:t,...e},r)=>d.jsx(mT,{ref:r,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));ky.displayName=mT.displayName;const yd=E.forwardRef(({className:t,...e},r)=>d.jsx(pT,{ref:r,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=inactive]:text-muted-foreground/70 data-[state=inactive]:hover:text-muted-foreground",t),...e}));yd.displayName=pT.displayName;const pg=E.forwardRef(({className:t,...e},r)=>d.jsx(gT,{ref:r,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=inactive]:hidden",t),...e}));pg.displayName=gT.displayName;const V9=()=>{const[t,e]=E.useState(!1),{signUp:r,signIn:n,user:s,userRole:i}=gn(),l=rn(),[u,m]=E.useState("signin"),h=E.useRef(null),x=E.useRef(null),y=E.useRef(null);E.useRef(null),E.useEffect(()=>{Mi.timeline({defaults:{ease:"power2.out"}}).fromTo(h.current,{opacity:0,y:-12,scale:.92},{opacity:1,y:0,scale:1,duration:.5}).fromTo(x.current,{opacity:0,y:16},{opacity:1,y:0,duration:.5},"-=0.25")},[]),E.useEffect(()=>{const A=y.current;if(!A)return;const N=A.querySelector('[data-state="active"]');if(!N)return;const O=N.scrollHeight,k=A.offsetHeight;Mi.set(A,{height:k}),Mi.to(A,{height:O,duration:.45,ease:"power2.out",onComplete:()=>Mi.set(A,{height:"auto"})}),Mi.fromTo(N,{opacity:0,y:8},{opacity:1,y:0,duration:.35,ease:"power2.out"})},[u]),E.useEffect(()=>{const A=y.current;if(!A)return;const N=A.querySelector('[data-state="active"]');N&&(Mi.set(A,{height:N.scrollHeight}),Mi.set(A,{height:"auto"}))},[]),E.useEffect(()=>{s&&i&&l(i==="admin"?"/admin":i==="restaurant_owner"?"/dashboard":"/home")},[s,i,l]);const[v,b]=E.useState({email:"",password:"",fullName:"",phone:""}),[S,C]=E.useState({email:"",password:""}),I=async A=>{A.preventDefault(),e(!0);const{error:N}=await r(v.email,v.password,v.fullName,v.phone);N?we.error(N.message||"Failed to sign up"):(we.success("Account created! Welcome to ALAN"),l("/home")),e(!1)},R=async A=>{A.preventDefault(),e(!0);const{error:N}=await n(S.email,S.password);N?we.error(N.message||"Failed to sign in"):we.success("Signing in..."),e(!1)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:d.jsxs("div",{className:"w-full max-w-md space-y-6",children:[d.jsxs("div",{className:"text-center space-y-2",ref:h,children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center overflow-hidden",children:d.jsx("img",{src:Ry,alt:"ALAN Logo",className:"w-10 h-10 object-contain drop-shadow"})})}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ALAN"}),d.jsx("p",{className:"text-muted-foreground",children:"Luxury dining made simple"})]}),d.jsxs($e,{className:"border-border/50 luxury-shadow",ref:x,children:[d.jsxs(ur,{children:[d.jsx(pr,{children:"Welcome"}),d.jsx(Bi,{children:"Sign in or create an account to continue"})]}),d.jsx(Ct,{className:"px-6 pt-2 pb-6",children:d.jsxs(xT,{value:u,onValueChange:A=>m(A),className:"w-full",children:[d.jsxs(ky,{className:"grid w-full grid-cols-2",children:[d.jsx(yd,{value:"signin",children:"Sign In"}),d.jsx(yd,{value:"signup",children:"Sign Up"})]}),d.jsxs("div",{ref:y,className:"relative overflow-visible box-border px-3 sm:px-4 pb-5",children:[d.jsx(pg,{value:"signin",forceMount:!0,children:d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signin-email",children:"Email"}),d.jsx(ot,{id:"signin-email",type:"email",placeholder:"your@email.com",value:S.email,onChange:A=>C({...S,email:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signin-password",children:"Password"}),d.jsx(ot,{id:"signin-password",type:"password",placeholder:"",value:S.password,onChange:A=>C({...S,password:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsx(De,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Signing in...":"Sign In"})]})}),d.jsx(pg,{value:"signup",forceMount:!0,children:d.jsxs("form",{onSubmit:I,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signup-name",children:"Full Name"}),d.jsx(ot,{id:"signup-name",type:"text",placeholder:"John Doe",value:v.fullName,onChange:A=>b({...v,fullName:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signup-phone",children:"Phone"}),d.jsx(ot,{id:"signup-phone",type:"tel",placeholder:"+95 9 XXX XXX XXX",value:v.phone,onChange:A=>b({...v,phone:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signup-email",children:"Email"}),d.jsx(ot,{id:"signup-email",type:"email",placeholder:"your@email.com",value:v.email,onChange:A=>b({...v,email:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"signup-password",children:"Password"}),d.jsx(ot,{id:"signup-password",type:"password",placeholder:"",value:v.password,onChange:A=>b({...v,password:A.target.value}),required:!0,className:"h-12 px-4"})]}),d.jsx(De,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Creating account...":"Create Account"})]})})]})]})})]})]})})},H9=S0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function fn({className:t,variant:e,...r}){return d.jsx("div",{className:Te(H9({variant:e}),t),...r})}const $0=()=>{const t=Ko(),e=r=>t.pathname===r;return d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card/95 border-t border-border glass-effect z-50 backdrop-blur-xl",children:d.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[d.jsxs(_f,{to:"/home",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/home")?"text-primary":"text-muted-foreground"}`,children:[d.jsx(UE,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),d.jsxs(_f,{to:"/orders",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/orders")?"text-primary":"text-muted-foreground"}`,children:[d.jsx(VE,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),d.jsxs(_f,{to:"/blog",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/blog")?"text-primary":"text-muted-foreground"}`,children:[d.jsx(Rx,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),d.jsxs(_f,{to:"/profile",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/profile")?"text-primary":"text-muted-foreground"}`,children:[d.jsx(zs,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})},$9=(t,e)=>{if(!t||e<=0)return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"};switch(t){case"Explorer":return{label:"Explorer",description:"You are discovering new places. Keep exploring.",icon:"compass"};case"Preferred":return{label:"Preferred",description:"A valued guest with consistent fine dining choices.",icon:"star"};case"Loyal Customer":return{label:"Loyal Customer",description:"One of our most loyal guests. Thank you for dining with us.",icon:"shield"};case"Super Customer":return{label:"Super Customer",description:"Elite status. Enjoy priority perks and curated experiences.",icon:"crown"};default:return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"}}};function yT(){const{user:t}=gn(),[e,r]=E.useState(null),[n,s]=E.useState(!0);E.useEffect(()=>{(async()=>{if(!t){r(null),s(!1);return}s(!0);const{data:u,error:m}=await ue.from("customer_loyalty_summary").select("*").eq("customer_id",t.id).maybeSingle();if(!m&&u){r({customer_id:u.customer_id,total_points:Number(u.total_points)||0,total_completed_orders:Number(u.total_completed_orders)||0,total_spent:Number(u.total_spent)||0,current_badge:u.current_badge||"Newbie",updated_at:u.updated_at}),s(!1);return}const{data:h,error:x}=await ue.from("orders").select("total_amount, status").eq("customer_id",t.id).eq("status","completed");if(x){console.error("Failed to load loyalty summary:",x),r(null),s(!1);return}const y=(h||[]).reduce((I,R)=>I+(Number(R.total_amount)||0),0),v=(h==null?void 0:h.length)||0,b=Math.floor(y/1e5);let S;v<=0?S="Newbie":v<=4?S="Explorer":v<=9?S="Preferred":v<=29?S="Loyal Customer":S="Super Customer";const C=new Date().toISOString();r({customer_id:t.id,total_points:b,total_completed_orders:v,total_spent:y,current_badge:S,updated_at:C}),s(!1)})()},[t]);const i=$9(e==null?void 0:e.current_badge,(e==null?void 0:e.total_completed_orders)||0);return{loading:n,summary:e,badgeLabel:i.label,badgeDescription:i.description,badgeIcon:i.icon}}function W9({restaurants:t}){const e=rn(),r=E.useRef(null),n=E.useRef(0),s=E.useRef(null),i=(t||[]).filter(l=>l.image).slice(0,20);return E.useEffect(()=>{const l=r.current;if(!l||i.length===0)return;let u=!1,m=0,h=0,x=0,y=0,v=1,b=performance.now();const S=()=>l.scrollWidth-l.clientWidth,C=()=>{const j=S();l.scrollLeft<0&&(l.scrollLeft=0),l.scrollLeft>j&&(l.scrollLeft=j)},I=()=>{s.current!==null&&(cancelAnimationFrame(s.current),s.current=null)},R=()=>{const j=r.current;if(!j){s.current=null;return}const W=performance.now(),Y=W-b;b=W;let z=n.current;if(Math.abs(z)>=.02)j.scrollLeft+=z,C(),z*=.95,n.current=z;else if(n.current=0,!u){const X=S();if(X>0){const H=.02*Y*v;j.scrollLeft+=H,j.scrollLeft<=0?(j.scrollLeft=0,v=1):j.scrollLeft>=X&&(j.scrollLeft=X,v=-1)}}s.current=requestAnimationFrame(R)};I(),b=performance.now(),s.current=requestAnimationFrame(R);const A=j=>{u=!0,I(),m=j.pageX,x=j.pageX,h=l.scrollLeft,y=performance.now(),l.classList.add("cursor-grabbing")},N=j=>{if(u&&(u=!1,l.classList.remove("cursor-grabbing"),C(),j!==null)){const W=performance.now(),Y=j-x,z=W-y||1;let X=-(Y/z)*12;X>40&&(X=40),X<-40&&(X=-40),n.current=X}},O=j=>{N(j.pageX)},k=j=>{if(!u)return;j.preventDefault();const W=j.pageX-m;l.scrollLeft=h-W;const Y=performance.now();x=j.pageX,y=Y},F=j=>{if(!j.touches[0])return;u=!0,I();const W=j.touches[0].pageX;m=W,x=W,h=l.scrollLeft,y=performance.now()},B=j=>{const W=j.changedTouches&&j.changedTouches[0]?j.changedTouches[0].pageX:null;N(W)},P=j=>{if(!u||!j.touches[0])return;const W=j.touches[0].pageX,Y=W-m;l.scrollLeft=h-Y;const z=performance.now();x=W,y=z};return l.addEventListener("mousedown",A),window.addEventListener("mouseup",O),l.addEventListener("mouseleave",O),l.addEventListener("mousemove",k),l.addEventListener("touchstart",F,{passive:!0}),l.addEventListener("touchend",B),l.addEventListener("touchcancel",B),l.addEventListener("touchmove",P,{passive:!1}),()=>{l.removeEventListener("mousedown",A),window.removeEventListener("mouseup",O),l.removeEventListener("mouseleave",O),l.removeEventListener("mousemove",k),l.removeEventListener("touchstart",F),l.removeEventListener("touchend",B),l.removeEventListener("touchcancel",B),l.removeEventListener("touchmove",P),I()}},[i.length]),i.length===0?null:d.jsxs("div",{className:"w-full mt-3 mb-4",children:[d.jsx("div",{ref:r,className:`\r
          mx-auto max-w-md px-4 flex gap-5 overflow-x-auto select-none\r
          snap-x snap-mandatory cursor-grab no-scrollbar\r
        `,style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(l=>d.jsxs("button",{onClick:()=>e(`/restaurant/${l.id}`),className:"relative flex-shrink-0 snap-start group",style:{scrollSnapAlign:"start"},children:[d.jsx("div",{className:`\r
                w-20 h-20 rounded-full overflow-hidden\r
                bg-black/70 border border-yellow-500/40\r
                transition-transform duration-300 ease-out\r
                group-active:scale-95 group-hover:scale-[1.03]\r
              `,children:d.jsx("img",{src:l.image||void 0,alt:l.title,className:"w-full h-full object-cover",loading:"lazy"})}),d.jsx("div",{className:"mt-1.5 w-20 text-center",children:d.jsx("span",{className:"text-[9px] font-semibold text-black block truncate",children:l.title})})]},l.id))}),d.jsx("style",{children:`
          .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .no-scrollbar::-webkit-scrollbar {
            display: none;
          }
        `})]})}const G9=()=>{var ae,le,fe,ze,ve,be,ke,Xe;const[t,e]=E.useState(""),[r,n]=E.useState([]),[s,i]=E.useState(!0),[l,u]=E.useState(!1),[m,h]=E.useState(!1),[x,y]=E.useState([]),[v,b]=E.useState(null),[S,C]=E.useState(null),[I,R]=E.useState(null),[A,N]=E.useState(null),O=rn(),{user:k,signOut:F}=gn(),{loading:B,summary:P,badgeLabel:j,badgeIcon:W}=yT(),Y=((ae=k==null?void 0:k.user_metadata)==null?void 0:ae.full_name)||(k==null?void 0:k.email)||"Guest",z=()=>{const oe=new Date().getHours();return oe<12?"Good morning":oe<18?"Good afternoon":"Good evening"},X=async()=>{await F(),u(!1),O("/auth")},G=()=>{const oe="w-3.5 h-3.5 text-yellow-300 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]";switch(W){case"compass":return d.jsx(BE,{className:oe});case"star":return d.jsx(gc,{className:oe});case"shield":return d.jsx(Ih,{className:oe});case"crown":return d.jsx(FE,{className:oe});case"sparkles":default:return d.jsx(ed,{className:oe})}},H=async()=>{if(!k)return;const{data:oe,error:Ee}=await ue.from("customer_notifications").select("id, order_id, title, message, status, created_at").eq("customer_id",k.id).order("created_at",{ascending:!1}).limit(15);if(Ee){console.error("Failed to load notifications",Ee);return}y(oe||[])},te=()=>{const oe=new Audio("/sound/notification.mp3");return oe.preload="auto",oe},J=()=>{try{te().play().catch(()=>{})}catch{}};E.useEffect(()=>{if(!k){y([]);return}H();const oe=ue.channel(`customer-notifications-${k.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"customer_notifications",filter:`customer_id=eq.${k.id}`},async Ee=>{const je=Ee.new,Me={id:je.id,order_id:je.order_id,title:je.title,message:je.message,status:je.status,created_at:je.created_at};y(gt=>gt.some(St=>St.id===Me.id)?gt:[Me,...gt].slice(0,20)),J()}).subscribe();return()=>{ue.removeChannel(oe)}},[k==null?void 0:k.id]);const Z=x.filter(oe=>oe.status==="unread").length;E.useEffect(()=>{if(!l&&!m)return;const oe=Ee=>{const je=Ee.target;l&&I&&!I.contains(je)&&u(!1),m&&A&&!A.contains(je)&&h(!1)};return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[l,m,I,A]);const K=async oe=>{if(typeof window<"u"&&(window.__alan_activeRatingNotificationId=oe.id,window.__alan_activeRatingNotificationOrderId=oe.order_id||null),b(oe),C(null),h(!1),oe.order_id)try{const{data:Ee,error:je}=await ue.from("orders").select(`
            id,
            status,
            order_type,
            total_amount,
            created_at,
            order_items,
            restaurants (
              name,
              image_url,
              address
            )
          `).eq("id",oe.order_id).single();!je&&Ee&&C(Ee)}catch(Ee){console.error("Failed to load order summary for notification",Ee)}if(oe.status==="unread"){y(je=>je.map(Me=>Me.id===oe.id?{...Me,status:"read"}:Me));const{error:Ee}=await ue.from("customer_notifications").update({status:"read"}).eq("id",oe.id);Ee&&console.error("Failed to mark notification read",Ee)}};E.useEffect(()=>{ne()},[]);const ne=async()=>{try{const{data:oe,error:Ee}=await ue.from("restaurants").select("*").order("rating",{ascending:!1});if(Ee)throw Ee;n(oe||[])}catch(oe){console.error("Error fetching restaurants:",oe),we.error("Failed to load restaurants")}finally{i(!1)}},pe=r.filter(oe=>{var Ee;return oe.name.toLowerCase().includes(t.toLowerCase())||(((Ee=oe.cuisine_type)==null?void 0:Ee.toLowerCase())||"").includes(t.toLowerCase())});return d.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[d.jsx("div",{className:"sticky top-0 z-40 py-2 bg-background/60 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"mx-auto max-w-md px-4",children:[d.jsx("div",{className:"luxury-gradient text-white rounded-xl shadow-md",children:d.jsxs("div",{className:"px-4 py-2 flex items-center justify-between gap-3",children:[d.jsx("img",{src:Ry,alt:"ALAN Logo",className:"h-7 w-auto object-contain drop-shadow"}),d.jsxs("div",{className:"flex items-center gap-2 relative",children:[k&&d.jsxs("div",{className:"relative",ref:oe=>N(oe),children:[d.jsxs("button",{onClick:()=>{h(oe=>!oe),u(!1)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 transition-all","aria-label":"Notifications",children:[d.jsx(jE,{className:"h-4 w-4 text-white"}),Z>0&&d.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[14px] h-[14px] px-[3px] rounded-full bg-red-500 text-[9px] leading-[14px] text-white flex items-center justify-center",children:Z>9?"9+":Z})]}),m&&d.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[d.jsxs("div",{className:"px-3 py-2 border-b border-border/40 flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[11px] font-semibold text-foreground",children:"Activity"}),d.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Loyalty & orders"})]}),x.length>0&&d.jsx("button",{onClick:async()=>{const oe=x.filter(je=>je.status==="unread").map(je=>je.id);if(oe.length===0)return;const{error:Ee}=await ue.from("customer_notifications").update({status:"read"}).in("id",oe);Ee?console.error("Failed to mark all read",Ee):y(je=>je.map(Me=>oe.includes(Me.id)?{...Me,status:"read"}:Me))},className:"text-[8px] px-2 py-1 rounded-full bg-primary/5 text-primary hover:bg-primary/10",children:"Mark all as read"})]}),d.jsx("div",{className:"max-h-72 overflow-y-auto",children:x.length===0?d.jsx("div",{className:"px-3 py-4 text-[10px] text-muted-foreground",children:"No notifications yet. You will see your order and loyalty updates here."}):x.map(oe=>d.jsxs("button",{onClick:()=>K(oe),className:`w-full px-3 py-2.5 flex items-start gap-2 hover:bg-accent/40 transition-colors ${oe.status==="unread"?"bg-primary/5":""}`,children:[d.jsx("div",{className:"mt-1 w-2 h-2",children:oe.status==="unread"?d.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):d.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:d.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[d.jsx("div",{className:`text-[9px] text-left ${oe.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}`,children:oe.message}),d.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const Ee=new Date(oe.created_at),je=String(Ee.getDate()).padStart(2,"0"),Me=String(Ee.getMonth()+1).padStart(2,"0"),gt=Ee.getFullYear();let St=Ee.getHours();const er=String(Ee.getMinutes()).padStart(2,"0"),he=St>=12?"PM":"AM";return St=St%12||12,`${je}/${Me}/${gt} ${St}:${er} ${he}`})()})]})]},oe.id))})]})]}),d.jsxs("div",{className:"relative",ref:oe=>R(oe),children:[d.jsxs("button",{onClick:()=>{u(oe=>!oe),h(!1)},className:"relative w-9 h-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/15 transition-all border border-white/20 shadow-sm","aria-label":"Profile & loyalty menu",children:[d.jsx(zs,{className:"h-4 w-4 text-white"}),d.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full bg-black/70 flex items-center justify-center border border-yellow-300/80 shadow-md",children:G()})]}),l&&d.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[d.jsxs("div",{className:"px-3 py-2.5 border-b border-border/40 flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-full luxury-gradient flex items-center justify-center",children:d.jsx(zs,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-[10px] font-semibold text-foreground truncate",children:Y}),d.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:d.jsx(fn,{className:"px-1.5 py-0 text-[8px] rounded-full bg-primary/10 text-primary border-primary/20",children:B?"Calculating badge...":j||"Newbie"})})]}),P&&d.jsxs("div",{className:"w-14 h-14 rounded-full bg-primary flex flex-col items-center justify-center leading-tight shadow-sm",children:[d.jsx("span",{className:"text-[14px] font-semibold text-white",children:P.total_points}),d.jsx("span",{className:"text-[8px] uppercase tracking-wide text-white/85",children:"pts"})]})]}),d.jsxs("div",{className:"py-1",children:[d.jsxs("button",{onClick:()=>{u(!1),O("/profile")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[d.jsx(zs,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"View profile & history"})]}),d.jsxs("button",{onClick:()=>{u(!1),O("/orders")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[d.jsx(N1,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"My current orders"})]})]}),d.jsxs("button",{onClick:X,className:"w-full px-3 py-2.5 text-[10px] text-left text-red-500 hover:bg-red-500/5 border-t border-border/40 flex items-center gap-2",children:[d.jsx(N0,{className:"w-3.5 h-3.5"}),d.jsx("span",{children:"Logout"})]})]})]})]})]})}),d.jsx("p",{className:"text-xs opacity-80 mt-2 text-center",children:"Discover Fine Dining with Ease and Comfort"})]})}),v&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{b(null),C(null)},children:d.jsxs("div",{className:"w-[90%] max-w-sm bg-background rounded-2xl shadow-xl border border-border/60 p-4 space-y-3",onClick:oe=>oe.stopPropagation(),children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/40 flex items-center justify-center",children:v.message.includes("Please give us rating for our service.")?d.jsx("span",{className:"text-emerald-400 text-lg",children:""}):v.title.toLowerCase().includes("order placed")||v.message.toLowerCase().includes("order has been placed")?d.jsx("span",{className:"text-primary text-lg",children:""}):d.jsx("span",{className:"text-primary text-lg",children:""})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h2",{className:"text-sm font-semibold text-foreground",children:v.title}),d.jsx("div",{className:"text-[9px] text-muted-foreground",children:(()=>{const oe=new Date(v.created_at),Ee=String(oe.getDate()).padStart(2,"0"),je=String(oe.getMonth()+1).padStart(2,"0"),Me=oe.getFullYear();let gt=oe.getHours();const St=String(oe.getMinutes()).padStart(2,"0"),er=gt>=12?"PM":"AM";return gt=gt%12||12,`${Ee}/${je}/${Me} - ${gt}:${St} ${er}`})()})]})]}),d.jsx("button",{onClick:()=>{b(null),C(null)},className:"text-[9px] px-2 py-0.5 rounded-full bg-muted text-muted-foreground hover:bg-accent/60",children:"Close"})]}),d.jsx("div",{className:"mt-1 text-[10px] leading-relaxed text-foreground whitespace-pre-line",children:v.message}),v.order_id&&!v.message.includes("Please give us rating for our service.")&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-border/40 space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:"Order Summary"}),d.jsx("div",{className:"text-[8px] text-primary",children:"Live booking confirmed"})]}),S?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted overflow-hidden",children:(le=S.restaurants)!=null&&le.image_url?d.jsx("img",{src:S.restaurants.image_url,alt:S.restaurants.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] text-muted-foreground",children:((ve=(ze=(fe=S.restaurants)==null?void 0:fe.name)==null?void 0:ze.charAt(0))==null?void 0:ve.toUpperCase())||"R"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:((be=S.restaurants)==null?void 0:be.name)||"Your Restaurant"}),d.jsx("div",{className:"text-[8px] text-muted-foreground line-clamp-2",children:(ke=S.restaurants)==null?void 0:ke.address}),d.jsxs("div",{className:"mt-0.5 inline-flex items-center gap-1 px-2 py-[2px] rounded-full bg-primary/5 text-[8px] text-primary border border-primary/20",children:[d.jsx("span",{className:"text-[9px]",children:""}),d.jsx("span",{className:"capitalize",children:((Xe=S.order_type)==null?void 0:Xe.replace("_"," "))||"dine in"}),d.jsx("span",{className:"mx-1 text-[7px] text-muted-foreground",children:""}),d.jsx("span",{className:"capitalize text-[8px]",children:S.status||"paid"})]})]})]}),Array.isArray(S.order_items)&&S.order_items.length>0&&d.jsxs("div",{className:"bg-muted/40 rounded-xl px-2 py-2 space-y-1",children:[S.order_items.slice(0,3).map((oe,Ee)=>d.jsxs("div",{className:"flex justify-between items-center text-[8px] text-muted-foreground",children:[d.jsxs("span",{children:[oe.quantity," ",oe.name]}),oe.price&&d.jsxs("span",{className:"text-[8px]",children:[(oe.price*oe.quantity).toLocaleString()," MMK"]})]},Ee)),S.order_items.length>3&&d.jsxs("div",{className:"text-[7px] text-muted-foreground/80",children:["+ ",S.order_items.length-3," more item(s)"]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-border/40 mt-1",children:[d.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Total Paid"}),d.jsxs("div",{className:"text-[11px] font-semibold text-primary",children:[Number(S.total_amount||0).toLocaleString()," ","MMK"]})]})]}):d.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Loading your order summary..."})]}),v.message.includes("Please give us rating for our service.")&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-border/40",children:[d.jsxs("div",{className:"flex flex-col items-center gap-1 mb-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 border border-emerald-400/40 flex items-center justify-center shadow-sm",children:d.jsx("span",{className:"text-emerald-400 text-xl",children:""})}),d.jsx("div",{className:"text-[11px] font-semibold text-foreground",children:"Thank you for dining with us"}),d.jsx("div",{className:"text-[9px] text-muted-foreground text-center",children:"Rate your experience to help us refine our luxury service."})]}),d.jsx(Y9,{}),d.jsx("div",{className:"mt-2 text-[8px] text-center text-muted-foreground",children:"Your feedback updates this restaurant's rating in real time for all customers."})]})]})}),d.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("h2",{className:"text-xl font-semibold",children:[z(),","," ",d.jsx("span",{className:"font-bold text-yellow-500",children:Y})]}),d.jsxs("div",{className:"relative",children:[d.jsx(Rd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),d.jsx(ot,{placeholder:"Search restaurants or cuisine...",value:t,onChange:oe=>e(oe.target.value),className:"pl-10"})]})]}),!s&&pe.length>0&&d.jsx(W9,{restaurants:[...pe].sort((oe,Ee)=>(Ee.rating||0)-(oe.rating||0)).slice(0,10).map(oe=>({id:oe.id,image:oe.image_url,title:oe.name}))}),s?d.jsx("div",{className:"flex justify-center py-12",children:d.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):pe.length===0?d.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No restaurants found"}):pe.map(oe=>d.jsxs($e,{className:"overflow-hidden cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg",onClick:()=>O(`/restaurant/${oe.id}`),children:[d.jsxs("div",{className:"relative h-48",children:[d.jsx("img",{src:oe.image_url,alt:oe.name,className:"w-full h-full object-cover"}),d.jsx("div",{className:"absolute top-3 right-3",children:d.jsxs(fn,{className:"bg-primary text-primary-foreground border-0",children:[d.jsx(gc,{className:"h-3 w-3 mr-1 fill-current"}),oe.rating]})})]}),d.jsxs("div",{className:"p-4 space-y-2",children:[d.jsx("div",{className:"flex items-start justify-between",children:d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-lg text-foreground",children:oe.name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:oe.description})]})}),d.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[d.jsx(fn,{variant:"secondary",className:"font-normal",children:oe.cuisine_type}),d.jsxs("div",{className:"flex items-center gap-1 text-[0.625rem]",children:[d.jsx(N1,{className:"h-3 w-3"}),oe.address]})]})]})]},oe.id))]}),d.jsx($0,{})]})},Y9=()=>{const[t,e]=E.useState(null),[r,n]=E.useState(null),[s,i]=E.useState(!1),l=x=>x?x<=1.5?"Very Bad":x<=2.5?"Needs Improvement":x<=3.5?"Good":x<=4.5?"Very Good":"Excellent":"Tap or hover to rate",u=async x=>{if(!(s||x<=0)){i(!0);try{const{data:{user:y}}=await ue.auth.getUser();if(!y){we.error("Please sign in to rate");return}const v=window.__alan_activeRatingNotificationId;let S=window.__alan_activeRatingNotificationOrderId||null;if(!v&&!S){we.error("Unable to link rating to order");return}if(!S&&v){const{data:A,error:N}=await ue.from("customer_notifications").select("order_id").eq("id",v).single();if(N||!(A!=null&&A.order_id)){we.error("Unable to link rating to order");return}S=A.order_id}const{data:C,error:I}=await ue.from("orders").select("id, restaurant_id").eq("id",S).single();if(I||!(C!=null&&C.restaurant_id)){we.error("Unable to resolve restaurant for rating");return}const{error:R}=await ue.from("restaurant_ratings").upsert({restaurant_id:C.restaurant_id,customer_id:y.id,order_id:C.id,rating:x},{onConflict:"restaurant_id,customer_id,order_id"});if(R){console.error("Failed to save rating",R),we.error("Failed to submit rating");return}v&&await ue.from("customer_notifications").update({status:"read"}).eq("id",v),we.success("Thank you for your rating!"),n(x),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alanRefreshRestaurants"))}catch(y){console.error("Error while submitting rating",y),we.error("Something went wrong while submitting rating")}finally{i(!1)}}},m=t??r??0,h=x=>{const y=x+1,v=y-.5,b=m>=y,S=!b&&m>=v;return d.jsxs("div",{className:"relative w-7 h-7 cursor-pointer",onMouseMove:C=>{const I=C.currentTarget.getBoundingClientRect(),A=C.clientX-I.left<I.width/2?.5:1;e(y-(A===.5?.5:0))},onMouseLeave:()=>e(null),onClick:()=>u(m||y),onTouchStart:()=>{const C=y;e(C),u(C)},children:[d.jsx(gc,{className:"w-7 h-7 text-yellow-500/40"}),(b||S)&&d.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{width:b?"100%":"50%"},children:d.jsx(gc,{className:"w-7 h-7 text-yellow-400 fill-yellow-400 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]"})})]},y)};return d.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d.jsx("div",{className:"flex items-center gap-1.5",children:[0,1,2,3,4].map(h)}),d.jsx("div",{className:"text-[8px] text-emerald-400 font-medium mt-0.5",children:l(m)}),s&&d.jsx("div",{className:"text-[7px] text-muted-foreground mt-0.5",children:"Submitting your rating..."})]})};var Cp="focusScope.autoFocusOnMount",Ep="focusScope.autoFocusOnUnmount",ab={bubbles:!1,cancelable:!0},q9="FocusScope",W0=E.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=t,[u,m]=E.useState(null),h=cr(s),x=cr(i),y=E.useRef(null),v=Je(e,C=>m(C)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let C=function(N){if(b.paused||!u)return;const O=N.target;u.contains(O)?y.current=O:lo(y.current,{select:!0})},I=function(N){if(b.paused||!u)return;const O=N.relatedTarget;O!==null&&(u.contains(O)||lo(y.current,{select:!0}))},R=function(N){if(document.activeElement===document.body)for(const k of N)k.removedNodes.length>0&&lo(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",I);const A=new MutationObserver(R);return u&&A.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",I),A.disconnect()}}},[n,u,b.paused]),E.useEffect(()=>{if(u){cb.add(b);const C=document.activeElement;if(!u.contains(C)){const R=new CustomEvent(Cp,ab);u.addEventListener(Cp,h),u.dispatchEvent(R),R.defaultPrevented||(X9(eB(wT(u)),{select:!0}),document.activeElement===C&&lo(u))}return()=>{u.removeEventListener(Cp,h),setTimeout(()=>{const R=new CustomEvent(Ep,ab);u.addEventListener(Ep,x),u.dispatchEvent(R),R.defaultPrevented||lo(C??document.body,{select:!0}),u.removeEventListener(Ep,x),cb.remove(b)},0)}}},[u,h,x,b]);const S=E.useCallback(C=>{if(!r&&!n||b.paused)return;const I=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,R=document.activeElement;if(I&&R){const A=C.currentTarget,[N,O]=K9(A);N&&O?!C.shiftKey&&R===O?(C.preventDefault(),r&&lo(N,{select:!0})):C.shiftKey&&R===N&&(C.preventDefault(),r&&lo(O,{select:!0})):R===A&&C.preventDefault()}},[r,n,b.paused]);return d.jsx(Le.div,{tabIndex:-1,...l,ref:v,onKeyDown:S})});W0.displayName=q9;function X9(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(lo(n,{select:e}),document.activeElement!==r)return}function K9(t){const e=wT(t),r=lb(e,t),n=lb(e.reverse(),t);return[r,n]}function wT(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function lb(t,e){for(const r of t)if(!Q9(r,{upTo:e}))return r}function Q9(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Z9(t){return t instanceof HTMLInputElement&&"select"in t}function lo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Z9(t)&&e&&t.select()}}var cb=J9();function J9(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=ub(t,e),t.unshift(e)},remove(e){var r;t=ub(t,e),(r=t[0])==null||r.resume()}}}function ub(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function eB(t){return t.filter(e=>e.tagName!=="A")}var Sp=0;function Py(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??db()),document.body.insertAdjacentElement("beforeend",t[1]??db()),Sp++,()=>{Sp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sp--}},[])}function db(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var rh="right-scroll-bar-position",nh="width-before-scroll-bar",tB="with-scroll-bars-hidden",rB="--removed-body-scroll-bar-size";function Ap(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nB(t,e){var r=E.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var sB=typeof window<"u"?E.useLayoutEffect:E.useEffect,fb=new WeakMap;function iB(t,e){var r=nB(null,function(n){return t.forEach(function(s){return Ap(s,n)})});return sB(function(){var n=fb.get(r);if(n){var s=new Set(n),i=new Set(t),l=r.current;s.forEach(function(u){i.has(u)||Ap(u,null)}),i.forEach(function(u){s.has(u)||Ap(u,l)})}fb.set(r,t)},[t]),r}function oB(t){return t}function aB(t,e){e===void 0&&(e=oB);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=e(i,n);return r.push(l),function(){r=r.filter(function(u){return u!==l})}},assignSyncMedium:function(i){for(n=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(u){return i(u)},filter:function(){return r}}},assignMedium:function(i){n=!0;var l=[];if(r.length){var u=r;r=[],u.forEach(i),l=r}var m=function(){var x=l;l=[],x.forEach(i)},h=function(){return Promise.resolve().then(m)};h(),r={push:function(x){l.push(x),h()},filter:function(x){return l=l.filter(x),r}}}};return s}function lB(t){t===void 0&&(t={});var e=aB(null);return e.options=ds({async:!0,ssr:!1},t),e}var vT=function(t){var e=t.sideCar,r=Qo(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,ds({},r))};vT.isSideCarExport=!0;function cB(t,e){return t.useMedium(e),vT}var bT=lB(),Np=function(){},G0=E.forwardRef(function(t,e){var r=E.useRef(null),n=E.useState({onScrollCapture:Np,onWheelCapture:Np,onTouchMoveCapture:Np}),s=n[0],i=n[1],l=t.forwardProps,u=t.children,m=t.className,h=t.removeScrollBar,x=t.enabled,y=t.shards,v=t.sideCar,b=t.noRelative,S=t.noIsolation,C=t.inert,I=t.allowPinchZoom,R=t.as,A=R===void 0?"div":R,N=t.gapMode,O=Qo(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=v,F=iB([r,e]),B=ds(ds({},O),s);return E.createElement(E.Fragment,null,x&&E.createElement(k,{sideCar:bT,removeScrollBar:h,shards:y,noRelative:b,noIsolation:S,inert:C,setCallbacks:i,allowPinchZoom:!!I,lockRef:r,gapMode:N}),l?E.cloneElement(E.Children.only(u),ds(ds({},B),{ref:F})):E.createElement(A,ds({},B,{className:m,ref:F}),u))});G0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};G0.classNames={fullWidth:nh,zeroRight:rh};var uB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uB();return e&&t.setAttribute("nonce",e),t}function fB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mB=function(){var t=0,e=null;return{add:function(r){t==0&&(e=dB())&&(fB(e,r),hB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pB=function(){var t=mB();return function(e,r){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},_T=function(){var t=pB(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},gB={left:0,top:0,right:0,gap:0},Tp=function(t){return parseInt(t||"",10)||0},xB=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Tp(r),Tp(n),Tp(s)]},yB=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gB;var e=xB(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},wB=_T(),ec="data-scroll-locked",vB=function(t,e,r,n){var s=t.left,i=t.top,l=t.right,u=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(tB,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(ec,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(nh,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(nh," .").concat(nh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ec,`] {
    `).concat(rB,": ").concat(u,`px;
  }
`)},hb=function(){var t=parseInt(document.body.getAttribute(ec)||"0",10);return isFinite(t)?t:0},bB=function(){E.useEffect(function(){return document.body.setAttribute(ec,(hb()+1).toString()),function(){var t=hb()-1;t<=0?document.body.removeAttribute(ec):document.body.setAttribute(ec,t.toString())}},[])},_B=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;bB();var i=E.useMemo(function(){return yB(s)},[s]);return E.createElement(wB,{styles:vB(i,!e,s,r?"":"!important")})},gg=!1;if(typeof window<"u")try{var jf=Object.defineProperty({},"passive",{get:function(){return gg=!0,!0}});window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{gg=!1}var vl=gg?{passive:!1}:!1,CB=function(t){return t.tagName==="TEXTAREA"},CT=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!CB(t)&&r[e]==="visible")},EB=function(t){return CT(t,"overflowY")},SB=function(t){return CT(t,"overflowX")},mb=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=ET(t,n);if(s){var i=ST(t,n),l=i[1],u=i[2];if(l>u)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},AB=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},NB=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},ET=function(t,e){return t==="v"?EB(e):SB(e)},ST=function(t,e){return t==="v"?AB(e):NB(e)},TB=function(t,e){return t==="h"&&e==="rtl"?-1:1},IB=function(t,e,r,n,s){var i=TB(t,window.getComputedStyle(e).direction),l=i*n,u=r.target,m=e.contains(u),h=!1,x=l>0,y=0,v=0;do{if(!u)break;var b=ST(t,u),S=b[0],C=b[1],I=b[2],R=C-I-i*S;(S||R)&&ET(t,u)&&(y+=R,v+=S);var A=u.parentNode;u=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!m&&u!==document.body||m&&(e.contains(u)||e===u));return(x&&(Math.abs(y)<1||!s)||!x&&(Math.abs(v)<1||!s))&&(h=!0),h},kf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pb=function(t){return[t.deltaX,t.deltaY]},gb=function(t){return t&&"current"in t?t.current:t},RB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},OB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},MB=0,bl=[];function jB(t){var e=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),s=E.useState(MB++)[0],i=E.useState(_T)[0],l=E.useRef(t);E.useEffect(function(){l.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var C=ny([t.lockRef.current],(t.shards||[]).map(gb),!0).filter(Boolean);return C.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(C,I){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!l.current.allowPinchZoom;var R=kf(C),A=r.current,N="deltaX"in C?C.deltaX:A[0]-R[0],O="deltaY"in C?C.deltaY:A[1]-R[1],k,F=C.target,B=Math.abs(N)>Math.abs(O)?"h":"v";if("touches"in C&&B==="h"&&F.type==="range")return!1;var P=mb(B,F);if(!P)return!0;if(P?k=B:(k=B==="v"?"h":"v",P=mb(B,F)),!P)return!1;if(!n.current&&"changedTouches"in C&&(N||O)&&(n.current=k),!k)return!0;var j=n.current||k;return IB(j,I,C,j==="h"?N:O,!0)},[]),m=E.useCallback(function(C){var I=C;if(!(!bl.length||bl[bl.length-1]!==i)){var R="deltaY"in I?pb(I):kf(I),A=e.current.filter(function(k){return k.name===I.type&&(k.target===I.target||I.target===k.shadowParent)&&RB(k.delta,R)})[0];if(A&&A.should){I.cancelable&&I.preventDefault();return}if(!A){var N=(l.current.shards||[]).map(gb).filter(Boolean).filter(function(k){return k.contains(I.target)}),O=N.length>0?u(I,N[0]):!l.current.noIsolation;O&&I.cancelable&&I.preventDefault()}}},[]),h=E.useCallback(function(C,I,R,A){var N={name:C,delta:I,target:R,should:A,shadowParent:kB(R)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(O){return O!==N})},1)},[]),x=E.useCallback(function(C){r.current=kf(C),n.current=void 0},[]),y=E.useCallback(function(C){h(C.type,pb(C),C.target,u(C,t.lockRef.current))},[]),v=E.useCallback(function(C){h(C.type,kf(C),C.target,u(C,t.lockRef.current))},[]);E.useEffect(function(){return bl.push(i),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",m,vl),document.addEventListener("touchmove",m,vl),document.addEventListener("touchstart",x,vl),function(){bl=bl.filter(function(C){return C!==i}),document.removeEventListener("wheel",m,vl),document.removeEventListener("touchmove",m,vl),document.removeEventListener("touchstart",x,vl)}},[]);var b=t.removeScrollBar,S=t.inert;return E.createElement(E.Fragment,null,S?E.createElement(i,{styles:OB(s)}):null,b?E.createElement(_B,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const PB=cB(bT,jB);var Y0=E.forwardRef(function(t,e){return E.createElement(G0,ds({},t,{ref:e,sideCar:PB}))});Y0.classNames=G0.classNames;var DB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_l=new WeakMap,Pf=new WeakMap,Df={},Ip=0,AT=function(t){return t&&(t.host||AT(t.parentNode))},LB=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=AT(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},BB=function(t,e,r,n){var s=LB(e,Array.isArray(t)?t:[t]);Df[r]||(Df[r]=new WeakMap);var i=Df[r],l=[],u=new Set,m=new Set(s),h=function(y){!y||u.has(y)||(u.add(y),h(y.parentNode))};s.forEach(h);var x=function(y){!y||m.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))x(v);else try{var b=v.getAttribute(n),S=b!==null&&b!=="false",C=(_l.get(v)||0)+1,I=(i.get(v)||0)+1;_l.set(v,C),i.set(v,I),l.push(v),C===1&&S&&Pf.set(v,!0),I===1&&v.setAttribute(r,"true"),S||v.setAttribute(n,"true")}catch(R){console.error("aria-hidden: cannot operate on ",v,R)}})};return x(e),u.clear(),Ip++,function(){l.forEach(function(y){var v=_l.get(y)-1,b=i.get(y)-1;_l.set(y,v),i.set(y,b),v||(Pf.has(y)||y.removeAttribute(n),Pf.delete(y)),b||y.removeAttribute(r)}),Ip--,Ip||(_l=new WeakMap,_l=new WeakMap,Pf=new WeakMap,Df={})}},Dy=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=DB(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),BB(n,s,r,"aria-hidden")):function(){return null}},q0="Dialog",[NT,lH]=pn(q0),[FB,Ks]=NT(q0),TT=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:l=!0}=t,u=E.useRef(null),m=E.useRef(null),[h,x]=yi({prop:n,defaultProp:s??!1,onChange:i,caller:q0});return d.jsx(FB,{scope:e,triggerRef:u,contentRef:m,contentId:$s(),titleId:$s(),descriptionId:$s(),open:h,onOpenChange:x,onOpenToggle:E.useCallback(()=>x(y=>!y),[x]),modal:l,children:r})};TT.displayName=q0;var IT="DialogTrigger",RT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(IT,r),i=Je(e,s.triggerRef);return d.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Fy(s.open),...n,ref:i,onClick:Ae(t.onClick,s.onOpenToggle)})});RT.displayName=IT;var Ly="DialogPortal",[UB,OT]=NT(Ly,{forceMount:void 0}),MT=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=Ks(Ly,e);return d.jsx(UB,{scope:e,forceMount:r,children:E.Children.map(n,l=>d.jsx(tn,{present:r||i.open,children:d.jsx(Td,{asChild:!0,container:s,children:l})}))})};MT.displayName=Ly;var Xh="DialogOverlay",jT=E.forwardRef((t,e)=>{const r=OT(Xh,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks(Xh,t.__scopeDialog);return i.modal?d.jsx(tn,{present:n||i.open,children:d.jsx(VB,{...s,ref:e})}):null});jT.displayName=Xh;var zB=za("DialogOverlay.RemoveScroll"),VB=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(Xh,r);return d.jsx(Y0,{as:zB,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Le.div,{"data-state":Fy(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),$a="DialogContent",kT=E.forwardRef((t,e)=>{const r=OT($a,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks($a,t.__scopeDialog);return d.jsx(tn,{present:n||i.open,children:i.modal?d.jsx(HB,{...s,ref:e}):d.jsx($B,{...s,ref:e})})});kT.displayName=$a;var HB=E.forwardRef((t,e)=>{const r=Ks($a,t.__scopeDialog),n=E.useRef(null),s=Je(e,r.contentRef,n);return E.useEffect(()=>{const i=n.current;if(i)return Dy(i)},[]),d.jsx(PT,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ae(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&i.preventDefault()}),onFocusOutside:Ae(t.onFocusOutside,i=>i.preventDefault())})}),$B=E.forwardRef((t,e)=>{const r=Ks($a,t.__scopeDialog),n=E.useRef(!1),s=E.useRef(!1);return d.jsx(PT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,u;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(u=r.triggerRef.current)==null||u.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var m,h;(m=t.onInteractOutside)==null||m.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((h=r.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),PT=E.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...l}=t,u=Ks($a,r),m=E.useRef(null),h=Je(e,m);return Py(),d.jsxs(d.Fragment,{children:[d.jsx(W0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(Mc,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Fy(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(WB,{titleId:u.titleId}),d.jsx(YB,{contentRef:m,descriptionId:u.descriptionId})]})]})}),By="DialogTitle",DT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(By,r);return d.jsx(Le.h2,{id:s.titleId,...n,ref:e})});DT.displayName=By;var LT="DialogDescription",BT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(LT,r);return d.jsx(Le.p,{id:s.descriptionId,...n,ref:e})});BT.displayName=LT;var FT="DialogClose",UT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(FT,r);return d.jsx(Le.button,{type:"button",...n,ref:e,onClick:Ae(t.onClick,()=>s.onOpenChange(!1))})});UT.displayName=FT;function Fy(t){return t?"open":"closed"}var zT="DialogTitleWarning",[cH,VT]=Q8(zT,{contentName:$a,titleName:By,docsSlug:"dialog"}),WB=({titleId:t})=>{const e=VT(zT),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},GB="DialogDescriptionWarning",YB=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VT(GB).contentName}}.`;return E.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},qB=TT,XB=RT,KB=MT,HT=jT,$T=kT,WT=DT,GT=BT,QB=UT;const Xs=qB,YT=XB,ZB=KB,qT=E.forwardRef(({className:t,...e},r)=>d.jsx(HT,{ref:r,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));qT.displayName=HT.displayName;const _s=E.forwardRef(({className:t,children:e,...r},n)=>d.jsxs(ZB,{children:[d.jsx(qT,{}),d.jsxs($T,{ref:n,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,d.jsxs(QB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[d.jsx($E,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_s.displayName=$T.displayName;const bi=({className:t,...e})=>d.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bi.displayName="DialogHeader";const xg=({className:t,...e})=>d.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});xg.displayName="DialogFooter";const _i=E.forwardRef(({className:t,...e},r)=>d.jsx(WT,{ref:r,className:Te("text-lg font-semibold leading-none tracking-tight",t),...e}));_i.displayName=WT.displayName;const XT=E.forwardRef(({className:t,...e},r)=>d.jsx(GT,{ref:r,className:Te("text-sm text-muted-foreground",t),...e}));XT.displayName=GT.displayName;const JB=()=>{const{id:t}=o5(),e=rn(),[r,n]=E.useState(null),[s,i]=E.useState([]),[l,u]=E.useState(""),[m,h]=E.useState(!0),[x,y]=E.useState([]),[v,b]=E.useState("dine_in"),[S,C]=E.useState(null),[I,R]=E.useState(!1);E.useEffect(()=>{t&&A()},[t]);const A=async()=>{try{const[P,j]=await Promise.all([ue.from("restaurants").select("*").eq("id",t).single(),ue.from("menu_items").select("*").eq("restaurant_id",t).eq("available",!0)]);if(P.error)throw P.error;if(j.error)throw j.error;n(P.data),i(j.data||[])}catch(P){console.error("Error fetching data:",P),we.error("Failed to load restaurant details")}finally{h(!1)}};if(m)return d.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:d.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})});if(!r)return d.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),d.jsx(De,{onClick:()=>e("/home"),children:"Back to Home"})]})});const N=P=>{y(j=>j.find(Y=>Y.id===P.id)?j.map(Y=>Y.id===P.id?{...Y,quantity:Y.quantity+1}:Y):[...j,{id:P.id,name:P.name,price:P.price,quantity:1}])},O=P=>{y(j=>{const W=j.find(Y=>Y.id===P);return W&&W.quantity>1?j.map(Y=>Y.id===P?{...Y,quantity:Y.quantity-1}:Y):j.filter(Y=>Y.id!==P)})},k=x.reduce((P,j)=>P+j.price*j.quantity,0),F=x.reduce((P,j)=>P+j.quantity,0),B=()=>{if(x.length===0){we.error("Please add items to your cart");return}e("/payment",{state:{cart:x,restaurant:r,orderType:v,totalAmount:k}})};return d.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[d.jsxs("div",{className:"relative h-64",children:[d.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}),d.jsx(De,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-black/50 text-white hover:bg-black/70",onClick:()=>e(-1),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsx(De,{variant:"secondary",size:"sm",className:"absolute bottom-4 right-4 bg-black/65 text-white hover:bg-black/80 border-none px-3 py-1 text-xs rounded-full",onClick:()=>{const j=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.address||r.name)}`;window.open(j,"_blank","noopener,noreferrer")},children:"View on Map"})]}),d.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r.name}),d.jsx("p",{className:"text-muted-foreground",children:r.description})]}),d.jsxs(fn,{className:"bg-primary text-primary-foreground border-0",children:[d.jsx(gc,{className:"h-3 w-3 mr-1 fill-current"}),r.rating]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted-foreground",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(N1,{className:"h-4 w-4"}),r.address]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(A0,{className:"h-4 w-4"}),r.open_hours]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(zE,{className:"h-4 w-4"}),r.phone]})]})]}),d.jsxs($e,{className:"p-4",children:[d.jsx("h3",{className:"font-semibold mb-3",children:"Order Type"}),d.jsx(xT,{value:v,onValueChange:P=>b(P),children:d.jsxs(ky,{className:"grid w-full grid-cols-2",children:[d.jsxs(yd,{value:"dine_in",children:[d.jsx(kx,{className:"h-4 w-4 mr-2"}),"Dine In"]}),d.jsxs(yd,{value:"takeaway",children:[d.jsx(Rh,{className:"h-4 w-4 mr-2"}),"Takeaway"]})]})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Menu"}),d.jsx("div",{className:"mt-2",children:d.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),placeholder:"Search menu items...",className:"w-full px-3 py-2 rounded-md border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary"})}),s.filter(P=>{const j=l.toLowerCase().trim();return j?P.name.toLowerCase().includes(j)||(P.description||"").toLowerCase().includes(j):!0}).map(P=>{const j=x.find(W=>W.id===P.id);return d.jsx($e,{className:"overflow-hidden",children:d.jsxs("div",{className:"flex gap-4 p-4",children:[d.jsx("button",{type:"button",className:"focus:outline-none",onClick:()=>C(P),children:d.jsx("img",{src:P.image_url,alt:P.name,className:"w-24 h-24 rounded-lg object-cover transition-transform duration-200 hover:scale-105"})}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:P.name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:P.description})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"font-semibold text-primary",children:[P.price.toLocaleString()," MMK"]}),j?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(De,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>O(P.id),children:d.jsx(JM,{className:"h-4 w-4"})}),d.jsx("span",{className:"w-8 text-center font-medium",children:j.quantity}),d.jsx(De,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>N(P),children:d.jsx(ko,{className:"h-4 w-4"})})]}):d.jsxs(De,{size:"sm",variant:"outline",onClick:()=>N(P),children:[d.jsx(ko,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})]})},P.id)})]})]}),d.jsx(Xs,{open:!!S,onOpenChange:P=>!P&&C(null),children:d.jsx(_s,{className:"max-w-sm p-0 border-0 bg-transparent shadow-none",children:S&&d.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[d.jsx("img",{src:S.image_url,alt:S.name,className:"w-full h-[360px] object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),d.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4 flex flex-col gap-2 text-white",children:[d.jsxs("div",{className:"flex items-baseline justify-between gap-3",children:[d.jsx("h3",{className:"text-lg font-semibold leading-tight",children:S.name}),d.jsxs("span",{className:"text-sm font-semibold px-2 py-1 rounded-full bg-white/12 backdrop-blur",children:[S.price.toLocaleString()," MMK"]})]}),S.description&&d.jsx("p",{className:"text-xs text-white/80 line-clamp-2",children:S.description}),d.jsx("div",{className:"mt-2 flex justify-end",children:d.jsxs(De,{size:"sm",className:"luxury-gradient px-5 py-2 text-sm font-medium shadow-md hover:shadow-lg transition-all",onClick:()=>{N(S),C(null)},children:[d.jsx(ko,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})})]})]})})}),x.length>0&&d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-4",children:d.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-sm text-muted-foreground",children:[F," items"]}),d.jsxs("div",{className:"text-lg font-bold",children:[k.toLocaleString()," MMK"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(De,{variant:"outline",size:"lg",onClick:()=>R(!0),children:"View Orders"}),d.jsx(De,{onClick:B,className:"luxury-gradient",size:"lg",children:"Pay"})]})]})}),d.jsx(Xs,{open:I,onOpenChange:R,children:d.jsxs(_s,{className:"max-w-md",children:[d.jsx(bi,{children:d.jsx(_i,{children:"Your Order Summary"})}),x.length===0?d.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in your cart."}):d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"space-y-1",children:x.map(P=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium",children:P.name}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.quantity," x ",P.price.toLocaleString()," MMK"]})]}),d.jsxs("span",{className:"font-semibold",children:[(P.price*P.quantity).toLocaleString()," MMK"]})]},P.id))}),d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[d.jsxs("span",{className:"text-sm text-muted-foreground",children:["Total (",F," items)"]}),d.jsxs("span",{className:"text-lg font-bold text-primary",children:[k.toLocaleString()," MMK"]})]})]})]})})]})};function Uy(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var zy="Radio",[eF,KT]=pn(zy),[tF,rF]=eF(zy),QT=E.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:i,disabled:l,value:u="on",onCheck:m,form:h,...x}=t,[y,v]=E.useState(null),b=Je(e,I=>v(I)),S=E.useRef(!1),C=y?h||!!y.closest("form"):!0;return d.jsxs(tF,{scope:r,checked:s,disabled:l,children:[d.jsx(Le.button,{type:"button",role:"radio","aria-checked":s,"data-state":t3(s),"data-disabled":l?"":void 0,disabled:l,value:u,...x,ref:b,onClick:Ae(t.onClick,I=>{s||m==null||m(),C&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),C&&d.jsx(e3,{control:y,bubbles:!S.current,name:n,value:u,checked:s,required:i,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});QT.displayName=zy;var ZT="RadioIndicator",JT=E.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...s}=t,i=rF(ZT,r);return d.jsx(tn,{present:n||i.checked,children:d.jsx(Le.span,{"data-state":t3(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});JT.displayName=ZT;var nF="RadioBubbleInput",e3=E.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const l=E.useRef(null),u=Je(l,i),m=Uy(r),h=Hx(e);return E.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==r&&b){const S=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(S)}},[m,r,n]),d.jsx(Le.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:u,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});e3.displayName=nF;function t3(t){return t?"checked":"unchecked"}var sF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],X0="RadioGroup",[iF,uH]=pn(X0,[zc,KT]),r3=zc(),n3=KT(),[oF,aF]=iF(X0),s3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:i,required:l=!1,disabled:u=!1,orientation:m,dir:h,loop:x=!0,onValueChange:y,...v}=t,b=r3(r),S=Uc(h),[C,I]=yi({prop:i,defaultProp:s??null,onChange:y,caller:X0});return d.jsx(oF,{scope:r,name:n,required:l,disabled:u,value:C,onValueChange:I,children:d.jsx(Oy,{asChild:!0,...b,orientation:m,dir:S,loop:x,children:d.jsx(Le.div,{role:"radiogroup","aria-required":l,"aria-orientation":m,"data-disabled":u?"":void 0,dir:S,...v,ref:e})})})});s3.displayName=X0;var i3="RadioGroupItem",o3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...s}=t,i=aF(i3,r),l=i.disabled||n,u=r3(r),m=n3(r),h=E.useRef(null),x=Je(e,h),y=i.value===s.value,v=E.useRef(!1);return E.useEffect(()=>{const b=C=>{sF.includes(C.key)&&(v.current=!0)},S=()=>v.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",S)}},[]),d.jsx(My,{asChild:!0,...u,focusable:!l,active:y,children:d.jsx(QT,{disabled:l,required:i.required,checked:y,...m,...s,name:i.name,ref:x,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ae(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:Ae(s.onFocus,()=>{var b;v.current&&((b=h.current)==null||b.click())})})})});o3.displayName=i3;var lF="RadioGroupIndicator",a3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,s=n3(r);return d.jsx(JT,{...s,...n,ref:e})});a3.displayName=lF;var l3=s3,c3=o3,cF=a3;const u3=E.forwardRef(({className:t,...e},r)=>d.jsx(l3,{className:Te("grid gap-2",t),...e,ref:r}));u3.displayName=l3.displayName;const d3=E.forwardRef(({className:t,...e},r)=>d.jsx(c3,{ref:r,className:Te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:d.jsx(cF,{className:"flex items-center justify-center",children:d.jsx(LE,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d3.displayName=c3.displayName;const uF=[{id:"mpu",name:"MPU Card",icon:YM},{id:"kbzpay",name:"KBZPay",icon:ij},{id:"wavepay",name:"WavePay",icon:oj}],dF=()=>{const t=Ko(),e=rn(),{cart:r,restaurant:n,orderType:s,totalAmount:i}=t.state||{},[l,u]=E.useState("kbzpay"),[m,h]=E.useState(!1);if(!r||!n)return e("/home"),null;const x=async()=>{h(!0),await new Promise(y=>setTimeout(y,2e3));try{const{data:{user:y}}=await ue.auth.getUser();if(!y){we.error("Please sign in to complete your order"),e("/auth");return}const v=`ALAN-${Date.now()}-${n.id}-${y.id.substring(0,8)}`,{data:b,error:S}=await ue.from("orders").insert({customer_id:y.id,restaurant_id:n.id,order_type:s,payment_method:l,total_amount:i,status:"paid",qr_code:v,order_items:r}).select().single();if(S){console.error("Order creation error:",S),we.error("Failed to create order. Please try again.");return}we.success("Payment successful!"),e("/confirmation",{state:{order:b,restaurant:n,orderType:s}})}catch(y){console.error("Payment error:",y),we.error("Failed to process payment. Please try again.")}finally{h(!1)}};return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:d.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-4",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-2xl font-bold",children:"Payment"})]})}),d.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[d.jsxs($e,{className:"p-4 space-y-3",children:[d.jsx("h2",{className:"font-semibold text-lg",children:"Order Summary"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),d.jsx("span",{className:"font-medium",children:n.name})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),d.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Items"}),d.jsxs("span",{className:"font-medium",children:[r.length," item(s)"]})]}),d.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[d.jsx("span",{className:"font-semibold",children:"Total Amount"}),d.jsxs("span",{className:"font-bold text-primary text-lg",children:[i.toLocaleString()," MMK"]})]})]})]}),d.jsxs($e,{className:"p-4 space-y-4",children:[d.jsx("h2",{className:"font-semibold text-lg",children:"Payment Method"}),d.jsx(u3,{value:l,onValueChange:y=>u(y),children:uF.map(y=>{const v=y.icon;return d.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>u(y.id),children:[d.jsx(d3,{value:y.id,id:y.id}),d.jsxs(Qe,{htmlFor:y.id,className:"flex items-center gap-3 cursor-pointer flex-1",children:[d.jsx(v,{className:"h-5 w-5 text-primary"}),d.jsx("span",{className:"font-medium",children:y.name})]})]},y.id)})})]}),d.jsxs($e,{className:"p-4 space-y-3",children:[d.jsx("h2",{className:"font-semibold text-lg",children:"Items"}),r.map(y=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[y.name," x ",y.quantity]}),d.jsxs("span",{className:"font-medium",children:[(y.price*y.quantity).toLocaleString()," MMK"]})]},y.id))]}),d.jsx(De,{onClick:x,disabled:m,className:"w-full luxury-gradient h-12 text-base",size:"lg",children:m?d.jsxs(d.Fragment,{children:[d.jsx(Uo,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing Payment..."]}):`Pay ${i.toLocaleString()} MMK`}),d.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"This is a mock payment. No actual transaction will occur."})]})]})};var fF=Object.defineProperty,Kh=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,xb=(t,e,r)=>e in t?fF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yg=(t,e)=>{for(var r in e||(e={}))f3.call(e,r)&&xb(t,r,e[r]);if(Kh)for(var r of Kh(e))h3.call(e,r)&&xb(t,r,e[r]);return t},wg=(t,e)=>{var r={};for(var n in t)f3.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Kh)for(var n of Kh(t))e.indexOf(n)<0&&h3.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Wa;(t=>{const e=class at{constructor(m,h,x,y){if(this.version=m,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],m<at.MIN_VERSION||m>at.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let v=[];for(let S=0;S<this.size;S++)v.push(!1);for(let S=0;S<this.size;S++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(x);if(this.drawCodewords(b),y==-1){let S=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const I=this.getPenaltyScore();I<S&&(y=C,S=I),this.applyMask(C)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(m,h){const x=t.QrSegment.makeSegments(m);return at.encodeSegments(x,h)}static encodeBinary(m,h){const x=t.QrSegment.makeBytes(m);return at.encodeSegments([x],h)}static encodeSegments(m,h,x=1,y=40,v=-1,b=!0){if(!(at.MIN_VERSION<=x&&x<=y&&y<=at.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let S,C;for(S=x;;S++){const N=at.getNumDataCodewords(S,h)*8,O=l.getTotalBits(m,S);if(O<=N){C=O;break}if(S>=y)throw new RangeError("Data too long")}for(const N of[at.Ecc.MEDIUM,at.Ecc.QUARTILE,at.Ecc.HIGH])b&&C<=at.getNumDataCodewords(S,N)*8&&(h=N);let I=[];for(const N of m){r(N.mode.modeBits,4,I),r(N.numChars,N.mode.numCharCountBits(S),I);for(const O of N.getData())I.push(O)}s(I.length==C);const R=at.getNumDataCodewords(S,h)*8;s(I.length<=R),r(0,Math.min(4,R-I.length),I),r(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let N=236;I.length<R;N^=253)r(N,8,I);let A=[];for(;A.length*8<I.length;)A.push(0);return I.forEach((N,O)=>A[O>>>3]|=N<<7-(O&7)),new at(S,h,A,v)}getModule(m,h){return 0<=m&&m<this.size&&0<=h&&h<this.size&&this.modules[h][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),h=m.length;for(let x=0;x<h;x++)for(let y=0;y<h;y++)x==0&&y==0||x==0&&y==h-1||x==h-1&&y==0||this.drawAlignmentPattern(m[x],m[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const h=this.errorCorrectionLevel.formatBits<<3|m;let x=h;for(let v=0;v<10;v++)x=x<<1^(x>>>9)*1335;const y=(h<<10|x)^21522;s(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,n(y,v));this.setFunctionModule(8,7,n(y,6)),this.setFunctionModule(8,8,n(y,7)),this.setFunctionModule(7,8,n(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,n(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,n(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,n(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let x=0;x<12;x++)m=m<<1^(m>>>11)*7973;const h=this.version<<12|m;s(h>>>18==0);for(let x=0;x<18;x++){const y=n(h,x),v=this.size-11+x%3,b=Math.floor(x/3);this.setFunctionModule(v,b,y),this.setFunctionModule(b,v,y)}}drawFinderPattern(m,h){for(let x=-4;x<=4;x++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(x)),b=m+y,S=h+x;0<=b&&b<this.size&&0<=S&&S<this.size&&this.setFunctionModule(b,S,v!=2&&v!=4)}}drawAlignmentPattern(m,h){for(let x=-2;x<=2;x++)for(let y=-2;y<=2;y++)this.setFunctionModule(m+y,h+x,Math.max(Math.abs(y),Math.abs(x))!=1)}setFunctionModule(m,h,x){this.modules[h][m]=x,this.isFunction[h][m]=!0}addEccAndInterleave(m){const h=this.version,x=this.errorCorrectionLevel;if(m.length!=at.getNumDataCodewords(h,x))throw new RangeError("Invalid argument");const y=at.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][h],v=at.ECC_CODEWORDS_PER_BLOCK[x.ordinal][h],b=Math.floor(at.getNumRawDataModules(h)/8),S=y-b%y,C=Math.floor(b/y);let I=[];const R=at.reedSolomonComputeDivisor(v);for(let N=0,O=0;N<y;N++){let k=m.slice(O,O+C-v+(N<S?0:1));O+=k.length;const F=at.reedSolomonComputeRemainder(k,R);N<S&&k.push(0),I.push(k.concat(F))}let A=[];for(let N=0;N<I[0].length;N++)I.forEach((O,k)=>{(N!=C-v||k>=S)&&A.push(O[N])});return s(A.length==b),A}drawCodewords(m){if(m.length!=Math.floor(at.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const b=x-v,C=(x+1&2)==0?this.size-1-y:y;!this.isFunction[C][b]&&h<m.length*8&&(this.modules[C][b]=n(m[h>>>3],7-(h&7)),h++)}}s(h==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let x=0;x<this.size;x++){let y;switch(m){case 0:y=(x+h)%2==0;break;case 1:y=h%2==0;break;case 2:y=x%3==0;break;case 3:y=(x+h)%3==0;break;case 4:y=(Math.floor(x/3)+Math.floor(h/2))%2==0;break;case 5:y=x*h%2+x*h%3==0;break;case 6:y=(x*h%2+x*h%3)%2==0;break;case 7:y=((x+h)%2+x*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][x]&&y&&(this.modules[h][x]=!this.modules[h][x])}}getPenaltyScore(){let m=0;for(let v=0;v<this.size;v++){let b=!1,S=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[v][I]==b?(S++,S==5?m+=at.PENALTY_N1:S>5&&m++):(this.finderPenaltyAddHistory(S,C),b||(m+=this.finderPenaltyCountPatterns(C)*at.PENALTY_N3),b=this.modules[v][I],S=1);m+=this.finderPenaltyTerminateAndCount(b,S,C)*at.PENALTY_N3}for(let v=0;v<this.size;v++){let b=!1,S=0,C=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][v]==b?(S++,S==5?m+=at.PENALTY_N1:S>5&&m++):(this.finderPenaltyAddHistory(S,C),b||(m+=this.finderPenaltyCountPatterns(C)*at.PENALTY_N3),b=this.modules[I][v],S=1);m+=this.finderPenaltyTerminateAndCount(b,S,C)*at.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let b=0;b<this.size-1;b++){const S=this.modules[v][b];S==this.modules[v][b+1]&&S==this.modules[v+1][b]&&S==this.modules[v+1][b+1]&&(m+=at.PENALTY_N2)}let h=0;for(const v of this.modules)h=v.reduce((b,S)=>b+(S?1:0),h);const x=this.size*this.size,y=Math.ceil(Math.abs(h*20-x*10)/x)-1;return s(0<=y&&y<=9),m+=y*at.PENALTY_N4,s(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let x=[6];for(let y=this.size-7;x.length<m;y-=h)x.splice(1,0,y);return x}}static getNumRawDataModules(m){if(m<at.MIN_VERSION||m>at.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*m+128)*m+64;if(m>=2){const x=Math.floor(m/7)+2;h-=(25*x-10)*x-55,m>=7&&(h-=36)}return s(208<=h&&h<=29648),h}static getNumDataCodewords(m,h){return Math.floor(at.getNumRawDataModules(m)/8)-at.ECC_CODEWORDS_PER_BLOCK[h.ordinal][m]*at.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let h=[];for(let y=0;y<m-1;y++)h.push(0);h.push(1);let x=1;for(let y=0;y<m;y++){for(let v=0;v<h.length;v++)h[v]=at.reedSolomonMultiply(h[v],x),v+1<h.length&&(h[v]^=h[v+1]);x=at.reedSolomonMultiply(x,2)}return h}static reedSolomonComputeRemainder(m,h){let x=h.map(y=>0);for(const y of m){const v=y^x.shift();x.push(0),h.forEach((b,S)=>x[S]^=at.reedSolomonMultiply(b,v))}return x}static reedSolomonMultiply(m,h){if(m>>>8||h>>>8)throw new RangeError("Byte out of range");let x=0;for(let y=7;y>=0;y--)x=x<<1^(x>>>7)*285,x^=(h>>>y&1)*m;return s(x>>>8==0),x}finderPenaltyCountPatterns(m){const h=m[1];s(h<=this.size*3);const x=h>0&&m[2]==h&&m[3]==h*3&&m[4]==h&&m[5]==h;return(x&&m[0]>=h*4&&m[6]>=h?1:0)+(x&&m[6]>=h*4&&m[0]>=h?1:0)}finderPenaltyTerminateAndCount(m,h,x){return m&&(this.finderPenaltyAddHistory(h,x),h=0),h+=this.size,this.finderPenaltyAddHistory(h,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(m,h){h[0]==0&&(m+=this.size),h.pop(),h.unshift(m)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(u,m,h){if(m<0||m>31||u>>>m)throw new RangeError("Value out of range");for(let x=m-1;x>=0;x--)h.push(u>>>x&1)}function n(u,m){return(u>>>m&1)!=0}function s(u){if(!u)throw new Error("Assertion error")}const i=class ir{constructor(m,h,x){if(this.mode=m,this.numChars=h,this.bitData=x,h<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(m){let h=[];for(const x of m)r(x,8,h);return new ir(ir.Mode.BYTE,m.length,h)}static makeNumeric(m){if(!ir.isNumeric(m))throw new RangeError("String contains non-numeric characters");let h=[];for(let x=0;x<m.length;){const y=Math.min(m.length-x,3);r(parseInt(m.substring(x,x+y),10),y*3+1,h),x+=y}return new ir(ir.Mode.NUMERIC,m.length,h)}static makeAlphanumeric(m){if(!ir.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],x;for(x=0;x+2<=m.length;x+=2){let y=ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x))*45;y+=ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x+1)),r(y,11,h)}return x<m.length&&r(ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x)),6,h),new ir(ir.Mode.ALPHANUMERIC,m.length,h)}static makeSegments(m){return m==""?[]:ir.isNumeric(m)?[ir.makeNumeric(m)]:ir.isAlphanumeric(m)?[ir.makeAlphanumeric(m)]:[ir.makeBytes(ir.toUtf8ByteArray(m))]}static makeEci(m){let h=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)r(m,8,h);else if(m<16384)r(2,2,h),r(m,14,h);else if(m<1e6)r(6,3,h),r(m,21,h);else throw new RangeError("ECI assignment value out of range");return new ir(ir.Mode.ECI,0,h)}static isNumeric(m){return ir.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return ir.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,h){let x=0;for(const y of m){const v=y.mode.numCharCountBits(h);if(y.numChars>=1<<v)return 1/0;x+=4+v+y.bitData.length}return x}static toUtf8ByteArray(m){m=encodeURI(m);let h=[];for(let x=0;x<m.length;x++)m.charAt(x)!="%"?h.push(m.charCodeAt(x)):(h.push(parseInt(m.substring(x+1,x+3),16)),x+=2);return h}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=i;t.QrSegment=i})(Wa||(Wa={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Wa||(Wa={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Wa||(Wa={}));var Ul=Wa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var hF={L:Ul.QrCode.Ecc.LOW,M:Ul.QrCode.Ecc.MEDIUM,Q:Ul.QrCode.Ecc.QUARTILE,H:Ul.QrCode.Ecc.HIGH},m3=128,p3="L",g3="#FFFFFF",x3="#000000",y3=!1,w3=1,mF=4,pF=0,gF=.1;function v3(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(l,u){if(!l&&i!==null){r.push(`M${i+e} ${s+e}h${u-i}v1H${i+e}z`),i=null;return}if(u===n.length-1){if(!l)return;i===null?r.push(`M${u+e},${s+e} h1v1H${u+e}z`):r.push(`M${i+e},${s+e} h${u+1-i}v1H${i+e}z`);return}l&&i===null&&(i=u)})}),r.join("")}function b3(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function xF(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*gF),l=s/e,u=(n.width||i)*l,m=(n.height||i)*l,h=n.x==null?t.length/2-u/2:n.x*l,x=n.y==null?t.length/2-m/2:n.y*l,y=n.opacity==null?1:n.opacity;let v=null;if(n.excavate){let S=Math.floor(h),C=Math.floor(x),I=Math.ceil(u+h-S),R=Math.ceil(m+x-C);v={x:S,y:C,w:I,h:R}}const b=n.crossOrigin;return{x:h,y:x,h:m,w:u,excavation:v,opacity:y,crossOrigin:b}}function yF(t,e){return e!=null?Math.max(Math.floor(e),0):t?mF:pF}function _3({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:l,boostLevel:u}){let m=me.useMemo(()=>{const S=(Array.isArray(t)?t:[t]).reduce((C,I)=>(C.push(...Ul.QrSegment.makeSegments(I)),C),[]);return Ul.QrCode.encodeSegments(S,hF[e],r,void 0,void 0,u)},[t,e,r,u]);const{cells:h,margin:x,numCells:y,calculatedImageSettings:v}=me.useMemo(()=>{let b=m.getModules();const S=yF(n,s),C=b.length+S*2,I=xF(b,l,S,i);return{cells:b,margin:S,numCells:C,calculatedImageSettings:I}},[m,l,i,n,s]);return{qrcode:m,margin:x,cells:h,numCells:y,calculatedImageSettings:v}}var wF=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),vF=me.forwardRef(function(e,r){const n=e,{value:s,size:i=m3,level:l=p3,bgColor:u=g3,fgColor:m=x3,includeMargin:h=y3,minVersion:x=w3,boostLevel:y,marginSize:v,imageSettings:b}=n,C=wg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=C,R=wg(C,["style"]),A=b==null?void 0:b.src,N=me.useRef(null),O=me.useRef(null),k=me.useCallback(G=>{N.current=G,typeof r=="function"?r(G):r&&(r.current=G)},[r]),[F,B]=me.useState(!1),{margin:P,cells:j,numCells:W,calculatedImageSettings:Y}=_3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:h,marginSize:v,imageSettings:b,size:i});me.useEffect(()=>{if(N.current!=null){const G=N.current,H=G.getContext("2d");if(!H)return;let te=j;const J=O.current,Z=Y!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;Z&&Y.excavation!=null&&(te=b3(j,Y.excavation));const K=window.devicePixelRatio||1;G.height=G.width=i*K;const ne=i/W*K;H.scale(ne,ne),H.fillStyle=u,H.fillRect(0,0,W,W),H.fillStyle=m,wF?H.fill(new Path2D(v3(te,P))):j.forEach(function(pe,ae){pe.forEach(function(le,fe){le&&H.fillRect(fe+P,ae+P,1,1)})}),Y&&(H.globalAlpha=Y.opacity),Z&&H.drawImage(J,Y.x+P,Y.y+P,Y.w,Y.h)}}),me.useEffect(()=>{B(!1)},[A]);const z=yg({height:i,width:i},I);let X=null;return A!=null&&(X=me.createElement("img",{src:A,key:A,style:{display:"none"},onLoad:()=>{B(!0)},ref:O,crossOrigin:Y==null?void 0:Y.crossOrigin})),me.createElement(me.Fragment,null,me.createElement("canvas",yg({style:z,height:i,width:i,ref:k,role:"img"},R)),X)});vF.displayName="QRCodeCanvas";var Qh=me.forwardRef(function(e,r){const n=e,{value:s,size:i=m3,level:l=p3,bgColor:u=g3,fgColor:m=x3,includeMargin:h=y3,minVersion:x=w3,boostLevel:y,title:v,marginSize:b,imageSettings:S}=n,C=wg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:R,numCells:A,calculatedImageSettings:N}=_3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:h,marginSize:b,imageSettings:S,size:i});let O=R,k=null;S!=null&&N!=null&&(N.excavation!=null&&(O=b3(R,N.excavation)),k=me.createElement("image",{href:S.src,height:N.h,width:N.w,x:N.x+I,y:N.y+I,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const F=v3(O,I);return me.createElement("svg",yg({height:i,width:i,viewBox:`0 0 ${A} ${A}`,ref:r,role:"img"},C),!!v&&me.createElement("title",null,v),me.createElement("path",{fill:u,d:`M0,0 h${A}v${A}H0z`,shapeRendering:"crispEdges"}),me.createElement("path",{fill:m,d:F,shapeRendering:"crispEdges"}),k)});Qh.displayName="QRCodeSVG";const bF=()=>{const t=Ko(),e=rn(),{order:r,restaurant:n,orderType:s}=t.state||{};return!r||!n?(e("/home"),null):d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:d.jsxs("div",{className:"max-w-md w-full space-y-6",children:[d.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[d.jsx("div",{className:"w-20 h-20 rounded-full luxury-gradient flex items-center justify-center",children:d.jsx(Mx,{className:"w-12 h-12 text-white"})}),d.jsx("h1",{className:"text-3xl font-bold text-center",children:"Payment Successful!"}),d.jsx("p",{className:"text-muted-foreground text-center",children:s==="dine_in"?"Your table is ready":"Your order is confirmed"})]}),d.jsxs($e,{className:"p-6 space-y-4 luxury-shadow",children:[d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("h2",{className:"font-semibold text-lg",children:"Your QR Code"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Show this code at ",n.name," to confirm your booking"]})]}),d.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:d.jsx(Qh,{value:r.qr_code,size:200,level:"H",includeMargin:!0})}),d.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),d.jsx("span",{className:"font-medium",children:r.id.slice(0,8)})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),d.jsx("span",{className:"font-medium",children:n.name})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Type"}),d.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Amount"}),d.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(De,{onClick:()=>e("/orders"),className:"w-full luxury-gradient",size:"lg",children:"View My Orders"}),d.jsxs(De,{onClick:()=>e("/home"),variant:"outline",className:"w-full",size:"lg",children:[d.jsx(UE,{className:"mr-2 h-5 w-5"}),"Back to Home"]})]}),d.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"A confirmation has been sent to your registered email"})]})})},yb={paid:"bg-blue-500",preparing:"bg-yellow-500",ready:"bg-green-500",served:"bg-purple-500",completed:"bg-gray-500",cancelled:"bg-red-500"},_F=()=>{var h,x,y;const[t,e]=E.useState([]),[r,n]=E.useState(null),[s,i]=E.useState(!1),[l,u]=E.useState(!0);E.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:{user:v}}=await ue.auth.getUser();if(!v){we.error("Please sign in to view your orders"),u(!1);return}const{data:b,error:S}=await ue.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          )
        `).eq("customer_id",v.id).order("created_at",{ascending:!1});S&&(console.error("Error fetching orders:",S),we.error("Failed to load orders")),e(b||[])}catch(v){console.error("Error fetching orders:",v),we.error("Failed to load orders")}finally{u(!1)}};return l?d.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):d.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[d.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Orders"}),d.jsx("p",{className:"text-muted-foreground",children:"Track your bookings and orders"})]})}),d.jsx("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:t.filter(v=>v.status!=="completed").length===0?d.jsxs($e,{className:"p-8 text-center space-y-2",children:[d.jsx("p",{className:"text-muted-foreground",children:"No active orders"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Your completed orders are now available in your profile under Order History."})]}):t.filter(v=>v.status!=="completed").map(v=>{var b,S,C,I;return d.jsx($e,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>n(v),children:d.jsxs("div",{className:"flex gap-4 p-4",children:[d.jsx("img",{src:(b=v.restaurants)==null?void 0:b.image_url,alt:(S=v.restaurants)==null?void 0:S.name,className:"w-20 h-20 rounded-lg object-cover"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:(C=v.restaurants)==null?void 0:C.name}),d.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(I=v.order_type)==null?void 0:I.replace("_"," ")})]}),d.jsx(fn,{className:`${yb[v.status]} text-white border-0`,children:v.status})]}),d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[d.jsx(A0,{className:"h-3 w-3"}),(()=>{const R=new Date(v.created_at),A=String(R.getDate()).padStart(2,"0"),N=String(R.getMonth()+1).padStart(2,"0"),O=R.getFullYear();let k=R.getHours();const F=String(R.getMinutes()).padStart(2,"0"),B=k>=12?"PM":"AM";return k=k%12||12,`${A}/${N}/${O} - ${k}:${F} ${B}`})()]}),d.jsxs("span",{className:"font-semibold text-primary",children:[v.total_amount.toLocaleString()," MMK"]})]})]})]})},v.id)})}),d.jsx(Xs,{open:!!r&&!s,onOpenChange:v=>{v||(n(null),i(!1))},children:d.jsxs(_s,{className:"w-full max-w-md",children:[d.jsx(bi,{children:d.jsx(_i,{children:"Order Details"})}),r&&d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-white rounded-xl shadow-sm",children:[d.jsx("div",{className:"text-xs font-medium text-muted-foreground tracking-wide uppercase text-center",children:"Present this QR code at the restaurant"}),d.jsx("button",{type:"button",className:"mt-1",onClick:()=>i(!0),children:d.jsx(Qh,{value:r.qr_code,size:220,level:"H",includeMargin:!0})}),d.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center",children:"Tap the QR code to enlarge for easier scanning."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),d.jsx("span",{className:"font-medium",children:(h=r.restaurants)==null?void 0:h.name})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),d.jsx("span",{className:"font-medium capitalize",children:(x=r.order_type)==null?void 0:x.replace("_"," ")})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Payment Method"}),d.jsx("span",{className:"font-medium uppercase",children:r.payment_method})]}),d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Status"}),d.jsx(fn,{className:`${yb[r.status]} text-white border-0`,children:r.status})]}),d.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[d.jsx("span",{className:"font-semibold",children:"Total Amount"}),d.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold text-sm",children:"Items"}),(y=r.order_items)==null?void 0:y.map((v,b)=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[v.name," x ",v.quantity]}),d.jsxs("span",{children:[(v.price*v.quantity).toLocaleString()," MMK"]})]},b))]})]})]})}),d.jsx(Xs,{open:!!r&&s,onOpenChange:v=>{v||i(!1)},children:d.jsx(_s,{className:"max-w-sm w-full bg-background border-none shadow-none p-0 flex flex-col items-center justify-center",children:r&&d.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[d.jsx("div",{className:"text-[0.65rem] font-medium text-muted-foreground text-center mt-2",children:"Show this QR code to the restaurant for scanning"}),d.jsx("div",{className:"w-full flex justify-center",children:d.jsx(Qh,{value:r.qr_code,size:360,level:"H",includeMargin:!1})}),d.jsx(De,{variant:"outline",size:"sm",className:"mt-1 mb-2 w-32",onClick:()=>i(!1),children:"Close"})]})})}),d.jsx($0,{})]})};function vg(t,[e,r]){return Math.min(r,Math.max(e,t))}function CF(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var Vy="ScrollArea",[C3,hH]=pn(Vy),[EF,Cs]=C3(Vy),E3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...l}=t,[u,m]=E.useState(null),[h,x]=E.useState(null),[y,v]=E.useState(null),[b,S]=E.useState(null),[C,I]=E.useState(null),[R,A]=E.useState(0),[N,O]=E.useState(0),[k,F]=E.useState(!1),[B,P]=E.useState(!1),j=Je(e,Y=>m(Y)),W=Uc(s);return d.jsx(EF,{scope:r,type:n,dir:W,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:x,content:y,onContentChange:v,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:k,onScrollbarXEnabledChange:F,scrollbarY:C,onScrollbarYChange:I,scrollbarYEnabled:B,onScrollbarYEnabledChange:P,onCornerWidthChange:A,onCornerHeightChange:O,children:d.jsx(Le.div,{dir:W,...l,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});E3.displayName=Vy;var S3="ScrollAreaViewport",A3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=t,l=Cs(S3,r),u=E.useRef(null),m=Je(e,u,l.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),d.jsx(Le.div,{"data-radix-scroll-area-viewport":"",...i,ref:m,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:d.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});A3.displayName=S3;var Ei="ScrollAreaScrollbar",Hy=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,u=t.orientation==="horizontal";return E.useEffect(()=>(u?i(!0):l(!0),()=>{u?i(!1):l(!1)}),[u,i,l]),s.type==="hover"?d.jsx(SF,{...n,ref:e,forceMount:r}):s.type==="scroll"?d.jsx(AF,{...n,ref:e,forceMount:r}):s.type==="auto"?d.jsx(N3,{...n,ref:e,forceMount:r}):s.type==="always"?d.jsx($y,{...n,ref:e}):null});Hy.displayName=Ei;var SF=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),[i,l]=E.useState(!1);return E.useEffect(()=>{const u=s.scrollArea;let m=0;if(u){const h=()=>{window.clearTimeout(m),l(!0)},x=()=>{m=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(m),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",x)}}},[s.scrollArea,s.scrollHideDelay]),d.jsx(tn,{present:r||i,children:d.jsx(N3,{"data-state":i?"visible":"hidden",...n,ref:e})})}),AF=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Q0(()=>m("SCROLL_END"),100),[u,m]=CF("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>m("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,s.scrollHideDelay,m]),E.useEffect(()=>{const h=s.viewport,x=i?"scrollLeft":"scrollTop";if(h){let y=h[x];const v=()=>{const b=h[x];y!==b&&(m("SCROLL"),l()),y=b};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,m,l]),d.jsx(tn,{present:r||u!=="hidden",children:d.jsx($y,{"data-state":u==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Ae(t.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:Ae(t.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),N3=E.forwardRef((t,e)=>{const r=Cs(Ei,t.__scopeScrollArea),{forceMount:n,...s}=t,[i,l]=E.useState(!1),u=t.orientation==="horizontal",m=Q0(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;l(u?h:x)}},10);return Nc(r.viewport,m),Nc(r.content,m),d.jsx(tn,{present:n||i,children:d.jsx($y,{"data-state":i?"visible":"hidden",...s,ref:e})})}),$y=E.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Cs(Ei,t.__scopeScrollArea),i=E.useRef(null),l=E.useRef(0),[u,m]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=M3(u.viewport,u.content),x={...n,sizes:u,onSizesChange:m,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function y(v,b){return MF(v,l.current,u,b)}return r==="horizontal"?d.jsx(NF,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,b=wb(v,u,s.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=y(v,s.dir))}}):r==="vertical"?d.jsx(TF,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,b=wb(v,u);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=y(v))}}):null}),NF=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Cs(Ei,t.__scopeScrollArea),[l,u]=E.useState(),m=E.useRef(null),h=Je(e,m,i.onScrollbarXChange);return E.useEffect(()=>{m.current&&u(getComputedStyle(m.current))},[m]),d.jsx(I3,{"data-orientation":"horizontal",...s,ref:h,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":K0(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,y)=>{if(i.viewport){const v=i.viewport.scrollLeft+x.deltaX;t.onWheelScroll(v),k3(v,y)&&x.preventDefault()}},onResize:()=>{m.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:Jh(l.paddingLeft),paddingEnd:Jh(l.paddingRight)}})}})}),TF=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Cs(Ei,t.__scopeScrollArea),[l,u]=E.useState(),m=E.useRef(null),h=Je(e,m,i.onScrollbarYChange);return E.useEffect(()=>{m.current&&u(getComputedStyle(m.current))},[m]),d.jsx(I3,{"data-orientation":"vertical",...s,ref:h,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":K0(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,y)=>{if(i.viewport){const v=i.viewport.scrollTop+x.deltaY;t.onWheelScroll(v),k3(v,y)&&x.preventDefault()}},onResize:()=>{m.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:Jh(l.paddingTop),paddingEnd:Jh(l.paddingBottom)}})}})}),[IF,T3]=C3(Ei),I3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:m,onDragScroll:h,onWheelScroll:x,onResize:y,...v}=t,b=Cs(Ei,r),[S,C]=E.useState(null),I=Je(e,j=>C(j)),R=E.useRef(null),A=E.useRef(""),N=b.viewport,O=n.content-n.viewport,k=cr(x),F=cr(m),B=Q0(y,10);function P(j){if(R.current){const W=j.clientX-R.current.left,Y=j.clientY-R.current.top;h({x:W,y:Y})}}return E.useEffect(()=>{const j=W=>{const Y=W.target;(S==null?void 0:S.contains(Y))&&k(W,O)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[N,S,O,k]),E.useEffect(F,[n,F]),Nc(S,B),Nc(b.content,B),d.jsx(IF,{scope:r,scrollbar:S,hasThumb:s,onThumbChange:cr(i),onThumbPointerUp:cr(l),onThumbPositionChange:F,onThumbPointerDown:cr(u),children:d.jsx(Le.div,{...v,ref:I,style:{position:"absolute",...v.style},onPointerDown:Ae(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),R.current=S.getBoundingClientRect(),A.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),P(j))}),onPointerMove:Ae(t.onPointerMove,P),onPointerUp:Ae(t.onPointerUp,j=>{const W=j.target;W.hasPointerCapture(j.pointerId)&&W.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=A.current,b.viewport&&(b.viewport.style.scrollBehavior=""),R.current=null})})})}),Zh="ScrollAreaThumb",R3=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=T3(Zh,t.__scopeScrollArea);return d.jsx(tn,{present:r||s.hasThumb,children:d.jsx(RF,{ref:e,...n})})}),RF=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,i=Cs(Zh,r),l=T3(Zh,r),{onThumbPositionChange:u}=l,m=Je(e,y=>l.onThumbChange(y)),h=E.useRef(void 0),x=Q0(()=>{h.current&&(h.current(),h.current=void 0)},100);return E.useEffect(()=>{const y=i.viewport;if(y){const v=()=>{if(x(),!h.current){const b=jF(y,u);h.current=b,u()}};return u(),y.addEventListener("scroll",v),()=>y.removeEventListener("scroll",v)}},[i.viewport,x,u]),d.jsx(Le.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ae(t.onPointerDownCapture,y=>{const b=y.target.getBoundingClientRect(),S=y.clientX-b.left,C=y.clientY-b.top;l.onThumbPointerDown({x:S,y:C})}),onPointerUp:Ae(t.onPointerUp,l.onThumbPointerUp)})});R3.displayName=Zh;var Wy="ScrollAreaCorner",O3=E.forwardRef((t,e)=>{const r=Cs(Wy,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?d.jsx(OF,{...t,ref:e}):null});O3.displayName=Wy;var OF=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Cs(Wy,r),[i,l]=E.useState(0),[u,m]=E.useState(0),h=!!(i&&u);return Nc(s.scrollbarX,()=>{var y;const x=((y=s.scrollbarX)==null?void 0:y.offsetHeight)||0;s.onCornerHeightChange(x),m(x)}),Nc(s.scrollbarY,()=>{var y;const x=((y=s.scrollbarY)==null?void 0:y.offsetWidth)||0;s.onCornerWidthChange(x),l(x)}),h?d.jsx(Le.div,{...n,ref:e,style:{width:i,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Jh(t){return t?parseInt(t,10):0}function M3(t,e){const r=t/e;return isNaN(r)?0:r}function K0(t){const e=M3(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function MF(t,e,r,n="ltr"){const s=K0(r),i=s/2,l=e||i,u=s-l,m=r.scrollbar.paddingStart+l,h=r.scrollbar.size-r.scrollbar.paddingEnd-u,x=r.content-r.viewport,y=n==="ltr"?[0,x]:[x*-1,0];return j3([m,h],y)(t)}function wb(t,e,r="ltr"){const n=K0(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,l=e.content-e.viewport,u=i-n,m=r==="ltr"?[0,l]:[l*-1,0],h=vg(t,m);return j3([0,l],[0,u])(h)}function j3(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function k3(t,e){return t>0&&t<e}var jF=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},l=r.left!==i.left,u=r.top!==i.top;(l||u)&&e(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Q0(t,e){const r=cr(t),n=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),E.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Nc(t,e){const r=cr(e);gr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var P3=E3,kF=A3,PF=O3;const Gy=E.forwardRef(({className:t,children:e,...r},n)=>d.jsxs(P3,{ref:n,className:Te("relative overflow-hidden",t),...r,children:[d.jsx(kF,{className:"h-full w-full rounded-[inherit]",children:e}),d.jsx(D3,{}),d.jsx(PF,{})]}));Gy.displayName=P3.displayName;const D3=E.forwardRef(({className:t,orientation:e="vertical",...r},n)=>d.jsx(Hy,{ref:n,orientation:e,className:Te("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:d.jsx(R3,{className:"relative flex-1 rounded-full bg-border"})}));D3.displayName=Hy.displayName;const DF=()=>{const{user:t,signOut:e}=gn(),r=rn(),[n,s]=E.useState(null),[i,l]=E.useState([]),[u,m]=E.useState(!1),[h,x]=E.useState({full_name:"",phone:""}),{loading:y,summary:v,badgeLabel:b,badgeDescription:S,badgeIcon:C}=yT(),I=()=>{const k="w-4 h-4";switch(C){case"compass":return d.jsx(BE,{className:k});case"star":return d.jsx(gc,{className:k});case"shield":return d.jsx(Ih,{className:k});case"crown":return d.jsx(FE,{className:k});case"sparkles":default:return d.jsx(ed,{className:k})}};E.useEffect(()=>{t&&(R(),A())},[t]);const R=async()=>{try{const{data:k,error:F}=await ue.from("profiles").select("*").eq("id",t==null?void 0:t.id).single();if(F)throw F;s(k),x({full_name:k.full_name||"",phone:k.phone||""})}catch(k){console.error("Error fetching profile:",k)}},A=async()=>{if(t)try{const{data:k,error:F}=await ue.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          ),
          order_items
        `).eq("customer_id",t.id).eq("status","completed").order("created_at",{ascending:!1});if(F)throw F;l(k||[])}catch(k){console.error("Error fetching order history:",k)}},N=async()=>{try{const{error:k}=await ue.from("profiles").update({full_name:h.full_name,phone:h.phone}).eq("id",t==null?void 0:t.id);if(k)throw k;we.success("Profile updated successfully"),m(!1),R()}catch(k){console.error("Error updating profile:",k),we.error("Failed to update profile")}},O=async()=>{await e(),r("/auth"),we.success("Signed out successfully")};return d.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[d.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:d.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings"})]}),d.jsx(De,{onClick:O,variant:"outline",size:"icon",className:"shrink-0",children:d.jsx(N0,{className:"h-4 w-4"})})]})}),d.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[d.jsxs($e,{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center relative",children:[d.jsx(zs,{className:"w-8 h-8 text-white"}),d.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-background border border-yellow-400 flex items-center justify-center shadow-sm",children:I()})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-xl font-semibold",children:(n==null?void 0:n.full_name)||"User"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email}),d.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[d.jsx(fn,{className:"px-2 py-0.5 text-[9px] rounded-full bg-primary/10 text-primary border-primary/20",children:y?"Calculating badge...":b||"Newbie"}),v&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"inline-flex items-baseline gap-1 px-2 py-0.5 rounded-full bg-primary/10 border border-primary/30",children:[d.jsx("span",{className:"text-[11px] font-semibold text-primary",children:v.total_points}),d.jsx("span",{className:"text-[8px] uppercase tracking-wide text-primary/80",children:"pts"})]}),d.jsxs("span",{className:"text-[9px] text-muted-foreground/80",children:[v.total_completed_orders," completed orders"]})]})]})]}),d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>m(!u),children:d.jsx(jx,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/40 rounded-xl px-3 py-2",children:S}),u?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"full_name",children:"Full Name"}),d.jsx(ot,{id:"full_name",value:h.full_name,onChange:k=>x({...h,full_name:k.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"phone",children:"Phone"}),d.jsx(ot,{id:"phone",value:h.phone,onChange:k=>x({...h,phone:k.target.value})})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(De,{onClick:N,className:"flex-1 luxury-gradient",children:"Save Changes"}),d.jsx(De,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[d.jsx(zs,{className:"h-4 w-4 text-muted-foreground"}),d.jsx("span",{className:"text-muted-foreground",children:"Name:"}),d.jsx("span",{className:"font-medium",children:(n==null?void 0:n.full_name)||"Not set"})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[d.jsx(QM,{className:"h-4 w-4 text-muted-foreground"}),d.jsx("span",{className:"text-muted-foreground",children:"Email:"}),d.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[d.jsx(zE,{className:"h-4 w-4 text-muted-foreground"}),d.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),d.jsx("span",{className:"font-medium",children:(n==null?void 0:n.phone)||"Not set"})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Orders History"}),d.jsxs($e,{className:"p-4 luxury-gradient text-white flex items-center justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide opacity-80",children:"Total Spent"}),d.jsxs("p",{className:"text-2xl font-semibold",children:[i.reduce((k,F)=>k+(F.total_amount||0),0).toLocaleString()," ","MMK"]})]}),d.jsxs("div",{className:"text-right text-[10px] opacity-80",children:[d.jsx("p",{children:"Completed orders only"}),d.jsxs("p",{children:[i.length," orders"]})]})]}),i.length===0?d.jsx($e,{className:"p-4 text-sm text-muted-foreground",children:"No completed orders yet. Once your orders are completed, they will appear here."}):d.jsx($e,{className:"p-0",children:d.jsx(Gy,{className:"max-h-72",children:d.jsx("div",{className:"divide-y",children:i.map(k=>{var F,B,P,j,W;return d.jsxs("div",{className:"px-4 py-3 space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:(F=k.restaurants)==null?void 0:F.image_url,alt:(B=k.restaurants)==null?void 0:B.name,className:"w-10 h-10 rounded-md object-cover"}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:(P=k.restaurants)==null?void 0:P.name}),d.jsxs("p",{className:"text-[11px] text-muted-foreground capitalize",children:[(j=k.order_type)==null?void 0:j.replace("_"," ")," "," ",new Date(k.created_at).toLocaleDateString()]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"text-xs font-semibold text-primary",children:[(W=k.total_amount)==null?void 0:W.toLocaleString()," MMK"]}),d.jsx(fn,{className:"mt-1 bg-gray-500 text-white border-0 text-[9px]",children:"Completed"})]})]})})]}),Array.isArray(k.order_items)&&k.order_items.length>0&&d.jsx("div",{className:"pl-13 text-[10px] text-muted-foreground leading-snug",children:k.order_items.map(Y=>`${Y.name} x${Y.quantity}`).join("  ")})]},k.id)})})})})]})]}),d.jsx($0,{})]})};var L3={exports:{}},B3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=E;function LF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var BF=typeof Object.is=="function"?Object.is:LF,FF=Tc.useState,UF=Tc.useEffect,zF=Tc.useLayoutEffect,VF=Tc.useDebugValue;function HF(t,e){var r=e(),n=FF({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return zF(function(){s.value=r,s.getSnapshot=e,Rp(s)&&i({inst:s})},[t,r,e]),UF(function(){return Rp(s)&&i({inst:s}),t(function(){Rp(s)&&i({inst:s})})},[t]),VF(r),r}function Rp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!BF(t,r)}catch{return!0}}function $F(t,e){return e()}var WF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$F:HF;B3.useSyncExternalStore=Tc.useSyncExternalStore!==void 0?Tc.useSyncExternalStore:WF;L3.exports=B3;var GF=L3.exports;function YF(){return GF.useSyncExternalStore(qF,()=>!0,()=>!1)}function qF(){return()=>{}}var Yy="Avatar",[XF,mH]=pn(Yy),[KF,F3]=XF(Yy),U3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,i]=E.useState("idle");return d.jsx(KF,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:d.jsx(Le.span,{...n,ref:e})})});U3.displayName=Yy;var z3="AvatarImage",V3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=t,l=F3(z3,r),u=QF(n,i),m=cr(h=>{s(h),l.onImageLoadingStatusChange(h)});return gr(()=>{u!=="idle"&&m(u)},[u,m]),u==="loaded"?d.jsx(Le.img,{...i,ref:e,src:n}):null});V3.displayName=z3;var H3="AvatarFallback",$3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,i=F3(H3,r),[l,u]=E.useState(n===void 0);return E.useEffect(()=>{if(n!==void 0){const m=window.setTimeout(()=>u(!0),n);return()=>window.clearTimeout(m)}},[n]),l&&i.imageLoadingStatus!=="loaded"?d.jsx(Le.span,{...s,ref:e}):null});$3.displayName=H3;function vb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QF(t,{referrerPolicy:e,crossOrigin:r}){const n=YF(),s=E.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[l,u]=E.useState(()=>vb(i,t));return gr(()=>{u(vb(i,t))},[i,t]),gr(()=>{const m=y=>()=>{u(y)};if(!i)return;const h=m("loaded"),x=m("error");return i.addEventListener("load",h),i.addEventListener("error",x),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",x)}},[i,r,e]),l}var W3=U3,G3=V3,Y3=$3;const q3=E.forwardRef(({className:t,...e},r)=>d.jsx(W3,{ref:r,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));q3.displayName=W3.displayName;const X3=E.forwardRef(({className:t,...e},r)=>d.jsx(G3,{ref:r,className:Te("aspect-square h-full w-full",t),...e}));X3.displayName=G3.displayName;const K3=E.forwardRef(({className:t,...e},r)=>d.jsx(Y3,{ref:r,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));K3.displayName=Y3.displayName;const Dd=E.forwardRef(({className:t,...e},r)=>d.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Dd.displayName="Textarea";function Cl({className:t,...e}){return d.jsx("div",{className:Te("relative overflow-hidden rounded-md bg-muted/70","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_1.2s_infinite]",t),...e})}const ZF=()=>{const t=rn(),[e,r]=E.useState([]),[n,s]=E.useState({}),[i,l]=E.useState(new Set),[u,m]=E.useState(new Set),[h,x]=E.useState({}),[y,v]=E.useState(!0),[b,S]=E.useState({}),[C,I]=E.useState({}),[R,A]=E.useState(null);E.useEffect(()=>{(async()=>{var z;const{data:W,error:Y}=await ue.auth.getUser();Y&&console.error("Error getting current user for blog comments:",Y),A(((z=W==null?void 0:W.user)==null?void 0:z.id)??null),await N()})()},[]);const N=async()=>{try{v(!0);const{data:j,error:W}=await ue.from("blog_posts").select(`
          *,
          restaurants (
            name,
            image_url
          ),
          comments_count:blog_comments(count)
        `).eq("is_published",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if(W){console.error("Error loading blog posts",W),r([]);return}const Y=(j==null?void 0:j.map(z=>{var X;return{...z,comments_count:Array.isArray(z.comments_count)&&z.comments_count.length>0&&typeof((X=z.comments_count[0])==null?void 0:X.count)=="number"?z.comments_count[0].count:0}}))||[];r(Y)}catch(j){console.error("Unexpected error loading blog posts",j),r([])}finally{v(!1)}},O=j=>{m(W=>{const Y=new Set(W);return Y.has(j)?Y.delete(j):Y.add(j),Y})},k=async j=>{const W=new Set(i);if(W.has(j)){W.delete(j),l(W);return}W.add(j),l(W),n[j]||await F(j)},F=async j=>{try{S(X=>({...X,[j]:!0}));const{data:W,error:Y}=await ue.from("blog_comments").select(`
          *,
          profiles:customer_id (
            full_name
          )
        `).eq("blog_post_id",j).eq("is_deleted",!1).order("created_at",{ascending:!0});if(Y){console.error("Error loading comments",Y);return}const z={...n};z[j]=W||[],s(z)}catch(W){console.error("Unexpected error loading comments",W)}finally{S(W=>({...W,[j]:!1}))}},B=async j=>{const W=(h[j]||"").trim();if(!(!W||!R))try{I(X=>({...X,[j]:!0}));const{data:Y,error:z}=await ue.from("blog_comments").insert({blog_post_id:j,customer_id:R,content:W}).select("*").single();if(z){console.error("Error adding comment",z);return}if(s(X=>{const G=X[j]||[];return{...X,[j]:[...G,Y]}}),x(X=>({...X,[j]:""})),r(X=>X.map(G=>G.id===j?{...G,comments_count:(G.comments_count||0)+1}:G)),!i.has(j)){const X=new Set(i);X.add(j),l(X)}}catch(Y){console.error("Unexpected error adding comment",Y)}finally{I(Y=>({...Y,[j]:!1}))}},P=()=>d.jsxs($e,{className:"p-4 space-y-3 bg-card/60 backdrop-blur-sm border-border/40 animate-pulse",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Cl,{className:"w-10 h-10 rounded-full"}),d.jsxs("div",{className:"space-y-1 flex-1",children:[d.jsx(Cl,{className:"h-3 w-24"}),d.jsx(Cl,{className:"h-3 w-40"})]})]}),d.jsx(Cl,{className:"h-4 w-3/4"}),d.jsx(Cl,{className:"h-3 w-full"}),d.jsx(Cl,{className:"h-3 w-5/6"})]});return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10 pb-20",children:[d.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:d.jsxs("div",{className:"max-w-md mx-auto px-5 py-4 flex items-center justify-between gap-3",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ed,{className:"w-4 h-4 text-primary"}),d.jsx("p",{className:"text-[10px] uppercase tracking-[0.18em] text-primary/80",children:"Stories from our restaurants"})]}),d.jsx("h1",{className:"text-2xl font-semibold text-foreground leading-tight",children:"Food Journal"}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Discover promotions, new menus, and behind-the-scenes stories from all our partners."})]}),d.jsx(De,{variant:"outline",size:"icon",className:"rounded-full border-border/70 hover:bg-primary/5",onClick:N,children:d.jsx(Pv,{className:"w-4 h-4 rotate-90"})})]})}),d.jsxs("div",{className:"max-w-md mx-auto px-5 pt-4 pb-4 space-y-4",children:[y&&d.jsxs(d.Fragment,{children:[P(),P()]}),!y&&e.length===0&&d.jsx($e,{className:"p-6 text-center bg-card/60 backdrop-blur-sm border-dashed border-border/60",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"No blog posts yet. Restaurants will share their promotions and menu highlights here."})}),!y&&e.map(j=>{var X,G,H,te,J;const W=n[j.id]||[],Y=i.has(j.id),z=(((X=j.restaurants)==null?void 0:X.name)||"R").split(" ").map(Z=>Z[0]).join("").slice(0,2).toUpperCase();return d.jsxs($e,{className:Te("group relative overflow-hidden border-border/40 bg-card/90 backdrop-blur-md transition-all duration-300","hover:-translate-y-0.5 hover:shadow-[0_14px_40px_rgba(15,23,42,0.12)]"),children:[j.is_pinned&&d.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-primary/60 to-amber-400"}),d.jsxs("div",{className:"p-4 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs(q3,{className:"w-9 h-9 ring-1 ring-primary/15 shadow-sm",children:[((G=j.restaurants)==null?void 0:G.image_url)&&d.jsx(X3,{src:j.restaurants.image_url,alt:((H=j.restaurants)==null?void 0:H.name)||"Restaurant"}),d.jsx(K3,{className:"bg-primary/10 text-[9px] text-primary",children:z})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-[11px] font-semibold text-foreground truncate",children:((te=j.restaurants)==null?void 0:te.name)||"Featured Restaurant"}),d.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-muted-foreground",children:[d.jsxs("span",{className:"inline-flex items-center gap-1",children:[d.jsx(A0,{className:"w-3 h-3"}),new Date(j.created_at).toLocaleDateString()]}),j.is_pinned&&d.jsx(fn,{variant:"outline",className:"h-4 px-1.5 text-[8px] border-primary/40 text-primary bg-primary/5",children:"Highlight"})]})]})]}),j.hero_image_url&&d.jsx("div",{className:"mt-1 overflow-hidden rounded-xl border border-border/40 bg-muted/40",children:d.jsx("img",{src:j.hero_image_url,alt:j.title,className:"w-full h-32 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h2",{className:"text-base font-semibold text-foreground leading-snug",children:j.title}),u.has(j.id)?d.jsx("p",{className:"text-[11px] text-muted-foreground font-sans whitespace-pre-line leading-relaxed",children:j.content}):d.jsx("p",{className:"text-[11px] text-muted-foreground font-sans line-clamp-3 leading-relaxed",children:j.excerpt||j.content.slice(0,180).concat(j.content.length>180?"":"")})]}),d.jsxs("div",{className:"flex items-center justify-between pt-2 gap-3",children:[d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsxs("button",{type:"button",onClick:()=>O(j.id),className:"inline-flex items-center gap-1 text-[9px] text-primary/90 hover:text-primary underline-offset-2 hover:underline transition-colors",children:[u.has(j.id)?"Show less":"Read more",d.jsx(Pv,{className:Te("w-3 h-3 transition-transform",u.has(j.id)?"rotate-180":"translate-x-0")})]}),d.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-muted-foreground",children:[d.jsx(ZM,{className:"w-3 h-3"}),d.jsx("span",{children:(()=>{const Z=typeof j.comments_count=="number"?j.comments_count:W.length||0;return`${Z} ${Z===1?"comment":"comments"}`})()})]})]}),d.jsxs(De,{variant:"ghost",size:"sm",className:"h-7 px-2 text-[9px] gap-1 text-primary/90 hover:bg-primary/5",onClick:()=>k(j.id),children:[Y?"Hide feedback":"View feedback",d.jsx(Ox,{className:Te("w-3 h-3 transition-transform",Y?"rotate-180":"rotate-0")})]})]})]}),Y&&d.jsxs("div",{className:"border-t border-border/30 bg-muted/30 px-3 pb-3 pt-2 space-y-2",children:[b[j.id]&&d.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Loading comments"}),!b[j.id]&&W.length===0&&d.jsx("p",{className:"text-[9px] text-muted-foreground",children:"No comments yet. Be the first to share your thoughts."}),!b[j.id]&&W.map(Z=>{var pe;const K=((pe=Z.profiles)==null?void 0:pe.full_name)&&Z.profiles.full_name.trim()||`Guest ${Z.customer_id.slice(0,6).toUpperCase()}`,ne=K.split(" ").map(ae=>ae[0]).join("").slice(0,2).toUpperCase();return d.jsxs("div",{className:"flex items-start gap-2 text-[9px] bg-background/60 border border-border/20 rounded-xl px-2 py-1.5",children:[d.jsx("div",{className:"mt-0.5 w-6 h-6 rounded-full bg-gradient-to-br from-amber-400 via-yellow-300 to-amber-500 text-[8px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-amber-300/70",children:ne}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"font-semibold text-foreground/90 truncate max-w-[140px]",children:K}),d.jsx("span",{className:"text-[7px] text-muted-foreground",children:new Date(Z.created_at).toLocaleDateString()})]}),d.jsx("p",{className:"text-[8px] text-muted-foreground leading-snug",children:Z.content})]})]},Z.id)}),d.jsxs("div",{className:"pt-1.5",children:[d.jsx(Dd,{placeholder:R?"Add a thoughtful comment about this promotion or menu":"Sign in to leave a comment.",value:h[j.id]||"",onChange:Z=>x(K=>({...K,[j.id]:Z.target.value})),disabled:!R||!!C[j.id],className:"h-14 text-[9px] resize-none border-border/40 bg-background/80 focus-visible:ring-primary/40"}),d.jsxs("div",{className:"flex justify-end mt-1 gap-2",children:[!R&&d.jsx(De,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[8px] text-muted-foreground",onClick:()=>t("/auth"),children:"Sign in to comment"}),d.jsx(De,{size:"sm",className:"h-6 px-3 text-[8px] rounded-full bg-primary/90 hover:bg-primary shadow-sm",disabled:!R||!((J=h[j.id])!=null&&J.trim())||!!C[j.id],onClick:()=>B(j.id),children:C[j.id]?"Posting":"Post comment"})]})]})]})]},j.id)})]}),d.jsx($0,{})]})};var JF=[" ","Enter","ArrowUp","ArrowDown"],eU=[" ","Enter"],Ga="Select",[Z0,J0,tU]=_0(Ga),[Vc,pH]=pn(Ga,[tU,Lc]),em=Lc(),[rU,ea]=Vc(Ga),[nU,sU]=Vc(Ga),Q3=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:l,defaultValue:u,onValueChange:m,dir:h,name:x,autoComplete:y,disabled:v,required:b,form:S}=t,C=em(e),[I,R]=E.useState(null),[A,N]=E.useState(null),[O,k]=E.useState(!1),F=Uc(h),[B,P]=yi({prop:n,defaultProp:s??!1,onChange:i,caller:Ga}),[j,W]=yi({prop:l,defaultProp:u,onChange:m,caller:Ga}),Y=E.useRef(null),z=I?S||!!I.closest("form"):!0,[X,G]=E.useState(new Set),H=Array.from(X).map(te=>te.props.value).join(";");return d.jsx(Gx,{...C,children:d.jsxs(rU,{required:b,scope:e,trigger:I,onTriggerChange:R,valueNode:A,onValueNodeChange:N,valueNodeHasChildren:O,onValueNodeHasChildrenChange:k,contentId:$s(),value:j,onValueChange:W,open:B,onOpenChange:P,dir:F,triggerPointerDownPosRef:Y,disabled:v,children:[d.jsx(Z0.Provider,{scope:e,children:d.jsx(nU,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(te=>{G(J=>new Set(J).add(te))},[]),onNativeOptionRemove:E.useCallback(te=>{G(J=>{const Z=new Set(J);return Z.delete(te),Z})},[]),children:r})}),z?d.jsxs(bI,{"aria-hidden":!0,required:b,tabIndex:-1,name:x,autoComplete:y,value:j,onChange:te=>W(te.target.value),disabled:v,form:S,children:[j===void 0?d.jsx("option",{value:""}):null,Array.from(X)]},H):null]})})};Q3.displayName=Ga;var Z3="SelectTrigger",J3=E.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=em(r),l=ea(Z3,r),u=l.disabled||n,m=Je(e,l.onTriggerChange),h=J0(r),x=E.useRef("touch"),[y,v,b]=CI(C=>{const I=h().filter(N=>!N.disabled),R=I.find(N=>N.value===l.value),A=EI(I,C,R);A!==void 0&&l.onValueChange(A.value)}),S=C=>{u||(l.onOpenChange(!0),b()),C&&(l.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return d.jsx(Yx,{asChild:!0,...i,children:d.jsx(Le.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":_I(l.value)?"":void 0,...s,ref:m,onClick:Ae(s.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&S(C)}),onPointerDown:Ae(s.onPointerDown,C=>{x.current=C.pointerType;const I=C.target;I.hasPointerCapture(C.pointerId)&&I.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(S(C),C.preventDefault())}),onKeyDown:Ae(s.onKeyDown,C=>{const I=y.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&v(C.key),!(I&&C.key===" ")&&JF.includes(C.key)&&(S(),C.preventDefault())})})})});J3.displayName=Z3;var eI="SelectValue",tI=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:l="",...u}=t,m=ea(eI,r),{onValueNodeHasChildrenChange:h}=m,x=i!==void 0,y=Je(e,m.onValueNodeChange);return gr(()=>{h(x)},[h,x]),d.jsx(Le.span,{...u,ref:y,style:{pointerEvents:"none"},children:_I(m.value)?d.jsx(d.Fragment,{children:l}):i})});tI.displayName=eI;var iU="SelectIcon",rI=E.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return d.jsx(Le.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});rI.displayName=iU;var oU="SelectPortal",nI=t=>d.jsx(Td,{asChild:!0,...t});nI.displayName=oU;var Ya="SelectContent",sI=E.forwardRef((t,e)=>{const r=ea(Ya,t.__scopeSelect),[n,s]=E.useState();if(gr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Ka.createPortal(d.jsx(iI,{scope:t.__scopeSelect,children:d.jsx(Z0.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),i):null}return d.jsx(oI,{...t,ref:e})});sI.displayName=Ya;var Os=10,[iI,ta]=Vc(Ya),aU="SelectContentImpl",lU=za("SelectContent.RemoveScroll"),oI=E.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:u,sideOffset:m,align:h,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:C,avoidCollisions:I,...R}=t,A=ea(Ya,r),[N,O]=E.useState(null),[k,F]=E.useState(null),B=Je(e,be=>O(be)),[P,j]=E.useState(null),[W,Y]=E.useState(null),z=J0(r),[X,G]=E.useState(!1),H=E.useRef(!1);E.useEffect(()=>{if(N)return Dy(N)},[N]),Py();const te=E.useCallback(be=>{const[ke,...Xe]=z().map(je=>je.ref.current),[oe]=Xe.slice(-1),Ee=document.activeElement;for(const je of be)if(je===Ee||(je==null||je.scrollIntoView({block:"nearest"}),je===ke&&k&&(k.scrollTop=0),je===oe&&k&&(k.scrollTop=k.scrollHeight),je==null||je.focus(),document.activeElement!==Ee))return},[z,k]),J=E.useCallback(()=>te([P,N]),[te,P,N]);E.useEffect(()=>{X&&J()},[X,J]);const{onOpenChange:Z,triggerPointerDownPosRef:K}=A;E.useEffect(()=>{if(N){let be={x:0,y:0};const ke=oe=>{var Ee,je;be={x:Math.abs(Math.round(oe.pageX)-(((Ee=K.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((je=K.current)==null?void 0:je.y)??0))}},Xe=oe=>{be.x<=10&&be.y<=10?oe.preventDefault():N.contains(oe.target)||Z(!1),document.removeEventListener("pointermove",ke),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[N,Z,K]),E.useEffect(()=>{const be=()=>Z(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[Z]);const[ne,pe]=CI(be=>{const ke=z().filter(Ee=>!Ee.disabled),Xe=ke.find(Ee=>Ee.ref.current===document.activeElement),oe=EI(ke,be,Xe);oe&&setTimeout(()=>oe.ref.current.focus())}),ae=E.useCallback((be,ke,Xe)=>{const oe=!H.current&&!Xe;(A.value!==void 0&&A.value===ke||oe)&&(j(be),oe&&(H.current=!0))},[A.value]),le=E.useCallback(()=>N==null?void 0:N.focus(),[N]),fe=E.useCallback((be,ke,Xe)=>{const oe=!H.current&&!Xe;(A.value!==void 0&&A.value===ke||oe)&&Y(be)},[A.value]),ze=n==="popper"?bg:aI,ve=ze===bg?{side:u,sideOffset:m,align:h,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:C,avoidCollisions:I}:{};return d.jsx(iI,{scope:r,content:N,viewport:k,onViewportChange:F,itemRefCallback:ae,selectedItem:P,onItemLeave:le,itemTextRefCallback:fe,focusSelectedItem:J,selectedItemText:W,position:n,isPositioned:X,searchRef:ne,children:d.jsx(Y0,{as:lU,allowPinchZoom:!0,children:d.jsx(W0,{asChild:!0,trapped:A.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Ae(s,be=>{var ke;(ke=A.trigger)==null||ke.focus({preventScroll:!0}),be.preventDefault()}),children:d.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:d.jsx(ze,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:be=>be.preventDefault(),...R,...ve,onPlaced:()=>G(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Ae(R.onKeyDown,be=>{const ke=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!ke&&be.key.length===1&&pe(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let oe=z().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(be.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Ee=be.target,je=oe.indexOf(Ee);oe=oe.slice(je+1)}setTimeout(()=>te(oe)),be.preventDefault()}})})})})})})});oI.displayName=aU;var cU="SelectItemAlignedPosition",aI=E.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=ea(Ya,r),l=ta(Ya,r),[u,m]=E.useState(null),[h,x]=E.useState(null),y=Je(e,B=>x(B)),v=J0(r),b=E.useRef(!1),S=E.useRef(!0),{viewport:C,selectedItem:I,selectedItemText:R,focusSelectedItem:A}=l,N=E.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&C&&I&&R){const B=i.trigger.getBoundingClientRect(),P=h.getBoundingClientRect(),j=i.valueNode.getBoundingClientRect(),W=R.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=W.left-P.left,je=j.left-Ee,Me=B.left-je,gt=B.width+Me,St=Math.max(gt,P.width),er=window.innerWidth-Os,he=vg(je,[Os,Math.max(Os,er-St)]);u.style.minWidth=gt+"px",u.style.left=he+"px"}else{const Ee=P.right-W.right,je=window.innerWidth-j.right-Ee,Me=window.innerWidth-B.right-je,gt=B.width+Me,St=Math.max(gt,P.width),er=window.innerWidth-Os,he=vg(je,[Os,Math.max(Os,er-St)]);u.style.minWidth=gt+"px",u.style.right=he+"px"}const Y=v(),z=window.innerHeight-Os*2,X=C.scrollHeight,G=window.getComputedStyle(h),H=parseInt(G.borderTopWidth,10),te=parseInt(G.paddingTop,10),J=parseInt(G.borderBottomWidth,10),Z=parseInt(G.paddingBottom,10),K=H+te+X+Z+J,ne=Math.min(I.offsetHeight*5,K),pe=window.getComputedStyle(C),ae=parseInt(pe.paddingTop,10),le=parseInt(pe.paddingBottom,10),fe=B.top+B.height/2-Os,ze=z-fe,ve=I.offsetHeight/2,be=I.offsetTop+ve,ke=H+te+be,Xe=K-ke;if(ke<=fe){const Ee=Y.length>0&&I===Y[Y.length-1].ref.current;u.style.bottom="0px";const je=h.clientHeight-C.offsetTop-C.offsetHeight,Me=Math.max(ze,ve+(Ee?le:0)+je+J),gt=ke+Me;u.style.height=gt+"px"}else{const Ee=Y.length>0&&I===Y[0].ref.current;u.style.top="0px";const Me=Math.max(fe,H+C.offsetTop+(Ee?ae:0)+ve)+Xe;u.style.height=Me+"px",C.scrollTop=ke-fe+C.offsetTop}u.style.margin=`${Os}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=z+"px",n==null||n(),requestAnimationFrame(()=>b.current=!0)}},[v,i.trigger,i.valueNode,u,h,C,I,R,i.dir,n]);gr(()=>N(),[N]);const[O,k]=E.useState();gr(()=>{h&&k(window.getComputedStyle(h).zIndex)},[h]);const F=E.useCallback(B=>{B&&S.current===!0&&(N(),A==null||A(),S.current=!1)},[N,A]);return d.jsx(dU,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:F,children:d.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:d.jsx(Le.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});aI.displayName=cU;var uU="SelectPopperPosition",bg=E.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Os,...i}=t,l=em(r);return d.jsx(qx,{...l,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bg.displayName=uU;var[dU,qy]=Vc(Ya,{}),_g="SelectViewport",lI=E.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=ta(_g,r),l=qy(_g,r),u=Je(e,i.onViewportChange),m=E.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),d.jsx(Z0.Slot,{scope:r,children:d.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,h=>{const x=h.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=l;if(v!=null&&v.current&&y){const b=Math.abs(m.current-x.scrollTop);if(b>0){const S=window.innerHeight-Os*2,C=parseFloat(y.style.minHeight),I=parseFloat(y.style.height),R=Math.max(C,I);if(R<S){const A=R+b,N=Math.min(S,A),O=A-N;y.style.height=N+"px",y.style.bottom==="0px"&&(x.scrollTop=O>0?O:0,y.style.justifyContent="flex-end")}}}m.current=x.scrollTop})})})]})});lI.displayName=_g;var cI="SelectGroup",[fU,hU]=Vc(cI),mU=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=$s();return d.jsx(fU,{scope:r,id:s,children:d.jsx(Le.div,{role:"group","aria-labelledby":s,...n,ref:e})})});mU.displayName=cI;var uI="SelectLabel",dI=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=hU(uI,r);return d.jsx(Le.div,{id:s.id,...n,ref:e})});dI.displayName=uI;var e0="SelectItem",[pU,fI]=Vc(e0),hI=E.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...l}=t,u=ea(e0,r),m=ta(e0,r),h=u.value===n,[x,y]=E.useState(i??""),[v,b]=E.useState(!1),S=Je(e,A=>{var N;return(N=m.itemRefCallback)==null?void 0:N.call(m,A,n,s)}),C=$s(),I=E.useRef("touch"),R=()=>{s||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(pU,{scope:r,value:n,disabled:s,textId:C,isSelected:h,onItemTextChange:E.useCallback(A=>{y(N=>N||((A==null?void 0:A.textContent)??"").trim())},[]),children:d.jsx(Z0.ItemSlot,{scope:r,value:n,disabled:s,textValue:x,children:d.jsx(Le.div,{role:"option","aria-labelledby":C,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:S,onFocus:Ae(l.onFocus,()=>b(!0)),onBlur:Ae(l.onBlur,()=>b(!1)),onClick:Ae(l.onClick,()=>{I.current!=="mouse"&&R()}),onPointerUp:Ae(l.onPointerUp,()=>{I.current==="mouse"&&R()}),onPointerDown:Ae(l.onPointerDown,A=>{I.current=A.pointerType}),onPointerMove:Ae(l.onPointerMove,A=>{var N;I.current=A.pointerType,s?(N=m.onItemLeave)==null||N.call(m):I.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(l.onPointerLeave,A=>{var N;A.currentTarget===document.activeElement&&((N=m.onItemLeave)==null||N.call(m))}),onKeyDown:Ae(l.onKeyDown,A=>{var O;((O=m.searchRef)==null?void 0:O.current)!==""&&A.key===" "||(eU.includes(A.key)&&R(),A.key===" "&&A.preventDefault())})})})})});hI.displayName=e0;var wu="SelectItemText",mI=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,l=ea(wu,r),u=ta(wu,r),m=fI(wu,r),h=sU(wu,r),[x,y]=E.useState(null),v=Je(e,R=>y(R),m.onItemTextChange,R=>{var A;return(A=u.itemTextRefCallback)==null?void 0:A.call(u,R,m.value,m.disabled)}),b=x==null?void 0:x.textContent,S=E.useMemo(()=>d.jsx("option",{value:m.value,disabled:m.disabled,children:b},m.value),[m.disabled,m.value,b]),{onNativeOptionAdd:C,onNativeOptionRemove:I}=h;return gr(()=>(C(S),()=>I(S)),[C,I,S]),d.jsxs(d.Fragment,{children:[d.jsx(Le.span,{id:m.textId,...i,ref:v}),m.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ka.createPortal(i.children,l.valueNode):null]})});mI.displayName=wu;var pI="SelectItemIndicator",gI=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return fI(pI,r).isSelected?d.jsx(Le.span,{"aria-hidden":!0,...n,ref:e}):null});gI.displayName=pI;var Cg="SelectScrollUpButton",xI=E.forwardRef((t,e)=>{const r=ta(Cg,t.__scopeSelect),n=qy(Cg,t.__scopeSelect),[s,i]=E.useState(!1),l=Je(e,n.onScrollButtonChange);return gr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const h=m.scrollTop>0;i(h)};const m=r.viewport;return u(),m.addEventListener("scroll",u),()=>m.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),s?d.jsx(wI,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:m}=r;u&&m&&(u.scrollTop=u.scrollTop-m.offsetHeight)}}):null});xI.displayName=Cg;var Eg="SelectScrollDownButton",yI=E.forwardRef((t,e)=>{const r=ta(Eg,t.__scopeSelect),n=qy(Eg,t.__scopeSelect),[s,i]=E.useState(!1),l=Je(e,n.onScrollButtonChange);return gr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const h=m.scrollHeight-m.clientHeight,x=Math.ceil(m.scrollTop)<h;i(x)};const m=r.viewport;return u(),m.addEventListener("scroll",u),()=>m.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),s?d.jsx(wI,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:m}=r;u&&m&&(u.scrollTop=u.scrollTop+m.offsetHeight)}}):null});yI.displayName=Eg;var wI=E.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=ta("SelectScrollButton",r),l=E.useRef(null),u=J0(r),m=E.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return E.useEffect(()=>()=>m(),[m]),gr(()=>{var x;const h=u().find(y=>y.ref.current===document.activeElement);(x=h==null?void 0:h.ref.current)==null||x.scrollIntoView({block:"nearest"})},[u]),d.jsx(Le.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Ae(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{m()})})}),gU="SelectSeparator",vI=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return d.jsx(Le.div,{"aria-hidden":!0,...n,ref:e})});vI.displayName=gU;var Sg="SelectArrow",xU=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=em(r),i=ea(Sg,r),l=ta(Sg,r);return i.open&&l.position==="popper"?d.jsx(Xx,{...s,...n,ref:e}):null});xU.displayName=Sg;var yU="SelectBubbleInput",bI=E.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=E.useRef(null),i=Je(n,s),l=Uy(e);return E.useEffect(()=>{const u=s.current;if(!u)return;const m=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(m,"value").set;if(l!==e&&x){const y=new Event("change",{bubbles:!0});x.call(u,e),u.dispatchEvent(y)}},[l,e]),d.jsx(Le.select,{...r,style:{...uE,...r.style},ref:i,defaultValue:e})});bI.displayName=yU;function _I(t){return t===""||t===void 0}function CI(t){const e=cr(t),r=E.useRef(""),n=E.useRef(0),s=E.useCallback(l=>{const u=r.current+l;e(u),function m(h){r.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>m(""),1e3))}(u)},[e]),i=E.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function EI(t,e,r){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let l=wU(t,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==r));const m=l.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return m!==r?m:void 0}function wU(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var vU=Q3,SI=J3,bU=tI,_U=rI,CU=nI,AI=sI,EU=lI,NI=dI,TI=hI,SU=mI,AU=gI,II=xI,RI=yI,OI=vI;const gs=vU,xs=bU,Gn=E.forwardRef(({className:t,children:e,...r},n)=>d.jsxs(SI,{ref:n,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,d.jsx(_U,{asChild:!0,children:d.jsx(Ox,{className:"h-4 w-4 opacity-50"})})]}));Gn.displayName=SI.displayName;const MI=E.forwardRef(({className:t,...e},r)=>d.jsx(II,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(GM,{className:"h-4 w-4"})}));MI.displayName=II.displayName;const jI=E.forwardRef(({className:t,...e},r)=>d.jsx(RI,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(Ox,{className:"h-4 w-4"})}));jI.displayName=RI.displayName;const Yn=E.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>d.jsx(CU,{children:d.jsxs(AI,{ref:s,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[d.jsx(MI,{}),d.jsx(EU,{className:Te("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(jI,{})]})}));Yn.displayName=AI.displayName;const NU=E.forwardRef(({className:t,...e},r)=>d.jsx(NI,{ref:r,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));NU.displayName=NI.displayName;const rt=E.forwardRef(({className:t,children:e,...r},n)=>d.jsxs(TI,{ref:n,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(AU,{children:d.jsx(kE,{className:"h-4 w-4"})})}),d.jsx(SU,{children:e})]}));rt.displayName=TI.displayName;const TU=E.forwardRef(({className:t,...e},r)=>d.jsx(OI,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",t),...e}));TU.displayName=OI.displayName;const IU=()=>{const{user:t}=gn(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[i,l]=E.useState("all"),[u,m]=E.useState("all"),[h,x]=E.useState(""),[y,v]=E.useState(1),b=6;E.useEffect(()=>{t&&S()},[t]);const S=async()=>{try{const{data:P,error:j}=await ue.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(j)throw j;const{data:W,error:Y}=await ue.from("orders").select("*").eq("restaurant_id",P.id).order("created_at",{ascending:!1});if(Y)throw Y;const z=[...new Set((W||[]).map(te=>te.customer_id))],{data:X,error:G}=await ue.rpc("get_order_customers",{customer_ids:z});G&&console.error("Failed to load customer details:",G);const H=(W||[]).map(te=>{const J=X==null?void 0:X.find(Z=>Z.user_id===te.customer_id);return{...te,customer_name:(J==null?void 0:J.full_name)||"Customer",customer_phone:(J==null?void 0:J.phone)||null}});r(H)}catch(P){console.error("Error fetching orders:",P),we.error("Failed to load orders")}finally{s(!1)}},C=async(P,j)=>{try{const{error:W}=await ue.from("orders").update({status:j}).eq("id",P);if(W)throw W;r(Y=>Y.map(z=>z.id===P?{...z,status:j}:z)),we.success("Order status updated")}catch(W){console.error("Error updating order:",W),we.error("Failed to update order status")}};E.useEffect(()=>{const P=j=>{const W=j,{orderId:Y,status:z}=W.detail||{};!Y||!z||r(X=>X.map(G=>G.id===Y?{...G,status:z}:G))};return window.addEventListener("orderStatusUpdated",P),()=>{window.removeEventListener("orderStatusUpdated",P)}},[]);const I=()=>{l("all"),m("all"),x(""),v(1)},R=P=>{const j={paid:{label:"Paid",className:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/10"},preparing:{label:"Preparing",className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/10"},ready:{label:"Ready",className:"bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/10"},completed:{label:"Completed",className:"bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-500/10"},cancelled:{label:"Cancelled",className:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/10"},served:{label:"Served",className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/10"}};return j[P]||j.paid},A=P=>{switch(P){case"paid":return"bg-purple-50/60 dark:bg-purple-500/5";case"preparing":return"bg-blue-50/60 dark:bg-blue-500/5";case"ready":return"bg-green-50/60 dark:bg-green-500/5";case"completed":return"bg-slate-50/60 dark:bg-slate-500/5";case"served":return"bg-emerald-50/60 dark:bg-emerald-500/5";case"cancelled":return"bg-red-50/40 dark:bg-red-500/5";default:return"bg-card"}},N=P=>{const j=new Date(P),Y=Math.floor((new Date().getTime()-j.getTime())/6e4);return Y<60?`${Y} mins ago`:Y<1440?`${Math.floor(Y/60)} hours ago`:`${Math.floor(Y/1440)} days ago`},O=e.filter(P=>{const j=i==="all"?!0:P.order_type===i,W=u==="all"?!0:P.status===u,Y=h?new Date(P.created_at).toISOString().slice(0,10)===h:!0;return j&&W&&Y}),k=Math.max(1,Math.ceil(O.length/b)),F=O.slice((y-1)*b,y*b),B=P=>{P<1||P>k||v(P)};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage incoming orders and update their status"})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-card/60 border border-border/40 rounded-2xl p-3 glass-effect",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Order Type"}),d.jsxs(gs,{value:i,onValueChange:P=>l(P),children:[d.jsx(Gn,{className:"h-9 text-xs",children:d.jsx(xs,{placeholder:"All Types"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All Types"}),d.jsx(rt,{value:"dine_in",children:"Dine In"}),d.jsx(rt,{value:"takeaway",children:"Take Away"})]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Status"}),d.jsxs(gs,{value:u,onValueChange:P=>m(P),children:[d.jsx(Gn,{className:"h-9 text-xs",children:d.jsx(xs,{placeholder:"All Status"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All Status"}),d.jsx(rt,{value:"paid",children:"Paid"}),d.jsx(rt,{value:"preparing",children:"Preparing"}),d.jsx(rt,{value:"ready",children:"Ready"}),d.jsx(rt,{value:"completed",children:"Completed"}),d.jsx(rt,{value:"served",children:"Served"}),d.jsx(rt,{value:"cancelled",children:"Cancelled"})]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Date"}),d.jsx("input",{type:"date",value:h,onChange:P=>x(P.target.value),className:"h-9 w-full rounded-md border border-border/40 bg-background/60 px-2 text-xs text-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/60"})]})]}),d.jsx("div",{className:"flex justify-end -mt-1",children:d.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-1 text-[10px] text-muted-foreground hover:text-primary transition-colors",children:[d.jsx(DE,{className:"w-3 h-3"}),d.jsx("span",{children:"Clear filters"})]})}),n?d.jsx("div",{className:"flex justify-center py-12",children:d.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):O.length===0?d.jsx($e,{children:d.jsx(Ct,{className:"py-12 text-center text-muted-foreground",children:"No orders found for selected filters"})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 auto-rows-fr",children:F.map(P=>{const j=R(P.status);return d.jsxs($e,{className:`border border-border/40 rounded-2xl overflow-hidden transition-all duration-150 hover:shadow-md ${A(P.status)}`,children:[d.jsx(ur,{className:"pb-2 px-3 pt-3",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex items-start gap-1.5",children:[d.jsx(zs,{className:"h-3.5 w-3.5 mt-0.5 shrink-0 text-primary"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-xs font-semibold text-foreground",children:P.customer_name}),P.customer_phone&&d.jsx("div",{className:"text-[10px] text-muted-foreground",children:P.customer_phone})]})]}),d.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[d.jsx(fn,{className:`px-2 py-0.5 text-[10px] font-medium rounded-full ${j.className}`,children:j.label}),d.jsxs("div",{className:"text-[9px] text-muted-foreground font-mono",children:["#",P.id.substring(0,8)]})]})]})}),d.jsxs(Ct,{className:"px-3 pb-3 pt-1 space-y-2.5",children:[d.jsx("div",{className:"space-y-1.5",children:d.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-muted-foreground",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[P.order_type==="dine_in"?d.jsx(kx,{className:"h-3.5 w-3.5"}):d.jsx(Rh,{className:"h-3.5 w-3.5"}),d.jsx("span",{className:"capitalize",children:P.order_type==="dine_in"?"Dine in":"Takeaway"})]}),d.jsxs("div",{className:"flex flex-col items-end gap-0",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(A0,{className:"h-3.5 w-3.5"}),d.jsx("span",{children:N(P.created_at)})]}),d.jsx("div",{className:"text-[8px] text-muted-foreground/80",children:(()=>{const W=new Date(P.created_at),Y=String(W.getDate()).padStart(2,"0"),z=String(W.getMonth()+1).padStart(2,"0"),X=W.getFullYear();let G=W.getHours();const H=String(W.getMinutes()).padStart(2,"0"),te=G>=12?"PM":"AM";return G=G%12||12,`${Y}/${z}/${X} - ${G}:${H} ${te}`})()})]})]})}),d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("h4",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:"Items"}),d.jsxs("ul",{className:"space-y-0.5",children:[P.order_items.slice(0,3).map((W,Y)=>d.jsxs("li",{className:"text-[10px] text-muted-foreground truncate",children:[W.quantity,"x ",W.name]},Y)),P.order_items.length>3&&d.jsxs("li",{className:"text-[9px] text-muted-foreground/80",children:["+",P.order_items.length-3," more item",P.order_items.length-3>1?"s":""]})]})]}),d.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-border/40",children:[d.jsxs("span",{className:"font-semibold text-xs",children:[P.total_amount.toLocaleString()," MMK"]}),d.jsxs(gs,{value:P.status,onValueChange:W=>C(P.id,W),children:[d.jsx(Gn,{className:"h-8 w-32 text-[10px]",children:d.jsx(xs,{})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"paid",children:"Paid"}),d.jsx(rt,{value:"preparing",children:"Preparing"}),d.jsx(rt,{value:"ready",children:"Ready"}),d.jsx(rt,{value:"served",children:"Served"}),d.jsx(rt,{value:"completed",children:"Completed"}),d.jsx(rt,{value:"cancelled",children:"Cancelled"})]})]})]})]})]},P.id)})}),k>1&&d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 pb-1",children:[d.jsx("button",{type:"button",onClick:()=>B(y-1),disabled:y===1,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===1?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""}),Array.from({length:k}).map((P,j)=>{const W=j+1,Y=W===y;return d.jsx("button",{type:"button",onClick:()=>B(W),className:`min-w-9 h-9 px-2 rounded-full flex items-center justify-center text-xs font-semibold border transition-colors ${Y?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background text-muted-foreground border-border/70 hover:bg-primary/5 hover:text-primary"}`,children:W},W)}),d.jsx("button",{type:"button",onClick:()=>B(y+1),disabled:y===k,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===k?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""})]})]})]})};var Re;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var bb=new Map([[Re.QR_CODE,"QR_CODE"],[Re.AZTEC,"AZTEC"],[Re.CODABAR,"CODABAR"],[Re.CODE_39,"CODE_39"],[Re.CODE_93,"CODE_93"],[Re.CODE_128,"CODE_128"],[Re.DATA_MATRIX,"DATA_MATRIX"],[Re.MAXICODE,"MAXICODE"],[Re.ITF,"ITF"],[Re.EAN_13,"EAN_13"],[Re.EAN_8,"EAN_8"],[Re.PDF_417,"PDF_417"],[Re.RSS_14,"RSS_14"],[Re.RSS_EXPANDED,"RSS_EXPANDED"],[Re.UPC_A,"UPC_A"],[Re.UPC_E,"UPC_E"],[Re.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),_b;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(_b||(_b={}));function RU(t){return Object.values(Re).includes(t)}var Ws;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ws||(Ws={}));var Fs=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ws.SCAN_TYPE_CAMERA,Ws.SCAN_TYPE_FILE],t}(),kI=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!bb.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,bb.get(e))},t}(),Cb=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Ag;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ag||(Ag={}));var PI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ag.UNKWOWN_ERROR}},t}(),DI=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ii(t){return typeof t>"u"||t===null}function OU(t,e,r){return t>r?r:t<e?e:t}var zl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),_t=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Eb=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),LI=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),l=Object.keys(e),u=0,m=l;u<m.length;u++){var h=m[u];if(i.has(h))return r.logError("".concat(h," is not supported videoConstaints."),!0),!1}return!0},t}(),Ng={exports:{}};(function(t,e){(function(r,n){n(e)})(Zc,function(r){function n(D){return D==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,o){D.__proto__=o}||function(D,o){for(var a in o)o.hasOwnProperty(a)&&(D[a]=o[a])};function i(D,o){s(D,o);function a(){this.constructor=D}D.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function l(D,o){var a=Object.setPrototypeOf;a?a(D,o):D.__proto__=o}function u(D,o){o===void 0&&(o=D.constructor);var a=Error.captureStackTrace;a&&a(D,o)}var m=function(D){i(o,D);function o(a){var c=this.constructor,f=D.call(this,a)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),l(f,c.prototype),u(f),f}return o}(Error);class h extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}h.kind="Exception";class x extends h{}x.kind="ArgumentException";class y extends h{}y.kind="IllegalArgumentException";class v{constructor(o){if(this.binarizer=o,o===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,c,f){const p=this.binarizer.getLuminanceSource().crop(o,a,c,f);return new v(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends h{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class S{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(o,a,c,f,p){for(;p--;)c[f++]=o[a++]}static currentTimeMillis(){return Date.now()}}class I extends h{}I.kind="IndexOutOfBoundsException";class R extends I{constructor(o=void 0,a=void 0){super(a),this.index=o,this.message=a}}R.kind="ArrayIndexOutOfBoundsException";class A{static fill(o,a){for(let c=0,f=o.length;c<f;c++)o[c]=a}static fillWithin(o,a,c,f){A.rangeCheck(o.length,a,c);for(let p=a;p<c;p++)o[p]=f}static rangeCheck(o,a,c){if(a>c)throw new y("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new R(a);if(c>o)throw new R(c)}static asList(...o){return o}static create(o,a,c){return Array.from({length:o}).map(p=>Array.from({length:a}).fill(c))}static createInt32Array(o,a,c){return Array.from({length:o}).map(p=>Int32Array.from({length:a}).fill(c))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let c=0,f=o.length;c<f;c++)if(o[c]!==a[c])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(const c of o)a=31*a+c;return a}static fillUint8Array(o,a){for(let c=0;c!==o.length;c++)o[c]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){const c=new Uint8Array(a);return c.set(o),c}return o.slice(0,a)}static copyOfRange(o,a,c){const f=c-a,p=new Int32Array(f);return C.arraycopy(o,a,p,0,f),p}static binarySearch(o,a,c){c===void 0&&(c=A.numberComparator);let f=0,p=o.length-1;for(;f<=p;){const g=p+f>>1,w=c(a,o[g]);if(w>0)f=g+1;else if(w<0)p=g-1;else return g}return-f-1}static numberComparator(o,a){return o-a}}class N{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let c=31;return a=o<<16,a!==0&&(c-=16,o=a),a=o<<8,a!==0&&(c-=8,o=a),a=o<<4,a!==0&&(c-=4,o=a),a=o<<2,a!==0&&(c-=2,o=a),c-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class O{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=O.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const a=O.makeArray(o);C.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const a=this.size;if(o>=a)return a;const c=this.bits;let f=Math.floor(o/32),p=c[f];p&=~((1<<(o&31))-1);const g=c.length;for(;p===0;){if(++f===g)return a;p=c[f]}const w=f*32+N.numberOfTrailingZeros(p);return w>a?a:w}getNextUnset(o){const a=this.size;if(o>=a)return a;const c=this.bits;let f=Math.floor(o/32),p=~c[f];p&=~((1<<(o&31))-1);const g=c.length;for(;p===0;){if(++f===g)return a;p=~c[f]}const w=f*32+N.numberOfTrailingZeros(p);return w>a?a:w}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new y;if(a===o)return;a--;const c=Math.floor(o/32),f=Math.floor(a/32),p=this.bits;for(let g=c;g<=f;g++){const w=g>c?0:o&31,T=(2<<(g<f?31:a&31))-(1<<w);p[g]|=T}}clear(){const o=this.bits.length,a=this.bits;for(let c=0;c<o;c++)a[c]=0}isRange(o,a,c){if(a<o||o<0||a>this.size)throw new y;if(a===o)return!0;a--;const f=Math.floor(o/32),p=Math.floor(a/32),g=this.bits;for(let w=f;w<=p;w++){const _=w>f?0:o&31,M=(2<<(w<p?31:a&31))-(1<<_)&4294967295;if((g[w]&M)!==(c?M:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((o>>c-1&1)===1)}appendBitArray(o){const a=o.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(o.get(c))}xor(o){if(this.size!==o.size)throw new y("Sizes don't match");const a=this.bits;for(let c=0,f=a.length;c<f;c++)a[c]^=o.bits[c]}toBytes(o,a,c,f){for(let p=0;p<f;p++){let g=0;for(let w=0;w<8;w++)this.get(o)&&(g|=1<<7-w),o++;a[c+p]=g}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,f=this.bits;for(let p=0;p<c;p++){let g=f[p];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,o[a-p]=g}if(this.size!==c*32){const p=c*32-this.size;let g=o[0]>>>p;for(let w=1;w<c;w++){const _=o[w];g|=_<<32-p,o[w-1]=g,g=_>>>p}o[c-1]=g}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof O))return!1;const a=o;return this.size===a.size&&A.equals(this.bits,a.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let o="";for(let a=0,c=this.size;a<c;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new O(this.size,this.bits.slice())}}var k;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(k||(k={}));var F=k;class B extends h{static getFormatInstance(){return new B}}B.kind="FormatException";var P;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(P||(P={}));class j{constructor(o,a,c,...f){this.valueIdentifier=o,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=f,j.VALUE_IDENTIFIER_TO_ECI.set(o,this),j.NAME_TO_ECI.set(c,this);const p=this.values;for(let g=0,w=p.length;g!==w;g++){const _=p[g];j.VALUES_TO_ECI.set(_,this)}for(const g of f)j.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new B("incorect value");const a=j.VALUES_TO_ECI.get(o);if(a===void 0)throw new B("incorect value");return a}static getCharacterSetECIByName(o){const a=j.NAME_TO_ECI.get(o);if(a===void 0)throw new B("incorect value");return a}equals(o){if(!(o instanceof j))return!1;const a=o;return this.getName()===a.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(P.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(P.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(P.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(P.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(P.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(P.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(P.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(P.Big5,28,"Big5"),j.GB18030=new j(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(P.EUC_KR,30,"EUC_KR","EUC-KR");class W extends h{}W.kind="UnsupportedOperationException";class Y{static decode(o,a){const c=this.encodingName(a);return this.customDecoder?this.customDecoder(o,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(o,c):new TextDecoder(c).decode(o)}static shouldDecodeOnFallback(o){return!Y.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){const c=this.encodingName(a);return this.customEncoder?this.customEncoder(o,c):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof j?o:j.getCharacterSetECIByName(o)}static decodeFallback(o,a){const c=this.encodingCharacterSet(a);if(Y.isDecodeFallbackSupported(c)){let f="";for(let p=0,g=o.length;p<g;p++){let w=o[p].toString(16);w.length<2&&(w="0"+w),f+="%"+w}return decodeURIComponent(f)}if(c.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new W(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(j.UTF8)||o.equals(j.ISO8859_1)||o.equals(j.ASCII)}static encodeFallback(o){const c=btoa(unescape(encodeURIComponent(o))).split(""),f=[];for(let p=0;p<c.length;p++)f.push(c[p].charCodeAt(0));return new Uint8Array(f)}}class z{static castAsNonUtf8Char(o,a=null){const c=a?a.getName():this.ISO88591;return Y.decode(new Uint8Array([o]),c)}static guessEncoding(o,a){if(a!=null&&a.get(F.CHARACTER_SET)!==void 0)return a.get(F.CHARACTER_SET).toString();const c=o.length;let f=!0,p=!0,g=!0,w=0,_=0,T=0,M=0,L=0,U=0,$=0,q=0,Q=0,ee=0,ie=0;const ye=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let _e=0;_e<c&&(f||p||g);_e++){const ge=o[_e]&255;g&&(w>0?ge&128?w--:g=!1:ge&128&&(ge&64?(w++,ge&32?(w++,ge&16?(w++,ge&8?g=!1:M++):T++):_++):g=!1)),f&&(ge>127&&ge<160?f=!1:ge>159&&(ge<192||ge===215||ge===247)&&ie++),p&&(L>0?ge<64||ge===127||ge>252?p=!1:L--:ge===128||ge===160||ge>239?p=!1:ge>160&&ge<224?(U++,q=0,$++,$>Q&&(Q=$)):ge>127?(L++,$=0,q++,q>ee&&(ee=q)):($=0,q=0))}return g&&w>0&&(g=!1),p&&L>0&&(p=!1),g&&(ye||_+T+M>0)?z.UTF8:p&&(z.ASSUME_SHIFT_JIS||Q>=3||ee>=3)?z.SHIFT_JIS:f&&p?Q===2&&U===2||ie*10>=c?z.SHIFT_JIS:z.ISO88591:f?z.ISO88591:p?z.SHIFT_JIS:g?z.UTF8:z.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let c=-1;function f(g,w,_,T,M,L){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=M?parseInt(M.substr(1)):void 0,$;switch(L){case"s":$=a[c];break;case"c":$=a[c][0];break;case"f":$=parseFloat(a[c]).toFixed(g);break;case"p":$=parseFloat(a[c]).toPrecision(g);break;case"e":$=parseFloat(a[c]).toExponential(g);break;case"x":$=parseInt(a[c]).toString(U||16);break;case"d":$=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}$=typeof $=="object"?JSON.stringify($):(+$).toString(U);let q=parseInt(_),Q=_&&_[0]+""=="0"?"0":" ";for(;$.length<q;)$=w!==void 0?$+Q:Q+$;return $}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(p,f)}static getBytes(o,a){return Y.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}z.SHIFT_JIS=j.SJIS.getName(),z.GB2312="GB2312",z.ISO88591=j.ISO8859_1.getName(),z.EUC_JP="EUC_JP",z.UTF8=j.UTF8.getName(),z.PLATFORM_DEFAULT_ENCODING=z.UTF8,z.ASSUME_SHIFT_JIS=!1;class X{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=z.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,c){for(let f=a;a<a+c;f++)this.append(o[f]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class G{constructor(o,a,c,f){if(this.width=o,this.height=a,this.rowSize=c,this.bits=f,a==null&&(a=o),this.height=a,o<1||a<1)throw new y("Both dimensions must be greater than 0");c==null&&(c=Math.floor((o+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const a=o.length,c=o[0].length,f=new G(c,a);for(let p=0;p<a;p++){const g=o[p];for(let w=0;w<c;w++)g[w]&&f.set(w,p)}return f}static parseFromString(o,a,c){if(o===null)throw new y("stringRepresentation cannot be null");const f=new Array(o.length);let p=0,g=0,w=-1,_=0,T=0;for(;T<o.length;)if(o.charAt(T)===`
`||o.charAt(T)==="\r"){if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");g=p,_++}T++}else if(o.substring(T,T+a.length)===a)T+=a.length,f[p]=!0,p++;else if(o.substring(T,T+c.length)===c)T+=c.length,f[p]=!1,p++;else throw new y("illegal character encountered: "+o.substring(T));if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");_++}const M=new G(w,_);for(let L=0;L<p;L++)f[L]&&M.set(Math.floor(L%w),Math.floor(L/w));return M}get(o,a){const c=a*this.rowSize+Math.floor(o/32);return(this.bits[c]>>>(o&31)&1)!==0}set(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]|=1<<(o&31)&4294967295}unset(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]&=~(1<<(o&31)&4294967295)}flip(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new y("input matrix dimensions do not match");const a=new O(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let p=0,g=this.height;p<g;p++){const w=p*c,_=o.getRow(p,a).getBitArray();for(let T=0;T<c;T++)f[w+T]^=_[T]}}clear(){const o=this.bits,a=o.length;for(let c=0;c<a;c++)o[c]=0}setRegion(o,a,c,f){if(a<0||o<0)throw new y("Left and top must be nonnegative");if(f<1||c<1)throw new y("Height and width must be at least 1");const p=o+c,g=a+f;if(g>this.height||p>this.width)throw new y("The region must fit inside the matrix");const w=this.rowSize,_=this.bits;for(let T=a;T<g;T++){const M=T*w;for(let L=o;L<p;L++)_[M+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new O(this.width):a.clear();const c=this.rowSize,f=this.bits,p=o*c;for(let g=0;g<c;g++)a.setBulk(g*32,f[p+g]);return a}setRow(o,a){C.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),a=this.getHeight();let c=new O(o),f=new O(o);for(let p=0,g=Math.floor((a+1)/2);p<g;p++)c=this.getRow(p,c),f=this.getRow(a-1-p,f),c.reverse(),f.reverse(),this.setRow(p,f),this.setRow(a-1-p,c)}getEnclosingRectangle(){const o=this.width,a=this.height,c=this.rowSize,f=this.bits;let p=o,g=a,w=-1,_=-1;for(let T=0;T<a;T++)for(let M=0;M<c;M++){const L=f[T*c+M];if(L!==0){if(T<g&&(g=T),T>_&&(_=T),M*32<p){let U=0;for(;!(L<<31-U&4294967295);)U++;M*32+U<p&&(p=M*32+U)}if(M*32+31>w){let U=31;for(;!(L>>>U);)U--;M*32+U>w&&(w=M*32+U)}}}return w<p||_<g?null:Int32Array.from([p,g,w-p+1,_-g+1])}getTopLeftOnBit(){const o=this.rowSize,a=this.bits;let c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;const f=c/o;let p=c%o*32;const g=a[c];let w=0;for(;!(g<<31-w&4294967295);)w++;return p+=w,Int32Array.from([p,f])}getBottomRightOnBit(){const o=this.rowSize,a=this.bits;let c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/o);let p=Math.floor(c%o)*32;const g=a[c];let w=31;for(;!(g>>>w);)w--;return p+=w,Int32Array.from([p,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof G))return!1;const a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&A.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+A.hashCode(this.bits),o}toString(o="X ",a="  ",c=`
`){return this.buildToString(o,a,c)}buildToString(o,a,c){let f=new X;for(let p=0,g=this.height;p<g;p++){for(let w=0,_=this.width;w<_;w++)f.append(this.get(w,p)?o:a);f.append(c)}return f.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends h{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class te extends S{constructor(o){super(o),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(o,a){const c=this.getLuminanceSource(),f=c.getWidth();a==null||a.getSize()<f?a=new O(f):a.clear(),this.initArrays(f);const p=c.getRow(o,this.luminances),g=this.buckets;for(let _=0;_<f;_++)g[(p[_]&255)>>te.LUMINANCE_SHIFT]++;const w=te.estimateBlackPoint(g);if(f<3)for(let _=0;_<f;_++)(p[_]&255)<w&&a.set(_);else{let _=p[0]&255,T=p[1]&255;for(let M=1;M<f-1;M++){const L=p[M+1]&255;(T*4-_-L)/2<w&&a.set(M),_=T,T=L}}return a}getBlackMatrix(){const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight(),f=new G(a,c);this.initArrays(a);const p=this.buckets;for(let _=1;_<5;_++){const T=Math.floor(c*_/5),M=o.getRow(T,this.luminances),L=Math.floor(a*4/5);for(let U=Math.floor(a/5);U<L;U++){const $=M[U]&255;p[$>>te.LUMINANCE_SHIFT]++}}const g=te.estimateBlackPoint(p),w=o.getMatrix();for(let _=0;_<c;_++){const T=_*a;for(let M=0;M<a;M++)(w[T+M]&255)<g&&f.set(M,_)}return f}createBinarizer(o){return new te(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const a=this.buckets;for(let c=0;c<te.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(o){const a=o.length;let c=0,f=0,p=0;for(let M=0;M<a;M++)o[M]>p&&(f=M,p=o[M]),o[M]>c&&(c=o[M]);let g=0,w=0;for(let M=0;M<a;M++){const L=M-f,U=o[M]*L*L;U>w&&(g=M,w=U)}if(f>g){const M=f;f=g,g=M}if(g-f<=a/16)throw new H;let _=g-1,T=-1;for(let M=g-1;M>f;M--){const L=M-f,U=L*L*(g-M)*(c-o[M]);U>T&&(_=M,T=U)}return _<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class J extends te{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight();if(a>=J.MINIMUM_DIMENSION&&c>=J.MINIMUM_DIMENSION){const f=o.getMatrix();let p=a>>J.BLOCK_SIZE_POWER;a&J.BLOCK_SIZE_MASK&&p++;let g=c>>J.BLOCK_SIZE_POWER;c&J.BLOCK_SIZE_MASK&&g++;const w=J.calculateBlackPoints(f,p,g,a,c),_=new G(a,c);J.calculateThresholdForBlock(f,p,g,a,c,w,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new J(o)}static calculateThresholdForBlock(o,a,c,f,p,g,w){const _=p-J.BLOCK_SIZE,T=f-J.BLOCK_SIZE;for(let M=0;M<c;M++){let L=M<<J.BLOCK_SIZE_POWER;L>_&&(L=_);const U=J.cap(M,2,c-3);for(let $=0;$<a;$++){let q=$<<J.BLOCK_SIZE_POWER;q>T&&(q=T);const Q=J.cap($,2,a-3);let ee=0;for(let ye=-2;ye<=2;ye++){const _e=g[U+ye];ee+=_e[Q-2]+_e[Q-1]+_e[Q]+_e[Q+1]+_e[Q+2]}const ie=ee/25;J.thresholdBlock(o,q,L,ie,f,w)}}}static cap(o,a,c){return o<a?a:o>c?c:o}static thresholdBlock(o,a,c,f,p,g){for(let w=0,_=c*p+a;w<J.BLOCK_SIZE;w++,_+=p)for(let T=0;T<J.BLOCK_SIZE;T++)(o[_+T]&255)<=f&&g.set(a+T,c+w)}static calculateBlackPoints(o,a,c,f,p){const g=p-J.BLOCK_SIZE,w=f-J.BLOCK_SIZE,_=new Array(c);for(let T=0;T<c;T++){_[T]=new Int32Array(a);let M=T<<J.BLOCK_SIZE_POWER;M>g&&(M=g);for(let L=0;L<a;L++){let U=L<<J.BLOCK_SIZE_POWER;U>w&&(U=w);let $=0,q=255,Q=0;for(let ie=0,ye=M*f+U;ie<J.BLOCK_SIZE;ie++,ye+=f){for(let _e=0;_e<J.BLOCK_SIZE;_e++){const ge=o[ye+_e]&255;$+=ge,ge<q&&(q=ge),ge>Q&&(Q=ge)}if(Q-q>J.MIN_DYNAMIC_RANGE)for(ie++,ye+=f;ie<J.BLOCK_SIZE;ie++,ye+=f)for(let _e=0;_e<J.BLOCK_SIZE;_e++)$+=o[ye+_e]&255}let ee=$>>J.BLOCK_SIZE_POWER*2;if(Q-q<=J.MIN_DYNAMIC_RANGE&&(ee=q/2,T>0&&L>0)){const ie=(_[T-1][L]+2*_[T][L-1]+_[T-1][L-1])/4;q<ie&&(ee=ie)}_[T][L]=ee}}return _}}J.BLOCK_SIZE_POWER=3,J.BLOCK_SIZE=1<<J.BLOCK_SIZE_POWER,J.BLOCK_SIZE_MASK=J.BLOCK_SIZE-1,J.MINIMUM_DIMENSION=J.BLOCK_SIZE*5,J.MIN_DYNAMIC_RANGE=24;class Z{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,c,f){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let a=new X;for(let c=0;c<this.height;c++){const f=this.getRow(c,o);for(let p=0;p<this.width;p++){const g=f[p]&255;let w;g<64?w="#":g<128?w="+":g<192?w=".":w=" ",a.append(w)}a.append(`
`)}return a.toString()}}class K extends Z{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){const c=this.delegate.getRow(o,a),f=this.getWidth();for(let p=0;p<f;p++)c[p]=255-(c[p]&255);return c}getMatrix(){const o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let f=0;f<a;f++)c[f]=255-(o[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,c,f){return new K(this.delegate.crop(o,a,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new K(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new K(this.delegate.rotateCounterClockwise45())}}class ne extends Z{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=ne.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const a=o.getContext("2d").getImageData(0,0,o.width,o.height);return ne.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,c){const f=new Uint8ClampedArray(a*c);for(let p=0,g=0,w=o.length;p<w;p+=4,g++){let _;if(o[p+3]===0)_=255;else{const M=o[p],L=o[p+1],U=o[p+2];_=306*M+601*L+117*U+512>>10}f[g]=_}return f}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth(),f=o*c;return a===null?a=this.buffer.slice(f,f+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(f,f+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,c,f){return super.crop(o,a,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const a=this.getTempCanvasElement(),c=a.getContext("2d"),f=o*ne.DEGREE_TO_RADIANS,p=this.canvas.width,g=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(f))*p+Math.abs(Math.sin(f))*g),_=Math.ceil(Math.abs(Math.sin(f))*p+Math.abs(Math.cos(f))*g);return a.width=w,a.height=_,c.translate(w/2,_/2),c.rotate(f),c.drawImage(this.canvas,p/-2,g/-2),this.buffer=ne.makeBufferFromCanvasImageData(a),this}invert(){return new K(this)}}ne.DEGREE_TO_RADIANS=Math.PI/180;class pe{constructor(o,a,c){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||Zc||self||window||void 0)&&(globalThis||Zc||self||window||void 0).__awaiter||function(D,o,a,c){function f(p){return p instanceof a?p:new a(function(g){g(p)})}return new(a||(a=Promise))(function(p,g){function w(M){try{T(c.next(M))}catch(L){g(L)}}function _(M){try{T(c.throw(M))}catch(L){g(L)}}function T(M){M.done?p(M.value):f(M.value).then(w,_)}T((c=c.apply(D,o||[])).next())})};class le{constructor(o,a=500,c){this.reader=o,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const c of o){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const p=c.deviceId||c.id,g=c.label||`Video device ${a.length+1}`,w=c.groupId,_={deviceId:p,label:g,kind:f,groupId:w};a.push(_)}return a})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new pe(a.deviceId,a.label))})}findDeviceById(o){return ae(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return ae(this,void 0,void 0,function*(){this.reset();let c;o?c={deviceId:{exact:o}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,a)})}decodeOnceFromConstraints(o,a){return ae(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(o,a){return ae(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(o,a,c){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,c)})}decodeFromVideoDevice(o,a,c){return ae(this,void 0,void 0,function*(){let f;o?f={deviceId:{exact:o}}:f={facingMode:"environment"};const p={video:f};return yield this.decodeFromConstraints(p,a,c)})}decodeFromConstraints(o,a,c){return ae(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(f,a,c)})}decodeFromStream(o,a,c){return ae(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return ae(this,void 0,void 0,function*(){const c=this.prepareVideoElement(a);return this.addVideoSource(c,o),this.videoElement=c,this.stream=o,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(o){return new Promise((a,c)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){const c=document.getElementById(o);if(!c)throw new x(`element with id '${o}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new x(`element with id '${o}' must be an ${a} element`);return c}decodeFromImage(o,a){if(!o&&!a)throw new x("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new x("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,c){if(o===void 0&&a===void 0)throw new x("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(o,c)}decodeFromImageElement(o){if(!o)throw new x("An image element must be provided.");this.reset();const a=this.prepareImageElement(o);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(o){const a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(o){if(!o)throw new x("A video element must be provided.");this.reset();const a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const c=this._decodeOnLoadImage(a);return a.src=o,c}decodeFromVideoUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=o,c}decodeFromVideoUrlContinuously(o,a){if(!o)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,a);return c.src=o,f}_decodeOnLoadImage(o){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,c),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,c=!0){this._stopAsyncDecode=!1;const f=(p,g)=>{if(this._stopAsyncDecode){g(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(o);p(w)}catch(w){const _=a&&w instanceof H,M=(w instanceof b||w instanceof B)&&c;if(_||M)return setTimeout(f,this._timeBetweenDecodingAttempts,p,g);g(w)}};return new Promise((p,g)=>f(p,g))}decodeContinuously(o,a){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(o);a(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){a(null,f);const p=f instanceof b||f instanceof B,g=f instanceof H;(p||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(o){const a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,c){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const a=this.getCaptureCanvas(o),c=new ne(a),f=new J(c);return new v(f)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let c,f;return typeof o<"u"&&(o instanceof HTMLVideoElement?(c=o.videoWidth,f=o.videoHeight):o instanceof HTMLImageElement&&(c=o.naturalWidth||o.width,f=o.naturalHeight||o.height)),a.style.width=c+"px",a.style.height=f+"px",a.width=c,a.height=f,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class fe{constructor(o,a,c=a==null?0:8*a.length,f,p,g=C.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=c,this.resultPoints=f,this.format=p,this.timestamp=g,this.text=o,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=f,this.format=p,this.resultMetadata=null,g==null?this.timestamp=C.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){const c=new Array(a.length+o.length);C.arraycopy(a,0,c,0,a.length),C.arraycopy(o,0,c,a.length,o.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ze;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var ve=ze,be;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(be||(be={}));var ke=be;class Xe{constructor(o,a,c,f,p=-1,g=-1){this.rawBytes=o,this.text=a,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=g,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class oe{exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class Ee{constructor(o,a){if(a.length===0)throw new y;this.field=o;const c=a.length;if(c>1&&a[0]===0){let f=1;for(;f<c&&a[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),C.arraycopy(a,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const a=this.coefficients;let c;if(o===1){c=0;for(let g=0,w=a.length;g!==w;g++){const _=a[g];c=oe.addOrSubtract(c,_)}return c}c=a[0];const f=a.length,p=this.field;for(let g=1;g<f;g++)c=oe.addOrSubtract(p.multiply(o,c),a[g]);return c}addOrSubtract(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){const g=a;a=c,c=g}let f=new Int32Array(c.length);const p=c.length-a.length;C.arraycopy(c,0,f,0,p);for(let g=p;g<c.length;g++)f[g]=oe.addOrSubtract(a[g-p],c[g]);return new Ee(this.field,f)}multiply(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const a=this.coefficients,c=a.length,f=o.coefficients,p=f.length,g=new Int32Array(c+p-1),w=this.field;for(let _=0;_<c;_++){const T=a[_];for(let M=0;M<p;M++)g[_+M]=oe.addOrSubtract(g[_+M],w.multiply(T,f[M]))}return new Ee(w,g)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const a=this.coefficients.length,c=this.field,f=new Int32Array(a),p=this.coefficients;for(let g=0;g<a;g++)f[g]=c.multiply(p[g],o);return new Ee(c,f)}multiplyByMonomial(o,a){if(o<0)throw new y;if(a===0)return this.field.getZero();const c=this.coefficients,f=c.length,p=new Int32Array(f+o),g=this.field;for(let w=0;w<f;w++)p[w]=g.multiply(c[w],a);return new Ee(g,p)}divide(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new y("Divide by 0");const a=this.field;let c=a.getZero(),f=this;const p=o.getCoefficient(o.getDegree()),g=a.inverse(p);for(;f.getDegree()>=o.getDegree()&&!f.isZero();){const w=f.getDegree()-o.getDegree(),_=a.multiply(f.getCoefficient(f.getDegree()),g),T=o.multiplyByMonomial(w,_),M=a.buildMonomial(w,_);c=c.addOrSubtract(M),f=f.addOrSubtract(T)}return[c,f]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(o+=" - ",c=-c):o.length>0&&(o+=" + "),a===0||c!==1){const f=this.field.log(c);f===0?o+="1":f===1?o+="a":(o+="a^",o+=f)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}class je extends h{}je.kind="ArithmeticException";class Me extends oe{constructor(o,a,c){super(),this.primitive=o,this.size=a,this.generatorBase=c;const f=new Int32Array(a);let p=1;for(let w=0;w<a;w++)f[w]=p,p*=2,p>=a&&(p^=o,p&=a-1);this.expTable=f;const g=new Int32Array(a);for(let w=0;w<a-1;w++)g[f[w]]=w;this.logTable=g,this.zero=new Ee(this,Int32Array.from([0])),this.one=new Ee(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new y;if(a===0)return this.zero;const c=new Int32Array(o+1);return c[0]=a,new Ee(this,c)}inverse(o){if(o===0)throw new je;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class gt extends h{}gt.kind="ReedSolomonException";class St extends h{}St.kind="IllegalStateException";class er{constructor(o){this.field=o}decode(o,a){const c=this.field,f=new Ee(c,o),p=new Int32Array(a);let g=!0;for(let $=0;$<a;$++){const q=f.evaluateAt(c.exp($+c.getGeneratorBase()));p[p.length-1-$]=q,q!==0&&(g=!1)}if(g)return;const w=new Ee(c,p),_=this.runEuclideanAlgorithm(c.buildMonomial(a,1),w,a),T=_[0],M=_[1],L=this.findErrorLocations(T),U=this.findErrorMagnitudes(M,L);for(let $=0;$<L.length;$++){const q=o.length-1-c.log(L[$]);if(q<0)throw new gt("Bad error location");o[q]=Me.addOrSubtract(o[q],U[$])}}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){const $=o;o=a,a=$}const f=this.field;let p=o,g=a,w=f.getZero(),_=f.getOne();for(;g.getDegree()>=(c/2|0);){let $=p,q=w;if(p=g,w=_,p.isZero())throw new gt("r_{i-1} was zero");g=$;let Q=f.getZero();const ee=p.getCoefficient(p.getDegree()),ie=f.inverse(ee);for(;g.getDegree()>=p.getDegree()&&!g.isZero();){const ye=g.getDegree()-p.getDegree(),_e=f.multiply(g.getCoefficient(g.getDegree()),ie);Q=Q.addOrSubtract(f.buildMonomial(ye,_e)),g=g.addOrSubtract(p.multiplyByMonomial(ye,_e))}if(_=Q.multiply(w).addOrSubtract(q),g.getDegree()>=p.getDegree())throw new St("Division algorithm failed to reduce polynomial?")}const T=_.getCoefficient(0);if(T===0)throw new gt("sigmaTilde(0) was zero");const M=f.inverse(T),L=_.multiplyScalar(M),U=g.multiplyScalar(M);return[L,U]}findErrorLocations(o){const a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);const c=new Int32Array(a);let f=0;const p=this.field;for(let g=1;g<p.getSize()&&f<a;g++)o.evaluateAt(g)===0&&(c[f]=p.inverse(g),f++);if(f!==a)throw new gt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(o,a){const c=a.length,f=new Int32Array(c),p=this.field;for(let g=0;g<c;g++){const w=p.inverse(a[g]);let _=1;for(let T=0;T<c;T++)if(g!==T){const M=p.multiply(a[T],w),L=M&1?M&-2:M|1;_=p.multiply(_,L)}f[g]=p.multiply(o.evaluateAt(w),p.inverse(_)),p.getGeneratorBase()!==0&&(f[g]=p.multiply(f[g],w))}return f}}var he;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(he||(he={}));class Be{decode(o){this.ddata=o;let a=o.getBits(),c=this.extractBits(a),f=this.correctBits(c),p=Be.convertBoolArrayToByteArray(f),g=Be.getEncodedData(f),w=new Xe(p,g,null,null);return w.setNumBits(f.length),w}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let a=o.length,c=he.UPPER,f=he.UPPER,p="",g=0;for(;g<a;)if(f===he.BINARY){if(a-g<5)break;let w=Be.readCode(o,g,5);if(g+=5,w===0){if(a-g<11)break;w=Be.readCode(o,g,11)+31,g+=11}for(let _=0;_<w;_++){if(a-g<8){g=a;break}const T=Be.readCode(o,g,8);p+=z.castAsNonUtf8Char(T),g+=8}f=c}else{let w=f===he.DIGIT?4:5;if(a-g<w)break;let _=Be.readCode(o,g,w);g+=w;let T=Be.getCharacter(f,_);T.startsWith("CTRL_")?(c=f,f=Be.getTable(T.charAt(5)),T.charAt(6)==="L"&&(c=f)):(p+=T,f=c)}return p}static getTable(o){switch(o){case"L":return he.LOWER;case"P":return he.PUNCT;case"M":return he.MIXED;case"D":return he.DIGIT;case"B":return he.BINARY;case"U":default:return he.UPPER}}static getCharacter(o,a){switch(o){case he.UPPER:return Be.UPPER_TABLE[a];case he.LOWER:return Be.LOWER_TABLE[a];case he.MIXED:return Be.MIXED_TABLE[a];case he.PUNCT:return Be.PUNCT_TABLE[a];case he.DIGIT:return Be.DIGIT_TABLE[a];default:throw new St("Bad table")}}correctBits(o){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=Me.AZTEC_DATA_10):(c=12,a=Me.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),p=o.length/c;if(p<f)throw new B;let g=o.length%c,w=new Int32Array(p);for(let U=0;U<p;U++,g+=c)w[U]=Be.readCode(o,g,c);try{new er(a).decode(w,p-f)}catch(U){throw new B(U)}let _=(1<<c)-1,T=0;for(let U=0;U<f;U++){let $=w[U];if($===0||$===_)throw new B;($===1||$===_-1)&&T++}let M=new Array(f*c-T),L=0;for(let U=0;U<f;U++){let $=w[U];if($===1||$===_-1)M.fill($>1,L,L+c-1),L+=c-1;else for(let q=c-1;q>=0;--q)M[L++]=($&1<<q)!==0}return M}extractBits(o){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(a?11:14)+c*4,p=new Int32Array(f),g=new Array(this.totalBitsInLayer(c,a));if(a)for(let w=0;w<p.length;w++)p[w]=w;else{let w=f+1+2*N.truncDivision(N.truncDivision(f,2)-1,15),_=f/2,T=N.truncDivision(w,2);for(let M=0;M<_;M++){let L=M+N.truncDivision(M,15);p[_-M-1]=T-L-1,p[_+M]=T+L+1}}for(let w=0,_=0;w<c;w++){let T=(c-w)*4+(a?9:12),M=w*2,L=f-1-M;for(let U=0;U<T;U++){let $=U*2;for(let q=0;q<2;q++)g[_+$+q]=o.get(p[M+q],p[M+U]),g[_+2*T+$+q]=o.get(p[M+U],p[L-q]),g[_+4*T+$+q]=o.get(p[L-q],p[L-U]),g[_+6*T+$+q]=o.get(p[L-U],p[M+q])}_+=T*8}return g}static readCode(o,a,c){let f=0;for(let p=a;p<a+c;p++)f<<=1,o[p]&&(f|=1);return f}static readByte(o,a){let c=o.length-a;return c>=8?Be.readCode(o,a,8):Be.readCode(o,a,c)<<8-c}static convertBoolArrayToByteArray(o){let a=new Uint8Array((o.length+7)/8);for(let c=0;c<a.length;c++)a[c]=Be.readByte(o,8*c);return a}totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ne{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,c,f){const p=o-c,g=a-f;return Math.sqrt(p*p+g*g)}static sum(o){let a=0;for(let c=0,f=o.length;c!==f;c++){const p=o[c];a+=p}return a}}class bt{static floatToIntBits(o){return o}}bt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ce){const a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*bt.floatToIntBits(this.x)+bt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const a=this.distance(o[0],o[1]),c=this.distance(o[1],o[2]),f=this.distance(o[0],o[2]);let p,g,w;if(c>=a&&c>=f?(g=o[0],p=o[1],w=o[2]):f>=c&&f>=a?(g=o[1],p=o[0],w=o[2]):(g=o[2],p=o[0],w=o[1]),this.crossProductZ(p,g,w)<0){const _=p;p=w,w=_}o[0]=p,o[1]=g,o[2]=w}static distance(o,a){return Ne.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,c){const f=a.x,p=a.y;return(c.x-f)*(o.y-p)-(c.y-p)*(o.x-f)}}class Pr{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it extends Pr{constructor(o,a,c,f,p){super(o,a),this.compact=c,this.nbDatablocks=f,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class tr{constructor(o,a,c,f){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),a==null&&(a=tr.INIT_SIZE),c==null&&(c=o.getWidth()/2|0),f==null&&(f=o.getHeight()/2|0);const p=a/2|0;if(this.leftInit=c-p,this.rightInit=c+p,this.upInit=f-p,this.downInit=f+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let o=this.leftInit,a=this.rightInit,c=this.upInit,f=this.downInit,p=!1,g=!0,w=!1,_=!1,T=!1,M=!1,L=!1;const U=this.width,$=this.height;for(;g;){g=!1;let q=!0;for(;(q||!_)&&a<U;)q=this.containsBlackPoint(c,f,a,!1),q?(a++,g=!0,_=!0):_||a++;if(a>=U){p=!0;break}let Q=!0;for(;(Q||!T)&&f<$;)Q=this.containsBlackPoint(o,a,f,!0),Q?(f++,g=!0,T=!0):T||f++;if(f>=$){p=!0;break}let ee=!0;for(;(ee||!M)&&o>=0;)ee=this.containsBlackPoint(c,f,o,!1),ee?(o--,g=!0,M=!0):M||o--;if(o<0){p=!0;break}let ie=!0;for(;(ie||!L)&&c>=0;)ie=this.containsBlackPoint(o,a,c,!0),ie?(c--,g=!0,L=!0):L||c--;if(c<0){p=!0;break}g&&(w=!0)}if(!p&&w){const q=a-o;let Q=null;for(let _e=1;Q===null&&_e<q;_e++)Q=this.getBlackPointOnSegment(o,f-_e,o+_e,f);if(Q==null)throw new H;let ee=null;for(let _e=1;ee===null&&_e<q;_e++)ee=this.getBlackPointOnSegment(o,c+_e,o+_e,c);if(ee==null)throw new H;let ie=null;for(let _e=1;ie===null&&_e<q;_e++)ie=this.getBlackPointOnSegment(a,c+_e,a-_e,c);if(ie==null)throw new H;let ye=null;for(let _e=1;ye===null&&_e<q;_e++)ye=this.getBlackPointOnSegment(a,f-_e,a-_e,f);if(ye==null)throw new H;return this.centerEdges(ye,Q,ie,ee)}else throw new H}getBlackPointOnSegment(o,a,c,f){const p=Ne.round(Ne.distance(o,a,c,f)),g=(c-o)/p,w=(f-a)/p,_=this.image;for(let T=0;T<p;T++){const M=Ne.round(o+T*g),L=Ne.round(a+T*w);if(_.get(M,L))return new Ce(M,L)}return null}centerEdges(o,a,c,f){const p=o.getX(),g=o.getY(),w=a.getX(),_=a.getY(),T=c.getX(),M=c.getY(),L=f.getX(),U=f.getY(),$=tr.CORR;return p<this.width/2?[new Ce(L-$,U+$),new Ce(w+$,_+$),new Ce(T-$,M-$),new Ce(p+$,g-$)]:[new Ce(L+$,U+$),new Ce(w+$,_-$),new Ce(T-$,M+$),new Ce(p-$,g-$)]}containsBlackPoint(o,a,c,f){const p=this.image;if(f){for(let g=o;g<=a;g++)if(p.get(g,c))return!0}else for(let g=o;g<=a;g++)if(p.get(c,g))return!0;return!1}}tr.INIT_SIZE=10,tr.CORR=1;class ra{static checkAndNudgePoints(o,a){const c=o.getWidth(),f=o.getHeight();let p=!0;for(let g=0;g<a.length&&p;g+=2){const w=Math.floor(a[g]),_=Math.floor(a[g+1]);if(w<-1||w>c||_<-1||_>f)throw new H;p=!1,w===-1?(a[g]=0,p=!0):w===c&&(a[g]=c-1,p=!0),_===-1?(a[g+1]=0,p=!0):_===f&&(a[g+1]=f-1,p=!0)}p=!0;for(let g=a.length-2;g>=0&&p;g-=2){const w=Math.floor(a[g]),_=Math.floor(a[g+1]);if(w<-1||w>c||_<-1||_>f)throw new H;p=!1,w===-1?(a[g]=0,p=!0):w===c&&(a[g]=c-1,p=!0),_===-1?(a[g+1]=0,p=!0):_===f&&(a[g+1]=f-1,p=!0)}}}class Nt{constructor(o,a,c,f,p,g,w,_,T){this.a11=o,this.a21=a,this.a31=c,this.a12=f,this.a22=p,this.a32=g,this.a13=w,this.a23=_,this.a33=T}static quadrilateralToQuadrilateral(o,a,c,f,p,g,w,_,T,M,L,U,$,q,Q,ee){const ie=Nt.quadrilateralToSquare(o,a,c,f,p,g,w,_);return Nt.squareToQuadrilateral(T,M,L,U,$,q,Q,ee).times(ie)}transformPoints(o){const a=o.length,c=this.a11,f=this.a12,p=this.a13,g=this.a21,w=this.a22,_=this.a23,T=this.a31,M=this.a32,L=this.a33;for(let U=0;U<a;U+=2){const $=o[U],q=o[U+1],Q=p*$+_*q+L;o[U]=(c*$+g*q+T)/Q,o[U+1]=(f*$+w*q+M)/Q}}transformPointsWithValues(o,a){const c=this.a11,f=this.a12,p=this.a13,g=this.a21,w=this.a22,_=this.a23,T=this.a31,M=this.a32,L=this.a33,U=o.length;for(let $=0;$<U;$++){const q=o[$],Q=a[$],ee=p*q+_*Q+L;o[$]=(c*q+g*Q+T)/ee,a[$]=(f*q+w*Q+M)/ee}}static squareToQuadrilateral(o,a,c,f,p,g,w,_){const T=o-c+p-w,M=a-f+g-_;if(T===0&&M===0)return new Nt(c-o,p-c,o,f-a,g-f,a,0,0,1);{const L=c-p,U=w-p,$=f-g,q=_-g,Q=L*q-U*$,ee=(T*q-U*M)/Q,ie=(L*M-T*$)/Q;return new Nt(c-o+ee*c,w-o+ie*w,o,f-a+ee*f,_-a+ie*_,a,ee,ie,1)}}static quadrilateralToSquare(o,a,c,f,p,g,w,_){return Nt.squareToQuadrilateral(o,a,c,f,p,g,w,_).buildAdjoint()}buildAdjoint(){return new Nt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new Nt(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Si extends ra{sampleGrid(o,a,c,f,p,g,w,_,T,M,L,U,$,q,Q,ee,ie,ye,_e){const ge=Nt.quadrilateralToQuadrilateral(f,p,g,w,_,T,M,L,U,$,q,Q,ee,ie,ye,_e);return this.sampleGridWithTransform(o,a,c,ge)}sampleGridWithTransform(o,a,c,f){if(a<=0||c<=0)throw new H;const p=new G(a,c),g=new Float32Array(2*a);for(let w=0;w<c;w++){const _=g.length,T=w+.5;for(let M=0;M<_;M+=2)g[M]=M/2+.5,g[M+1]=T;f.transformPoints(g),ra.checkAndNudgePoints(o,g);try{for(let M=0;M<_;M+=2)o.get(Math.floor(g[M]),Math.floor(g[M+1]))&&p.set(M/2,w)}catch{throw new H}}return p}}class Qs{static setGridSampler(o){Qs.gridSampler=o}static getInstance(){return Qs.gridSampler}}Qs.gridSampler=new Si;class Dr{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class na{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(o){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),p=this.getMatrixCornerPoints(c);return new it(f,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new H;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(c,a);let f=0;for(let g=0;g<4;g++){let w=c[(this.shift+g)%4];this.compact?(f<<=7,f+=w>>1&127):(f<<=10,f+=(w>>2&992)+(w>>1&31))}let p=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(o,a){let c=0;o.forEach((f,p,g)=>{let w=(f>>a-2<<1)+(f&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(N.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new H}getCorrectedParameterData(o,a){let c,f;a?(c=7,f=2):(c=10,f=4);let p=c-f,g=new Int32Array(c);for(let _=c-1;_>=0;--_)g[_]=o&15,o>>=4;try{new er(Me.AZTEC_PARAM).decode(g,p)}catch{throw new H}let w=0;for(let _=0;_<f;_++)w=(w<<4)+g[_];return w}getBullsEyeCorners(o){let a=o,c=o,f=o,p=o,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(a,g,1,-1),U=this.getFirstDifferent(c,g,1,1),$=this.getFirstDifferent(f,g,-1,1),q=this.getFirstDifferent(p,g,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(q,L)*this.nbCenterLayers/(this.distancePoint(p,a)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(L,U,$,q))break}a=L,c=U,f=$,p=q,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let w=new Ce(a.getX()+.5,a.getY()-.5),_=new Ce(c.getX()+.5,c.getY()+.5),T=new Ce(f.getX()-.5,f.getY()+.5),M=new Ce(p.getX()-.5,p.getY()-.5);return this.expandSquare([w,_,T,M],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,c,f;try{let w=new tr(this.image).detect();o=w[0],a=w[1],c=w[2],f=w[3]}catch{let _=this.image.getWidth()/2,T=this.image.getHeight()/2;o=this.getFirstDifferent(new Dr(_+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Dr(_+7,T+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Dr(_-7,T+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Dr(_-7,T-7),!1,-1,-1).toResultPoint()}let p=Ne.round((o.getX()+f.getX()+a.getX()+c.getX())/4),g=Ne.round((o.getY()+f.getY()+a.getY()+c.getY())/4);try{let w=new tr(this.image,15,p,g).detect();o=w[0],a=w[1],c=w[2],f=w[3]}catch{o=this.getFirstDifferent(new Dr(p+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Dr(p+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Dr(p-7,g+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Dr(p-7,g-7),!1,-1,-1).toResultPoint()}return p=Ne.round((o.getX()+f.getX()+a.getX()+c.getX())/4),g=Ne.round((o.getY()+f.getY()+a.getY()+c.getY())/4),new Dr(p,g)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,c,f,p){let g=Qs.getInstance(),w=this.getDimension(),_=w/2-this.nbCenterLayers,T=w/2+this.nbCenterLayers;return g.sampleGrid(o,w,w,_,_,T,_,T,T,_,T,a.getX(),a.getY(),c.getX(),c.getY(),f.getX(),f.getY(),p.getX(),p.getY())}sampleLine(o,a,c){let f=0,p=this.distanceResultPoint(o,a),g=p/c,w=o.getX(),_=o.getY(),T=g*(a.getX()-o.getX())/p,M=g*(a.getY()-o.getY())/p;for(let L=0;L<c;L++)this.image.get(Ne.round(w+L*T),Ne.round(_+L*M))&&(f|=1<<c-L-1);return f}isWhiteOrBlackRectangle(o,a,c,f){let p=3;o=new Dr(o.getX()-p,o.getY()+p),a=new Dr(a.getX()-p,a.getY()-p),c=new Dr(c.getX()+p,c.getY()-p),f=new Dr(f.getX()+p,f.getY()+p);let g=this.getColor(f,o);if(g===0)return!1;let w=this.getColor(o,a);return w!==g||(w=this.getColor(a,c),w!==g)?!1:(w=this.getColor(c,f),w===g)}getColor(o,a){let c=this.distancePoint(o,a),f=(a.getX()-o.getX())/c,p=(a.getY()-o.getY())/c,g=0,w=o.getX(),_=o.getY(),T=this.image.get(o.getX(),o.getY()),M=Math.ceil(c);for(let U=0;U<M;U++)w+=f,_+=p,this.image.get(Ne.round(w),Ne.round(_))!==T&&g++;let L=g/c;return L>.1&&L<.9?0:L<=.1===T?1:-1}getFirstDifferent(o,a,c,f){let p=o.getX()+c,g=o.getY()+f;for(;this.isValid(p,g)&&this.image.get(p,g)===a;)p+=c,g+=f;for(p-=c,g-=f;this.isValid(p,g)&&this.image.get(p,g)===a;)p+=c;for(p-=c;this.isValid(p,g)&&this.image.get(p,g)===a;)g+=f;return g-=f,new Dr(p,g)}expandSquare(o,a,c){let f=c/(2*a),p=o[0].getX()-o[2].getX(),g=o[0].getY()-o[2].getY(),w=(o[0].getX()+o[2].getX())/2,_=(o[0].getY()+o[2].getY())/2,T=new Ce(w+f*p,_+f*g),M=new Ce(w-f*p,_-f*g);p=o[1].getX()-o[3].getX(),g=o[1].getY()-o[3].getY(),w=(o[1].getX()+o[3].getX())/2,_=(o[1].getY()+o[3].getY())/2;let L=new Ce(w+f*p,_+f*g),U=new Ce(w-f*p,_-f*g);return[T,L,M,U]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=Ne.round(o.getX()),c=Ne.round(o.getY());return this.isValid(a,c)}distancePoint(o,a){return Ne.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return Ne.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class nl{decode(o,a=null){let c=null,f=new na(o.getBlackMatrix()),p=null,g=null;try{let M=f.detectMirror(!1);p=M.getPoints(),this.reportFoundResultPoints(a,p),g=new Be().decode(M)}catch(M){c=M}if(g==null)try{let M=f.detectMirror(!0);p=M.getPoints(),this.reportFoundResultPoints(a,p),g=new Be().decode(M)}catch(M){throw c??M}let w=new fe(g.getText(),g.getRawBytes(),g.getNumBits(),p,ve.AZTEC,C.currentTimeMillis()),_=g.getByteSegments();_!=null&&w.putMetadata(ke.BYTE_SEGMENTS,_);let T=g.getECLevel();return T!=null&&w.putMetadata(ke.ERROR_CORRECTION_LEVEL,T),w}reportFoundResultPoints(o,a){if(o!=null){let c=o.get(F.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((f,p,g)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class Vd extends le{constructor(o=500){super(new nl,o)}}class Ut{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(F.TRY_HARDER)===!0&&o.isRotateSupported()){const p=o.rotateCounterClockwise(),g=this.doDecode(p,a),w=g.getResultMetadata();let _=270;w!==null&&w.get(ke.ORIENTATION)===!0&&(_=_+w.get(ke.ORIENTATION)%360),g.putMetadata(ke.ORIENTATION,_);const T=g.getResultPoints();if(T!==null){const M=p.getHeight();for(let L=0;L<T.length;L++)T[L]=new Ce(M-T[L].getY()-1,T[L].getX())}return g}else throw new H}}reset(){}doDecode(o,a){const c=o.getWidth(),f=o.getHeight();let p=new O(c);const g=a&&a.get(F.TRY_HARDER)===!0,w=Math.max(1,f>>(g?8:5));let _;g?_=f:_=15;const T=Math.trunc(f/2);for(let M=0;M<_;M++){const L=Math.trunc((M+1)/2),U=(M&1)===0,$=T+w*(U?L:-L);if($<0||$>=f)break;try{p=o.getBlackRow($,p)}catch{continue}for(let q=0;q<2;q++){if(q===1&&(p.reverse(),a&&a.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;a.forEach((ee,ie)=>Q.set(ie,ee)),Q.delete(F.NEED_RESULT_POINT_CALLBACK),a=Q}try{const Q=this.decodeRow($,p,a);if(q===1){Q.putMetadata(ke.ORIENTATION,180);const ee=Q.getResultPoints();ee!==null&&(ee[0]=new Ce(c-ee[0].getX()-1,ee[0].getY()),ee[1]=new Ce(c-ee[1].getX()-1,ee[1].getY()))}return Q}catch{}}}throw new H}static recordPattern(o,a,c){const f=c.length;for(let T=0;T<f;T++)c[T]=0;const p=o.getSize();if(a>=p)throw new H;let g=!o.get(a),w=0,_=a;for(;_<p;){if(o.get(_)!==g)c[w]++;else{if(++w===f)break;c[w]=1,g=!g}_++}if(!(w===f||w===f-1&&_===p))throw new H}static recordPatternInReverse(o,a,c){let f=c.length,p=o.get(a);for(;a>0&&f>=0;)o.get(--a)!==p&&(f--,p=!p);if(f>=0)throw new H;Ut.recordPattern(o,a+1,c)}static patternMatchVariance(o,a,c){const f=o.length;let p=0,g=0;for(let T=0;T<f;T++)p+=o[T],g+=a[T];if(p<g)return Number.POSITIVE_INFINITY;const w=p/g;c*=w;let _=0;for(let T=0;T<f;T++){const M=o[T],L=a[T]*w,U=M>L?M-L:L-M;if(U>c)return Number.POSITIVE_INFINITY;_+=U}return _/p}}class Se extends Ut{static findStartPattern(o){const a=o.getSize(),c=o.getNextSet(0);let f=0,p=Int32Array.from([0,0,0,0,0,0]),g=c,w=!1;const _=6;for(let T=c;T<a;T++)if(o.get(T)!==w)p[f]++;else{if(f===_-1){let M=Se.MAX_AVG_VARIANCE,L=-1;for(let U=Se.CODE_START_A;U<=Se.CODE_START_C;U++){const $=Ut.patternMatchVariance(p,Se.CODE_PATTERNS[U],Se.MAX_INDIVIDUAL_VARIANCE);$<M&&(M=$,L=U)}if(L>=0&&o.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,L]);g+=p[0]+p[1],p=p.slice(2,p.length-1),p[f-1]=0,p[f]=0,f--}else f++;p[f]=1,w=!w}throw new H}static decodeCode(o,a,c){Ut.recordPattern(o,c,a);let f=Se.MAX_AVG_VARIANCE,p=-1;for(let g=0;g<Se.CODE_PATTERNS.length;g++){const w=Se.CODE_PATTERNS[g],_=this.patternMatchVariance(a,w,Se.MAX_INDIVIDUAL_VARIANCE);_<f&&(f=_,p=g)}if(p>=0)return p;throw new H}decodeRow(o,a,c){const f=c&&c.get(F.ASSUME_GS1)===!0,p=Se.findStartPattern(a),g=p[2];let w=0;const _=new Uint8Array(20);_[w++]=g;let T;switch(g){case Se.CODE_START_A:T=Se.CODE_CODE_A;break;case Se.CODE_START_B:T=Se.CODE_CODE_B;break;case Se.CODE_START_C:T=Se.CODE_CODE_C;break;default:throw new B}let M=!1,L=!1,U="",$=p[0],q=p[1];const Q=Int32Array.from([0,0,0,0,0,0]);let ee=0,ie=0,ye=g,_e=0,ge=!0,ct=!1,Ze=!1;for(;!M;){const fl=L;switch(L=!1,ee=ie,ie=Se.decodeCode(a,Q,q),_[w++]=ie,ie!==Se.CODE_STOP&&(ge=!0),ie!==Se.CODE_STOP&&(_e++,ye+=_e*ie),$=q,q+=Q.reduce((yR,wR)=>yR+wR,0),ie){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new B}switch(T){case Se.CODE_CODE_A:if(ie<64)Ze===ct?U+=String.fromCharCode(32+ie):U+=String.fromCharCode(32+ie+128),Ze=!1;else if(ie<96)Ze===ct?U+=String.fromCharCode(ie-64):U+=String.fromCharCode(ie+64),Ze=!1;else switch(ie!==Se.CODE_STOP&&(ge=!1),ie){case Se.CODE_FNC_1:f&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!ct&&Ze?(ct=!0,Ze=!1):ct&&Ze?(ct=!1,Ze=!1):Ze=!0;break;case Se.CODE_SHIFT:L=!0,T=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:M=!0;break}break;case Se.CODE_CODE_B:if(ie<96)Ze===ct?U+=String.fromCharCode(32+ie):U+=String.fromCharCode(32+ie+128),Ze=!1;else switch(ie!==Se.CODE_STOP&&(ge=!1),ie){case Se.CODE_FNC_1:f&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!ct&&Ze?(ct=!0,Ze=!1):ct&&Ze?(ct=!1,Ze=!1):Ze=!0;break;case Se.CODE_SHIFT:L=!0,T=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:M=!0;break}break;case Se.CODE_CODE_C:if(ie<100)ie<10&&(U+="0"),U+=ie;else switch(ie!==Se.CODE_STOP&&(ge=!1),ie){case Se.CODE_FNC_1:f&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_STOP:M=!0;break}break}fl&&(T=T===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const bn=q-$;if(q=a.getNextUnset(q),!a.isRange(q,Math.min(a.getSize(),q+(q-$)/2),!1))throw new H;if(ye-=_e*ee,ye%103!==ee)throw new b;const As=U.length;if(As===0)throw new H;As>0&&ge&&(T===Se.CODE_CODE_C?U=U.substring(0,As-2):U=U.substring(0,As-1));const _n=(p[1]+p[0])/2,It=$+bn/2,Fr=_.length,kn=new Uint8Array(Fr);for(let fl=0;fl<Fr;fl++)kn[fl]=_[fl];const dl=[new Ce(_n,o),new Ce(It,o)];return new fe(U,kn,0,dl,ve.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class rr extends Ut{constructor(o=!1,a=!1){super(),this.usingCheckDigit=o,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,a,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let p=rr.findAsteriskPattern(a,f),g=a.getNextSet(p[1]),w=a.getSize(),_,T;do{rr.recordPattern(a,g,f);let Q=rr.toNarrowWidePattern(f);if(Q<0)throw new H;_=rr.patternToChar(Q),this.decodeRowResult+=_,T=g;for(let ee of f)g+=ee;g=a.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let M=0;for(let Q of f)M+=Q;let L=g-T-M;if(g!==w&&L*2<M)throw new H;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,ee=0;for(let ie=0;ie<Q;ie++)ee+=rr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ie));if(this.decodeRowResult.charAt(Q)!==rr.ALPHABET_STRING.charAt(ee%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new H;let U;this.extendedMode?U=rr.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let $=(p[1]+p[0])/2,q=T+M/2;return new fe(U,null,0,[new Ce($,o),new Ce(q,o)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(o,a){let c=o.getSize(),f=o.getNextSet(0),p=0,g=f,w=!1,_=a.length;for(let T=f;T<c;T++)if(o.get(T)!==w)a[p]++;else{if(p===_-1){if(this.toNarrowWidePattern(a)===rr.ASTERISK_ENCODING&&o.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=a[0]+a[1],a.copyWithin(0,2,2+p-1),a[p-1]=0,a[p]=0,p--}else p++;a[p]=1,w=!w}throw new H}static toNarrowWidePattern(o){let a=o.length,c=0,f;do{let p=2147483647;for(let _ of o)_<p&&_>c&&(p=_);c=p,f=0;let g=0,w=0;for(let _=0;_<a;_++){let T=o[_];T>c&&(w|=1<<a-1-_,f++,g+=T)}if(f===3){for(let _=0;_<a&&f>0;_++){let T=o[_];if(T>c&&(f--,T*2>=g))return-1}return w}}while(f>3);return-1}static patternToChar(o){for(let a=0;a<rr.CHARACTER_ENCODINGS.length;a++)if(rr.CHARACTER_ENCODINGS[a]===o)return rr.ALPHABET_STRING.charAt(a);if(o===rr.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(o){let a=o.length,c="";for(let f=0;f<a;f++){let p=o.charAt(f);if(p==="+"||p==="$"||p==="%"||p==="/"){let g=o.charAt(f+1),w="\0";switch(p){case"+":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)+32);else throw new B;break;case"$":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)-64);else throw new B;break;case"%":if(g>="A"&&g<="E")w=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")w=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")w=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")w="\0";else if(g==="V")w="@";else if(g==="W")w="`";else if(g==="X"||g==="Y"||g==="Z")w="";else throw new B;break;case"/":if(g>="A"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")w=":";else throw new B;break}c+=w,f++}else c+=p}return c}}rr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",rr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],rr.ASTERISK_ENCODING=148;class ft extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,c){let f=this.decodeStart(a),p=this.decodeEnd(a),g=new X;ft.decodeMiddle(a,f[1],p[0],g);let w=g.toString(),_=null;c!=null&&(_=c.get(F.ALLOWED_LENGTHS)),_==null&&(_=ft.DEFAULT_ALLOWED_LENGTHS);let T=w.length,M=!1,L=0;for(let q of _){if(T===q){M=!0;break}q>L&&(L=q)}if(!M&&T>L&&(M=!0),!M)throw new B;const U=[new Ce(f[1],o),new Ce(p[0],o)];return new fe(w,null,0,U,ve.ITF,new Date().getTime())}static decodeMiddle(o,a,c,f){let p=new Int32Array(10),g=new Int32Array(5),w=new Int32Array(5);for(p.fill(0),g.fill(0),w.fill(0);a<c;){Ut.recordPattern(o,a,p);for(let T=0;T<5;T++){let M=2*T;g[T]=p[M],w[T]=p[M+1]}let _=ft.decodeDigit(g);f.append(_.toString()),_=this.decodeDigit(w),f.append(_.toString()),p.forEach(function(T){a+=T})}}decodeStart(o){let a=ft.skipWhiteSpace(o),c=ft.findGuardPattern(o,a,ft.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(o,c[0]),c}validateQuietZone(o,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let f=a-1;c>0&&f>=0&&!o.get(f);f--)c--;if(c!==0)throw new H}static skipWhiteSpace(o){const a=o.getSize(),c=o.getNextSet(0);if(c===a)throw new H;return c}decodeEnd(o){o.reverse();try{let a=ft.skipWhiteSpace(o),c;try{c=ft.findGuardPattern(o,a,ft.END_PATTERN_REVERSED[0])}catch(p){p instanceof H&&(c=ft.findGuardPattern(o,a,ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,c[0]);let f=c[0];return c[0]=o.getSize()-c[1],c[1]=o.getSize()-f,c}finally{o.reverse()}}static findGuardPattern(o,a,c){let f=c.length,p=new Int32Array(f),g=o.getSize(),w=!1,_=0,T=a;p.fill(0);for(let M=a;M<g;M++)if(o.get(M)!==w)p[_]++;else{if(_===f-1){if(Ut.patternMatchVariance(p,c,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return[T,M];T+=p[0]+p[1],C.arraycopy(p,2,p,0,_-1),p[_-1]=0,p[_]=0,_--}else _++;p[_]=1,w=!w}throw new H}static decodeDigit(o){let a=ft.MAX_AVG_VARIANCE,c=-1,f=ft.PATTERNS.length;for(let p=0;p<f;p++){let g=ft.PATTERNS[p],w=Ut.patternMatchVariance(o,g,ft.MAX_INDIVIDUAL_VARIANCE);w<a?(a=w,c=p):w===a&&(c=-1)}if(c>=0)return c%10;throw new H}}ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ft.MAX_AVG_VARIANCE=.38,ft.MAX_INDIVIDUAL_VARIANCE=.5,ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ft.START_PATTERN=Int32Array.from([1,1,1,1]),ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class zt extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,c,f=0,p=Int32Array.from([0,0,0]);for(;!a;){p=Int32Array.from([0,0,0]),c=zt.findGuardPattern(o,f,!1,this.START_END_PATTERN,p);let g=c[0];f=c[1];let w=g-(f-g);w>=0&&(a=o.isRange(w,g,!1))}return c}static checkChecksum(o){return zt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return zt.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let f=a-1;f>=0;f-=2){let p=o.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}c*=3;for(let f=a-2;f>=0;f-=2){let p=o.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}return(1e3-c)%10}static decodeEnd(o,a){return zt.findGuardPattern(o,a,!1,zt.START_END_PATTERN,new Int32Array(zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,c,f){return this.findGuardPattern(o,a,c,f,new Int32Array(f.length))}static findGuardPattern(o,a,c,f,p){let g=o.getSize();a=c?o.getNextUnset(a):o.getNextSet(a);let w=0,_=a,T=f.length,M=c;for(let L=a;L<g;L++)if(o.get(L)!==M)p[w]++;else{if(w===T-1){if(Ut.patternMatchVariance(p,f,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE)return Int32Array.from([_,L]);_+=p[0]+p[1];let U=p.slice(2,p.length-1);for(let $=0;$<w-1;$++)p[$]=U[$];p[w-1]=0,p[w]=0,w--}else w++;p[w]=1,M=!M}throw new H}static decodeDigit(o,a,c,f){this.recordPattern(o,c,a);let p=this.MAX_AVG_VARIANCE,g=-1,w=f.length;for(let _=0;_<w;_++){let T=f[_],M=Ut.patternMatchVariance(a,T,zt.MAX_INDIVIDUAL_VARIANCE);M<p&&(p=M,g=_)}if(g>=0)return g;throw new H}}zt.MAX_AVG_VARIANCE=.48,zt.MAX_INDIVIDUAL_VARIANCE=.7,zt.START_END_PATTERN=Int32Array.from([1,1,1]),zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sa{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(a,c,f),g=f.toString(),w=sa.parseExtensionString(g),_=[new Ce((c[0]+c[1])/2,o),new Ce(p,o)],T=new fe(g,null,0,_,ve.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(o,a,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=o.getSize(),g=a[1],w=0;for(let T=0;T<5&&g<p;T++){let M=zt.decodeDigit(o,f,g,zt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let L of f)g+=L;M>=10&&(w|=1<<4-T),T!==4&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==5)throw new H;let _=this.determineCheckDigit(w);if(sa.extensionChecksum(c.toString())!==_)throw new H;return g}static extensionChecksum(o){let a=o.length,c=0;for(let f=a-2;f>=0;f-=2)c+=o.charAt(f).charCodeAt(0)-48;c*=3;for(let f=a-1;f>=0;f-=2)c+=o.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new H}static parseExtensionString(o){if(o.length!==5)return null;let a=sa.parseExtension5String(o);return a==null?null:new Map([[ke.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(o.substring(1)),f=(c/100).toString(),p=c%100,g=p<10?"0"+p:p.toString();return a+f+"."+g}}class sl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(a,c,f),g=f.toString(),w=sl.parseExtensionString(g),_=[new Ce((c[0]+c[1])/2,o),new Ce(p,o)],T=new fe(g,null,0,_,ve.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(o,a,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=o.getSize(),g=a[1],w=0;for(let _=0;_<2&&g<p;_++){let T=zt.decodeDigit(o,f,g,zt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+T%10);for(let M of f)g+=M;T>=10&&(w|=1<<1-_),_!==1&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==2)throw new H;if(parseInt(c.toString())%4!==w)throw new H;return g}static parseExtensionString(o){return o.length!==2?null:new Map([[ke.ISSUE_NUMBER,parseInt(o)]])}}class Hc{static decodeRow(o,a,c){let f=zt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sa().decodeRow(o,a,f)}catch{return new sl().decodeRow(o,a,f)}}}Hc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends zt{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=ht.L_PATTERNS[o-10],c=new Int32Array(a.length);for(let f=0;f<a.length;f++)c[f]=a[a.length-f-1];ht.L_AND_G_PATTERNS[o]=c}}decodeRow(o,a,c){let f=ht.findStartGuardPattern(a),p=c==null?null:c.get(F.NEED_RESULT_POINT_CALLBACK);if(p!=null){const ge=new Ce((f[0]+f[1])/2,o);p.foundPossibleResultPoint(ge)}let g=this.decodeMiddle(a,f,this.decodeRowStringBuffer),w=g.rowOffset,_=g.resultString;if(p!=null){const ge=new Ce(w,o);p.foundPossibleResultPoint(ge)}let T=this.decodeEnd(a,w);if(p!=null){const ge=new Ce((T[0]+T[1])/2,o);p.foundPossibleResultPoint(ge)}let M=T[1],L=M+(M-T[0]);if(L>=a.getSize()||!a.isRange(M,L,!1))throw new H;let U=_.toString();if(U.length<8)throw new B;if(!ht.checkChecksum(U))throw new b;let $=(f[1]+f[0])/2,q=(T[1]+T[0])/2,Q=this.getBarcodeFormat(),ee=[new Ce($,o),new Ce(q,o)],ie=new fe(U,null,0,ee,Q,new Date().getTime()),ye=0;try{let ge=Hc.decodeRow(o,a,T[1]);ie.putMetadata(ke.UPC_EAN_EXTENSION,ge.getText()),ie.putAllMetadata(ge.getResultMetadata()),ie.addResultPoints(ge.getResultPoints()),ye=ge.getText().length}catch{}let _e=c==null?null:c.get(F.ALLOWED_EAN_EXTENSIONS);if(_e!=null){let ge=!1;for(let ct in _e)if(ye.toString()===ct){ge=!0;break}if(!ge)throw new H}return ie}decodeEnd(o,a){return ht.findGuardPattern(o,a,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return ht.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return ht.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let f=a-1;f>=0;f-=2){let p=o.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}c*=3;for(let f=a-2;f>=0;f-=2){let p=o.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}return(1e3-c)%10}}class Es extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=o.getSize(),g=a[1],w=0;for(let T=0;T<6&&g<p;T++){let M=ht.decodeDigit(o,f,g,ht.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let L of f)g+=L;M>=10&&(w|=1<<5-T)}c=Es.determineFirstDigit(c,w),g=ht.findGuardPattern(o,g,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<p;T++){let M=ht.decodeDigit(o,f,g,ht.L_PATTERNS);c+=String.fromCharCode(48+M);for(let L of f)g+=L}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(o,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return o=String.fromCharCode(48+c)+o,o;throw new H}}Es.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ss extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=o.getSize(),g=a[1];for(let _=0;_<4&&g<p;_++){let T=ht.decodeDigit(o,f,g,ht.L_PATTERNS);c+=String.fromCharCode(48+T);for(let M of f)g+=M}g=ht.findGuardPattern(o,g,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&g<p;_++){let T=ht.decodeDigit(o,f,g,ht.L_PATTERNS);c+=String.fromCharCode(48+T);for(let M of f)g+=M}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return ve.EAN_8}}class Hd extends ht{constructor(){super(...arguments),this.ean13Reader=new Es}getBarcodeFormat(){return ve.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,c))}decodeMiddle(o,a,c){return this.ean13Reader.decodeMiddle(o,a,c)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let c=new fe(a.substring(1),null,null,o.getResultPoints(),ve.UPC_A);return o.getResultMetadata()!=null&&c.putAllMetadata(o.getResultMetadata()),c}else throw new H}reset(){this.ean13Reader.reset()}}class Ve extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,c){const f=this.decodeMiddleCounters.map(T=>T);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const p=o.getSize();let g=a[1],w=0;for(let T=0;T<6&&g<p;T++){const M=Ve.decodeDigit(o,f,g,Ve.L_AND_G_PATTERNS);c+=String.fromCharCode(48+M%10);for(let L of f)g+=L;M>=10&&(w|=1<<5-T)}let _=Ve.determineNumSysAndCheckDigit(c,w);return{rowOffset:g,resultString:_}}decodeEnd(o,a){return Ve.findGuardPatternWithoutCounters(o,a,!0,Ve.MIDDLE_END_PATTERN)}checkChecksum(o){return ht.checkChecksum(Ve.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let p=String.fromCharCode(48+c),g=String.fromCharCode(48+f);return p+o+g}throw H.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(o){const a=o.slice(1,7).split("").map(p=>p.charCodeAt(0)),c=new X;c.append(o.charAt(0));let f=a[5];switch(f){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(f),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(f);break}return o.length>=8&&c.append(o.charAt(7)),c.toString()}}Ve.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ve.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class xt extends Ut{constructor(o){super();let a=o==null?null:o.get(F.POSSIBLE_FORMATS),c=[];n(a)?(c.push(new Es),c.push(new Hd),c.push(new Ss),c.push(new Ve)):(a.indexOf(ve.EAN_13)>-1&&c.push(new Es),a.indexOf(ve.UPC_A)>-1&&c.push(new Hd),a.indexOf(ve.EAN_8)>-1&&c.push(new Ss),a.indexOf(ve.UPC_E)>-1&&c.push(new Ve)),this.readers=c}decodeRow(o,a,c){for(let f of this.readers)try{const p=f.decodeRow(o,a,c),g=p.getBarcodeFormat()===ve.EAN_13&&p.getText().charAt(0)==="0",w=c==null?null:c.get(F.POSSIBLE_FORMATS),_=w==null||w.includes(ve.UPC_A);if(g&&_){const T=p.getRawBytes(),M=new fe(p.getText().substring(1),T,T?T.length:null,p.getResultPoints(),ve.UPC_A);return M.putAllMetadata(p.getResultMetadata()),M}return p}catch{}throw new H}reset(){for(let o of this.readers)o.reset()}}class et extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,a){for(let c=0;c<a.length;c++)if(Ut.patternMatchVariance(o,a[c],et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return c;throw new H}static count(o){return Ne.sum(new Int32Array(o))}static increment(o,a){let c=0,f=a[0];for(let p=1;p<o.length;p++)a[p]>f&&(f=a[p],c=p);o[c]++}static decrement(o,a){let c=0,f=a[0];for(let p=1;p<o.length;p++)a[p]<f&&(f=a[p],c=p);o[c]--}static isFinderPattern(o){let a=o[0]+o[1],c=a+o[2]+o[3],f=a/c;if(f>=et.MIN_FINDER_PATTERN_RATIO&&f<=et.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let w of o)w>g&&(g=w),w<p&&(p=w);return g<10*p}return!1}}et.MAX_AVG_VARIANCE=.2,et.MAX_INDIVIDUAL_VARIANCE=.45,et.MIN_FINDER_PATTERN_RATIO=9.5/12,et.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Ir))return!1;const a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Wr{constructor(o,a,c,f,p){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Ce(c,p)),this.resultPoints.push(new Ce(f,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Wr))return!1;const a=o;return this.value===a.value}hashCode(){return this.value}}class _r{constructor(){}static getRSSvalue(o,a,c){let f=0;for(let _ of o)f+=_;let p=0,g=0,w=o.length;for(let _=0;_<w-1;_++){let T;for(T=1,g|=1<<_;T<o[_];T++,g&=~(1<<_)){let M=_r.combins(f-T-1,w-_-2);if(c&&g===0&&f-T-(w-_-1)>=w-_-1&&(M-=_r.combins(f-T-(w-_),w-_-2)),w-_-1>1){let L=0;for(let U=f-T-(w-_-2);U>a;U--)L+=_r.combins(f-T-U-1,w-_-3);M-=L*(w-1-_)}else f-T>a&&M--;p+=M}f-=T}return p}static combins(o,a){let c,f;o-a>a?(f=a,c=o-a):(f=o-a,c=a);let p=1,g=1;for(let w=o;w>c;w--)p*=w,g<=f&&(p/=g,g++);for(;g<=f;)p/=g,g++;return p}}class Ai{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let c=12*a,f=new O(c),p=0,w=o[0].getRightChar().getValue();for(let _=11;_>=0;--_)w&1<<_&&f.set(p),p++;for(let _=1;_<o.length;++_){let T=o[_],M=T.getLeftChar().getValue();for(let L=11;L>=0;--L)M&1<<L&&f.set(p),p++;if(T.getRightChar()!=null){let L=T.getRightChar().getValue();for(let U=11;U>=0;--U)L&1<<U&&f.set(p),p++}}return f}}class Cr{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class yn extends rs{constructor(o,a){super(o),this.value=a}getValue(){return this.value}isFNC1(){return this.value===yn.FNC1}}yn.FNC1="$";class ia extends rs{constructor(o,a,c){super(o),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ns extends rs{constructor(o,a,c){if(super(o),a<0||a>10||c<0||c>10)throw new B;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ns.FNC1}isSecondDigitFNC1(){return this.secondDigit===ns.FNC1}isAnyFNC1(){return this.firstDigit===ns.FNC1||this.secondDigit===ns.FNC1}}ns.FNC1=10;class Ie{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new H;let a=o.substring(0,2);for(let p of Ie.TWO_DIGIT_DATA_LENGTH)if(p[0]===a)return p[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(2,p[2],o):Ie.processFixedAI(2,p[1],o);if(o.length<3)throw new H;let c=o.substring(0,3);for(let p of Ie.THREE_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(3,p[2],o):Ie.processFixedAI(3,p[1],o);for(let p of Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,p[2],o):Ie.processFixedAI(4,p[1],o);if(o.length<4)throw new H;let f=o.substring(0,4);for(let p of Ie.FOUR_DIGIT_DATA_LENGTH)if(p[0]===f)return p[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,p[2],o):Ie.processFixedAI(4,p[1],o);throw new H}static processFixedAI(o,a,c){if(c.length<o)throw new H;let f=c.substring(0,o);if(c.length<o+a)throw new H;let p=c.substring(o,o+a),g=c.substring(o+a),w="("+f+")"+p,_=Ie.parseFieldsInGeneralPurpose(g);return _==null?w:w+_}static processVariableAI(o,a,c){let f=c.substring(0,o),p;c.length<o+a?p=c.length:p=o+a;let g=c.substring(o,p),w=c.substring(p),_="("+f+")"+g,T=Ie.parseFieldsInGeneralPurpose(w);return T==null?_:_+T}}Ie.VARIABLE_LENGTH=[],Ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ie.VARIABLE_LENGTH,20],["22",Ie.VARIABLE_LENGTH,29],["30",Ie.VARIABLE_LENGTH,8],["37",Ie.VARIABLE_LENGTH,8],["90",Ie.VARIABLE_LENGTH,30],["91",Ie.VARIABLE_LENGTH,30],["92",Ie.VARIABLE_LENGTH,30],["93",Ie.VARIABLE_LENGTH,30],["94",Ie.VARIABLE_LENGTH,30],["95",Ie.VARIABLE_LENGTH,30],["96",Ie.VARIABLE_LENGTH,30],["97",Ie.VARIABLE_LENGTH,3],["98",Ie.VARIABLE_LENGTH,30],["99",Ie.VARIABLE_LENGTH,30]],Ie.THREE_DIGIT_DATA_LENGTH=[["240",Ie.VARIABLE_LENGTH,30],["241",Ie.VARIABLE_LENGTH,30],["242",Ie.VARIABLE_LENGTH,6],["250",Ie.VARIABLE_LENGTH,30],["251",Ie.VARIABLE_LENGTH,30],["253",Ie.VARIABLE_LENGTH,17],["254",Ie.VARIABLE_LENGTH,20],["400",Ie.VARIABLE_LENGTH,30],["401",Ie.VARIABLE_LENGTH,30],["402",17],["403",Ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ie.VARIABLE_LENGTH,20],["421",Ie.VARIABLE_LENGTH,15],["422",3],["423",Ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ie.VARIABLE_LENGTH,15],["391",Ie.VARIABLE_LENGTH,18],["392",Ie.VARIABLE_LENGTH,15],["393",Ie.VARIABLE_LENGTH,18],["703",Ie.VARIABLE_LENGTH,30]],Ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ie.VARIABLE_LENGTH,20],["8003",Ie.VARIABLE_LENGTH,30],["8004",Ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ie.VARIABLE_LENGTH,30],["8008",Ie.VARIABLE_LENGTH,12],["8018",18],["8020",Ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ie.VARIABLE_LENGTH,70],["8200",Ie.VARIABLE_LENGTH,70]];class il{constructor(o){this.buffer=new X,this.information=o}decodeAllCodes(o,a){let c=a,f=null;do{let p=this.decodeGeneralPurposeField(c,f),g=Ie.parseFieldsInGeneralPurpose(p.getNewString());if(g!=null&&o.append(g),p.isRemaining()?f=""+p.getRemainingValue():f=null,c===p.getNewPosition())break;c=p.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(o,4);return p===0?new ns(this.information.getSize(),ns.FNC1,ns.FNC1):new ns(this.information.getSize(),p-1,ns.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),c=(a-8)/11,f=(a-8)%11;return new ns(o+7,c,f)}extractNumericValueFromBitArray(o,a){return il.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,c){let f=0;for(let p=0;p<c;++p)o.get(a+p)&&(f|=1<<c-p-1);return f}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new ia(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new ia(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(c!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new ia(this.current.getPosition(),this.buffer.toString()):a=new ia(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Cr(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Cr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Cr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Cr(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<116)return!0;if(o+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,8);return f>=232&&f<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new yn(o+5,yn.FNC1);if(a>=5&&a<15)return new yn(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<90)return new yn(o+7,""+(c+1));if(c>=90&&c<116)return new yn(o+7,""+(c+7));let f=this.extractNumericValueFromBitArray(o,8),p;switch(f){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new B}return new yn(o+8,p)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,6);return c>=16&&c<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new yn(o+5,yn.FNC1);if(a>=5&&a<15)return new yn(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,6);if(c>=32&&c<58)return new yn(o+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new St("Decoding invalid alphanumeric value: "+c)}return new yn(o+6,f)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class im{constructor(o){this.information=o,this.generalDecoder=new il(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends im{constructor(o){super(o)}encodeCompressedGtin(o,a){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,a,c)}encodeCompressedGtinWithoutAI(o,a,c){for(let f=0;f<4;++f){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*f,10);p/100===0&&o.append("0"),p/10===0&&o.append("0"),o.append(p)}wn.appendCheckDigit(o,c)}static appendCheckDigit(o,a){let c=0;for(let f=0;f<13;f++){let p=o.charAt(f+a).charCodeAt(0)-48;c+=f&1?p:3*p}c=10-c%10,c===10&&(c=0),o.append(c)}}wn.GTIN_SIZE=40;class ol extends wn{constructor(o){super(o)}parseInformation(){let o=new X;o.append("(01)");let a=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(ol.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,ol.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(o,ol.HEADER_SIZE+44)}}ol.HEADER_SIZE=4;class $d extends im{constructor(o){super(o)}parseInformation(){let o=new X;return this.getGeneralDecoder().decodeAllCodes(o,$d.HEADER_SIZE)}}$d.HEADER_SIZE=5;class Wd extends wn{constructor(o){super(o)}encodeCompressedWeight(o,a,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(o,f);let p=this.checkWeight(f),g=1e5;for(let w=0;w<5;++w)p/g===0&&o.append("0"),g/=10;o.append(p)}}class Zs extends Wd{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Zs.HEADER_SIZE+Wd.GTIN_SIZE+Zs.WEIGHT_SIZE)throw new H;let o=new X;return this.encodeCompressedGtin(o,Zs.HEADER_SIZE),this.encodeCompressedWeight(o,Zs.HEADER_SIZE+Wd.GTIN_SIZE,Zs.WEIGHT_SIZE),o.toString()}}Zs.HEADER_SIZE=5,Zs.WEIGHT_SIZE=15;class W4 extends Zs{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class G4 extends Zs{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Js extends wn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Js.HEADER_SIZE+wn.GTIN_SIZE)throw new H;let o=new X;this.encodeCompressedGtin(o,Js.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Js.HEADER_SIZE+wn.GTIN_SIZE,Js.LAST_DIGIT_SIZE);o.append("(392"),o.append(a),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Js.HEADER_SIZE+wn.GTIN_SIZE+Js.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}Js.HEADER_SIZE=8,Js.LAST_DIGIT_SIZE=2;class nn extends wn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<nn.HEADER_SIZE+wn.GTIN_SIZE)throw new H;let o=new X;this.encodeCompressedGtin(o,nn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(nn.HEADER_SIZE+wn.GTIN_SIZE,nn.LAST_DIGIT_SIZE);o.append("(393"),o.append(a),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(nn.HEADER_SIZE+wn.GTIN_SIZE+nn.LAST_DIGIT_SIZE,nn.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(nn.HEADER_SIZE+wn.GTIN_SIZE+nn.LAST_DIGIT_SIZE+nn.FIRST_THREE_DIGITS_SIZE,null);return o.append(f.getNewString()),o.toString()}}nn.HEADER_SIZE=8,nn.LAST_DIGIT_SIZE=2,nn.FIRST_THREE_DIGITS_SIZE=10;class Vt extends Wd{constructor(o,a,c){super(o),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE+Vt.DATE_SIZE)throw new H;let o=new X;return this.encodeCompressedGtin(o,Vt.HEADER_SIZE),this.encodeCompressedWeight(o,Vt.HEADER_SIZE+Vt.GTIN_SIZE,Vt.WEIGHT_SIZE),this.encodeCompressedDate(o,Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Vt.DATE_SIZE);if(c==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let f=c%32;c/=32;let p=c%12+1;c/=12;let g=c;g/10==0&&o.append("0"),o.append(g),p/10==0&&o.append("0"),o.append(p),f/10==0&&o.append("0"),o.append(f)}addWeightCode(o,a){o.append("("),o.append(this.firstAIdigits),o.append(a/1e5),o.append(")")}checkWeight(o){return o%1e5}}Vt.HEADER_SIZE=8,Vt.WEIGHT_SIZE=20,Vt.DATE_SIZE=16;function sw(D){try{if(D.get(1))return new ol(D);if(!D.get(2))return new $d(D);switch(il.extractNumericValueFromBitArray(D,1,4)){case 4:return new W4(D);case 5:return new G4(D)}switch(il.extractNumericValueFromBitArray(D,1,5)){case 12:return new Js(D);case 13:return new nn(D)}switch(il.extractNumericValueFromBitArray(D,1,7)){case 56:return new Vt(D,"310","11");case 57:return new Vt(D,"320","11");case 58:return new Vt(D,"310","13");case 59:return new Vt(D,"320","13");case 60:return new Vt(D,"310","15");case 61:return new Vt(D,"320","15");case 62:return new Vt(D,"310","17");case 63:return new Vt(D,"320","17")}}catch(o){throw console.log(o),new St("unknown decoder: "+D)}}class Ki{constructor(o,a,c,f){this.leftchar=o,this.rightchar=a,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof Ki?Ki.equalsOrNull(o.leftchar,a.leftchar)&&Ki.equalsOrNull(o.rightchar,a.rightchar)&&Ki.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:Ki.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class om{constructor(o,a,c){this.pairs=o,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof om?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let c;return o.forEach((f,p)=>{a.forEach(g=>{f.getLeftChar().getValue()===g.getLeftChar().getValue()&&f.getRightChar().getValue()===g.getRightChar().getValue()&&f.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class de extends et{constructor(o){super(...arguments),this.pairs=new Array(de.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,c){this.pairs.length=0,this.startFromEven=!1;try{return de.constructResult(this.decodeRow2pairs(o,a))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,de.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(p){if(p instanceof H){if(!this.pairs.length)throw new H;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(o,!1),f){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new H}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let c=a;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let g of o)this.pairs.push(g.getPairs());if(this.pairs.push(f.getPairs()),!de.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(o);p.push(f);try{return this.checkRows(p,c+1)}catch(g){this.verbose&&console.log(g)}}throw new H}static isValidSequence(o){for(let a of de.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let c=!0;for(let f=0;f<o.length;f++)if(o[f].getFinderPattern().getValue()!=a[f]){c=!1;break}if(c)return!0}return!1}storeRow(o,a){let c=0,f=!1,p=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>o){p=g.isEquivalent(this.pairs);break}f=g.isEquivalent(this.pairs),c++}p||f||de.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new om(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let c of a)if(c.getPairs().length!==o.length){for(let f of c.getPairs())for(let p of o)if(Ki.equals(f,p))break}}static isPartialRow(o,a){for(let c of a){let f=!0;for(let p of o){let g=!1;for(let w of c.getPairs())if(p.equals(w)){g=!0;break}if(!g){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=Ai.buildBitArray(o),f=sw(a).parseInformation(),p=o[0].getFinderPattern().getResultPoints(),g=o[o.length-1].getFinderPattern().getResultPoints(),w=[p[0],p[1],g[0],g[1]];return new fe(f,null,null,w,ve.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),c=o.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),p=2;for(let w=1;w<this.pairs.size();++w){let _=this.pairs.get(w);f+=_.getLeftChar().getChecksumPortion(),p++;let T=_.getRightChar();T!=null&&(f+=T.getChecksumPortion(),p++)}return f%=211,211*(p-4)+f==a.getValue()}static getNextSecondBar(o,a){let c;return o.get(a)?(c=o.getNextUnset(a),c=o.getNextSet(c)):(c=o.getNextSet(a),c=o.getNextUnset(c)),c}retrieveNextPair(o,a,c){let f=a.length%2==0;this.startFromEven&&(f=!f);let p,g=!0,w=-1;do this.findNextPair(o,a,w),p=this.parseFoundFinderPattern(o,c,f),p==null?w=de.getNextSecondBar(o,this.startEnd[0]):g=!1;while(g);let _=this.decodeDataCharacter(o,p,f,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new H;let T;try{T=this.decodeDataCharacter(o,p,f,!1)}catch(M){T=null,this.verbose&&console.log(M)}return new Ki(_,T,p,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=o.getSize(),g;c>=0?g=c:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let w=a.length%2!=0;this.startFromEven&&(w=!w);let _=!1;for(;g<p&&(_=!o.get(g),!!_);)g++;let T=0,M=g;for(let L=g;L<p;L++)if(o.get(L)!=_)f[T]++;else{if(T==3){if(w&&de.reverseCounters(f),de.isFinderPattern(f)){this.startEnd[0]=M,this.startEnd[1]=L;return}w&&de.reverseCounters(f),M+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,T--}else T++;f[T]=1,_=!_}throw new H}static reverseCounters(o){let a=o.length;for(let c=0;c<a/2;++c){let f=o[c];o[c]=o[a-c-1],o[a-c-1]=f}}parseFoundFinderPattern(o,a,c){let f,p,g;if(c){let T=this.startEnd[0]-1;for(;T>=0&&!o.get(T);)T--;T++,f=this.startEnd[0]-T,p=T,g=this.startEnd[1]}else p=this.startEnd[0],g=o.getNextUnset(this.startEnd[1]+1),f=g-this.startEnd[1];let w=this.getDecodeFinderCounters();C.arraycopy(w,0,w,1,w.length-1),w[0]=f;let _;try{_=this.parseFinderValue(w,de.FINDER_PATTERNS)}catch{return null}return new Wr(_,[p,g],p,g,a)}decodeDataCharacter(o,a,c,f){let p=this.getDataCharacterCounters();for(let It=0;It<p.length;It++)p[It]=0;if(f)de.recordPatternInReverse(o,a.getStartEnd()[0],p);else{de.recordPattern(o,a.getStartEnd()[1],p);for(let It=0,Fr=p.length-1;It<Fr;It++,Fr--){let kn=p[It];p[It]=p[Fr],p[Fr]=kn}}let g=17,w=Ne.sum(new Int32Array(p))/g,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(w-_)/_>.3)throw new H;let T=this.getOddCounts(),M=this.getEvenCounts(),L=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let It=0;It<p.length;It++){let Fr=1*p[It]/w,kn=Fr+.5;if(kn<1){if(Fr<.3)throw new H;kn=1}else if(kn>8){if(Fr>8.7)throw new H;kn=8}let dl=It/2;It&1?(M[dl]=kn,U[dl]=Fr-kn):(T[dl]=kn,L[dl]=Fr-kn)}this.adjustOddEvenCounts(g);let $=4*a.getValue()+(c?0:2)+(f?0:1)-1,q=0,Q=0;for(let It=T.length-1;It>=0;It--){if(de.isNotA1left(a,c,f)){let Fr=de.WEIGHTS[$][2*It];Q+=T[It]*Fr}q+=T[It]}let ee=0;for(let It=M.length-1;It>=0;It--)if(de.isNotA1left(a,c,f)){let Fr=de.WEIGHTS[$][2*It+1];ee+=M[It]*Fr}let ie=Q+ee;if(q&1||q>13||q<4)throw new H;let ye=(13-q)/2,_e=de.SYMBOL_WIDEST[ye],ge=9-_e,ct=_r.getRSSvalue(T,_e,!0),Ze=_r.getRSSvalue(M,ge,!1),bn=de.EVEN_TOTAL_SUBSET[ye],As=de.GSUM[ye],_n=ct*bn+Ze+As;return new Ir(_n,ie)}static isNotA1left(o,a,c){return!(o.getValue()==0&&a&&c)}adjustOddEvenCounts(o){let a=Ne.sum(new Int32Array(this.getOddCounts())),c=Ne.sum(new Int32Array(this.getEvenCounts())),f=!1,p=!1;a>13?p=!0:a<4&&(f=!0);let g=!1,w=!1;c>13?w=!0:c<4&&(g=!0);let _=a+c-o,T=(a&1)==1,M=(c&1)==0;if(_==1)if(T){if(M)throw new H;p=!0}else{if(!M)throw new H;w=!0}else if(_==-1)if(T){if(M)throw new H;f=!0}else{if(!M)throw new H;g=!0}else if(_==0){if(T){if(!M)throw new H;a<c?(f=!0,w=!0):(p=!0,g=!0)}else if(M)throw new H}else throw new H;if(f){if(p)throw new H;de.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&de.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(w)throw new H;de.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&de.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}de.SYMBOL_WIDEST=[7,5,4,3,1],de.EVEN_TOTAL_SUBSET=[4,20,52,104,204],de.GSUM=[0,348,1388,2948,3988],de.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],de.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],de.FINDER_PAT_A=0,de.FINDER_PAT_B=1,de.FINDER_PAT_C=2,de.FINDER_PAT_D=3,de.FINDER_PAT_E=4,de.FINDER_PAT_F=5,de.FINDER_PATTERN_SEQUENCES=[[de.FINDER_PAT_A,de.FINDER_PAT_A],[de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B],[de.FINDER_PAT_A,de.FINDER_PAT_C,de.FINDER_PAT_B,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_C],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F]],de.MAX_PAIRS=11;class Y4 extends Ir{constructor(o,a,c){super(o,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nr extends et{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,c){const f=this.decodePair(a,!1,o,c);nr.addOrTally(this.possibleLeftPairs,f),a.reverse();let p=this.decodePair(a,!0,o,c);nr.addOrTally(this.possibleRightPairs,p),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&nr.checkChecksum(g,w))return nr.constructResult(g,w)}throw new H}static addOrTally(o,a){if(a==null)return;let c=!1;for(let f of o)if(f.getValue()===a.getValue()){f.incrementCount(),c=!0;break}c||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let c=4537077*o.getValue()+a.getValue(),f=new String(c).toString(),p=new X;for(let T=13-f.length;T>0;T--)p.append("0");p.append(f);let g=0;for(let T=0;T<13;T++){let M=p.charAt(T).charCodeAt(0)-48;g+=T&1?M:3*M}g=10-g%10,g===10&&(g=0),p.append(g.toString());let w=o.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new fe(p.toString(),null,0,[w[0],w[1],_[0],_[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(o,a){let c=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,f=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(o,a,c,f){try{let p=this.findFinderPattern(o,a),g=this.parseFoundFinderPattern(o,c,a,p),w=f==null?null:f.get(F.NEED_RESULT_POINT_CALLBACK);if(w!=null){let M=(p[0]+p[1])/2;a&&(M=o.getSize()-1-M),w.foundPossibleResultPoint(new Ce(M,c))}let _=this.decodeDataCharacter(o,g,!0),T=this.decodeDataCharacter(o,g,!1);return new Y4(1597*_.getValue()+T.getValue(),_.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(o,a,c){let f=this.getDataCharacterCounters();for(let ee=0;ee<f.length;ee++)f[ee]=0;if(c)Ut.recordPatternInReverse(o,a.getStartEnd()[0],f);else{Ut.recordPattern(o,a.getStartEnd()[1]+1,f);for(let ee=0,ie=f.length-1;ee<ie;ee++,ie--){let ye=f[ee];f[ee]=f[ie],f[ie]=ye}}let p=c?16:15,g=Ne.sum(new Int32Array(f))/p,w=this.getOddCounts(),_=this.getEvenCounts(),T=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let ee=0;ee<f.length;ee++){let ie=f[ee]/g,ye=Math.floor(ie+.5);ye<1?ye=1:ye>8&&(ye=8);let _e=Math.floor(ee/2);ee&1?(_[_e]=ye,M[_e]=ie-ye):(w[_e]=ye,T[_e]=ie-ye)}this.adjustOddEvenCounts(c,p);let L=0,U=0;for(let ee=w.length-1;ee>=0;ee--)U*=9,U+=w[ee],L+=w[ee];let $=0,q=0;for(let ee=_.length-1;ee>=0;ee--)$*=9,$+=_[ee],q+=_[ee];let Q=U+3*$;if(c){if(L&1||L>12||L<4)throw new H;let ee=(12-L)/2,ie=nr.OUTSIDE_ODD_WIDEST[ee],ye=9-ie,_e=_r.getRSSvalue(w,ie,!1),ge=_r.getRSSvalue(_,ye,!0),ct=nr.OUTSIDE_EVEN_TOTAL_SUBSET[ee],Ze=nr.OUTSIDE_GSUM[ee];return new Ir(_e*ct+ge+Ze,Q)}else{if(q&1||q>10||q<4)throw new H;let ee=(10-q)/2,ie=nr.INSIDE_ODD_WIDEST[ee],ye=9-ie,_e=_r.getRSSvalue(w,ie,!0),ge=_r.getRSSvalue(_,ye,!1),ct=nr.INSIDE_ODD_TOTAL_SUBSET[ee],Ze=nr.INSIDE_GSUM[ee];return new Ir(ge*ct+_e+Ze,Q)}}findFinderPattern(o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=o.getSize(),p=!1,g=0;for(;g<f&&(p=!o.get(g),a!==p);)g++;let w=0,_=g;for(let T=g;T<f;T++)if(o.get(T)!==p)c[w]++;else{if(w===3){if(et.isFinderPattern(c))return[_,T];_+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new H}parseFoundFinderPattern(o,a,c,f){let p=o.get(f[0]),g=f[0]-1;for(;g>=0&&p!==o.get(g);)g--;g++;const w=f[0]-g,_=this.getDecodeFinderCounters(),T=new Int32Array(_.length);C.arraycopy(_,0,T,1,_.length-1),T[0]=w;const M=this.parseFinderValue(T,nr.FINDER_PATTERNS);let L=g,U=f[1];return c&&(L=o.getSize()-1-L,U=o.getSize()-1-U),new Wr(M,[g,f[1]],L,U,a)}adjustOddEvenCounts(o,a){let c=Ne.sum(new Int32Array(this.getOddCounts())),f=Ne.sum(new Int32Array(this.getEvenCounts())),p=!1,g=!1,w=!1,_=!1;o?(c>12?g=!0:c<4&&(p=!0),f>12?_=!0:f<4&&(w=!0)):(c>11?g=!0:c<5&&(p=!0),f>10?_=!0:f<4&&(w=!0));let T=c+f-a,M=(c&1)===(o?1:0),L=(f&1)===1;if(T===1)if(M){if(L)throw new H;g=!0}else{if(!L)throw new H;_=!0}else if(T===-1)if(M){if(L)throw new H;p=!0}else{if(!L)throw new H;w=!0}else if(T===0){if(M){if(!L)throw new H;c<f?(p=!0,_=!0):(g=!0,w=!0)}else if(L)throw new H}else throw new H;if(p){if(g)throw new H;et.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&et.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(_)throw new H;et.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&et.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nr.OUTSIDE_GSUM=[0,161,961,2015,2715],nr.INSIDE_GSUM=[0,336,1036,1516],nr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nr.INSIDE_ODD_WIDEST=[2,4,6,8],nr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class al extends Ut{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;const c=o?o.get(F.POSSIBLE_FORMATS):null,f=o&&o.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ve.EAN_13)||c.includes(ve.UPC_A)||c.includes(ve.EAN_8)||c.includes(ve.UPC_E))&&this.readers.push(new xt(o)),c.includes(ve.CODE_39)&&this.readers.push(new rr(f)),c.includes(ve.CODE_128)&&this.readers.push(new Se),c.includes(ve.ITF)&&this.readers.push(new ft),c.includes(ve.RSS_14)&&this.readers.push(new nr),c.includes(ve.RSS_EXPANDED)&&this.readers.push(new de(this.verbose))):(this.readers.push(new xt(o)),this.readers.push(new rr),this.readers.push(new xt(o)),this.readers.push(new Se),this.readers.push(new ft),this.readers.push(new nr),this.readers.push(new de(this.verbose)))}decodeRow(o,a,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(o,a,c)}catch{}throw new H}reset(){this.readers.forEach(o=>o.reset())}}class q4 extends le{constructor(o=500,a){super(new al(a),o,a)}}class vt{constructor(o,a,c){this.ecCodewords=o,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class wt{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ut{constructor(o,a,c,f,p,g){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=p,this.ecBlocks=g;let w=0;const _=g.getECCodewords(),T=g.getECBlocks();for(let M of T)w+=M.getCount()*(M.getDataCodewords()+_);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new B;for(let c of ut.VERSIONS)if(c.symbolSizeRows===o&&c.symbolSizeColumns===a)return c;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new ut(1,10,10,8,8,new vt(5,new wt(1,3))),new ut(2,12,12,10,10,new vt(7,new wt(1,5))),new ut(3,14,14,12,12,new vt(10,new wt(1,8))),new ut(4,16,16,14,14,new vt(12,new wt(1,12))),new ut(5,18,18,16,16,new vt(14,new wt(1,18))),new ut(6,20,20,18,18,new vt(18,new wt(1,22))),new ut(7,22,22,20,20,new vt(20,new wt(1,30))),new ut(8,24,24,22,22,new vt(24,new wt(1,36))),new ut(9,26,26,24,24,new vt(28,new wt(1,44))),new ut(10,32,32,14,14,new vt(36,new wt(1,62))),new ut(11,36,36,16,16,new vt(42,new wt(1,86))),new ut(12,40,40,18,18,new vt(48,new wt(1,114))),new ut(13,44,44,20,20,new vt(56,new wt(1,144))),new ut(14,48,48,22,22,new vt(68,new wt(1,174))),new ut(15,52,52,24,24,new vt(42,new wt(2,102))),new ut(16,64,64,14,14,new vt(56,new wt(2,140))),new ut(17,72,72,16,16,new vt(36,new wt(4,92))),new ut(18,80,80,18,18,new vt(48,new wt(4,114))),new ut(19,88,88,20,20,new vt(56,new wt(4,144))),new ut(20,96,96,22,22,new vt(68,new wt(4,174))),new ut(21,104,104,24,24,new vt(56,new wt(6,136))),new ut(22,120,120,18,18,new vt(68,new wt(6,175))),new ut(23,132,132,20,20,new vt(62,new wt(8,163))),new ut(24,144,144,22,22,new vt(62,new wt(8,156),new wt(2,155))),new ut(25,8,18,6,16,new vt(7,new wt(1,5))),new ut(26,8,32,6,14,new vt(11,new wt(1,10))),new ut(27,12,26,10,24,new vt(14,new wt(1,16))),new ut(28,12,36,10,16,new vt(18,new wt(1,22))),new ut(29,16,36,14,16,new vt(24,new wt(1,32))),new ut(30,16,48,14,22,new vt(28,new wt(1,49)))]}}ut.VERSIONS=ut.buildVersions();class am{constructor(o){const a=o.getHeight();if(a<8||a>144||a&1)throw new B;this.version=am.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const a=o.getHeight(),c=o.getWidth();return ut.getVersionForDimensions(a,c)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let a=0,c=4,f=0;const p=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let w=!1,_=!1,T=!1,M=!1;do if(c===p&&f===0&&!w)o[a++]=this.readCorner1(p,g)&255,c-=2,f+=2,w=!0;else if(c===p-2&&f===0&&g&3&&!_)o[a++]=this.readCorner2(p,g)&255,c-=2,f+=2,_=!0;else if(c===p+4&&f===2&&!(g&7)&&!T)o[a++]=this.readCorner3(p,g)&255,c-=2,f+=2,T=!0;else if(c===p-2&&f===0&&(g&7)===4&&!M)o[a++]=this.readCorner4(p,g)&255,c-=2,f+=2,M=!0;else{do c<p&&f>=0&&!this.readMappingMatrix.get(f,c)&&(o[a++]=this.readUtah(c,f,p,g)&255),c-=2,f+=2;while(c>=0&&f<g);c+=1,f+=3;do c>=0&&f<g&&!this.readMappingMatrix.get(f,c)&&(o[a++]=this.readUtah(c,f,p,g)&255),c+=2,f-=2;while(c<p&&f>=0);c+=3,f+=1}while(c<p||f<g);if(a!==this.version.getTotalCodewords())throw new B;return o}readModule(o,a,c,f){return o<0&&(o+=c,a+=4-(c+4&7)),a<0&&(a+=f,o+=4-(f+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,c,f){let p=0;return this.readModule(o-2,a-2,c,f)&&(p|=1),p<<=1,this.readModule(o-2,a-1,c,f)&&(p|=1),p<<=1,this.readModule(o-1,a-2,c,f)&&(p|=1),p<<=1,this.readModule(o-1,a-1,c,f)&&(p|=1),p<<=1,this.readModule(o-1,a,c,f)&&(p|=1),p<<=1,this.readModule(o,a-2,c,f)&&(p|=1),p<<=1,this.readModule(o,a-1,c,f)&&(p|=1),p<<=1,this.readModule(o,a,c,f)&&(p|=1),p}readCorner1(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,1,o,a)&&(c|=1),c<<=1,this.readModule(o-1,2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}readCorner2(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-4,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner3(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-3,o,a)&&(c|=1),c<<=1,this.readModule(1,a-2,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner4(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}extractDataRegion(o){const a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new y("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),g=a/f|0,w=c/p|0,_=g*f,T=w*p,M=new G(T,_);for(let L=0;L<g;++L){const U=L*f;for(let $=0;$<w;++$){const q=$*p;for(let Q=0;Q<f;++Q){const ee=L*(f+2)+1+Q,ie=U+Q;for(let ye=0;ye<p;++ye){const _e=$*(p+2)+1+ye;if(o.get(_e,ee)){const ge=q+ye;M.set(ge,ie)}}}}}return M}}class lm{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){const c=a.getECBlocks();let f=0;const p=c.getECBlocks();for(let Q of p)f+=Q.getCount();const g=new Array(f);let w=0;for(let Q of p)for(let ee=0;ee<Q.getCount();ee++){const ie=Q.getDataCodewords(),ye=c.getECCodewords()+ie;g[w++]=new lm(ie,new Uint8Array(ye))}const T=g[0].codewords.length-c.getECCodewords(),M=T-1;let L=0;for(let Q=0;Q<M;Q++)for(let ee=0;ee<w;ee++)g[ee].codewords[Q]=o[L++];const U=a.getVersionNumber()===24,$=U?8:w;for(let Q=0;Q<$;Q++)g[Q].codewords[T-1]=o[L++];const q=g[0].codewords.length;for(let Q=T;Q<q;Q++)for(let ee=0;ee<w;ee++){const ie=U?(ee+8)%w:ee,ye=U&&ie>7?Q-1:Q;g[ie].codewords[ye]=o[L++]}if(L!==o.length)throw new y;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cm{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new y(""+o);let a=0,c=this.bitOffset,f=this.byteOffset;const p=this.bytes;if(c>0){const g=8-c,w=o<g?o:g,_=g-w,T=255>>8-w<<_;a=(p[f]&T)>>_,o-=w,c+=w,c===8&&(c=0,f++)}if(o>0){for(;o>=8;)a=a<<8|p[f]&255,f++,o-=8;if(o>0){const g=8-o,w=255>>g<<g;a=a<<o|(p[f]&w)>>g,c+=o}}return this.bitOffset=c,this.byteOffset=f,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Er;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Er||(Er={}));class Qi{static decode(o){const a=new cm(o),c=new X,f=new X,p=new Array;let g=Er.ASCII_ENCODE;do if(g===Er.ASCII_ENCODE)g=this.decodeAsciiSegment(a,c,f);else{switch(g){case Er.C40_ENCODE:this.decodeC40Segment(a,c);break;case Er.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case Er.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case Er.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case Er.BASE256_ENCODE:this.decodeBase256Segment(a,c,p);break;default:throw new B}g=Er.ASCII_ENCODE}while(g!==Er.PAD_ENCODE&&a.available()>0);return f.length()>0&&c.append(f.toString()),new Xe(o,c.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(o,a,c){let f=!1;do{let p=o.readBits(8);if(p===0)throw new B;if(p<=128)return f&&(p+=128),a.append(String.fromCharCode(p-1)),Er.ASCII_ENCODE;if(p===129)return Er.PAD_ENCODE;if(p<=229){const g=p-130;g<10&&a.append("0"),a.append(""+g)}else switch(p){case 230:return Er.C40_ENCODE;case 231:return Er.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return Er.ANSIX12_ENCODE;case 239:return Er.TEXT_ENCODE;case 240:return Er.EDIFACT_ENCODE;case 241:break;default:if(p!==254||o.available()!==0)throw new B;break}}while(o.available()>0);return Er.ASCII_ENCODE}static decodeC40Segment(o,a){let c=!1;const f=[];let p=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),f);for(let w=0;w<3;w++){const _=f[w];switch(p){case 0:if(_<3)p=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}p=0;break;case 3:c?(a.append(String.fromCharCode(_+224)),c=!1):a.append(String.fromCharCode(_+96)),p=0;break;default:throw new B}}}while(o.available()>0)}static decodeTextSegment(o,a){let c=!1,f=[],p=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),f);for(let w=0;w<3;w++){const _=f[w];switch(p){case 0:if(_<3)p=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(_+128)),c=!1):a.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(_){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}p=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[_];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T),p=0}else throw new B;break;default:throw new B}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){const c=[];do{if(o.available()===8)return;const f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),c);for(let p=0;p<3;p++){const g=c[p];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new B;break}}}while(o.available()>0)}static parseTwoBytes(o,a,c){let f=(o<<8)+a-1,p=Math.floor(f/1600);c[0]=p,f-=p*1600,p=Math.floor(f/40),c[1]=p,c[2]=f-p*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let c=0;c<4;c++){let f=o.readBits(6);if(f===31){const p=8-o.getBitOffset();p!==8&&o.readBits(p);return}f&32||(f|=64),a.append(String.fromCharCode(f))}}while(o.available()>0)}static decodeBase256Segment(o,a,c){let f=1+o.getByteOffset();const p=this.unrandomize255State(o.readBits(8),f++);let g;if(p===0?g=o.available()/8|0:p<250?g=p:g=250*(p-249)+this.unrandomize255State(o.readBits(8),f++),g<0)throw new B;const w=new Uint8Array(g);for(let _=0;_<g;_++){if(o.available()<8)throw new B;w[_]=this.unrandomize255State(o.readBits(8),f++)}c.push(w);try{a.append(Y.decode(w,z.ISO88591))}catch(_){throw new St("Platform does not support required encoding: "+_.message)}}static unrandomize255State(o,a){const c=149*a%255+1,f=o-c;return f>=0?f:f+256}}Qi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Qi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Qi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Qi.TEXT_SHIFT2_SET_CHARS=Qi.C40_SHIFT2_SET_CHARS,Qi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class X4{constructor(){this.rsDecoder=new er(Me.DATA_MATRIX_FIELD_256)}decode(o){const a=new am(o),c=a.getVersion(),f=a.readCodewords(),p=lm.getDataBlocks(f,c);let g=0;for(let T of p)g+=T.getNumDataCodewords();const w=new Uint8Array(g),_=p.length;for(let T=0;T<_;T++){const M=p[T],L=M.getCodewords(),U=M.getNumDataCodewords();this.correctErrors(L,U);for(let $=0;$<U;$++)w[$*_+T]=L[$]}return Qi.decode(w)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new b}for(let f=0;f<a;f++)o[f]=c[f]}}class fr{constructor(o){this.image=o,this.rectangleDetector=new tr(this.image)}detect(){const o=this.rectangleDetector.detect();let a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new H;a=this.shiftToModuleCenter(a);const c=a[0],f=a[1],p=a[2],g=a[3];let w=this.transitionsBetween(c,g)+1,_=this.transitionsBetween(p,g)+1;(w&1)===1&&(w+=1),(_&1)===1&&(_+=1),4*w<7*_&&4*_<7*w&&(w=_=Math.max(w,_));let T=fr.sampleGrid(this.image,c,f,p,g,w,_);return new Pr(T,[c,f,p,g])}static shiftPoint(o,a,c){let f=(a.getX()-o.getX())/(c+1),p=(a.getY()-o.getY())/(c+1);return new Ce(o.getX()+f,o.getY()+p)}static moveAway(o,a,c){let f=o.getX(),p=o.getY();return f<a?f-=1:f+=1,p<c?p-=1:p+=1,new Ce(f,p)}detectSolid1(o){let a=o[0],c=o[1],f=o[3],p=o[2],g=this.transitionsBetween(a,c),w=this.transitionsBetween(c,f),_=this.transitionsBetween(f,p),T=this.transitionsBetween(p,a),M=g,L=[p,a,c,f];return M>w&&(M=w,L[0]=a,L[1]=c,L[2]=f,L[3]=p),M>_&&(M=_,L[0]=c,L[1]=f,L[2]=p,L[3]=a),M>T&&(L[0]=f,L[1]=p,L[2]=a,L[3]=c),L}detectSolid2(o){let a=o[0],c=o[1],f=o[2],p=o[3],g=this.transitionsBetween(a,p),w=fr.shiftPoint(c,f,(g+1)*4),_=fr.shiftPoint(f,c,(g+1)*4),T=this.transitionsBetween(w,a),M=this.transitionsBetween(_,p);return T<M?(o[0]=a,o[1]=c,o[2]=f,o[3]=p):(o[0]=c,o[1]=f,o[2]=p,o[3]=a),o}correctTopRight(o){let a=o[0],c=o[1],f=o[2],p=o[3],g=this.transitionsBetween(a,p),w=this.transitionsBetween(c,p),_=fr.shiftPoint(a,c,(w+1)*4),T=fr.shiftPoint(f,c,(g+1)*4);g=this.transitionsBetween(_,p),w=this.transitionsBetween(T,p);let M=new Ce(p.getX()+(f.getX()-c.getX())/(g+1),p.getY()+(f.getY()-c.getY())/(g+1)),L=new Ce(p.getX()+(a.getX()-c.getX())/(w+1),p.getY()+(a.getY()-c.getY())/(w+1));if(!this.isValid(M))return this.isValid(L)?L:null;if(!this.isValid(L))return M;let U=this.transitionsBetween(_,M)+this.transitionsBetween(T,M),$=this.transitionsBetween(_,L)+this.transitionsBetween(T,L);return U>$?M:L}shiftToModuleCenter(o){let a=o[0],c=o[1],f=o[2],p=o[3],g=this.transitionsBetween(a,p)+1,w=this.transitionsBetween(f,p)+1,_=fr.shiftPoint(a,c,w*4),T=fr.shiftPoint(f,c,g*4);g=this.transitionsBetween(_,p)+1,w=this.transitionsBetween(T,p)+1,(g&1)===1&&(g+=1),(w&1)===1&&(w+=1);let M=(a.getX()+c.getX()+f.getX()+p.getX())/4,L=(a.getY()+c.getY()+f.getY()+p.getY())/4;a=fr.moveAway(a,M,L),c=fr.moveAway(c,M,L),f=fr.moveAway(f,M,L),p=fr.moveAway(p,M,L);let U,$;return _=fr.shiftPoint(a,c,w*4),_=fr.shiftPoint(_,p,g*4),U=fr.shiftPoint(c,a,w*4),U=fr.shiftPoint(U,f,g*4),T=fr.shiftPoint(f,p,w*4),T=fr.shiftPoint(T,c,g*4),$=fr.shiftPoint(p,f,w*4),$=fr.shiftPoint($,a,g*4),[_,U,T,$]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,c,f,p,g,w){return Qs.getInstance().sampleGrid(o,g,w,.5,.5,g-.5,.5,g-.5,w-.5,.5,w-.5,a.getX(),a.getY(),p.getX(),p.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(o,a){let c=Math.trunc(o.getX()),f=Math.trunc(o.getY()),p=Math.trunc(a.getX()),g=Math.trunc(a.getY()),w=Math.abs(g-f)>Math.abs(p-c);if(w){let Q=c;c=f,f=Q,Q=p,p=g,g=Q}let _=Math.abs(p-c),T=Math.abs(g-f),M=-_/2,L=f<g?1:-1,U=c<p?1:-1,$=0,q=this.image.get(w?f:c,w?c:f);for(let Q=c,ee=f;Q!==p;Q+=U){let ie=this.image.get(w?ee:Q,w?Q:ee);if(ie!==q&&($++,q=ie),M+=T,M>0){if(ee===g)break;ee+=L,M-=_}}return $}}class Zi{constructor(){this.decoder=new X4}decode(o,a=null){let c,f;if(a!=null&&a.has(F.PURE_BARCODE)){const T=Zi.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(T),f=Zi.NO_POINTS}else{const T=new fr(o.getBlackMatrix()).detect();c=this.decoder.decode(T.getBits()),f=T.getPoints()}const p=c.getRawBytes(),g=new fe(c.getText(),p,8*p.length,f,ve.DATA_MATRIX,C.currentTimeMillis()),w=c.getByteSegments();w!=null&&g.putMetadata(ke.BYTE_SEGMENTS,w);const _=c.getECLevel();return _!=null&&g.putMetadata(ke.ERROR_CORRECTION_LEVEL,_),g}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a==null||c==null)throw new H;const f=this.moduleSize(a,o);let p=a[1];const g=c[1];let w=a[0];const T=(c[0]-w+1)/f,M=(g-p+1)/f;if(T<=0||M<=0)throw new H;const L=f/2;p+=L,w+=L;const U=new G(T,M);for(let $=0;$<M;$++){const q=p+$*f;for(let Q=0;Q<T;Q++)o.get(w+Q*f,q)&&U.set(Q,$)}return U}static moduleSize(o,a){const c=a.getWidth();let f=o[0];const p=o[1];for(;f<c&&a.get(f,p);)f++;if(f===c)throw new H;const g=f-o[0];if(g===0)throw new H;return g}}Zi.NO_POINTS=[];class K4 extends le{constructor(o=500){super(new Zi,o)}}var ll;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(ll||(ll={}));class Mt{constructor(o,a,c){this.value=o,this.stringValue=a,this.bits=c,Mt.FOR_BITS.set(c,this),Mt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Mt.L;case"M":return Mt.M;case"Q":return Mt.Q;case"H":return Mt.H;default:throw new x(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Mt))return!1;const a=o;return this.value===a.value}static forBits(o){if(o<0||o>=Mt.FOR_BITS.size)throw new y;return Mt.FOR_BITS.get(o)}}Mt.FOR_BITS=new Map,Mt.FOR_VALUE=new Map,Mt.L=new Mt(ll.L,"L",1),Mt.M=new Mt(ll.M,"M",0),Mt.Q=new Mt(ll.Q,"Q",3),Mt.H=new Mt(ll.H,"H",2);class Gr{constructor(o){this.errorCorrectionLevel=Mt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return N.bitCount(o^a)}static decodeFormatInformation(o,a){const c=Gr.doDecodeFormatInformation(o,a);return c!==null?c:Gr.doDecodeFormatInformation(o^Gr.FORMAT_INFO_MASK_QR,a^Gr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let c=Number.MAX_SAFE_INTEGER,f=0;for(const p of Gr.FORMAT_INFO_DECODE_LOOKUP){const g=p[0];if(g===o||g===a)return new Gr(p[1]);let w=Gr.numBitsDiffering(o,g);w<c&&(f=p[1],c=w),o!==a&&(w=Gr.numBitsDiffering(a,g),w<c&&(f=p[1],c=w))}return c<=3?new Gr(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Gr))return!1;const a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Gr.FORMAT_INFO_MASK_QR=21522,Gr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const a=this.ecBlocks;for(const c of a)o+=c.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class V{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(o,a,...c){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=c;let f=0;const p=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const w of g)f+=w.getCount()*(w.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new B;try{return this.getVersionForNumber((o-17)/4)}catch{throw new B}}static getVersionForNumber(o){if(o<1||o>40)throw new y;return Fe.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Fe.VERSION_DECODE_INFO.length;f++){const p=Fe.VERSION_DECODE_INFO[f];if(p===o)return Fe.getVersionForNumber(f+7);const g=Gr.numBitsDiffering(o,p);g<a&&(c=f+7,a=g)}return a<=3?Fe.getVersionForNumber(c):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),a=new G(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const p=this.alignmentPatternCenters[f]-2;for(let g=0;g<c;g++)f===0&&(g===0||g===c-1)||f===c-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,p,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}Fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Fe.VERSIONS=[new Fe(1,new Int32Array(0),new re(7,new V(1,19)),new re(10,new V(1,16)),new re(13,new V(1,13)),new re(17,new V(1,9))),new Fe(2,Int32Array.from([6,18]),new re(10,new V(1,34)),new re(16,new V(1,28)),new re(22,new V(1,22)),new re(28,new V(1,16))),new Fe(3,Int32Array.from([6,22]),new re(15,new V(1,55)),new re(26,new V(1,44)),new re(18,new V(2,17)),new re(22,new V(2,13))),new Fe(4,Int32Array.from([6,26]),new re(20,new V(1,80)),new re(18,new V(2,32)),new re(26,new V(2,24)),new re(16,new V(4,9))),new Fe(5,Int32Array.from([6,30]),new re(26,new V(1,108)),new re(24,new V(2,43)),new re(18,new V(2,15),new V(2,16)),new re(22,new V(2,11),new V(2,12))),new Fe(6,Int32Array.from([6,34]),new re(18,new V(2,68)),new re(16,new V(4,27)),new re(24,new V(4,19)),new re(28,new V(4,15))),new Fe(7,Int32Array.from([6,22,38]),new re(20,new V(2,78)),new re(18,new V(4,31)),new re(18,new V(2,14),new V(4,15)),new re(26,new V(4,13),new V(1,14))),new Fe(8,Int32Array.from([6,24,42]),new re(24,new V(2,97)),new re(22,new V(2,38),new V(2,39)),new re(22,new V(4,18),new V(2,19)),new re(26,new V(4,14),new V(2,15))),new Fe(9,Int32Array.from([6,26,46]),new re(30,new V(2,116)),new re(22,new V(3,36),new V(2,37)),new re(20,new V(4,16),new V(4,17)),new re(24,new V(4,12),new V(4,13))),new Fe(10,Int32Array.from([6,28,50]),new re(18,new V(2,68),new V(2,69)),new re(26,new V(4,43),new V(1,44)),new re(24,new V(6,19),new V(2,20)),new re(28,new V(6,15),new V(2,16))),new Fe(11,Int32Array.from([6,30,54]),new re(20,new V(4,81)),new re(30,new V(1,50),new V(4,51)),new re(28,new V(4,22),new V(4,23)),new re(24,new V(3,12),new V(8,13))),new Fe(12,Int32Array.from([6,32,58]),new re(24,new V(2,92),new V(2,93)),new re(22,new V(6,36),new V(2,37)),new re(26,new V(4,20),new V(6,21)),new re(28,new V(7,14),new V(4,15))),new Fe(13,Int32Array.from([6,34,62]),new re(26,new V(4,107)),new re(22,new V(8,37),new V(1,38)),new re(24,new V(8,20),new V(4,21)),new re(22,new V(12,11),new V(4,12))),new Fe(14,Int32Array.from([6,26,46,66]),new re(30,new V(3,115),new V(1,116)),new re(24,new V(4,40),new V(5,41)),new re(20,new V(11,16),new V(5,17)),new re(24,new V(11,12),new V(5,13))),new Fe(15,Int32Array.from([6,26,48,70]),new re(22,new V(5,87),new V(1,88)),new re(24,new V(5,41),new V(5,42)),new re(30,new V(5,24),new V(7,25)),new re(24,new V(11,12),new V(7,13))),new Fe(16,Int32Array.from([6,26,50,74]),new re(24,new V(5,98),new V(1,99)),new re(28,new V(7,45),new V(3,46)),new re(24,new V(15,19),new V(2,20)),new re(30,new V(3,15),new V(13,16))),new Fe(17,Int32Array.from([6,30,54,78]),new re(28,new V(1,107),new V(5,108)),new re(28,new V(10,46),new V(1,47)),new re(28,new V(1,22),new V(15,23)),new re(28,new V(2,14),new V(17,15))),new Fe(18,Int32Array.from([6,30,56,82]),new re(30,new V(5,120),new V(1,121)),new re(26,new V(9,43),new V(4,44)),new re(28,new V(17,22),new V(1,23)),new re(28,new V(2,14),new V(19,15))),new Fe(19,Int32Array.from([6,30,58,86]),new re(28,new V(3,113),new V(4,114)),new re(26,new V(3,44),new V(11,45)),new re(26,new V(17,21),new V(4,22)),new re(26,new V(9,13),new V(16,14))),new Fe(20,Int32Array.from([6,34,62,90]),new re(28,new V(3,107),new V(5,108)),new re(26,new V(3,41),new V(13,42)),new re(30,new V(15,24),new V(5,25)),new re(28,new V(15,15),new V(10,16))),new Fe(21,Int32Array.from([6,28,50,72,94]),new re(28,new V(4,116),new V(4,117)),new re(26,new V(17,42)),new re(28,new V(17,22),new V(6,23)),new re(30,new V(19,16),new V(6,17))),new Fe(22,Int32Array.from([6,26,50,74,98]),new re(28,new V(2,111),new V(7,112)),new re(28,new V(17,46)),new re(30,new V(7,24),new V(16,25)),new re(24,new V(34,13))),new Fe(23,Int32Array.from([6,30,54,78,102]),new re(30,new V(4,121),new V(5,122)),new re(28,new V(4,47),new V(14,48)),new re(30,new V(11,24),new V(14,25)),new re(30,new V(16,15),new V(14,16))),new Fe(24,Int32Array.from([6,28,54,80,106]),new re(30,new V(6,117),new V(4,118)),new re(28,new V(6,45),new V(14,46)),new re(30,new V(11,24),new V(16,25)),new re(30,new V(30,16),new V(2,17))),new Fe(25,Int32Array.from([6,32,58,84,110]),new re(26,new V(8,106),new V(4,107)),new re(28,new V(8,47),new V(13,48)),new re(30,new V(7,24),new V(22,25)),new re(30,new V(22,15),new V(13,16))),new Fe(26,Int32Array.from([6,30,58,86,114]),new re(28,new V(10,114),new V(2,115)),new re(28,new V(19,46),new V(4,47)),new re(28,new V(28,22),new V(6,23)),new re(30,new V(33,16),new V(4,17))),new Fe(27,Int32Array.from([6,34,62,90,118]),new re(30,new V(8,122),new V(4,123)),new re(28,new V(22,45),new V(3,46)),new re(30,new V(8,23),new V(26,24)),new re(30,new V(12,15),new V(28,16))),new Fe(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new V(3,117),new V(10,118)),new re(28,new V(3,45),new V(23,46)),new re(30,new V(4,24),new V(31,25)),new re(30,new V(11,15),new V(31,16))),new Fe(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new V(7,116),new V(7,117)),new re(28,new V(21,45),new V(7,46)),new re(30,new V(1,23),new V(37,24)),new re(30,new V(19,15),new V(26,16))),new Fe(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new V(5,115),new V(10,116)),new re(28,new V(19,47),new V(10,48)),new re(30,new V(15,24),new V(25,25)),new re(30,new V(23,15),new V(25,16))),new Fe(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new V(13,115),new V(3,116)),new re(28,new V(2,46),new V(29,47)),new re(30,new V(42,24),new V(1,25)),new re(30,new V(23,15),new V(28,16))),new Fe(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new V(17,115)),new re(28,new V(10,46),new V(23,47)),new re(30,new V(10,24),new V(35,25)),new re(30,new V(19,15),new V(35,16))),new Fe(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new V(17,115),new V(1,116)),new re(28,new V(14,46),new V(21,47)),new re(30,new V(29,24),new V(19,25)),new re(30,new V(11,15),new V(46,16))),new Fe(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new V(13,115),new V(6,116)),new re(28,new V(14,46),new V(23,47)),new re(30,new V(44,24),new V(7,25)),new re(30,new V(59,16),new V(1,17))),new Fe(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new V(12,121),new V(7,122)),new re(28,new V(12,47),new V(26,48)),new re(30,new V(39,24),new V(14,25)),new re(30,new V(22,15),new V(41,16))),new Fe(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new V(6,121),new V(14,122)),new re(28,new V(6,47),new V(34,48)),new re(30,new V(46,24),new V(10,25)),new re(30,new V(2,15),new V(64,16))),new Fe(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new V(17,122),new V(4,123)),new re(28,new V(29,46),new V(14,47)),new re(30,new V(49,24),new V(10,25)),new re(30,new V(24,15),new V(46,16))),new Fe(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new V(4,122),new V(18,123)),new re(28,new V(13,46),new V(32,47)),new re(30,new V(48,24),new V(14,25)),new re(30,new V(42,15),new V(32,16))),new Fe(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new V(20,117),new V(4,118)),new re(28,new V(40,47),new V(7,48)),new re(30,new V(43,24),new V(22,25)),new re(30,new V(10,15),new V(67,16))),new Fe(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new V(19,118),new V(6,119)),new re(28,new V(18,47),new V(31,48)),new re(30,new V(34,24),new V(34,25)),new re(30,new V(20,15),new V(61,16)))];var Rr;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Rr||(Rr={}));class ss{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let c=0;c<a;c++)for(let f=0;f<a;f++)this.isMasked(c,f)&&o.flip(f,c)}}ss.values=new Map([[Rr.DATA_MASK_000,new ss(Rr.DATA_MASK_000,(D,o)=>(D+o&1)===0)],[Rr.DATA_MASK_001,new ss(Rr.DATA_MASK_001,(D,o)=>(D&1)===0)],[Rr.DATA_MASK_010,new ss(Rr.DATA_MASK_010,(D,o)=>o%3===0)],[Rr.DATA_MASK_011,new ss(Rr.DATA_MASK_011,(D,o)=>(D+o)%3===0)],[Rr.DATA_MASK_100,new ss(Rr.DATA_MASK_100,(D,o)=>(Math.floor(D/2)+Math.floor(o/3)&1)===0)],[Rr.DATA_MASK_101,new ss(Rr.DATA_MASK_101,(D,o)=>D*o%6===0)],[Rr.DATA_MASK_110,new ss(Rr.DATA_MASK_110,(D,o)=>D*o%6<3)],[Rr.DATA_MASK_111,new ss(Rr.DATA_MASK_111,(D,o)=>(D+o+D*o%3&1)===0)]]);class Q4{constructor(o){const a=o.getHeight();if(a<21||(a&3)!==1)throw new B;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let p=0;p<6;p++)o=this.copyBit(p,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let p=5;p>=0;p--)o=this.copyBit(8,p,o);const a=this.bitMatrix.getHeight();let c=0;const f=a-7;for(let p=a-1;p>=f;p--)c=this.copyBit(8,p,c);for(let p=a-8;p<a;p++)c=this.copyBit(p,8,c);if(this.parsedFormatInfo=Gr.decodeFormatInformation(o,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return Fe.getVersionForNumber(a);let c=0;const f=o-11;for(let g=5;g>=0;g--)for(let w=o-9;w>=f;w--)c=this.copyBit(w,g,c);let p=Fe.decodeVersionInformation(c);if(p!==null&&p.getDimensionForVersion()===o)return this.parsedVersion=p,p;c=0;for(let g=5;g>=0;g--)for(let w=o-9;w>=f;w--)c=this.copyBit(g,w,c);if(p=Fe.decodeVersionInformation(c),p!==null&&p.getDimensionForVersion()===o)return this.parsedVersion=p,p;throw new B}copyBit(o,a,c){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?c<<1|1:c<<1}readCodewords(){const o=this.readFormatInformation(),a=this.readVersion(),c=ss.values.get(o.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const p=a.buildFunctionPattern();let g=!0;const w=new Uint8Array(a.getTotalCodewords());let _=0,T=0,M=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let U=0;U<f;U++){const $=g?f-1-U:U;for(let q=0;q<2;q++)p.get(L-q,$)||(M++,T<<=1,this.bitMatrix.get(L-q,$)&&(T|=1),M===8&&(w[_++]=T,M=0,T=0))}g=!g}if(_!==a.getTotalCodewords())throw new B;return w}remask(){if(this.parsedFormatInfo===null)return;const o=ss.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let a=0,c=o.getWidth();a<c;a++)for(let f=a+1,p=o.getHeight();f<p;f++)o.get(a,f)!==o.get(f,a)&&(o.flip(f,a),o.flip(a,f))}}class um{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,c){if(o.length!==a.getTotalCodewords())throw new y;const f=a.getECBlocksForLevel(c);let p=0;const g=f.getECBlocks();for(const q of g)p+=q.getCount();const w=new Array(p);let _=0;for(const q of g)for(let Q=0;Q<q.getCount();Q++){const ee=q.getDataCodewords(),ie=f.getECCodewordsPerBlock()+ee;w[_++]=new um(ee,new Uint8Array(ie))}const T=w[0].codewords.length;let M=w.length-1;for(;M>=0&&w[M].codewords.length!==T;)M--;M++;const L=T-f.getECCodewordsPerBlock();let U=0;for(let q=0;q<L;q++)for(let Q=0;Q<_;Q++)w[Q].codewords[q]=o[U++];for(let q=M;q<_;q++)w[q].codewords[L]=o[U++];const $=w[0].codewords.length;for(let q=L;q<$;q++)for(let Q=0;Q<_;Q++){const ee=Q<M?q:q+1;w[Q].codewords[ee]=o[U++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var is;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(is||(is={}));class He{constructor(o,a,c,f){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=f,He.FOR_BITS.set(f,this),He.FOR_VALUE.set(o,this)}static forBits(o){const a=He.FOR_BITS.get(o);if(a===void 0)throw new y;return a}getCharacterCountBits(o){const a=o.getVersionNumber();let c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof He))return!1;const a=o;return this.value===a.value}toString(){return this.stringValue}}He.FOR_BITS=new Map,He.FOR_VALUE=new Map,He.TERMINATOR=new He(is.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),He.NUMERIC=new He(is.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),He.ALPHANUMERIC=new He(is.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),He.STRUCTURED_APPEND=new He(is.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),He.BYTE=new He(is.BYTE,"BYTE",Int32Array.from([8,16,16]),4),He.ECI=new He(is.ECI,"ECI",Int32Array.from([0,0,0]),7),He.KANJI=new He(is.KANJI,"KANJI",Int32Array.from([8,10,12]),8),He.FNC1_FIRST_POSITION=new He(is.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),He.FNC1_SECOND_POSITION=new He(is.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),He.HANZI=new He(is.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gt{static decode(o,a,c,f){const p=new cm(o);let g=new X;const w=new Array;let _=-1,T=-1;try{let M=null,L=!1,U;do{if(p.available()<4)U=He.TERMINATOR;else{const $=p.readBits(4);U=He.forBits($)}switch(U){case He.TERMINATOR:break;case He.FNC1_FIRST_POSITION:case He.FNC1_SECOND_POSITION:L=!0;break;case He.STRUCTURED_APPEND:if(p.available()<16)throw new B;_=p.readBits(8),T=p.readBits(8);break;case He.ECI:const $=Gt.parseECIValue(p);if(M=j.getCharacterSetECIByValue($),M===null)throw new B;break;case He.HANZI:const q=p.readBits(4),Q=p.readBits(U.getCharacterCountBits(a));q===Gt.GB2312_SUBSET&&Gt.decodeHanziSegment(p,g,Q);break;default:const ee=p.readBits(U.getCharacterCountBits(a));switch(U){case He.NUMERIC:Gt.decodeNumericSegment(p,g,ee);break;case He.ALPHANUMERIC:Gt.decodeAlphanumericSegment(p,g,ee,L);break;case He.BYTE:Gt.decodeByteSegment(p,g,ee,M,w,f);break;case He.KANJI:Gt.decodeKanjiSegment(p,g,ee);break;default:throw new B}break}}while(U!==He.TERMINATOR)}catch{throw new B}return new Xe(o,g.toString(),w.length===0?null:w,c===null?null:c.toString(),_,T)}static decodeHanziSegment(o,a,c){if(c*13>o.available())throw new B;const f=new Uint8Array(2*c);let p=0;for(;c>0;){const g=o.readBits(13);let w=g/96<<8&4294967295|g%96;w<959?w+=41377:w+=42657,f[p]=w>>8&255,f[p+1]=w&255,p+=2,c--}try{a.append(Y.decode(f,z.GB2312))}catch(g){throw new B(g)}}static decodeKanjiSegment(o,a,c){if(c*13>o.available())throw new B;const f=new Uint8Array(2*c);let p=0;for(;c>0;){const g=o.readBits(13);let w=g/192<<8&4294967295|g%192;w<7936?w+=33088:w+=49472,f[p]=w>>8,f[p+1]=w,p+=2,c--}try{a.append(Y.decode(f,z.SHIFT_JIS))}catch(g){throw new B(g)}}static decodeByteSegment(o,a,c,f,p,g){if(8*c>o.available())throw new B;const w=new Uint8Array(c);for(let T=0;T<c;T++)w[T]=o.readBits(8);let _;f===null?_=z.guessEncoding(w,g):_=f.getName();try{a.append(Y.decode(w,_))}catch(T){throw new B(T)}p.push(w)}static toAlphaNumericChar(o){if(o>=Gt.ALPHANUMERIC_CHARS.length)throw new B;return Gt.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,a,c,f){const p=a.length();for(;c>1;){if(o.available()<11)throw new B;const g=o.readBits(11);a.append(Gt.toAlphaNumericChar(Math.floor(g/45))),a.append(Gt.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(o.available()<6)throw new B;a.append(Gt.toAlphaNumericChar(o.readBits(6)))}if(f)for(let g=p;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(o,a,c){for(;c>=3;){if(o.available()<10)throw new B;const f=o.readBits(10);if(f>=1e3)throw new B;a.append(Gt.toAlphaNumericChar(Math.floor(f/100))),a.append(Gt.toAlphaNumericChar(Math.floor(f/10)%10)),a.append(Gt.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(o.available()<7)throw new B;const f=o.readBits(7);if(f>=100)throw new B;a.append(Gt.toAlphaNumericChar(Math.floor(f/10))),a.append(Gt.toAlphaNumericChar(f%10))}else if(c===1){if(o.available()<4)throw new B;const f=o.readBits(4);if(f>=10)throw new B;a.append(Gt.toAlphaNumericChar(f))}}static parseECIValue(o){const a=o.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const c=o.readBits(8);return(a&63)<<8&4294967295|c}if((a&224)===192){const c=o.readBits(16);return(a&31)<<16&4294967295|c}throw new B}}Gt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gt.GB2312_SUBSET=1;class iw{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const a=o[0];o[0]=o[2],o[2]=a}}class Z4{constructor(){this.rsDecoder=new er(Me.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(G.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){const c=new Q4(o);let f=null;try{return this.decodeBitMatrixParser(c,a)}catch(p){f=p}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const p=this.decodeBitMatrixParser(c,a);return p.setOther(new iw(!0)),p}catch(p){throw f!==null?f:p}}decodeBitMatrixParser(o,a){const c=o.readVersion(),f=o.readFormatInformation().getErrorCorrectionLevel(),p=o.readCodewords(),g=um.getDataBlocks(p,c,f);let w=0;for(const M of g)w+=M.getNumDataCodewords();const _=new Uint8Array(w);let T=0;for(const M of g){const L=M.getCodewords(),U=M.getNumDataCodewords();this.correctErrors(L,U);for(let $=0;$<U;$++)_[T++]=L[$]}return Gt.decode(_,c,f,a)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new b}for(let f=0;f<a;f++)o[f]=c[f]}}class dm extends Ce{constructor(o,a,c){super(o,a),this.estimatedModuleSize=c}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const f=Math.abs(o-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const f=(this.getX()+a)/2,p=(this.getY()+o)/2,g=(this.estimatedModuleSize+c)/2;return new dm(f,p,g)}}class Gd{constructor(o,a,c,f,p,g,w){this.image=o,this.startX=a,this.startY=c,this.width=f,this.height=p,this.moduleSize=g,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,a=this.height,c=this.width,f=o+c,p=this.startY+a/2,g=new Int32Array(3),w=this.image;for(let _=0;_<a;_++){const T=p+(_&1?-Math.floor((_+1)/2):Math.floor((_+1)/2));g[0]=0,g[1]=0,g[2]=0;let M=o;for(;M<f&&!w.get(M,T);)M++;let L=0;for(;M<f;){if(w.get(M,T))if(L===1)g[1]++;else if(L===2){if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,M);if(U!==null)return U}g[0]=g[2],g[1]=1,g[2]=0,L=1}else g[++L]++;else L===1&&L++,g[L]++;M++}if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,f);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){const a=this.moduleSize,c=a/2;for(let f=0;f<3;f++)if(Math.abs(a-o[f])>=c)return!1;return!0}crossCheckVertical(o,a,c,f){const p=this.image,g=p.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let _=o;for(;_>=0&&p.get(a,_)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&!p.get(a,_)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=o+1;_<g&&p.get(a,_)&&w[1]<=c;)w[1]++,_++;if(_===g||w[1]>c)return NaN;for(;_<g&&!p.get(a,_)&&w[2]<=c;)w[2]++,_++;if(w[2]>c)return NaN;const T=w[0]+w[1]+w[2];return 5*Math.abs(T-f)>=2*f?NaN:this.foundPatternCross(w)?Gd.centerFromEnd(w,_):NaN}handlePossibleCenter(o,a,c){const f=o[0]+o[1]+o[2],p=Gd.centerFromEnd(o,c),g=this.crossCheckVertical(a,p,2*o[1],f);if(!isNaN(g)){const w=(o[0]+o[1]+o[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(w,g,p))return T.combineEstimate(g,p,w);const _=new dm(p,g,w);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class fm extends Ce{constructor(o,a,c,f){super(o,a),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const f=Math.abs(o-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const f=this.count+1,p=(this.count*this.getX()+a)/f,g=(this.count*this.getY()+o)/f,w=(this.count*this.estimatedModuleSize+c)/f;return new fm(p,g,w,f)}}class J4{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Or{constructor(o,a){this.image=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const a=o!=null&&o.get(F.TRY_HARDER)!==void 0,c=o!=null&&o.get(F.PURE_BARCODE)!==void 0,f=this.image,p=f.getHeight(),g=f.getWidth();let w=Math.floor(3*p/(4*Or.MAX_MODULES));(w<Or.MIN_SKIP||a)&&(w=Or.MIN_SKIP);let _=!1;const T=new Int32Array(5);for(let L=w-1;L<p&&!_;L+=w){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let U=0;for(let $=0;$<g;$++)if(f.get($,L))(U&1)===1&&U++,T[U]++;else if(U&1)T[U]++;else if(U===4)if(Or.foundPatternCross(T)){if(this.handlePossibleCenter(T,L,$,c)===!0)if(w=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>T[2]&&(L+=Q-T[2]-w,$=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;continue}U=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;else T[++U]++;Or.foundPatternCross(T)&&this.handlePossibleCenter(T,L,g,c)===!0&&(w=T[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const M=this.selectBestPatterns();return Ce.orderBestPatterns(M),new J4(M)}static centerFromEnd(o,a){return a-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let a=0;for(let p=0;p<5;p++){const g=o[p];if(g===0)return!1;a+=g}if(a<7)return!1;const c=a/7,f=c/2;return Math.abs(c-o[0])<f&&Math.abs(c-o[1])<f&&Math.abs(3*c-o[2])<3*f&&Math.abs(c-o[3])<f&&Math.abs(c-o[4])<f}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,a,c,f){const p=this.getCrossCheckStateCount();let g=0;const w=this.image;for(;o>=g&&a>=g&&w.get(a-g,o-g);)p[2]++,g++;if(o<g||a<g)return!1;for(;o>=g&&a>=g&&!w.get(a-g,o-g)&&p[1]<=c;)p[1]++,g++;if(o<g||a<g||p[1]>c)return!1;for(;o>=g&&a>=g&&w.get(a-g,o-g)&&p[0]<=c;)p[0]++,g++;if(p[0]>c)return!1;const _=w.getHeight(),T=w.getWidth();for(g=1;o+g<_&&a+g<T&&w.get(a+g,o+g);)p[2]++,g++;if(o+g>=_||a+g>=T)return!1;for(;o+g<_&&a+g<T&&!w.get(a+g,o+g)&&p[3]<c;)p[3]++,g++;if(o+g>=_||a+g>=T||p[3]>=c)return!1;for(;o+g<_&&a+g<T&&w.get(a+g,o+g)&&p[4]<c;)p[4]++,g++;if(p[4]>=c)return!1;const M=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(M-f)<2*f&&Or.foundPatternCross(p)}crossCheckVertical(o,a,c,f){const p=this.image,g=p.getHeight(),w=this.getCrossCheckStateCount();let _=o;for(;_>=0&&p.get(a,_);)w[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(a,_)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&p.get(a,_)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=o+1;_<g&&p.get(a,_);)w[2]++,_++;if(_===g)return NaN;for(;_<g&&!p.get(a,_)&&w[3]<c;)w[3]++,_++;if(_===g||w[3]>=c)return NaN;for(;_<g&&p.get(a,_)&&w[4]<c;)w[4]++,_++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-f)>=2*f?NaN:Or.foundPatternCross(w)?Or.centerFromEnd(w,_):NaN}crossCheckHorizontal(o,a,c,f){const p=this.image,g=p.getWidth(),w=this.getCrossCheckStateCount();let _=o;for(;_>=0&&p.get(_,a);)w[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(_,a)&&w[1]<=c;)w[1]++,_--;if(_<0||w[1]>c)return NaN;for(;_>=0&&p.get(_,a)&&w[0]<=c;)w[0]++,_--;if(w[0]>c)return NaN;for(_=o+1;_<g&&p.get(_,a);)w[2]++,_++;if(_===g)return NaN;for(;_<g&&!p.get(_,a)&&w[3]<c;)w[3]++,_++;if(_===g||w[3]>=c)return NaN;for(;_<g&&p.get(_,a)&&w[4]<c;)w[4]++,_++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-f)>=f?NaN:Or.foundPatternCross(w)?Or.centerFromEnd(w,_):NaN}handlePossibleCenter(o,a,c,f){const p=o[0]+o[1]+o[2]+o[3]+o[4];let g=Or.centerFromEnd(o,c),w=this.crossCheckVertical(a,Math.floor(g),o[2],p);if(!isNaN(w)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(w),o[2],p),!isNaN(g)&&(!f||this.crossCheckDiagonal(Math.floor(w),Math.floor(g),o[2],p)))){const _=p/7;let T=!1;const M=this.possibleCenters;for(let L=0,U=M.length;L<U;L++){const $=M[L];if($.aboutEquals(_,w,g)){M[L]=$.combineEstimate(w,g,_),T=!0;break}}if(!T){const L=new fm(g,w,_);M.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=Or.CENTER_QUORUM)if(a==null)a=c;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,a=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Or.CENTER_QUORUM&&(o++,a+=g.getEstimatedModuleSize());if(o<3)return!1;const f=a/c;let p=0;for(const g of this.possibleCenters)p+=Math.abs(g.getEstimatedModuleSize()-f);return p<=.05*a}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new H;const a=this.possibleCenters;let c;if(o>3){let f=0,p=0;for(const _ of this.possibleCenters){const T=_.getEstimatedModuleSize();f+=T,p+=T*T}c=f/o;let g=Math.sqrt(p/o-c*c);a.sort((_,T)=>{const M=Math.abs(T.getEstimatedModuleSize()-c),L=Math.abs(_.getEstimatedModuleSize()-c);return M<L?-1:M>L?1:0});const w=Math.max(.2*c,g);for(let _=0;_<a.length&&a.length>3;_++){const T=a[_];Math.abs(T.getEstimatedModuleSize()-c)>w&&(a.splice(_,1),_--)}}if(a.length>3){let f=0;for(const p of a)f+=p.getEstimatedModuleSize();c=f/a.length,a.sort((p,g)=>{if(g.getCount()===p.getCount()){const w=Math.abs(g.getEstimatedModuleSize()-c),_=Math.abs(p.getEstimatedModuleSize()-c);return w<_?1:w>_?-1:0}else return g.getCount()-p.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Or.CENTER_QUORUM=2,Or.MIN_SKIP=3,Or.MAX_MODULES=57;class $c{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(F.NEED_RESULT_POINT_CALLBACK);const c=new Or(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(c)}processFinderPatternInfo(o){const a=o.getTopLeft(),c=o.getTopRight(),f=o.getBottomLeft(),p=this.calculateModuleSize(a,c,f);if(p<1)throw new H("No pattern found in proccess finder.");const g=$c.computeDimension(a,c,f,p),w=Fe.getProvisionalVersionForDimension(g),_=w.getDimensionForVersion()-7;let T=null;if(w.getAlignmentPatternCenters().length>0){const $=c.getX()-a.getX()+f.getX(),q=c.getY()-a.getY()+f.getY(),Q=1-3/_,ee=Math.floor(a.getX()+Q*($-a.getX())),ie=Math.floor(a.getY()+Q*(q-a.getY()));for(let ye=4;ye<=16;ye<<=1)try{T=this.findAlignmentInRegion(p,ee,ie,ye);break}catch(_e){if(!(_e instanceof H))throw _e}}const M=$c.createTransform(a,c,f,T,g),L=$c.sampleGrid(this.image,M,g);let U;return T===null?U=[f,a,c]:U=[f,a,c,T],new Pr(L,U)}static createTransform(o,a,c,f,p){const g=p-3.5;let w,_,T,M;return f!==null?(w=f.getX(),_=f.getY(),T=g-3,M=T):(w=a.getX()-o.getX()+c.getX(),_=a.getY()-o.getY()+c.getY(),T=g,M=g),Nt.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,M,3.5,g,o.getX(),o.getY(),a.getX(),a.getY(),w,_,c.getX(),c.getY())}static sampleGrid(o,a,c){return Qs.getInstance().sampleGridWithTransform(o,c,c,a)}static computeDimension(o,a,c,f){const p=Ne.round(Ce.distance(o,a)/f),g=Ne.round(Ce.distance(o,c)/f);let w=Math.floor((p+g)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new H("Dimensions could be not found.")}return w}calculateModuleSize(o,a,c){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,c))/2}calculateModuleSizeOneWay(o,a){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,c,f){let p=this.sizeOfBlackWhiteBlackRun(o,a,c,f),g=1,w=o-(c-o);w<0?(g=o/(o-w),w=0):w>=this.image.getWidth()&&(g=(this.image.getWidth()-1-o)/(w-o),w=this.image.getWidth()-1);let _=Math.floor(a-(f-a)*g);return g=1,_<0?(g=a/(a-_),_=0):_>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),w=Math.floor(o+(w-o)*g),p+=this.sizeOfBlackWhiteBlackRun(o,a,w,_),p-1}sizeOfBlackWhiteBlackRun(o,a,c,f){const p=Math.abs(f-a)>Math.abs(c-o);if(p){let $=o;o=a,a=$,$=c,c=f,f=$}const g=Math.abs(c-o),w=Math.abs(f-a);let _=-g/2;const T=o<c?1:-1,M=a<f?1:-1;let L=0;const U=c+T;for(let $=o,q=a;$!==U;$+=T){const Q=p?q:$,ee=p?$:q;if(L===1===this.image.get(Q,ee)){if(L===2)return Ne.distance($,q,o,a);L++}if(_+=w,_>0){if(q===f)break;q+=M,_-=g}}return L===2?Ne.distance(c+T,f,o,a):NaN}findAlignmentInRegion(o,a,c,f){const p=Math.floor(f*o),g=Math.max(0,a-p),w=Math.min(this.image.getWidth()-1,a+p);if(w-g<o*3)throw new H("Alignment top exceeds estimated module size.");const _=Math.max(0,c-p),T=Math.min(this.image.getHeight()-1,c+p);if(T-_<o*3)throw new H("Alignment bottom exceeds estimated module size.");return new Gd(this.image,g,_,w-g,T-_,o,this.resultPointCallback).find()}}class Ji{constructor(){this.decoder=new Z4}getDecoder(){return this.decoder}decode(o,a){let c,f;if(a!=null&&a.get(F.PURE_BARCODE)!==void 0){const _=Ji.extractPureBits(o.getBlackMatrix());c=this.decoder.decodeBitMatrix(_,a),f=Ji.NO_POINTS}else{const _=new $c(o.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(_.getBits(),a),f=_.getPoints()}c.getOther()instanceof iw&&c.getOther().applyMirroredCorrection(f);const p=new fe(c.getText(),c.getRawBytes(),void 0,f,ve.QR_CODE,void 0),g=c.getByteSegments();g!==null&&p.putMetadata(ke.BYTE_SEGMENTS,g);const w=c.getECLevel();return w!==null&&p.putMetadata(ke.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(p.putMetadata(ke.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),p.putMetadata(ke.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),p}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a===null||c===null)throw new H;const f=this.moduleSize(a,o);let p=a[1],g=c[1],w=a[0],_=c[0];if(w>=_||p>=g)throw new H;if(g-p!==_-w&&(_=w+(g-p),_>=o.getWidth()))throw new H;const T=Math.round((_-w+1)/f),M=Math.round((g-p+1)/f);if(T<=0||M<=0)throw new H;if(M!==T)throw new H;const L=Math.floor(f/2);p+=L,w+=L;const U=w+Math.floor((T-1)*f)-_;if(U>0){if(U>L)throw new H;w-=U}const $=p+Math.floor((M-1)*f)-g;if($>0){if($>L)throw new H;p-=$}const q=new G(T,M);for(let Q=0;Q<M;Q++){const ee=p+Math.floor(Q*f);for(let ie=0;ie<T;ie++)o.get(w+Math.floor(ie*f),ee)&&q.set(ie,Q)}return q}static moduleSize(o,a){const c=a.getHeight(),f=a.getWidth();let p=o[0],g=o[1],w=!0,_=0;for(;p<f&&g<c;){if(w!==a.get(p,g)){if(++_===5)break;w=!w}p++,g++}if(p===f||g===c)throw new H;return(p-o[0])/7}}Ji.NO_POINTS=new Array;class Ye{PDF417Common(){}static getBitCountSum(o){return Ne.sum(o)}static toIntArray(o){if(o==null||!o.length)return Ye.EMPTY_INT_ARRAY;const a=new Int32Array(o.length);let c=0;for(const f of o)a[c++]=f;return a}static getCodeword(o){const a=A.binarySearch(Ye.SYMBOL_TABLE,o&262143);return a<0?-1:(Ye.CODEWORD_TABLE[a]-1)%Ye.NUMBER_OF_CODEWORDS}}Ye.NUMBER_OF_CODEWORDS=929,Ye.MAX_CODEWORDS_IN_BARCODE=Ye.NUMBER_OF_CODEWORDS-1,Ye.MIN_ROWS_IN_BARCODE=3,Ye.MAX_ROWS_IN_BARCODE=90,Ye.MODULES_IN_CODEWORD=17,Ye.MODULES_IN_STOP_PATTERN=18,Ye.BARS_IN_MODULE=8,Ye.EMPTY_INT_ARRAY=new Int32Array([]),Ye.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ye.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class eR{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(o,a,c){let f=o.getBlackMatrix(),p=nt.detect(c,f);return p.length||(f=f.clone(),f.rotate180(),p=nt.detect(c,f)),new eR(f,p)}static detect(o,a){const c=new Array;let f=0,p=0,g=!1;for(;f<a.getHeight();){const w=nt.findVertices(a,f,p);if(w[0]==null&&w[3]==null){if(!g)break;g=!1,p=0;for(const _ of c)_[1]!=null&&(f=Math.trunc(Math.max(f,_[1].getY()))),_[3]!=null&&(f=Math.max(f,Math.trunc(_[3].getY())));f+=nt.ROW_STEP;continue}if(g=!0,c.push(w),!o)break;w[2]!=null?(p=Math.trunc(w[2].getX()),f=Math.trunc(w[2].getY())):(p=Math.trunc(w[4].getX()),f=Math.trunc(w[4].getY()))}return c}static findVertices(o,a,c){const f=o.getHeight(),p=o.getWidth(),g=new Array(8);return nt.copyToResult(g,nt.findRowsWithPattern(o,f,p,a,c,nt.START_PATTERN),nt.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),nt.copyToResult(g,nt.findRowsWithPattern(o,f,p,a,c,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),g}static copyToResult(o,a,c){for(let f=0;f<c.length;f++)o[c[f]]=a[f]}static findRowsWithPattern(o,a,c,f,p,g){const w=new Array(4);let _=!1;const T=new Int32Array(g.length);for(;f<a;f+=nt.ROW_STEP){let L=nt.findGuardPattern(o,p,f,c,!1,g,T);if(L!=null){for(;f>0;){const U=nt.findGuardPattern(o,p,--f,c,!1,g,T);if(U!=null)L=U;else{f++;break}}w[0]=new Ce(L[0],f),w[1]=new Ce(L[1],f),_=!0;break}}let M=f+1;if(_){let L=0,U=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;M<a;M++){const $=nt.findGuardPattern(o,U[0],M,c,!1,g,T);if($!=null&&Math.abs(U[0]-$[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-$[1])<nt.MAX_PATTERN_DRIFT)U=$,L=0;else{if(L>nt.SKIPPED_ROW_COUNT_MAX)break;L++}}M-=L+1,w[2]=new Ce(U[0],M),w[3]=new Ce(U[1],M)}return M-f<nt.BARCODE_MIN_HEIGHT&&A.fill(w,null),w}static findGuardPattern(o,a,c,f,p,g,w){A.fillWithin(w,0,w.length,0);let _=a,T=0;for(;o.get(_,c)&&_>0&&T++<nt.MAX_PIXEL_DRIFT;)_--;let M=_,L=0,U=g.length;for(let $=p;M<f;M++)if(o.get(M,c)!==$)w[L]++;else{if(L===U-1){if(nt.patternMatchVariance(w,g,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([_,M]);_+=w[0]+w[1],C.arraycopy(w,2,w,0,L-1),w[L-1]=0,w[L]=0,L--}else L++;w[L]=1,$=!$}return L===U-1&&nt.patternMatchVariance(w,g,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([_,M-1]):null}static patternMatchVariance(o,a,c){let f=o.length,p=0,g=0;for(let T=0;T<f;T++)p+=o[T],g+=a[T];if(p<g)return 1/0;let w=p/g;c*=w;let _=0;for(let T=0;T<f;T++){let M=o[T],L=a[T]*w,U=M>L?M-L:L-M;if(U>c)return 1/0;_+=U}return _/p}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class Lr{constructor(o,a){if(a.length===0)throw new y;this.field=o;let c=a.length;if(c>1&&a[0]===0){let f=1;for(;f<c&&a[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),C.arraycopy(a,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let f=0;for(let p of this.coefficients)f=this.field.add(f,p);return f}let a=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)a=this.field.add(this.field.multiply(o,a),this.coefficients[f]);return a}add(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){let g=a;a=c,c=g}let f=new Int32Array(c.length),p=c.length-a.length;C.arraycopy(c,0,f,0,p);for(let g=p;g<c.length;g++)f[g]=this.field.add(a[g-p],c[g]);return new Lr(this.field,f)}subtract(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Lr?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Lr(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,f=o.coefficients,p=f.length,g=new Int32Array(c+p-1);for(let w=0;w<c;w++){let _=a[w];for(let T=0;T<p;T++)g[w+T]=this.field.add(g[w+T],this.field.multiply(_,f[T]))}return new Lr(this.field,g)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new Lr(this.field,a)}multiplyScalar(o){if(o===0)return new Lr(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let f=0;f<a;f++)c[f]=this.field.multiply(this.coefficients[f],o);return new Lr(this.field,c)}multiplyByMonomial(o,a){if(o<0)throw new y;if(a===0)return new Lr(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+o);for(let p=0;p<c;p++)f[p]=this.field.multiply(this.coefficients[p],a);return new Lr(this.field,f)}toString(){let o=new X;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(o.append(" - "),c=-c):o.length()>0&&o.append(" + "),(a===0||c!==1)&&o.append(c),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class tR{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}inverse(o){if(o===0)throw new je;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class hm extends tR{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let c=1;for(let f=0;f<o;f++)this.expTable[f]=c,c=c*a%o;for(let f=0;f<o-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Lr(this,new Int32Array([0])),this.one=new Lr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new y;if(a===0)return this.zero;let c=new Int32Array(o+1);return c[0]=a,new Lr(this,c)}}hm.PDF417_GF=new hm(Ye.NUMBER_OF_CODEWORDS,3);class ow{constructor(){this.field=hm.PDF417_GF}decode(o,a,c){let f=new Lr(this.field,o),p=new Int32Array(a),g=!1;for(let q=a;q>0;q--){let Q=f.evaluateAt(this.field.exp(q));p[a-q]=Q,Q!==0&&(g=!0)}if(!g)return 0;let w=this.field.getOne();if(c!=null)for(const q of c){let Q=this.field.exp(o.length-1-q),ee=new Lr(this.field,new Int32Array([this.field.subtract(0,Q),1]));w=w.multiply(ee)}let _=new Lr(this.field,p),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),M=T[0],L=T[1],U=this.findErrorLocations(M),$=this.findErrorMagnitudes(L,M,U);for(let q=0;q<U.length;q++){let Q=o.length-1-this.field.log(U[q]);if(Q<0)throw b.getChecksumInstance();o[Q]=this.field.subtract(o[Q],$[q])}return U.length}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){let U=o;o=a,a=U}let f=o,p=a,g=this.field.getZero(),w=this.field.getOne();for(;p.getDegree()>=Math.round(c/2);){let U=f,$=g;if(f=p,g=w,f.isZero())throw b.getChecksumInstance();p=U;let q=this.field.getZero(),Q=f.getCoefficient(f.getDegree()),ee=this.field.inverse(Q);for(;p.getDegree()>=f.getDegree()&&!p.isZero();){let ie=p.getDegree()-f.getDegree(),ye=this.field.multiply(p.getCoefficient(p.getDegree()),ee);q=q.add(this.field.buildMonomial(ie,ye)),p=p.subtract(f.multiplyByMonomial(ie,ye))}w=q.multiply(g).subtract($).negative()}let _=w.getCoefficient(0);if(_===0)throw b.getChecksumInstance();let T=this.field.inverse(_),M=w.multiply(T),L=p.multiply(T);return[M,L]}findErrorLocations(o){let a=o.getDegree(),c=new Int32Array(a),f=0;for(let p=1;p<this.field.getSize()&&f<a;p++)o.evaluateAt(p)===0&&(c[f]=this.field.inverse(p),f++);if(f!==a)throw b.getChecksumInstance();return c}findErrorMagnitudes(o,a,c){let f=a.getDegree(),p=new Int32Array(f);for(let T=1;T<=f;T++)p[f-T]=this.field.multiply(T,a.getCoefficient(T));let g=new Lr(this.field,p),w=c.length,_=new Int32Array(w);for(let T=0;T<w;T++){let M=this.field.inverse(c[T]),L=this.field.subtract(0,o.evaluateAt(M)),U=this.field.inverse(g.evaluateAt(M));_[T]=this.field.multiply(L,U)}return _}}class oa{constructor(o,a,c,f,p){o instanceof oa?this.constructor_2(o):this.constructor_1(o,a,c,f,p)}constructor_1(o,a,c,f,p){const g=a==null||c==null,w=f==null||p==null;if(g&&w)throw new H;g?(a=new Ce(0,f.getY()),c=new Ce(0,p.getY())):w&&(f=new Ce(o.getWidth()-1,a.getY()),p=new Ce(o.getWidth()-1,c.getY())),this.image=o,this.topLeft=a,this.bottomLeft=c,this.topRight=f,this.bottomRight=p,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),p.getX())),this.minY=Math.trunc(Math.min(a.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),p.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new oa(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,c){let f=this.topLeft,p=this.bottomLeft,g=this.topRight,w=this.bottomRight;if(o>0){let _=c?this.topLeft:this.topRight,T=Math.trunc(_.getY()-o);T<0&&(T=0);let M=new Ce(_.getX(),T);c?f=M:g=M}if(a>0){let _=c?this.bottomLeft:this.bottomRight,T=Math.trunc(_.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let M=new Ce(_.getX(),T);c?p=M:w=M}return new oa(this.image,f,p,g,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rR{constructor(o,a,c,f){this.columnCount=o,this.errorCorrectionLevel=f,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Wc{constructor(){this.buffer=""}static form(o,a){let c=-1;function f(g,w,_,T,M,L){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=M?parseInt(M.substr(1)):void 0,$;switch(L){case"s":$=a[c];break;case"c":$=a[c][0];break;case"f":$=parseFloat(a[c]).toFixed(g);break;case"p":$=parseFloat(a[c]).toPrecision(g);break;case"e":$=parseFloat(a[c]).toExponential(g);break;case"x":$=parseInt(a[c]).toString(U||16);break;case"d":$=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}$=typeof $=="object"?JSON.stringify($):(+$).toString(U);let q=parseInt(_),Q=_&&_[0]+""=="0"?"0":" ";for(;$.length<q;)$=w!==void 0?$+Q:Q+$;return $}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(p,f)}format(o,...a){this.buffer+=Wc.form(o,a)}toString(){return this.buffer}}class Gc{constructor(o){this.boundingBox=new oa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let a=this.getCodeword(o);if(a!=null)return a;for(let c=1;c<Gc.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(o)-c;if(f>=0&&(a=this.codewords[f],a!=null)||(f=this.imageRowToCodewordIndex(o)+c,f<this.codewords.length&&(a=this.codewords[f],a!=null)))return a}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,a){this.codewords[this.imageRowToCodewordIndex(o)]=a}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Wc;let a=0;for(const c of this.codewords){if(c==null){o.format("%3d:    |   %n",a++);continue}o.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue())}return o.toString()}}Gc.MAX_NEARBY_DISTANCE=5;class Yc{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(const[c,f]of this.values.entries()){const p={getKey:()=>c,getValue:()=>f};p.getValue()>o?(o=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===o&&a.push(p.getKey())}return Ye.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class aw extends Gc{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),p=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.imageRowToCodewordIndex(Math.trunc(p.getY())),_=-1,T=1,M=0;for(let L=g;L<w;L++){if(a[L]==null)continue;let U=a[L],$=U.getRowNumber()-_;if($===0)M++;else if($===1)T=Math.max(T,M),M=1,_=U.getRowNumber();else if($<0||U.getRowNumber()>=o.getRowCount()||$>L)a[L]=null;else{let q;T>2?q=(T-2)*$:q=$;let Q=q>=L;for(let ee=1;ee<=q&&!Q;ee++)Q=a[L-ee]!=null;Q?a[L]=null:(_=U.getRowNumber(),M=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=a.length)continue;a[f]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),f=this._isLeft?a.getBottomLeft():a.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.getCodewords(),_=-1;for(let T=p;T<g;T++){if(w[T]==null)continue;let M=w[T];M.setRowNumberAsRowIndicatorColumn();let L=M.getRowNumber()-_;L===0||(L===1?_=M.getRowNumber():M.getRowNumber()>=o.getRowCount()?w[T]=null:_=M.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new Yc,c=new Yc,f=new Yc,p=new Yc;for(let w of o){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let _=w.getValue()%30,T=w.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:c.setValue(_*3+1);break;case 1:p.setValue(_/3),f.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||c.getValue().length===0||f.getValue().length===0||p.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<Ye.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>Ye.MAX_ROWS_IN_BARCODE)return null;let g=new rR(a.getValue()[0],c.getValue()[0],f.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(o,g),g}removeIncorrectCodewords(o,a){for(let c=0;c<o.length;c++){let f=o[c];if(o[c]==null)continue;let p=f.getValue()%30,g=f.getRowNumber();if(g>a.getRowCount()){o[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:p*3+1!==a.getRowCountUpperPart()&&(o[c]=null);break;case 1:(Math.trunc(p/3)!==a.getErrorCorrectionLevel()||p%3!==a.getRowCountLowerPart())&&(o[c]=null);break;case 2:p+1!==a.getColumnCount()&&(o[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qc{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Ye.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(a,f,c))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++)if(o[c]!=null&&a[c]!=null&&o[c].getRowNumber()===a[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let p=this.detectionResultColumns[f].getCodewords()[c];p!=null&&(p.setRowNumber(o[c].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let f=a[c].getRowNumber(),p=0;for(let g=this.barcodeColumnCount+1;g>0&&p<this.ADJUST_ROW_NUMBER_SKIP;g--){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=qc.adjustRowNumberIfValid(f,p,w),w.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let f=a[c].getRowNumber(),p=0;for(let g=1;g<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;g++){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=qc.adjustRowNumberIfValid(f,p,w),w.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(o)?(c.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,c){if(!this.detectionResultColumns[o-1])return;let f=c[a],p=this.detectionResultColumns[o-1].getCodewords(),g=p;this.detectionResultColumns[o+1]!=null&&(g=this.detectionResultColumns[o+1].getCodewords());let w=new Array(14);w[2]=p[a],w[3]=g[a],a>0&&(w[0]=c[a-1],w[4]=p[a-1],w[5]=g[a-1]),a>1&&(w[8]=c[a-2],w[10]=p[a-2],w[11]=g[a-2]),a<c.length-1&&(w[1]=c[a+1],w[6]=p[a+1],w[7]=g[a+1]),a<c.length-2&&(w[9]=c[a+2],w[12]=p[a+2],w[13]=g[a+2]);for(let _ of w)if(qc.adjustRowNumber(f,_))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Wc;for(let c=0;c<o.getCodewords().length;c++){a.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){a.format("    |   ");continue}let p=this.detectionResultColumns[f].getCodewords()[c];if(p==null){a.format("    |   ");continue}a.format(" %3d|%3d",p.getRowNumber(),p.getValue())}a.format("%n")}return a.toString()}}class Xc{constructor(o,a,c,f){this.rowNumber=Xc.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Xc.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Xc.BARCODE_ROW_UNKNOWN=-1;class vn{static initialize(){for(let o=0;o<Ye.SYMBOL_TABLE.length;o++){let a=Ye.SYMBOL_TABLE[o],c=a&1;for(let f=0;f<Ye.BARS_IN_MODULE;f++){let p=0;for(;(a&1)===c;)p+=1,a>>=1;c=a&1,vn.RATIOS_TABLE[o]||(vn.RATIOS_TABLE[o]=new Array(Ye.BARS_IN_MODULE)),vn.RATIOS_TABLE[o][Ye.BARS_IN_MODULE-f-1]=Math.fround(p/Ye.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=vn.getDecodedCodewordValue(vn.sampleBitCounts(o));return a!==-1?a:vn.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=Ne.sum(o),c=new Int32Array(Ye.BARS_IN_MODULE),f=0,p=0;for(let g=0;g<Ye.MODULES_IN_CODEWORD;g++){let w=a/(2*Ye.MODULES_IN_CODEWORD)+g*a/Ye.MODULES_IN_CODEWORD;p+o[f]<=w&&(p+=o[f],f++),c[f]++}return c}static getDecodedCodewordValue(o){let a=vn.getBitValue(o);return Ye.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let c=0;c<o.length;c++)for(let f=0;f<o[c];f++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=Ne.sum(o),c=new Array(Ye.BARS_IN_MODULE);if(a>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(o[g]/a);let f=bt.MAX_VALUE,p=-1;this.bSymbolTableReady||vn.initialize();for(let g=0;g<vn.RATIOS_TABLE.length;g++){let w=0,_=vn.RATIOS_TABLE[g];for(let T=0;T<Ye.BARS_IN_MODULE;T++){let M=Math.fround(_[T]-c[T]);if(w+=Math.fround(M*M),w>=f)break}w<f&&(f=w,p=Ye.SYMBOL_TABLE[g])}return p}}vn.bSymbolTableReady=!1,vn.RATIOS_TABLE=new Array(Ye.SYMBOL_TABLE.length).map(D=>new Array(Ye.BARS_IN_MODULE));class lw{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class cw{static parseLong(o,a=void 0){return parseInt(o,a)}}class uw extends h{}uw.kind="NullPointerException";class nR{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,c){if(o==null)throw new uw;if(a<0||a>o.length||c<0||a+c>o.length||a+c<0)throw new I;if(c===0)return;for(let f=0;f<c;f++)this.write(o[a+f])}flush(){}close(){}}class sR extends h{}class iR extends nR{constructor(o=32){if(super(),this.count=0,o<0)throw new y("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let c=this.buf.length<<1;if(c-o<0&&(c=o),c<0){if(o<0)throw new sR;c=N.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,c)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,c){if(a<0||a>o.length||c<0||a+c-o.length>0)throw new I;this.ensureCapacity(this.count+c),C.arraycopy(o,a,this.buf,this.count,c),this.count+=c}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var At;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(At||(At={}));function dw(){if(typeof window<"u")return window.BigInt||null;if(typeof Zc<"u")return Zc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Yd;function eo(D){if(typeof Yd>"u"&&(Yd=dw()),Yd===null)throw new Error("BigInt is not supported!");return Yd(D)}function oR(){let D=[];D[0]=eo(1);let o=eo(900);D[1]=o;for(let a=2;a<16;a++)D[a]=D[a-1]*o;return D}class se{static decode(o,a){let c=new X(""),f=j.ISO8859_1;c.enableDecoding(f);let p=1,g=o[p++],w=new lw;for(;p<o[0];){switch(g){case se.TEXT_COMPACTION_MODE_LATCH:p=se.textCompaction(o,p,c);break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:p=se.byteCompaction(g,o,f,p,c);break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[p++]);break;case se.NUMERIC_COMPACTION_MODE_LATCH:p=se.numericCompaction(o,p,c);break;case se.ECI_CHARSET:j.getCharacterSetECIByValue(o[p++]);break;case se.ECI_GENERAL_PURPOSE:p+=2;break;case se.ECI_USER_DEFINED:p++;break;case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=se.decodeMacroBlock(o,p,w);break;case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:throw new B;default:p--,p=se.textCompaction(o,p,c);break}if(p<o.length)g=o[p++];else throw B.getFormatInstance()}if(c.length()===0)throw B.getFormatInstance();let _=new Xe(null,c.toString(),null,a);return _.setOther(w),_}static decodeMacroBlock(o,a,c){if(a+se.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw B.getFormatInstance();let f=new Int32Array(se.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<se.NUMBER_OF_SEQUENCE_CODEWORDS;w++,a++)f[w]=o[a];c.setSegmentIndex(N.parseInt(se.decodeBase900toBase10(f,se.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new X;a=se.textCompaction(o,a,p),c.setFileId(p.toString());let g=-1;for(o[a]===se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<o[0];)switch(o[a]){case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new X;a=se.textCompaction(o,a+1,w),c.setFileName(w.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new X;a=se.textCompaction(o,a+1,_),c.setSender(_.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;a=se.textCompaction(o,a+1,T),c.setAddressee(T.toString());break;case se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let M=new X;a=se.numericCompaction(o,a+1,M),c.setSegmentCount(N.parseInt(M.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new X;a=se.numericCompaction(o,a+1,L),c.setTimestamp(cw.parseLong(L.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new X;a=se.numericCompaction(o,a+1,U),c.setChecksum(N.parseInt(U.toString()));break;case se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let $=new X;a=se.numericCompaction(o,a+1,$),c.setFileSize(cw.parseLong($.toString()));break;default:throw B.getFormatInstance()}break;case se.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(g!==-1){let w=a-g;c.isLastSegment()&&w--,c.setOptionalData(A.copyOfRange(o,g,g+w))}return a}static textCompaction(o,a,c){let f=new Int32Array((o[0]-a)*2),p=new Int32Array((o[0]-a)*2),g=0,w=!1;for(;a<o[0]&&!w;){let _=o[a++];if(_<se.TEXT_COMPACTION_MODE_LATCH)f[g]=_/30,f[g+1]=_%30,g+=2;else switch(_){case se.TEXT_COMPACTION_MODE_LATCH:f[g++]=se.TEXT_COMPACTION_MODE_LATCH;break;case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:a--,w=!0;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[g]=se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=o[a++],p[g]=_,g++;break}}return se.decodeTextCompaction(f,p,g,c),a}static decodeTextCompaction(o,a,c,f){let p=At.ALPHA,g=At.ALPHA,w=0;for(;w<c;){let _=o[w],T="";switch(p){case At.ALPHA:if(_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case se.LL:p=At.LOWER;break;case se.ML:p=At.MIXED;break;case se.PS:g=p,p=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[w]);break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break;case At.LOWER:if(_<26)T=String.fromCharCode(97+_);else switch(_){case 26:T=" ";break;case se.AS:g=p,p=At.ALPHA_SHIFT;break;case se.ML:p=At.MIXED;break;case se.PS:g=p,p=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[w]);break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break;case At.MIXED:if(_<se.PL)T=se.MIXED_CHARS[_];else switch(_){case se.PL:p=At.PUNCT;break;case 26:T=" ";break;case se.LL:p=At.LOWER;break;case se.AL:p=At.ALPHA;break;case se.PS:g=p,p=At.PUNCT_SHIFT;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[w]);break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break;case At.PUNCT:if(_<se.PAL)T=se.PUNCT_CHARS[_];else switch(_){case se.PAL:p=At.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[w]);break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break;case At.ALPHA_SHIFT:if(p=g,_<26)T=String.fromCharCode(65+_);else switch(_){case 26:T=" ";break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break;case At.PUNCT_SHIFT:if(p=g,_<se.PAL)T=se.PUNCT_CHARS[_];else switch(_){case se.PAL:p=At.ALPHA;break;case se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[w]);break;case se.TEXT_COMPACTION_MODE_LATCH:p=At.ALPHA;break}break}T!==""&&f.append(T),w++}}static byteCompaction(o,a,c,f,p){let g=new iR,w=0,_=0,T=!1;switch(o){case se.BYTE_COMPACTION_MODE_LATCH:let M=new Int32Array(6),L=a[f++];for(;f<a[0]&&!T;)switch(M[w++]=L,_=900*_+L,L=a[f++],L){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:f--,T=!0;break;default:if(w%5===0&&w>0){for(let U=0;U<6;++U)g.write(Number(eo(_)>>eo(8*(5-U))));_=0,w=0}break}f===a[0]&&L<se.TEXT_COMPACTION_MODE_LATCH&&(M[w++]=L);for(let U=0;U<w;U++)g.write(M[U]);break;case se.BYTE_COMPACTION_MODE_LATCH_6:for(;f<a[0]&&!T;){let U=a[f++];if(U<se.TEXT_COMPACTION_MODE_LATCH)w++,_=900*_+U;else switch(U){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.NUMERIC_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:f--,T=!0;break}if(w%5===0&&w>0){for(let $=0;$<6;++$)g.write(Number(eo(_)>>eo(8*(5-$))));_=0,w=0}}break}return p.append(Y.decode(g.toByteArray(),c)),f}static numericCompaction(o,a,c){let f=0,p=!1,g=new Int32Array(se.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!p;){let w=o[a++];if(a===o[0]&&(p=!0),w<se.TEXT_COMPACTION_MODE_LATCH)g[f]=w,f++;else switch(w){case se.TEXT_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH:case se.BYTE_COMPACTION_MODE_LATCH_6:case se.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case se.MACRO_PDF417_TERMINATOR:a--,p=!0;break}(f%se.MAX_NUMERIC_CODEWORDS===0||w===se.NUMERIC_COMPACTION_MODE_LATCH||p)&&f>0&&(c.append(se.decodeBase900toBase10(g,f)),f=0)}return a}static decodeBase900toBase10(o,a){let c=eo(0);for(let p=0;p<a;p++)c+=se.EXP900[a-p-1]*eo(o[p]);let f=c.toString();if(f.charAt(0)!=="1")throw new B;return f.substring(1)}}se.TEXT_COMPACTION_MODE_LATCH=900,se.BYTE_COMPACTION_MODE_LATCH=901,se.NUMERIC_COMPACTION_MODE_LATCH=902,se.BYTE_COMPACTION_MODE_LATCH_6=924,se.ECI_USER_DEFINED=925,se.ECI_GENERAL_PURPOSE=926,se.ECI_CHARSET=927,se.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,se.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,se.MACRO_PDF417_TERMINATOR=922,se.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,se.MAX_NUMERIC_CODEWORDS=15,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,se.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,se.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,se.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,se.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,se.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,se.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,se.PL=25,se.LL=27,se.AS=27,se.ML=28,se.AL=28,se.PS=29,se.PAL=29,se.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,se.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",se.EXP900=dw()?oR():[],se.NUMBER_OF_SEQUENCE_CODEWORDS=2;class st{constructor(){}static decode(o,a,c,f,p,g,w){let _=new oa(o,a,c,f,p),T=null,M=null,L;for(let q=!0;;q=!1){if(a!=null&&(T=st.getRowIndicatorColumn(o,_,a,!0,g,w)),f!=null&&(M=st.getRowIndicatorColumn(o,_,f,!1,g,w)),L=st.merge(T,M),L==null)throw H.getNotFoundInstance();let Q=L.getBoundingBox();if(q&&Q!=null&&(Q.getMinY()<_.getMinY()||Q.getMaxY()>_.getMaxY()))_=Q;else break}L.setBoundingBox(_);let U=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,T),L.setDetectionResultColumn(U,M);let $=T!=null;for(let q=1;q<=U;q++){let Q=$?q:U-q;if(L.getDetectionResultColumn(Q)!==void 0)continue;let ee;Q===0||Q===U?ee=new aw(_,Q===0):ee=new Gc(_),L.setDetectionResultColumn(Q,ee);let ie=-1,ye=ie;for(let _e=_.getMinY();_e<=_.getMaxY();_e++){if(ie=st.getStartColumn(L,Q,_e,$),ie<0||ie>_.getMaxX()){if(ye===-1)continue;ie=ye}let ge=st.detectCodeword(o,_.getMinX(),_.getMaxX(),$,ie,_e,g,w);ge!=null&&(ee.setCodeword(_e,ge),ye=ie,g=Math.min(g,ge.getWidth()),w=Math.max(w,ge.getWidth()))}}return st.createDecoderResult(L)}static merge(o,a){if(o==null&&a==null)return null;let c=st.getBarcodeMetadata(o,a);if(c==null)return null;let f=oa.merge(st.adjustBoundingBox(o),st.adjustBoundingBox(a));return new qc(c,f)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let c=st.getMax(a),f=0;for(let w of a)if(f+=c-w,w>0)break;let p=o.getCodewords();for(let w=0;f>0&&p[w]==null;w++)f--;let g=0;for(let w=a.length-1;w>=0&&(g+=c-a[w],!(a[w]>0));w--);for(let w=p.length-1;g>0&&p[w]==null;w--)g--;return o.getBoundingBox().addMissingRows(f,g,o.isLeft())}static getMax(o){let a=-1;for(let c of o)a=Math.max(a,c);return a}static getBarcodeMetadata(o,a){let c;if(o==null||(c=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let f;return a==null||(f=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(o,a,c,f,p,g){let w=new aw(a,f);for(let _=0;_<2;_++){let T=_===0?1:-1,M=Math.trunc(Math.trunc(c.getX()));for(let L=Math.trunc(Math.trunc(c.getY()));L<=a.getMaxY()&&L>=a.getMinY();L+=T){let U=st.detectCodeword(o,0,o.getWidth(),f,M,L,p,g);U!=null&&(w.setCodeword(L,U),f?M=U.getStartX():M=U.getEndX())}}return w}static adjustCodewordCount(o,a){let c=a[0][1],f=c.getValue(),p=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-st.getNumberOfECCodeWords(o.getBarcodeECLevel());if(f.length===0){if(p<1||p>Ye.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();c.setValue(p)}else f[0]!==p&&c.setValue(p)}static createDecoderResult(o){let a=st.createBarcodeMatrix(o);st.adjustCodewordCount(o,a);let c=new Array,f=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),p=[],g=new Array;for(let _=0;_<o.getBarcodeRowCount();_++)for(let T=0;T<o.getBarcodeColumnCount();T++){let M=a[_][T+1].getValue(),L=_*o.getBarcodeColumnCount()+T;M.length===0?c.push(L):M.length===1?f[L]=M[0]:(g.push(L),p.push(M))}let w=new Array(p.length);for(let _=0;_<w.length;_++)w[_]=p[_];return st.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),f,Ye.toIntArray(c),Ye.toIntArray(g),w)}static createDecoderResultFromAmbiguousValues(o,a,c,f,p){let g=new Int32Array(f.length),w=100;for(;w-- >0;){for(let _=0;_<g.length;_++)a[f[_]]=p[_][g[_]];try{return st.decodeCodewords(a,o,c)}catch(_){if(!(_ instanceof b))throw _}if(g.length===0)throw b.getChecksumInstance();for(let _=0;_<g.length;_++)if(g[_]<p[_].length-1){g[_]++;break}else if(g[_]=0,_===g.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let f=0;f<a.length;f++)for(let p=0;p<a[f].length;p++)a[f][p]=new Yc;let c=0;for(let f of o.getDetectionResultColumns()){if(f!=null){for(let p of f.getCodewords())if(p!=null){let g=p.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][c].setValue(p.getValue())}}}c++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,c,f){let p=f?1:-1,g=null;if(st.isValidBarcodeColumn(o,a-p)&&(g=o.getDetectionResultColumn(a-p).getCodeword(c)),g!=null)return f?g.getEndX():g.getStartX();if(g=o.getDetectionResultColumn(a).getCodewordNearby(c),g!=null)return f?g.getStartX():g.getEndX();if(st.isValidBarcodeColumn(o,a-p)&&(g=o.getDetectionResultColumn(a-p).getCodewordNearby(c)),g!=null)return f?g.getEndX():g.getStartX();let w=0;for(;st.isValidBarcodeColumn(o,a-p);){a-=p;for(let _ of o.getDetectionResultColumn(a).getCodewords())if(_!=null)return(f?_.getEndX():_.getStartX())+p*w*(_.getEndX()-_.getStartX());w++}return f?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,c,f,p,g,w,_){p=st.adjustCodewordStartColumn(o,a,c,f,p,g);let T=st.getModuleBitCount(o,a,c,f,p,g);if(T==null)return null;let M,L=Ne.sum(T);if(f)M=p+L;else{for(let q=0;q<T.length/2;q++){let Q=T[q];T[q]=T[T.length-1-q],T[T.length-1-q]=Q}M=p,p=M-L}if(!st.checkCodewordSkew(L,w,_))return null;let U=vn.getDecodedValue(T),$=Ye.getCodeword(U);return $===-1?null:new Xc(p,M,st.getCodewordBucketNumber(U),$)}static getModuleBitCount(o,a,c,f,p,g){let w=p,_=new Int32Array(8),T=0,M=f?1:-1,L=f;for(;(f?w<c:w>=a)&&T<_.length;)o.get(w,g)===L?(_[T]++,w+=M):(T++,L=!L);return T===_.length||w===(f?c:a)&&T===_.length-1?_:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,c,f,p,g){let w=p,_=f?-1:1;for(let T=0;T<2;T++){for(;(f?w>=a:w<c)&&f===o.get(w,g);){if(Math.abs(p-w)>st.CODEWORD_SKEW_SIZE)return p;w+=_}_=-_,f=!f}return w}static checkCodewordSkew(o,a,c){return a-st.CODEWORD_SKEW_SIZE<=o&&o<=c+st.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,c){if(o.length===0)throw B.getFormatInstance();let f=1<<a+1,p=st.correctErrors(o,c,f);st.verifyCodewordCount(o,f);let g=se.decode(o,""+a);return g.setErrorsCorrected(p),g.setErasures(c.length),g}static correctErrors(o,a,c){if(a!=null&&a.length>c/2+st.MAX_ERRORS||c<0||c>st.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return st.errorCorrection.decode(o,c,a)}static verifyCodewordCount(o,a){if(o.length<4)throw B.getFormatInstance();let c=o[0];if(c>o.length)throw B.getFormatInstance();if(c===0)if(a<o.length)o[0]=o.length-a;else throw B.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),c=0,f=a.length-1;for(;!((o&1)!==c&&(c=o&1,f--,f<0));)a[f]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return st.getCodewordBucketNumber(st.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new Wc;for(let c=0;c<o.length;c++){a.format("Row %2d: ",c);for(let f=0;f<o[c].length;f++){let p=o[c][f];p.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}a.format("%n")}return a.toString()}}st.CODEWORD_SKEW_SIZE=2,st.MAX_ERRORS=3,st.MAX_EC_CODEWORDS=512,st.errorCorrection=new ow;class Br{decode(o,a=null){let c=Br.decode(o,a,!1);if(c==null||c.length===0||c[0]==null)throw H.getNotFoundInstance();return c[0]}decodeMultiple(o,a=null){try{return Br.decode(o,a,!0)}catch(c){throw c instanceof B||c instanceof b?H.getNotFoundInstance():c}}static decode(o,a,c){const f=new Array,p=nt.detectMultiple(o,a,c);for(const g of p.getPoints()){const w=st.decode(p.getBits(),g[4],g[5],g[6],g[7],Br.getMinCodewordWidth(g),Br.getMaxCodewordWidth(g)),_=new fe(w.getText(),w.getRawBytes(),void 0,g,ve.PDF_417);_.putMetadata(ke.ERROR_CORRECTION_LEVEL,w.getECLevel());const T=w.getOther();T!=null&&_.putMetadata(ke.PDF417_EXTRA_METADATA,T),f.push(_)}return f.map(g=>g)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?N.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Br.getMaxWidth(o[0],o[4]),Br.getMaxWidth(o[6],o[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.max(Br.getMaxWidth(o[1],o[5]),Br.getMaxWidth(o[7],o[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Br.getMinWidth(o[0],o[4]),Br.getMinWidth(o[6],o[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.min(Br.getMinWidth(o[1],o[5]),Br.getMinWidth(o[7],o[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))}reset(){}}class qd extends h{}qd.kind="ReaderException";class fw{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const a=!n(o)&&o.get(F.TRY_HARDER)===!0,c=n(o)?null:o.get(F.POSSIBLE_FORMATS),f=new Array;if(!n(c)){const p=c.some(g=>g===ve.UPC_A||g===ve.UPC_E||g===ve.EAN_13||g===ve.EAN_8||g===ve.CODABAR||g===ve.CODE_39||g===ve.CODE_93||g===ve.CODE_128||g===ve.ITF||g===ve.RSS_14||g===ve.RSS_EXPANDED);p&&!a&&f.push(new al(o,this.verbose)),c.includes(ve.QR_CODE)&&f.push(new Ji),c.includes(ve.DATA_MATRIX)&&f.push(new Zi),c.includes(ve.AZTEC)&&f.push(new nl),c.includes(ve.PDF_417)&&f.push(new Br),p&&a&&f.push(new al(o,this.verbose))}f.length===0&&(a||f.push(new al(o,this.verbose)),f.push(new Ji),f.push(new Zi),f.push(new nl),f.push(new Br),a&&f.push(new al(o,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new qd("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(o,this.hints)}catch(c){if(c instanceof qd)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class aR extends le{constructor(o=null,a=500){const c=new fw;c.setHints(o),super(c,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class lR extends le{constructor(o=500){super(new Br,o)}}class cR extends le{constructor(o=500){super(new Ji,o)}}var mm;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(mm||(mm={}));var Sr=mm;class pm{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Ee(o,Int32Array.from([1])))}buildGenerator(o){const a=this.cachedGenerators;if(o>=a.length){let c=a[a.length-1];const f=this.field;for(let p=a.length;p<=o;p++){const g=c.multiply(new Ee(f,Int32Array.from([1,f.exp(p-1+f.getGeneratorBase())])));a.push(g),c=g}}return a[o]}encode(o,a){if(a===0)throw new y("No error correction bytes");const c=o.length-a;if(c<=0)throw new y("No data bytes provided");const f=this.buildGenerator(a),p=new Int32Array(c);C.arraycopy(o,0,p,0,c);let g=new Ee(this.field,p);g=g.multiplyByMonomial(a,1);const _=g.divide(f)[1].getCoefficients(),T=a-_.length;for(let M=0;M<T;M++)o[c+M]=0;C.arraycopy(_,0,o,c+T,_.length)}}class sr{constructor(){}static applyMaskPenaltyRule1(o){return sr.applyMaskPenaltyRule1Internal(o,!0)+sr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let a=0;const c=o.getArray(),f=o.getWidth(),p=o.getHeight();for(let g=0;g<p-1;g++){const w=c[g];for(let _=0;_<f-1;_++){const T=w[_];T===w[_+1]&&T===c[g+1][_]&&T===c[g+1][_+1]&&a++}}return sr.N2*a}static applyMaskPenaltyRule3(o){let a=0;const c=o.getArray(),f=o.getWidth(),p=o.getHeight();for(let g=0;g<p;g++)for(let w=0;w<f;w++){const _=c[g];w+6<f&&_[w]===1&&_[w+1]===0&&_[w+2]===1&&_[w+3]===1&&_[w+4]===1&&_[w+5]===0&&_[w+6]===1&&(sr.isWhiteHorizontal(_,w-4,w)||sr.isWhiteHorizontal(_,w+7,w+11))&&a++,g+6<p&&c[g][w]===1&&c[g+1][w]===0&&c[g+2][w]===1&&c[g+3][w]===1&&c[g+4][w]===1&&c[g+5][w]===0&&c[g+6][w]===1&&(sr.isWhiteVertical(c,w,g-4,g)||sr.isWhiteVertical(c,w,g+7,g+11))&&a++}return a*sr.N3}static isWhiteHorizontal(o,a,c){a=Math.max(a,0),c=Math.min(c,o.length);for(let f=a;f<c;f++)if(o[f]===1)return!1;return!0}static isWhiteVertical(o,a,c,f){c=Math.max(c,0),f=Math.min(f,o.length);for(let p=c;p<f;p++)if(o[p][a]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let a=0;const c=o.getArray(),f=o.getWidth(),p=o.getHeight();for(let _=0;_<p;_++){const T=c[_];for(let M=0;M<f;M++)T[M]===1&&a++}const g=o.getHeight()*o.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*sr.N4}static getDataMaskBit(o,a,c){let f,p;switch(o){case 0:f=c+a&1;break;case 1:f=c&1;break;case 2:f=a%3;break;case 3:f=(c+a)%3;break;case 4:f=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:p=c*a,f=(p&1)+p%3;break;case 6:p=c*a,f=(p&1)+p%3&1;break;case 7:p=c*a,f=p%3+(c+a&1)&1;break;default:throw new y("Invalid mask pattern: "+o)}return f===0}static applyMaskPenaltyRule1Internal(o,a){let c=0;const f=a?o.getHeight():o.getWidth(),p=a?o.getWidth():o.getHeight(),g=o.getArray();for(let w=0;w<f;w++){let _=0,T=-1;for(let M=0;M<p;M++){const L=a?g[w][M]:g[M][w];L===T?_++:(_>=5&&(c+=sr.N1+(_-5)),_=1,T=L)}_>=5&&(c+=sr.N1+(_-5))}return c}}sr.N1=3,sr.N2=3,sr.N3=40,sr.N4=10;class Xd{constructor(o,a){this.width=o,this.height=a;const c=new Array(a);for(let f=0;f!==a;f++)c[f]=new Uint8Array(o);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,c){this.bytes[a][o]=c}setBoolean(o,a,c){this.bytes[a][o]=c?1:0}clear(o){for(const a of this.bytes)A.fill(a,o)}equals(o){if(!(o instanceof Xd))return!1;const a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,f=this.height;c<f;++c){const p=this.bytes[c],g=a.bytes[c];for(let w=0,_=this.width;w<_;++w)if(p[w]!==g[w])return!1}return!0}toString(){const o=new X;for(let a=0,c=this.height;a<c;++a){const f=this.bytes[a];for(let p=0,g=this.width;p<g;++p)switch(f[p]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class aa{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new X;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<aa.NUM_MASK_PATTERNS}}aa.NUM_MASK_PATTERNS=8;class Tt extends h{}Tt.kind="WriterException";class Ge{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,c,f,p){Ge.clearMatrix(p),Ge.embedBasicPatterns(c,p),Ge.embedTypeInfo(a,f,p),Ge.maybeEmbedVersionInfo(c,p),Ge.embedDataBits(o,f,p)}static embedBasicPatterns(o,a){Ge.embedPositionDetectionPatternsAndSeparators(a),Ge.embedDarkDotAtLeftBottomCorner(a),Ge.maybeEmbedPositionAdjustmentPatterns(o,a),Ge.embedTimingPatterns(a)}static embedTypeInfo(o,a,c){const f=new O;Ge.makeTypeInfoBits(o,a,f);for(let p=0,g=f.getSize();p<g;++p){const w=f.get(f.getSize()-1-p),_=Ge.TYPE_INFO_COORDINATES[p],T=_[0],M=_[1];if(c.setBoolean(T,M,w),p<8){const L=c.getWidth()-p-1;c.setBoolean(L,8,w)}else{const U=c.getHeight()-7+(p-8);c.setBoolean(8,U,w)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;const c=new O;Ge.makeVersionInfoBits(o,c);let f=6*3-1;for(let p=0;p<6;++p)for(let g=0;g<3;++g){const w=c.get(f);f--,a.setBoolean(p,a.getHeight()-11+g,w),a.setBoolean(a.getHeight()-11+g,p,w)}}static embedDataBits(o,a,c){let f=0,p=-1,g=c.getWidth()-1,w=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);w>=0&&w<c.getHeight();){for(let _=0;_<2;++_){const T=g-_;if(!Ge.isEmpty(c.get(T,w)))continue;let M;f<o.getSize()?(M=o.get(f),++f):M=!1,a!==255&&sr.getDataMaskBit(a,T,w)&&(M=!M),c.setBoolean(T,w,M)}w+=p}p=-p,w+=p,g-=2}if(f!==o.getSize())throw new Tt("Not all bits consumed: "+f+"/"+o.getSize())}static findMSBSet(o){return 32-N.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new y("0 polynomial");const c=Ge.findMSBSet(a);for(o<<=c-1;Ge.findMSBSet(o)>=c;)o^=a<<Ge.findMSBSet(o)-c;return o}static makeTypeInfoBits(o,a,c){if(!aa.isValidMaskPattern(a))throw new Tt("Invalid mask pattern");const f=o.getBits()<<3|a;c.appendBits(f,5);const p=Ge.calculateBCHCode(f,Ge.TYPE_INFO_POLY);c.appendBits(p,10);const g=new O;if(g.appendBits(Ge.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new Tt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);const c=Ge.calculateBCHCode(o.getVersionNumber(),Ge.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new Tt("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){const c=(a+1)%2;Ge.isEmpty(o.get(a,6))&&o.setNumber(a,6,c),Ge.isEmpty(o.get(6,a))&&o.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Tt;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,c){for(let f=0;f<8;++f){if(!Ge.isEmpty(c.get(o+f,a)))throw new Tt;c.setNumber(o+f,a,0)}}static embedVerticalSeparationPattern(o,a,c){for(let f=0;f<7;++f){if(!Ge.isEmpty(c.get(o,a+f)))throw new Tt;c.setNumber(o,a+f,0)}}static embedPositionAdjustmentPattern(o,a,c){for(let f=0;f<5;++f){const p=Ge.POSITION_ADJUSTMENT_PATTERN[f];for(let g=0;g<5;++g)c.setNumber(o+g,a+f,p[g])}}static embedPositionDetectionPattern(o,a,c){for(let f=0;f<7;++f){const p=Ge.POSITION_DETECTION_PATTERN[f];for(let g=0;g<7;++g)c.setNumber(o+g,a+f,p[g])}}static embedPositionDetectionPatternsAndSeparators(o){const a=Ge.POSITION_DETECTION_PATTERN[0].length;Ge.embedPositionDetectionPattern(0,0,o),Ge.embedPositionDetectionPattern(o.getWidth()-a,0,o),Ge.embedPositionDetectionPattern(0,o.getWidth()-a,o);const c=8;Ge.embedHorizontalSeparationPattern(0,c-1,o),Ge.embedHorizontalSeparationPattern(o.getWidth()-c,c-1,o),Ge.embedHorizontalSeparationPattern(0,o.getWidth()-c,o);const f=7;Ge.embedVerticalSeparationPattern(f,0,o),Ge.embedVerticalSeparationPattern(o.getHeight()-f-1,0,o),Ge.embedVerticalSeparationPattern(f,o.getHeight()-f,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;const c=o.getVersionNumber()-1,f=Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let p=0,g=f.length;p!==g;p++){const w=f[p];if(w>=0)for(let _=0;_!==g;_++){const T=f[_];T>=0&&Ge.isEmpty(a.get(T,w))&&Ge.embedPositionAdjustmentPattern(T-2,w-2,a)}}}}Ge.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ge.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ge.VERSION_INFO_POLY=7973,Ge.TYPE_INFO_POLY=1335,Ge.TYPE_INFO_MASK_PATTERN=21522;class uR{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Pt{constructor(){}static calculateMaskPenalty(o){return sr.applyMaskPenaltyRule1(o)+sr.applyMaskPenaltyRule2(o)+sr.applyMaskPenaltyRule3(o)+sr.applyMaskPenaltyRule4(o)}static encode(o,a,c=null){let f=Pt.DEFAULT_BYTE_MODE_ENCODING;const p=c!==null&&c.get(Sr.CHARACTER_SET)!==void 0;p&&(f=c.get(Sr.CHARACTER_SET).toString());const g=this.chooseMode(o,f),w=new O;if(g===He.BYTE&&(p||Pt.DEFAULT_BYTE_MODE_ENCODING!==f)){const _e=j.getCharacterSetECIByName(f);_e!==void 0&&this.appendECI(_e,w)}this.appendModeInfo(g,w);const _=new O;this.appendBytes(o,g,_,f);let T;if(c!==null&&c.get(Sr.QR_VERSION)!==void 0){const _e=Number.parseInt(c.get(Sr.QR_VERSION).toString(),10);T=Fe.getVersionForNumber(_e);const ge=this.calculateBitsNeeded(g,w,_,T);if(!this.willFit(ge,T,a))throw new Tt("Data too big for requested version")}else T=this.recommendVersion(a,g,w,_);const M=new O;M.appendBitArray(w);const L=g===He.BYTE?_.getSizeInBytes():o.length;this.appendLengthInfo(L,T,g,M),M.appendBitArray(_);const U=T.getECBlocksForLevel(a),$=T.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits($,M);const q=this.interleaveWithECBytes(M,T.getTotalCodewords(),$,U.getNumBlocks()),Q=new aa;Q.setECLevel(a),Q.setMode(g),Q.setVersion(T);const ee=T.getDimensionForVersion(),ie=new Xd(ee,ee),ye=this.chooseMaskPattern(q,a,T,ie);return Q.setMaskPattern(ye),Ge.buildMatrix(q,a,T,ye,ie),Q.setMatrix(ie),Q}static recommendVersion(o,a,c,f){const p=this.calculateBitsNeeded(a,c,f,Fe.getVersionForNumber(1)),g=this.chooseVersion(p,o),w=this.calculateBitsNeeded(a,c,f,g);return this.chooseVersion(w,o)}static calculateBitsNeeded(o,a,c,f){return a.getSize()+o.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(o){return o<Pt.ALPHANUMERIC_TABLE.length?Pt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(j.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return He.KANJI;let c=!1,f=!1;for(let p=0,g=o.length;p<g;++p){const w=o.charAt(p);if(Pt.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)f=!0;else return He.BYTE}return f?He.ALPHANUMERIC:c?He.NUMERIC:He.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=Y.encode(o,j.SJIS)}catch{return!1}const c=a.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const p=a[f]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(o,a,c,f){let p=Number.MAX_SAFE_INTEGER,g=-1;for(let w=0;w<aa.NUM_MASK_PATTERNS;w++){Ge.buildMatrix(o,a,c,w,f);let _=this.calculateMaskPenalty(f);_<p&&(p=_,g=w)}return g}static chooseVersion(o,a){for(let c=1;c<=40;c++){const f=Fe.getVersionForNumber(c);if(Pt.willFit(o,f,a))return f}throw new Tt("Data too big")}static willFit(o,a,c){const f=a.getTotalCodewords(),g=a.getECBlocksForLevel(c).getTotalECCodewords(),w=f-g,_=(o+7)/8;return w>=_}static terminateBits(o,a){const c=o*8;if(a.getSize()>c)throw new Tt("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let g=0;g<4&&a.getSize()<c;++g)a.appendBit(!1);const f=a.getSize()&7;if(f>0)for(let g=f;g<8;g++)a.appendBit(!1);const p=o-a.getSizeInBytes();for(let g=0;g<p;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==c)throw new Tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,c,f,p,g){if(f>=c)throw new Tt("Block ID too large");const w=o%c,_=c-w,T=Math.floor(o/c),M=T+1,L=Math.floor(a/c),U=L+1,$=T-L,q=M-U;if($!==q)throw new Tt("EC bytes mismatch");if(c!==_+w)throw new Tt("RS blocks mismatch");if(o!==(L+$)*_+(U+q)*w)throw new Tt("Total bytes mismatch");f<_?(p[0]=L,g[0]=$):(p[0]=U,g[0]=q)}static interleaveWithECBytes(o,a,c,f){if(o.getSizeInBytes()!==c)throw new Tt("Number of bits and data bytes does not match");let p=0,g=0,w=0;const _=new Array;for(let M=0;M<f;++M){const L=new Int32Array(1),U=new Int32Array(1);Pt.getNumDataBytesAndNumECBytesForBlockID(a,c,f,M,L,U);const $=L[0],q=new Uint8Array($);o.toBytes(8*p,q,0,$);const Q=Pt.generateECBytes(q,U[0]);_.push(new uR(q,Q)),g=Math.max(g,$),w=Math.max(w,Q.length),p+=L[0]}if(c!==p)throw new Tt("Data bytes does not match offset");const T=new O;for(let M=0;M<g;++M)for(const L of _){const U=L.getDataBytes();M<U.length&&T.appendBits(U[M],8)}for(let M=0;M<w;++M)for(const L of _){const U=L.getErrorCorrectionBytes();M<U.length&&T.appendBits(U[M],8)}if(a!==T.getSizeInBytes())throw new Tt("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(o,a){const c=o.length,f=new Int32Array(c+a);for(let g=0;g<c;g++)f[g]=o[g]&255;new pm(Me.QR_CODE_FIELD_256).encode(f,a);const p=new Uint8Array(a);for(let g=0;g<a;g++)p[g]=f[c+g];return p}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,c,f){const p=c.getCharacterCountBits(a);if(o>=1<<p)throw new Tt(o+" is bigger than "+((1<<p)-1));f.appendBits(o,p)}static appendBytes(o,a,c,f){switch(a){case He.NUMERIC:Pt.appendNumericBytes(o,c);break;case He.ALPHANUMERIC:Pt.appendAlphanumericBytes(o,c);break;case He.BYTE:Pt.append8BitBytes(o,c,f);break;case He.KANJI:Pt.appendKanjiBytes(o,c);break;default:throw new Tt("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const a=Pt.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){const c=o.length;let f=0;for(;f<c;){const p=Pt.getDigit(o.charAt(f));if(f+2<c){const g=Pt.getDigit(o.charAt(f+1)),w=Pt.getDigit(o.charAt(f+2));a.appendBits(p*100+g*10+w,10),f+=3}else if(f+1<c){const g=Pt.getDigit(o.charAt(f+1));a.appendBits(p*10+g,7),f+=2}else a.appendBits(p,4),f++}}static appendAlphanumericBytes(o,a){const c=o.length;let f=0;for(;f<c;){const p=Pt.getAlphanumericCode(o.charCodeAt(f));if(p===-1)throw new Tt;if(f+1<c){const g=Pt.getAlphanumericCode(o.charCodeAt(f+1));if(g===-1)throw new Tt;a.appendBits(p*45+g,11),f+=2}else a.appendBits(p,6),f++}}static append8BitBytes(o,a,c){let f;try{f=Y.encode(o,c)}catch(p){throw new Tt(p)}for(let p=0,g=f.length;p!==g;p++){const w=f[p];a.appendBits(w,8)}}static appendKanjiBytes(o,a){let c;try{c=Y.encode(o,j.SJIS)}catch(p){throw new Tt(p)}const f=c.length;for(let p=0;p<f;p+=2){const g=c[p]&255,w=c[p+1]&255,_=g<<8&4294967295|w;let T=-1;if(_>=33088&&_<=40956?T=_-33088:_>=57408&&_<=60351&&(T=_-49472),T===-1)throw new Tt("Invalid byte sequence");const M=(T>>8)*192+(T&255);a.appendBits(M,13)}}static appendECI(o,a){a.appendBits(He.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}Pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Pt.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class la{write(o,a,c,f=null){if(o.length===0)throw new y("Found empty contents");if(a<0||c<0)throw new y("Requested dimensions are too small: "+a+"x"+c);let p=Mt.L,g=la.QUIET_ZONE_SIZE;f!==null&&(f.get(Sr.ERROR_CORRECTION)!==void 0&&(p=Mt.fromString(f.get(Sr.ERROR_CORRECTION).toString())),f.get(Sr.MARGIN)!==void 0&&(g=Number.parseInt(f.get(Sr.MARGIN).toString(),10)));const w=Pt.encode(o,p,f);return this.renderResult(w,a,c,g)}writeToDom(o,a,c,f,p=null){typeof o=="string"&&(o=document.querySelector(o));const g=this.write(a,c,f,p);o&&o.appendChild(g)}renderResult(o,a,c,f){const p=o.getMatrix();if(p===null)throw new St;const g=p.getWidth(),w=p.getHeight(),_=g+f*2,T=w+f*2,M=Math.max(a,_),L=Math.max(c,T),U=Math.min(Math.floor(M/_),Math.floor(L/T)),$=Math.floor((M-g*U)/2),q=Math.floor((L-w*U)/2),Q=this.createSVGElement(M,L);for(let ee=0,ie=q;ee<w;ee++,ie+=U)for(let ye=0,_e=$;ye<g;ye++,_e+=U)if(p.get(ye,ee)===1){const ge=this.createSvgRectElement(_e,ie,U,U);Q.appendChild(ge)}return Q}createSVGElement(o,a){const c=document.createElementNS(la.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(o,a,c,f){const p=document.createElementNS(la.SVG_NS,"rect");return p.setAttributeNS(null,"x",o.toString()),p.setAttributeNS(null,"y",a.toString()),p.setAttributeNS(null,"height",c.toString()),p.setAttributeNS(null,"width",f.toString()),p.setAttributeNS(null,"fill","#000000"),p}}la.QUIET_ZONE_SIZE=4,la.SVG_NS="http://www.w3.org/2000/svg";class cl{encode(o,a,c,f,p){if(o.length===0)throw new y("Found empty contents");if(a!==ve.QR_CODE)throw new y("Can only encode QR_CODE, but got "+a);if(c<0||f<0)throw new y(`Requested dimensions are too small: ${c}x${f}`);let g=Mt.L,w=cl.QUIET_ZONE_SIZE;p!==null&&(p.get(Sr.ERROR_CORRECTION)!==void 0&&(g=Mt.fromString(p.get(Sr.ERROR_CORRECTION).toString())),p.get(Sr.MARGIN)!==void 0&&(w=Number.parseInt(p.get(Sr.MARGIN).toString(),10)));const _=Pt.encode(o,g,p);return cl.renderResult(_,c,f,w)}static renderResult(o,a,c,f){const p=o.getMatrix();if(p===null)throw new St;const g=p.getWidth(),w=p.getHeight(),_=g+f*2,T=w+f*2,M=Math.max(a,_),L=Math.max(c,T),U=Math.min(Math.floor(M/_),Math.floor(L/T)),$=Math.floor((M-g*U)/2),q=Math.floor((L-w*U)/2),Q=new G(M,L);for(let ee=0,ie=q;ee<w;ee++,ie+=U)for(let ye=0,_e=$;ye<g;ye++,_e+=U)p.get(ye,ee)===1&&Q.setRegion(_e,ie,U,U);return Q}}cl.QUIET_ZONE_SIZE=4;class dR{encode(o,a,c,f,p){let g;switch(a){case ve.QR_CODE:g=new cl;break;default:throw new y("No encoder available for format "+a)}return g.encode(o,a,c,f,p)}}class ei extends Z{constructor(o,a,c,f,p,g,w,_){if(super(g,w),this.yuvData=o,this.dataWidth=a,this.dataHeight=c,this.left=f,this.top=p,f+g>a||p+w>c)throw new y("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(g,w)}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const f=(o+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,f,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=o*a,f=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return C.arraycopy(this.yuvData,p,f,0,c),f;for(let g=0;g<a;g++){const w=g*o;C.arraycopy(this.yuvData,p,f,w,o),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(o,a,c,f){return new ei(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+a,c,f,!1)}renderThumbnail(){const o=this.getWidth()/ei.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/ei.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*a),f=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const w=g*o;for(let _=0;_<o;_++){const T=f[p+_*ei.THUMBNAIL_SCALE_FACTOR]&255;c[w+_]=4278190080|T*65793}p+=this.dataWidth*ei.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/ei.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ei.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,a){const c=this.yuvData;for(let f=0,p=this.top*this.dataWidth+this.left;f<a;f++,p+=this.dataWidth){const g=p+o/2;for(let w=p,_=p+o-1;w<g;w++,_--){const T=c[w];c[w]=c[_],c[_]=T}}}invert(){return new K(this)}}ei.THUMBNAIL_SCALE_FACTOR=2;class gm extends Z{constructor(o,a,c,f,p,g,w){if(super(a,c),this.dataWidth=f,this.dataHeight=p,this.left=g,this.top=w,o.BYTES_PER_ELEMENT===4){const _=a*c,T=new Uint8ClampedArray(_);for(let M=0;M<_;M++){const L=o[M],U=L>>16&255,$=L>>7&510,q=L&255;T[M]=(U+$+q)/4&255}this.luminances=T}else this.luminances=o;if(f===void 0&&(this.dataWidth=a),p===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const f=(o+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,f,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;const c=o*a,f=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return C.arraycopy(this.luminances,p,f,0,c),f;for(let g=0;g<a;g++){const w=g*o;C.arraycopy(this.luminances,p,f,w,o),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(o,a,c,f){return new gm(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new K(this)}}class hw extends j{static forName(o){return this.getCharacterSetECIByName(o)}}class xm{}xm.ISO_8859_1=j.ISO8859_1;class mw{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class pw{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class fR{constructor(o){this.previous=o}getPrevious(){return this.previous}}class ul extends fR{constructor(o,a,c){super(o),this.value=a,this.bitCount=c}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new ul(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ul(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+N.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class ym extends ul{constructor(o,a,c){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(o,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):c===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(o,a){return new ym(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function hR(D,o,a){return new ym(D,o,a)}function Kc(D,o,a){return new ul(D,o,a)}const mR=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],to=0,Kd=1,os=2,gw=3,ti=4,pR=new ul(null,0,0),wm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function gR(D){for(let o of D)A.fill(o,-1);return D[to][ti]=0,D[Kd][ti]=0,D[Kd][to]=28,D[gw][ti]=0,D[os][ti]=0,D[os][to]=15,D}const xw=gR(A.createInt32Array(6,6));class ri{constructor(o,a,c,f){this.token=o,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let c=this.bitCount,f=this.token;if(o!==this.mode){let g=wm[this.mode][o];f=Kc(f,g&65535,g>>16),c+=g>>16}let p=o===os?4:5;return f=Kc(f,a,p),new ri(f,o,0,c+p)}shiftAndAppend(o,a){let c=this.token,f=this.mode===os?4:5;return c=Kc(c,xw[this.mode][o],f),c=Kc(c,a,5),new ri(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(o){let a=this.token,c=this.mode,f=this.bitCount;if(this.mode===ti||this.mode===os){let w=wm[c][to];a=Kc(a,w&65535,w>>16),f+=w>>16,c=to}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ri(a,c,this.binaryShiftByteCount+1,f+p);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(o+1)),g}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=hR(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new ri(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(wm[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=ri.calculateBinaryShiftCost(o)-ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let f=this.endBinaryShift(o.length).token;f!==null;f=f.getPrevious())a.unshift(f);let c=new O;for(const f of a)f.appendTo(c,o);return c}toString(){return z.format("%s bits=%d bytes=%d",mR[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}ri.INITIAL_STATE=new ri(pR,to,0,0);function xR(D){const o=z.getCharCode(" "),a=z.getCharCode("."),c=z.getCharCode(",");D[to][o]=1;const f=z.getCharCode("Z"),p=z.getCharCode("A");for(let U=p;U<=f;U++)D[to][U]=U-p+2;D[Kd][o]=1;const g=z.getCharCode("z"),w=z.getCharCode("a");for(let U=w;U<=g;U++)D[Kd][U]=U-w+2;D[os][o]=1;const _=z.getCharCode("9"),T=z.getCharCode("0");for(let U=T;U<=_;U++)D[os][U]=U-T+2;D[os][c]=12,D[os][a]=13;const M=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<M.length;U++)D[gw][z.getCharCode(M[U])]=U;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<L.length;U++)z.getCharCode(L[U])>0&&(D[ti][z.getCharCode(L[U])]=U);return D}const vm=xR(A.createInt32Array(5,256));class Qc{constructor(o){this.text=o}encode(){const o=z.getCharCode(" "),a=z.getCharCode(`
`);let c=pw.singletonList(ri.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let g,w=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case z.getCharCode("\r"):g=w===a?2:0;break;case z.getCharCode("."):g=w===o?3:0;break;case z.getCharCode(","):g=w===o?4:0;break;case z.getCharCode(":"):g=w===o?5:0;break;default:g=0}g>0?(c=Qc.updateStateListForPair(c,p,g),p++):c=this.updateStateListForChar(c,p)}return pw.min(c,(p,g)=>p.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){const c=[];for(let f of o)this.updateStateForChar(f,a,c);return Qc.simplifyStates(c)}updateStateForChar(o,a,c){let f=this.text[a]&255,p=vm[o.getMode()][f]>0,g=null;for(let w=0;w<=ti;w++){let _=vm[w][f];if(_>0){if(g==null&&(g=o.endBinaryShift(a)),!p||w===o.getMode()||w===os){const T=g.latchAndAppend(w,_);c.push(T)}if(!p&&xw[o.getMode()][w]>=0){const T=g.shiftAndAppend(w,_);c.push(T)}}}if(o.getBinaryShiftByteCount()>0||vm[o.getMode()][f]===0){let w=o.addBinaryShiftChar(a);c.push(w)}}static updateStateListForPair(o,a,c){const f=[];for(let p of o)this.updateStateForPair(p,a,c,f);return this.simplifyStates(f)}static updateStateForPair(o,a,c,f){let p=o.endBinaryShift(a);if(f.push(p.latchAndAppend(ti,c)),o.getMode()!==ti&&f.push(p.shiftAndAppend(ti,c)),c===3||c===4){let g=p.latchAndAppend(os,16-c).latchAndAppend(os,1);f.push(g)}if(o.getBinaryShiftByteCount()>0){let g=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);f.push(g)}}static simplifyStates(o){let a=[];for(const c of o){let f=!0;for(const p of a){if(p.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(p)&&(a=a.filter(g=>g!==p))}f&&a.push(c)}return a}}class mt{constructor(){}static encodeBytes(o){return mt.encode(o,mt.DEFAULT_EC_PERCENT,mt.DEFAULT_AZTEC_LAYERS)}static encode(o,a,c){let f=new Qc(o).encode(),p=N.truncDivision(f.getSize()*a,100)+11,g=f.getSize()+p,w,_,T,M,L;if(c!==mt.DEFAULT_AZTEC_LAYERS){if(w=c<0,_=Math.abs(c),_>(w?mt.MAX_NB_BITS_COMPACT:mt.MAX_NB_BITS))throw new y(z.format("Illegal value %s for layers",c));T=mt.totalBitsInLayer(_,w),M=mt.WORD_SIZE[_];let ge=T-T%M;if(L=mt.stuffBits(f,M),L.getSize()+p>ge)throw new y("Data to large for user specified layer");if(w&&L.getSize()>M*64)throw new y("Data to large for user specified layer")}else{M=0,L=null;for(let ge=0;;ge++){if(ge>mt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(w=ge<=3,_=w?ge+1:ge,T=mt.totalBitsInLayer(_,w),g>T)continue;(L==null||M!==mt.WORD_SIZE[_])&&(M=mt.WORD_SIZE[_],L=mt.stuffBits(f,M));let ct=T-T%M;if(!(w&&L.getSize()>M*64)&&L.getSize()+p<=ct)break}}let U=mt.generateCheckWords(L,T,M),$=L.getSize()/M,q=mt.generateModeMessage(w,_,$),Q=(w?11:14)+_*4,ee=new Int32Array(Q),ie;if(w){ie=Q;for(let ge=0;ge<ee.length;ge++)ee[ge]=ge}else{ie=Q+1+2*N.truncDivision(N.truncDivision(Q,2)-1,15);let ge=N.truncDivision(Q,2),ct=N.truncDivision(ie,2);for(let Ze=0;Ze<ge;Ze++){let bn=Ze+N.truncDivision(Ze,15);ee[ge-Ze-1]=ct-bn-1,ee[ge+Ze]=ct+bn+1}}let ye=new G(ie);for(let ge=0,ct=0;ge<_;ge++){let Ze=(_-ge)*4+(w?9:12);for(let bn=0;bn<Ze;bn++){let As=bn*2;for(let _n=0;_n<2;_n++)U.get(ct+As+_n)&&ye.set(ee[ge*2+_n],ee[ge*2+bn]),U.get(ct+Ze*2+As+_n)&&ye.set(ee[ge*2+bn],ee[Q-1-ge*2-_n]),U.get(ct+Ze*4+As+_n)&&ye.set(ee[Q-1-ge*2-_n],ee[Q-1-ge*2-bn]),U.get(ct+Ze*6+As+_n)&&ye.set(ee[Q-1-ge*2-bn],ee[ge*2+_n])}ct+=Ze*8}if(mt.drawModeMessage(ye,w,ie,q),w)mt.drawBullsEye(ye,N.truncDivision(ie,2),5);else{mt.drawBullsEye(ye,N.truncDivision(ie,2),7);for(let ge=0,ct=0;ge<N.truncDivision(Q,2)-1;ge+=15,ct+=16)for(let Ze=N.truncDivision(ie,2)&1;Ze<ie;Ze+=2)ye.set(N.truncDivision(ie,2)-ct,Ze),ye.set(N.truncDivision(ie,2)+ct,Ze),ye.set(Ze,N.truncDivision(ie,2)-ct),ye.set(Ze,N.truncDivision(ie,2)+ct)}let _e=new mw;return _e.setCompact(w),_e.setSize(ie),_e.setLayers(_),_e.setCodeWords($),_e.setMatrix(ye),_e}static drawBullsEye(o,a,c){for(let f=0;f<c;f+=2)for(let p=a-f;p<=a+f;p++)o.set(p,a-f),o.set(p,a+f),o.set(a-f,p),o.set(a+f,p);o.set(a-c,a-c),o.set(a-c+1,a-c),o.set(a-c,a-c+1),o.set(a+c,a-c),o.set(a+c,a-c+1),o.set(a+c,a+c-1)}static generateModeMessage(o,a,c){let f=new O;return o?(f.appendBits(a-1,2),f.appendBits(c-1,6),f=mt.generateCheckWords(f,28,4)):(f.appendBits(a-1,5),f.appendBits(c-1,11),f=mt.generateCheckWords(f,40,4)),f}static drawModeMessage(o,a,c,f){let p=N.truncDivision(c,2);if(a)for(let g=0;g<7;g++){let w=p-3+g;f.get(g)&&o.set(w,p-5),f.get(g+7)&&o.set(p+5,w),f.get(20-g)&&o.set(w,p+5),f.get(27-g)&&o.set(p-5,w)}else for(let g=0;g<10;g++){let w=p-5+g+N.truncDivision(g,5);f.get(g)&&o.set(w,p-7),f.get(g+10)&&o.set(p+7,w),f.get(29-g)&&o.set(w,p+7),f.get(39-g)&&o.set(p-7,w)}}static generateCheckWords(o,a,c){let f=o.getSize()/c,p=new pm(mt.getGF(c)),g=N.truncDivision(a,c),w=mt.bitsToWords(o,c,g);p.encode(w,g-f);let _=a%c,T=new O;T.appendBits(0,_);for(const M of Array.from(w))T.appendBits(M,c);return T}static bitsToWords(o,a,c){let f=new Int32Array(c),p,g;for(p=0,g=o.getSize()/a;p<g;p++){let w=0;for(let _=0;_<a;_++)w|=o.get(p*a+_)?1<<a-_-1:0;f[p]=w}return f}static getGF(o){switch(o){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new y("Unsupported word size "+o)}}static stuffBits(o,a){let c=new O,f=o.getSize(),p=(1<<a)-2;for(let g=0;g<f;g+=a){let w=0;for(let _=0;_<a;_++)(g+_>=f||o.get(g+_))&&(w|=1<<a-1-_);(w&p)===p?(c.appendBits(w&p,a),g--):w&p?c.appendBits(w,a):(c.appendBits(w|1,a),g--)}return c}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}mt.DEFAULT_EC_PERCENT=33,mt.DEFAULT_AZTEC_LAYERS=0,mt.MAX_NB_BITS=32,mt.MAX_NB_BITS_COMPACT=4,mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qd{encode(o,a,c,f){return this.encodeWithHints(o,a,c,f,null)}encodeWithHints(o,a,c,f,p){let g=xm.ISO_8859_1,w=mt.DEFAULT_EC_PERCENT,_=mt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(Sr.CHARACTER_SET)&&(g=hw.forName(p.get(Sr.CHARACTER_SET).toString())),p.has(Sr.ERROR_CORRECTION)&&(w=N.parseInt(p.get(Sr.ERROR_CORRECTION).toString())),p.has(Sr.AZTEC_LAYERS)&&(_=N.parseInt(p.get(Sr.AZTEC_LAYERS).toString()))),Qd.encodeLayers(o,a,c,f,g,w,_)}static encodeLayers(o,a,c,f,p,g,w){if(a!==ve.AZTEC)throw new y("Can only encode AZTEC, but got "+a);let _=mt.encode(z.getBytes(o,p),g,w);return Qd.renderResult(_,c,f)}static renderResult(o,a,c){let f=o.getMatrix();if(f==null)throw new St;let p=f.getWidth(),g=f.getHeight(),w=Math.max(a,p),_=Math.max(c,g),T=Math.min(w/p,_/g),M=(w-p*T)/2,L=(_-g*T)/2,U=new G(w,_);for(let $=0,q=L;$<g;$++,q+=T)for(let Q=0,ee=M;Q<p;Q++,ee+=T)f.get(Q,$)&&U.setRegion(ee,q,T,T);return U}}r.AbstractExpandedDecoder=im,r.ArgumentException=x,r.ArithmeticException=je,r.AztecCode=mw,r.AztecCodeReader=nl,r.AztecCodeWriter=Qd,r.AztecDecoder=Be,r.AztecDetector=na,r.AztecDetectorResult=it,r.AztecEncoder=mt,r.AztecHighLevelEncoder=Qc,r.AztecPoint=Dr,r.BarcodeFormat=ve,r.Binarizer=S,r.BinaryBitmap=v,r.BitArray=O,r.BitMatrix=G,r.BitSource=cm,r.BrowserAztecCodeReader=Vd,r.BrowserBarcodeReader=q4,r.BrowserCodeReader=le,r.BrowserDatamatrixCodeReader=K4,r.BrowserMultiFormatReader=aR,r.BrowserPDF417Reader=lR,r.BrowserQRCodeReader=cR,r.BrowserQRCodeSvgWriter=la,r.CharacterSetECI=j,r.ChecksumException=b,r.Code128Reader=Se,r.Code39Reader=rr,r.DataMatrixDecodedBitStreamParser=Qi,r.DataMatrixReader=Zi,r.DecodeHintType=F,r.DecoderResult=Xe,r.DefaultGridSampler=Si,r.DetectorResult=Pr,r.EAN13Reader=Es,r.EncodeHintType=Sr,r.Exception=h,r.FormatException=B,r.GenericGF=Me,r.GenericGFPoly=Ee,r.GlobalHistogramBinarizer=te,r.GridSampler=ra,r.GridSamplerInstance=Qs,r.HTMLCanvasElementLuminanceSource=ne,r.HybridBinarizer=J,r.ITFReader=ft,r.IllegalArgumentException=y,r.IllegalStateException=St,r.InvertedLuminanceSource=K,r.LuminanceSource=Z,r.MathUtils=Ne,r.MultiFormatOneDReader=al,r.MultiFormatReader=fw,r.MultiFormatWriter=dR,r.NotFoundException=H,r.OneDReader=Ut,r.PDF417DecodedBitStreamParser=se,r.PDF417DecoderErrorCorrection=ow,r.PDF417Reader=Br,r.PDF417ResultMetadata=lw,r.PerspectiveTransform=Nt,r.PlanarYUVLuminanceSource=ei,r.QRCodeByteMatrix=Xd,r.QRCodeDataMask=ss,r.QRCodeDecodedBitStreamParser=Gt,r.QRCodeDecoderErrorCorrectionLevel=Mt,r.QRCodeDecoderFormatInformation=Gr,r.QRCodeEncoder=Pt,r.QRCodeEncoderQRCode=aa,r.QRCodeMaskUtil=sr,r.QRCodeMatrixUtil=Ge,r.QRCodeMode=He,r.QRCodeReader=Ji,r.QRCodeVersion=Fe,r.QRCodeWriter=cl,r.RGBLuminanceSource=gm,r.RSS14Reader=nr,r.RSSExpandedReader=de,r.ReaderException=qd,r.ReedSolomonDecoder=er,r.ReedSolomonEncoder=pm,r.ReedSolomonException=gt,r.Result=fe,r.ResultMetadataType=ke,r.ResultPoint=Ce,r.StringUtils=z,r.UnsupportedOperationException=W,r.VideoInputDevice=pe,r.WhiteRectangleDetector=tr,r.WriterException=Tt,r.ZXingArrays=A,r.ZXingCharset=hw,r.ZXingInteger=N,r.ZXingStandardCharsets=xm,r.ZXingStringBuilder=X,r.ZXingStringEncoding=Y,r.ZXingSystem=C,r.createAbstractExpandedDecoder=sw,Object.defineProperty(r,"__esModule",{value:!0})})})(Ng,Ng.exports);var Bt=Ng.exports;const MU=Rg(Bt),jU=Ig({__proto__:null,default:MU},[Bt]);var Sb=function(){function t(e,r,n){if(this.formatMap=new Map([[Re.QR_CODE,Bt.BarcodeFormat.QR_CODE],[Re.AZTEC,Bt.BarcodeFormat.AZTEC],[Re.CODABAR,Bt.BarcodeFormat.CODABAR],[Re.CODE_39,Bt.BarcodeFormat.CODE_39],[Re.CODE_93,Bt.BarcodeFormat.CODE_93],[Re.CODE_128,Bt.BarcodeFormat.CODE_128],[Re.DATA_MATRIX,Bt.BarcodeFormat.DATA_MATRIX],[Re.MAXICODE,Bt.BarcodeFormat.MAXICODE],[Re.ITF,Bt.BarcodeFormat.ITF],[Re.EAN_13,Bt.BarcodeFormat.EAN_13],[Re.EAN_8,Bt.BarcodeFormat.EAN_8],[Re.PDF_417,Bt.BarcodeFormat.PDF_417],[Re.RSS_14,Bt.BarcodeFormat.RSS_14],[Re.RSS_EXPANDED,Bt.BarcodeFormat.RSS_EXPANDED],[Re.UPC_A,Bt.BarcodeFormat.UPC_A],[Re.UPC_E,Bt.BarcodeFormat.UPC_E],[Re.UPC_EAN_EXTENSION,Bt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!jU)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var s=this.createZXingFormats(e),i=new Map;i.set(Bt.DecodeHintType.POSSIBLE_FORMATS,s),i.set(Bt.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,s){try{n(r.decode(e))}catch(i){s(i)}})},t.prototype.decode=function(e){var r=new Bt.MultiFormatReader(this.verbose,this.hints),n=new Bt.HTMLCanvasElementLuminanceSource(e),s=new Bt.BinaryBitmap(new Bt.HybridBinarizer(n)),i=r.decode(s);return{text:i.text,format:kI.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),kU=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},PU=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Ab=function(){function t(e,r,n){if(this.formatMap=new Map([[Re.QR_CODE,"qr_code"],[Re.AZTEC,"aztec"],[Re.CODABAR,"codabar"],[Re.CODE_39,"code_39"],[Re.CODE_93,"code_93"],[Re.CODE_128,"code_128"],[Re.DATA_MATRIX,"data_matrix"],[Re.ITF,"itf"],[Re.EAN_13,"ean_13"],[Re.EAN_8,"ean_8"],[Re.PDF_417,"pdf417"],[Re.UPC_A,"upc_a"],[Re.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return kU(this,void 0,void 0,function(){var r,n;return PU(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=s.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:kI.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,s=0,i=e;s<i.length;s++){var l=i[s],u=l.boundingBox.width*l.boundingBox.height;u>n&&(n=u,r=l)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Nb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},Tb=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},DU=function(){function t(e,r,n,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Ab.isSupported()?(this.primaryDecoder=new Ab(e,n,s),this.secondaryDecoder=new Sb(e,n,s)):this.primaryDecoder=new Sb(e,n,s)}return t.prototype.decodeAsync=function(e){return Nb(this,void 0,void 0,function(){var r;return Tb(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Nb(this,void 0,void 0,function(){var r,n;return Tb(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(n=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var s=n[r];e+=s}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Xy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},r0=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},BI=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),LU=function(t){Xy(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var s={advanced:[n]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(BI),BU=function(t){Xy(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(LU),FU=function(t){Xy(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(BI),UU=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new BU(this.track)},t.prototype.torchFeature=function(){return new FU(this.track)},t}(),zU=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,s),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,s){return t0(this,void 0,void 0,function(){var i,l;return r0(this,function(u){switch(u.label){case 0:return i=new t(e,r,s),n.aspectRatio?(l={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:u.sent(),u.label=2;case 2:return i.setupSurface(),[2,i]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return t0(this,void 0,void 0,function(){return r0(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var s=e.mediaStream.getVideoTracks(),i=s.length,l=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++l,l>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new UU(this.getFirstTrackOrFail())},t}(),VU=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return t0(this,void 0,void 0,function(){return r0(this,function(s){return[2,zU.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return t0(this,void 0,void 0,function(){var r,n;return r0(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=s.sent(),[2,new t(n)]}})})},t}(),Ib=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},Rb=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},HU=function(){function t(){}return t.failIfNotSupported=function(){return Ib(this,void 0,void 0,function(){return Rb(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Ib(this,void 0,void 0,function(){return Rb(this,function(r){return[2,VU.create(e)]})})},t}(),$U=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},WU=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},GU=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=zl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=zl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return $U(this,void 0,void 0,function(){var e,r,n,s,i,l,u;return WU(this,function(m){switch(m.label){case 0:return e=function(h){for(var x=h.getVideoTracks(),y=0,v=x;y<v.length;y++){var b=v[y];b.enabled=!1,b.stop(),h.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=m.sent(),s=[],i=0,l=n;i<l.length;i++)u=l[i],u.kind==="videoinput"&&s.push({id:u.deviceId,label:u.label});return e(r),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(i){for(var l=[],u=0,m=i;u<m.length;u++){var h=m[u];h.kind==="video"&&l.push({id:h.id,label:h.label})}e(l)},s=MediaStreamTrack;s.getSources(n)})},t}(),ar;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ar||(ar={}));var YU=function(){function t(){this.state=ar.NOT_STARTED,this.onGoingTransactionNewState=ar.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ar.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ar.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ar.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ar.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ar.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ar.UNKNOWN:throw"Transition from unknown is not allowed";case ar.NOT_STARTED:this.failIfNewStateIs(e,[ar.PAUSED]);break;case ar.SCANNING:break;case ar.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,s=r;n<s.length;n++){var i=s[n];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),qU=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ar.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ar.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ar.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ar.PAUSED},t}(),XU=function(){function t(){}return t.create=function(){return new qU(new YU)},t}(),KU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pn=function(t){KU(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Fs),QU=function(){function t(e,r){this.logger=r,this.fps=Pn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?LI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ii(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),Ob=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new DI(this.verbose),this.qrcode=new DU(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=XU.create()}return t.prototype.start=function(e,r,n,s){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;s?l=s:l=this.verbose?this.logger.log:function(){};var u=QU.create(r,this.logger);this.clearElement();var m=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var h=m,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Pn.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var y=this,v=this.stateManagerProxy.startTransition(ar.SCANNING);return new Promise(function(b,S){var C=h?u.videoConstraints:y.createVideoConstraints(e);if(!C){v.cancel(),S("videoConstraints should be defined");return}var I={};(!h||u.aspectRatio)&&(I.aspectRatio=u.aspectRatio);var R={onRenderSurfaceReady:function(A,N){y.setupUi(A,N,u),y.isScanning=!0,y.foreverScan(u,n,l)}};HU.failIfNotSupported().then(function(A){A.create(C).then(function(N){return N.render(i.element,I,R).then(function(O){y.renderedCamera=O,v.execute(),b(null)}).catch(function(O){v.cancel(),S(O)})}).catch(function(N){v.cancel(),S(zl.errorGettingUserMedia(N))})}).catch(function(A){v.cancel(),S(zl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ar.PAUSED),this.showPausedState(),(ii(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(ar.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ar.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var i=document.getElementById(Pn.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),n(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),r.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ii(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var u=l.width,m=l.height,h=document.getElementById(n.elementId),x=h.clientWidth?h.clientWidth:Pn.DEFAULT_WIDTH,y=Math.max(h.clientHeight?h.clientHeight:m,Pn.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(u,m,x,y);if(r){var b=n.createCanvasElement(x,y,"qr-canvas-visible");b.style.display="inline-block",h.appendChild(b);var S=b.getContext("2d");if(!S)throw"Unable to get 2d context from canvas";S.canvas.width=x,S.canvas.height=y,S.drawImage(l,0,0,u,m,v.x,v.y,v.width,v.height)}var C=Pn.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(l.width,v.width),R=Math.max(l.height,v.height),A=I+2*C,N=R+2*C,O=n.createCanvasElement(A,N);h.appendChild(O);var k=O.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=A,k.canvas.height=N,k.drawImage(l,0,0,u,m,C,C,I,R);try{n.qrcode.decodeRobustlyAsync(O).then(function(F){s(Cb.createFromQrcodeResult(F))}).catch(i)}catch(F){i("QR code parse error, error = ".concat(F))}},l.onerror=i,l.onabort=i,l.onstalled=i,l.onsuspend=i,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return GU.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!LI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Re.QR_CODE,Re.AZTEC,Re.CODABAR,Re.CODE_39,Re.CODE_93,Re.CODE_128,Re.DATA_MATRIX,Re.MAXICODE,Re.ITF,Re.EAN_13,Re.EAN_8,Re.PDF_417,Re.RSS_14,Re.RSS_EXPANDED,Re.UPC_A,Re.UPC_E,Re.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],s=0,i=e.formatsToSupport;s<i.length;s++){var l=i[s];RU(l)?n.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ii(e))return!0;if(!ii(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ii(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ii(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var s=this,i=n.qrbox;this.validateQrboxConfig(i);var l=this.toQrdimensions(e,r,i),u=function(h){if(h<Pn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pn.MIN_QR_BOX_SIZE,"px.")},m=function(h){return h>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),h=e),h};u(l.width),u(l.height),l.width=m(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var s=ii(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(e,r,s);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=n.isShadedBoxEnabled()&&i.height<=r,u={x:0,y:0,width:e,height:r},m=l?this.getShadedRegionBounds(e,r,i):u,h=this.createCanvasElement(m.width,m.height),x={willReadFrequently:!0},y=h.getContext("2d",x);y.canvas.width=m.width,y.canvas.height=m.height,this.element.append(h),l&&this.possiblyInsertShadingElement(this.element,e,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=y,this.canvasElement=h},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=zl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,Cb.createFromQrcodeResult(s)),n.possiblyUpdateShaders(!0),!0}).catch(function(s){n.possiblyUpdateShaders(!1);var i=zl.codeParseError(s);return r(i,PI.createFrom(i)),!1})},t.prototype.foreverScan=function(e,r,n){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),l=i.videoWidth/i.clientWidth,u=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*l,h=this.qrRegion.height*u,x=this.qrRegion.x*l,y=this.qrRegion.y*u;this.context.drawImage(i,x,y,m,h,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,r,n)},s.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(b){!b&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(r,n).finally(function(){v()})):v()}).catch(function(b){s.logger.logError("Error happend while scanning context",b),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",s={user:!0,environment:!0},i="exact",l=function(S){if(S in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(S,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var m=Object.keys(e)[0];if(m!==r&&m!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(m===r){var h=e.facingMode;if(typeof h=="string"){if(l(h))return{facingMode:h}}else if(typeof h=="object")if(i in h){if(l(h["".concat(i)]))return{facingMode:{exact:h["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var x=typeof h;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(i in y)return{deviceId:{exact:y["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var v=typeof y;throw"Invalid type of 'deviceId' = ".concat(v)}}}var b=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},t.prototype.computeCanvasDrawConfig=function(e,r,n,s){if(e<=n&&r<=s){var i=(n-e)/2,l=(s-r)/2;return{x:i,y:l,width:e,height:r}}else{var u=e,m=r;return e>n&&(r=n/e*r,e=n),r>s&&(e=s/r*e,r=s),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(m)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Pn.BORDER_SHADER_MATCH_COLOR:Pn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var s=e,i=r,l=document.createElement("canvas");return l.style.width="".concat(s,"px"),l.style.height="".concat(i,"px"),l.style.display="none",l.id=ii(n)?"qr-canvas":n,l},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,s){if(!(r-s.width<1||n-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var l=(r-s.width)/2,u=(n-s.height)/2;if(i.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Pn.SHADED_REGION_ELEMENT_ID),r-s.width<11||n-s.height<11)this.hasBorderShaders=!1;else{var m=5,h=40;this.insertShaderBorders(i,h,m,-m,null,0,!0),this.insertShaderBorders(i,h,m,-m,null,0,!1),this.insertShaderBorders(i,h,m,null,-m,0,!0),this.insertShaderBorders(i,h,m,null,-m,0,!1),this.insertShaderBorders(i,m,h+m,-m,null,-m,!0),this.insertShaderBorders(i,m,h+m,null,-m,-m,!0),this.insertShaderBorders(i,m,h+m,-m,null,-m,!1),this.insertShaderBorders(i,m,h+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(i)}},t.prototype.insertShaderBorders=function(e,r,n,s,i,l,u){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Pn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(r,"px"),m.style.height="".concat(n,"px"),s!==null&&(m.style.top="".concat(s,"px")),i!==null&&(m.style.bottom="".concat(i,"px")),u?m.style.left="".concat(l,"px"):m.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Ky="data:image/svg+xml;base64,",ZU=Ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",JU=Ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Mb=Ky+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ez="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",jb=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),tz=function(){function t(){this.data=jb.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=jb.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),rz=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Eb.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(s);var i=document.createElement("a");i.innerText=Eb.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),nz=function(){function t(e,r){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Mb,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ez,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Mb,this.infoIcon.style.opacity="0.6")},t}(),sz=function(){function t(){var e=this;this.infoDiv=new rz,this.infoIcon=new nz(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),iz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},oz=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},kb=function(){function t(){}return t.hasPermissions=function(){return iz(this,void 0,void 0,function(){var e,r,n,s;return oz(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),r=0,n=e;r<n.length;r++)if(s=n[r],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),oo=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(e){return e===Ws.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Ws.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Fs.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Fs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,s=e;n<s.length;n++){var i=s[n];if(!Fs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},t}(),Hn=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Fi=function(){function t(){}return t.createElement=function(e,r){var n=document.createElement(e);return n.id=r,n.classList.add(Hn.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},t}(),FI=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(x){try{h(n.next(x))}catch(y){l(y)}}function m(x){try{h(n.throw(x))}catch(y){l(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,m)}h((n=n.apply(t,e||[])).next())})},UI=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(x){return m([h,x])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,s=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(x){h=[6,x],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Pb=function(){function t(e,r,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return FI(this,void 0,void 0,function(){var e,r;return UI(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return r=n.sent(),this.propagateFailure(e,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,r){e===r?(this.buttonController.setText(r?_t.torchOffButton():_t.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(e,r){var n=e?_t.torchOnFailedMessage():_t.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),az=function(){function t(e,r){this.onTorchActionFailureCallback=r,this.torchButton=Fi.createElement("button",Hn.TORCH_BUTTON_ID),this.torchController=new Pb(e,this,r)}return t.prototype.render=function(e,r){var n=this;this.torchButton.innerText=_t.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var s=this;this.torchButton.addEventListener("click",function(i){return FI(n,void 0,void 0,function(){return UI(this,function(l){switch(l.label){case 0:return[4,s.torchController.flipState()];case 1:return l.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Hn.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Hn.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Hn.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Hn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Pb(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=_t.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,s){var i=new t(r,s);return i.render(e,n),i},t}(),lz=function(){function t(e,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Fi.createElement("button",Hn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(u){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Fi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(u){if(!(u==null||u.target==null)){var m=u.target;if(!(m.files&&m.files.length===0)){var h=m.files,x=h[0],y=x.name;i.setImageNameToButton(y),n(x)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(u){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(u){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(u){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),u.stopPropagation(),u.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(u){u.stopPropagation(),u.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var m=u.dataTransfer;if(m){var h=m.files;if(!h||h.length===0)return;for(var x=!1,y=0;y<h.length;++y){var v=h.item(y);if(v){var b=/image.*/;if(v.type.match(b)){x=!0;var S=v.name;i.setImageNameToButton(S),n(v),l.innerText=_t.dragAndDropMessage();break}}}x||(l.innerText=_t.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=_t.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var r=20;if(e.length>r){var n=e.substring(0,8),s=e.length,i=e.substring(s-8,s);e="".concat(n,"....").concat(i)}var l=_t.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=l},t.prototype.setInitialValueToButton=function(){var e=_t.fileSelectionChooseImage()+" - "+_t.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){var s=new t(e,r,n);return s},t}(),cz=function(){function t(e){this.selectElement=Fi.createElement("select",Hn.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var s=_t.selectCamera();r.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var i=1,l=0,u=this.cameras;l<u.length;l++){var m=u[l],h=m.id,x=m.label==null?h:m.label;(!x||x==="")&&(x=[_t.anonymousCameraPrefix(),i++].join(" "));var y=document.createElement("option");y.value=h,y.innerText=x,this.options.push(y),this.selectElement.appendChild(y)}r.appendChild(this.selectElement),e.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var r=0,n=this.options;r<n.length;r++){var s=n[r];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),uz=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fi.createElement("input",Hn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,r,n,s){this.rangeInput.min=e.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}(),Dn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Dn||(Dn={}));function dz(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function fz(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var hz=function(){function t(e,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new oo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new DI(this.verbose),this.persistedDataManager=new tz,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(i,l){if(e)e(i,l);else{if(n.lastMatchFound===i)return;n.lastMatchFound=i,n.setHeaderMessage(_t.lastMatch(i),Dn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(i,l){r&&r(i,l)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Ob(this.getScanRegionId(),fz(this.config,this.verbose))},t.prototype.pause=function(e){(ii(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,r=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,s){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(i){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),r(),n()}).catch(function(i){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",i),s(i)}):(e.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Fs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Fs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Fs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Fs.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",e.appendChild(r),oo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),i=this.getDashboardId();s.id=i,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",e.appendChild(r);var n=new sz;n.renderInto(r);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",r.appendChild(s)},t.prototype.createSection=function(e){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",e.appendChild(r)},t.prototype.createCameraListUi=function(e,r,n){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(_t.cameraPermissionRequesting());var i=function(){n||s.createPermissionButton(e,r)};Ob.getCameras().then(function(l){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),l&&l.length>0?(e.removeChild(r),s.renderCameraSelection(l)):(s.setHeaderMessage(_t.noCameraFound(),Dn.STATUS_WARNING),i())}).catch(function(l){s.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),s.setHeaderMessage(l,Dn.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,r){var n=this,s=Fi.createElement("button",this.getCameraPermissionButtonId());s.innerText=_t.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,n.createCameraListUi(e,r,s)}),r.appendChild(s)},t.prototype.createPermissionsUi=function(e,r){var n=this;if(oo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){kb.hasPermissions().then(function(s){s?n.createCameraListUi(e,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r))}).catch(function(s){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r)});return}this.createPermissionButton(e,r)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");e.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=oo.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var s=document.createElement("div");s.style.textAlign="center",n.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,s),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(e){var r=oo.isFileScanType(this.currentScanType),n=this,s=function(i){if(!n.html5Qrcode)throw"html5Qrcode not defined";oo.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(_t.loadingImage()),n.html5Qrcode.scanFileV2(i,!0).then(function(l){n.resetHeaderMessage(),n.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){n.setHeaderMessage(l,Dn.STATUS_WARNING),n.qrCodeErrorCallback(l,PI.createFrom(l))}))};this.fileSelectionUi=lz.create(e,r,s)},t.prototype.renderCameraSelection=function(e){var r=this,n=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var i=uz.create(s,!1),l=function(C){var I=C.zoomFeature();if(I.isSupported()){i.setOnCameraZoomValueChangeCallback(function(A){I.apply(A)});var R=1;r.config.defaultZoomValueIfSupported&&(R=r.config.defaultZoomValueIfSupported),R=OU(R,I.min(),I.max()),i.setValues(I.min(),I.max(),R,I.step()),i.show()}},u=cz.create(s,e),m=document.createElement("span"),h=Fi.createElement("button",Hn.CAMERA_START_BUTTON_ID);h.innerText=_t.scanButtonStartScanningText(),m.appendChild(h);var x=Fi.createElement("button",Hn.CAMERA_STOP_BUTTON_ID);x.innerText=_t.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,m.appendChild(x);var y,v=function(C){if(!C.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(C.torchFeature()):y=az.create(m,C.torchFeature(),{display:"none",marginLeft:"5px"},function(I){n.setHeaderMessage(I,Dn.STATUS_WARNING)}),y.show()};s.appendChild(m);var b=function(C){C||(h.style.display="none"),h.innerText=_t.scanButtonStartScanningText(),h.style.opacity="1",h.disabled=!1,C&&(h.style.display="inline-block")};if(h.addEventListener("click",function(C){h.innerText=_t.scanButtonScanningStarting(),u.disable(),h.disabled=!0,h.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var I=u.getValue();n.persistedDataManager.setLastUsedCameraId(I),n.html5Qrcode.start(I,dz(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(R){x.disabled=!1,x.style.display="inline-block",b(!1);var A=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&v(A),r.config.showZoomSliderIfSupported===!0&&l(A)}).catch(function(R){n.showHideScanTypeSwapLink(!0),u.enable(),b(!0),n.setHeaderMessage(R,Dn.STATUS_WARNING)})}),u.hasSingleItem()&&h.click(),x.addEventListener("click",function(C){if(!n.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,n.html5Qrcode.stop().then(function(I){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),u.enable(),h.disabled=!1,x.style.display="none",h.style.display="inline-block",y&&(y.reset(),y.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(I){x.disabled=!1,n.setHeaderMessage(I,Dn.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var S=n.persistedDataManager.getLastUsedCameraId();u.hasValue(S)?(u.setValue(S),h.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,r=_t.textIfCameraScanSelected(),n=_t.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var l=Fi.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=oo.isCameraScanType(this.currentScanType)?r:n,l.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,oo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),l.innerText=n,e.currentScanType=Ws.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),l.innerText=r,e.currentScanType=Ws.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),i.appendChild(l),s.appendChild(i)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){kb.hasPermissions().then(function(n){if(n){var s=document.getElementById(r.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,r){r||(r=Dn.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",r){case Dn.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Dn.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Dn.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ZU,this.cameraScanImage.alt=_t.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=JU,this.fileScanImage.alt=_t.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Hn.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Hn.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const mz=()=>{var y,v;const[t,e]=E.useState(!1),[r,n]=E.useState(null),s=E.useRef(null),[i,l]=E.useState(!1),u=typeof window<"u"&&(window.isSecureContext||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),m=()=>{if(s.current){try{s.current.clear()}catch{}s.current=null}e(!0),setTimeout(()=>{if(!document.getElementById("qr-reader")){console.error("qr-reader container not found at init time"),we.error("Unable to start scanner. Please try again."),e(!1);return}const S={fps:10,qrbox:{width:250,height:250},rememberLastUsedCamera:!0,aspectRatio:1,showTorchButtonIfSupported:!0,supportedScanTypes:u?[Ws.SCAN_TYPE_CAMERA,Ws.SCAN_TYPE_FILE]:[Ws.SCAN_TYPE_FILE]},C=new hz("qr-reader",S,!1);C.render(async I=>{l(!0);try{let R=I;try{const O=JSON.parse(I);R=O.qr_code||O.qrCode||O.orderId||O.id||I}catch{}const{data:A,error:N}=await ue.from("orders").select(`
                *,
                profiles (full_name),
                restaurants (name)
              `).eq("qr_code",R).single();if(N||!A){console.error("Order fetch error:",N),we.error("Order not found for this QR code");return}n(A),we.success("Order verified successfully!"),h()}catch(R){console.error("Error verifying order:",R),we.error("Failed to verify order")}finally{l(!1)}},I=>{typeof I=="string"&&!I.toLowerCase().includes("not found")&&!I.toLowerCase().includes("no qr code")&&!I.toLowerCase().includes("inactive")&&console.debug("QR scan error:",I)}),s.current=C},0)},h=()=>{s.current&&(s.current.clear(),s.current=null),e(!1)};E.useEffect(()=>()=>{s.current&&(s.current.clear(),s.current=null)},[]);const x=async()=>{if(r)try{const{error:b}=await ue.from("orders").update({status:"completed"}).eq("id",r.id);if(b)throw b;we.success("Order marked as served!"),n(null)}catch(b){console.error("Error updating order:",b),we.error("Failed to update order status")}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Scanner"}),d.jsx("p",{className:"text-muted-foreground",children:"Scan customer booking QR codes"})]}),!t&&!r&&d.jsx($e,{className:"border-border/50 luxury-shadow",children:d.jsxs(Ct,{className:"py-12 text-center space-y-4",children:[d.jsx(Dv,{className:"h-16 w-16 mx-auto text-primary"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Scan"}),d.jsx("p",{className:"text-muted-foreground mb-2",children:"Start the scanner to use your camera or upload a QR code image."}),!u&&d.jsx("p",{className:"text-sm text-yellow-600 mb-2",children:"Live camera requires HTTPS or localhost. On this origin, only image upload will be available."}),d.jsxs(De,{onClick:m,className:"luxury-gradient",size:"lg",children:[d.jsx(Dv,{className:"w-5 h-5 mr-2"}),"Start Scanner"]})]})]})}),t&&d.jsxs($e,{className:"border-border/50 luxury-shadow",children:[d.jsxs(ur,{className:"pb-2",children:[d.jsxs(pr,{className:"flex items-center justify-between gap-3",children:[d.jsx("span",{children:"Scan QR Code"}),d.jsx("span",{className:"text-[0.65rem] font-normal text-muted-foreground",children:"Align customer QR within the frame"})]}),d.jsx(Bi,{className:"mt-1 text-xs text-muted-foreground",children:u?"Choose your camera if available, or upload a QR screenshot. Use landscape for best view.":"On this connection only image upload is available. Use a screenshot/photo of the QR code."})]}),d.jsxs(Ct,{className:"space-y-4 pt-2",children:[d.jsxs("div",{id:"qr-reader",className:`\r
                w-full rounded-2xl border border-border/40 bg-muted/40\r
                px-3 py-4 md:px-5 md:py-6\r
                flex flex-col items-stretch\r
                gap-4\r
              `,children:[d.jsx("style",{children:`
                /* 1. Center content in scan region (including default icon/video) */
                #qr-reader__scan_region {
                  display: flex !important;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  text-align: center;
                  gap: 8px;
                }

                #qr-reader__scan_region img,
                #qr-reader__scan_region svg {
                  margin: 0 auto;
                }

                /* 2. Make camera select large, touch-friendly, and separated */
                #html5-qrcode-select-camera {
                  width: 100% !important;
                  padding: 10px 14px !important;
                  margin: 8px 0 4px 0 !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* 3. Lay out dashboard controls vertically with spacing */
                #qr-reader__dashboard {
                  display: flex;
                  flex-direction: column;
                  align-items: stretch;
                  gap: 8px;
                  padding-top: 4px;
                }

                /* 4. Ensure each button is on its own line, full-width, with space */
                #qr-reader__dashboard .html5-qrcode-element,
                #qr-reader__dashboard button {
                  display: block !important;
                  width: 100% !important;
                  margin: 2px 0 !important;
                  text-align: center !important;
                }

                #qr-reader__dashboard button {
                  padding: 9px 14px !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* Specifically separate the camera stop button from others */
                #html5-qrcode-button-camera-stop {
                  margin-top: 10px !important;
                }

                /* Video aesthetics */
                #qr-reader__scan_region video {
                  border-radius: 18px;
                  max-height: 260px;
                  object-fit: cover;
                }

                @media (min-width: 640px) {
                  #qr-reader__dashboard {
                    max-width: 420px;
                    align-self: center;
                  }
                }
              `}),d.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[d.jsx("div",{className:"text-[0.7rem] font-semibold text-muted-foreground tracking-wide uppercase",children:"Select Camera"}),d.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Choose front or back camera from the dropdown below."})]}),d.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[d.jsx("div",{className:"text-[0.7rem] font-semibold text-foreground",children:"Scan Options"}),d.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Use Start Scanning for live camera or Scan an Image File to upload a QR screenshot."})]})]}),d.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center px-3",children:"If camera buttons or options are hidden, scroll inside the scanner box or rotate your phone."}),d.jsxs(De,{onClick:h,variant:"outline",className:"w-full mt-1 md:mt-2",children:[d.jsx(DE,{className:"w-4 h-4 mr-2"}),"Stop Scanning"]})]})]}),r&&d.jsxs($e,{className:"border-border/50 luxury-shadow",children:[d.jsxs(ur,{children:[d.jsx(pr,{className:"text-xl",children:"Order Details"}),d.jsxs(Bi,{children:["Order ID: ",r.id]})]}),d.jsxs(Ct,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),d.jsx("span",{className:"font-medium",children:((y=r.profiles)==null?void 0:y.full_name)||"Customer"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Restaurant:"}),d.jsx("span",{className:"font-medium",children:(v=r.restaurants)==null?void 0:v.name})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Order Type:"}),d.jsx("span",{className:"font-medium capitalize",children:r.order_type.replace("_"," ")})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Status:"}),d.jsx("span",{className:"font-medium capitalize",children:r.status})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold",children:"Items:"}),d.jsx("ul",{className:"space-y-1",children:r.order_items.map((b,S)=>d.jsxs("li",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[b.quantity,"x ",b.name]}),d.jsxs("span",{children:[(b.price*b.quantity).toLocaleString()," MMK"]})]},S))})]}),d.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[d.jsx("span",{className:"font-semibold",children:"Total:"}),d.jsxs("span",{className:"font-bold text-lg",children:[r.total_amount.toLocaleString()," MMK"]})]}),d.jsxs("div",{className:"flex gap-2 pt-4",children:[d.jsxs(De,{onClick:x,className:"flex-1 luxury-gradient",size:"lg",children:[d.jsx(Mx,{className:"w-5 h-5 mr-2"}),"Mark as Served"]}),d.jsx(De,{onClick:()=>n(null),variant:"outline",className:"flex-1",size:"lg",children:"Scan Another"})]})]})]})]})};var tm="Switch",[pz,gH]=pn(tm),[gz,xz]=pz(tm),zI=E.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:l,disabled:u,value:m="on",onCheckedChange:h,form:x,...y}=t,[v,b]=E.useState(null),S=Je(e,N=>b(N)),C=E.useRef(!1),I=v?x||!!v.closest("form"):!0,[R,A]=yi({prop:s,defaultProp:i??!1,onChange:h,caller:tm});return d.jsxs(gz,{scope:r,checked:R,disabled:u,children:[d.jsx(Le.button,{type:"button",role:"switch","aria-checked":R,"aria-required":l,"data-state":WI(R),"data-disabled":u?"":void 0,disabled:u,value:m,...y,ref:S,onClick:Ae(t.onClick,N=>{A(O=>!O),I&&(C.current=N.isPropagationStopped(),C.current||N.stopPropagation())})}),I&&d.jsx($I,{control:v,bubbles:!C.current,name:n,value:m,checked:R,required:l,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});zI.displayName=tm;var VI="SwitchThumb",HI=E.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=xz(VI,r);return d.jsx(Le.span,{"data-state":WI(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});HI.displayName=VI;var yz="SwitchBubbleInput",$I=E.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const l=E.useRef(null),u=Je(l,i),m=Uy(r),h=Hx(e);return E.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==r&&b){const S=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(S)}},[m,r,n]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:u,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$I.displayName=yz;function WI(t){return t?"checked":"unchecked"}var GI=zI,wz=HI;const YI=E.forwardRef(({className:t,...e},r)=>d.jsx(GI,{className:Te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:d.jsx(wz,{className:Te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));YI.displayName=GI.displayName;const vz=()=>{const{user:t}=gn(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[i,l]=E.useState(null),[u,m]=E.useState(!1),[h,x]=E.useState(null),[y,v]=E.useState({name:"",description:"",price:"",image_url:""});E.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const{data:N,error:O}=await ue.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(O)throw O;l(N.id);const{data:k,error:F}=await ue.from("menu_items").select("*").eq("restaurant_id",N.id).order("created_at",{ascending:!1});if(F)throw F;r(k||[])}catch(N){console.error("Error fetching menu:",N),we.error("Failed to load menu items")}finally{s(!1)}},S=()=>{x(null),v({name:"",description:"",price:"",image_url:""}),m(!0)},C=N=>{x(N.id),v({name:N.name,description:N.description||"",price:N.price.toString(),image_url:N.image_url||""}),m(!0)},I=async N=>{try{const{error:O}=await ue.from("menu_items").delete().eq("id",N);if(O)throw O;r(e.filter(k=>k.id!==N)),we.success("Menu item deleted")}catch(O){console.error("Error deleting item:",O),we.error("Failed to delete menu item")}},R=async()=>{if(!y.name||!y.price||!i){we.error("Please fill in all required fields");return}try{const N={name:y.name,description:y.description||null,price:parseFloat(y.price),image_url:y.image_url||null,restaurant_id:i};if(h){const{error:O}=await ue.from("menu_items").update(N).eq("id",h);if(O)throw O;r(e.map(k=>k.id===h?{...k,...N}:k)),we.success("Menu item updated")}else{const{data:O,error:k}=await ue.from("menu_items").insert([{...N,available:!0}]).select().single();if(k)throw k;r([O,...e]),we.success("Menu item added")}m(!1),v({name:"",description:"",price:"",image_url:""})}catch(N){console.error("Error saving menu item:",N),we.error("Failed to save menu item")}},A=async N=>{const O=e.find(k=>k.id===N);if(O)try{const{error:k}=await ue.from("menu_items").update({available:!O.available}).eq("id",N);if(k)throw k;r(e.map(F=>F.id===N?{...F,available:!F.available}:F)),we.success("Availability updated")}catch(k){console.error("Error updating availability:",k),we.error("Failed to update availability")}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Menu"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your menu items"})]}),d.jsxs(De,{onClick:S,className:"luxury-gradient",children:[d.jsx(ko,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),n?d.jsx("div",{className:"flex justify-center py-12",children:d.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?d.jsx($e,{children:d.jsx(Ct,{className:"py-12 text-center text-muted-foreground",children:"No menu items yet. Add your first item to get started!"})}):d.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(N=>d.jsxs($e,{children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:N.image_url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400",alt:N.name,className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsx(De,{size:"icon",variant:"secondary",onClick:()=>C(N),children:d.jsx(jx,{className:"h-4 w-4"})}),d.jsx(De,{size:"icon",variant:"destructive",onClick:()=>I(N.id),children:d.jsx(T0,{className:"h-4 w-4"})})]})]}),d.jsxs(Ct,{className:"p-4 space-y-2",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold",children:N.name}),N.description&&d.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:N.description})]}),d.jsxs("p",{className:"font-semibold text-primary ml-2",children:[N.price.toLocaleString()," MMK"]})]}),d.jsxs("div",{className:"flex items-center justify-between pt-2",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"Available"}),d.jsx(YI,{checked:N.available,onCheckedChange:()=>A(N.id)})]})]})]},N.id))}),d.jsx(Xs,{open:u,onOpenChange:m,children:d.jsxs(_s,{children:[d.jsx(bi,{children:d.jsxs(_i,{children:[h?"Edit":"Add"," Menu Item"]})}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"name",children:"Name *"}),d.jsx(ot,{id:"name",value:y.name,onChange:N=>v({...y,name:N.target.value}),placeholder:"e.g., Traditional Mohinga"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"price",children:"Price (MMK) *"}),d.jsx(ot,{id:"price",type:"number",value:y.price,onChange:N=>v({...y,price:N.target.value}),placeholder:"5000"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"description",children:"Description"}),d.jsx(ot,{id:"description",value:y.description,onChange:N=>v({...y,description:N.target.value}),placeholder:"Describe the dish..."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"image_url",children:"Image URL"}),d.jsx(ot,{id:"image_url",value:y.image_url,onChange:N=>v({...y,image_url:N.target.value}),placeholder:"https://..."})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[d.jsx(De,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),d.jsxs(De,{onClick:R,className:"luxury-gradient",children:[h?"Update":"Add"," Item"]})]})]})]})})]})},bz=()=>{const{user:t}=gn(),[e,r]=E.useState(!0),[n,s]=E.useState(!1),[i,l]=E.useState(null),[u,m]=E.useState({name:"",address:"",phone:"",description:"",image_url:"",open_hours:""});E.useEffect(()=>{t&&h()},[t]);const h=async()=>{try{const{data:y,error:v}=await ue.from("restaurants").select("*").eq("owner_id",t==null?void 0:t.id).single();if(v)throw v;l(y.id),m({name:y.name,address:y.address,phone:y.phone||"",description:y.description||"",image_url:y.image_url||"",open_hours:y.open_hours||""})}catch(y){console.error("Error fetching restaurant:",y),we.error("Failed to load restaurant data")}finally{r(!1)}},x=async()=>{if(i){s(!0);try{const{error:y}=await ue.from("restaurants").update({name:u.name,address:u.address,phone:u.phone,description:u.description,image_url:u.image_url,open_hours:u.open_hours}).eq("id",i);if(y)throw y;we.success("Restaurant information updated successfully!")}catch(y){console.error("Error updating restaurant:",y),we.error("Failed to update restaurant information")}finally{s(!1)}}};return e?d.jsx("div",{className:"flex justify-center py-12",children:d.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Restaurant Settings"}),d.jsx("p",{className:"text-muted-foreground",children:"Update your restaurant information"})]}),d.jsxs($e,{className:"border-border/50 luxury-shadow",children:[d.jsxs(ur,{children:[d.jsx(pr,{children:"Restaurant Information"}),d.jsx(Bi,{children:"Update your restaurant details and settings"})]}),d.jsxs(Ct,{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"image_url",children:"Cover Photo URL"}),d.jsxs("div",{className:"space-y-2",children:[u.image_url&&d.jsx("div",{className:"relative h-48 bg-muted rounded-lg overflow-hidden",children:d.jsx("img",{src:u.image_url,alt:"Restaurant cover",className:"w-full h-full object-cover"})}),d.jsx(ot,{id:"image_url",value:u.image_url,onChange:y=>m({...u,image_url:y.target.value}),placeholder:"https://..."})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"name",children:"Restaurant Name *"}),d.jsx(ot,{id:"name",value:u.name,onChange:y=>m({...u,name:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"address",children:"Address *"}),d.jsx(ot,{id:"address",value:u.address,onChange:y=>m({...u,address:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"phone",children:"Phone Number *"}),d.jsx(ot,{id:"phone",type:"tel",value:u.phone,onChange:y=>m({...u,phone:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"open_hours",children:"Open Hours"}),d.jsx(ot,{id:"open_hours",value:u.open_hours,onChange:y=>m({...u,open_hours:y.target.value}),placeholder:"9:00 AM - 10:00 PM"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"description",children:"Description"}),d.jsx(Dd,{id:"description",value:u.description,onChange:y=>m({...u,description:y.target.value}),rows:4,placeholder:"Tell customers about your restaurant..."})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs(De,{onClick:x,className:"luxury-gradient",children:[d.jsx(rj,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})},du={title:"",content:"",excerpt:"",is_published:!0,is_pinned:!1,hero_image_url:"",linked_menu_item_ids:[]},_z=()=>{const{user:t}=gn(),[e,r]=E.useState(null),[n,s]=E.useState([]),[i,l]=E.useState([]),[u,m]=E.useState(!0),[h,x]=E.useState(!1),[y,v]=E.useState(null),[b,S]=E.useState(du),[C,I]=E.useState(!1),R=E.useMemo(()=>i.filter(z=>z.image_url),[i]);E.useEffect(()=>{(async()=>{if(!t){m(!1);return}let X=null;try{const{data:H,error:te}=await ue.from("profiles").select("restaurant_id").eq("id",t.id).maybeSingle();!te&&H&&H.restaurant_id&&(X=H.restaurant_id)}catch(H){console.warn("profiles.restaurant_id lookup skipped or failed",H)}let G=X;if(!G)try{const{data:H,error:te}=await ue.from("restaurants").select("id").eq("owner_id",t.id).maybeSingle();!te&&(H!=null&&H.id)&&(G=H.id)}catch(H){console.warn("restaurants.owner_id lookup failed",H)}if(!G){console.warn("No restaurant associated with this owner. Ensure either profiles.restaurant_id or restaurants.owner_id is set."),m(!1);return}r(G),await Promise.all([A(G),N(G)]),m(!1)})()},[t]);const A=async z=>{const{data:X,error:G}=await ue.from("menu_items").select("id, name, image_url, price").eq("restaurant_id",z).order("name",{ascending:!0});if(G){console.error("Error loading menu items",G);return}l(X||[])},N=async z=>{const{data:X,error:G}=await ue.from("blog_posts").select("*").eq("restaurant_id",z).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if(G){console.error("Error loading blog posts",G);return}const H=X||[];if(H.length>0){const te=H.map(ae=>ae.id),{data:J,error:Z}=await ue.from("blog_post_menu_items").select("blog_post_id, menu_item_id").in("blog_post_id",te);if(Z){console.error("Error loading blog_post_menu_items",Z),s(H);return}const K={};(J||[]).forEach(ae=>{K[ae.blog_post_id]||(K[ae.blog_post_id]=[]),K[ae.blog_post_id].push(ae.menu_item_id)});const ne={};i.forEach(ae=>{ne[ae.id]=ae});const pe=H.map(ae=>{const le=K[ae.id]||[];return{...ae,linked_menu_items:le.map(fe=>ne[fe]).filter(Boolean)}});s(pe)}else s([])},O=()=>{S(du),I(!0)},k=z=>{var X;S({id:z.id,title:z.title,content:z.content,excerpt:z.excerpt||"",is_published:z.is_published,is_pinned:z.is_pinned,hero_image_url:z.hero_image_url||"",linked_menu_item_ids:((X=z.linked_menu_items)==null?void 0:X.map(G=>G.id))||[]}),I(!0)},F=async z=>{if(e)try{const{error:X}=await ue.from("blog_posts").update({is_pinned:!z.is_pinned}).eq("id",z.id).eq("restaurant_id",e);if(X)throw X;s(G=>G.map(H=>H.id===z.id?{...H,is_pinned:!H.is_pinned}:H))}catch(X){console.error("Failed to toggle pin",X)}},B=async z=>{if(e){v(z);try{const{error:X}=await ue.from("blog_posts").delete().eq("id",z).eq("restaurant_id",e);if(X)throw X;s(G=>G.filter(H=>H.id!==z))}catch(X){console.error("Failed to delete blog post",X)}finally{v(null)}}},P=async()=>{if(!(!e||!t)&&!(!b.title.trim()||!b.content.trim())){x(!0);try{const z={restaurant_id:e,author_id:t.id,title:b.title.trim(),content:b.content.trim(),excerpt:b.excerpt.trim()?b.excerpt.trim():b.content.trim().slice(0,140),hero_image_url:b.hero_image_url||null,is_published:b.is_published,is_pinned:b.is_pinned};let X=b.id;if(b.id){const{data:G,error:H}=await ue.from("blog_posts").update(z).eq("id",b.id).eq("restaurant_id",e).select("*").single();if(H)throw H;X=G.id,s(te=>te.map(J=>J.id===G.id?{...J,...G}:J))}else{const{data:G,error:H}=await ue.from("blog_posts").insert(z).select("*").single();if(H)throw H;X=G.id,s(te=>[{...G,linked_menu_items:[]},...te])}X&&await j(X,b.linked_menu_item_ids),await N(e),I(!1),S(du)}catch(z){console.error("Failed to save blog post",z)}finally{x(!1)}}},j=async(z,X)=>{const{data:G,error:H}=await ue.from("blog_post_menu_items").select("menu_item_id").eq("blog_post_id",z);H&&console.error("Failed to load existing blog_post_menu_items",H);const te=new Set((G||[]).map(ne=>ne.menu_item_id)),J=new Set(X),Z=X.filter(ne=>!te.has(ne)),K=Array.from(te).filter(ne=>!J.has(ne));if(Z.length>0){const ne=Z.map(ae=>({blog_post_id:z,menu_item_id:ae})),{error:pe}=await ue.from("blog_post_menu_items").insert(ne);pe&&console.error("Failed to insert blog_post_menu_items",pe)}if(K.length>0){const{error:ne}=await ue.from("blog_post_menu_items").delete().eq("blog_post_id",z).in("menu_item_id",K);ne&&console.error("Failed to delete blog_post_menu_items",ne)}},W=z=>{S(X=>({...X,hero_image_url:z.image_url||X.hero_image_url}))},Y=z=>{S(X=>{const G=X.linked_menu_item_ids.includes(z);return{...X,linked_menu_item_ids:G?X.linked_menu_item_ids.filter(H=>H!==z):[...X.linked_menu_item_ids,z]}})};return u?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ed,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading your blog studio..."})]}),d.jsxs($e,{className:"p-4 bg-card/80 border-border/40 animate-pulse",children:[d.jsx("div",{className:"h-3 w-24 bg-muted/70 rounded mb-2"}),d.jsx("div",{className:"h-3 w-40 bg-muted/60 rounded mb-1"}),d.jsx("div",{className:"h-3 w-32 bg-muted/50 rounded"})]})]}):e?d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"inline-flex items-center gap-2",children:[d.jsx(Rx,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-primary/80",children:"Blog & Promotions Studio"})]}),d.jsx("h2",{className:"text-xl font-semibold text-foreground leading-tight",children:"Tell your food story"}),d.jsx("p",{className:"text-[11px] text-muted-foreground max-w-md",children:"Create minimalist, elegant posts to highlight your signature dishes, seasonal menus, and special offers. Customers read these on the Blog tab."})]}),d.jsxs(De,{size:"sm",className:"gap-2 rounded-full bg-primary/90 hover:bg-primary shadow-sm",onClick:O,children:[d.jsx(ko,{className:"w-3 h-3"}),d.jsx("span",{className:"text-[10px] font-medium",children:"New Post"})]})]}),d.jsxs("div",{className:"space-y-3",children:[n.length===0&&d.jsx($e,{className:"p-4 bg-card/80 border-dashed border-border/60",children:d.jsx("p",{className:"text-[11px] text-muted-foreground",children:"You haven't published any stories yet. Create your first post to showcase your restaurant's personality and promotions."})}),n.map(z=>d.jsxs($e,{className:Te("relative overflow-hidden bg-card/90 border-border/40 group","transition-all duration-300 hover:-translate-y-0.5 hover:shadow-[0_16px_40px_rgba(15,23,42,0.16)]"),children:[z.is_pinned&&d.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-amber-400 to-primary/70"}),d.jsxs("div",{className:"p-3.5 space-y-2.5",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"space-y-1.5 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("h3",{className:"text-sm font-semibold text-foreground",children:z.title}),z.is_published?d.jsxs(fn,{className:"h-5 px-2 text-[8px] bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[d.jsx(Mx,{className:"w-3 h-3"}),"Live"]}):d.jsx(fn,{variant:"outline",className:"h-5 px-2 text-[8px] border-muted-foreground/40 text-muted-foreground",children:"Draft"}),z.is_pinned&&d.jsxs(fn,{variant:"outline",className:"h-5 px-2 text-[8px] border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[d.jsx(Fv,{className:"w-3 h-3"}),"Highlight"]})]}),d.jsx("p",{className:"text-[9px] text-muted-foreground line-clamp-2",children:z.excerpt||z.content.slice(0,120)}),d.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-muted-foreground/80",children:[d.jsx(WM,{className:"w-3 h-3"}),d.jsx("span",{children:new Date(z.created_at).toLocaleDateString()}),d.jsx("span",{className:"mx-1",children:""}),d.jsx("span",{children:z.is_published?"Visible in customer Blog":"Not visible to customers"})]})]}),d.jsxs("div",{className:"flex flex-col items-end gap-1",children:[d.jsxs(tp,{children:[d.jsx(rp,{asChild:!0,children:d.jsx("button",{onClick:()=>F(z),className:Te("w-7 h-7 rounded-full border flex items-center justify-center transition-colors",z.is_pinned?"bg-amber-400/10 border-amber-400/60 text-amber-400":"bg-card/80 border-border/60 text-muted-foreground hover:text-primary hover:border-primary/40"),children:z.is_pinned?d.jsx(Fv,{className:"w-3 h-3"}):d.jsx(ej,{className:"w-3 h-3"})})}),d.jsx(Zf,{className:"text-[9px]",children:z.is_pinned?"Unpin from top of customer blog":"Pin as highlight on customer blog"})]}),d.jsxs(tp,{children:[d.jsx(rp,{asChild:!0,children:d.jsx("button",{onClick:()=>k(z),className:"w-7 h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-muted-foreground hover:text-primary hover:border-primary/40 transition-colors",children:d.jsx(jx,{className:"w-3 h-3"})})}),d.jsx(Zf,{className:"text-[9px]",children:"Edit post"})]}),d.jsxs(tp,{children:[d.jsx(rp,{asChild:!0,children:d.jsx("button",{onClick:()=>B(z.id),disabled:y===z.id,className:"w-7 h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-destructive/80 hover:bg-destructive/5 hover:border-destructive/40 transition-colors disabled:opacity-60",children:y===z.id?d.jsx(Uo,{className:"w-3 h-3 animate-spin"}):d.jsx(T0,{className:"w-3 h-3"})})}),d.jsx(Zf,{className:"text-[9px]",children:"Delete post"})]})]})]}),z.linked_menu_items&&z.linked_menu_items.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:z.linked_menu_items.map(X=>d.jsxs("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-primary/5 border border-primary/15 text-[7px] text-primary/80",children:[d.jsx(Bv,{className:"w-2.5 h-2.5"}),d.jsx("span",{className:"truncate max-w-[80px]",children:X.name})]},X.id))}),z.hero_image_url&&d.jsx("div",{className:"mt-1 overflow-hidden rounded-lg border border-border/40 bg-muted/40",children:d.jsx("img",{src:z.hero_image_url,alt:z.title,className:"w-full h-20 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})})]})]},z.id))]}),d.jsx(Xs,{open:C,onOpenChange:z=>{I(z),z||S(du)},children:d.jsxs(_s,{className:"max-w-lg w-full bg-card/95 backdrop-blur-xl border-border/60",children:[d.jsx(bi,{children:d.jsxs(_i,{className:"flex items-center gap-2 text-sm",children:[d.jsx(ed,{className:"w-4 h-4 text-primary"}),b.id?"Edit Blog Post":"Create New Blog Post"]})}),d.jsxs("div",{className:"mt-2 space-y-3 max-h-[70vh] overflow-y-auto pr-1",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Title"}),d.jsx(ot,{value:b.title,onChange:z=>S(X=>({...X,title:z.target.value})),placeholder:"E.g. Weekend Tasting Menu  Limited Seats",className:"h-8 text-[10px] bg-background/70 border-border/50"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Short preview (optional)"}),d.jsx(ot,{value:b.excerpt,onChange:z=>S(X=>({...X,excerpt:z.target.value})),placeholder:"A one-line teaser that appears in the customer blog listing.",className:"h-8 text-[9px] bg-background/70 border-border/40"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Story & details"}),d.jsx(Dd,{value:b.content,onChange:z=>S(X=>({...X,content:z.target.value})),placeholder:"Describe your promotion, new menu, chefs story, or dining experience in a clean, friendly tone...",className:"min-h-[90px] text-[9px] leading-relaxed bg-background/70 border-border/40 resize-y"})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("label",{className:"text-[9px] text-muted-foreground flex items-center gap-1.5",children:[d.jsx(Bv,{className:"w-3 h-3 text-primary/80"}),"Hero image (from your menu)"]}),b.hero_image_url&&d.jsx("button",{onClick:()=>S(z=>({...z,hero_image_url:""})),className:"text-[8px] text-muted-foreground hover:text-destructive transition-colors",children:"Clear"})]}),b.hero_image_url&&d.jsx("div",{className:"overflow-hidden rounded-lg border border-primary/25 bg-muted/40 mb-1.5",children:d.jsx("img",{src:b.hero_image_url,alt:"Selected hero",className:"w-full h-20 object-cover"})}),d.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:[R.length===0&&d.jsx("p",{className:"text-[8px] text-muted-foreground",children:"Add images to your menu items to see quick hero suggestions here."}),R.map(z=>d.jsxs("button",{type:"button",onClick:()=>W(z),className:Te("relative border rounded-md overflow-hidden","border-border/40 hover:border-primary/50 transition-colors","w-16 h-10 bg-muted/40"),children:[z.image_url?d.jsx("img",{src:z.image_url,alt:z.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-[7px] text-muted-foreground px-1",children:z.name}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/50 to-transparent",children:d.jsx("span",{className:"block text-[6px] text-white px-1 truncate",children:z.name})})]},z.id))]})]}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsxs("label",{className:"text-[9px] text-muted-foreground flex items-center gap-1.5",children:[d.jsx(KM,{className:"w-3 h-3 text-primary/80"}),"Attach featured menu items (optional)"]}),d.jsxs("div",{className:"flex flex-wrap gap-1 max-h-16 overflow-y-auto",children:[i.length===0&&d.jsx("p",{className:"text-[8px] text-muted-foreground",children:"No menu items found. Create menu items first to link them here."}),i.map(z=>{const X=b.linked_menu_item_ids.includes(z.id);return d.jsxs("button",{type:"button",onClick:()=>Y(z.id),className:Te("px-1.5 py-0.5 rounded-full border text-[7px] flex items-center gap-1",X?"bg-primary/10 border-primary/50 text-primary":"bg-background/60 border-border/40 text-muted-foreground hover:text-primary hover:border-primary/40"),children:[z.image_url&&d.jsx("span",{className:"w-3 h-3 rounded-full bg-cover bg-center",style:{backgroundImage:`url(${z.image_url})`}}),d.jsx("span",{className:"truncate max-w-[80px]",children:z.name})]},z.id)})]})]}),d.jsxs("div",{className:"flex items-center justify-between gap-4 pt-1",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("label",{className:"flex items-center gap-1.5 text-[8px] text-muted-foreground",children:[d.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:b.is_published,onChange:z=>S(X=>({...X,is_published:z.target.checked}))}),d.jsx("span",{children:"Publish to customer Blog"})]})}),d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("label",{className:"flex items-center gap-1.5 text-[8px] text-muted-foreground",children:[d.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:b.is_pinned,onChange:z=>S(X=>({...X,is_pinned:z.target.checked}))}),d.jsx("span",{children:"Mark as highlight"})]})})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx(De,{type:"button",variant:"outline",size:"sm",className:"h-7 px-3 text-[9px]",onClick:()=>{I(!1),S(du)},disabled:h,children:"Cancel"}),d.jsxs(De,{type:"button",size:"sm",className:"h-7 px-3 text-[9px] rounded-full bg-primary/90 hover:bg-primary shadow-sm inline-flex items-center gap-1.5",onClick:P,disabled:h||!b.title.trim()||!b.content.trim(),children:[h&&d.jsx(Uo,{className:"w-3 h-3 animate-spin"}),b.id?"Save changes":"Publish post"]})]})]})]})})]}):d.jsx($e,{className:"p-4 bg-card/80 border-dashed border-border/50",children:d.jsx("p",{className:"text-xs text-muted-foreground",children:"No restaurant is associated with this account yet. Once your restaurant profile is connected, you'll be able to publish elegant blog posts and promotions here."})})},Cz=()=>{const t=new Audio("/sound/notification.mp3");return t.preload="auto",t};function Ez(t={}){const{user:e}=gn(),[r,n]=E.useState(null),[s,i]=E.useState([]),[l,u]=E.useState(!0),[m,h]=E.useState(!1),x=t.limit??50,y=t.enableSound??!0,v=E.useCallback(()=>{if(y)try{const I=Cz();(()=>{I.currentTime=0,I.play().catch(()=>{})})()}catch{}},[y]);E.useEffect(()=>{(async()=>{if(!e){n(null),i([]),u(!1);return}u(!0);const{data:R,error:A}=await ue.from("restaurants").select("id").eq("owner_id",e.id).single();if(A||!R){console.error("Failed to resolve restaurant for owner:",A),n(null),i([]),u(!1);return}n(R.id),u(!1)})()},[e]),E.useEffect(()=>{(async()=>{if(!r||m)return;u(!0);const{data:R,error:A}=await ue.from("order_notifications").select(`
          id,
          order_id,
          restaurant_id,
          customer_id,
          title,
          message,
          status,
          created_at,
          orders!inner (
            total_amount,
            status,
            customer_id
          ),
          profiles!left (
            full_name
          )
        `).eq("restaurant_id",r).order("created_at",{ascending:!1}).limit(x);if(A)console.error("Error fetching order_notifications:",A),i([]);else{const N=(R||[]).map(O=>{const k=Array.isArray(O.orders)?O.orders[0]:O.orders||{},F=Array.isArray(O.profiles)?O.profiles[0]:O.profiles||{};return{id:O.id,order_id:O.order_id,restaurant_id:O.restaurant_id,customer_id:O.customer_id,title:O.title,message:O.message,status:O.status,created_at:O.created_at,customer_name:(F==null?void 0:F.full_name)??null,total_amount:(k==null?void 0:k.total_amount)??null,order_status:(k==null?void 0:k.status)??null}});i(N)}h(!0),u(!1)})()},[r,m,x]),E.useEffect(()=>{if(!r)return;const I=ue.channel(`order-notifications-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"order_notifications",filter:`restaurant_id=eq.${r}`},async R=>{const A=R.new,{data:N}=await ue.from("orders").select("total_amount, status, customer_id").eq("id",A.order_id).single();let O=null;if(N!=null&&N.customer_id){const{data:F}=await ue.from("profiles").select("full_name").eq("id",N.customer_id).single();O=(F==null?void 0:F.full_name)??null}const k={id:A.id,order_id:A.order_id,restaurant_id:A.restaurant_id,customer_id:A.customer_id,title:A.title,message:A.message,status:A.status,created_at:A.created_at,customer_name:O,total_amount:(N==null?void 0:N.total_amount)??null,order_status:(N==null?void 0:N.status)??null};i(F=>F.some(B=>B.id===k.id)?F:[k,...F].slice(0,x)),v()}).subscribe(R=>{R==="SUBSCRIBED"&&console.log(` Subscribed to realtime order_notifications for restaurant ${r}`)});return()=>{ue.removeChannel(I)}},[r,x,v]);const b=s.filter(I=>I.status==="unread").length,S=E.useCallback(async()=>{if(!r||s.length===0)return;const I=s.filter(A=>A.status==="unread").map(A=>A.id);if(I.length===0)return;const{error:R}=await ue.from("order_notifications").update({status:"read"}).in("id",I);if(R){console.error("Failed to mark notifications as read:",R);return}i(A=>A.map(N=>I.includes(N.id)?{...N,status:"read"}:N))},[r,s]),C=E.useCallback(async I=>{if(!I)return;const{error:R}=await ue.from("order_notifications").update({status:"read"}).eq("id",I);if(R){console.error("Failed to mark notification as read:",R);return}i(A=>A.map(N=>N.id===I?{...N,status:"read"}:N))},[]);return{restaurantId:r,notifications:s,unreadCount:b,loading:l,markAllAsRead:S,markAsRead:C}}var Tg=["Enter"," "],Sz=["ArrowDown","PageUp","Home"],qI=["ArrowUp","PageDown","End"],Az=[...Sz,...qI],Nz={ltr:[...Tg,"ArrowRight"],rtl:[...Tg,"ArrowLeft"]},Tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ld="Menu",[wd,Iz,Rz]=_0(Ld),[tl,XI]=pn(Ld,[Rz,Lc,zc]),rm=Lc(),KI=zc(),[Oz,rl]=tl(Ld),[Mz,Bd]=tl(Ld),QI=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:l=!0}=t,u=rm(e),[m,h]=E.useState(null),x=E.useRef(!1),y=cr(i),v=Uc(s);return E.useEffect(()=>{const b=()=>{x.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>x.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),d.jsx(Gx,{...u,children:d.jsx(Oz,{scope:e,open:r,onOpenChange:y,content:m,onContentChange:h,children:d.jsx(Mz,{scope:e,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:x,dir:v,modal:l,children:n})})})};QI.displayName=Ld;var jz="MenuAnchor",Qy=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=rm(r);return d.jsx(Yx,{...s,...n,ref:e})});Qy.displayName=jz;var Zy="MenuPortal",[kz,ZI]=tl(Zy,{forceMount:void 0}),JI=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=rl(Zy,e);return d.jsx(kz,{scope:e,forceMount:r,children:d.jsx(tn,{present:r||i.open,children:d.jsx(Td,{asChild:!0,container:s,children:n})})})};JI.displayName=Zy;var ws="MenuContent",[Pz,Jy]=tl(ws),e4=E.forwardRef((t,e)=>{const r=ZI(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=rl(ws,t.__scopeMenu),l=Bd(ws,t.__scopeMenu);return d.jsx(wd.Provider,{scope:t.__scopeMenu,children:d.jsx(tn,{present:n||i.open,children:d.jsx(wd.Slot,{scope:t.__scopeMenu,children:l.modal?d.jsx(Dz,{...s,ref:e}):d.jsx(Lz,{...s,ref:e})})})})}),Dz=E.forwardRef((t,e)=>{const r=rl(ws,t.__scopeMenu),n=E.useRef(null),s=Je(e,n);return E.useEffect(()=>{const i=n.current;if(i)return Dy(i)},[]),d.jsx(ew,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ae(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Lz=E.forwardRef((t,e)=>{const r=rl(ws,t.__scopeMenu);return d.jsx(ew,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Bz=za("MenuContent.ScrollLock"),ew=E.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:m,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,disableOutsideScroll:S,...C}=t,I=rl(ws,r),R=Bd(ws,r),A=rm(r),N=KI(r),O=Iz(r),[k,F]=E.useState(null),B=E.useRef(null),P=Je(e,B,I.onContentChange),j=E.useRef(0),W=E.useRef(""),Y=E.useRef(0),z=E.useRef(null),X=E.useRef("right"),G=E.useRef(0),H=S?Y0:E.Fragment,te=S?{as:Bz,allowPinchZoom:!0}:void 0,J=K=>{var be,ke;const ne=W.current+K,pe=O().filter(Xe=>!Xe.disabled),ae=document.activeElement,le=(be=pe.find(Xe=>Xe.ref.current===ae))==null?void 0:be.textValue,fe=pe.map(Xe=>Xe.textValue),ze=Kz(fe,ne,le),ve=(ke=pe.find(Xe=>Xe.textValue===ze))==null?void 0:ke.ref.current;(function Xe(oe){W.current=oe,window.clearTimeout(j.current),oe!==""&&(j.current=window.setTimeout(()=>Xe(""),1e3))})(ne),ve&&setTimeout(()=>ve.focus())};E.useEffect(()=>()=>window.clearTimeout(j.current),[]),Py();const Z=E.useCallback(K=>{var pe,ae;return X.current===((pe=z.current)==null?void 0:pe.side)&&Zz(K,(ae=z.current)==null?void 0:ae.area)},[]);return d.jsx(Pz,{scope:r,searchRef:W,onItemEnter:E.useCallback(K=>{Z(K)&&K.preventDefault()},[Z]),onItemLeave:E.useCallback(K=>{var ne;Z(K)||((ne=B.current)==null||ne.focus(),F(null))},[Z]),onTriggerLeave:E.useCallback(K=>{Z(K)&&K.preventDefault()},[Z]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:E.useCallback(K=>{z.current=K},[]),children:d.jsx(H,{...te,children:d.jsx(W0,{asChild:!0,trapped:s,onMountAutoFocus:Ae(i,K=>{var ne;K.preventDefault(),(ne=B.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:d.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,children:d.jsx(Oy,{asChild:!0,...N,dir:R.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:F,onEntryFocus:Ae(m,K=>{R.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(qx,{role:"menu","aria-orientation":"vertical","data-state":g4(I.open),"data-radix-menu-content":"",dir:R.dir,...A,...C,ref:P,style:{outline:"none",...C.style},onKeyDown:Ae(C.onKeyDown,K=>{const pe=K.target.closest("[data-radix-menu-content]")===K.currentTarget,ae=K.ctrlKey||K.altKey||K.metaKey,le=K.key.length===1;pe&&(K.key==="Tab"&&K.preventDefault(),!ae&&le&&J(K.key));const fe=B.current;if(K.target!==fe||!Az.includes(K.key))return;K.preventDefault();const ve=O().filter(be=>!be.disabled).map(be=>be.ref.current);qI.includes(K.key)&&ve.reverse(),qz(ve)}),onBlur:Ae(t.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(j.current),W.current="")}),onPointerMove:Ae(t.onPointerMove,vd(K=>{const ne=K.target,pe=G.current!==K.clientX;if(K.currentTarget.contains(ne)&&pe){const ae=K.clientX>G.current?"right":"left";X.current=ae,G.current=K.clientX}}))})})})})})})});e4.displayName=ws;var Fz="MenuGroup",tw=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return d.jsx(Le.div,{role:"group",...n,ref:e})});tw.displayName=Fz;var Uz="MenuLabel",t4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return d.jsx(Le.div,{...n,ref:e})});t4.displayName=Uz;var n0="MenuItem",Db="menu.itemSelect",nm=E.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=E.useRef(null),l=Bd(n0,t.__scopeMenu),u=Jy(n0,t.__scopeMenu),m=Je(e,i),h=E.useRef(!1),x=()=>{const y=i.current;if(!r&&y){const v=new CustomEvent(Db,{bubbles:!0,cancelable:!0});y.addEventListener(Db,b=>n==null?void 0:n(b),{once:!0}),Ax(y,v),v.defaultPrevented?h.current=!1:l.onClose()}};return d.jsx(r4,{...s,ref:m,disabled:r,onClick:Ae(t.onClick,x),onPointerDown:y=>{var v;(v=t.onPointerDown)==null||v.call(t,y),h.current=!0},onPointerUp:Ae(t.onPointerUp,y=>{var v;h.current||(v=y.currentTarget)==null||v.click()}),onKeyDown:Ae(t.onKeyDown,y=>{const v=u.searchRef.current!=="";r||v&&y.key===" "||Tg.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});nm.displayName=n0;var r4=E.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,l=Jy(n0,r),u=KI(r),m=E.useRef(null),h=Je(e,m),[x,y]=E.useState(!1),[v,b]=E.useState("");return E.useEffect(()=>{const S=m.current;S&&b((S.textContent??"").trim())},[i.children]),d.jsx(wd.ItemSlot,{scope:r,disabled:n,textValue:s??v,children:d.jsx(My,{asChild:!0,...u,focusable:!n,children:d.jsx(Le.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:h,onPointerMove:Ae(t.onPointerMove,vd(S=>{n?l.onItemLeave(S):(l.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(t.onPointerLeave,vd(S=>l.onItemLeave(S))),onFocus:Ae(t.onFocus,()=>y(!0)),onBlur:Ae(t.onBlur,()=>y(!1))})})})}),zz="MenuCheckboxItem",n4=E.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return d.jsx(l4,{scope:t.__scopeMenu,checked:r,children:d.jsx(nm,{role:"menuitemcheckbox","aria-checked":s0(r)?"mixed":r,...s,ref:e,"data-state":nw(r),onSelect:Ae(s.onSelect,()=>n==null?void 0:n(s0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});n4.displayName=zz;var s4="MenuRadioGroup",[Vz,Hz]=tl(s4,{value:void 0,onValueChange:()=>{}}),i4=E.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=cr(n);return d.jsx(Vz,{scope:t.__scopeMenu,value:r,onValueChange:i,children:d.jsx(tw,{...s,ref:e})})});i4.displayName=s4;var o4="MenuRadioItem",a4=E.forwardRef((t,e)=>{const{value:r,...n}=t,s=Hz(o4,t.__scopeMenu),i=r===s.value;return d.jsx(l4,{scope:t.__scopeMenu,checked:i,children:d.jsx(nm,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":nw(i),onSelect:Ae(n.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,r)},{checkForDefaultPrevented:!1})})})});a4.displayName=o4;var rw="MenuItemIndicator",[l4,$z]=tl(rw,{checked:!1}),c4=E.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=$z(rw,r);return d.jsx(tn,{present:n||s0(i.checked)||i.checked===!0,children:d.jsx(Le.span,{...s,ref:e,"data-state":nw(i.checked)})})});c4.displayName=rw;var Wz="MenuSeparator",u4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return d.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});u4.displayName=Wz;var Gz="MenuArrow",d4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=rm(r);return d.jsx(Xx,{...s,...n,ref:e})});d4.displayName=Gz;var Yz="MenuSub",[xH,f4]=tl(Yz),vu="MenuSubTrigger",h4=E.forwardRef((t,e)=>{const r=rl(vu,t.__scopeMenu),n=Bd(vu,t.__scopeMenu),s=f4(vu,t.__scopeMenu),i=Jy(vu,t.__scopeMenu),l=E.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:m}=i,h={__scopeMenu:t.__scopeMenu},x=E.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return E.useEffect(()=>x,[x]),E.useEffect(()=>{const y=u.current;return()=>{window.clearTimeout(y),m(null)}},[u,m]),d.jsx(Qy,{asChild:!0,...h,children:d.jsx(r4,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":g4(r.open),...t,ref:b0(e,s.onTriggerChange),onClick:y=>{var v;(v=t.onClick)==null||v.call(t,y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ae(t.onPointerMove,vd(y=>{i.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:Ae(t.onPointerLeave,vd(y=>{var b,S;x();const v=(b=r.content)==null?void 0:b.getBoundingClientRect();if(v){const C=(S=r.content)==null?void 0:S.dataset.side,I=C==="right",R=I?-5:5,A=v[I?"left":"right"],N=v[I?"right":"left"];i.onPointerGraceIntentChange({area:[{x:y.clientX+R,y:y.clientY},{x:A,y:v.top},{x:N,y:v.top},{x:N,y:v.bottom},{x:A,y:v.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(y),y.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(t.onKeyDown,y=>{var b;const v=i.searchRef.current!=="";t.disabled||v&&y.key===" "||Nz[n.dir].includes(y.key)&&(r.onOpenChange(!0),(b=r.content)==null||b.focus(),y.preventDefault())})})})});h4.displayName=vu;var m4="MenuSubContent",p4=E.forwardRef((t,e)=>{const r=ZI(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=rl(ws,t.__scopeMenu),l=Bd(ws,t.__scopeMenu),u=f4(m4,t.__scopeMenu),m=E.useRef(null),h=Je(e,m);return d.jsx(wd.Provider,{scope:t.__scopeMenu,children:d.jsx(tn,{present:n||i.open,children:d.jsx(wd.Slot,{scope:t.__scopeMenu,children:d.jsx(ew,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var y;l.isUsingKeyboardRef.current&&((y=m.current)==null||y.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Ae(t.onFocusOutside,x=>{x.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ae(t.onEscapeKeyDown,x=>{l.onClose(),x.preventDefault()}),onKeyDown:Ae(t.onKeyDown,x=>{var b;const y=x.currentTarget.contains(x.target),v=Tz[l.dir].includes(x.key);y&&v&&(i.onOpenChange(!1),(b=u.trigger)==null||b.focus(),x.preventDefault())})})})})})});p4.displayName=m4;function g4(t){return t?"open":"closed"}function s0(t){return t==="indeterminate"}function nw(t){return s0(t)?"indeterminate":t?"checked":"unchecked"}function qz(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function Xz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function Kz(t,e,r){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let l=Xz(t,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==r));const m=l.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return m!==r?m:void 0}function Qz(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const u=e[i],m=e[l],h=u.x,x=u.y,y=m.x,v=m.y;x>n!=v>n&&r<(y-h)*(n-x)/(v-x)+h&&(s=!s)}return s}function Zz(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return Qz(r,e)}function vd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Jz=QI,eV=Qy,tV=JI,rV=e4,nV=tw,sV=t4,iV=nm,oV=n4,aV=i4,lV=a4,cV=c4,uV=u4,dV=d4,fV=h4,hV=p4,sm="DropdownMenu",[mV,yH]=pn(sm,[XI]),xn=XI(),[pV,x4]=mV(sm),y4=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:l,modal:u=!0}=t,m=xn(e),h=E.useRef(null),[x,y]=yi({prop:s,defaultProp:i??!1,onChange:l,caller:sm});return d.jsx(pV,{scope:e,triggerId:$s(),triggerRef:h,contentId:$s(),open:x,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(v=>!v),[y]),modal:u,children:d.jsx(Jz,{...m,open:x,onOpenChange:y,dir:n,modal:u,children:r})})};y4.displayName=sm;var w4="DropdownMenuTrigger",v4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=x4(w4,r),l=xn(r);return d.jsx(eV,{asChild:!0,...l,children:d.jsx(Le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:b0(e,i.triggerRef),onPointerDown:Ae(t.onPointerDown,u=>{!n&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:Ae(t.onKeyDown,u=>{n||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});v4.displayName=w4;var gV="DropdownMenuPortal",b4=t=>{const{__scopeDropdownMenu:e,...r}=t,n=xn(e);return d.jsx(tV,{...n,...r})};b4.displayName=gV;var _4="DropdownMenuContent",C4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=x4(_4,r),i=xn(r),l=E.useRef(!1);return d.jsx(rV,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:Ae(t.onCloseAutoFocus,u=>{var m;l.current||(m=s.triggerRef.current)==null||m.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Ae(t.onInteractOutside,u=>{const m=u.detail.originalEvent,h=m.button===0&&m.ctrlKey===!0,x=m.button===2||h;(!s.modal||x)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C4.displayName=_4;var xV="DropdownMenuGroup",yV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(nV,{...s,...n,ref:e})});yV.displayName=xV;var wV="DropdownMenuLabel",E4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(sV,{...s,...n,ref:e})});E4.displayName=wV;var vV="DropdownMenuItem",S4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(iV,{...s,...n,ref:e})});S4.displayName=vV;var bV="DropdownMenuCheckboxItem",A4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(oV,{...s,...n,ref:e})});A4.displayName=bV;var _V="DropdownMenuRadioGroup",CV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(aV,{...s,...n,ref:e})});CV.displayName=_V;var EV="DropdownMenuRadioItem",N4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(lV,{...s,...n,ref:e})});N4.displayName=EV;var SV="DropdownMenuItemIndicator",T4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(cV,{...s,...n,ref:e})});T4.displayName=SV;var AV="DropdownMenuSeparator",I4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(uV,{...s,...n,ref:e})});I4.displayName=AV;var NV="DropdownMenuArrow",TV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(dV,{...s,...n,ref:e})});TV.displayName=NV;var IV="DropdownMenuSubTrigger",R4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(fV,{...s,...n,ref:e})});R4.displayName=IV;var RV="DropdownMenuSubContent",O4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return d.jsx(hV,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O4.displayName=RV;var OV=y4,MV=v4,jV=b4,M4=C4,j4=E4,k4=S4,P4=A4,D4=N4,L4=T4,B4=I4,F4=R4,U4=O4;const kV=OV,PV=MV,DV=E.forwardRef(({className:t,inset:e,children:r,...n},s)=>d.jsxs(F4,{ref:s,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,d.jsx(PE,{className:"ml-auto h-4 w-4"})]}));DV.displayName=F4.displayName;const LV=E.forwardRef(({className:t,...e},r)=>d.jsx(U4,{ref:r,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));LV.displayName=U4.displayName;const z4=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>d.jsx(jV,{children:d.jsx(M4,{ref:n,sideOffset:e,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));z4.displayName=M4.displayName;const V4=E.forwardRef(({className:t,inset:e,...r},n)=>d.jsx(k4,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));V4.displayName=k4.displayName;const BV=E.forwardRef(({className:t,children:e,checked:r,...n},s)=>d.jsxs(P4,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(L4,{children:d.jsx(kE,{className:"h-4 w-4"})})}),e]}));BV.displayName=P4.displayName;const FV=E.forwardRef(({className:t,children:e,...r},n)=>d.jsxs(D4,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(L4,{children:d.jsx(LE,{className:"h-2 w-2 fill-current"})})}),e]}));FV.displayName=D4.displayName;const H4=E.forwardRef(({className:t,inset:e,...r},n)=>d.jsx(j4,{ref:n,className:Te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));H4.displayName=j4.displayName;const $4=E.forwardRef(({className:t,...e},r)=>d.jsx(B4,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",t),...e}));$4.displayName=B4.displayName;const UV=()=>{const{signOut:t}=gn(),e=rn(),[r,n]=E.useState("orders"),{restaurantId:s,notifications:i,unreadCount:l,loading:u,markAllAsRead:m,markAsRead:h}=Ez({limit:50,enableSound:!0}),[x,y]=E.useState(null),[v,b]=E.useState(null),[S,C]=E.useState(!1),I=async()=>{await t(),e("/auth")},R=async A=>{if(A!=null&&A.order_id){y(A.order_id),b(null),C(!0),A.id&&h(A.id);try{const{supabase:N}=await Ho(async()=>{const{supabase:P}=await Promise.resolve().then(()=>H2);return{supabase:P}},void 0),{data:O,error:k}=await N.from("orders").select(`
          id,
          order_items,
          total_amount,
          status,
          created_at,
          order_type,
          customer_id
        `).eq("id",A.order_id).single();if(k||!O){console.error("Failed to load order detail for notification:",k);return}let F=null,B=null;if(O.customer_id){const{data:P,error:j}=await N.rpc("get_order_customers",{customer_ids:[O.customer_id]});if(j)console.error("Failed to load customer details for modal:",j);else if(P&&P.length>0){const W=P[0];F=W.full_name&&String(W.full_name).trim()||null,B=W.phone&&String(W.phone).trim()||null}}!F&&A.customer_name&&typeof A.customer_name=="string"&&A.customer_name.trim()&&(F=A.customer_name.trim()),b({...O,customer_display_name:F,customer_display_phone:B})}catch(N){console.error("Error loading order detail module:",N)}}};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background pb-20",children:[d.jsx("header",{className:"border-b border-border/50 bg-card/80 backdrop-blur-xl sticky top-0 z-40",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full luxury-gradient flex items-center justify-center",children:d.jsx(kx,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Restaurant Dashboard"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage your restaurant",s?"  Live order notifications enabled":""]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs(kV,{children:[d.jsx(PV,{asChild:!0,children:d.jsxs("button",{type:"button",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-border bg-card/70 hover:bg-primary/5 transition-colors",children:[d.jsx(jE,{className:"w-5 h-5 text-foreground"}),l>0&&d.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 rounded-full bg-red-500 text-[10px] font-semibold text-white flex items-center justify-center",children:l>99?"99+":l})]})}),d.jsxs(z4,{align:"end",className:"w-[320px] max-h-[420px] p-0 overflow-hidden",children:[d.jsxs(H4,{className:"flex items-center justify-between px-3 py-2",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-sm font-semibold",children:"Order Notifications"}),d.jsx("span",{className:"text-[10px] text-muted-foreground",children:u?"Loading...":i.length===0?"No notifications yet":`${l} unread  ${i.length} total`})]}),l>0&&d.jsx("button",{onClick:A=>{A.stopPropagation(),m()},className:"text-[10px] text-primary hover:underline",children:"Mark all read"})]}),d.jsx($4,{}),d.jsx(Gy,{className:"max-h-[340px]",children:d.jsx("div",{className:"max-h-[340px] overflow-y-auto no-scrollbar",children:i.length===0?d.jsx("div",{className:"px-3 py-6 text-center text-[10px] text-muted-foreground",children:"You will see new orders here in real time."}):i.map(A=>{const N=A.message&&A.message.trim().length>0?A.message:A.customer_name&&A.total_amount?`${A.customer_name} placed an order of ${Number(A.total_amount).toLocaleString()} MMK`:"New order received";return d.jsxs(V4,{onClick:()=>R(A),className:`
                              w-full px-3 py-2.5 flex items-start gap-2
                              cursor-pointer transition-colors
                              ${A.status==="unread"?"bg-primary/5 hover:bg-primary/10":"hover:bg-accent/40"}
                            `,children:[d.jsx("div",{className:"mt-1 w-2 h-2 flex-shrink-0",children:A.status==="unread"?d.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):d.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:d.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[d.jsx("div",{className:`
                                  text-[9px] text-left
                                  ${A.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}
                                `,children:N}),d.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const O=new Date(A.created_at),k=String(O.getDate()).padStart(2,"0"),F=String(O.getMonth()+1).padStart(2,"0"),B=O.getFullYear();let P=O.getHours();const j=String(O.getMinutes()).padStart(2,"0"),W=P>=12?"PM":"AM";return P=P%12||12,`${k}/${F}/${B} ${P}:${j} ${W}`})()})]})]},A.id)})})})]})]}),d.jsxs(De,{variant:"outline",size:"sm",onClick:I,className:"gap-2",children:[d.jsx(N0,{className:"w-4 h-4"}),"Logout"]})]})]})}),d.jsxs("main",{className:"container mx-auto px-4 py-6",children:[r==="orders"&&d.jsx(IU,{}),r==="scanner"&&d.jsx(mz,{}),r==="menu"&&d.jsx(vz,{}),r==="blog"&&d.jsx(_z,{}),r==="settings"&&d.jsx(bz,{}),d.jsx(Xs,{open:S,onOpenChange:C,children:d.jsxs(_s,{className:"max-w-md",children:[d.jsxs(bi,{children:[d.jsx(_i,{children:"Order Details"}),d.jsx(XT,{children:"View details for this order from your notifications."})]}),v?d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Order ID"}),d.jsx("span",{className:"font-mono text-xs",children:String(v.id).substring(0,8)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Customer"}),d.jsx("span",{children:(()=>{const A=v.customer_display_name&&String(v.customer_display_name).trim()||null,N=v.customer_display_phone&&String(v.customer_display_phone).trim()||null;return A&&N?`${A}  ${N}`:A||N||"Customer"})()})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Total Amount"}),d.jsxs("span",{className:"font-semibold",children:[Number(v.total_amount||0).toLocaleString()," MMK"]})]}),d.jsxs("div",{className:"flex justify-between items-center gap-3",children:[d.jsx("span",{className:"font-medium",children:"Status"}),d.jsxs("select",{className:"text-xs px-2 py-1 border border-border rounded-md bg-background capitalize",value:v.status||"paid",onChange:async A=>{const N=A.target.value;try{const{supabase:O}=await Ho(async()=>{const{supabase:F}=await Promise.resolve().then(()=>H2);return{supabase:F}},void 0),{error:k}=await O.from("orders").update({status:N}).eq("id",v.id);if(k){console.error("Failed to update order status from modal:",k);return}b(F=>F&&{...F,status:N}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:v.id,status:N}}))}catch(O){console.error("Error updating order status from modal:",O)}},children:[d.jsx("option",{value:"paid",children:"Paid"}),d.jsx("option",{value:"preparing",children:"Preparing"}),d.jsx("option",{value:"ready",children:"Ready"}),d.jsx("option",{value:"served",children:"Served"}),d.jsx("option",{value:"completed",children:"Completed"}),d.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Type"}),d.jsx("span",{className:"capitalize",children:v.order_type||"dine_in"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Placed At"}),d.jsx("div",{className:"text-xs text-muted-foreground",children:v.created_at?(()=>{const A=new Date(v.created_at),N=String(A.getDate()).padStart(2,"0"),O=String(A.getMonth()+1).padStart(2,"0"),k=A.getFullYear();let F=A.getHours();const B=String(A.getMinutes()).padStart(2,"0"),P=F>=12?"PM":"AM";return F=F%12||12,`${N}/${O}/${k} - ${F}:${B} ${P}`})():""})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Items"}),d.jsx("ul",{className:"mt-1 space-y-0.5",children:(v.order_items||[]).map((A,N)=>d.jsxs("li",{className:"flex justify-between text-xs text-muted-foreground",children:[d.jsxs("span",{children:[A.quantity,"x ",A.name]}),A.price&&d.jsxs("span",{children:[Number(A.price*A.quantity).toLocaleString()," ","MMK"]})]},N))})]})]}):d.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Loading order details..."})]})})]}),d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border glass-effect z-50",children:d.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[d.jsxs("button",{onClick:()=>n("orders"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="orders"?"text-primary":"text-muted-foreground"}`,children:[d.jsx(VE,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),d.jsxs("button",{onClick:()=>n("scanner"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="scanner"?"text-primary":"text-muted-foreground"}`,children:[d.jsx(nj,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"QR Scanner"})]}),d.jsxs("button",{onClick:()=>n("menu"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="menu"?"text-primary":"text-muted-foreground"}`,children:[d.jsx(XM,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Menu"})]}),d.jsxs("button",{onClick:()=>n("blog"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="blog"?"text-primary":"text-muted-foreground"}`,children:[d.jsx(Rx,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),d.jsxs("button",{onClick:()=>n("settings"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="settings"?"text-primary":"text-muted-foreground"}`,children:[d.jsx(sj,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-xs font-medium",children:"Settings"})]})]})})]})},zV=()=>{const{user:t,userRole:e,loading:r,signOut:n}=gn(),s=rn(),[i,l]=E.useState({totalRestaurants:0,totalOrders:0,totalCustomers:0,totalRevenue:0}),[u,m]=E.useState(!0);E.useEffect(()=>{!r&&(!t||e!=="admin")&&(we.error("Admin access required"),s("/auth"))},[t,e,r,s]);const h=async()=>{try{await n(),we.success("Logged out successfully"),s("/auth")}catch{we.error("Failed to logout")}};E.useEffect(()=>{t&&e==="admin"&&x()},[t,e]);const x=async()=>{try{m(!0);const{count:v}=await ue.from("restaurants").select("*",{count:"exact",head:!0}),{data:b,count:S}=await ue.from("orders").select("total_amount",{count:"exact"}),C=(b==null?void 0:b.reduce((R,A)=>R+Number(A.total_amount),0))||0,{count:I}=await ue.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","customer");l({totalRestaurants:v||0,totalOrders:S||0,totalCustomers:I||0,totalRevenue:C})}catch(v){console.error("Error fetching stats:",v),we.error("Failed to load statistics")}finally{m(!1)}};if(r||u)return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading admin dashboard..."})]})});if(!t||e!=="admin")return null;const y=[{title:"Total Restaurants",value:i.totalRestaurants,icon:Th,description:"Active restaurants",color:"text-blue-600"},{title:"Total Orders",value:i.totalOrders,icon:Rh,description:"All time orders",color:"text-green-600"},{title:"Total Customers",value:i.totalCustomers,icon:Qm,description:"Registered customers",color:"text-purple-600"},{title:"Total Revenue",value:`${i.totalRevenue.toLocaleString()} MMK`,icon:qM,description:"All time revenue",color:"text-yellow-600"}];return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:d.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[d.jsx("div",{className:"mb-8",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage your ALAN platform"})]}),d.jsxs(De,{variant:"outline",onClick:h,className:"flex items-center gap-2 hover:bg-destructive hover:text-destructive-foreground",children:[d.jsx(N0,{className:"h-4 w-4"}),"Logout"]})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:y.map(v=>{const b=v.icon;return d.jsxs($e,{className:"hover:shadow-lg transition-shadow",children:[d.jsxs(ur,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(pr,{className:"text-sm font-medium",children:v.title}),d.jsx(b,{className:`h-5 w-5 ${v.color}`})]}),d.jsxs(Ct,{children:[d.jsx("div",{className:"text-2xl font-bold",children:v.value}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description})]})]},v.title)})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx($e,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/restaurants"),children:d.jsxs(ur,{children:[d.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[d.jsx(Th,{className:"h-5 w-5"}),"Restaurants"]}),d.jsx(Bi,{children:"Manage all restaurants"})]})}),d.jsx($e,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/owners"),children:d.jsxs(ur,{children:[d.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[d.jsx(Qm,{className:"h-5 w-5"}),"Restaurant Owners"]}),d.jsx(Bi,{children:"Manage owner accounts"})]})}),d.jsx($e,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/orders"),children:d.jsxs(ur,{children:[d.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[d.jsx(Rh,{className:"h-5 w-5"}),"Orders Report"]}),d.jsx(Bi,{children:"View all orders"})]})}),d.jsx($e,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/users"),children:d.jsxs(ur,{children:[d.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[d.jsx(Qm,{className:"h-5 w-5"}),"Users"]}),d.jsx(Bi,{children:"Manage all users"})]})})]})]})})},Fd=E.forwardRef(({className:t,...e},r)=>d.jsx("div",{className:"relative w-full overflow-auto",children:d.jsx("table",{ref:r,className:Te("w-full caption-bottom text-sm",t),...e})}));Fd.displayName="Table";const Ud=E.forwardRef(({className:t,...e},r)=>d.jsx("thead",{ref:r,className:Te("[&_tr]:border-b",t),...e}));Ud.displayName="TableHeader";const zd=E.forwardRef(({className:t,...e},r)=>d.jsx("tbody",{ref:r,className:Te("[&_tr:last-child]:border-0",t),...e}));zd.displayName="TableBody";const VV=E.forwardRef(({className:t,...e},r)=>d.jsx("tfoot",{ref:r,className:Te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));VV.displayName="TableFooter";const xi=E.forwardRef(({className:t,...e},r)=>d.jsx("tr",{ref:r,className:Te("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));xi.displayName="TableRow";const Kt=E.forwardRef(({className:t,...e},r)=>d.jsx("th",{ref:r,className:Te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Kt.displayName="TableHead";const Ht=E.forwardRef(({className:t,...e},r)=>d.jsx("td",{ref:r,className:Te("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ht.displayName="TableCell";const HV=E.forwardRef(({className:t,...e},r)=>d.jsx("caption",{ref:r,className:Te("mt-4 text-sm text-muted-foreground",t),...e}));HV.displayName="TableCaption";const $V=()=>{const{user:t,userRole:e,loading:r}=gn(),n=rn(),[s,i]=E.useState([]),[l,u]=E.useState([]),[m,h]=E.useState(""),[x,y]=E.useState(!1),[v,b]=E.useState(null),[S,C]=E.useState({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""}),I=["7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM"],R=["1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM"],A=P=>{if(!P||!P.includes(" - "))return{start:"",end:""};const[j,W]=P.split(" - ").map(Y=>Y.trim());return{start:I.includes(j)?j:"",end:R.includes(W)?W:""}};E.useEffect(()=>{!r&&(!t||e!=="admin")&&(we.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&N()},[t,e]),E.useEffect(()=>{const P=s.filter(j=>j.name.toLowerCase().includes(m.toLowerCase())||j.address.toLowerCase().includes(m.toLowerCase()));u(P)},[m,s]);const N=async()=>{const{data:P,error:j}=await ue.from("restaurants").select("*").order("created_at",{ascending:!1});if(j){we.error("Failed to load restaurants");return}i(P||[]),u(P||[])},O=async()=>{if(!S.name||!S.address){we.error("Name and address are required");return}const P=S.open_hours&&S.open_hours.includes(" - ")?S.open_hours:null;if(v){const{error:j}=await ue.from("restaurants").update({...S,open_hours:P,rating:S.rating?Number(S.rating):null}).eq("id",v.id);if(j){we.error("Failed to update restaurant");return}we.success("Restaurant updated successfully")}else{const{error:j}=await ue.from("restaurants").insert([{...S,open_hours:P,rating:S.rating?Number(S.rating):null}]);if(j){we.error("Failed to create restaurant");return}we.success("Restaurant created successfully")}y(!1),B(),N()},k=async P=>{if(!confirm("Are you sure you want to delete this restaurant?"))return;const{error:j}=await ue.from("restaurants").delete().eq("id",P);if(j){we.error("Failed to delete restaurant");return}we.success("Restaurant deleted successfully"),N()},F=P=>{b(P);const j=A(P.open_hours);C({name:P.name,address:P.address,description:P.description||"",phone:P.phone||"",cuisine_type:P.cuisine_type||"",image_url:P.image_url||"",open_hours:j.start&&j.end?`${j.start} - ${j.end}`:P.open_hours||"",rating:P.rating!==null&&P.rating!==void 0?String(P.rating):""}),y(!0)},B=()=>{b(null),C({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""})};return r||!t||e!=="admin"?null:d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:d.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurants on the platform"})]}),d.jsxs(Xs,{open:x,onOpenChange:P=>{y(P),P||B()},children:[d.jsx(YT,{asChild:!0,children:d.jsxs(De,{children:[d.jsx(ko,{className:"h-4 w-4 mr-2"}),"Add Restaurant"]})}),d.jsxs(_s,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsx(bi,{children:d.jsx(_i,{children:v?"Edit Restaurant":"Add New Restaurant"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"name",children:"Restaurant Name *"}),d.jsx(ot,{id:"name",value:S.name,onChange:P=>C({...S,name:P.target.value}),placeholder:"Enter restaurant name"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"address",children:"Address *"}),d.jsx(ot,{id:"address",value:S.address,onChange:P=>C({...S,address:P.target.value}),placeholder:"Enter address"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"phone",children:"Phone"}),d.jsx(ot,{id:"phone",value:S.phone,onChange:P=>C({...S,phone:P.target.value}),placeholder:"Enter phone number"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"cuisine_type",children:"Cuisine Type"}),d.jsx(ot,{id:"cuisine_type",value:S.cuisine_type,onChange:P=>C({...S,cuisine_type:P.target.value}),placeholder:"e.g., Italian, Chinese"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"description",children:"Description"}),d.jsx(Dd,{id:"description",value:S.description,onChange:P=>C({...S,description:P.target.value}),placeholder:"Enter restaurant description",rows:3})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"image_url",children:"Image URL"}),d.jsx(ot,{id:"image_url",value:S.image_url,onChange:P=>C({...S,image_url:P.target.value}),placeholder:"Enter image URL"})]}),d.jsxs("div",{children:[d.jsx(Qe,{children:"Opening Hours"}),d.jsxs("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-2",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Start"}),d.jsxs("select",{value:A(S.open_hours).start,onChange:P=>{const j=A(S.open_hours),W=P.target.value,Y=j.end,z=W&&Y?`${W} - ${Y}`:W||Y?`${W}${Y?` - ${Y}`:""}`:"";C({...S,open_hours:z})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[d.jsx("option",{value:"",children:"Select start time"}),I.map(P=>d.jsx("option",{value:P,children:P},P))]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"End"}),d.jsxs("select",{value:A(S.open_hours).end,onChange:P=>{const j=A(S.open_hours),W=P.target.value,Y=j.start,z=Y&&W?`${Y} - ${W}`:W&&Y?`${Y} - ${W}`:W||Y?`${Y}${W?` - ${W}`:""}`:"";C({...S,open_hours:z})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[d.jsx("option",{value:"",children:"Select end time"}),R.map(P=>d.jsx("option",{value:P,children:P},P))]})]})]}),d.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:'Stored as a single value like "11:00 AM - 11:00 PM" in the database.'})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"rating",children:"Rating"}),d.jsx(ot,{id:"rating",type:"number",step:"0.1",min:"0",max:"5",value:S.rating,onChange:P=>C({...S,rating:P.target.value}),placeholder:"Enter rating (e.g., 4.5)"})]}),d.jsx(De,{onClick:O,className:"w-full",children:v?"Update Restaurant":"Create Restaurant"})]})]})]})]}),d.jsx($e,{className:"mb-6",children:d.jsx(Ct,{className:"pt-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(Rd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),d.jsx(ot,{placeholder:"Search restaurants...",value:m,onChange:P=>h(P.target.value),className:"pl-10"})]})})}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{children:["All Restaurants (",l.length,")"]})}),d.jsx(Ct,{children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(Fd,{children:[d.jsx(Ud,{children:d.jsxs(xi,{children:[d.jsx(Kt,{children:"Name"}),d.jsx(Kt,{children:"Address"}),d.jsx(Kt,{children:"Phone"}),d.jsx(Kt,{children:"Cuisine"}),d.jsx(Kt,{className:"text-right",children:"Actions"})]})}),d.jsx(zd,{children:l.map(P=>d.jsxs(xi,{children:[d.jsx(Ht,{className:"font-medium",children:P.name}),d.jsx(Ht,{children:P.address}),d.jsx(Ht,{children:P.phone||"N/A"}),d.jsx(Ht,{children:P.cuisine_type||"N/A"}),d.jsxs(Ht,{className:"text-right",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>F(P),children:d.jsx(HE,{className:"h-4 w-4"})}),d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>k(P.id),children:d.jsx(T0,{className:"h-4 w-4 text-destructive"})})]})]},P.id))})]})})})]})]})})},WV=()=>{const{user:t,userRole:e,loading:r}=gn(),n=rn(),[s,i]=E.useState([]),[l,u]=E.useState([]),[m,h]=E.useState([]),[x,y]=E.useState(""),[v,b]=E.useState(!1),[S,C]=E.useState({ownerId:"",restaurantId:""});E.useEffect(()=>{!r&&(!t||e!=="admin")&&(we.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&(I(),R())},[t,e]),E.useEffect(()=>{const O=s.filter(k=>k.email.toLowerCase().includes(x.toLowerCase())||k.restaurant_name&&k.restaurant_name.toLowerCase().includes(x.toLowerCase()));h(O)},[x,s]);const I=async()=>{try{const{data:O,error:k}=await ue.rpc("get_restaurant_owners");if(!k&&O&&O.length>0){const J=O||[],Z=Array.from(new Set(J.map(le=>le.restaurant_id).filter(Boolean))),{data:K,error:ne}=await ue.from("restaurants").select("id, address").in("id",Z);ne&&console.error("Failed to fetch restaurant addresses:",ne);const pe=new Map((K||[]).map(le=>[le.id,le.address??null])),ae=J.map(le=>({user_id:le.user_id,full_name:le.full_name??"Unnamed Owner",email:le.email??"Email not available",phone:le.phone??null,restaurant_id:le.restaurant_id??null,restaurant_name:le.restaurant_name??null,restaurant_address:le.restaurant_id?pe.get(le.restaurant_id)??null:null}));i(ae),h(ae);return}console.warn("RPC get_restaurant_owners unavailable or empty; falling back. Error:",k);const{data:F,error:B}=await ue.from("user_roles").select("user_id").eq("role","restaurant_owner");if(B){console.error("Failed to load owner roles:",B),we.error("Failed to load owners");return}const P=Array.from(new Set((F??[]).map(J=>J.user_id).filter(J=>!!J)));if(P.length===0){i([]),h([]);return}const{data:j,error:W}=await ue.from("profiles").select("id, full_name, phone").in("id",P);W&&console.error("Failed to load owner profiles:",W);let Y=new Map;try{const{data:J,error:Z}=await ue.rpc("get_user_emails",{user_ids:P});if(!Z&&J)Y=new Map((J??[]).filter(K=>K.email).map(K=>[K.user_id,K.email]));else{console.warn("RPC get_user_emails failed, attempting direct fallback:",Z);const{data:K,error:ne}=await ue.from("user_emails").select("user_id, email").in("user_id",P);!ne&&K&&(Y=new Map((K??[]).map(pe=>[pe.user_id,pe.email])))}}catch(J){console.warn("Error getting emails via RPC/fallback:",J)}const{data:z,error:X}=await ue.from("restaurants").select("id, name, address, owner_id").in("owner_id",P);if(X){console.error("Failed to load restaurants for owners:",X),we.error("Failed to load owners");return}const G=new Map((j??[]).map(J=>[J.id,{fullName:J.full_name??"Unnamed Owner",phone:J.phone??null}])),H=new Map;(z??[]).forEach(J=>{J.owner_id&&H.set(J.owner_id,{id:J.id,name:J.name??"Unnamed Restaurant",address:J.address??null})});const te=P.map(J=>{const Z=G.get(J),K=Y.get(J)??"Email not available",ne=H.get(J);return{user_id:J,full_name:(Z==null?void 0:Z.fullName)??"Unnamed Owner",email:K,phone:(Z==null?void 0:Z.phone)??null,restaurant_id:(ne==null?void 0:ne.id)??null,restaurant_name:(ne==null?void 0:ne.name)??null,restaurant_address:(ne==null?void 0:ne.address)??null}});i(te),h(te)}catch(O){console.error("Unexpected error fetching owners:",O),we.error("Failed to load owners")}},R=async()=>{const{data:O,error:k}=await ue.from("restaurants").select("id, name").is("owner_id",null).order("name");if(k){console.error("Failed to load restaurants:",k);return}u(O||[])},A=async()=>{if(!S.ownerId||!S.restaurantId){we.error("Please select both an owner and a restaurant");return}try{const{data:O,error:k}=await ue.from("user_roles").select("user_id").eq("user_id",S.ownerId).eq("role","restaurant_owner").maybeSingle();if(k){console.error("Error checking owner role:",k),we.error("Failed to verify owner role");return}if(!O){const{error:B}=await ue.from("user_roles").insert([{user_id:S.ownerId,role:"restaurant_owner"}]);if(B){we.error("Failed to assign owner role");return}}const{error:F}=await ue.from("restaurants").update({owner_id:S.ownerId}).eq("id",S.restaurantId);if(F){we.error("Failed to link restaurant to owner");return}we.success("Owner linked to restaurant successfully"),b(!1),N(),I(),R()}catch(O){console.error("Error linking owner:",O),we.error("Failed to link owner")}},N=()=>{C({ownerId:"",restaurantId:""})};return r||!t||e!=="admin"?null:d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:d.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Owner Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurant owner accounts"})]}),d.jsxs(Xs,{open:v,onOpenChange:O=>{b(O),O||N()},children:[d.jsx(YT,{asChild:!0,children:d.jsxs(De,{disabled:l.length===0||s.filter(O=>!O.restaurant_id).length===0,children:[d.jsx(ko,{className:"h-4 w-4 mr-2"}),"Add Owner"]})}),d.jsxs(_s,{className:"max-w-md",children:[d.jsx(bi,{children:d.jsx(_i,{children:"Link Existing Owner to Restaurant"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"owner",children:"Owner *"}),d.jsxs(gs,{value:S.ownerId,onValueChange:O=>C({...S,ownerId:O}),children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Select owner without restaurant"})}),d.jsx(Yn,{children:s.filter(O=>!O.restaurant_id).map(O=>d.jsxs(rt,{value:O.user_id,children:[O.full_name||"Unnamed Owner","  ",O.email]},O.user_id))})]})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"restaurant",children:"Restaurant *"}),d.jsxs(gs,{value:S.restaurantId,onValueChange:O=>C({...S,restaurantId:O}),children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Select restaurant without owner"})}),d.jsx(Yn,{children:l.map(O=>d.jsx(rt,{value:O.id,children:O.name},O.id))})]})]}),d.jsx(De,{onClick:A,className:"w-full",disabled:!S.ownerId||!S.restaurantId,children:"Link Owner"})]})]})]})]}),l.length===0&&d.jsx($e,{className:"mb-6 border-amber-200 bg-amber-50",children:d.jsx(Ct,{className:"pt-6",children:d.jsx("p",{className:"text-amber-800",children:"No restaurants available without owners. Please create restaurants first before adding owners."})})}),d.jsx($e,{className:"mb-6",children:d.jsx(Ct,{className:"pt-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(Rd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),d.jsx(ot,{placeholder:"Search owners...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})})}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{children:["All Restaurant Owners (",m.length,")"]})}),d.jsx(Ct,{children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(Fd,{children:[d.jsx(Ud,{children:d.jsxs(xi,{children:[d.jsx(Kt,{children:"Restaurant"}),d.jsx(Kt,{children:"Address"}),d.jsx(Kt,{children:"Owner"}),d.jsx(Kt,{children:"Email"}),d.jsx(Kt,{children:"Phone"})]})}),d.jsx(zd,{children:m.map(O=>d.jsxs(xi,{children:[d.jsx(Ht,{children:O.restaurant_name?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Th,{className:"h-4 w-4 text-muted-foreground"}),O.restaurant_name]}):d.jsx("span",{className:"text-muted-foreground",children:"No restaurant"})}),d.jsx(Ht,{children:O.restaurant_address||d.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),d.jsx(Ht,{children:O.full_name||d.jsx("span",{className:"text-muted-foreground",children:"Unnamed Owner"})}),d.jsx(Ht,{className:"text-muted-foreground",children:O.email}),d.jsx(Ht,{children:O.phone||"N/A"})]},O.user_id))})]})})})]})]})})};function GV(t){const e=typeof t=="string"?new Date(t):t,r=e.getMonth()+1,n=e.getDate(),s=e.getFullYear();let i=e.getHours();const l=e.getMinutes(),u=i>=12?"PM":"AM";i=i%12,i=i||12;const m=l<10?`0${l}`:`${l}`;return`${r}/${n}/${s} - ${i}:${m} ${u}`}const YV=()=>{var W,Y,z,X;const{user:t,userRole:e,loading:r}=gn(),n=rn(),[s,i]=E.useState([]),[l,u]=E.useState([]),[m,h]=E.useState([]),[x,y]=E.useState([]),[v,b]=E.useState(""),[S,C]=E.useState("all"),[I,R]=E.useState("all"),[A,N]=E.useState("all");E.useEffect(()=>{!r&&(!t||e!=="admin")&&(we.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&O()},[t,e]),E.useEffect(()=>{F()},[v,S,I,A,s]);const O=async()=>{console.log(" Fetching orders data...");const{data:G,error:H}=await ue.from("orders").select("*").order("created_at",{ascending:!1});if(H){console.error(" Error fetching orders:",H),we.error("Failed to load orders");return}if(console.log(" Orders fetched:",(G==null?void 0:G.length)||0,"orders"),!G||G.length===0){console.log(" No orders found in database"),i([]),u([]);const{data:le}=await ue.from("restaurants").select("id, name").order("name");h(le||[]),we.info("No orders found in the database");return}console.log(" Found existing orders in database:",G.length);const te=[...new Set(G.map(le=>le.customer_id).filter(le=>!!le))];console.log(" Looking up customer details for IDs:",te.map(le=>le.substring(0,8)));let J=[];if(te.length>0){try{let le=await ue.rpc("get_order_customers_fallback",{customer_ids:te});le.error&&(console.warn(" get_order_customers_fallback not available or failed, trying get_order_customers:",le.error.message),le=await ue.rpc("get_order_customers",{customer_ids:te})),le.error?(console.error(" Error fetching customer details via RPC:",le.error),we.error("Failed to load customer details")):(J=le.data||[],console.log(" Customer details fetched via RPC:",J.length))}catch(le){console.error(" Unexpected error fetching customer details:",le),we.error("Failed to load customer details")}if(J.length===0)try{const{data:le,error:fe}=await ue.from("profiles").select("id, full_name, phone").in("id",te);!fe&&le&&(J=le.map(ze=>({user_id:ze.id,full_name:ze.full_name,email:null,phone:ze.phone})),console.log(" Fallback to profiles fetched:",J.length))}catch(le){console.error(" Unexpected error fetching profiles as fallback:",le)}}const Z=new Map(J.map(le=>{var fe,ze,ve;return[le.user_id,{name:((fe=le.full_name)==null?void 0:fe.trim())||"",email:((ze=le.email)==null?void 0:ze.trim())||"Email not available",phone:((ve=le.phone)==null?void 0:ve.trim())||""}]}));console.log(" Customer mapping (via RPC):",{totalCustomers:J.length,customerIds:te.map(le=>le.substring(0,8)),foundCustomers:J.map(le=>({id:le.user_id.substring(0,8),name:le.full_name,email:le.email,phone:le.phone}))});const{data:K}=await ue.from("restaurants").select("id, name").order("name"),ne=[...new Set(G.map(le=>le.restaurant_id))],{data:pe}=await ue.from("restaurants").select("id, name").in("id",ne),ae=G.map(le=>{var Xe;const fe=Z.get(le.customer_id),ze=le.customer_id?le.customer_id.substring(0,8):"UNKNOWN",ve=fe!=null&&fe.name&&fe.name.length>0?fe.name:`Customer ${ze}`,be=fe!=null&&fe.email&&fe.email.length>0?fe.email:"Email not available",ke=fe!=null&&fe.phone&&fe.phone.length>0?fe.phone:"Phone not available";return{...le,customer_name:ve,customer_email:be,customer_phone:ke,restaurant_name:((Xe=pe==null?void 0:pe.find(oe=>oe.id===le.restaurant_id))==null?void 0:Xe.name)||"Unknown Restaurant"}});console.log(" Orders enriched with customer data:",{totalOrders:ae.length,ordersWithCustomerNames:ae.filter(le=>!le.customer_name.startsWith("Customer ")).length,sampleOrder:ae[0]?{id:ae[0].id.substring(0,8),customerName:ae[0].customer_name,customerEmail:ae[0].customer_email,customerPhone:ae[0].customer_phone}:null}),i(ae),u(ae),h(K||[]),k(ae)},k=G=>{const H=new Map;G.forEach(J=>{const Z=J.restaurant_id,K=J.restaurant_name,ne=Number(J.total_amount);if(H.has(Z)){const pe=H.get(Z);pe.total_orders+=1,pe.total_revenue+=ne,pe.avg_order_value=pe.total_revenue/pe.total_orders}else H.set(Z,{restaurant_id:Z,restaurant_name:K,total_orders:1,total_revenue:ne,avg_order_value:ne})});const te=Array.from(H.values()).sort((J,Z)=>Z.total_revenue-J.total_revenue);y(te)},F=()=>{let G=[...s];if(v&&(G=G.filter(H=>H.customer_name.toLowerCase().includes(v.toLowerCase())||H.customer_phone.toLowerCase().includes(v.toLowerCase())||H.restaurant_name.toLowerCase().includes(v.toLowerCase())||H.id.toLowerCase().includes(v.toLowerCase()))),A!=="all"&&(G=G.filter(H=>H.restaurant_id===A)),S!=="all"&&(G=G.filter(H=>H.status===S)),I!=="all"){const H=new Date,te=new Date;I==="today"?te.setHours(0,0,0,0):I==="week"?te.setDate(H.getDate()-7):I==="month"&&te.setMonth(H.getMonth()-1),G=G.filter(J=>new Date(J.created_at)>=te)}u(G),k(G)},B=()=>{window.print()},P=l.reduce((G,H)=>G+Number(H.total_amount),0),j=G=>{const H={paid:"default",preparing:"secondary",ready:"outline",completed:"default"};return d.jsx(fn,{variant:H[G]||"default",children:G.toUpperCase()})};return r||!t||e!=="admin"?null:d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:d.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl print:p-0",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8 print:hidden",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Orders Report"}),d.jsx("p",{className:"text-muted-foreground",children:"View and manage all orders"})]}),d.jsxs(De,{onClick:B,children:[d.jsx(tj,{className:"h-4 w-4 mr-2"}),"Print Report"]})]}),d.jsx("div",{className:"hidden print:block mb-8",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ALAN - Orders Report"}),d.jsxs("p",{className:"text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]}),A!=="all"&&d.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:["Restaurant: ",((W=m.find(G=>G.id===A))==null?void 0:W.name)||"Selected Restaurant"]}),S!=="all"&&d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Status Filter: ",S.toUpperCase()]}),I!=="all"&&d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date Filter: ",I==="today"?"Today":I==="week"?"Last 7 Days":I==="month"?"Last 30 Days":I]})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsxs($e,{children:[d.jsx(ur,{children:d.jsx(pr,{className:"text-sm",children:"Total Orders"})}),d.jsx(Ct,{children:d.jsx("p",{className:"text-3xl font-bold",children:l.length})})]}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsx(pr,{className:"text-sm",children:"Total Revenue"})}),d.jsx(Ct,{children:d.jsxs("p",{className:"text-3xl font-bold",children:[P.toLocaleString()," MMK"]})})]}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsx(pr,{className:"text-sm",children:"Average Order"})}),d.jsx(Ct,{children:d.jsxs("p",{className:"text-3xl font-bold",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]})})]})]}),d.jsx($e,{className:"mb-6 print:hidden",children:d.jsx(Ct,{className:"pt-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Rd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),d.jsx(ot,{placeholder:"Search orders...",value:v,onChange:G=>b(G.target.value),className:"pl-10"})]}),d.jsxs(gs,{value:A,onValueChange:N,children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Filter by restaurant"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All Restaurants"}),m.map(G=>d.jsx(rt,{value:G.id,children:G.name},G.id))]})]}),d.jsxs(gs,{value:S,onValueChange:C,children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Filter by status"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All Statuses"}),d.jsx(rt,{value:"paid",children:"Paid"}),d.jsx(rt,{value:"preparing",children:"Preparing"}),d.jsx(rt,{value:"ready",children:"Ready"}),d.jsx(rt,{value:"completed",children:"Completed"})]})]}),d.jsxs(gs,{value:I,onValueChange:R,children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Filter by date"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All Time"}),d.jsx(rt,{value:"today",children:"Today"}),d.jsx(rt,{value:"week",children:"Last 7 Days"}),d.jsx(rt,{value:"month",children:"Last 30 Days"})]})]}),d.jsxs(De,{variant:"outline",onClick:()=>{b(""),N("all"),C("all"),R("all")},children:[d.jsx(Lv,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})})}),A==="all"&&x.length>0&&d.jsxs($e,{className:"mb-6",children:[d.jsx(ur,{children:d.jsxs(pr,{className:"flex items-center gap-2",children:[d.jsx(Lv,{className:"h-5 w-5"}),"Restaurant Performance Summary"]})}),d.jsx(Ct,{children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(G=>d.jsx($e,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:d.jsxs(Ct,{className:"p-4",children:[d.jsx("h3",{className:"font-semibold text-lg mb-2 text-blue-900",children:G.restaurant_name}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total Orders:"}),d.jsx("span",{className:"font-medium",children:G.total_orders})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),d.jsxs("span",{className:"font-bold text-green-600",children:[G.total_revenue.toLocaleString()," MMK"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),d.jsxs("span",{className:"font-medium",children:[Math.round(G.avg_order_value).toLocaleString()," MMK"]})]})]}),d.jsx(De,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>N(G.restaurant_id),children:"View Orders"})]})},G.restaurant_id))})})]}),A!=="all"&&d.jsx($e,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:d.jsx(Ct,{className:"pt-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:[((Y=m.find(G=>G.id===A))==null?void 0:Y.name)||"Selected Restaurant"," Performance"]}),d.jsx("p",{className:"text-sm text-green-700",children:"Filtered results for selected restaurant"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-green-800",children:l.length}),d.jsx("p",{className:"text-xs text-green-600",children:"Orders"})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[P.toLocaleString()," MMK"]}),d.jsx("p",{className:"text-xs text-green-600",children:"Revenue"})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]}),d.jsx("p",{className:"text-xs text-green-600",children:"Avg Order"})]})]})]})})}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{className:"flex items-center justify-between",children:[d.jsx("span",{children:"Order Details"}),d.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:A!=="all"?`Showing ${l.length} orders for ${(z=m.find(G=>G.id===A))==null?void 0:z.name}`:`Showing ${l.length} of ${s.length} orders`})]})}),d.jsx(Ct,{children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(Fd,{children:[d.jsx(Ud,{children:d.jsxs(xi,{children:[d.jsx(Kt,{children:"Order ID"}),d.jsx(Kt,{children:"Customer"}),d.jsx(Kt,{children:"Restaurant"}),d.jsx(Kt,{children:"Type"}),d.jsx(Kt,{children:"Amount"}),d.jsx(Kt,{children:"Status"}),d.jsx(Kt,{children:"Date"})]})}),d.jsx(zd,{children:l.length>0?l.map(G=>d.jsxs(xi,{children:[d.jsx(Ht,{className:"font-mono text-xs",children:G.id.substring(0,8)}),d.jsx(Ht,{children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"font-medium",children:G.customer_name}),G.customer_email!=="Email not available"&&d.jsx("div",{className:"text-xs text-muted-foreground",children:G.customer_email}),G.customer_phone!=="Phone not available"&&d.jsx("div",{className:"text-xs text-muted-foreground",children:G.customer_phone})]})}),d.jsx(Ht,{children:G.restaurant_name}),d.jsx(Ht,{className:"capitalize",children:G.order_type}),d.jsxs(Ht,{className:"font-semibold",children:[Number(G.total_amount).toLocaleString()," MMK"]}),d.jsx(Ht,{children:j(G.status)}),d.jsx(Ht,{children:GV(G.created_at)})]},G.id)):d.jsx(xi,{children:d.jsx(Ht,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:A!=="all"?`No orders found for ${((X=m.find(G=>G.id===A))==null?void 0:X.name)||"selected restaurant"}`:"No orders found matching the current filters"})})})]})})})]})]})})},qV=()=>{const{user:t,userRole:e,loading:r}=gn(),n=rn(),[s,i]=E.useState([]),[l,u]=E.useState([]),[m,h]=E.useState(""),[x,y]=E.useState("all"),[v,b]=E.useState(!1),[S,C]=E.useState(null),[I,R]=E.useState(""),[A,N]=E.useState(null),[O,k]=E.useState(null),[F,B]=E.useState(""),[P,j]=E.useState(""),[W,Y]=E.useState("customer"),[z,X]=E.useState([]),[G,H]=E.useState(!1),[te,J]=E.useState("customer"),[Z,K]=E.useState(""),[ne,pe]=E.useState(""),[ae,le]=E.useState(""),[fe,ze]=E.useState(""),[ve,be]=E.useState(null);E.useEffect(()=>{!r&&(!t||e!=="admin")&&(we.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&(ke(),Xe())},[t,e]),E.useEffect(()=>{const he=m.toLowerCase(),Be=s.filter(Ne=>{const bt=Ne.full_name.toLowerCase().includes(he)||Ne.role.toLowerCase().includes(he)||Ne.phone&&Ne.phone.toLowerCase().includes(he)||Ne.user_id.toLowerCase().includes(he),Ce=x==="all"?!0:Ne.role===x;return bt&&Ce});u(Be)},[m,x,s]);const ke=async()=>{console.log(" Fetching users and details via RPC...");try{const{data:he,error:Be}=await ue.from("user_roles").select("user_id, role, created_at").order("created_at",{ascending:!1});if(Be){console.error(" Error fetching user roles:",Be),we.error("Failed to load users");return}if(!he||he.length===0){console.log(" No users found in user_roles table"),i([]),u([]);return}const Ne=he.map(it=>it.user_id);let bt=[];try{let it=await ue.rpc("get_order_customers_fallback",{customer_ids:Ne});it.error&&(console.warn(" get_order_customers_fallback not available, trying get_order_customers:",it.error.message),it=await ue.rpc("get_order_customers",{customer_ids:Ne})),it.error?(console.error(" Error fetching user details via RPC:",it.error),we.error("Failed to load some user details")):bt=it.data||[]}catch(it){console.error(" Unexpected RPC error:",it)}const Ce=new Map(bt.map(it=>[it.user_id,it])),Pr=he.map(it=>{var Nt;const tr=Ce.get(it.user_id),ra=(Nt=tr==null?void 0:tr.full_name)!=null&&Nt.trim()?tr.full_name.trim():`User ${it.user_id.substring(0,8)}`;return{user_id:it.user_id,full_name:ra,phone:(tr==null?void 0:tr.phone)||null,role:it.role,created_at:it.created_at}});console.log(" Final users data (via RPC):",{total:Pr.length,withRealNames:Pr.filter(it=>!it.full_name.startsWith("User ")).length,withPhones:Pr.filter(it=>it.phone).length}),i(Pr),u(Pr)}catch(he){console.error(" Unexpected error in fetchUsers:",he),we.error("An unexpected error occurred while loading users")}},Xe=async()=>{try{const{data:he,error:Be}=await ue.from("restaurants").select("id, name").order("name");if(Be){console.error(" Error fetching restaurants:",Be);return}X(he||[])}catch(he){console.error(" Unexpected error fetching restaurants:",he)}},oe=async he=>{var Be;console.log(" Opening user details for:",he.user_id.substring(0,8)),C(he),B(he.full_name),j(he.phone||""),Y(he.role);try{let Ne=await ue.rpc("get_order_customers_fallback",{customer_ids:[he.user_id]});Ne.error&&(Ne=await ue.rpc("get_order_customers",{customer_ids:[he.user_id]})),!Ne.error&&Ne.data&&Ne.data.length>0?R(Ne.data[0].email||"Email not available"):R("Email not available")}catch{R("Email not available")}if(N(null),k(null),he.role==="restaurant_owner")try{const{data:Ne,error:bt}=await ue.from("restaurants").select("id, name").eq("owner_id",he.user_id).limit(1).maybeSingle();if(!bt&&Ne)N(Ne.id),k(Ne.name||"Linked Restaurant");else{const{data:Ce,error:Pr}=await ue.from("restaurant_owners").select("restaurant_id, restaurants(name)").eq("user_id",he.user_id).maybeSingle();!Pr&&Ce&&(N(Ce.restaurant_id),k(((Be=Ce.restaurants)==null?void 0:Be.name)||"Linked Restaurant"))}}catch(Ne){console.error(" Error fetching restaurant for owner:",Ne)}b(!0)},Ee=async()=>{if(S)try{const{error:he}=await ue.from("profiles").update({full_name:F.trim(),phone:P.trim()||null,updated_at:new Date().toISOString()}).eq("id",S.user_id);if(he){console.error(" Error updating profile:",he),we.error("Failed to update user profile");return}if(W!==S.role){const{error:Be}=await ue.from("user_roles").update({role:W}).eq("user_id",S.user_id);if(Be){console.error(" Error updating role:",Be),we.error("Failed to update user role");return}if(W==="restaurant_owner"&&A){const{error:Ne}=await ue.from("restaurant_owners").upsert({user_id:S.user_id,restaurant_id:A,created_at:new Date().toISOString()});if(Ne){console.error(" Error linking restaurant:",Ne),we.error("Failed to link restaurant");return}}else S.role==="restaurant_owner"&&W!=="restaurant_owner"&&await ue.from("restaurant_owners").delete().eq("user_id",S.user_id)}we.success("User updated successfully"),b(!1),ke()}catch(he){console.error(" Unexpected error updating user:",he),we.error("An unexpected error occurred")}},je=async()=>{if(S&&confirm("Are you sure you want to delete this user? This action cannot be undone."))try{console.log(" Deleting user:",S.user_id.substring(0,8),"with role:",S.role),console.log(" Checking for restaurant ownership...");const{data:he,error:Be}=await ue.from("restaurant_owners").select("restaurant_id").eq("user_id",S.user_id);if(!Be&&he&&he.length>0){console.log(" Removing restaurant ownership links...");const{error:Ce}=await ue.from("restaurant_owners").delete().eq("user_id",S.user_id);if(Ce){console.error(" Error deleting restaurant ownership:",Ce),we.error(`Failed to remove restaurant links: ${Ce.message}`);return}console.log(" Restaurant ownership removed")}console.log(" Deleting user role...");const{error:Ne}=await ue.from("user_roles").delete().eq("user_id",S.user_id);if(Ne){console.error(" Error deleting user role:",Ne),we.error(`Failed to delete user role: ${Ne.message}`);return}console.log(" User role deleted"),console.log(" Deleting user profile...");const{error:bt}=await ue.from("profiles").delete().eq("id",S.user_id);if(bt){console.error(" Error deleting profile:",bt),we.error(`Failed to delete user profile: ${bt.message}`);return}console.log(" User profile deleted");try{console.log(" Attempting to delete auth user...");const{error:Ce}=await ue.auth.admin.deleteUser(S.user_id);Ce?console.warn(" Could not delete auth user (service role required):",Ce.message):console.log(" Auth user deleted")}catch(Ce){console.warn(" Auth user deletion not available:",Ce)}console.log(" User deletion complete"),we.success("User deleted successfully"),b(!1),setTimeout(()=>{ke()},500)}catch(he){console.error(" Unexpected error deleting user:",he),we.error("An unexpected error occurred")}},Me=async()=>{var he,Be,Ne;if(!Z.trim()||!ne.trim()||!ae.trim()){we.error("Please fill in all required fields");return}try{console.log(" Creating user without auth signup to prevent session interference..."),console.log(" Selected role for new user:",te);const Ce=(he=(await ue.auth.getSession()).data.session)==null?void 0:he.user;if(!Ce){we.error("Admin session not found");return}console.log(" Current admin:",Ce.email,"ID:",Ce.id.substring(0,8)),console.log(" Creating user via edge function...");const{data:Pr,error:it}=await ue.functions.invoke("admin-create-user",{body:{email:ne.trim(),password:ae.trim(),full_name:Z.trim(),phone:fe.trim()||null,role:te,restaurant_id:ve}});if(it){console.error(" Edge function error:",it),we.error(it.message||"Failed to create user");return}console.log(" Edge function result:",Pr);const tr=await ue.auth.getSession();((Ne=(Be=tr.data.session)==null?void 0:Be.user)==null?void 0:Ne.id)===Ce.id?console.log(" Admin session remained intact:",tr.data.session.user.email):console.error(" Admin session was somehow changed!"),console.log(" User creation complete without session interference"),we.success(`${te.charAt(0).toUpperCase()+te.slice(1)} user created successfully`),H(!1),J("customer"),K(""),pe(""),le(""),ze(""),be(null),ke()}catch(bt){console.error(" Unexpected error creating user:",bt),we.error("An unexpected error occurred")}},gt=he=>{const Be={admin:{variant:"destructive",icon:Ih},restaurant_owner:{variant:"default",icon:zs},customer:{variant:"secondary",icon:zs}},Ne=Be[he]||Be.customer,bt=Ne.icon;return d.jsxs(fn,{variant:Ne.variant,className:"flex items-center gap-1 w-fit",children:[d.jsx(bt,{className:"h-3 w-3"}),he.replace("_"," ").toUpperCase()]})},er=(()=>{const he=s.filter(bt=>bt.role==="admin").length,Be=s.filter(bt=>bt.role==="restaurant_owner").length,Ne=s.filter(bt=>bt.role==="customer").length;return{admins:he,owners:Be,customers:Ne}})();return r||!t||e!=="admin"?null:d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:d.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[d.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:d.jsx(jc,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"User Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage all registered users"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[d.jsx(Ih,{className:"h-4 w-4 text-destructive"}),"Admins"]})}),d.jsx(Ct,{children:d.jsx("p",{className:"text-3xl font-bold",children:er.admins})})]}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[d.jsx(zs,{className:"h-4 w-4 text-primary"}),"Restaurant Owners"]})}),d.jsx(Ct,{children:d.jsx("p",{className:"text-3xl font-bold",children:er.owners})})]}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[d.jsx(zs,{className:"h-4 w-4 text-secondary"}),"Customers"]})}),d.jsx(Ct,{children:d.jsx("p",{className:"text-3xl font-bold",children:er.customers})})]})]}),d.jsx($e,{className:"mb-6",children:d.jsx(Ct,{className:"pt-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[d.jsxs("div",{className:"relative md:flex-1",children:[d.jsx(Rd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),d.jsx(ot,{placeholder:"Search users...",value:m,onChange:he=>h(he.target.value),className:"pl-10"})]}),d.jsx("div",{className:"md:w-64",children:d.jsxs(gs,{value:x,onValueChange:he=>y(he),children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Filter by role"})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"all",children:"All"}),d.jsx(rt,{value:"admin",children:"Admin"}),d.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),d.jsx(rt,{value:"customer",children:"Customer"})]})]})})]})})}),d.jsxs($e,{children:[d.jsx(ur,{children:d.jsxs(pr,{children:["All Users (",l.length,")"]})}),d.jsx(Ct,{children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs(Fd,{children:[d.jsx(Ud,{children:d.jsxs(xi,{children:[d.jsx(Kt,{children:"Name"}),d.jsx(Kt,{children:"Phone"}),d.jsx(Kt,{children:"Role"}),d.jsx(Kt,{children:"Registered"}),d.jsx(Kt,{className:"text-right",children:"Actions"})]})}),d.jsx(zd,{children:l.map(he=>d.jsxs(xi,{children:[d.jsx(Ht,{className:"font-medium",children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{children:he.full_name}),d.jsx("span",{className:"text-xs text-muted-foreground",children:he.phone?he.phone:`ID: ${he.user_id.substring(0,8)}...`})]})}),d.jsx(Ht,{children:d.jsx("span",{className:"text-sm",children:he.phone||"N/A"})}),d.jsx(Ht,{children:gt(he.role)}),d.jsx(Ht,{children:new Date(he.created_at).toLocaleDateString()}),d.jsx(Ht,{className:"text-right",children:d.jsx(De,{variant:"ghost",size:"sm",onClick:()=>oe(he),children:"View Details"})})]},he.user_id))})]})})})]}),d.jsx(Xs,{open:v,onOpenChange:b,children:d.jsxs(_s,{className:"max-w-2xl",children:[d.jsx(bi,{children:d.jsx(_i,{children:"User Details"})}),S&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"detail-name",children:"Full Name"}),d.jsx(ot,{id:"detail-name",value:F,onChange:he=>B(he.target.value)})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"detail-phone",children:"Phone"}),d.jsx(ot,{id:"detail-phone",value:P,onChange:he=>j(he.target.value)})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"detail-email",children:"Email"}),d.jsx(ot,{id:"detail-email",value:I,disabled:!0,className:"bg-muted"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"detail-role",children:"Role"}),d.jsxs(gs,{value:W,onValueChange:Y,children:[d.jsx(Gn,{children:d.jsx(xs,{})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"customer",children:"Customer"}),d.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),d.jsx(rt,{value:"admin",children:"Admin"})]})]})]})]}),W==="restaurant_owner"&&A&&O&&d.jsxs("div",{children:[d.jsx(Qe,{children:"Linked Restaurant"}),d.jsx("p",{className:"mt-1 text-sm font-medium",children:O})]}),d.jsx("div",{className:"border-t pt-4",children:d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx(Qe,{className:"text-muted-foreground",children:"User ID"}),d.jsx("p",{className:"font-mono",children:S.user_id})]}),d.jsxs("div",{children:[d.jsx(Qe,{className:"text-muted-foreground",children:"Registration Date"}),d.jsx("p",{children:new Date(S.created_at).toLocaleDateString()})]})]})})]}),d.jsxs(xg,{className:"flex justify-between",children:[d.jsxs(De,{variant:"destructive",onClick:je,className:"flex items-center gap-2",children:[d.jsx(T0,{className:"h-4 w-4"}),"Delete User"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(De,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),d.jsxs(De,{onClick:Ee,className:"flex items-center gap-2",children:[d.jsx(HE,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),d.jsx(Xs,{open:G,onOpenChange:H,children:d.jsxs(_s,{className:"max-w-2xl",children:[d.jsx(bi,{children:d.jsx(_i,{children:"Create New User"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-name",children:"Full Name *"}),d.jsx(ot,{id:"create-name",value:Z,onChange:he=>K(he.target.value),placeholder:"Enter full name"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-phone",children:"Phone"}),d.jsx(ot,{id:"create-phone",value:fe,onChange:he=>ze(he.target.value),placeholder:"Enter phone number"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-email",children:"Email *"}),d.jsx(ot,{id:"create-email",type:"email",value:ne,onChange:he=>pe(he.target.value),placeholder:"Enter email address"})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-password",children:"Password *"}),d.jsx(ot,{id:"create-password",type:"password",value:ae,onChange:he=>le(he.target.value),placeholder:"Enter password"})]})]}),d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-role",children:"Role *"}),d.jsxs(gs,{value:te,onValueChange:he=>J(he),children:[d.jsx(Gn,{children:d.jsx(xs,{})}),d.jsxs(Yn,{children:[d.jsx(rt,{value:"customer",children:"Customer"}),d.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),d.jsx(rt,{value:"admin",children:"Admin"})]})]})]}),te==="restaurant_owner"&&d.jsxs("div",{children:[d.jsx(Qe,{htmlFor:"create-restaurant",children:"Link to Restaurant"}),d.jsxs(gs,{value:ve||"",onValueChange:be,children:[d.jsx(Gn,{children:d.jsx(xs,{placeholder:"Select a restaurant (optional)"})}),d.jsx(Yn,{children:z.map(he=>d.jsx(rt,{value:he.id,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Th,{className:"h-4 w-4"}),he.name]})},he.id))})]}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"You can link the user to a restaurant later if needed"})]}),d.jsx("div",{className:"bg-muted p-3 rounded-md",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"* Required fields. The user will receive an email confirmation to activate their account."})})]}),d.jsxs(xg,{children:[d.jsx(De,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),d.jsxs(De,{onClick:Me,className:"flex items-center gap-2",children:[d.jsx(ko,{className:"h-4 w-4"}),"Create User"]})]})]})})]})})},XV=()=>{const t=Ko();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),d.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),d.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),d.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},KV=new I6,QV=()=>d.jsx(O6,{client:KV,children:d.jsx(i7,{children:d.jsxs(o6,{children:[d.jsx(Vj,{}),d.jsx(vk,{}),d.jsx(T5,{children:d.jsxs(b5,{children:[d.jsx(Ur,{path:"/",element:d.jsx(E9,{})}),d.jsx(Ur,{path:"/auth",element:d.jsx(V9,{})}),d.jsx(Ur,{path:"/home",element:d.jsx(G9,{})}),d.jsx(Ur,{path:"/orders",element:d.jsx(_F,{})}),d.jsx(Ur,{path:"/blog",element:d.jsx(ZF,{})}),d.jsx(Ur,{path:"/profile",element:d.jsx(DF,{})}),d.jsx(Ur,{path:"/restaurant/:id",element:d.jsx(JB,{})}),d.jsx(Ur,{path:"/payment",element:d.jsx(dF,{})}),d.jsx(Ur,{path:"/confirmation",element:d.jsx(bF,{})}),d.jsx(Ur,{path:"/dashboard",element:d.jsx(UV,{})}),d.jsx(Ur,{path:"/admin",element:d.jsx(zV,{})}),d.jsx(Ur,{path:"/admin/restaurants",element:d.jsx($V,{})}),d.jsx(Ur,{path:"/admin/owners",element:d.jsx(WV,{})}),d.jsx(Ur,{path:"/admin/orders",element:d.jsx(YV,{})}),d.jsx(Ur,{path:"/admin/users",element:d.jsx(qV,{})}),d.jsx(Ur,{path:"*",element:d.jsx(XV,{})})]})})]})})});iE(document.getElementById("root")).render(d.jsx(QV,{}));
