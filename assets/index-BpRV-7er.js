var Cw=t=>{throw TypeError(t)};var Am=(t,e,r)=>e.has(t)||Cw("Cannot "+r);var de=(t,e,r)=>(Am(t,e,"read from private field"),r?r.call(t):e.get(t)),yt=(t,e,r)=>e.has(t)?Cw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ke=(t,e,r,n)=>(Am(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Xr=(t,e,r)=>(Am(t,e,"access private method"),r);var eh=(t,e,r,n)=>({set _(s){Ke(t,e,s,r)},get _(){return de(t,e,n)}});function Dg(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Kb={exports:{}},u0={},Qb={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd=Symbol.for("react.element"),TR=Symbol.for("react.portal"),IR=Symbol.for("react.fragment"),RR=Symbol.for("react.strict_mode"),OR=Symbol.for("react.profiler"),jR=Symbol.for("react.provider"),MR=Symbol.for("react.context"),kR=Symbol.for("react.forward_ref"),PR=Symbol.for("react.suspense"),DR=Symbol.for("react.memo"),LR=Symbol.for("react.lazy"),Ew=Symbol.iterator;function BR(t){return t===null||typeof t!="object"?null:(t=Ew&&t[Ew]||t["@@iterator"],typeof t=="function"?t:null)}var Zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jb=Object.assign,e_={};function jc(t,e,r){this.props=t,this.context=e,this.refs=e_,this.updater=r||Zb}jc.prototype.isReactComponent={};jc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t_(){}t_.prototype=jc.prototype;function Bg(t,e,r){this.props=t,this.context=e,this.refs=e_,this.updater=r||Zb}var Fg=Bg.prototype=new t_;Fg.constructor=Bg;Jb(Fg,jc.prototype);Fg.isPureReactComponent=!0;var Sw=Array.isArray,r_=Object.prototype.hasOwnProperty,Ug={current:null},n_={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,e,r){var n,s={},i=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)r_.call(e,n)&&!n_.hasOwnProperty(n)&&(s[n]=e[n]);var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){for(var m=Array(d),f=0;f<d;f++)m[f]=arguments[f+2];s.children=m}if(t&&t.defaultProps)for(n in d=t.defaultProps,d)s[n]===void 0&&(s[n]=d[n]);return{$$typeof:Nd,type:t,key:i,ref:l,props:s,_owner:Ug.current}}function FR(t,e){return{$$typeof:Nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nd}function UR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Nw=/\/+/g;function Tm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UR(""+t.key):e.toString(36)}function Bh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Nd:case TR:l=!0}}if(l)return l=t,s=s(l),t=n===""?"."+Tm(l,0):n,Sw(s)?(r="",t!=null&&(r=t.replace(Nw,"$&/")+"/"),Bh(s,e,r,"",function(f){return f})):s!=null&&(zg(s)&&(s=FR(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Nw,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=n===""?".":n+":",Sw(t))for(var d=0;d<t.length;d++){i=t[d];var m=n+Tm(i,d);l+=Bh(i,e,r,m,s)}else if(m=BR(t),typeof m=="function")for(t=m.call(t),d=0;!(i=t.next()).done;)i=i.value,m=n+Tm(i,d++),l+=Bh(i,e,r,m,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function th(t,e,r){if(t==null)return t;var n=[],s=0;return Bh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function zR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Fh={transition:null},VR={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:Ug};function i_(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:th,forEach:function(t,e,r){th(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return th(t,function(){e++}),e},toArray:function(t){return th(t,function(e){return e})||[]},only:function(t){if(!zg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=jc;lt.Fragment=IR;lt.Profiler=OR;lt.PureComponent=Bg;lt.StrictMode=RR;lt.Suspense=PR;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VR;lt.act=i_;lt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Jb({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=Ug.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(m in e)r_.call(e,m)&&!n_.hasOwnProperty(m)&&(n[m]=e[m]===void 0&&d!==void 0?d[m]:e[m])}var m=arguments.length-2;if(m===1)n.children=r;else if(1<m){d=Array(m);for(var f=0;f<m;f++)d[f]=arguments[f+2];n.children=d}return{$$typeof:Nd,type:t.type,key:s,ref:i,props:n,_owner:l}};lt.createContext=function(t){return t={$$typeof:MR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jR,_context:t},t.Consumer=t};lt.createElement=s_;lt.createFactory=function(t){var e=s_.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:kR,render:t}};lt.isValidElement=zg;lt.lazy=function(t){return{$$typeof:LR,_payload:{_status:-1,_result:t},_init:zR}};lt.memo=function(t,e){return{$$typeof:DR,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=Fh.transition;Fh.transition={};try{t()}finally{Fh.transition=e}};lt.unstable_act=i_;lt.useCallback=function(t,e){return mn.current.useCallback(t,e)};lt.useContext=function(t){return mn.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};lt.useEffect=function(t,e){return mn.current.useEffect(t,e)};lt.useId=function(){return mn.current.useId()};lt.useImperativeHandle=function(t,e,r){return mn.current.useImperativeHandle(t,e,r)};lt.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return mn.current.useMemo(t,e)};lt.useReducer=function(t,e,r){return mn.current.useReducer(t,e,r)};lt.useRef=function(t){return mn.current.useRef(t)};lt.useState=function(t){return mn.current.useState(t)};lt.useSyncExternalStore=function(t,e,r){return mn.current.useSyncExternalStore(t,e,r)};lt.useTransition=function(){return mn.current.useTransition()};lt.version="18.3.1";Qb.exports=lt;var E=Qb.exports;const pe=Lg(E),Vg=Dg({__proto__:null,default:pe},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR=E,$R=Symbol.for("react.element"),WR=Symbol.for("react.fragment"),GR=Object.prototype.hasOwnProperty,YR=HR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qR={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,r){var n,s={},i=null,l=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)GR.call(e,n)&&!qR.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:$R,type:t,key:i,ref:l,props:s,_owner:YR.current}}u0.Fragment=WR;u0.jsx=o_;u0.jsxs=o_;Kb.exports=u0;var u=Kb.exports,a_={exports:{}},es={},l_={exports:{}},c_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Q){var ie=q.length;q.push(Q);e:for(;0<ie;){var fe=ie-1>>>1,oe=q[fe];if(0<s(oe,Q))q[fe]=Q,q[ie]=oe,ie=fe;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Q=q[0],ie=q.pop();if(ie!==Q){q[0]=ie;e:for(var fe=0,oe=q.length,le=oe>>>1;fe<le;){var ce=2*(fe+1)-1,Be=q[ce],xe=ce+1,be=q[xe];if(0>s(Be,ie))xe<oe&&0>s(be,Be)?(q[fe]=be,q[xe]=ie,fe=xe):(q[fe]=Be,q[ce]=ie,fe=ce);else if(xe<oe&&0>s(be,ie))q[fe]=be,q[xe]=ie,fe=xe;else break e}}return Q}function s(q,Q){var ie=q.sortIndex-Q.sortIndex;return ie!==0?ie:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var m=[],f=[],x=1,y=null,v=3,b=!1,S=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var Q=r(f);Q!==null;){if(Q.callback===null)n(f);else if(Q.startTime<=q)n(f),Q.sortIndex=Q.expirationTime,e(m,Q);else break;Q=r(f)}}function O(q){if(_=!1,A(q),!S)if(r(m)!==null)S=!0,J(k);else{var Q=r(f);Q!==null&&Y(O,Q.startTime-q)}}function k(q,Q){S=!1,_&&(_=!1,R(P),P=-1),b=!0;var ie=v;try{for(A(Q),y=r(m);y!==null&&(!(y.expirationTime>Q)||q&&!G());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,v=y.priorityLevel;var oe=fe(y.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?y.callback=oe:y===r(m)&&n(m),A(Q)}else n(m);y=r(m)}if(y!==null)var le=!0;else{var ce=r(f);ce!==null&&Y(O,ce.startTime-Q),le=!1}return le}finally{y=null,v=ie,b=!1}}var F=!1,B=null,P=-1,M=5,$=-1;function G(){return!(t.unstable_now()-$<M)}function K(){if(B!==null){var q=t.unstable_now();$=q;var Q=!0;try{Q=B(!0,q)}finally{Q?ee():(F=!1,B=null)}}else F=!1}var ee;if(typeof N=="function")ee=function(){N(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=K,ee=function(){V.postMessage(null)}}else ee=function(){I(K,0)};function J(q){B=q,F||(F=!0,ee())}function Y(q,Q){P=I(function(){q(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,J(k))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var ie=v;v=Q;try{return q()}finally{v=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=v;v=q;try{return Q()}finally{v=ie}},t.unstable_scheduleCallback=function(q,Q,ie){var fe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,q){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ie+oe,q={id:x++,callback:Q,priorityLevel:q,startTime:ie,expirationTime:oe,sortIndex:-1},ie>fe?(q.sortIndex=ie,e(f,q),r(m)===null&&q===r(f)&&(_?(R(P),P=-1):_=!0,Y(O,ie-fe))):(q.sortIndex=oe,e(m,q),S||b||(S=!0,J(k))),q},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(q){var Q=v;return function(){var ie=v;v=Q;try{return q.apply(this,arguments)}finally{v=ie}}}})(c_);l_.exports=c_;var XR=l_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR=E,Qn=XR;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u_=new Set,Uu={};function Ka(t,e){hc(t,e),hc(t+"Capture",e)}function hc(t,e){for(Uu[t]=e,t=0;t<e.length;t++)u_.add(e[t])}var zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=Object.prototype.hasOwnProperty,QR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Aw={},Tw={};function ZR(t){return Dp.call(Tw,t)?!0:Dp.call(Aw,t)?!1:QR.test(t)?Tw[t]=!0:(Aw[t]=!0,!1)}function JR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eO(t,e,r,n){if(e===null||typeof e>"u"||JR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,r,n,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wr[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wr[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wr[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wr[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wr[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wr[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wr[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wr[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wr[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hg=/[\-:]([a-z])/g;function $g(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hg,$g);Wr[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hg,$g);Wr[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hg,$g);Wr[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wr[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wr[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wg(t,e,r,n){var s=Wr.hasOwnProperty(e)?Wr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eO(e,r,s,n)&&(r=null),n||s===null?ZR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Xi=KR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rh=Symbol.for("react.element"),Il=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),Lp=Symbol.for("react.profiler"),d_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),Yg=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),Fp=Symbol.for("react.suspense_list"),qg=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),f_=Symbol.for("react.offscreen"),Iw=Symbol.iterator;function ru(t){return t===null||typeof t!="object"?null:(t=Iw&&t[Iw]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Im;function pu(t){if(Im===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Im=e&&e[1]||""}return`
`+Im+t}var Rm=!1;function Om(t,e){if(!t||Rm)return"";Rm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var n=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){n=f}t.call(e.prototype)}else{try{throw Error()}catch(f){n=f}t()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),i=n.stack.split(`
`),l=s.length-1,d=i.length-1;1<=l&&0<=d&&s[l]!==i[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==i[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==i[d]){var m=`
`+s[l].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=l&&0<=d);break}}}finally{Rm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?pu(t):""}function tO(t){switch(t.tag){case 5:return pu(t.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return t=Om(t.type,!1),t;case 11:return t=Om(t.type.render,!1),t;case 1:return t=Om(t.type,!0),t;default:return""}}function Up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rl:return"Fragment";case Il:return"Portal";case Lp:return"Profiler";case Gg:return"StrictMode";case Bp:return"Suspense";case Fp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h_:return(t.displayName||"Context")+".Consumer";case d_:return(t._context.displayName||"Context")+".Provider";case Yg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qg:return e=t.displayName||null,e!==null?e:Up(t.type)||"Memo";case co:e=t._payload,t=t._init;try{return Up(t(e))}catch{}}return null}function rO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Up(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nO(t){var e=m_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nh(t){t._valueTracker||(t._valueTracker=nO(t))}function p_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=m_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function lf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zp(t,e){var r=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Rw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function g_(t,e){e=e.checked,e!=null&&Wg(t,"checked",e,!1)}function Vp(t,e){g_(t,e);var r=Bo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Hp(t,e.type,Bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ow(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Hp(t,e,r){(e!=="number"||lf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gu=Array.isArray;function Wl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bo(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(gu(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bo(r)}}function x_(t,e){var r=Bo(e.value),n=Bo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Mw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sh,w_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sh=sh||document.createElement("div"),sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sO=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(t){sO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eu[e]=Eu[t]})});function v_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Eu.hasOwnProperty(t)&&Eu[t]?(""+e).trim():e+"px"}function b_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=v_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var iO=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gp(t,e){if(e){if(iO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function Yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=null;function Xg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xp=null,Gl=null,Yl=null;function kw(t){if(t=Id(t)){if(typeof Xp!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=p0(e),Xp(t.stateNode,t.type,e))}}function __(t){Gl?Yl?Yl.push(t):Yl=[t]:Gl=t}function C_(){if(Gl){var t=Gl,e=Yl;if(Yl=Gl=null,kw(t),e)for(t=0;t<e.length;t++)kw(e[t])}}function E_(t,e){return t(e)}function S_(){}var jm=!1;function N_(t,e,r){if(jm)return t(e,r);jm=!0;try{return E_(t,e,r)}finally{jm=!1,(Gl!==null||Yl!==null)&&(S_(),C_())}}function Vu(t,e){var r=t.stateNode;if(r===null)return null;var n=p0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var Kp=!1;if(zi)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{Kp=!1}function oO(t,e,r,n,s,i,l,d,m){var f=Array.prototype.slice.call(arguments,3);try{e.apply(r,f)}catch(x){this.onError(x)}}var Su=!1,cf=null,uf=!1,Qp=null,aO={onError:function(t){Su=!0,cf=t}};function lO(t,e,r,n,s,i,l,d,m){Su=!1,cf=null,oO.apply(aO,arguments)}function cO(t,e,r,n,s,i,l,d,m){if(lO.apply(this,arguments),Su){if(Su){var f=cf;Su=!1,cf=null}else throw Error(ye(198));uf||(uf=!0,Qp=f)}}function Qa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function A_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pw(t){if(Qa(t)!==t)throw Error(ye(188))}function uO(t){var e=t.alternate;if(!e){if(e=Qa(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Pw(s),t;if(i===n)return Pw(s),e;i=i.sibling}throw Error(ye(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,d=s.child;d;){if(d===r){l=!0,r=s,n=i;break}if(d===n){l=!0,n=s,r=i;break}d=d.sibling}if(!l){for(d=i.child;d;){if(d===r){l=!0,r=i,n=s;break}if(d===n){l=!0,n=i,r=s;break}d=d.sibling}if(!l)throw Error(ye(189))}}if(r.alternate!==n)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?t:e}function T_(t){return t=uO(t),t!==null?I_(t):null}function I_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=I_(t);if(e!==null)return e;t=t.sibling}return null}var R_=Qn.unstable_scheduleCallback,Dw=Qn.unstable_cancelCallback,dO=Qn.unstable_shouldYield,hO=Qn.unstable_requestPaint,mr=Qn.unstable_now,fO=Qn.unstable_getCurrentPriorityLevel,Kg=Qn.unstable_ImmediatePriority,O_=Qn.unstable_UserBlockingPriority,df=Qn.unstable_NormalPriority,mO=Qn.unstable_LowPriority,j_=Qn.unstable_IdlePriority,d0=null,mi=null;function pO(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(d0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:yO,gO=Math.log,xO=Math.LN2;function yO(t){return t>>>=0,t===0?32:31-(gO(t)/xO|0)|0}var ih=64,oh=4194304;function xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hf(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var d=l&~s;d!==0?n=xu(d):(i&=l,i!==0&&(n=xu(i)))}else l=r&~s,l!==0?n=xu(l):i!==0&&(n=xu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vs(e),s=1<<r,n|=t[r],e&=~s;return n}function wO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vO(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Vs(i),d=1<<l,m=s[l];m===-1?(!(d&r)||d&n)&&(s[l]=wO(d,e)):m<=e&&(t.expiredLanes|=d),i&=~d}}function Zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M_(){var t=ih;return ih<<=1,!(ih&4194240)&&(ih=64),t}function Mm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ad(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=r}function bO(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Vs(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Qg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vs(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Et=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P_,Zg,D_,L_,B_,Jp=!1,ah=[],No=null,Ao=null,To=null,Hu=new Map,$u=new Map,ho=[],_O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lw(t,e){switch(t){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(e.pointerId)}}function su(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Id(e),e!==null&&Zg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CO(t,e,r,n,s){switch(e){case"focusin":return No=su(No,t,e,r,n,s),!0;case"dragenter":return Ao=su(Ao,t,e,r,n,s),!0;case"mouseover":return To=su(To,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Hu.set(i,su(Hu.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,$u.set(i,su($u.get(i)||null,t,e,r,n,s)),!0}return!1}function F_(t){var e=wa(t.target);if(e!==null){var r=Qa(e);if(r!==null){if(e=r.tag,e===13){if(e=A_(r),e!==null){t.blockedOn=e,B_(t.priority,function(){D_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=e1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);qp=n,r.target.dispatchEvent(n),qp=null}else return e=Id(r),e!==null&&Zg(e),t.blockedOn=r,!1;e.shift()}return!0}function Bw(t,e,r){Uh(t)&&r.delete(e)}function EO(){Jp=!1,No!==null&&Uh(No)&&(No=null),Ao!==null&&Uh(Ao)&&(Ao=null),To!==null&&Uh(To)&&(To=null),Hu.forEach(Bw),$u.forEach(Bw)}function iu(t,e){t.blockedOn===e&&(t.blockedOn=null,Jp||(Jp=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,EO)))}function Wu(t){function e(s){return iu(s,t)}if(0<ah.length){iu(ah[0],t);for(var r=1;r<ah.length;r++){var n=ah[r];n.blockedOn===t&&(n.blockedOn=null)}}for(No!==null&&iu(No,t),Ao!==null&&iu(Ao,t),To!==null&&iu(To,t),Hu.forEach(e),$u.forEach(e),r=0;r<ho.length;r++)n=ho[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ho.length&&(r=ho[0],r.blockedOn===null);)F_(r),r.blockedOn===null&&ho.shift()}var ql=Xi.ReactCurrentBatchConfig,ff=!0;function SO(t,e,r,n){var s=Et,i=ql.transition;ql.transition=null;try{Et=1,Jg(t,e,r,n)}finally{Et=s,ql.transition=i}}function NO(t,e,r,n){var s=Et,i=ql.transition;ql.transition=null;try{Et=4,Jg(t,e,r,n)}finally{Et=s,ql.transition=i}}function Jg(t,e,r,n){if(ff){var s=e1(t,e,r,n);if(s===null)Hm(t,e,n,mf,r),Lw(t,n);else if(CO(s,t,e,r,n))n.stopPropagation();else if(Lw(t,n),e&4&&-1<_O.indexOf(t)){for(;s!==null;){var i=Id(s);if(i!==null&&P_(i),i=e1(t,e,r,n),i===null&&Hm(t,e,n,mf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Hm(t,e,n,null,r)}}var mf=null;function e1(t,e,r,n){if(mf=null,t=Xg(n),t=wa(t),t!==null)if(e=Qa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=A_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mf=t,null}function U_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fO()){case Kg:return 1;case O_:return 4;case df:case mO:return 16;case j_:return 536870912;default:return 16}default:return 16}}var vo=null,ex=null,zh=null;function z_(){if(zh)return zh;var t,e=ex,r=e.length,n,s="value"in vo?vo.value:vo.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===s[i-n];n++);return zh=s.slice(t,1<n?1-n:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function Fw(){return!1}function ts(t){function e(r,n,s,i,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lh:Fw,this.isPropagationStopped=Fw,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var Mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tx=ts(Mc),Td=Jt({},Mc,{view:0,detail:0}),AO=ts(Td),km,Pm,ou,h0=Jt({},Td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ou&&(ou&&t.type==="mousemove"?(km=t.screenX-ou.screenX,Pm=t.screenY-ou.screenY):Pm=km=0,ou=t),km)},movementY:function(t){return"movementY"in t?t.movementY:Pm}}),Uw=ts(h0),TO=Jt({},h0,{dataTransfer:0}),IO=ts(TO),RO=Jt({},Td,{relatedTarget:0}),Dm=ts(RO),OO=Jt({},Mc,{animationName:0,elapsedTime:0,pseudoElement:0}),jO=ts(OO),MO=Jt({},Mc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kO=ts(MO),PO=Jt({},Mc,{data:0}),zw=ts(PO),DO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BO[t])?!!e[t]:!1}function rx(){return FO}var UO=Jt({},Td,{key:function(t){if(t.key){var e=DO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rx,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zO=ts(UO),VO=Jt({},h0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vw=ts(VO),HO=Jt({},Td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rx}),$O=ts(HO),WO=Jt({},Mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),GO=ts(WO),YO=Jt({},h0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qO=ts(YO),XO=[9,13,27,32],nx=zi&&"CompositionEvent"in window,Nu=null;zi&&"documentMode"in document&&(Nu=document.documentMode);var KO=zi&&"TextEvent"in window&&!Nu,V_=zi&&(!nx||Nu&&8<Nu&&11>=Nu),Hw=" ",$w=!1;function H_(t,e){switch(t){case"keyup":return XO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ol=!1;function QO(t,e){switch(t){case"compositionend":return $_(e);case"keypress":return e.which!==32?null:($w=!0,Hw);case"textInput":return t=e.data,t===Hw&&$w?null:t;default:return null}}function ZO(t,e){if(Ol)return t==="compositionend"||!nx&&H_(t,e)?(t=z_(),zh=ex=vo=null,Ol=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V_&&e.locale!=="ko"?null:e.data;default:return null}}var JO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JO[t.type]:e==="textarea"}function W_(t,e,r,n){__(n),e=pf(e,"onChange"),0<e.length&&(r=new tx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Au=null,Gu=null;function e8(t){rC(t,0)}function f0(t){var e=kl(t);if(p_(e))return t}function t8(t,e){if(t==="change")return e}var G_=!1;if(zi){var Lm;if(zi){var Bm="oninput"in document;if(!Bm){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),Bm=typeof Gw.oninput=="function"}Lm=Bm}else Lm=!1;G_=Lm&&(!document.documentMode||9<document.documentMode)}function Yw(){Au&&(Au.detachEvent("onpropertychange",Y_),Gu=Au=null)}function Y_(t){if(t.propertyName==="value"&&f0(Gu)){var e=[];W_(e,Gu,t,Xg(t)),N_(e8,e)}}function r8(t,e,r){t==="focusin"?(Yw(),Au=e,Gu=r,Au.attachEvent("onpropertychange",Y_)):t==="focusout"&&Yw()}function n8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return f0(Gu)}function s8(t,e){if(t==="click")return f0(e)}function i8(t,e){if(t==="input"||t==="change")return f0(e)}function o8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gs=typeof Object.is=="function"?Object.is:o8;function Yu(t,e){if(Gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Dp.call(e,s)||!Gs(t[s],e[s]))return!1}return!0}function qw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xw(t,e){var r=qw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qw(r)}}function q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X_(){for(var t=window,e=lf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=lf(t.document)}return e}function sx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a8(t){var e=X_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&q_(r.ownerDocument.documentElement,r)){if(n!==null&&sx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Xw(r,i);var l=Xw(r,n);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l8=zi&&"documentMode"in document&&11>=document.documentMode,jl=null,t1=null,Tu=null,r1=!1;function Kw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;r1||jl==null||jl!==lf(n)||(n=jl,"selectionStart"in n&&sx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Tu&&Yu(Tu,n)||(Tu=n,n=pf(t1,"onSelect"),0<n.length&&(e=new tx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jl)))}function ch(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ml={animationend:ch("Animation","AnimationEnd"),animationiteration:ch("Animation","AnimationIteration"),animationstart:ch("Animation","AnimationStart"),transitionend:ch("Transition","TransitionEnd")},Fm={},K_={};zi&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function m0(t){if(Fm[t])return Fm[t];if(!Ml[t])return t;var e=Ml[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in K_)return Fm[t]=e[r];return t}var Q_=m0("animationend"),Z_=m0("animationiteration"),J_=m0("animationstart"),eC=m0("transitionend"),tC=new Map,Qw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Go(t,e){tC.set(t,e),Ka(e,[t])}for(var Um=0;Um<Qw.length;Um++){var zm=Qw[Um],c8=zm.toLowerCase(),u8=zm[0].toUpperCase()+zm.slice(1);Go(c8,"on"+u8)}Go(Q_,"onAnimationEnd");Go(Z_,"onAnimationIteration");Go(J_,"onAnimationStart");Go("dblclick","onDoubleClick");Go("focusin","onFocus");Go("focusout","onBlur");Go(eC,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d8=new Set("cancel close invalid load scroll toggle".split(" ").concat(yu));function Zw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cO(n,e,void 0,t),t.currentTarget=null}function rC(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var l=n.length-1;0<=l;l--){var d=n[l],m=d.instance,f=d.currentTarget;if(d=d.listener,m!==i&&s.isPropagationStopped())break e;Zw(s,d,f),i=m}else for(l=0;l<n.length;l++){if(d=n[l],m=d.instance,f=d.currentTarget,d=d.listener,m!==i&&s.isPropagationStopped())break e;Zw(s,d,f),i=m}}}if(uf)throw t=Qp,uf=!1,Qp=null,t}function Lt(t,e){var r=e[a1];r===void 0&&(r=e[a1]=new Set);var n=t+"__bubble";r.has(n)||(nC(e,t,2,!1),r.add(n))}function Vm(t,e,r){var n=0;e&&(n|=4),nC(r,t,n,e)}var uh="_reactListening"+Math.random().toString(36).slice(2);function qu(t){if(!t[uh]){t[uh]=!0,u_.forEach(function(r){r!=="selectionchange"&&(d8.has(r)||Vm(r,!1,t),Vm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uh]||(e[uh]=!0,Vm("selectionchange",!1,e))}}function nC(t,e,r,n){switch(U_(e)){case 1:var s=SO;break;case 4:s=NO;break;default:s=Jg}r=s.bind(null,e,r,t),s=void 0,!Kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Hm(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var d=n.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var m=l.tag;if((m===3||m===4)&&(m=l.stateNode.containerInfo,m===s||m.nodeType===8&&m.parentNode===s))return;l=l.return}for(;d!==null;){if(l=wa(d),l===null)return;if(m=l.tag,m===5||m===6){n=i=l;continue e}d=d.parentNode}}n=n.return}N_(function(){var f=i,x=Xg(r),y=[];e:{var v=tC.get(t);if(v!==void 0){var b=tx,S=t;switch(t){case"keypress":if(Vh(r)===0)break e;case"keydown":case"keyup":b=zO;break;case"focusin":S="focus",b=Dm;break;case"focusout":S="blur",b=Dm;break;case"beforeblur":case"afterblur":b=Dm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Uw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=IO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=$O;break;case Q_:case Z_:case J_:b=jO;break;case eC:b=GO;break;case"scroll":b=AO;break;case"wheel":b=qO;break;case"copy":case"cut":case"paste":b=kO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Vw}var _=(e&4)!==0,I=!_&&t==="scroll",R=_?v!==null?v+"Capture":null:v;_=[];for(var N=f,A;N!==null;){A=N;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,R!==null&&(O=Vu(N,R),O!=null&&_.push(Xu(N,O,A)))),I)break;N=N.return}0<_.length&&(v=new b(v,S,null,r,x),y.push({event:v,listeners:_}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",v&&r!==qp&&(S=r.relatedTarget||r.fromElement)&&(wa(S)||S[Vi]))break e;if((b||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,b?(S=r.relatedTarget||r.toElement,b=f,S=S?wa(S):null,S!==null&&(I=Qa(S),S!==I||S.tag!==5&&S.tag!==6)&&(S=null)):(b=null,S=f),b!==S)){if(_=Uw,O="onMouseLeave",R="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(_=Vw,O="onPointerLeave",R="onPointerEnter",N="pointer"),I=b==null?v:kl(b),A=S==null?v:kl(S),v=new _(O,N+"leave",b,r,x),v.target=I,v.relatedTarget=A,O=null,wa(x)===f&&(_=new _(R,N+"enter",S,r,x),_.target=A,_.relatedTarget=I,O=_),I=O,b&&S)t:{for(_=b,R=S,N=0,A=_;A;A=gl(A))N++;for(A=0,O=R;O;O=gl(O))A++;for(;0<N-A;)_=gl(_),N--;for(;0<A-N;)R=gl(R),A--;for(;N--;){if(_===R||R!==null&&_===R.alternate)break t;_=gl(_),R=gl(R)}_=null}else _=null;b!==null&&Jw(y,v,b,_,!1),S!==null&&I!==null&&Jw(y,I,S,_,!0)}}e:{if(v=f?kl(f):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var k=t8;else if(Ww(v))if(G_)k=i8;else{k=n8;var F=r8}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(k=s8);if(k&&(k=k(t,f))){W_(y,k,r,x);break e}F&&F(t,v,f),t==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&Hp(v,"number",v.value)}switch(F=f?kl(f):window,t){case"focusin":(Ww(F)||F.contentEditable==="true")&&(jl=F,t1=f,Tu=null);break;case"focusout":Tu=t1=jl=null;break;case"mousedown":r1=!0;break;case"contextmenu":case"mouseup":case"dragend":r1=!1,Kw(y,r,x);break;case"selectionchange":if(l8)break;case"keydown":case"keyup":Kw(y,r,x)}var B;if(nx)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ol?H_(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(V_&&r.locale!=="ko"&&(Ol||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ol&&(B=z_()):(vo=x,ex="value"in vo?vo.value:vo.textContent,Ol=!0)),F=pf(f,P),0<F.length&&(P=new zw(P,t,null,r,x),y.push({event:P,listeners:F}),B?P.data=B:(B=$_(r),B!==null&&(P.data=B)))),(B=KO?QO(t,r):ZO(t,r))&&(f=pf(f,"onBeforeInput"),0<f.length&&(x=new zw("onBeforeInput","beforeinput",null,r,x),y.push({event:x,listeners:f}),x.data=B))}rC(y,e)})}function Xu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function pf(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vu(t,r),i!=null&&n.unshift(Xu(t,i,s)),i=Vu(t,e),i!=null&&n.push(Xu(t,i,s))),t=t.return}return n}function gl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jw(t,e,r,n,s){for(var i=e._reactName,l=[];r!==null&&r!==n;){var d=r,m=d.alternate,f=d.stateNode;if(m!==null&&m===n)break;d.tag===5&&f!==null&&(d=f,s?(m=Vu(r,i),m!=null&&l.unshift(Xu(r,m,d))):s||(m=Vu(r,i),m!=null&&l.push(Xu(r,m,d)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var h8=/\r\n?/g,f8=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(h8,`
`).replace(f8,"")}function dh(t,e,r){if(e=ev(e),ev(t)!==e&&r)throw Error(ye(425))}function gf(){}var n1=null,s1=null;function i1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var o1=typeof setTimeout=="function"?setTimeout:void 0,m8=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,p8=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(g8)}:o1;function g8(t){setTimeout(function(){throw t})}function $m(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Wu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Wu(e)}function Io(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kc=Math.random().toString(36).slice(2),ui="__reactFiber$"+kc,Ku="__reactProps$"+kc,Vi="__reactContainer$"+kc,a1="__reactEvents$"+kc,x8="__reactListeners$"+kc,y8="__reactHandles$"+kc;function wa(t){var e=t[ui];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Vi]||r[ui]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=rv(t);t!==null;){if(r=t[ui])return r;t=rv(t)}return e}t=r,r=t.parentNode}return null}function Id(t){return t=t[ui]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function p0(t){return t[Ku]||null}var l1=[],Pl=-1;function Yo(t){return{current:t}}function Ft(t){0>Pl||(t.current=l1[Pl],l1[Pl]=null,Pl--)}function kt(t,e){Pl++,l1[Pl]=t.current,t.current=e}var Fo={},rn=Yo(Fo),Nn=Yo(!1),Ba=Fo;function fc(t,e){var r=t.type.contextTypes;if(!r)return Fo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function An(t){return t=t.childContextTypes,t!=null}function xf(){Ft(Nn),Ft(rn)}function nv(t,e,r){if(rn.current!==Fo)throw Error(ye(168));kt(rn,e),kt(Nn,r)}function sC(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ye(108,rO(t)||"Unknown",s));return Jt({},r,n)}function yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,Ba=rn.current,kt(rn,t),kt(Nn,Nn.current),!0}function sv(t,e,r){var n=t.stateNode;if(!n)throw Error(ye(169));r?(t=sC(t,e,Ba),n.__reactInternalMemoizedMergedChildContext=t,Ft(Nn),Ft(rn),kt(rn,t)):Ft(Nn),kt(Nn,r)}var Mi=null,g0=!1,Wm=!1;function iC(t){Mi===null?Mi=[t]:Mi.push(t)}function w8(t){g0=!0,iC(t)}function qo(){if(!Wm&&Mi!==null){Wm=!0;var t=0,e=Et;try{var r=Mi;for(Et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Mi=null,g0=!1}catch(s){throw Mi!==null&&(Mi=Mi.slice(t+1)),R_(Kg,qo),s}finally{Et=e,Wm=!1}}return null}var Dl=[],Ll=0,wf=null,vf=0,cs=[],us=0,Fa=null,Di=1,Li="";function fa(t,e){Dl[Ll++]=vf,Dl[Ll++]=wf,wf=t,vf=e}function oC(t,e,r){cs[us++]=Di,cs[us++]=Li,cs[us++]=Fa,Fa=t;var n=Di;t=Li;var s=32-Vs(n)-1;n&=~(1<<s),r+=1;var i=32-Vs(e)+s;if(30<i){var l=s-s%5;i=(n&(1<<l)-1).toString(32),n>>=l,s-=l,Di=1<<32-Vs(e)+s|r<<s|n,Li=i+t}else Di=1<<i|r<<s|n,Li=t}function ix(t){t.return!==null&&(fa(t,1),oC(t,1,0))}function ox(t){for(;t===wf;)wf=Dl[--Ll],Dl[Ll]=null,vf=Dl[--Ll],Dl[Ll]=null;for(;t===Fa;)Fa=cs[--us],cs[us]=null,Li=cs[--us],cs[us]=null,Di=cs[--us],cs[us]=null}var qn=null,$n=null,$t=!1,Us=null;function aC(t,e){var r=hs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function iv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,$n=Io(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Fa!==null?{id:Di,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,qn=t,$n=null,!0):!1;default:return!1}}function c1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function u1(t){if($t){var e=$n;if(e){var r=e;if(!iv(t,e)){if(c1(t))throw Error(ye(418));e=Io(r.nextSibling);var n=qn;e&&iv(t,e)?aC(n,r):(t.flags=t.flags&-4097|2,$t=!1,qn=t)}}else{if(c1(t))throw Error(ye(418));t.flags=t.flags&-4097|2,$t=!1,qn=t}}}function ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function hh(t){if(t!==qn)return!1;if(!$t)return ov(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!i1(t.type,t.memoizedProps)),e&&(e=$n)){if(c1(t))throw lC(),Error(ye(418));for(;e;)aC(t,e),e=Io(e.nextSibling)}if(ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$n=Io(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=qn?Io(t.stateNode.nextSibling):null;return!0}function lC(){for(var t=$n;t;)t=Io(t.nextSibling)}function mc(){$n=qn=null,$t=!1}function ax(t){Us===null?Us=[t]:Us.push(t)}var v8=Xi.ReactCurrentBatchConfig;function au(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var n=r.stateNode}if(!n)throw Error(ye(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var d=s.refs;l===null?delete d[i]:d[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function av(t){var e=t._init;return e(t._payload)}function cC(t){function e(R,N){if(t){var A=R.deletions;A===null?(R.deletions=[N],R.flags|=16):A.push(N)}}function r(R,N){if(!t)return null;for(;N!==null;)e(R,N),N=N.sibling;return null}function n(R,N){for(R=new Map;N!==null;)N.key!==null?R.set(N.key,N):R.set(N.index,N),N=N.sibling;return R}function s(R,N){return R=Mo(R,N),R.index=0,R.sibling=null,R}function i(R,N,A){return R.index=A,t?(A=R.alternate,A!==null?(A=A.index,A<N?(R.flags|=2,N):A):(R.flags|=2,N)):(R.flags|=1048576,N)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function d(R,N,A,O){return N===null||N.tag!==6?(N=Zm(A,R.mode,O),N.return=R,N):(N=s(N,A),N.return=R,N)}function m(R,N,A,O){var k=A.type;return k===Rl?x(R,N,A.props.children,O,A.key):N!==null&&(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&av(k)===N.type)?(O=s(N,A.props),O.ref=au(R,N,A),O.return=R,O):(O=Xh(A.type,A.key,A.props,null,R.mode,O),O.ref=au(R,N,A),O.return=R,O)}function f(R,N,A,O){return N===null||N.tag!==4||N.stateNode.containerInfo!==A.containerInfo||N.stateNode.implementation!==A.implementation?(N=Jm(A,R.mode,O),N.return=R,N):(N=s(N,A.children||[]),N.return=R,N)}function x(R,N,A,O,k){return N===null||N.tag!==7?(N=Oa(A,R.mode,O,k),N.return=R,N):(N=s(N,A),N.return=R,N)}function y(R,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Zm(""+N,R.mode,A),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case rh:return A=Xh(N.type,N.key,N.props,null,R.mode,A),A.ref=au(R,null,N),A.return=R,A;case Il:return N=Jm(N,R.mode,A),N.return=R,N;case co:var O=N._init;return y(R,O(N._payload),A)}if(gu(N)||ru(N))return N=Oa(N,R.mode,A,null),N.return=R,N;fh(R,N)}return null}function v(R,N,A,O){var k=N!==null?N.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:d(R,N,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case rh:return A.key===k?m(R,N,A,O):null;case Il:return A.key===k?f(R,N,A,O):null;case co:return k=A._init,v(R,N,k(A._payload),O)}if(gu(A)||ru(A))return k!==null?null:x(R,N,A,O,null);fh(R,A)}return null}function b(R,N,A,O,k){if(typeof O=="string"&&O!==""||typeof O=="number")return R=R.get(A)||null,d(N,R,""+O,k);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case rh:return R=R.get(O.key===null?A:O.key)||null,m(N,R,O,k);case Il:return R=R.get(O.key===null?A:O.key)||null,f(N,R,O,k);case co:var F=O._init;return b(R,N,A,F(O._payload),k)}if(gu(O)||ru(O))return R=R.get(A)||null,x(N,R,O,k,null);fh(N,O)}return null}function S(R,N,A,O){for(var k=null,F=null,B=N,P=N=0,M=null;B!==null&&P<A.length;P++){B.index>P?(M=B,B=null):M=B.sibling;var $=v(R,B,A[P],O);if($===null){B===null&&(B=M);break}t&&B&&$.alternate===null&&e(R,B),N=i($,N,P),F===null?k=$:F.sibling=$,F=$,B=M}if(P===A.length)return r(R,B),$t&&fa(R,P),k;if(B===null){for(;P<A.length;P++)B=y(R,A[P],O),B!==null&&(N=i(B,N,P),F===null?k=B:F.sibling=B,F=B);return $t&&fa(R,P),k}for(B=n(R,B);P<A.length;P++)M=b(B,R,P,A[P],O),M!==null&&(t&&M.alternate!==null&&B.delete(M.key===null?P:M.key),N=i(M,N,P),F===null?k=M:F.sibling=M,F=M);return t&&B.forEach(function(G){return e(R,G)}),$t&&fa(R,P),k}function _(R,N,A,O){var k=ru(A);if(typeof k!="function")throw Error(ye(150));if(A=k.call(A),A==null)throw Error(ye(151));for(var F=k=null,B=N,P=N=0,M=null,$=A.next();B!==null&&!$.done;P++,$=A.next()){B.index>P?(M=B,B=null):M=B.sibling;var G=v(R,B,$.value,O);if(G===null){B===null&&(B=M);break}t&&B&&G.alternate===null&&e(R,B),N=i(G,N,P),F===null?k=G:F.sibling=G,F=G,B=M}if($.done)return r(R,B),$t&&fa(R,P),k;if(B===null){for(;!$.done;P++,$=A.next())$=y(R,$.value,O),$!==null&&(N=i($,N,P),F===null?k=$:F.sibling=$,F=$);return $t&&fa(R,P),k}for(B=n(R,B);!$.done;P++,$=A.next())$=b(B,R,P,$.value,O),$!==null&&(t&&$.alternate!==null&&B.delete($.key===null?P:$.key),N=i($,N,P),F===null?k=$:F.sibling=$,F=$);return t&&B.forEach(function(K){return e(R,K)}),$t&&fa(R,P),k}function I(R,N,A,O){if(typeof A=="object"&&A!==null&&A.type===Rl&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case rh:e:{for(var k=A.key,F=N;F!==null;){if(F.key===k){if(k=A.type,k===Rl){if(F.tag===7){r(R,F.sibling),N=s(F,A.props.children),N.return=R,R=N;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===co&&av(k)===F.type){r(R,F.sibling),N=s(F,A.props),N.ref=au(R,F,A),N.return=R,R=N;break e}r(R,F);break}else e(R,F);F=F.sibling}A.type===Rl?(N=Oa(A.props.children,R.mode,O,A.key),N.return=R,R=N):(O=Xh(A.type,A.key,A.props,null,R.mode,O),O.ref=au(R,N,A),O.return=R,R=O)}return l(R);case Il:e:{for(F=A.key;N!==null;){if(N.key===F)if(N.tag===4&&N.stateNode.containerInfo===A.containerInfo&&N.stateNode.implementation===A.implementation){r(R,N.sibling),N=s(N,A.children||[]),N.return=R,R=N;break e}else{r(R,N);break}else e(R,N);N=N.sibling}N=Jm(A,R.mode,O),N.return=R,R=N}return l(R);case co:return F=A._init,I(R,N,F(A._payload),O)}if(gu(A))return S(R,N,A,O);if(ru(A))return _(R,N,A,O);fh(R,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,N!==null&&N.tag===6?(r(R,N.sibling),N=s(N,A),N.return=R,R=N):(r(R,N),N=Zm(A,R.mode,O),N.return=R,R=N),l(R)):r(R,N)}return I}var pc=cC(!0),uC=cC(!1),bf=Yo(null),_f=null,Bl=null,lx=null;function cx(){lx=Bl=_f=null}function ux(t){var e=bf.current;Ft(bf),t._currentValue=e}function d1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xl(t,e){_f=t,lx=Bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function vs(t){var e=t._currentValue;if(lx!==t)if(t={context:t,memoizedValue:e,next:null},Bl===null){if(_f===null)throw Error(ye(308));Bl=t,_f.dependencies={lanes:0,firstContext:t}}else Bl=Bl.next=t;return e}var va=null;function dx(t){va===null?va=[t]:va.push(t)}function dC(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,dx(e)):(r.next=s.next,s.next=r),e.interleaved=r,Hi(t,n)}function Hi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var uo=!1;function hx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ro(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Hi(t,r)}return s=n.interleaved,s===null?(e.next=e,dx(n)):(e.next=s.next,s.next=e),n.interleaved=e,Hi(t,r)}function Hh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Qg(t,r)}}function lv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Cf(t,e,r,n){var s=t.updateQueue;uo=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var m=d,f=m.next;m.next=null,l===null?i=f:l.next=f,l=m;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==l&&(d===null?x.firstBaseUpdate=f:d.next=f,x.lastBaseUpdate=m))}if(i!==null){var y=s.baseState;l=0,x=f=m=null,d=i;do{var v=d.lane,b=d.eventTime;if((n&v)===v){x!==null&&(x=x.next={eventTime:b,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var S=t,_=d;switch(v=e,b=r,_.tag){case 1:if(S=_.payload,typeof S=="function"){y=S.call(b,y,v);break e}y=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=_.payload,v=typeof S=="function"?S.call(b,y,v):S,v==null)break e;y=Jt({},y,v);break e;case 2:uo=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[d]:v.push(d))}else b={eventTime:b,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(f=x=b,m=y):x=x.next=b,l|=v;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;v=d,d=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(x===null&&(m=y),s.baseState=m,s.firstBaseUpdate=f,s.lastBaseUpdate=x,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);za|=l,t.lanes=l,t.memoizedState=y}}function cv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ye(191,s));s.call(n)}}}var Rd={},pi=Yo(Rd),Qu=Yo(Rd),Zu=Yo(Rd);function ba(t){if(t===Rd)throw Error(ye(174));return t}function fx(t,e){switch(kt(Zu,e),kt(Qu,t),kt(pi,Rd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wp(e,t)}Ft(pi),kt(pi,e)}function gc(){Ft(pi),Ft(Qu),Ft(Zu)}function fC(t){ba(Zu.current);var e=ba(pi.current),r=Wp(e,t.type);e!==r&&(kt(Qu,t),kt(pi,r))}function mx(t){Qu.current===t&&(Ft(pi),Ft(Qu))}var qt=Yo(0);function Ef(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gm=[];function px(){for(var t=0;t<Gm.length;t++)Gm[t]._workInProgressVersionPrimary=null;Gm.length=0}var $h=Xi.ReactCurrentDispatcher,Ym=Xi.ReactCurrentBatchConfig,Ua=0,Zt=null,Ar=null,jr=null,Sf=!1,Iu=!1,Ju=0,b8=0;function Kr(){throw Error(ye(321))}function gx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Gs(t[r],e[r]))return!1;return!0}function xx(t,e,r,n,s,i){if(Ua=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$h.current=t===null||t.memoizedState===null?S8:N8,t=r(n,s),Iu){i=0;do{if(Iu=!1,Ju=0,25<=i)throw Error(ye(301));i+=1,jr=Ar=null,e.updateQueue=null,$h.current=A8,t=r(n,s)}while(Iu)}if($h.current=Nf,e=Ar!==null&&Ar.next!==null,Ua=0,jr=Ar=Zt=null,Sf=!1,e)throw Error(ye(300));return t}function yx(){var t=Ju!==0;return Ju=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?Zt.memoizedState=jr=t:jr=jr.next=t,jr}function bs(){if(Ar===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=Ar.next;var e=jr===null?Zt.memoizedState:jr.next;if(e!==null)jr=e,Ar=t;else{if(t===null)throw Error(ye(310));Ar=t,t={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},jr===null?Zt.memoizedState=jr=t:jr=jr.next=t}return jr}function ed(t,e){return typeof e=="function"?e(t):e}function qm(t){var e=bs(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var n=Ar,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var d=l=null,m=null,f=i;do{var x=f.lane;if((Ua&x)===x)m!==null&&(m=m.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:t(n,f.action);else{var y={lane:x,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};m===null?(d=m=y,l=n):m=m.next=y,Zt.lanes|=x,za|=x}f=f.next}while(f!==null&&f!==i);m===null?l=n:m.next=d,Gs(n,e.memoizedState)||(Sn=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=m,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,za|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Xm(t){var e=bs(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);Gs(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function mC(){}function pC(t,e){var r=Zt,n=bs(),s=e(),i=!Gs(n.memoizedState,s);if(i&&(n.memoizedState=s,Sn=!0),n=n.queue,wx(yC.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||jr!==null&&jr.memoizedState.tag&1){if(r.flags|=2048,td(9,xC.bind(null,r,n,s,e),void 0,null),Mr===null)throw Error(ye(349));Ua&30||gC(r,e,s)}return s}function gC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function xC(t,e,r,n){e.value=r,e.getSnapshot=n,wC(e)&&vC(t)}function yC(t,e,r){return r(function(){wC(e)&&vC(t)})}function wC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Gs(t,r)}catch{return!0}}function vC(t){var e=Hi(t,1);e!==null&&Hs(e,t,1,-1)}function uv(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:t},e.queue=t,t=t.dispatch=E8.bind(null,Zt,t),[e.memoizedState,t]}function td(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function bC(){return bs().memoizedState}function Wh(t,e,r,n){var s=si();Zt.flags|=t,s.memoizedState=td(1|e,r,void 0,n===void 0?null:n)}function x0(t,e,r,n){var s=bs();n=n===void 0?null:n;var i=void 0;if(Ar!==null){var l=Ar.memoizedState;if(i=l.destroy,n!==null&&gx(n,l.deps)){s.memoizedState=td(e,r,i,n);return}}Zt.flags|=t,s.memoizedState=td(1|e,r,i,n)}function dv(t,e){return Wh(8390656,8,t,e)}function wx(t,e){return x0(2048,8,t,e)}function _C(t,e){return x0(4,2,t,e)}function CC(t,e){return x0(4,4,t,e)}function EC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SC(t,e,r){return r=r!=null?r.concat([t]):null,x0(4,4,EC.bind(null,e,t),r)}function vx(){}function NC(t,e){var r=bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&gx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function AC(t,e){var r=bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&gx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function TC(t,e,r){return Ua&21?(Gs(r,e)||(r=M_(),Zt.lanes|=r,za|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=r)}function _8(t,e){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var n=Ym.transition;Ym.transition={};try{t(!1),e()}finally{Et=r,Ym.transition=n}}function IC(){return bs().memoizedState}function C8(t,e,r){var n=jo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},RC(t))OC(e,r);else if(r=dC(t,e,r,n),r!==null){var s=fn();Hs(r,t,n,s),jC(r,e,n)}}function E8(t,e,r){var n=jo(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(RC(t))OC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,d=i(l,r);if(s.hasEagerState=!0,s.eagerState=d,Gs(d,l)){var m=e.interleaved;m===null?(s.next=s,dx(e)):(s.next=m.next,m.next=s),e.interleaved=s;return}}catch{}finally{}r=dC(t,e,s,n),r!==null&&(s=fn(),Hs(r,t,n,s),jC(r,e,n))}}function RC(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function OC(t,e){Iu=Sf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function jC(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Qg(t,r)}}var Nf={readContext:vs,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},S8={readContext:vs,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:vs,useEffect:dv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Wh(4194308,4,EC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Wh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wh(4,2,t,e)},useMemo:function(t,e){var r=si();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=si();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=C8.bind(null,Zt,t),[n.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:uv,useDebugValue:vx,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=uv(!1),e=t[0];return t=_8.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zt,s=si();if($t){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),Mr===null)throw Error(ye(349));Ua&30||gC(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,dv(yC.bind(null,n,i,t),[t]),n.flags|=2048,td(9,xC.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=si(),e=Mr.identifierPrefix;if($t){var r=Li,n=Di;r=(n&~(1<<32-Vs(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ju++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=b8++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},N8={readContext:vs,useCallback:NC,useContext:vs,useEffect:wx,useImperativeHandle:SC,useInsertionEffect:_C,useLayoutEffect:CC,useMemo:AC,useReducer:qm,useRef:bC,useState:function(){return qm(ed)},useDebugValue:vx,useDeferredValue:function(t){var e=bs();return TC(e,Ar.memoizedState,t)},useTransition:function(){var t=qm(ed)[0],e=bs().memoizedState;return[t,e]},useMutableSource:mC,useSyncExternalStore:pC,useId:IC,unstable_isNewReconciler:!1},A8={readContext:vs,useCallback:NC,useContext:vs,useEffect:wx,useImperativeHandle:SC,useInsertionEffect:_C,useLayoutEffect:CC,useMemo:AC,useReducer:Xm,useRef:bC,useState:function(){return Xm(ed)},useDebugValue:vx,useDeferredValue:function(t){var e=bs();return Ar===null?e.memoizedState=t:TC(e,Ar.memoizedState,t)},useTransition:function(){var t=Xm(ed)[0],e=bs().memoizedState;return[t,e]},useMutableSource:mC,useSyncExternalStore:pC,useId:IC,unstable_isNewReconciler:!1};function js(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function h1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Jt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var y0={isMounted:function(t){return(t=t._reactInternals)?Qa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=fn(),s=jo(t),i=Ui(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ro(t,i,s),e!==null&&(Hs(e,t,s,n),Hh(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=fn(),s=jo(t),i=Ui(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ro(t,i,s),e!==null&&(Hs(e,t,s,n),Hh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=fn(),n=jo(t),s=Ui(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ro(t,s,n),e!==null&&(Hs(e,t,n,r),Hh(e,t,n))}};function hv(t,e,r,n,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):e.prototype&&e.prototype.isPureReactComponent?!Yu(r,n)||!Yu(s,i):!0}function MC(t,e,r){var n=!1,s=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=vs(i):(s=An(e)?Ba:rn.current,n=e.contextTypes,i=(n=n!=null)?fc(t,s):Fo),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function fv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&y0.enqueueReplaceState(e,e.state,null)}function f1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},hx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vs(i):(i=An(e)?Ba:rn.current,s.context=fc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(h1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&y0.enqueueReplaceState(s,s.state,null),Cf(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xc(t,e){try{var r="",n=e;do r+=tO(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Km(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function m1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var T8=typeof WeakMap=="function"?WeakMap:Map;function kC(t,e,r){r=Ui(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Tf||(Tf=!0,E1=n),m1(t,e)},r}function PC(t,e,r){r=Ui(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){m1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){m1(t,e),typeof n!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function mv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new T8;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=V8.bind(null,t,e,r),e.then(t,t))}function pv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ui(-1,1),e.tag=2,Ro(r,e,1))),r.lanes|=1),t)}var I8=Xi.ReactCurrentOwner,Sn=!1;function cn(t,e,r,n){e.child=t===null?uC(e,null,r,n):pc(e,t.child,r,n)}function xv(t,e,r,n,s){r=r.render;var i=e.ref;return Xl(e,s),n=xx(t,e,r,n,i,s),r=yx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):($t&&r&&ix(e),e.flags|=1,cn(t,e,n,s),e.child)}function yv(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Tx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,DC(t,e,i,n,s)):(t=Xh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Yu,r(l,n)&&t.ref===e.ref)return $i(t,e,s)}return e.flags|=1,t=Mo(i,n),t.ref=e.ref,t.return=e,e.child=t}function DC(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Yu(i,n)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,$i(t,e,s)}return p1(t,e,r,n,s)}function LC(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ul,Ln),Ln|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Ul,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,kt(Ul,Ln),Ln|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,kt(Ul,Ln),Ln|=n;return cn(t,e,s,r),e.child}function BC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function p1(t,e,r,n,s){var i=An(r)?Ba:rn.current;return i=fc(e,i),Xl(e,s),r=xx(t,e,r,n,i,s),n=yx(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):($t&&n&&ix(e),e.flags|=1,cn(t,e,r,s),e.child)}function wv(t,e,r,n,s){if(An(r)){var i=!0;yf(e)}else i=!1;if(Xl(e,s),e.stateNode===null)Gh(t,e),MC(e,r,n),f1(e,r,n,s),n=!0;else if(t===null){var l=e.stateNode,d=e.memoizedProps;l.props=d;var m=l.context,f=r.contextType;typeof f=="object"&&f!==null?f=vs(f):(f=An(r)?Ba:rn.current,f=fc(e,f));var x=r.getDerivedStateFromProps,y=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==n||m!==f)&&fv(e,l,n,f),uo=!1;var v=e.memoizedState;l.state=v,Cf(e,n,l,s),m=e.memoizedState,d!==n||v!==m||Nn.current||uo?(typeof x=="function"&&(h1(e,r,x,n),m=e.memoizedState),(d=uo||hv(e,r,d,n,v,m,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=m),l.props=n,l.state=m,l.context=f,n=d):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,hC(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:js(e.type,d),l.props=f,y=e.pendingProps,v=l.context,m=r.contextType,typeof m=="object"&&m!==null?m=vs(m):(m=An(r)?Ba:rn.current,m=fc(e,m));var b=r.getDerivedStateFromProps;(x=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==y||v!==m)&&fv(e,l,n,m),uo=!1,v=e.memoizedState,l.state=v,Cf(e,n,l,s);var S=e.memoizedState;d!==y||v!==S||Nn.current||uo?(typeof b=="function"&&(h1(e,r,b,n),S=e.memoizedState),(f=uo||hv(e,r,f,n,v,S,m)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,S,m),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,S,m)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=S),l.props=n,l.state=S,l.context=m,n=f):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return g1(t,e,r,n,i,s)}function g1(t,e,r,n,s,i){BC(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return s&&sv(e,r,!1),$i(t,e,i);n=e.stateNode,I8.current=e;var d=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=pc(e,t.child,null,i),e.child=pc(e,null,d,i)):cn(t,e,d,i),e.memoizedState=n.state,s&&sv(e,r,!0),e.child}function FC(t){var e=t.stateNode;e.pendingContext?nv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nv(t,e.context,!1),fx(t,e.containerInfo)}function vv(t,e,r,n,s){return mc(),ax(s),e.flags|=256,cn(t,e,r,n),e.child}var x1={dehydrated:null,treeContext:null,retryLane:0};function y1(t){return{baseLanes:t,cachePool:null,transitions:null}}function UC(t,e,r){var n=e.pendingProps,s=qt.current,i=!1,l=(e.flags&128)!==0,d;if((d=l)||(d=t!==null&&t.memoizedState===null?!1:(s&2)!==0),d?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(qt,s&1),t===null)return u1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,i?(n=e.mode,i=e.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=b0(l,n,0,null),t=Oa(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=y1(r),e.memoizedState=x1,t):bx(e,l));if(s=t.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return R8(t,e,l,n,d,s,r);if(i){i=n.fallback,l=e.mode,s=t.child,d=s.sibling;var m={mode:"hidden",children:n.children};return!(l&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=m,e.deletions=null):(n=Mo(s,m),n.subtreeFlags=s.subtreeFlags&14680064),d!==null?i=Mo(d,i):(i=Oa(i,l,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,l=t.child.memoizedState,l=l===null?y1(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,e.memoizedState=x1,n}return i=t.child,t=i.sibling,n=Mo(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function bx(t,e){return e=b0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mh(t,e,r,n){return n!==null&&ax(n),pc(e,t.child,null,r),t=bx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R8(t,e,r,n,s,i,l){if(r)return e.flags&256?(e.flags&=-257,n=Km(Error(ye(422))),mh(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=b0({mode:"visible",children:n.children},s,0,null),i=Oa(i,s,l,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&pc(e,t.child,null,l),e.child.memoizedState=y1(l),e.memoizedState=x1,i);if(!(e.mode&1))return mh(t,e,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var d=n.dgst;return n=d,i=Error(ye(419)),n=Km(i,n,void 0),mh(t,e,l,n)}if(d=(l&t.childLanes)!==0,Sn||d){if(n=Mr,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hi(t,s),Hs(n,t,s,-1))}return Ax(),n=Km(Error(ye(421))),mh(t,e,l,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=H8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$n=Io(s.nextSibling),qn=e,$t=!0,Us=null,t!==null&&(cs[us++]=Di,cs[us++]=Li,cs[us++]=Fa,Di=t.id,Li=t.overflow,Fa=e),e=bx(e,n.children),e.flags|=4096,e)}function bv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),d1(t.return,e,r)}function Qm(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function zC(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(cn(t,e,n.children,r),n=qt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bv(t,r,e);else if(t.tag===19)bv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(kt(qt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ef(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Qm(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ef(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Qm(e,!0,r,null,i);break;case"together":Qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),za|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,r=Mo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Mo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function O8(t,e,r){switch(e.tag){case 3:FC(e),mc();break;case 5:fC(e);break;case 1:An(e.type)&&yf(e);break;case 4:fx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;kt(bf,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kt(qt,qt.current&1),e.flags|=128,null):r&e.child.childLanes?UC(t,e,r):(kt(qt,qt.current&1),t=$i(t,e,r),t!==null?t.sibling:null);kt(qt,qt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return zC(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(qt,qt.current),n)break;return null;case 22:case 23:return e.lanes=0,LC(t,e,r)}return $i(t,e,r)}var VC,w1,HC,$C;VC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};w1=function(){};HC=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ba(pi.current);var i=null;switch(r){case"input":s=zp(t,s),n=zp(t,n),i=[];break;case"select":s=Jt({},s,{value:void 0}),n=Jt({},n,{value:void 0}),i=[];break;case"textarea":s=$p(t,s),n=$p(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=gf)}Gp(r,n);var l;r=null;for(f in s)if(!n.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var d=s[f];for(l in d)d.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Uu.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in n){var m=n[f];if(d=s!=null?s[f]:void 0,n.hasOwnProperty(f)&&m!==d&&(m!=null||d!=null))if(f==="style")if(d){for(l in d)!d.hasOwnProperty(l)||m&&m.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in m)m.hasOwnProperty(l)&&d[l]!==m[l]&&(r||(r={}),r[l]=m[l])}else r||(i||(i=[]),i.push(f,r)),r=m;else f==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,d=d?d.__html:void 0,m!=null&&d!==m&&(i=i||[]).push(f,m)):f==="children"?typeof m!="string"&&typeof m!="number"||(i=i||[]).push(f,""+m):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(f)?(m!=null&&f==="onScroll"&&Lt("scroll",t),i||d===m||(i=[])):(i=i||[]).push(f,m))}r&&(i=i||[]).push("style",r);var f=i;(e.updateQueue=f)&&(e.flags|=4)}};$C=function(t,e,r,n){r!==n&&(e.flags|=4)};function lu(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function j8(t,e,r){var n=e.pendingProps;switch(ox(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return An(e.type)&&xf(),Qr(e),null;case 3:return n=e.stateNode,gc(),Ft(Nn),Ft(rn),px(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Us!==null&&(A1(Us),Us=null))),w1(t,e),Qr(e),null;case 5:mx(e);var s=ba(Zu.current);if(r=e.type,t!==null&&e.stateNode!=null)HC(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ye(166));return Qr(e),null}if(t=ba(pi.current),hh(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ui]=e,n[Ku]=i,t=(e.mode&1)!==0,r){case"dialog":Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":case"embed":Lt("load",n);break;case"video":case"audio":for(s=0;s<yu.length;s++)Lt(yu[s],n);break;case"source":Lt("error",n);break;case"img":case"image":case"link":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"input":Rw(n,i),Lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Lt("invalid",n);break;case"textarea":jw(n,i),Lt("invalid",n)}Gp(r,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];l==="children"?typeof d=="string"?n.textContent!==d&&(i.suppressHydrationWarning!==!0&&dh(n.textContent,d,t),s=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&dh(n.textContent,d,t),s=["children",""+d]):Uu.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&Lt("scroll",n)}switch(r){case"input":nh(n),Ow(n,i,!0);break;case"textarea":nh(n),Mw(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=gf)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[ui]=e,t[Ku]=n,VC(t,e,!1,!1),e.stateNode=t;e:{switch(l=Yp(r,n),r){case"dialog":Lt("cancel",t),Lt("close",t),s=n;break;case"iframe":case"object":case"embed":Lt("load",t),s=n;break;case"video":case"audio":for(s=0;s<yu.length;s++)Lt(yu[s],t);s=n;break;case"source":Lt("error",t),s=n;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),s=n;break;case"details":Lt("toggle",t),s=n;break;case"input":Rw(t,n),s=zp(t,n),Lt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Jt({},n,{value:void 0}),Lt("invalid",t);break;case"textarea":jw(t,n),s=$p(t,n),Lt("invalid",t);break;default:s=n}Gp(r,s),d=s;for(i in d)if(d.hasOwnProperty(i)){var m=d[i];i==="style"?b_(t,m):i==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&w_(t,m)):i==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&zu(t,m):typeof m=="number"&&zu(t,""+m):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uu.hasOwnProperty(i)?m!=null&&i==="onScroll"&&Lt("scroll",t):m!=null&&Wg(t,i,m,l))}switch(r){case"input":nh(t),Ow(t,n,!1);break;case"textarea":nh(t),Mw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bo(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Wl(t,!!n.multiple,i,!1):n.defaultValue!=null&&Wl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)$C(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ye(166));if(r=ba(Zu.current),ba(pi.current),hh(e)){if(n=e.stateNode,r=e.memoizedProps,n[ui]=e,(i=n.nodeValue!==r)&&(t=qn,t!==null))switch(t.tag){case 3:dh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dh(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ui]=e,e.stateNode=n}return Qr(e),null;case 13:if(Ft(qt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&$n!==null&&e.mode&1&&!(e.flags&128))lC(),mc(),e.flags|=98560,i=!1;else if(i=hh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[ui]=e}else mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),i=!1}else Us!==null&&(A1(Us),Us=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||qt.current&1?Tr===0&&(Tr=3):Ax())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return gc(),w1(t,e),t===null&&qu(e.stateNode.containerInfo),Qr(e),null;case 10:return ux(e.type._context),Qr(e),null;case 17:return An(e.type)&&xf(),Qr(e),null;case 19:if(Ft(qt),i=e.memoizedState,i===null)return Qr(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)lu(i,!1);else{if(Tr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Ef(t),l!==null){for(e.flags|=128,lu(i,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kt(qt,qt.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>yc&&(e.flags|=128,n=!0,lu(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ef(l),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),lu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$t)return Qr(e),null}else 2*mr()-i.renderingStartTime>yc&&r!==1073741824&&(e.flags|=128,n=!0,lu(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(r=i.last,r!==null?r.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,r=qt.current,kt(qt,n?r&1|2:r&1),e):(Qr(e),null);case 22:case 23:return Nx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ln&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function M8(t,e){switch(ox(e),e.tag){case 1:return An(e.type)&&xf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gc(),Ft(Nn),Ft(rn),px(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mx(e),null;case 13:if(Ft(qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(qt),null;case 4:return gc(),null;case 10:return ux(e.type._context),null;case 22:case 23:return Nx(),null;case 24:return null;default:return null}}var ph=!1,Jr=!1,k8=typeof WeakSet=="function"?WeakSet:Set,je=null;function Fl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){lr(t,e,n)}else r.current=null}function v1(t,e,r){try{r()}catch(n){lr(t,e,n)}}var _v=!1;function P8(t,e){if(n1=ff,t=X_(),sx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,d=-1,m=-1,f=0,x=0,y=t,v=null;t:for(;;){for(var b;y!==r||s!==0&&y.nodeType!==3||(d=l+s),y!==i||n!==0&&y.nodeType!==3||(m=l+n),y.nodeType===3&&(l+=y.nodeValue.length),(b=y.firstChild)!==null;)v=y,y=b;for(;;){if(y===t)break t;if(v===r&&++f===s&&(d=l),v===i&&++x===n&&(m=l),(b=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=b}r=d===-1||m===-1?null:{start:d,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(s1={focusedElem:t,selectionRange:r},ff=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var _=S.memoizedProps,I=S.memoizedState,R=e.stateNode,N=R.getSnapshotBeforeUpdate(e.elementType===e.type?_:js(e.type,_),I);R.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(O){lr(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return S=_v,_v=!1,S}function Ru(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&v1(e,r,i)}s=s.next}while(s!==n)}}function w0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function b1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function WC(t){var e=t.alternate;e!==null&&(t.alternate=null,WC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ui],delete e[Ku],delete e[a1],delete e[x8],delete e[y8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GC(t){return t.tag===5||t.tag===3||t.tag===4}function Cv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=gf));else if(n!==4&&(t=t.child,t!==null))for(_1(t,e,r),t=t.sibling;t!==null;)_1(t,e,r),t=t.sibling}function C1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(C1(t,e,r),t=t.sibling;t!==null;)C1(t,e,r),t=t.sibling}var Vr=null,Ls=!1;function ro(t,e,r){for(r=r.child;r!==null;)YC(t,e,r),r=r.sibling}function YC(t,e,r){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(d0,r)}catch{}switch(r.tag){case 5:Jr||Fl(r,e);case 6:var n=Vr,s=Ls;Vr=null,ro(t,e,r),Vr=n,Ls=s,Vr!==null&&(Ls?(t=Vr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Vr.removeChild(r.stateNode));break;case 18:Vr!==null&&(Ls?(t=Vr,r=r.stateNode,t.nodeType===8?$m(t.parentNode,r):t.nodeType===1&&$m(t,r),Wu(t)):$m(Vr,r.stateNode));break;case 4:n=Vr,s=Ls,Vr=r.stateNode.containerInfo,Ls=!0,ro(t,e,r),Vr=n,Ls=s;break;case 0:case 11:case 14:case 15:if(!Jr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&v1(r,e,l),s=s.next}while(s!==n)}ro(t,e,r);break;case 1:if(!Jr&&(Fl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){lr(r,e,d)}ro(t,e,r);break;case 21:ro(t,e,r);break;case 22:r.mode&1?(Jr=(n=Jr)||r.memoizedState!==null,ro(t,e,r),Jr=n):ro(t,e,r);break;default:ro(t,e,r)}}function Ev(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new k8),e.forEach(function(n){var s=$8.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function As(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,l=e,d=l;e:for(;d!==null;){switch(d.tag){case 5:Vr=d.stateNode,Ls=!1;break e;case 3:Vr=d.stateNode.containerInfo,Ls=!0;break e;case 4:Vr=d.stateNode.containerInfo,Ls=!0;break e}d=d.return}if(Vr===null)throw Error(ye(160));YC(i,l,s),Vr=null,Ls=!1;var m=s.alternate;m!==null&&(m.return=null),s.return=null}catch(f){lr(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qC(e,t),e=e.sibling}function qC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(As(e,t),ni(t),n&4){try{Ru(3,t,t.return),w0(3,t)}catch(_){lr(t,t.return,_)}try{Ru(5,t,t.return)}catch(_){lr(t,t.return,_)}}break;case 1:As(e,t),ni(t),n&512&&r!==null&&Fl(r,r.return);break;case 5:if(As(e,t),ni(t),n&512&&r!==null&&Fl(r,r.return),t.flags&32){var s=t.stateNode;try{zu(s,"")}catch(_){lr(t,t.return,_)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,d=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&g_(s,i),Yp(d,l);var f=Yp(d,i);for(l=0;l<m.length;l+=2){var x=m[l],y=m[l+1];x==="style"?b_(s,y):x==="dangerouslySetInnerHTML"?w_(s,y):x==="children"?zu(s,y):Wg(s,x,y,f)}switch(d){case"input":Vp(s,i);break;case"textarea":x_(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Wl(s,!!i.multiple,b,!1):v!==!!i.multiple&&(i.defaultValue!=null?Wl(s,!!i.multiple,i.defaultValue,!0):Wl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ku]=i}catch(_){lr(t,t.return,_)}}break;case 6:if(As(e,t),ni(t),n&4){if(t.stateNode===null)throw Error(ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){lr(t,t.return,_)}}break;case 3:if(As(e,t),ni(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wu(e.containerInfo)}catch(_){lr(t,t.return,_)}break;case 4:As(e,t),ni(t);break;case 13:As(e,t),ni(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ex=mr())),n&4&&Ev(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(Jr=(f=Jr)||x,As(e,t),Jr=f):As(e,t),ni(t),n&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!x&&t.mode&1)for(je=t,x=t.child;x!==null;){for(y=je=x;je!==null;){switch(v=je,b=v.child,v.tag){case 0:case 11:case 14:case 15:Ru(4,v,v.return);break;case 1:Fl(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(_){lr(n,r,_)}}break;case 5:Fl(v,v.return);break;case 22:if(v.memoizedState!==null){Nv(y);continue}}b!==null?(b.return=v,je=b):Nv(y)}x=x.sibling}e:for(x=null,y=t;;){if(y.tag===5){if(x===null){x=y;try{s=y.stateNode,f?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=y.stateNode,m=y.memoizedProps.style,l=m!=null&&m.hasOwnProperty("display")?m.display:null,d.style.display=v_("display",l))}catch(_){lr(t,t.return,_)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(_){lr(t,t.return,_)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:As(e,t),ni(t),n&4&&Ev(t);break;case 21:break;default:As(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(GC(r)){var n=r;break e}r=r.return}throw Error(ye(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(zu(s,""),n.flags&=-33);var i=Cv(t);C1(t,i,s);break;case 3:case 4:var l=n.stateNode.containerInfo,d=Cv(t);_1(t,d,l);break;default:throw Error(ye(161))}}catch(m){lr(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function D8(t,e,r){je=t,XC(t)}function XC(t,e,r){for(var n=(t.mode&1)!==0;je!==null;){var s=je,i=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||ph;if(!l){var d=s.alternate,m=d!==null&&d.memoizedState!==null||Jr;d=ph;var f=Jr;if(ph=l,(Jr=m)&&!f)for(je=s;je!==null;)l=je,m=l.child,l.tag===22&&l.memoizedState!==null?Av(s):m!==null?(m.return=l,je=m):Av(s);for(;i!==null;)je=i,XC(i),i=i.sibling;je=s,ph=d,Jr=f}Sv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,je=i):Sv(t)}}function Sv(t){for(;je!==null;){var e=je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jr||w0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Jr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:js(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&cv(e,i,n);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}cv(e,l,r)}break;case 5:var d=e.stateNode;if(r===null&&e.flags&4){r=d;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var x=f.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&Wu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Jr||e.flags&512&&b1(e)}catch(v){lr(e,e.return,v)}}if(e===t){je=null;break}if(r=e.sibling,r!==null){r.return=e.return,je=r;break}je=e.return}}function Nv(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,je=r;break}je=e.return}}function Av(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{w0(4,e)}catch(m){lr(e,r,m)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(m){lr(e,s,m)}}var i=e.return;try{b1(e)}catch(m){lr(e,i,m)}break;case 5:var l=e.return;try{b1(e)}catch(m){lr(e,l,m)}}}catch(m){lr(e,e.return,m)}if(e===t){je=null;break}var d=e.sibling;if(d!==null){d.return=e.return,je=d;break}je=e.return}}var L8=Math.ceil,Af=Xi.ReactCurrentDispatcher,_x=Xi.ReactCurrentOwner,ys=Xi.ReactCurrentBatchConfig,pt=0,Mr=null,vr=null,Hr=0,Ln=0,Ul=Yo(0),Tr=0,rd=null,za=0,v0=0,Cx=0,Ou=null,En=null,Ex=0,yc=1/0,Ii=null,Tf=!1,E1=null,Oo=null,gh=!1,bo=null,If=0,ju=0,S1=null,Yh=-1,qh=0;function fn(){return pt&6?mr():Yh!==-1?Yh:Yh=mr()}function jo(t){return t.mode&1?pt&2&&Hr!==0?Hr&-Hr:v8.transition!==null?(qh===0&&(qh=M_()),qh):(t=Et,t!==0||(t=window.event,t=t===void 0?16:U_(t.type)),t):1}function Hs(t,e,r,n){if(50<ju)throw ju=0,S1=null,Error(ye(185));Ad(t,r,n),(!(pt&2)||t!==Mr)&&(t===Mr&&(!(pt&2)&&(v0|=r),Tr===4&&fo(t,Hr)),Tn(t,n),r===1&&pt===0&&!(e.mode&1)&&(yc=mr()+500,g0&&qo()))}function Tn(t,e){var r=t.callbackNode;vO(t,e);var n=hf(t,t===Mr?Hr:0);if(n===0)r!==null&&Dw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Dw(r),e===1)t.tag===0?w8(Tv.bind(null,t)):iC(Tv.bind(null,t)),p8(function(){!(pt&6)&&qo()}),r=null;else{switch(k_(n)){case 1:r=Kg;break;case 4:r=O_;break;case 16:r=df;break;case 536870912:r=j_;break;default:r=df}r=nE(r,KC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function KC(t,e){if(Yh=-1,qh=0,pt&6)throw Error(ye(327));var r=t.callbackNode;if(Kl()&&t.callbackNode!==r)return null;var n=hf(t,t===Mr?Hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Rf(t,n);else{e=n;var s=pt;pt|=2;var i=ZC();(Mr!==t||Hr!==e)&&(Ii=null,yc=mr()+500,Ra(t,e));do try{U8();break}catch(d){QC(t,d)}while(!0);cx(),Af.current=i,pt=s,vr!==null?e=0:(Mr=null,Hr=0,e=Tr)}if(e!==0){if(e===2&&(s=Zp(t),s!==0&&(n=s,e=N1(t,s))),e===1)throw r=rd,Ra(t,0),fo(t,n),Tn(t,mr()),r;if(e===6)fo(t,n);else{if(s=t.current.alternate,!(n&30)&&!B8(s)&&(e=Rf(t,n),e===2&&(i=Zp(t),i!==0&&(n=i,e=N1(t,i))),e===1))throw r=rd,Ra(t,0),fo(t,n),Tn(t,mr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ye(345));case 2:ma(t,En,Ii);break;case 3:if(fo(t,n),(n&130023424)===n&&(e=Ex+500-mr(),10<e)){if(hf(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=o1(ma.bind(null,t,En,Ii),e);break}ma(t,En,Ii);break;case 4:if(fo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var l=31-Vs(n);i=1<<l,l=e[l],l>s&&(s=l),n&=~i}if(n=s,n=mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*L8(n/1960))-n,10<n){t.timeoutHandle=o1(ma.bind(null,t,En,Ii),n);break}ma(t,En,Ii);break;case 5:ma(t,En,Ii);break;default:throw Error(ye(329))}}}return Tn(t,mr()),t.callbackNode===r?KC.bind(null,t):null}function N1(t,e){var r=Ou;return t.current.memoizedState.isDehydrated&&(Ra(t,e).flags|=256),t=Rf(t,e),t!==2&&(e=En,En=r,e!==null&&A1(e)),t}function A1(t){En===null?En=t:En.push.apply(En,t)}function B8(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Gs(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fo(t,e){for(e&=~Cx,e&=~v0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vs(e),n=1<<r;t[r]=-1,e&=~n}}function Tv(t){if(pt&6)throw Error(ye(327));Kl();var e=hf(t,0);if(!(e&1))return Tn(t,mr()),null;var r=Rf(t,e);if(t.tag!==0&&r===2){var n=Zp(t);n!==0&&(e=n,r=N1(t,n))}if(r===1)throw r=rd,Ra(t,0),fo(t,e),Tn(t,mr()),r;if(r===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ma(t,En,Ii),Tn(t,mr()),null}function Sx(t,e){var r=pt;pt|=1;try{return t(e)}finally{pt=r,pt===0&&(yc=mr()+500,g0&&qo())}}function Va(t){bo!==null&&bo.tag===0&&!(pt&6)&&Kl();var e=pt;pt|=1;var r=ys.transition,n=Et;try{if(ys.transition=null,Et=1,t)return t()}finally{Et=n,ys.transition=r,pt=e,!(pt&6)&&qo()}}function Nx(){Ln=Ul.current,Ft(Ul)}function Ra(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,m8(r)),vr!==null)for(r=vr.return;r!==null;){var n=r;switch(ox(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xf();break;case 3:gc(),Ft(Nn),Ft(rn),px();break;case 5:mx(n);break;case 4:gc();break;case 13:Ft(qt);break;case 19:Ft(qt);break;case 10:ux(n.type._context);break;case 22:case 23:Nx()}r=r.return}if(Mr=t,vr=t=Mo(t.current,null),Hr=Ln=e,Tr=0,rd=null,Cx=v0=za=0,En=Ou=null,va!==null){for(e=0;e<va.length;e++)if(r=va[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=s,n.next=l}r.pending=n}va=null}return t}function QC(t,e){do{var r=vr;try{if(cx(),$h.current=Nf,Sf){for(var n=Zt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sf=!1}if(Ua=0,jr=Ar=Zt=null,Iu=!1,Ju=0,_x.current=null,r===null||r.return===null){Tr=1,rd=e,vr=null;break}e:{var i=t,l=r.return,d=r,m=e;if(e=Hr,d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var f=m,x=d,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=pv(l);if(b!==null){b.flags&=-257,gv(b,l,d,i,e),b.mode&1&&mv(i,f,e),e=b,m=f;var S=e.updateQueue;if(S===null){var _=new Set;_.add(m),e.updateQueue=_}else S.add(m);break e}else{if(!(e&1)){mv(i,f,e),Ax();break e}m=Error(ye(426))}}else if($t&&d.mode&1){var I=pv(l);if(I!==null){!(I.flags&65536)&&(I.flags|=256),gv(I,l,d,i,e),ax(xc(m,d));break e}}i=m=xc(m,d),Tr!==4&&(Tr=2),Ou===null?Ou=[i]:Ou.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var R=kC(i,m,e);lv(i,R);break e;case 1:d=m;var N=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof N.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Oo===null||!Oo.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=PC(i,d,e);lv(i,O);break e}}i=i.return}while(i!==null)}eE(r)}catch(k){e=k,vr===r&&r!==null&&(vr=r=r.return);continue}break}while(!0)}function ZC(){var t=Af.current;return Af.current=Nf,t===null?Nf:t}function Ax(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Mr===null||!(za&268435455)&&!(v0&268435455)||fo(Mr,Hr)}function Rf(t,e){var r=pt;pt|=2;var n=ZC();(Mr!==t||Hr!==e)&&(Ii=null,Ra(t,e));do try{F8();break}catch(s){QC(t,s)}while(!0);if(cx(),pt=r,Af.current=n,vr!==null)throw Error(ye(261));return Mr=null,Hr=0,Tr}function F8(){for(;vr!==null;)JC(vr)}function U8(){for(;vr!==null&&!dO();)JC(vr)}function JC(t){var e=rE(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?eE(t):vr=e,_x.current=null}function eE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=M8(r,e),r!==null){r.flags&=32767,vr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tr=6,vr=null;return}}else if(r=j8(r,e,Ln),r!==null){vr=r;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Tr===0&&(Tr=5)}function ma(t,e,r){var n=Et,s=ys.transition;try{ys.transition=null,Et=1,z8(t,e,r,n)}finally{ys.transition=s,Et=n}return null}function z8(t,e,r,n){do Kl();while(bo!==null);if(pt&6)throw Error(ye(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(bO(t,i),t===Mr&&(vr=Mr=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gh||(gh=!0,nE(df,function(){return Kl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ys.transition,ys.transition=null;var l=Et;Et=1;var d=pt;pt|=4,_x.current=null,P8(t,r),qC(r,t),a8(s1),ff=!!n1,s1=n1=null,t.current=r,D8(r),hO(),pt=d,Et=l,ys.transition=i}else t.current=r;if(gh&&(gh=!1,bo=t,If=s),i=t.pendingLanes,i===0&&(Oo=null),pO(r.stateNode),Tn(t,mr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Tf)throw Tf=!1,t=E1,E1=null,t;return If&1&&t.tag!==0&&Kl(),i=t.pendingLanes,i&1?t===S1?ju++:(ju=0,S1=t):ju=0,qo(),null}function Kl(){if(bo!==null){var t=k_(If),e=ys.transition,r=Et;try{if(ys.transition=null,Et=16>t?16:t,bo===null)var n=!1;else{if(t=bo,bo=null,If=0,pt&6)throw Error(ye(331));var s=pt;for(pt|=4,je=t.current;je!==null;){var i=je,l=i.child;if(je.flags&16){var d=i.deletions;if(d!==null){for(var m=0;m<d.length;m++){var f=d[m];for(je=f;je!==null;){var x=je;switch(x.tag){case 0:case 11:case 15:Ru(8,x,i)}var y=x.child;if(y!==null)y.return=x,je=y;else for(;je!==null;){x=je;var v=x.sibling,b=x.return;if(WC(x),x===f){je=null;break}if(v!==null){v.return=b,je=v;break}je=b}}}var S=i.alternate;if(S!==null){var _=S.child;if(_!==null){S.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}je=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,je=l;else e:for(;je!==null;){if(i=je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ru(9,i,i.return)}var R=i.sibling;if(R!==null){R.return=i.return,je=R;break e}je=i.return}}var N=t.current;for(je=N;je!==null;){l=je;var A=l.child;if(l.subtreeFlags&2064&&A!==null)A.return=l,je=A;else e:for(l=N;je!==null;){if(d=je,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:w0(9,d)}}catch(k){lr(d,d.return,k)}if(d===l){je=null;break e}var O=d.sibling;if(O!==null){O.return=d.return,je=O;break e}je=d.return}}if(pt=s,qo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(d0,t)}catch{}n=!0}return n}finally{Et=r,ys.transition=e}}return!1}function Iv(t,e,r){e=xc(r,e),e=kC(t,e,1),t=Ro(t,e,1),e=fn(),t!==null&&(Ad(t,1,e),Tn(t,e))}function lr(t,e,r){if(t.tag===3)Iv(t,t,r);else for(;e!==null;){if(e.tag===3){Iv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oo===null||!Oo.has(n))){t=xc(r,t),t=PC(e,t,1),e=Ro(e,t,1),t=fn(),e!==null&&(Ad(e,1,t),Tn(e,t));break}}e=e.return}}function V8(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&r,Mr===t&&(Hr&r)===r&&(Tr===4||Tr===3&&(Hr&130023424)===Hr&&500>mr()-Ex?Ra(t,0):Cx|=r),Tn(t,e)}function tE(t,e){e===0&&(t.mode&1?(e=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):e=1);var r=fn();t=Hi(t,e),t!==null&&(Ad(t,e,r),Tn(t,r))}function H8(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),tE(t,r)}function $8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ye(314))}n!==null&&n.delete(e),tE(t,r)}var rE;rE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Sn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Sn=!1,O8(t,e,r);Sn=!!(t.flags&131072)}else Sn=!1,$t&&e.flags&1048576&&oC(e,vf,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Gh(t,e),t=e.pendingProps;var s=fc(e,rn.current);Xl(e,r),s=xx(null,e,n,t,s,r);var i=yx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,An(n)?(i=!0,yf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hx(e),s.updater=y0,e.stateNode=s,s._reactInternals=e,f1(e,n,t,r),e=g1(null,e,n,!0,i,r)):(e.tag=0,$t&&i&&ix(e),cn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Gh(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=G8(n),t=js(n,t),s){case 0:e=p1(null,e,n,t,r);break e;case 1:e=wv(null,e,n,t,r);break e;case 11:e=xv(null,e,n,t,r);break e;case 14:e=yv(null,e,n,js(n.type,t),r);break e}throw Error(ye(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:js(n,s),p1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:js(n,s),wv(t,e,n,s,r);case 3:e:{if(FC(e),t===null)throw Error(ye(387));n=e.pendingProps,i=e.memoizedState,s=i.element,hC(t,e),Cf(e,n,null,r);var l=e.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xc(Error(ye(423)),e),e=vv(t,e,n,r,s);break e}else if(n!==s){s=xc(Error(ye(424)),e),e=vv(t,e,n,r,s);break e}else for($n=Io(e.stateNode.containerInfo.firstChild),qn=e,$t=!0,Us=null,r=uC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mc(),n===s){e=$i(t,e,r);break e}cn(t,e,n,r)}e=e.child}return e;case 5:return fC(e),t===null&&u1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,i1(n,s)?l=null:i!==null&&i1(n,i)&&(e.flags|=32),BC(t,e),cn(t,e,l,r),e.child;case 6:return t===null&&u1(e),null;case 13:return UC(t,e,r);case 4:return fx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=pc(e,null,n,r):cn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:js(n,s),xv(t,e,n,s,r);case 7:return cn(t,e,e.pendingProps,r),e.child;case 8:return cn(t,e,e.pendingProps.children,r),e.child;case 12:return cn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,kt(bf,n._currentValue),n._currentValue=l,i!==null)if(Gs(i.value,l)){if(i.children===s.children&&!Nn.current){e=$i(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var d=i.dependencies;if(d!==null){l=i.child;for(var m=d.firstContext;m!==null;){if(m.context===n){if(i.tag===1){m=Ui(-1,r&-r),m.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var x=f.pending;x===null?m.next=m:(m.next=x.next,x.next=m),f.pending=m}}i.lanes|=r,m=i.alternate,m!==null&&(m.lanes|=r),d1(i.return,r,e),d.lanes|=r;break}m=m.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ye(341));l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),d1(l,r,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}cn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Xl(e,r),s=vs(s),n=n(s),e.flags|=1,cn(t,e,n,r),e.child;case 14:return n=e.type,s=js(n,e.pendingProps),s=js(n.type,s),yv(t,e,n,s,r);case 15:return DC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:js(n,s),Gh(t,e),e.tag=1,An(n)?(t=!0,yf(e)):t=!1,Xl(e,r),MC(e,n,s),f1(e,n,s,r),g1(null,e,n,!0,t,r);case 19:return zC(t,e,r);case 22:return LC(t,e,r)}throw Error(ye(156,e.tag))};function nE(t,e){return R_(t,e)}function W8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(t,e,r,n){return new W8(t,e,r,n)}function Tx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G8(t){if(typeof t=="function")return Tx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yg)return 11;if(t===qg)return 14}return 2}function Mo(t,e){var r=t.alternate;return r===null?(r=hs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Xh(t,e,r,n,s,i){var l=2;if(n=t,typeof t=="function")Tx(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Rl:return Oa(r.children,s,i,e);case Gg:l=8,s|=8;break;case Lp:return t=hs(12,r,e,s|2),t.elementType=Lp,t.lanes=i,t;case Bp:return t=hs(13,r,e,s),t.elementType=Bp,t.lanes=i,t;case Fp:return t=hs(19,r,e,s),t.elementType=Fp,t.lanes=i,t;case f_:return b0(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case d_:l=10;break e;case h_:l=9;break e;case Yg:l=11;break e;case qg:l=14;break e;case co:l=16,n=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=hs(l,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Oa(t,e,r,n){return t=hs(7,t,n,e),t.lanes=r,t}function b0(t,e,r,n){return t=hs(22,t,n,e),t.elementType=f_,t.lanes=r,t.stateNode={isHidden:!1},t}function Zm(t,e,r){return t=hs(6,t,null,e),t.lanes=r,t}function Jm(t,e,r){return e=hs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y8(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mm(0),this.expirationTimes=Mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mm(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ix(t,e,r,n,s,i,l,d,m){return t=new Y8(t,e,r,d,m),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hx(i),t}function q8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Il,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function sE(t){if(!t)return Fo;t=t._reactInternals;e:{if(Qa(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(An(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var r=t.type;if(An(r))return sC(t,r,e)}return e}function iE(t,e,r,n,s,i,l,d,m){return t=Ix(r,n,!0,t,s,i,l,d,m),t.context=sE(null),r=t.current,n=fn(),s=jo(r),i=Ui(n,s),i.callback=e??null,Ro(r,i,s),t.current.lanes=s,Ad(t,s,n),Tn(t,n),t}function _0(t,e,r,n){var s=e.current,i=fn(),l=jo(s);return r=sE(r),e.context===null?e.context=r:e.pendingContext=r,e=Ui(i,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ro(s,e,l),t!==null&&(Hs(t,s,l,i),Hh(t,s,l)),l}function Of(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Rx(t,e){Rv(t,e),(t=t.alternate)&&Rv(t,e)}function X8(){return null}var oE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ox(t){this._internalRoot=t}C0.prototype.render=Ox.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));_0(t,e,null,null)};C0.prototype.unmount=Ox.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){_0(null,t,null,null)}),e[Vi]=null}};function C0(t){this._internalRoot=t}C0.prototype.unstable_scheduleHydration=function(t){if(t){var e=L_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ho.length&&e!==0&&e<ho[r].priority;r++);ho.splice(r,0,t),r===0&&F_(t)}};function jx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ov(){}function K8(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var f=Of(l);i.call(f)}}var l=iE(e,n,t,0,null,!1,!1,"",Ov);return t._reactRootContainer=l,t[Vi]=l.current,qu(t.nodeType===8?t.parentNode:t),Va(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var d=n;n=function(){var f=Of(m);d.call(f)}}var m=Ix(t,0,!1,null,null,!1,!1,"",Ov);return t._reactRootContainer=m,t[Vi]=m.current,qu(t.nodeType===8?t.parentNode:t),Va(function(){_0(e,m,r,n)}),m}function S0(t,e,r,n,s){var i=r._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var d=s;s=function(){var m=Of(l);d.call(m)}}_0(e,l,t,s)}else l=K8(r,e,t,s,n);return Of(l)}P_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xu(e.pendingLanes);r!==0&&(Qg(e,r|1),Tn(e,mr()),!(pt&6)&&(yc=mr()+500,qo()))}break;case 13:Va(function(){var n=Hi(t,1);if(n!==null){var s=fn();Hs(n,t,1,s)}}),Rx(t,1)}};Zg=function(t){if(t.tag===13){var e=Hi(t,134217728);if(e!==null){var r=fn();Hs(e,t,134217728,r)}Rx(t,134217728)}};D_=function(t){if(t.tag===13){var e=jo(t),r=Hi(t,e);if(r!==null){var n=fn();Hs(r,t,e,n)}Rx(t,e)}};L_=function(){return Et};B_=function(t,e){var r=Et;try{return Et=t,e()}finally{Et=r}};Xp=function(t,e,r){switch(e){case"input":if(Vp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=p0(n);if(!s)throw Error(ye(90));p_(n),Vp(n,s)}}}break;case"textarea":x_(t,r);break;case"select":e=r.value,e!=null&&Wl(t,!!r.multiple,e,!1)}};E_=Sx;S_=Va;var Q8={usingClientEntryPoint:!1,Events:[Id,kl,p0,__,C_,Sx]},cu={findFiberByHostInstance:wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z8={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T_(t),t===null?null:t.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||X8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{d0=xh.inject(Z8),mi=xh}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q8;es.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jx(e))throw Error(ye(200));return q8(t,e,null,r)};es.createRoot=function(t,e){if(!jx(t))throw Error(ye(299));var r=!1,n="",s=oE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ix(t,1,!1,null,null,r,!1,n,s),t[Vi]=e.current,qu(t.nodeType===8?t.parentNode:t),new Ox(e)};es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=T_(e),t=t===null?null:t.stateNode,t};es.flushSync=function(t){return Va(t)};es.hydrate=function(t,e,r){if(!E0(e))throw Error(ye(200));return S0(null,t,e,!0,r)};es.hydrateRoot=function(t,e,r){if(!jx(t))throw Error(ye(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",l=oE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=iE(e,null,t,1,r??null,s,!1,i,l),t[Vi]=e.current,qu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new C0(e)};es.render=function(t,e,r){if(!E0(e))throw Error(ye(200));return S0(null,t,e,!1,r)};es.unmountComponentAtNode=function(t){if(!E0(t))throw Error(ye(40));return t._reactRootContainer?(Va(function(){S0(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};es.unstable_batchedUpdates=Sx;es.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!E0(r))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return S0(t,e,r,!1,n)};es.version="18.3.1-next-f1338f8080-20240426";function aE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aE)}catch(t){console.error(t)}}aE(),a_.exports=es;var Za=a_.exports;const lE=Lg(Za);var cE,jv=Za;cE=jv.createRoot,jv.hydrateRoot;const J8=1,ej=1e6;let ep=0;function tj(){return ep=(ep+1)%Number.MAX_SAFE_INTEGER,ep.toString()}const tp=new Map,Mv=t=>{if(tp.has(t))return;const e=setTimeout(()=>{tp.delete(t),Mu({type:"REMOVE_TOAST",toastId:t})},ej);tp.set(t,e)},rj=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,J8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Mv(r):t.toasts.forEach(n=>{Mv(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Kh=[];let Qh={toasts:[]};function Mu(t){Qh=rj(Qh,t),Kh.forEach(e=>{e(Qh)})}function nj({...t}){const e=tj(),r=s=>Mu({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Mu({type:"DISMISS_TOAST",toastId:e});return Mu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function sj(){const[t,e]=E.useState(Qh);return E.useEffect(()=>(Kh.push(e),()=>{const r=Kh.indexOf(e);r>-1&&Kh.splice(r,1)}),[t]),{...t,toast:nj,dismiss:r=>Mu({type:"DISMISS_TOAST",toastId:r})}}function Ne(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function kv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function N0(...t){return e=>{let r=!1;const n=t.map(s=>{const i=kv(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():kv(t[s],null)}}}}function Je(...t){return E.useCallback(N0(...t),t)}function ij(t,e){const r=E.createContext(e),n=i=>{const{children:l,...d}=i,m=E.useMemo(()=>d,Object.values(d));return u.jsx(r.Provider,{value:m,children:l})};n.displayName=t+"Provider";function s(i){const l=E.useContext(r);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function gn(t,e=[]){let r=[];function n(i,l){const d=E.createContext(l),m=r.length;r=[...r,l];const f=y=>{var R;const{scope:v,children:b,...S}=y,_=((R=v==null?void 0:v[t])==null?void 0:R[m])||d,I=E.useMemo(()=>S,Object.values(S));return u.jsx(_.Provider,{value:I,children:b})};f.displayName=i+"Provider";function x(y,v){var _;const b=((_=v==null?void 0:v[t])==null?void 0:_[m])||d,S=E.useContext(b);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[f,x]}const s=()=>{const i=r.map(l=>E.createContext(l));return function(d){const m=(d==null?void 0:d[t])||i;return E.useMemo(()=>({[`__scope${t}`]:{...d,[t]:m}}),[d,m])}};return s.scopeName=t,[n,oj(s,...e)]}function oj(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=n.reduce((d,{useScope:m,scopeName:f})=>{const y=m(i)[`__scope${f}`];return{...d,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return r.scopeName=e.scopeName,r}function Ha(t){const e=lj(t),r=E.forwardRef((n,s)=>{const{children:i,...l}=n,d=E.Children.toArray(i),m=d.find(uj);if(m){const f=m.props.children,x=d.map(y=>y===m?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return u.jsx(e,{...l,ref:s,children:E.isValidElement(f)?E.cloneElement(f,void 0,x):null})}return u.jsx(e,{...l,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var aj=Ha("Slot");function lj(t){const e=E.forwardRef((r,n)=>{const{children:s,...i}=r;if(E.isValidElement(s)){const l=hj(s),d=dj(i,s.props);return s.type!==E.Fragment&&(d.ref=n?N0(n,l):l),E.cloneElement(s,d)}return E.Children.count(s)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var uE=Symbol("radix.slottable");function cj(t){const e=({children:r})=>u.jsx(u.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=uE,e}function uj(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===uE}function dj(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{const m=i(...d);return s(...d),m}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function hj(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function A0(t){const e=t+"CollectionProvider",[r,n]=gn(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),l=_=>{const{scope:I,children:R}=_,N=pe.useRef(null),A=pe.useRef(new Map).current;return u.jsx(s,{scope:I,itemMap:A,collectionRef:N,children:R})};l.displayName=e;const d=t+"CollectionSlot",m=Ha(d),f=pe.forwardRef((_,I)=>{const{scope:R,children:N}=_,A=i(d,R),O=Je(I,A.collectionRef);return u.jsx(m,{ref:O,children:N})});f.displayName=d;const x=t+"CollectionItemSlot",y="data-radix-collection-item",v=Ha(x),b=pe.forwardRef((_,I)=>{const{scope:R,children:N,...A}=_,O=pe.useRef(null),k=Je(I,O),F=i(x,R);return pe.useEffect(()=>(F.itemMap.set(O,{ref:O,...A}),()=>void F.itemMap.delete(O))),u.jsx(v,{[y]:"",ref:k,children:N})});b.displayName=x;function S(_){const I=i(t+"CollectionConsumer",_);return pe.useCallback(()=>{const N=I.collectionRef.current;if(!N)return[];const A=Array.from(N.querySelectorAll(`[${y}]`));return Array.from(I.itemMap.values()).sort((F,B)=>A.indexOf(F.ref.current)-A.indexOf(B.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:l,Slot:f,ItemSlot:b},S,n]}var fj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=fj.reduce((t,e)=>{const r=Ha(`Primitive.${e}`),n=E.forwardRef((s,i)=>{const{asChild:l,...d}=s,m=l?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(m,{...d,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Mx(t,e){t&&Za.flushSync(()=>t.dispatchEvent(e))}function cr(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function mj(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t);E.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var pj="DismissableLayer",T1="dismissableLayer.update",gj="dismissableLayer.pointerDownOutside",xj="dismissableLayer.focusOutside",Pv,dE=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pc=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:d,...m}=t,f=E.useContext(dE),[x,y]=E.useState(null),v=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Je(e,B=>y(B)),_=Array.from(f.layers),[I]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),R=_.indexOf(I),N=x?_.indexOf(x):-1,A=f.layersWithOutsidePointerEventsDisabled.size>0,O=N>=R,k=wj(B=>{const P=B.target,M=[...f.branches].some($=>$.contains(P));!O||M||(s==null||s(B),l==null||l(B),B.defaultPrevented||d==null||d())},v),F=vj(B=>{const P=B.target;[...f.branches].some($=>$.contains(P))||(i==null||i(B),l==null||l(B),B.defaultPrevented||d==null||d())},v);return mj(B=>{N===f.layers.size-1&&(n==null||n(B),!B.defaultPrevented&&d&&(B.preventDefault(),d()))},v),E.useEffect(()=>{if(x)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Pv=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(x)),f.layers.add(x),Dv(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Pv)}},[x,v,r,f]),E.useEffect(()=>()=>{x&&(f.layers.delete(x),f.layersWithOutsidePointerEventsDisabled.delete(x),Dv())},[x,f]),E.useEffect(()=>{const B=()=>b({});return document.addEventListener(T1,B),()=>document.removeEventListener(T1,B)},[]),u.jsx(Le.div,{...m,ref:S,style:{pointerEvents:A?O?"auto":"none":void 0,...t.style},onFocusCapture:Ne(t.onFocusCapture,F.onFocusCapture),onBlurCapture:Ne(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Ne(t.onPointerDownCapture,k.onPointerDownCapture)})});Pc.displayName=pj;var yj="DismissableLayerBranch",hE=E.forwardRef((t,e)=>{const r=E.useContext(dE),n=E.useRef(null),s=Je(e,n);return E.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),u.jsx(Le.div,{...t,ref:s})});hE.displayName=yj;function wj(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t),n=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const i=d=>{if(d.target&&!n.current){let m=function(){fE(gj,r,f,{discrete:!0})};const f={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=m,e.addEventListener("click",s.current,{once:!0})):m()}else e.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function vj(t,e=globalThis==null?void 0:globalThis.document){const r=cr(t),n=E.useRef(!1);return E.useEffect(()=>{const s=i=>{i.target&&!n.current&&fE(xj,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Dv(){const t=new CustomEvent(T1);document.dispatchEvent(t)}function fE(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Mx(s,i):s.dispatchEvent(i)}var bj=Pc,_j=hE,gr=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},Cj="Portal",Od=E.forwardRef((t,e)=>{var d;const{container:r,...n}=t,[s,i]=E.useState(!1);gr(()=>i(!0),[]);const l=r||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return l?lE.createPortal(u.jsx(Le.div,{...n,ref:e}),l):null});Od.displayName=Cj;function Ej(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var nn=t=>{const{present:e,children:r}=t,n=Sj(e),s=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),i=Je(n.ref,Nj(s));return typeof r=="function"||n.isPresent?E.cloneElement(s,{ref:i}):null};nn.displayName="Presence";function Sj(t){const[e,r]=E.useState(),n=E.useRef(null),s=E.useRef(t),i=E.useRef("none"),l=t?"mounted":"unmounted",[d,m]=Ej(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=yh(n.current);i.current=d==="mounted"?f:"none"},[d]),gr(()=>{const f=n.current,x=s.current;if(x!==t){const v=i.current,b=yh(f);t?m("MOUNT"):b==="none"||(f==null?void 0:f.display)==="none"?m("UNMOUNT"):m(x&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,m]),gr(()=>{if(e){let f;const x=e.ownerDocument.defaultView??window,y=b=>{const _=yh(n.current).includes(b.animationName);if(b.target===e&&_&&(m("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",f=x.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},v=b=>{b.target===e&&(i.current=yh(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{x.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function yh(t){return(t==null?void 0:t.animationName)||"none"}function Nj(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Aj=Vg[" useInsertionEffect ".trim().toString()]||gr;function yi({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,i,l]=Tj({defaultProp:e,onChange:r}),d=t!==void 0,m=d?t:s;{const x=E.useRef(t!==void 0);E.useEffect(()=>{const y=x.current;y!==d&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=d},[d,n])}const f=E.useCallback(x=>{var y;if(d){const v=Ij(x)?x(t):x;v!==t&&((y=l.current)==null||y.call(l,v))}else i(x)},[d,t,i,l]);return[m,f]}function Tj({defaultProp:t,onChange:e}){const[r,n]=E.useState(t),s=E.useRef(r),i=E.useRef(e);return Aj(()=>{i.current=e},[e]),E.useEffect(()=>{var l;s.current!==r&&((l=i.current)==null||l.call(i,r),s.current=r)},[r,s]),[r,n,i]}function Ij(t){return typeof t=="function"}var mE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Rj="VisuallyHidden",T0=E.forwardRef((t,e)=>u.jsx(Le.span,{...t,ref:e,style:{...mE,...t.style}}));T0.displayName=Rj;var Oj=T0,kx="ToastProvider",[Px,jj,Mj]=A0("Toast"),[pE,lH]=gn("Toast",[Mj]),[kj,I0]=pE(kx),gE=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=t,[d,m]=E.useState(null),[f,x]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${kx}\`. Expected non-empty \`string\`.`),u.jsx(Px.Provider,{scope:e,children:u.jsx(kj,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:f,viewport:d,onViewportChange:m,onToastAdd:E.useCallback(()=>x(b=>b+1),[]),onToastRemove:E.useCallback(()=>x(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:l})})};gE.displayName=kx;var xE="ToastViewport",Pj=["F8"],I1="toast.viewportPause",R1="toast.viewportResume",yE=E.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=Pj,label:s="Notifications ({hotkey})",...i}=t,l=I0(xE,r),d=jj(r),m=E.useRef(null),f=E.useRef(null),x=E.useRef(null),y=E.useRef(null),v=Je(e,y,l.onViewportChange),b=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=l.toastCount>0;E.useEffect(()=>{const I=R=>{var A;n.length!==0&&n.every(O=>R[O]||R.code===O)&&((A=y.current)==null||A.focus())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n]),E.useEffect(()=>{const I=m.current,R=y.current;if(S&&I&&R){const N=()=>{if(!l.isClosePausedRef.current){const F=new CustomEvent(I1);R.dispatchEvent(F),l.isClosePausedRef.current=!0}},A=()=>{if(l.isClosePausedRef.current){const F=new CustomEvent(R1);R.dispatchEvent(F),l.isClosePausedRef.current=!1}},O=F=>{!I.contains(F.relatedTarget)&&A()},k=()=>{I.contains(document.activeElement)||A()};return I.addEventListener("focusin",N),I.addEventListener("focusout",O),I.addEventListener("pointermove",N),I.addEventListener("pointerleave",k),window.addEventListener("blur",N),window.addEventListener("focus",A),()=>{I.removeEventListener("focusin",N),I.removeEventListener("focusout",O),I.removeEventListener("pointermove",N),I.removeEventListener("pointerleave",k),window.removeEventListener("blur",N),window.removeEventListener("focus",A)}}},[S,l.isClosePausedRef]);const _=E.useCallback(({tabbingDirection:I})=>{const N=d().map(A=>{const O=A.ref.current,k=[O,...qj(O)];return I==="forwards"?k:k.reverse()});return(I==="forwards"?N.reverse():N).flat()},[d]);return E.useEffect(()=>{const I=y.current;if(I){const R=N=>{var k,F,B;const A=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!A){const P=document.activeElement,M=N.shiftKey;if(N.target===I&&M){(k=f.current)==null||k.focus();return}const K=_({tabbingDirection:M?"backwards":"forwards"}),ee=K.findIndex(z=>z===P);rp(K.slice(ee+1))?N.preventDefault():M?(F=f.current)==null||F.focus():(B=x.current)==null||B.focus()}};return I.addEventListener("keydown",R),()=>I.removeEventListener("keydown",R)}},[d,_]),u.jsxs(_j,{ref:m,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&u.jsx(O1,{ref:f,onFocusFromOutsideViewport:()=>{const I=_({tabbingDirection:"forwards"});rp(I)}}),u.jsx(Px.Slot,{scope:r,children:u.jsx(Le.ol,{tabIndex:-1,...i,ref:v})}),S&&u.jsx(O1,{ref:x,onFocusFromOutsideViewport:()=>{const I=_({tabbingDirection:"backwards"});rp(I)}})]})});yE.displayName=xE;var wE="ToastFocusProxy",O1=E.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,i=I0(wE,r);return u.jsx(T0,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var f;const d=l.relatedTarget;!((f=i.viewport)!=null&&f.contains(d))&&n()}})});O1.displayName=wE;var jd="Toast",Dj="toast.swipeStart",Lj="toast.swipeMove",Bj="toast.swipeCancel",Fj="toast.swipeEnd",vE=E.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...l}=t,[d,m]=yi({prop:n,defaultProp:s??!0,onChange:i,caller:jd});return u.jsx(nn,{present:r||d,children:u.jsx(Vj,{open:d,...l,ref:e,onClose:()=>m(!1),onPause:cr(t.onPause),onResume:cr(t.onResume),onSwipeStart:Ne(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ne(t.onSwipeMove,f=>{const{x,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Ne(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ne(t.onSwipeEnd,f=>{const{x,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),m(!1)})})})});vE.displayName=jd;var[Uj,zj]=pE(jd,{onClose(){}}),Vj=E.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:d,onPause:m,onResume:f,onSwipeStart:x,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...S}=t,_=I0(jd,r),[I,R]=E.useState(null),N=Je(e,z=>R(z)),A=E.useRef(null),O=E.useRef(null),k=s||_.duration,F=E.useRef(0),B=E.useRef(k),P=E.useRef(0),{onToastAdd:M,onToastRemove:$}=_,G=cr(()=>{var V;(I==null?void 0:I.contains(document.activeElement))&&((V=_.viewport)==null||V.focus()),l()}),K=E.useCallback(z=>{!z||z===1/0||(window.clearTimeout(P.current),F.current=new Date().getTime(),P.current=window.setTimeout(G,z))},[G]);E.useEffect(()=>{const z=_.viewport;if(z){const V=()=>{K(B.current),f==null||f()},J=()=>{const Y=new Date().getTime()-F.current;B.current=B.current-Y,window.clearTimeout(P.current),m==null||m()};return z.addEventListener(I1,J),z.addEventListener(R1,V),()=>{z.removeEventListener(I1,J),z.removeEventListener(R1,V)}}},[_.viewport,k,m,f,K]),E.useEffect(()=>{i&&!_.isClosePausedRef.current&&K(k)},[i,k,_.isClosePausedRef,K]),E.useEffect(()=>(M(),()=>$()),[M,$]);const ee=E.useMemo(()=>I?AE(I):null,[I]);return _.viewport?u.jsxs(u.Fragment,{children:[ee&&u.jsx(Hj,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:ee}),u.jsx(Uj,{scope:r,onClose:G,children:Za.createPortal(u.jsx(Px.ItemSlot,{scope:r,children:u.jsx(bj,{asChild:!0,onEscapeKeyDown:Ne(d,()=>{_.isFocusedToastEscapeKeyDownRef.current||G(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(Le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":_.swipeDirection,...S,ref:N,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ne(t.onKeyDown,z=>{z.key==="Escape"&&(d==null||d(z.nativeEvent),z.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:Ne(t.onPointerDown,z=>{z.button===0&&(A.current={x:z.clientX,y:z.clientY})}),onPointerMove:Ne(t.onPointerMove,z=>{if(!A.current)return;const V=z.clientX-A.current.x,J=z.clientY-A.current.y,Y=!!O.current,q=["left","right"].includes(_.swipeDirection),Q=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ie=q?Q(0,V):0,fe=q?0:Q(0,J),oe=z.pointerType==="touch"?10:2,le={x:ie,y:fe},ce={originalEvent:z,delta:le};Y?(O.current=le,wh(Lj,y,ce,{discrete:!1})):Lv(le,_.swipeDirection,oe)?(O.current=le,wh(Dj,x,ce,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(V)>oe||Math.abs(J)>oe)&&(A.current=null)}),onPointerUp:Ne(t.onPointerUp,z=>{const V=O.current,J=z.target;if(J.hasPointerCapture(z.pointerId)&&J.releasePointerCapture(z.pointerId),O.current=null,A.current=null,V){const Y=z.currentTarget,q={originalEvent:z,delta:V};Lv(V,_.swipeDirection,_.swipeThreshold)?wh(Fj,b,q,{discrete:!0}):wh(Bj,v,q,{discrete:!0}),Y.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),Hj=t=>{const{__scopeToast:e,children:r,...n}=t,s=I0(jd,e),[i,l]=E.useState(!1),[d,m]=E.useState(!1);return Gj(()=>l(!0)),E.useEffect(()=>{const f=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(f)},[]),d?null:u.jsx(Od,{asChild:!0,children:u.jsx(T0,{...n,children:i&&u.jsxs(u.Fragment,{children:[s.label," ",r]})})})},$j="ToastTitle",bE=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return u.jsx(Le.div,{...n,ref:e})});bE.displayName=$j;var Wj="ToastDescription",_E=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return u.jsx(Le.div,{...n,ref:e})});_E.displayName=Wj;var CE="ToastAction",EE=E.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?u.jsx(NE,{altText:r,asChild:!0,children:u.jsx(Dx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${CE}\`. Expected non-empty \`string\`.`),null)});EE.displayName=CE;var SE="ToastClose",Dx=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=zj(SE,r);return u.jsx(NE,{asChild:!0,children:u.jsx(Le.button,{type:"button",...n,ref:e,onClick:Ne(t.onClick,s.onClose)})})});Dx.displayName=SE;var NE=E.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return u.jsx(Le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function AE(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Yj(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...AE(n))}}),e}function wh(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?Mx(s,i):s.dispatchEvent(i)}var Lv=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),i=n>s;return e==="left"||e==="right"?i&&n>r:!i&&s>r};function Gj(t=()=>{}){const e=cr(t);gr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Yj(t){return t.nodeType===t.ELEMENT_NODE}function qj(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function rp(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Xj=gE,TE=yE,IE=vE,RE=bE,OE=_E,jE=EE,ME=Dx;function kE(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=kE(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function PE(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=kE(t))&&(n&&(n+=" "),n+=e);return n}const Bv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Fv=PE,R0=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Fv(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(f=>{const x=r==null?void 0:r[f],y=i==null?void 0:i[f];if(x===null)return null;const v=Bv(x)||Bv(y);return s[f][v]}),d=r&&Object.entries(r).reduce((f,x)=>{let[y,v]=x;return v===void 0||(f[y]=v),f},{}),m=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((f,x)=>{let{class:y,className:v,...b}=x;return Object.entries(b).every(S=>{let[_,I]=S;return Array.isArray(I)?I.includes({...i,...d}[_]):{...i,...d}[_]===I})?[...f,y,v]:f},[]);return Fv(t,l,m,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DE=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...d},m)=>E.createElement("svg",{ref:m,...Qj,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:DE("lucide",s),...d},[...l.map(([f,x])=>E.createElement(f,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const r=E.forwardRef(({className:n,...s},i)=>E.createElement(Zj,{ref:i,iconNode:e,className:DE(`lucide-${Kj(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=$e("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=$e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=$e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=$e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=$e("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=$e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=$e("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=$e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=$e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=$e("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=$e("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=$e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=$e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=$e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=$e("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=$e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=$e("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=$e("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=$e("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=$e("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=$e("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=$e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=$e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=$e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=$e("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=$e("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ux="-",hM=t=>{const e=mM(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const d=l.split(Ux);return d[0]===""&&d.length!==1&&d.shift(),ZE(d,e)||fM(l)},getConflictingClassGroupIds:(l,d)=>{const m=r[l]||[];return d&&n[l]?[...m,...n[l]]:m}}},ZE=(t,e)=>{var l;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?ZE(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ux);return(l=e.validators.find(({validator:d})=>d(i)))==null?void 0:l.classGroupId},Hv=/^\[(.+)\]$/,fM=t=>{if(Hv.test(t)){const e=Hv.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},mM=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return gM(Object.entries(t.classGroups),r).forEach(([i,l])=>{k1(l,n,i,e)}),n},k1=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:$v(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(pM(s)){k1(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,l])=>{k1(l,$v(e,i),r,n)})})},$v=(t,e)=>{let r=t;return e.split(Ux).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},pM=t=>t.isThemeGetter,gM=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,d])=>[e+l,d])):i);return[r,s]}):t,xM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,l)=>{r.set(i,l),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return s(i,l),l},set(i,l){r.has(i)?r.set(i,l):s(i,l)}}},JE="!",yM=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,l=d=>{const m=[];let f=0,x=0,y;for(let I=0;I<d.length;I++){let R=d[I];if(f===0){if(R===s&&(n||d.slice(I,I+i)===e)){m.push(d.slice(x,I)),x=I+i;continue}if(R==="/"){y=I;continue}}R==="["?f++:R==="]"&&f--}const v=m.length===0?d:d.substring(x),b=v.startsWith(JE),S=b?v.substring(1):v,_=y&&y>x?y-x:void 0;return{modifiers:m,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:_}};return r?d=>r({className:d,parseClassName:l}):l},wM=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},vM=t=>({cache:xM(t.cacheSize),parseClassName:yM(t),...hM(t)}),bM=/\s+/,_M=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],l=t.trim().split(bM);let d="";for(let m=l.length-1;m>=0;m-=1){const f=l[m],{modifiers:x,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=r(f);let S=!!b,_=n(S?v.substring(0,b):v);if(!_){if(!S){d=f+(d.length>0?" "+d:d);continue}if(_=n(v),!_){d=f+(d.length>0?" "+d:d);continue}S=!1}const I=wM(x).join(":"),R=y?I+JE:I,N=R+_;if(i.includes(N))continue;i.push(N);const A=s(_,S);for(let O=0;O<A.length;++O){const k=A[O];i.push(R+k)}d=f+(d.length>0?" "+d:d)}return d};function CM(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=eS(e))&&(n&&(n+=" "),n+=r);return n}const eS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=eS(t[n]))&&(r&&(r+=" "),r+=e);return r};function EM(t,...e){let r,n,s,i=l;function l(m){const f=e.reduce((x,y)=>y(x),t());return r=vM(f),n=r.cache.get,s=r.cache.set,i=d,d(m)}function d(m){const f=n(m);if(f)return f;const x=_M(m,r);return s(m,x),x}return function(){return i(CM.apply(null,arguments))}}const Dt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},tS=/^\[(?:([a-z-]+):)?(.+)\]$/i,SM=/^\d+\/\d+$/,NM=new Set(["px","full","screen"]),AM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ai=t=>Ql(t)||NM.has(t)||SM.test(t),no=t=>Dc(t,"length",FM),Ql=t=>!!t&&!Number.isNaN(Number(t)),np=t=>Dc(t,"number",Ql),uu=t=>!!t&&Number.isInteger(Number(t)),jM=t=>t.endsWith("%")&&Ql(t.slice(0,-1)),tt=t=>tS.test(t),so=t=>AM.test(t),MM=new Set(["length","size","percentage"]),kM=t=>Dc(t,MM,rS),PM=t=>Dc(t,"position",rS),DM=new Set(["image","url"]),LM=t=>Dc(t,DM,zM),BM=t=>Dc(t,"",UM),du=()=>!0,Dc=(t,e,r)=>{const n=tS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},FM=t=>TM.test(t)&&!IM.test(t),rS=()=>!1,UM=t=>RM.test(t),zM=t=>OM.test(t),VM=()=>{const t=Dt("colors"),e=Dt("spacing"),r=Dt("blur"),n=Dt("brightness"),s=Dt("borderColor"),i=Dt("borderRadius"),l=Dt("borderSpacing"),d=Dt("borderWidth"),m=Dt("contrast"),f=Dt("grayscale"),x=Dt("hueRotate"),y=Dt("invert"),v=Dt("gap"),b=Dt("gradientColorStops"),S=Dt("gradientColorStopPositions"),_=Dt("inset"),I=Dt("margin"),R=Dt("opacity"),N=Dt("padding"),A=Dt("saturate"),O=Dt("scale"),k=Dt("sepia"),F=Dt("skew"),B=Dt("space"),P=Dt("translate"),M=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",tt,e],K=()=>[tt,e],ee=()=>["",Ai,no],z=()=>["auto",Ql,tt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",tt],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[Ql,tt];return{cacheSize:500,separator:":",theme:{colors:[du],spacing:[Ai,no],blur:["none","",so,tt],brightness:fe(),borderColor:[t],borderRadius:["none","","full",so,tt],borderSpacing:K(),borderWidth:ee(),contrast:fe(),grayscale:Q(),hueRotate:fe(),invert:Q(),gap:K(),gradientColorStops:[t],gradientColorStopPositions:[jM,no],inset:G(),margin:G(),opacity:fe(),padding:K(),saturate:fe(),scale:fe(),sepia:Q(),skew:fe(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),tt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uu,tt]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",uu,tt]}],"grid-cols":[{"grid-cols":[du]}],"col-start-end":[{col:["auto",{span:["full",uu,tt]},tt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[du]}],"row-start-end":[{row:["auto",{span:[uu,tt]},tt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,e]}],"min-w":[{"min-w":[tt,e,"min","max","fit"]}],"max-w":[{"max-w":[tt,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[tt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,no]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",np]}],"font-family":[{font:[du]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",Ql,np]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ai,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ai,no]}],"underline-offset":[{"underline-offset":["auto",Ai,tt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),PM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Ai,tt]}],"outline-w":[{outline:[Ai,no]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Ai,no]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,BM]}],"shadow-color":[{shadow:[du]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",so,tt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[y]}],saturate:[{saturate:[A]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[uu,tt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ai,no,np]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},HM=EM(VM);function Ie(...t){return HM(PE(t))}const $M=Xj,nS=E.forwardRef(({className:t,...e},r)=>u.jsx(TE,{ref:r,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));nS.displayName=TE.displayName;const WM=R0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sS=E.forwardRef(({className:t,variant:e,...r},n)=>u.jsx(IE,{ref:n,className:Ie(WM({variant:e}),t),...r}));sS.displayName=IE.displayName;const GM=E.forwardRef(({className:t,...e},r)=>u.jsx(jE,{ref:r,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));GM.displayName=jE.displayName;const iS=E.forwardRef(({className:t,...e},r)=>u.jsx(ME,{ref:r,className:Ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:u.jsx(QE,{className:"h-4 w-4"})}));iS.displayName=ME.displayName;const oS=E.forwardRef(({className:t,...e},r)=>u.jsx(RE,{ref:r,className:Ie("text-sm font-semibold",t),...e}));oS.displayName=RE.displayName;const aS=E.forwardRef(({className:t,...e},r)=>u.jsx(OE,{ref:r,className:Ie("text-sm opacity-90",t),...e}));aS.displayName=OE.displayName;function YM(){const{toasts:t}=sj();return u.jsxs($M,{children:[t.map(function({id:e,title:r,description:n,action:s,...i}){return u.jsxs(sS,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[r&&u.jsx(oS,{children:r}),n&&u.jsx(aS,{children:n})]}),s,u.jsx(iS,{})]},e)}),u.jsx(nS,{})]})}var Wv=["light","dark"],qM="(prefers-color-scheme: dark)",XM=E.createContext(void 0),KM={setTheme:t=>{},themes:[]},QM=()=>{var t;return(t=E.useContext(XM))!=null?t:KM};E.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:l,attrs:d,nonce:m})=>{let f=i==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,y=s?Wv.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,_=!1,I=!0)=>{let R=l?l[S]:S,N=_?S+"|| ''":`'${R}'`,A="";return s&&I&&!_&&Wv.includes(S)&&(A+=`d.style.colorScheme = '${S}';`),r==="class"?_||R?A+=`c.add(${N})`:A+="null":R&&(A+=`d[s](n,${N})`),A},b=t?`!function(){${x}${v(t)}}()`:n?`!function(){try{${x}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${qM}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}${f?"":"else{"+v(i,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${e}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${v(l?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:b}})});var ZM=t=>{switch(t){case"success":return tk;case"info":return nk;case"warning":return rk;case"error":return sk;default:return null}},JM=Array(12).fill(0),ek=({visible:t,className:e})=>pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},pe.createElement("div",{className:"sonner-spinner"},JM.map((r,n)=>pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),tk=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rk=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nk=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sk=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ik=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ok=()=>{let[t,e]=pe.useState(document.hidden);return pe.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},P1=1,ak=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:P1++,i=this.toasts.find(d=>d.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(d=>d.id===s?(this.publish({...d,...t,id:s,title:r}),{...d,...t,id:s,dismissible:l,title:r}):d):this.addToast({title:r,...n,dismissible:l,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,i,l=n.then(async m=>{if(i=["resolve",m],pe.isValidElement(m))s=!1,this.create({id:r,type:"default",message:m});else if(ck(m)&&!m.ok){s=!1;let f=typeof e.error=="function"?await e.error(`HTTP error! status: ${m.status}`):e.error,x=typeof e.description=="function"?await e.description(`HTTP error! status: ${m.status}`):e.description;this.create({id:r,type:"error",message:f,description:x})}else if(e.success!==void 0){s=!1;let f=typeof e.success=="function"?await e.success(m):e.success,x=typeof e.description=="function"?await e.description(m):e.description;this.create({id:r,type:"success",message:f,description:x})}}).catch(async m=>{if(i=["reject",m],e.error!==void 0){s=!1;let f=typeof e.error=="function"?await e.error(m):e.error,x=typeof e.description=="function"?await e.description(m):e.description;this.create({id:r,type:"error",message:f,description:x})}}).finally(()=>{var m;s&&(this.dismiss(r),r=void 0),(m=e.finally)==null||m.call(e)}),d=()=>new Promise((m,f)=>l.then(()=>i[0]==="reject"?f(i[1]):m(i[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||P1++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Cn=new ak,lk=(t,e)=>{let r=(e==null?void 0:e.id)||P1++;return Cn.addToast({title:t,...e,id:r}),r},ck=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",uk=lk,dk=()=>Cn.toasts,hk=()=>Cn.getActiveToasts(),ve=Object.assign(uk,{success:Cn.success,info:Cn.info,warning:Cn.warning,error:Cn.error,custom:Cn.custom,message:Cn.message,promise:Cn.promise,dismiss:Cn.dismiss,loading:Cn.loading},{getHistory:dk,getToasts:hk});function fk(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}fk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function vh(t){return t.label!==void 0}var mk=3,pk="32px",gk="16px",Gv=4e3,xk=356,yk=14,wk=20,vk=200;function Ts(...t){return t.filter(Boolean).join(" ")}function bk(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var _k=t=>{var e,r,n,s,i,l,d,m,f,x,y;let{invert:v,toast:b,unstyled:S,interacting:_,setHeights:I,visibleToasts:R,heights:N,index:A,toasts:O,expanded:k,removeToast:F,defaultRichColors:B,closeButton:P,style:M,cancelButtonStyle:$,actionButtonStyle:G,className:K="",descriptionClassName:ee="",duration:z,position:V,gap:J,loadingIcon:Y,expandByDefault:q,classNames:Q,icons:ie,closeButtonAriaLabel:fe="Close toast",pauseWhenPageIsHidden:oe}=t,[le,ce]=pe.useState(null),[Be,xe]=pe.useState(null),[be,Pe]=pe.useState(!1),[Xe,ae]=pe.useState(!1),[Ee,ke]=pe.useState(!1),[Me,gt]=pe.useState(!1),[St,er]=pe.useState(!1),[me,Fe]=pe.useState(0),[Ae,bt]=pe.useState(0),Ce=pe.useRef(b.duration||z||Gv),Dr=pe.useRef(null),it=pe.useRef(null),tr=A===0,ra=A+1<=R,At=b.type,Si=b.dismissible!==!1,Qs=b.className||"",Lr=b.descriptionClassName||"",na=pe.useMemo(()=>N.findIndex(Ve=>Ve.toastId===b.id)||0,[N,b.id]),ol=pe.useMemo(()=>{var Ve;return(Ve=b.closeButton)!=null?Ve:P},[b.closeButton,P]),$d=pe.useMemo(()=>b.duration||z||Gv,[b.duration,z]),Ut=pe.useRef(0),Se=pe.useRef(0),rr=pe.useRef(0),ht=pe.useRef(null),[zt,sa]=V.split("-"),al=pe.useMemo(()=>N.reduce((Ve,xt,et)=>et>=na?Ve:Ve+xt.height,0),[N,na]),Gc=ok(),ft=b.invert||v,Es=At==="loading";Se.current=pe.useMemo(()=>na*J+al,[na,al]),pe.useEffect(()=>{Ce.current=$d},[$d]),pe.useEffect(()=>{Pe(!0)},[]),pe.useEffect(()=>{let Ve=it.current;if(Ve){let xt=Ve.getBoundingClientRect().height;return bt(xt),I(et=>[{toastId:b.id,height:xt,position:b.position},...et]),()=>I(et=>et.filter(Ir=>Ir.toastId!==b.id))}},[I,b.id]),pe.useLayoutEffect(()=>{if(!be)return;let Ve=it.current,xt=Ve.style.height;Ve.style.height="auto";let et=Ve.getBoundingClientRect().height;Ve.style.height=xt,bt(et),I(Ir=>Ir.find(Yr=>Yr.toastId===b.id)?Ir.map(Yr=>Yr.toastId===b.id?{...Yr,height:et}:Yr):[{toastId:b.id,height:et,position:b.position},...Ir])},[be,b.title,b.description,I,b.id]);let Ss=pe.useCallback(()=>{ae(!0),Fe(Se.current),I(Ve=>Ve.filter(xt=>xt.toastId!==b.id)),setTimeout(()=>{F(b)},vk)},[b,F,I,Se]);pe.useEffect(()=>{if(b.promise&&At==="loading"||b.duration===1/0||b.type==="loading")return;let Ve;return k||_||oe&&Gc?(()=>{if(rr.current<Ut.current){let xt=new Date().getTime()-Ut.current;Ce.current=Ce.current-xt}rr.current=new Date().getTime()})():Ce.current!==1/0&&(Ut.current=new Date().getTime(),Ve=setTimeout(()=>{var xt;(xt=b.onAutoClose)==null||xt.call(b,b),Ss()},Ce.current)),()=>clearTimeout(Ve)},[k,_,b,At,oe,Gc,Ss]),pe.useEffect(()=>{b.delete&&Ss()},[Ss,b.delete]);function Wd(){var Ve,xt,et;return ie!=null&&ie.loading?pe.createElement("div",{className:Ts(Q==null?void 0:Q.loader,(Ve=b==null?void 0:b.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":At==="loading"},ie.loading):Y?pe.createElement("div",{className:Ts(Q==null?void 0:Q.loader,(xt=b==null?void 0:b.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":At==="loading"},Y):pe.createElement(ek,{className:Ts(Q==null?void 0:Q.loader,(et=b==null?void 0:b.classNames)==null?void 0:et.loader),visible:At==="loading"})}return pe.createElement("li",{tabIndex:0,ref:it,className:Ts(K,Qs,Q==null?void 0:Q.toast,(e=b==null?void 0:b.classNames)==null?void 0:e.toast,Q==null?void 0:Q.default,Q==null?void 0:Q[At],(r=b==null?void 0:b.classNames)==null?void 0:r[At]),"data-sonner-toast":"","data-rich-colors":(n=b.richColors)!=null?n:B,"data-styled":!(b.jsx||b.unstyled||S),"data-mounted":be,"data-promise":!!b.promise,"data-swiped":St,"data-removed":Xe,"data-visible":ra,"data-y-position":zt,"data-x-position":sa,"data-index":A,"data-front":tr,"data-swiping":Ee,"data-dismissible":Si,"data-type":At,"data-invert":ft,"data-swipe-out":Me,"data-swipe-direction":Be,"data-expanded":!!(k||q&&be),style:{"--index":A,"--toasts-before":A,"--z-index":O.length-A,"--offset":`${Xe?me:Se.current}px`,"--initial-height":q?"auto":`${Ae}px`,...M,...b.style},onDragEnd:()=>{ke(!1),ce(null),ht.current=null},onPointerDown:Ve=>{Es||!Si||(Dr.current=new Date,Fe(Se.current),Ve.target.setPointerCapture(Ve.pointerId),Ve.target.tagName!=="BUTTON"&&(ke(!0),ht.current={x:Ve.clientX,y:Ve.clientY}))},onPointerUp:()=>{var Ve,xt,et,Ir;if(Me||!Si)return;ht.current=null;let Yr=Number(((Ve=it.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_r=Number(((xt=it.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ni=new Date().getTime()-((et=Dr.current)==null?void 0:et.getTime()),Cr=le==="x"?Yr:_r,rs=Math.abs(Cr)/Ni;if(Math.abs(Cr)>=wk||rs>.11){Fe(Se.current),(Ir=b.onDismiss)==null||Ir.call(b,b),xe(le==="x"?Yr>0?"right":"left":_r>0?"down":"up"),Ss(),gt(!0),er(!1);return}ke(!1),ce(null)},onPointerMove:Ve=>{var xt,et,Ir,Yr;if(!ht.current||!Si||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;let _r=Ve.clientY-ht.current.y,Ni=Ve.clientX-ht.current.x,Cr=(et=t.swipeDirections)!=null?et:bk(V);!le&&(Math.abs(Ni)>1||Math.abs(_r)>1)&&ce(Math.abs(Ni)>Math.abs(_r)?"x":"y");let rs={x:0,y:0};le==="y"?(Cr.includes("top")||Cr.includes("bottom"))&&(Cr.includes("top")&&_r<0||Cr.includes("bottom")&&_r>0)&&(rs.y=_r):le==="x"&&(Cr.includes("left")||Cr.includes("right"))&&(Cr.includes("left")&&Ni<0||Cr.includes("right")&&Ni>0)&&(rs.x=Ni),(Math.abs(rs.x)>0||Math.abs(rs.y)>0)&&er(!0),(Ir=it.current)==null||Ir.style.setProperty("--swipe-amount-x",`${rs.x}px`),(Yr=it.current)==null||Yr.style.setProperty("--swipe-amount-y",`${rs.y}px`)}},ol&&!b.jsx?pe.createElement("button",{"aria-label":fe,"data-disabled":Es,"data-close-button":!0,onClick:Es||!Si?()=>{}:()=>{var Ve;Ss(),(Ve=b.onDismiss)==null||Ve.call(b,b)},className:Ts(Q==null?void 0:Q.closeButton,(s=b==null?void 0:b.classNames)==null?void 0:s.closeButton)},(i=ie==null?void 0:ie.close)!=null?i:ik):null,b.jsx||E.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:pe.createElement(pe.Fragment,null,At||b.icon||b.promise?pe.createElement("div",{"data-icon":"",className:Ts(Q==null?void 0:Q.icon,(l=b==null?void 0:b.classNames)==null?void 0:l.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||Wd():null,b.type!=="loading"?b.icon||(ie==null?void 0:ie[At])||ZM(At):null):null,pe.createElement("div",{"data-content":"",className:Ts(Q==null?void 0:Q.content,(d=b==null?void 0:b.classNames)==null?void 0:d.content)},pe.createElement("div",{"data-title":"",className:Ts(Q==null?void 0:Q.title,(m=b==null?void 0:b.classNames)==null?void 0:m.title)},typeof b.title=="function"?b.title():b.title),b.description?pe.createElement("div",{"data-description":"",className:Ts(ee,Lr,Q==null?void 0:Q.description,(f=b==null?void 0:b.classNames)==null?void 0:f.description)},typeof b.description=="function"?b.description():b.description):null),E.isValidElement(b.cancel)?b.cancel:b.cancel&&vh(b.cancel)?pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||$,onClick:Ve=>{var xt,et;vh(b.cancel)&&Si&&((et=(xt=b.cancel).onClick)==null||et.call(xt,Ve),Ss())},className:Ts(Q==null?void 0:Q.cancelButton,(x=b==null?void 0:b.classNames)==null?void 0:x.cancelButton)},b.cancel.label):null,E.isValidElement(b.action)?b.action:b.action&&vh(b.action)?pe.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||G,onClick:Ve=>{var xt,et;vh(b.action)&&((et=(xt=b.action).onClick)==null||et.call(xt,Ve),!Ve.defaultPrevented&&Ss())},className:Ts(Q==null?void 0:Q.actionButton,(y=b==null?void 0:b.classNames)==null?void 0:y.actionButton)},b.action.label):null))};function Yv(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Ck(t,e){let r={};return[t,e].forEach((n,s)=>{let i=s===1,l=i?"--mobile-offset":"--offset",d=i?gk:pk;function m(f){["top","right","bottom","left"].forEach(x=>{r[`${l}-${x}`]=typeof f=="number"?`${f}px`:f})}typeof n=="number"||typeof n=="string"?m(n):typeof n=="object"?["top","right","bottom","left"].forEach(f=>{n[f]===void 0?r[`${l}-${f}`]=d:r[`${l}-${f}`]=typeof n[f]=="number"?`${n[f]}px`:n[f]}):m(d)}),r}var Ek=E.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:l,className:d,offset:m,mobileOffset:f,theme:x="light",richColors:y,duration:v,style:b,visibleToasts:S=mk,toastOptions:_,dir:I=Yv(),gap:R=yk,loadingIcon:N,icons:A,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:k}=t,[F,B]=pe.useState([]),P=pe.useMemo(()=>Array.from(new Set([n].concat(F.filter(oe=>oe.position).map(oe=>oe.position)))),[F,n]),[M,$]=pe.useState([]),[G,K]=pe.useState(!1),[ee,z]=pe.useState(!1),[V,J]=pe.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=pe.useRef(null),q=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=pe.useRef(null),ie=pe.useRef(!1),fe=pe.useCallback(oe=>{B(le=>{var ce;return(ce=le.find(Be=>Be.id===oe.id))!=null&&ce.delete||Cn.dismiss(oe.id),le.filter(({id:Be})=>Be!==oe.id)})},[]);return pe.useEffect(()=>Cn.subscribe(oe=>{if(oe.dismiss){B(le=>le.map(ce=>ce.id===oe.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{lE.flushSync(()=>{B(le=>{let ce=le.findIndex(Be=>Be.id===oe.id);return ce!==-1?[...le.slice(0,ce),{...le[ce],...oe},...le.slice(ce+1)]:[oe,...le]})})})}),[]),pe.useEffect(()=>{if(x!=="system"){J(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:le})=>{J(le?"dark":"light")})}catch{oe.addListener(({matches:ce})=>{try{J(ce?"dark":"light")}catch(Be){console.error(Be)}})}},[x]),pe.useEffect(()=>{F.length<=1&&K(!1)},[F]),pe.useEffect(()=>{let oe=le=>{var ce,Be;s.every(xe=>le[xe]||le.code===xe)&&(K(!0),(ce=Y.current)==null||ce.focus()),le.code==="Escape"&&(document.activeElement===Y.current||(Be=Y.current)!=null&&Be.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),pe.useEffect(()=>{if(Y.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,ie.current=!1)}},[Y.current]),pe.createElement("section",{ref:e,"aria-label":`${O} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((oe,le)=>{var ce;let[Be,xe]=oe.split("-");return F.length?pe.createElement("ol",{key:oe,dir:I==="auto"?Yv():I,tabIndex:-1,ref:Y,className:d,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":Be,"data-lifted":G&&F.length>1&&!i,"data-x-position":xe,style:{"--front-toast-height":`${((ce=M[0])==null?void 0:ce.height)||0}px`,"--width":`${xk}px`,"--gap":`${R}px`,...b,...Ck(m,f)},onBlur:be=>{ie.current&&!be.currentTarget.contains(be.relatedTarget)&&(ie.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,Q.current=be.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ee||K(!1)},onDragEnd:()=>K(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},F.filter(be=>!be.position&&le===0||be.position===oe).map((be,Pe)=>{var Xe,ae;return pe.createElement(_k,{key:be.id,icons:A,index:Pe,toast:be,defaultRichColors:y,duration:(Xe=_==null?void 0:_.duration)!=null?Xe:v,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:S,closeButton:(ae=_==null?void 0:_.closeButton)!=null?ae:l,interacting:ee,position:oe,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:fe,toasts:F.filter(Ee=>Ee.position==be.position),heights:M.filter(Ee=>Ee.position==be.position),setHeights:$,expandByDefault:i,gap:R,loadingIcon:N,expanded:G,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const Sk=({...t})=>{const{theme:e="system"}=QM();return u.jsx(Ek,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Nk=Vg[" useId ".trim().toString()]||(()=>{}),Ak=0;function $s(t){const[e,r]=E.useState(Nk());return gr(()=>{t||r(n=>n??String(Ak++))},[t]),t||(e?`radix-${e}`:"")}const Tk=["top","right","bottom","left"],zo=Math.min,Fn=Math.max,Df=Math.round,bh=Math.floor,gi=t=>({x:t,y:t}),Ik={left:"right",right:"left",bottom:"top",top:"bottom"},Rk={start:"end",end:"start"};function D1(t,e,r){return Fn(t,zo(e,r))}function Wi(t,e){return typeof t=="function"?t(e):t}function Gi(t){return t.split("-")[0]}function Lc(t){return t.split("-")[1]}function zx(t){return t==="x"?"y":"x"}function Vx(t){return t==="y"?"height":"width"}const Ok=new Set(["top","bottom"]);function hi(t){return Ok.has(Gi(t))?"y":"x"}function Hx(t){return zx(hi(t))}function jk(t,e,r){r===void 0&&(r=!1);const n=Lc(t),s=Hx(t),i=Vx(s);let l=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Lf(l)),[l,Lf(l)]}function Mk(t){const e=Lf(t);return[L1(t),e,L1(e)]}function L1(t){return t.replace(/start|end/g,e=>Rk[e])}const qv=["left","right"],Xv=["right","left"],kk=["top","bottom"],Pk=["bottom","top"];function Dk(t,e,r){switch(t){case"top":case"bottom":return r?e?Xv:qv:e?qv:Xv;case"left":case"right":return e?kk:Pk;default:return[]}}function Lk(t,e,r,n){const s=Lc(t);let i=Dk(Gi(t),r==="start",n);return s&&(i=i.map(l=>l+"-"+s),e&&(i=i.concat(i.map(L1)))),i}function Lf(t){return t.replace(/left|right|bottom|top/g,e=>Ik[e])}function Bk(t){return{top:0,right:0,bottom:0,left:0,...t}}function lS(t){return typeof t!="number"?Bk(t):{top:t,right:t,bottom:t,left:t}}function Bf(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Kv(t,e,r){let{reference:n,floating:s}=t;const i=hi(e),l=Hx(e),d=Vx(l),m=Gi(e),f=i==="y",x=n.x+n.width/2-s.width/2,y=n.y+n.height/2-s.height/2,v=n[d]/2-s[d]/2;let b;switch(m){case"top":b={x,y:n.y-s.height};break;case"bottom":b={x,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y};break;case"left":b={x:n.x-s.width,y};break;default:b={x:n.x,y:n.y}}switch(Lc(e)){case"start":b[l]-=v*(r&&f?-1:1);break;case"end":b[l]+=v*(r&&f?-1:1);break}return b}const Fk=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:l}=r,d=i.filter(Boolean),m=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:s}),{x,y}=Kv(f,n,m),v=n,b={},S=0;for(let _=0;_<d.length;_++){const{name:I,fn:R}=d[_],{x:N,y:A,data:O,reset:k}=await R({x,y,initialPlacement:n,placement:v,strategy:s,middlewareData:b,rects:f,platform:l,elements:{reference:t,floating:e}});x=N??x,y=A??y,b={...b,[I]:{...b[I],...O}},k&&S<=50&&(S++,typeof k=="object"&&(k.placement&&(v=k.placement),k.rects&&(f=k.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x,y}=Kv(f,v,m)),_=-1)}return{x,y,placement:v,strategy:s,middlewareData:b}};async function sd(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:l,elements:d,strategy:m}=t,{boundary:f="clippingAncestors",rootBoundary:x="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=Wi(e,t),S=lS(b),I=d[v?y==="floating"?"reference":"floating":y],R=Bf(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(I)))==null||r?I:I.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(d.floating)),boundary:f,rootBoundary:x,strategy:m})),N=y==="floating"?{x:n,y:s,width:l.floating.width,height:l.floating.height}:l.reference,A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d.floating)),O=await(i.isElement==null?void 0:i.isElement(A))?await(i.getScale==null?void 0:i.getScale(A))||{x:1,y:1}:{x:1,y:1},k=Bf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:N,offsetParent:A,strategy:m}):N);return{top:(R.top-k.top+S.top)/O.y,bottom:(k.bottom-R.bottom+S.bottom)/O.y,left:(R.left-k.left+S.left)/O.x,right:(k.right-R.right+S.right)/O.x}}const Uk=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:l,elements:d,middlewareData:m}=e,{element:f,padding:x=0}=Wi(t,e)||{};if(f==null)return{};const y=lS(x),v={x:r,y:n},b=Hx(s),S=Vx(b),_=await l.getDimensions(f),I=b==="y",R=I?"top":"left",N=I?"bottom":"right",A=I?"clientHeight":"clientWidth",O=i.reference[S]+i.reference[b]-v[b]-i.floating[S],k=v[b]-i.reference[b],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let B=F?F[A]:0;(!B||!await(l.isElement==null?void 0:l.isElement(F)))&&(B=d.floating[A]||i.floating[S]);const P=O/2-k/2,M=B/2-_[S]/2-1,$=zo(y[R],M),G=zo(y[N],M),K=$,ee=B-_[S]-G,z=B/2-_[S]/2+P,V=D1(K,z,ee),J=!m.arrow&&Lc(s)!=null&&z!==V&&i.reference[S]/2-(z<K?$:G)-_[S]/2<0,Y=J?z<K?z-K:z-ee:0;return{[b]:v[b]+Y,data:{[b]:V,centerOffset:z-V-Y,...J&&{alignmentOffset:Y}},reset:J}}}),zk=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:l,initialPlacement:d,platform:m,elements:f}=e,{mainAxis:x=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:_=!0,...I}=Wi(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const R=Gi(s),N=hi(d),A=Gi(d)===d,O=await(m.isRTL==null?void 0:m.isRTL(f.floating)),k=v||(A||!_?[Lf(d)]:Mk(d)),F=S!=="none";!v&&F&&k.push(...Lk(d,_,S,O));const B=[d,...k],P=await sd(e,I),M=[];let $=((n=i.flip)==null?void 0:n.overflows)||[];if(x&&M.push(P[R]),y){const z=jk(s,l,O);M.push(P[z[0]],P[z[1]])}if($=[...$,{placement:s,overflows:M}],!M.every(z=>z<=0)){var G,K;const z=(((G=i.flip)==null?void 0:G.index)||0)+1,V=B[z];if(V&&(!(y==="alignment"?N!==hi(V):!1)||$.every(q=>q.overflows[0]>0&&hi(q.placement)===N)))return{data:{index:z,overflows:$},reset:{placement:V}};let J=(K=$.filter(Y=>Y.overflows[0]<=0).sort((Y,q)=>Y.overflows[1]-q.overflows[1])[0])==null?void 0:K.placement;if(!J)switch(b){case"bestFit":{var ee;const Y=(ee=$.filter(q=>{if(F){const Q=hi(q.placement);return Q===N||Q==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Q=>Q>0).reduce((Q,ie)=>Q+ie,0)]).sort((q,Q)=>q[1]-Q[1])[0])==null?void 0:ee[0];Y&&(J=Y);break}case"initialPlacement":J=d;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function Qv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Zv(t){return Tk.some(e=>t[e]>=0)}const Vk=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Wi(t,e);switch(n){case"referenceHidden":{const i=await sd(e,{...s,elementContext:"reference"}),l=Qv(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Zv(l)}}}case"escaped":{const i=await sd(e,{...s,altBoundary:!0}),l=Qv(i,r.floating);return{data:{escapedOffsets:l,escaped:Zv(l)}}}default:return{}}}}},cS=new Set(["left","top"]);async function Hk(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),l=Gi(r),d=Lc(r),m=hi(r)==="y",f=cS.has(l)?-1:1,x=i&&m?-1:1,y=Wi(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return d&&typeof S=="number"&&(b=d==="end"?S*-1:S),m?{x:b*x,y:v*f}:{x:v*f,y:b*x}}const $k=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:l,middlewareData:d}=e,m=await Hk(e,t);return l===((r=d.offset)==null?void 0:r.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:s+m.x,y:i+m.y,data:{...m,placement:l}}}}},Wk=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:d={fn:I=>{let{x:R,y:N}=I;return{x:R,y:N}}},...m}=Wi(t,e),f={x:r,y:n},x=await sd(e,m),y=hi(Gi(s)),v=zx(y);let b=f[v],S=f[y];if(i){const I=v==="y"?"top":"left",R=v==="y"?"bottom":"right",N=b+x[I],A=b-x[R];b=D1(N,b,A)}if(l){const I=y==="y"?"top":"left",R=y==="y"?"bottom":"right",N=S+x[I],A=S-x[R];S=D1(N,S,A)}const _=d.fn({...e,[v]:b,[y]:S});return{..._,data:{x:_.x-r,y:_.y-n,enabled:{[v]:i,[y]:l}}}}}},Gk=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:l}=e,{offset:d=0,mainAxis:m=!0,crossAxis:f=!0}=Wi(t,e),x={x:r,y:n},y=hi(s),v=zx(y);let b=x[v],S=x[y];const _=Wi(d,e),I=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(m){const A=v==="y"?"height":"width",O=i.reference[v]-i.floating[A]+I.mainAxis,k=i.reference[v]+i.reference[A]-I.mainAxis;b<O?b=O:b>k&&(b=k)}if(f){var R,N;const A=v==="y"?"width":"height",O=cS.has(Gi(s)),k=i.reference[y]-i.floating[A]+(O&&((R=l.offset)==null?void 0:R[y])||0)+(O?0:I.crossAxis),F=i.reference[y]+i.reference[A]+(O?0:((N=l.offset)==null?void 0:N[y])||0)-(O?I.crossAxis:0);S<k?S=k:S>F&&(S=F)}return{[v]:b,[y]:S}}}},Yk=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:l,elements:d}=e,{apply:m=()=>{},...f}=Wi(t,e),x=await sd(e,f),y=Gi(s),v=Lc(s),b=hi(s)==="y",{width:S,height:_}=i.floating;let I,R;y==="top"||y==="bottom"?(I=y,R=v===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(R=y,I=v==="end"?"top":"bottom");const N=_-x.top-x.bottom,A=S-x.left-x.right,O=zo(_-x[I],N),k=zo(S-x[R],A),F=!e.middlewareData.shift;let B=O,P=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=A),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(B=N),F&&!v){const $=Fn(x.left,0),G=Fn(x.right,0),K=Fn(x.top,0),ee=Fn(x.bottom,0);b?P=S-2*($!==0||G!==0?$+G:Fn(x.left,x.right)):B=_-2*(K!==0||ee!==0?K+ee:Fn(x.top,x.bottom))}await m({...e,availableWidth:P,availableHeight:B});const M=await l.getDimensions(d.floating);return S!==M.width||_!==M.height?{reset:{rects:!0}}:{}}}};function k0(){return typeof window<"u"}function Bc(t){return uS(t)?(t.nodeName||"").toLowerCase():"#document"}function Xn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ci(t){var e;return(e=(uS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uS(t){return k0()?t instanceof Node||t instanceof Xn(t).Node:!1}function Ys(t){return k0()?t instanceof Element||t instanceof Xn(t).Element:!1}function wi(t){return k0()?t instanceof HTMLElement||t instanceof Xn(t).HTMLElement:!1}function Jv(t){return!k0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xn(t).ShadowRoot}const qk=new Set(["inline","contents"]);function kd(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=qs(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!qk.has(s)}const Xk=new Set(["table","td","th"]);function Kk(t){return Xk.has(Bc(t))}const Qk=[":popover-open",":modal"];function P0(t){return Qk.some(e=>{try{return t.matches(e)}catch{return!1}})}const Zk=["transform","translate","scale","rotate","perspective"],Jk=["transform","translate","scale","rotate","perspective","filter"],eP=["paint","layout","strict","content"];function $x(t){const e=Wx(),r=Ys(t)?qs(t):t;return Zk.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Jk.some(n=>(r.willChange||"").includes(n))||eP.some(n=>(r.contain||"").includes(n))}function tP(t){let e=Vo(t);for(;wi(e)&&!vc(e);){if($x(e))return e;if(P0(e))return null;e=Vo(e)}return null}function Wx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rP=new Set(["html","body","#document"]);function vc(t){return rP.has(Bc(t))}function qs(t){return Xn(t).getComputedStyle(t)}function D0(t){return Ys(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vo(t){if(Bc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Jv(t)&&t.host||Ci(t);return Jv(e)?e.host:e}function dS(t){const e=Vo(t);return vc(e)?t.ownerDocument?t.ownerDocument.body:t.body:wi(e)&&kd(e)?e:dS(e)}function id(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=dS(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),l=Xn(s);if(i){const d=B1(l);return e.concat(l,l.visualViewport||[],kd(s)?s:[],d&&r?id(d):[])}return e.concat(s,id(s,[],r))}function B1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hS(t){const e=qs(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=wi(t),i=s?t.offsetWidth:r,l=s?t.offsetHeight:n,d=Df(r)!==i||Df(n)!==l;return d&&(r=i,n=l),{width:r,height:n,$:d}}function Gx(t){return Ys(t)?t:t.contextElement}function Zl(t){const e=Gx(t);if(!wi(e))return gi(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=hS(e);let l=(i?Df(r.width):r.width)/n,d=(i?Df(r.height):r.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const nP=gi(0);function fS(t){const e=Xn(t);return!Wx()||!e.visualViewport?nP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sP(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Xn(t)?!1:e}function $a(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Gx(t);let l=gi(1);e&&(n?Ys(n)&&(l=Zl(n)):l=Zl(t));const d=sP(i,r,n)?fS(i):gi(0);let m=(s.left+d.x)/l.x,f=(s.top+d.y)/l.y,x=s.width/l.x,y=s.height/l.y;if(i){const v=Xn(i),b=n&&Ys(n)?Xn(n):n;let S=v,_=B1(S);for(;_&&n&&b!==S;){const I=Zl(_),R=_.getBoundingClientRect(),N=qs(_),A=R.left+(_.clientLeft+parseFloat(N.paddingLeft))*I.x,O=R.top+(_.clientTop+parseFloat(N.paddingTop))*I.y;m*=I.x,f*=I.y,x*=I.x,y*=I.y,m+=A,f+=O,S=Xn(_),_=B1(S)}}return Bf({width:x,height:y,x:m,y:f})}function Yx(t,e){const r=D0(t).scrollLeft;return e?e.left+r:$a(Ci(t)).left+r}function mS(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Yx(t,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function iP(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",l=Ci(n),d=e?P0(e.floating):!1;if(n===l||d&&i)return r;let m={scrollLeft:0,scrollTop:0},f=gi(1);const x=gi(0),y=wi(n);if((y||!y&&!i)&&((Bc(n)!=="body"||kd(l))&&(m=D0(n)),wi(n))){const b=$a(n);f=Zl(n),x.x=b.x+n.clientLeft,x.y=b.y+n.clientTop}const v=l&&!y&&!i?mS(l,m,!0):gi(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-m.scrollLeft*f.x+x.x+v.x,y:r.y*f.y-m.scrollTop*f.y+x.y+v.y}}function oP(t){return Array.from(t.getClientRects())}function aP(t){const e=Ci(t),r=D0(t),n=t.ownerDocument.body,s=Fn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Fn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Yx(t);const d=-r.scrollTop;return qs(n).direction==="rtl"&&(l+=Fn(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:l,y:d}}function lP(t,e){const r=Xn(t),n=Ci(t),s=r.visualViewport;let i=n.clientWidth,l=n.clientHeight,d=0,m=0;if(s){i=s.width,l=s.height;const f=Wx();(!f||f&&e==="fixed")&&(d=s.offsetLeft,m=s.offsetTop)}return{width:i,height:l,x:d,y:m}}const cP=new Set(["absolute","fixed"]);function uP(t,e){const r=$a(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=wi(t)?Zl(t):gi(1),l=t.clientWidth*i.x,d=t.clientHeight*i.y,m=s*i.x,f=n*i.y;return{width:l,height:d,x:m,y:f}}function e2(t,e,r){let n;if(e==="viewport")n=lP(t,r);else if(e==="document")n=aP(Ci(t));else if(Ys(e))n=uP(e,r);else{const s=fS(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Bf(n)}function pS(t,e){const r=Vo(t);return r===e||!Ys(r)||vc(r)?!1:qs(r).position==="fixed"||pS(r,e)}function dP(t,e){const r=e.get(t);if(r)return r;let n=id(t,[],!1).filter(d=>Ys(d)&&Bc(d)!=="body"),s=null;const i=qs(t).position==="fixed";let l=i?Vo(t):t;for(;Ys(l)&&!vc(l);){const d=qs(l),m=$x(l);!m&&d.position==="fixed"&&(s=null),(i?!m&&!s:!m&&d.position==="static"&&!!s&&cP.has(s.position)||kd(l)&&!m&&pS(t,l))?n=n.filter(x=>x!==l):s=d,l=Vo(l)}return e.set(t,n),n}function hP(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const l=[...r==="clippingAncestors"?P0(e)?[]:dP(e,this._c):[].concat(r),n],d=l[0],m=l.reduce((f,x)=>{const y=e2(e,x,s);return f.top=Fn(y.top,f.top),f.right=zo(y.right,f.right),f.bottom=zo(y.bottom,f.bottom),f.left=Fn(y.left,f.left),f},e2(e,d,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function fP(t){const{width:e,height:r}=hS(t);return{width:e,height:r}}function mP(t,e,r){const n=wi(e),s=Ci(e),i=r==="fixed",l=$a(t,!0,i,e);let d={scrollLeft:0,scrollTop:0};const m=gi(0);function f(){m.x=Yx(s)}if(n||!n&&!i)if((Bc(e)!=="body"||kd(s))&&(d=D0(e)),n){const b=$a(e,!0,i,e);m.x=b.x+e.clientLeft,m.y=b.y+e.clientTop}else s&&f();i&&!n&&s&&f();const x=s&&!n&&!i?mS(s,d):gi(0),y=l.left+d.scrollLeft-m.x-x.x,v=l.top+d.scrollTop-m.y-x.y;return{x:y,y:v,width:l.width,height:l.height}}function sp(t){return qs(t).position==="static"}function t2(t,e){if(!wi(t)||qs(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ci(t)===r&&(r=r.ownerDocument.body),r}function gS(t,e){const r=Xn(t);if(P0(t))return r;if(!wi(t)){let s=Vo(t);for(;s&&!vc(s);){if(Ys(s)&&!sp(s))return s;s=Vo(s)}return r}let n=t2(t,e);for(;n&&Kk(n)&&sp(n);)n=t2(n,e);return n&&vc(n)&&sp(n)&&!$x(n)?r:n||tP(t)||r}const pP=async function(t){const e=this.getOffsetParent||gS,r=this.getDimensions,n=await r(t.floating);return{reference:mP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function gP(t){return qs(t).direction==="rtl"}const xP={convertOffsetParentRelativeRectToViewportRelativeRect:iP,getDocumentElement:Ci,getClippingRect:hP,getOffsetParent:gS,getElementRects:pP,getClientRects:oP,getDimensions:fP,getScale:Zl,isElement:Ys,isRTL:gP};function xS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function yP(t,e){let r=null,n;const s=Ci(t);function i(){var d;clearTimeout(n),(d=r)==null||d.disconnect(),r=null}function l(d,m){d===void 0&&(d=!1),m===void 0&&(m=1),i();const f=t.getBoundingClientRect(),{left:x,top:y,width:v,height:b}=f;if(d||e(),!v||!b)return;const S=bh(y),_=bh(s.clientWidth-(x+v)),I=bh(s.clientHeight-(y+b)),R=bh(x),A={rootMargin:-S+"px "+-_+"px "+-I+"px "+-R+"px",threshold:Fn(0,zo(1,m))||1};let O=!0;function k(F){const B=F[0].intersectionRatio;if(B!==m){if(!O)return l();B?l(!1,B):n=setTimeout(()=>{l(!1,1e-7)},1e3)}B===1&&!xS(f,t.getBoundingClientRect())&&l(),O=!1}try{r=new IntersectionObserver(k,{...A,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,A)}r.observe(t)}return l(!0),i}function wP(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,f=Gx(t),x=s||i?[...f?id(f):[],...id(e)]:[];x.forEach(R=>{s&&R.addEventListener("scroll",r,{passive:!0}),i&&R.addEventListener("resize",r)});const y=f&&d?yP(f,r):null;let v=-1,b=null;l&&(b=new ResizeObserver(R=>{let[N]=R;N&&N.target===f&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var A;(A=b)==null||A.observe(e)})),r()}),f&&!m&&b.observe(f),b.observe(e));let S,_=m?$a(t):null;m&&I();function I(){const R=$a(t);_&&!xS(_,R)&&r(),_=R,S=requestAnimationFrame(I)}return r(),()=>{var R;x.forEach(N=>{s&&N.removeEventListener("scroll",r),i&&N.removeEventListener("resize",r)}),y==null||y(),(R=b)==null||R.disconnect(),b=null,m&&cancelAnimationFrame(S)}}const vP=$k,bP=Wk,_P=zk,CP=Yk,EP=Vk,r2=Uk,SP=Gk,NP=(t,e,r)=>{const n=new Map,s={platform:xP,...r},i={...s.platform,_c:n};return Fk(t,e,{...s,platform:i})};var AP=typeof document<"u",TP=function(){},ef=AP?E.useLayoutEffect:TP;function Ff(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Ff(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!Ff(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function yS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function n2(t,e){const r=yS(t);return Math.round(e*r)/r}function ip(t){const e=E.useRef(t);return ef(()=>{e.current=t}),e}function IP(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:l}={},transform:d=!0,whileElementsMounted:m,open:f}=t,[x,y]=E.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=E.useState(n);Ff(v,n)||b(n);const[S,_]=E.useState(null),[I,R]=E.useState(null),N=E.useCallback(q=>{q!==F.current&&(F.current=q,_(q))},[]),A=E.useCallback(q=>{q!==B.current&&(B.current=q,R(q))},[]),O=i||S,k=l||I,F=E.useRef(null),B=E.useRef(null),P=E.useRef(x),M=m!=null,$=ip(m),G=ip(s),K=ip(f),ee=E.useCallback(()=>{if(!F.current||!B.current)return;const q={placement:e,strategy:r,middleware:v};G.current&&(q.platform=G.current),NP(F.current,B.current,q).then(Q=>{const ie={...Q,isPositioned:K.current!==!1};z.current&&!Ff(P.current,ie)&&(P.current=ie,Za.flushSync(()=>{y(ie)}))})},[v,e,r,G,K]);ef(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,y(q=>({...q,isPositioned:!1})))},[f]);const z=E.useRef(!1);ef(()=>(z.current=!0,()=>{z.current=!1}),[]),ef(()=>{if(O&&(F.current=O),k&&(B.current=k),O&&k){if($.current)return $.current(O,k,ee);ee()}},[O,k,ee,$,M]);const V=E.useMemo(()=>({reference:F,floating:B,setReference:N,setFloating:A}),[N,A]),J=E.useMemo(()=>({reference:O,floating:k}),[O,k]),Y=E.useMemo(()=>{const q={position:r,left:0,top:0};if(!J.floating)return q;const Q=n2(J.floating,x.x),ie=n2(J.floating,x.y);return d?{...q,transform:"translate("+Q+"px, "+ie+"px)",...yS(J.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Q,top:ie}},[r,d,J.floating,x.x,x.y]);return E.useMemo(()=>({...x,update:ee,refs:V,elements:J,floatingStyles:Y}),[x,ee,V,J,Y])}const RP=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?r2({element:n.current,padding:s}).fn(r):{}:n?r2({element:n,padding:s}).fn(r):{}}}},OP=(t,e)=>({...vP(t),options:[t,e]}),jP=(t,e)=>({...bP(t),options:[t,e]}),MP=(t,e)=>({...SP(t),options:[t,e]}),kP=(t,e)=>({..._P(t),options:[t,e]}),PP=(t,e)=>({...CP(t),options:[t,e]}),DP=(t,e)=>({...EP(t),options:[t,e]}),LP=(t,e)=>({...RP(t),options:[t,e]});var BP="Arrow",wS=E.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return u.jsx(Le.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});wS.displayName=BP;var FP=wS;function qx(t){const[e,r]=E.useState(void 0);return gr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,d;if("borderBoxSize"in i){const m=i.borderBoxSize,f=Array.isArray(m)?m[0]:m;l=f.inlineSize,d=f.blockSize}else l=t.offsetWidth,d=t.offsetHeight;r({width:l,height:d})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Xx="Popper",[vS,Fc]=gn(Xx),[UP,bS]=vS(Xx),_S=t=>{const{__scopePopper:e,children:r}=t,[n,s]=E.useState(null);return u.jsx(UP,{scope:e,anchor:n,onAnchorChange:s,children:r})};_S.displayName=Xx;var CS="PopperAnchor",ES=E.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=bS(CS,r),l=E.useRef(null),d=Je(e,l);return E.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||l.current)}),n?null:u.jsx(Le.div,{...s,ref:d})});ES.displayName=CS;var Kx="PopperContent",[zP,VP]=vS(Kx),SS=E.forwardRef((t,e)=>{var be,Pe,Xe,ae,Ee,ke;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:d=0,avoidCollisions:m=!0,collisionBoundary:f=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,..._}=t,I=bS(Kx,r),[R,N]=E.useState(null),A=Je(e,Me=>N(Me)),[O,k]=E.useState(null),F=qx(O),B=(F==null?void 0:F.width)??0,P=(F==null?void 0:F.height)??0,M=n+(i!=="center"?"-"+i:""),$=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},G=Array.isArray(f)?f:[f],K=G.length>0,ee={padding:$,boundary:G.filter($P),altBoundary:K},{refs:z,floatingStyles:V,placement:J,isPositioned:Y,middlewareData:q}=IP({strategy:"fixed",placement:M,whileElementsMounted:(...Me)=>wP(...Me,{animationFrame:b==="always"}),elements:{reference:I.anchor},middleware:[OP({mainAxis:s+P,alignmentAxis:l}),m&&jP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?MP():void 0,...ee}),m&&kP({...ee}),PP({...ee,apply:({elements:Me,rects:gt,availableWidth:St,availableHeight:er})=>{const{width:me,height:Fe}=gt.reference,Ae=Me.floating.style;Ae.setProperty("--radix-popper-available-width",`${St}px`),Ae.setProperty("--radix-popper-available-height",`${er}px`),Ae.setProperty("--radix-popper-anchor-width",`${me}px`),Ae.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),O&&LP({element:O,padding:d}),WP({arrowWidth:B,arrowHeight:P}),v&&DP({strategy:"referenceHidden",...ee})]}),[Q,ie]=TS(J),fe=cr(S);gr(()=>{Y&&(fe==null||fe())},[Y,fe]);const oe=(be=q.arrow)==null?void 0:be.x,le=(Pe=q.arrow)==null?void 0:Pe.y,ce=((Xe=q.arrow)==null?void 0:Xe.centerOffset)!==0,[Be,xe]=E.useState();return gr(()=>{R&&xe(window.getComputedStyle(R).zIndex)},[R]),u.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:Y?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(ae=q.transformOrigin)==null?void 0:ae.x,(Ee=q.transformOrigin)==null?void 0:Ee.y].join(" "),...((ke=q.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(zP,{scope:r,placedSide:Q,onArrowChange:k,arrowX:oe,arrowY:le,shouldHideArrow:ce,children:u.jsx(Le.div,{"data-side":Q,"data-align":ie,..._,ref:A,style:{..._.style,animation:Y?void 0:"none"}})})})});SS.displayName=Kx;var NS="PopperArrow",HP={top:"bottom",right:"left",bottom:"top",left:"right"},AS=E.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=VP(NS,n),l=HP[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(FP,{...s,ref:r,style:{...s.style,display:"block"}})})});AS.displayName=NS;function $P(t){return t!==null}var WP=t=>({name:"transformOrigin",options:t,fn(e){var I,R,N;const{placement:r,rects:n,middlewareData:s}=e,l=((I=s.arrow)==null?void 0:I.centerOffset)!==0,d=l?0:t.arrowWidth,m=l?0:t.arrowHeight,[f,x]=TS(r),y={start:"0%",center:"50%",end:"100%"}[x],v=(((R=s.arrow)==null?void 0:R.x)??0)+d/2,b=(((N=s.arrow)==null?void 0:N.y)??0)+m/2;let S="",_="";return f==="bottom"?(S=l?y:`${v}px`,_=`${-m}px`):f==="top"?(S=l?y:`${v}px`,_=`${n.floating.height+m}px`):f==="right"?(S=`${-m}px`,_=l?y:`${b}px`):f==="left"&&(S=`${n.floating.width+m}px`,_=l?y:`${b}px`),{data:{x:S,y:_}}}});function TS(t){const[e,r="center"]=t.split("-");return[e,r]}var Qx=_S,Zx=ES,Jx=SS,ey=AS,[L0,cH]=gn("Tooltip",[Fc]),B0=Fc(),IS="TooltipProvider",GP=700,F1="tooltip.open",[YP,ty]=L0(IS),RS=t=>{const{__scopeTooltip:e,delayDuration:r=GP,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,l=E.useRef(!0),d=E.useRef(!1),m=E.useRef(0);return E.useEffect(()=>{const f=m.current;return()=>window.clearTimeout(f)},[]),u.jsx(YP,{scope:e,isOpenDelayedRef:l,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(m.current),l.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:d,onPointerInTransitChange:E.useCallback(f=>{d.current=f},[]),disableHoverableContent:s,children:i})};RS.displayName=IS;var od="Tooltip",[qP,F0]=L0(od),OS=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:l,delayDuration:d}=t,m=ty(od,t.__scopeTooltip),f=B0(e),[x,y]=E.useState(null),v=$s(),b=E.useRef(0),S=l??m.disableHoverableContent,_=d??m.delayDuration,I=E.useRef(!1),[R,N]=yi({prop:n,defaultProp:s??!1,onChange:B=>{B?(m.onOpen(),document.dispatchEvent(new CustomEvent(F1))):m.onClose(),i==null||i(B)},caller:od}),A=E.useMemo(()=>R?I.current?"delayed-open":"instant-open":"closed",[R]),O=E.useCallback(()=>{window.clearTimeout(b.current),b.current=0,I.current=!1,N(!0)},[N]),k=E.useCallback(()=>{window.clearTimeout(b.current),b.current=0,N(!1)},[N]),F=E.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{I.current=!0,N(!0),b.current=0},_)},[_,N]);return E.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),u.jsx(Qx,{...f,children:u.jsx(qP,{scope:e,contentId:v,open:R,stateAttribute:A,trigger:x,onTriggerChange:y,onTriggerEnter:E.useCallback(()=>{m.isOpenDelayedRef.current?F():O()},[m.isOpenDelayedRef,F,O]),onTriggerLeave:E.useCallback(()=>{S?k():(window.clearTimeout(b.current),b.current=0)},[k,S]),onOpen:O,onClose:k,disableHoverableContent:S,children:r})})};OS.displayName=od;var U1="TooltipTrigger",jS=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=F0(U1,r),i=ty(U1,r),l=B0(r),d=E.useRef(null),m=Je(e,d,s.onTriggerChange),f=E.useRef(!1),x=E.useRef(!1),y=E.useCallback(()=>f.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),u.jsx(Zx,{asChild:!0,...l,children:u.jsx(Le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:m,onPointerMove:Ne(t.onPointerMove,v=>{v.pointerType!=="touch"&&!x.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),x.current=!0)}),onPointerLeave:Ne(t.onPointerLeave,()=>{s.onTriggerLeave(),x.current=!1}),onPointerDown:Ne(t.onPointerDown,()=>{s.open&&s.onClose(),f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Ne(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:Ne(t.onBlur,s.onClose),onClick:Ne(t.onClick,s.onClose)})})});jS.displayName=U1;var XP="TooltipPortal",[uH,KP]=L0(XP,{forceMount:void 0}),bc="TooltipContent",MS=E.forwardRef((t,e)=>{const r=KP(bc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,l=F0(bc,t.__scopeTooltip);return u.jsx(nn,{present:n||l.open,children:l.disableHoverableContent?u.jsx(kS,{side:s,...i,ref:e}):u.jsx(QP,{side:s,...i,ref:e})})}),QP=E.forwardRef((t,e)=>{const r=F0(bc,t.__scopeTooltip),n=ty(bc,t.__scopeTooltip),s=E.useRef(null),i=Je(e,s),[l,d]=E.useState(null),{trigger:m,onClose:f}=r,x=s.current,{onPointerInTransitChange:y}=n,v=E.useCallback(()=>{d(null),y(!1)},[y]),b=E.useCallback((S,_)=>{const I=S.currentTarget,R={x:S.clientX,y:S.clientY},N=r6(R,I.getBoundingClientRect()),A=n6(R,N),O=s6(_.getBoundingClientRect()),k=o6([...A,...O]);d(k),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(m&&x){const S=I=>b(I,x),_=I=>b(I,m);return m.addEventListener("pointerleave",S),x.addEventListener("pointerleave",_),()=>{m.removeEventListener("pointerleave",S),x.removeEventListener("pointerleave",_)}}},[m,x,b,v]),E.useEffect(()=>{if(l){const S=_=>{const I=_.target,R={x:_.clientX,y:_.clientY},N=(m==null?void 0:m.contains(I))||(x==null?void 0:x.contains(I)),A=!i6(R,l);N?v():A&&(v(),f())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[m,x,l,f,v]),u.jsx(kS,{...t,ref:i})}),[ZP,JP]=L0(od,{isInside:!1}),e6=cj("TooltipContent"),kS=E.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...d}=t,m=F0(bc,r),f=B0(r),{onClose:x}=m;return E.useEffect(()=>(document.addEventListener(F1,x),()=>document.removeEventListener(F1,x)),[x]),E.useEffect(()=>{if(m.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(m.trigger)&&x()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[m.trigger,x]),u.jsx(Pc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:y=>y.preventDefault(),onDismiss:x,children:u.jsxs(Jx,{"data-state":m.stateAttribute,...f,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(e6,{children:n}),u.jsx(ZP,{scope:r,isInside:!0,children:u.jsx(Oj,{id:m.contentId,role:"tooltip",children:s||n})})]})})});MS.displayName=bc;var PS="TooltipArrow",t6=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=B0(r);return JP(PS,r).isInside?null:u.jsx(ey,{...s,...n,ref:e})});t6.displayName=PS;function r6(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function n6(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function s6(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function i6(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const d=e[i],m=e[l],f=d.x,x=d.y,y=m.x,v=m.y;x>n!=v>n&&r<(y-f)*(n-x)/(v-x)+f&&(s=!s)}return s}function o6(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),a6(e)}function a6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var l6=RS,c6=OS,u6=jS,DS=MS;const d6=l6,op=c6,ap=u6,tf=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>u.jsx(DS,{ref:n,sideOffset:e,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));tf.displayName=DS.displayName;var U0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},z0=typeof window>"u"||"Deno"in globalThis;function Ms(){}function h6(t,e){return typeof t=="function"?t(e):t}function f6(t){return typeof t=="number"&&t>=0&&t!==1/0}function m6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function z1(t,e){return typeof t=="function"?t(e):t}function p6(t,e){return typeof t=="function"?t(e):t}function s2(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:l,stale:d}=t;if(l){if(n){if(e.queryHash!==ry(l,e.options))return!1}else if(!ld(e.queryKey,l))return!1}if(r!=="all"){const m=e.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||s&&s!==e.state.fetchStatus||i&&!i(e))}function i2(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(ad(e.options.mutationKey)!==ad(i))return!1}else if(!ld(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function ry(t,e){return((e==null?void 0:e.queryKeyHashFn)||ad)(t)}function ad(t){return JSON.stringify(t,(e,r)=>V1(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ld(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>ld(t[r],e[r])):!1}function LS(t,e){if(t===e)return t;const r=o2(t)&&o2(e);if(r||V1(t)&&V1(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),l=i.length,d=r?[]:{},m=new Set(n);let f=0;for(let x=0;x<l;x++){const y=r?x:i[x];(!r&&m.has(y)||r)&&t[y]===void 0&&e[y]===void 0?(d[y]=void 0,f++):(d[y]=LS(t[y],e[y]),d[y]===t[y]&&t[y]!==void 0&&f++)}return s===l&&f===s?t:d}return e}function o2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function V1(t){if(!a2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!a2(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function a2(t){return Object.prototype.toString.call(t)==="[object Object]"}function g6(t){return new Promise(e=>{setTimeout(e,t)})}function x6(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?LS(t,e):e}function y6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function w6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ny=Symbol();function BS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ny?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ea,po,sc,zb,v6=(zb=class extends U0{constructor(){super();yt(this,Ea);yt(this,po);yt(this,sc);Ke(this,sc,e=>{if(!z0&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){de(this,po)||this.setEventListener(de(this,sc))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,po))==null||e.call(this),Ke(this,po,void 0))}setEventListener(e){var r;Ke(this,sc,e),(r=de(this,po))==null||r.call(this),Ke(this,po,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){de(this,Ea)!==e&&(Ke(this,Ea,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof de(this,Ea)=="boolean"?de(this,Ea):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ea=new WeakMap,po=new WeakMap,sc=new WeakMap,zb),FS=new v6,ic,go,oc,Vb,b6=(Vb=class extends U0{constructor(){super();yt(this,ic,!0);yt(this,go);yt(this,oc);Ke(this,oc,e=>{if(!z0&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){de(this,go)||this.setEventListener(de(this,oc))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,go))==null||e.call(this),Ke(this,go,void 0))}setEventListener(e){var r;Ke(this,oc,e),(r=de(this,go))==null||r.call(this),Ke(this,go,e(this.setOnline.bind(this)))}setOnline(e){de(this,ic)!==e&&(Ke(this,ic,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return de(this,ic)}},ic=new WeakMap,go=new WeakMap,oc=new WeakMap,Vb),Uf=new b6;function _6(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function C6(t){return Math.min(1e3*2**t,3e4)}function US(t){return(t??"online")==="online"?Uf.isOnline():!0}var zS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function lp(t){return t instanceof zS}function VS(t){let e=!1,r=0,n=!1,s;const i=_6(),l=_=>{var I;n||(v(new zS(_)),(I=t.abort)==null||I.call(t))},d=()=>{e=!0},m=()=>{e=!1},f=()=>FS.isFocused()&&(t.networkMode==="always"||Uf.isOnline())&&t.canRun(),x=()=>US(t.networkMode)&&t.canRun(),y=_=>{var I;n||(n=!0,(I=t.onSuccess)==null||I.call(t,_),s==null||s(),i.resolve(_))},v=_=>{var I;n||(n=!0,(I=t.onError)==null||I.call(t,_),s==null||s(),i.reject(_))},b=()=>new Promise(_=>{var I;s=R=>{(n||f())&&_(R)},(I=t.onPause)==null||I.call(t)}).then(()=>{var _;s=void 0,n||(_=t.onContinue)==null||_.call(t)}),S=()=>{if(n)return;let _;const I=r===0?t.initialPromise:void 0;try{_=I??t.fn()}catch(R){_=Promise.reject(R)}Promise.resolve(_).then(y).catch(R=>{var F;if(n)return;const N=t.retry??(z0?0:3),A=t.retryDelay??C6,O=typeof A=="function"?A(r,R):A,k=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,R);if(e||!k){v(R);return}r++,(F=t.onFail)==null||F.call(t,r,R),g6(O).then(()=>f()?void 0:b()).then(()=>{e?v(R):S()})})};return{promise:i,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:d,continueRetry:m,canStart:x,start:()=>(x()?S():b().then(S),i)}}var E6=t=>setTimeout(t,0);function S6(){let t=[],e=0,r=d=>{d()},n=d=>{d()},s=E6;const i=d=>{e?t.push(d):s(()=>{r(d)})},l=()=>{const d=t;t=[],d.length&&s(()=>{n(()=>{d.forEach(m=>{r(m)})})})};return{batch:d=>{let m;e++;try{m=d()}finally{e--,e||l()}return m},batchCalls:d=>(...m)=>{i(()=>{d(...m)})},schedule:i,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{s=d}}}var un=S6(),Sa,Hb,HS=(Hb=class{constructor(){yt(this,Sa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),f6(this.gcTime)&&Ke(this,Sa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(z0?1/0:5*60*1e3))}clearGcTimeout(){de(this,Sa)&&(clearTimeout(de(this,Sa)),Ke(this,Sa,void 0))}},Sa=new WeakMap,Hb),ac,Na,ls,Aa,Zr,Ed,Ta,Ps,Ti,$b,N6=($b=class extends HS{constructor(e){super();yt(this,Ps);yt(this,ac);yt(this,Na);yt(this,ls);yt(this,Aa);yt(this,Zr);yt(this,Ed);yt(this,Ta);Ke(this,Ta,!1),Ke(this,Ed,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ke(this,Aa,e.client),Ke(this,ls,de(this,Aa).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ke(this,ac,T6(this.options)),this.state=e.state??de(this,ac),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=de(this,Zr))==null?void 0:e.promise}setOptions(e){this.options={...de(this,Ed),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&de(this,ls).remove(this)}setData(e,r){const n=x6(this.state.data,e,this.options);return Xr(this,Ps,Ti).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Xr(this,Ps,Ti).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=de(this,Zr))==null?void 0:n.promise;return(s=de(this,Zr))==null||s.cancel(e),r?r.then(Ms).catch(Ms):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(de(this,ac))}isActive(){return this.observers.some(e=>p6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ny||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>z1(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!m6(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=de(this,Zr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=de(this,Zr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),de(this,ls).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(de(this,Zr)&&(de(this,Ta)?de(this,Zr).cancel({revert:!0}):de(this,Zr).cancelRetry()),this.scheduleGc()),de(this,ls).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xr(this,Ps,Ti).call(this,{type:"invalidate"})}fetch(e,r){var f,x,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(de(this,Zr))return de(this,Zr).continueRetry(),de(this,Zr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const n=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ke(this,Ta,!0),n.signal)})},i=()=>{const v=BS(this.options,r),S=(()=>{const _={client:de(this,Aa),queryKey:this.queryKey,meta:this.meta};return s(_),_})();return Ke(this,Ta,!1),this.options.persister?this.options.persister(v,S,this):v(S)},d=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:de(this,Aa),state:this.state,fetchFn:i};return s(v),v})();(f=this.options.behavior)==null||f.onFetch(d,this),Ke(this,Na,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=d.fetchOptions)==null?void 0:x.meta))&&Xr(this,Ps,Ti).call(this,{type:"fetch",meta:(y=d.fetchOptions)==null?void 0:y.meta});const m=v=>{var b,S,_,I;lp(v)&&v.silent||Xr(this,Ps,Ti).call(this,{type:"error",error:v}),lp(v)||((S=(b=de(this,ls).config).onError)==null||S.call(b,v,this),(I=(_=de(this,ls).config).onSettled)==null||I.call(_,this.state.data,v,this)),this.scheduleGc()};return Ke(this,Zr,VS({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,abort:n.abort.bind(n),onSuccess:v=>{var b,S,_,I;if(v===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(R){m(R);return}(S=(b=de(this,ls).config).onSuccess)==null||S.call(b,v,this),(I=(_=de(this,ls).config).onSettled)==null||I.call(_,v,this.state.error,this),this.scheduleGc()},onError:m,onFail:(v,b)=>{Xr(this,Ps,Ti).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{Xr(this,Ps,Ti).call(this,{type:"pause"})},onContinue:()=>{Xr(this,Ps,Ti).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),de(this,Zr).start()}},ac=new WeakMap,Na=new WeakMap,ls=new WeakMap,Aa=new WeakMap,Zr=new WeakMap,Ed=new WeakMap,Ta=new WeakMap,Ps=new WeakSet,Ti=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...A6(n.data,this.options),fetchMeta:e.meta??null};case"success":return Ke(this,Na,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return lp(s)&&s.revert&&de(this,Na)?{...de(this,Na),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),un.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),de(this,ls).notify({query:this,type:"updated",action:e})})},$b);function A6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:US(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function T6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ai,Wb,I6=(Wb=class extends U0{constructor(e={}){super();yt(this,ai);this.config=e,Ke(this,ai,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??ry(s,r);let l=this.get(i);return l||(l=new N6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){de(this,ai).has(e.queryHash)||(de(this,ai).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=de(this,ai).get(e.queryHash);r&&(e.destroy(),r===e&&de(this,ai).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return de(this,ai).get(e)}getAll(){return[...de(this,ai).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>s2(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>s2(e,n)):r}notify(e){un.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ai=new WeakMap,Wb),li,ln,Ia,ci,ao,Gb,R6=(Gb=class extends HS{constructor(e){super();yt(this,ci);yt(this,li);yt(this,ln);yt(this,Ia);this.mutationId=e.mutationId,Ke(this,ln,e.mutationCache),Ke(this,li,[]),this.state=e.state||O6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){de(this,li).includes(e)||(de(this,li).push(e),this.clearGcTimeout(),de(this,ln).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ke(this,li,de(this,li).filter(r=>r!==e)),this.scheduleGc(),de(this,ln).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){de(this,li).length||(this.state.status==="pending"?this.scheduleGc():de(this,ln).remove(this))}continue(){var e;return((e=de(this,Ia))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,l,d,m,f,x,y,v,b,S,_,I,R,N,A,O,k,F,B,P;const r=()=>{Xr(this,ci,ao).call(this,{type:"continue"})};Ke(this,Ia,VS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,$)=>{Xr(this,ci,ao).call(this,{type:"failed",failureCount:M,error:$})},onPause:()=>{Xr(this,ci,ao).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>de(this,ln).canRun(this)}));const n=this.state.status==="pending",s=!de(this,Ia).canStart();try{if(n)r();else{Xr(this,ci,ao).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(i=de(this,ln).config).onMutate)==null?void 0:l.call(i,e,this));const $=await((m=(d=this.options).onMutate)==null?void 0:m.call(d,e));$!==this.state.context&&Xr(this,ci,ao).call(this,{type:"pending",context:$,variables:e,isPaused:s})}const M=await de(this,Ia).start();return await((x=(f=de(this,ln).config).onSuccess)==null?void 0:x.call(f,M,e,this.state.context,this)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,M,e,this.state.context)),await((S=(b=de(this,ln).config).onSettled)==null?void 0:S.call(b,M,null,this.state.variables,this.state.context,this)),await((I=(_=this.options).onSettled)==null?void 0:I.call(_,M,null,e,this.state.context)),Xr(this,ci,ao).call(this,{type:"success",data:M}),M}catch(M){try{throw await((N=(R=de(this,ln).config).onError)==null?void 0:N.call(R,M,e,this.state.context,this)),await((O=(A=this.options).onError)==null?void 0:O.call(A,M,e,this.state.context)),await((F=(k=de(this,ln).config).onSettled)==null?void 0:F.call(k,void 0,M,this.state.variables,this.state.context,this)),await((P=(B=this.options).onSettled)==null?void 0:P.call(B,void 0,M,e,this.state.context)),M}finally{Xr(this,ci,ao).call(this,{type:"error",error:M})}}finally{de(this,ln).runNext(this)}}},li=new WeakMap,ln=new WeakMap,Ia=new WeakMap,ci=new WeakSet,ao=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),un.batch(()=>{de(this,li).forEach(n=>{n.onMutationUpdate(e)}),de(this,ln).notify({mutation:this,type:"updated",action:e})})},Gb);function O6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pi,Ds,Sd,Yb,j6=(Yb=class extends U0{constructor(e={}){super();yt(this,Pi);yt(this,Ds);yt(this,Sd);this.config=e,Ke(this,Pi,new Set),Ke(this,Ds,new Map),Ke(this,Sd,0)}build(e,r,n){const s=new R6({mutationCache:this,mutationId:++eh(this,Sd)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){de(this,Pi).add(e);const r=_h(e);if(typeof r=="string"){const n=de(this,Ds).get(r);n?n.push(e):de(this,Ds).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(de(this,Pi).delete(e)){const r=_h(e);if(typeof r=="string"){const n=de(this,Ds).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&de(this,Ds).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=_h(e);if(typeof r=="string"){const n=de(this,Ds).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=_h(e);if(typeof r=="string"){const s=(n=de(this,Ds).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{de(this,Pi).forEach(e=>{this.notify({type:"removed",mutation:e})}),de(this,Pi).clear(),de(this,Ds).clear()})}getAll(){return Array.from(de(this,Pi))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>i2(r,n))}findAll(e={}){return this.getAll().filter(r=>i2(e,r))}notify(e){un.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return un.batch(()=>Promise.all(e.map(r=>r.continue().catch(Ms))))}},Pi=new WeakMap,Ds=new WeakMap,Sd=new WeakMap,Yb);function _h(t){var e;return(e=t.options.scope)==null?void 0:e.id}function l2(t){return{onFetch:(e,r)=>{var x,y,v,b,S;const n=e.options,s=(v=(y=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,i=((b=e.state.data)==null?void 0:b.pages)||[],l=((S=e.state.data)==null?void 0:S.pageParams)||[];let d={pages:[],pageParams:[]},m=0;const f=async()=>{let _=!1;const I=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},R=BS(e.options,e.fetchOptions),N=async(A,O,k)=>{if(_)return Promise.reject();if(O==null&&A.pages.length)return Promise.resolve(A);const B=(()=>{const G={client:e.client,queryKey:e.queryKey,pageParam:O,direction:k?"backward":"forward",meta:e.options.meta};return I(G),G})(),P=await R(B),{maxPages:M}=e.options,$=k?w6:y6;return{pages:$(A.pages,P,M),pageParams:$(A.pageParams,O,M)}};if(s&&i.length){const A=s==="backward",O=A?M6:c2,k={pages:i,pageParams:l},F=O(n,k);d=await N(k,F,A)}else{const A=t??i.length;do{const O=m===0?l[0]??n.initialPageParam:c2(n,d);if(m>0&&O==null)break;d=await N(d,O),m++}while(m<A)}return d};e.options.persister?e.fetchFn=()=>{var _,I;return(I=(_=e.options).persister)==null?void 0:I.call(_,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=f}}}function c2(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function M6(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var or,xo,yo,lc,cc,wo,uc,dc,qb,k6=(qb=class{constructor(t={}){yt(this,or);yt(this,xo);yt(this,yo);yt(this,lc);yt(this,cc);yt(this,wo);yt(this,uc);yt(this,dc);Ke(this,or,t.queryCache||new I6),Ke(this,xo,t.mutationCache||new j6),Ke(this,yo,t.defaultOptions||{}),Ke(this,lc,new Map),Ke(this,cc,new Map),Ke(this,wo,0)}mount(){eh(this,wo)._++,de(this,wo)===1&&(Ke(this,uc,FS.subscribe(async t=>{t&&(await this.resumePausedMutations(),de(this,or).onFocus())})),Ke(this,dc,Uf.subscribe(async t=>{t&&(await this.resumePausedMutations(),de(this,or).onOnline())})))}unmount(){var t,e;eh(this,wo)._--,de(this,wo)===0&&((t=de(this,uc))==null||t.call(this),Ke(this,uc,void 0),(e=de(this,dc))==null||e.call(this),Ke(this,dc,void 0))}isFetching(t){return de(this,or).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return de(this,xo).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=de(this,or).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=de(this,or).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(z1(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return de(this,or).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=de(this,or).get(n.queryHash),i=s==null?void 0:s.state.data,l=h6(e,i);if(l!==void 0)return de(this,or).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return un.batch(()=>de(this,or).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=de(this,or).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=de(this,or);un.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=de(this,or);return un.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=un.batch(()=>de(this,or).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Ms).catch(Ms)}invalidateQueries(t,e={}){return un.batch(()=>(de(this,or).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=un.batch(()=>de(this,or).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ms)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ms)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=de(this,or).build(this,e);return r.isStaleByTime(z1(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ms).catch(Ms)}fetchInfiniteQuery(t){return t.behavior=l2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ms).catch(Ms)}ensureInfiniteQueryData(t){return t.behavior=l2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Uf.isOnline()?de(this,xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return de(this,or)}getMutationCache(){return de(this,xo)}getDefaultOptions(){return de(this,yo)}setDefaultOptions(t){Ke(this,yo,t)}setQueryDefaults(t,e){de(this,lc).set(ad(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...de(this,lc).values()],r={};return e.forEach(n=>{ld(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){de(this,cc).set(ad(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...de(this,cc).values()],r={};return e.forEach(n=>{ld(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...de(this,yo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ry(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ny&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...de(this,yo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){de(this,or).clear(),de(this,xo).clear()}},or=new WeakMap,xo=new WeakMap,yo=new WeakMap,lc=new WeakMap,cc=new WeakMap,wo=new WeakMap,uc=new WeakMap,dc=new WeakMap,qb),P6=E.createContext(void 0),D6=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(P6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cd.apply(this,arguments)}var _o;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_o||(_o={}));const u2="popstate";function L6(t){t===void 0&&(t={});function e(s,i){let{pathname:l="/",search:d="",hash:m=""}=el(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),H1("",{pathname:l,search:d,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let l=s.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let m=s.location.href,f=m.indexOf("#");d=f===-1?m:m.slice(0,f)}return d+"#"+(typeof i=="string"?i:zf(i))}function n(s,i){sy(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return F6(e,r,n,t)}function br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B6(){return Math.random().toString(36).substr(2,8)}function d2(t,e){return{usr:t.state,key:t.key,idx:e}}function H1(t,e,r,n){return r===void 0&&(r=null),cd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?el(e):e,{state:r,key:e&&e.key||n||B6()})}function zf(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function el(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function F6(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,d=_o.Pop,m=null,f=x();f==null&&(f=0,l.replaceState(cd({},l.state,{idx:f}),""));function x(){return(l.state||{idx:null}).idx}function y(){d=_o.Pop;let I=x(),R=I==null?null:I-f;f=I,m&&m({action:d,location:_.location,delta:R})}function v(I,R){d=_o.Push;let N=H1(_.location,I,R);r&&r(N,I),f=x()+1;let A=d2(N,f),O=_.createHref(N);try{l.pushState(A,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(O)}i&&m&&m({action:d,location:_.location,delta:1})}function b(I,R){d=_o.Replace;let N=H1(_.location,I,R);r&&r(N,I),f=x();let A=d2(N,f),O=_.createHref(N);l.replaceState(A,"",O),i&&m&&m({action:d,location:_.location,delta:0})}function S(I){let R=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof I=="string"?I:zf(I);return N=N.replace(/ $/,"%20"),br(R,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,R)}let _={get action(){return d},get location(){return t(s,l)},listen(I){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(u2,y),m=I,()=>{s.removeEventListener(u2,y),m=null}},createHref(I){return e(s,I)},createURL:S,encodeLocation(I){let R=S(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(I){return l.go(I)}};return _}var h2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(h2||(h2={}));function U6(t,e,r){return r===void 0&&(r="/"),z6(t,e,r,!1)}function z6(t,e,r,n){let s=typeof e=="string"?el(e):e,i=iy(s.pathname||"/",r);if(i==null)return null;let l=$S(t);V6(l);let d=null;for(let m=0;d==null&&m<l.length;++m){let f=J6(i);d=Q6(l[m],f,n)}return d}function $S(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,l,d)=>{let m={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};m.relativePath.startsWith("/")&&(br(m.relativePath.startsWith(n),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(n.length));let f=Po([n,m.relativePath]),x=r.concat(m);i.children&&i.children.length>0&&(br(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),$S(i.children,e,x,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:X6(f,i.index),routesMeta:x})};return t.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,l);else for(let m of WS(i.path))s(i,l,m)}),e}function WS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=WS(n.join("/")),d=[];return d.push(...l.map(m=>m===""?i:[i,m].join("/"))),s&&d.push(...l),d.map(m=>t.startsWith("/")&&m===""?"/":m)}function V6(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:K6(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const H6=/^:[\w-]+$/,$6=3,W6=2,G6=1,Y6=10,q6=-2,f2=t=>t==="*";function X6(t,e){let r=t.split("/"),n=r.length;return r.some(f2)&&(n+=q6),e&&(n+=W6),r.filter(s=>!f2(s)).reduce((s,i)=>s+(H6.test(i)?$6:i===""?G6:Y6),n)}function K6(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Q6(t,e,r){let{routesMeta:n}=t,s={},i="/",l=[];for(let d=0;d<n.length;++d){let m=n[d],f=d===n.length-1,x=i==="/"?e:e.slice(i.length)||"/",y=m2({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},x),v=m.route;if(!y&&f&&r&&!n[n.length-1].route.index&&(y=m2({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:Po([i,y.pathname]),pathnameBase:n5(Po([i,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(i=Po([i,y.pathnameBase]))}return l}function m2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Z6(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((f,x,y)=>{let{paramName:v,isOptional:b}=x;if(v==="*"){let _=d[y]||"";l=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const S=d[y];return b&&!S?f[v]=void 0:f[v]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:l,pattern:t}}function Z6(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),sy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,m)=>(n.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function J6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function iy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function e5(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?el(t):t;return{pathname:r?r.startsWith("/")?r:t5(r,e):e,search:s5(n),hash:i5(s)}}function t5(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function cp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r5(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function GS(t,e){let r=r5(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function YS(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=el(t):(s=cd({},t),br(!s.pathname||!s.pathname.includes("?"),cp("?","pathname","search",s)),br(!s.pathname||!s.pathname.includes("#"),cp("#","pathname","hash",s)),br(!s.search||!s.search.includes("#"),cp("#","search","hash",s)));let i=t===""||s.pathname==="",l=i?"/":s.pathname,d;if(l==null)d=r;else{let y=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}d=y>=0?e[y]:"/"}let m=e5(s,d),f=l&&l!=="/"&&l.endsWith("/"),x=(i||l===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(f||x)&&(m.pathname+="/"),m}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),n5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),s5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function o5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qS=["post","put","patch","delete"];new Set(qS);const a5=["get",...qS];new Set(a5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ud.apply(this,arguments)}const oy=E.createContext(null),l5=E.createContext(null),tl=E.createContext(null),V0=E.createContext(null),Xo=E.createContext({outlet:null,matches:[],isDataRoute:!1}),XS=E.createContext(null);function c5(t,e){let{relative:r}=e===void 0?{}:e;Pd()||br(!1);let{basename:n,navigator:s}=E.useContext(tl),{hash:i,pathname:l,search:d}=QS(t,{relative:r}),m=l;return n!=="/"&&(m=l==="/"?n:Po([n,l])),s.createHref({pathname:m,search:d,hash:i})}function Pd(){return E.useContext(V0)!=null}function Ko(){return Pd()||br(!1),E.useContext(V0).location}function KS(t){E.useContext(tl).static||E.useLayoutEffect(t)}function sn(){let{isDataRoute:t}=E.useContext(Xo);return t?C5():u5()}function u5(){Pd()||br(!1);let t=E.useContext(oy),{basename:e,future:r,navigator:n}=E.useContext(tl),{matches:s}=E.useContext(Xo),{pathname:i}=Ko(),l=JSON.stringify(GS(s,r.v7_relativeSplatPath)),d=E.useRef(!1);return KS(()=>{d.current=!0}),E.useCallback(function(f,x){if(x===void 0&&(x={}),!d.current)return;if(typeof f=="number"){n.go(f);return}let y=YS(f,JSON.parse(l),i,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Po([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,l,i,t])}function d5(){let{matches:t}=E.useContext(Xo),e=t[t.length-1];return e?e.params:{}}function QS(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=E.useContext(tl),{matches:s}=E.useContext(Xo),{pathname:i}=Ko(),l=JSON.stringify(GS(s,n.v7_relativeSplatPath));return E.useMemo(()=>YS(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function h5(t,e){return f5(t,e)}function f5(t,e,r,n){Pd()||br(!1);let{navigator:s}=E.useContext(tl),{matches:i}=E.useContext(Xo),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let m=l?l.pathnameBase:"/";l&&l.route;let f=Ko(),x;if(e){var y;let I=typeof e=="string"?el(e):e;m==="/"||(y=I.pathname)!=null&&y.startsWith(m)||br(!1),x=I}else x=f;let v=x.pathname||"/",b=v;if(m!=="/"){let I=m.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(I.length).join("/")}let S=U6(t,{pathname:b}),_=y5(S&&S.map(I=>Object.assign({},I,{params:Object.assign({},d,I.params),pathname:Po([m,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?m:Po([m,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,r,n);return e&&_?E.createElement(V0.Provider,{value:{location:ud({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:_o.Pop}},_):_}function m5(){let t=_5(),e=o5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:s},r):null,null)}const p5=E.createElement(m5,null);class g5 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?E.createElement(Xo.Provider,{value:this.props.routeContext},E.createElement(XS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x5(t){let{routeContext:e,match:r,children:n}=t,s=E.useContext(oy);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(Xo.Provider,{value:e},n)}function y5(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,d=(s=r)==null?void 0:s.errors;if(d!=null){let x=l.findIndex(y=>y.route.id&&(d==null?void 0:d[y.route.id])!==void 0);x>=0||br(!1),l=l.slice(0,Math.min(l.length,x+1))}let m=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<l.length;x++){let y=l[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=x),y.route.id){let{loaderData:v,errors:b}=r,S=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){m=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((x,y,v)=>{let b,S=!1,_=null,I=null;r&&(b=d&&y.route.id?d[y.route.id]:void 0,_=y.route.errorElement||p5,m&&(f<0&&v===0?(S=!0,I=null):f===v&&(S=!0,I=y.route.hydrateFallbackElement||null)));let R=e.concat(l.slice(0,v+1)),N=()=>{let A;return b?A=_:S?A=I:y.route.Component?A=E.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=x,E.createElement(x5,{match:y,routeContext:{outlet:x,matches:R,isDataRoute:r!=null},children:A})};return r&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(g5,{location:r.location,revalidation:r.revalidation,component:_,error:b,children:N(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):N()},null)}var ZS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZS||{}),Vf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vf||{});function w5(t){let e=E.useContext(oy);return e||br(!1),e}function v5(t){let e=E.useContext(l5);return e||br(!1),e}function b5(t){let e=E.useContext(Xo);return e||br(!1),e}function JS(t){let e=b5(),r=e.matches[e.matches.length-1];return r.route.id||br(!1),r.route.id}function _5(){var t;let e=E.useContext(XS),r=v5(Vf.UseRouteError),n=JS(Vf.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function C5(){let{router:t}=w5(ZS.UseNavigateStable),e=JS(Vf.UseNavigateStable),r=E.useRef(!1);return KS(()=>{r.current=!0}),E.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ud({fromRouteId:e},i)))},[t,e])}function E5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zr(t){br(!1)}function S5(t){let{basename:e="/",children:r=null,location:n,navigationType:s=_o.Pop,navigator:i,static:l=!1,future:d}=t;Pd()&&br(!1);let m=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:m,navigator:i,static:l,future:ud({v7_relativeSplatPath:!1},d)}),[m,d,i,l]);typeof n=="string"&&(n=el(n));let{pathname:x="/",search:y="",hash:v="",state:b=null,key:S="default"}=n,_=E.useMemo(()=>{let I=iy(x,m);return I==null?null:{location:{pathname:I,search:y,hash:v,state:b,key:S},navigationType:s}},[m,x,y,v,b,S,s]);return _==null?null:E.createElement(tl.Provider,{value:f},E.createElement(V0.Provider,{children:r,value:_}))}function N5(t){let{children:e,location:r}=t;return h5($1(e),r)}new Promise(()=>{});function $1(t,e){e===void 0&&(e=[]);let r=[];return E.Children.forEach(t,(n,s)=>{if(!E.isValidElement(n))return;let i=[...e,s];if(n.type===E.Fragment){r.push.apply(r,$1(n.props.children,i));return}n.type!==zr&&br(!1),!n.props.index||!n.props.children||br(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=$1(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W1.apply(this,arguments)}function A5(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function T5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I5(t,e){return t.button===0&&(!e||e==="_self")&&!T5(t)}const R5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],O5="6";try{window.__reactRouterVersion=O5}catch{}const j5="startTransition",p2=Vg[j5];function M5(t){let{basename:e,children:r,future:n,window:s}=t,i=E.useRef();i.current==null&&(i.current=L6({window:s,v5Compat:!0}));let l=i.current,[d,m]=E.useState({action:l.action,location:l.location}),{v7_startTransition:f}=n||{},x=E.useCallback(y=>{f&&p2?p2(()=>m(y)):m(y)},[m,f]);return E.useLayoutEffect(()=>l.listen(x),[l,x]),E.useEffect(()=>E5(n),[n]),E.createElement(S5,{basename:e,children:r,location:d.location,navigationType:d.action,navigator:l,future:n})}const k5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ch=E.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:d,target:m,to:f,preventScrollReset:x,viewTransition:y}=e,v=A5(e,R5),{basename:b}=E.useContext(tl),S,_=!1;if(typeof f=="string"&&P5.test(f)&&(S=f,k5))try{let A=new URL(window.location.href),O=f.startsWith("//")?new URL(A.protocol+f):new URL(f),k=iy(O.pathname,b);O.origin===A.origin&&k!=null?f=k+O.search+O.hash:_=!0}catch{}let I=c5(f,{relative:s}),R=D5(f,{replace:l,state:d,target:m,preventScrollReset:x,relative:s,viewTransition:y});function N(A){n&&n(A),A.defaultPrevented||R(A)}return E.createElement("a",W1({},v,{href:S||I,onClick:_||i?n:N,ref:r,target:m}))});var g2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(g2||(g2={}));var x2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(x2||(x2={}));function D5(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:d}=e===void 0?{}:e,m=sn(),f=Ko(),x=QS(t,{relative:l});return E.useCallback(y=>{if(I5(y,r)){y.preventDefault();let v=n!==void 0?n:zf(f)===zf(x);m(t,{replace:v,state:s,preventScrollReset:i,relative:l,viewTransition:d})}},[f,m,x,n,s,r,t,i,l,d])}var G1=function(t,e){return G1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},G1(t,e)};function eN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");G1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ds=function(){return ds=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ds.apply(this,arguments)};function Qo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function tN(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var d=t.length-1;d>=0;d--)(l=t[d])&&(i=(s<3?l(i):s>3?l(e,r,i):l(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function rN(t,e){return function(r,n){e(r,n,t)}}function nN(t,e,r,n,s,i){function l(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var d=n.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!e&&t?n.static?t:t.prototype:null,x=e||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),y,v=!1,b=r.length-1;b>=0;b--){var S={};for(var _ in n)S[_]=_==="access"?{}:n[_];for(var _ in n.access)S.access[_]=n.access[_];S.addInitializer=function(R){if(v)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(R||null))};var I=(0,r[b])(d==="accessor"?{get:x.get,set:x.set}:x[m],S);if(d==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(y=l(I.get))&&(x.get=y),(y=l(I.set))&&(x.set=y),(y=l(I.init))&&s.unshift(y)}else(y=l(I))&&(d==="field"?s.unshift(y):x[m]=y)}f&&Object.defineProperty(f,n.name,x),v=!0}function sN(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function iN(t){return typeof t=="symbol"?t:"".concat(t)}function oN(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function aN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function De(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})}function lN(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=d(0),l.throw=d(1),l.return=d(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var H0=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function cN(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H0(e,t,r)}function Hf(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ay(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],l;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(d){l={error:d}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return i}function uN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ay(arguments[e]));return t}function dN(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],l=0,d=i.length;l<d;l++,s++)n[s]=i[l];return n}function ly(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function _c(t){return this instanceof _c?(this.v=t,this):new _c(t)}function hN(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(b){return function(S){return Promise.resolve(S).then(b,y)}}function d(b,S){n[b]&&(s[b]=function(_){return new Promise(function(I,R){i.push([b,_,I,R])>1||m(b,_)})},S&&(s[b]=S(s[b])))}function m(b,S){try{f(n[b](S))}catch(_){v(i[0][3],_)}}function f(b){b.value instanceof _c?Promise.resolve(b.value.v).then(x,y):v(i[0][2],b)}function x(b){m("next",b)}function y(b){m("throw",b)}function v(b,S){b(S),i.shift(),i.length&&m(i[0][0],i[0][1])}}function fN(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(l){return(r=!r)?{value:_c(t[s](l)),done:!1}:i?i(l):l}:i}}function mN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Hf=="function"?Hf(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(l){return new Promise(function(d,m){l=t[i](l),s(d,m,l.done,l.value)})}}function s(i,l,d,m){Promise.resolve(m).then(function(f){i({value:f,done:d})},l)}}function pN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var L5=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Y1=function(t){return Y1=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Y1(t)};function gN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Y1(t),n=0;n<r.length;n++)r[n]!=="default"&&H0(e,t,r[n]);return L5(e,t),e}function xN(t){return t&&t.__esModule?t:{default:t}}function yN(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function wN(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function vN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function bN(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var B5=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function _N(t){function e(i){t.error=t.hasError?new B5(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(l){return e(l),s()})}else n|=1}catch(l){e(l)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function CN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,l){return n?e?".jsx":".js":s&&(!i||!l)?r:s+i+"."+l.toLowerCase()+"js"}):t}const F5={__extends:eN,__assign:ds,__rest:Qo,__decorate:tN,__param:rN,__esDecorate:nN,__runInitializers:sN,__propKey:iN,__setFunctionName:oN,__metadata:aN,__awaiter:De,__generator:lN,__createBinding:H0,__exportStar:cN,__values:Hf,__read:ay,__spread:uN,__spreadArrays:dN,__spreadArray:ly,__await:_c,__asyncGenerator:hN,__asyncDelegator:fN,__asyncValues:mN,__makeTemplateObject:pN,__importStar:gN,__importDefault:xN,__classPrivateFieldGet:yN,__classPrivateFieldSet:wN,__classPrivateFieldIn:vN,__addDisposableResource:bN,__disposeResources:_N,__rewriteRelativeImportExtension:CN},U5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:bN,get __assign(){return ds},__asyncDelegator:fN,__asyncGenerator:hN,__asyncValues:mN,__await:_c,__awaiter:De,__classPrivateFieldGet:yN,__classPrivateFieldIn:vN,__classPrivateFieldSet:wN,__createBinding:H0,__decorate:tN,__disposeResources:_N,__esDecorate:nN,__exportStar:cN,__extends:eN,__generator:lN,__importDefault:xN,__importStar:gN,__makeTemplateObject:pN,__metadata:aN,__param:rN,__propKey:iN,__read:ay,__rest:Qo,__rewriteRelativeImportExtension:CN,__runInitializers:sN,__setFunctionName:oN,__spread:uN,__spreadArray:ly,__spreadArrays:dN,__values:Hf,default:F5},Symbol.toStringTag,{value:"Module"})),z5="modulepreload",V5=function(t){return"/ALAN_NEW/"+t},y2={},Ho=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(m=>{if(m=V5(m),m in y2)return;y2[m]=!0;const f=m.endsWith(".css"),x=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":z5,f||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((v,b)=>{y.addEventListener("load",v),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return s.then(l=>{for(const d of l||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})},H5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>rl);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class cy extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class w2 extends cy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class v2 extends cy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b2 extends cy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var q1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(q1||(q1={}));class $5{constructor(e,{headers:r={},customFetch:n,region:s=q1.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=H5(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return De(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:d,signal:m}=n;let f={},{region:x}=n;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(f["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let v;d&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(f["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(f["Content-Type"]="application/json",v=JSON.stringify(d)):v=d;const b=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),i),body:v,signal:m}).catch(R=>{throw R.name==="AbortError"?R:new w2(R)}),S=b.headers.get("x-relay-error");if(S&&S==="true")throw new v2(b);if(!b.ok)throw new b2(b);let _=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),I;return _==="application/json"?I=yield b.json():_==="application/octet-stream"||_==="application/pdf"?I=yield b.blob():_==="text/event-stream"?I=b:_==="multipart/form-data"?I=yield b.formData():I=yield b.text(),{data:I,error:null,response:b}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new w2(i)}:{data:null,error:i,response:i instanceof b2||i instanceof v2?i.context:void 0}}})}}var dn={};const Uc=Xb(U5);var Eh={},Sh={},Nh={},Ah={},Th={},W5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cc=W5();const G5=Cc.fetch,EN=Cc.fetch.bind(Cc),SN=Cc.Headers,Y5=Cc.Request,q5=Cc.Response,rl=Object.freeze(Object.defineProperty({__proto__:null,Headers:SN,Request:Y5,Response:q5,default:EN,fetch:G5},Symbol.toStringTag,{value:"Module"})),X5=Xb(rl);var Ih={},_2;function NN(){if(_2)return Ih;_2=1,Object.defineProperty(Ih,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ih.default=t,Ih}var C2;function AN(){if(C2)return Th;C2=1,Object.defineProperty(Th,"__esModule",{value:!0});const t=Uc,e=t.__importDefault(X5),r=t.__importDefault(NN());class n{constructor(i){var l,d;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(d=i.isMaybeSingle)!==null&&d!==void 0?d:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let m=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var x,y,v,b;let S=null,_=null,I=null,R=f.status,N=f.statusText;if(f.ok){if(this.method!=="HEAD"){const F=await f.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?_=F:_=JSON.parse(F))}const O=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),k=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");O&&k&&k.length>1&&(I=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(S={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,I=null,R=406,N="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const O=await f.text();try{S=JSON.parse(O),Array.isArray(S)&&f.status===404&&(_=[],S=null,R=200,N="OK")}catch{f.status===404&&O===""?(R=204,N="No Content"):S={message:O}}if(S&&this.isMaybeSingle&&(!((b=S==null?void 0:S.details)===null||b===void 0)&&b.includes("0 rows"))&&(S=null,R=200,N="OK"),S&&this.shouldThrowOnError)throw new r.default(S)}return{error:S,data:_,count:I,status:R,statusText:N}});return this.shouldThrowOnError||(m=m.catch(f=>{var x,y,v;return{error:{message:`${(x=f==null?void 0:f.name)!==null&&x!==void 0?x:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(y=f==null?void 0:f.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=f==null?void 0:f.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),m.then(i,l)}returns(){return this}overrideTypes(){return this}}return Th.default=n,Th}var E2;function TN(){if(E2)return Ah;E2=1,Object.defineProperty(Ah,"__esModule",{value:!0});const e=Uc.__importDefault(AN());class r extends e.default{select(s){let i=!1;const l=(s??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:d,referencedTable:m=d}={}){const f=m?`${m}.order`:"order",x=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${x?`${x},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:d=l}={}){const m=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${s}`),this.url.searchParams.set(f,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:d=!1,wal:m=!1,format:f="text"}={}){var x;const y=[s?"analyze":null,i?"verbose":null,l?"settings":null,d?"buffers":null,m?"wal":null].filter(Boolean).join("|"),v=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${y};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ah.default=r,Ah}var S2;function uy(){if(S2)return Nh;S2=1,Object.defineProperty(Nh,"__esModule",{value:!0});const e=Uc.__importDefault(TN()),r=new RegExp("[,()]");class n extends e.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}in(i,l){const d=Array.from(new Set(l)).map(m=>typeof m=="string"&&r.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(i,`in.(${d})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:d,type:m}={}){let f="";m==="plain"?f="pl":m==="phrase"?f="ph":m==="websearch"&&(f="w");const x=d===void 0?"":`(${d})`;return this.url.searchParams.append(i,`${f}fts${x}.${l}`),this}match(i){return Object.entries(i).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(i,l,d){return this.url.searchParams.append(i,`not.${l}.${d}`),this}or(i,{foreignTable:l,referencedTable:d=l}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${i})`),this}filter(i,l,d){return this.url.searchParams.append(i,`${l}.${d}`),this}}return Nh.default=n,Nh}var N2;function IN(){if(N2)return Sh;N2=1,Object.defineProperty(Sh,"__esModule",{value:!0});const e=Uc.__importDefault(uy());class r{constructor(s,{headers:i={},schema:l,fetch:d}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=d}select(s,i){const{head:l=!1,count:d}=i??{},m=l?"HEAD":"GET";let f=!1;const x=(s??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",x),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var d;const m="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(f.length>0){const x=[...new Set(f)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:d,defaultToNull:m=!0}={}){var f;const x="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),d&&this.headers.append("Prefer",`count=${d}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:i}={}){var l;const d="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Sh.default=r,Sh}var A2;function K5(){if(A2)return Eh;A2=1,Object.defineProperty(Eh,"__esModule",{value:!0});const t=Uc,e=t.__importDefault(IN()),r=t.__importDefault(uy());class n{constructor(i,{headers:l={},schema:d,fetch:m}={}){this.url=i,this.headers=new Headers(l),this.schemaName=d,this.fetch=m}from(i){const l=new URL(`${this.url}/${i}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:d=!1,get:m=!1,count:f}={}){var x;let y;const v=new URL(`${this.url}/rpc/${i}`);let b;d||m?(y=d?"HEAD":"GET",Object.entries(l).filter(([_,I])=>I!==void 0).map(([_,I])=>[_,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([_,I])=>{v.searchParams.append(_,I)})):(y="POST",b=l);const S=new Headers(this.headers);return f&&S.set("Prefer",`count=${f}`),new r.default({method:y,url:v,headers:S,schema:this.schemaName,body:b,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Eh.default=n,Eh}Object.defineProperty(dn,"__esModule",{value:!0});var RN=dn.PostgrestError=UN=dn.PostgrestBuilder=BN=dn.PostgrestTransformBuilder=DN=dn.PostgrestFilterBuilder=kN=dn.PostgrestQueryBuilder=jN=dn.PostgrestClient=void 0;const zc=Uc,ON=zc.__importDefault(K5());var jN=dn.PostgrestClient=ON.default;const MN=zc.__importDefault(IN());var kN=dn.PostgrestQueryBuilder=MN.default;const PN=zc.__importDefault(uy());var DN=dn.PostgrestFilterBuilder=PN.default;const LN=zc.__importDefault(TN());var BN=dn.PostgrestTransformBuilder=LN.default;const FN=zc.__importDefault(AN());var UN=dn.PostgrestBuilder=FN.default;const zN=zc.__importDefault(NN());RN=dn.PostgrestError=zN.default;var VN=dn.default={PostgrestClient:ON.default,PostgrestQueryBuilder:MN.default,PostgrestFilterBuilder:PN.default,PostgrestTransformBuilder:LN.default,PostgrestBuilder:FN.default,PostgrestError:zN.default};const Q5=Dg({__proto__:null,get PostgrestBuilder(){return UN},get PostgrestClient(){return jN},get PostgrestError(){return RN},get PostgrestFilterBuilder(){return DN},get PostgrestQueryBuilder(){return kN},get PostgrestTransformBuilder(){return BN},default:VN},[dn]),{PostgrestClient:Z5,PostgrestQueryBuilder:dH,PostgrestFilterBuilder:hH,PostgrestTransformBuilder:fH,PostgrestBuilder:mH,PostgrestError:pH}=VN||Q5;class J5{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const eD="2.78.0",tD=`realtime-js/${eD}`,rD="1.0.0",X1=1e4,nD=1e3,sD=100;var ku;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ku||(ku={}));var Nr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Nr||(Nr={}));var Bs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bs||(Bs={}));var K1;(function(t){t.websocket="websocket"})(K1||(K1={}));var xa;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xa||(xa={}));class iD{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const d=n.decode(e.slice(l,l+s));l=l+s;const m=n.decode(e.slice(l,l+i));l=l+i;const f=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:d,event:m,payload:f}}}class HN{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Mt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Mt||(Mt={}));const T2=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,l)=>(i[l]=oD(l,t,e,s),i),{}):{}},oD=(t,e,r,n)=>{const s=e.find(d=>d.name===t),i=s==null?void 0:s.type,l=r[t];return i&&!n.includes(i)?$N(i,l):Q1(l)},$N=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return uD(e,r)}switch(t){case Mt.bool:return aD(e);case Mt.float4:case Mt.float8:case Mt.int2:case Mt.int4:case Mt.int8:case Mt.numeric:case Mt.oid:return lD(e);case Mt.json:case Mt.jsonb:return cD(e);case Mt.timestamp:return dD(e);case Mt.abstime:case Mt.date:case Mt.daterange:case Mt.int4range:case Mt.int8range:case Mt.money:case Mt.reltime:case Mt.text:case Mt.time:case Mt.timestamptz:case Mt.timetz:case Mt.tsrange:case Mt.tstzrange:return Q1(e);default:return Q1(e)}},Q1=t=>t,aD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const l=t.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(d=>$N(e,d))}return t},dD=t=>typeof t=="string"?t.replace(" ","T"):t,WN=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class up{constructor(e,r,n={},s=X1){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var I2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(I2||(I2={}));class Pu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(m=>{this.state=Pu.syncDiff(this.state,m,i,l)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pu.syncDiff(this.state,s,i,l),d())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),l=this.transformState(r),d={},m={};return this.map(i,(f,x)=>{l[f]||(m[f]=x)}),this.map(l,(f,x)=>{const y=i[f];if(y){const v=x.map(I=>I.presence_ref),b=y.map(I=>I.presence_ref),S=x.filter(I=>b.indexOf(I.presence_ref)<0),_=y.filter(I=>v.indexOf(I.presence_ref)<0);S.length>0&&(d[f]=S),_.length>0&&(m[f]=_)}else d[f]=x}),this.syncDiff(i,{joins:d,leaves:m},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(d,m)=>{var f;const x=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(m),x.length>0){const y=e[d].map(b=>b.presence_ref),v=x.filter(b=>y.indexOf(b.presence_ref)<0);e[d].unshift(...v)}n(d,x,m)}),this.map(l,(d,m)=>{let f=e[d];if(!f)return;const x=m.map(y=>y.presence_ref);f=f.filter(y=>x.indexOf(y.presence_ref)<0),e[d]=f,s(d,f,m),f.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var R2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(R2||(R2={}));var Du;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Du||(Du={}));var Ri;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ri||(Ri={}));class dy{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Nr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new up(this,Bs.join,this.params,this.timeout),this.rejoinTimer=new HN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bs.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new Pu(this),this.broadcastEndpointURL=WN(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Nr.closed){const{config:{broadcast:l,presence:d,private:m}}=this.params,f=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&s!==void 0?s:[],x=!!this.bindings[Du.PRESENCE]&&this.bindings[Du.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:x}),postgres_changes:f,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Ri.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Ri.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket.setAuth(),b===void 0){e==null||e(Ri.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,I=(S=_==null?void 0:_.length)!==null&&S!==void 0?S:0,R=[];for(let N=0;N<I;N++){const A=_[N],{filter:{event:O,schema:k,table:F,filter:B}}=A,P=b&&b[N];if(P&&P.event===O&&P.schema===k&&P.table===F&&P.filter===B)R.push(Object.assign(Object.assign({},A),{id:P.id}));else{this.unsubscribe(),this.state=Nr.errored,e==null||e(Ri.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Ri.SUBSCRIBED);return}}).receive("error",b=>{this.state=Nr.errored,e==null||e(Ri.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ri.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Nr.joined&&e===Du.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(d.status===202)return{success:!0};let m=d.statusText;try{const f=await d.json();m=f.error||f.message||m}catch{}return Promise.reject(new Error(m))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,d,m;const f=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new up(this,Bs.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new up(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const l=e.toLocaleLowerCase(),{close:d,error:m,leave:f,join:x}=Bs;if(n&&[d,m,f,x].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var S,_,I;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((I=(_=b.filter)===null||_===void 0?void 0:_.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===l}).map(b=>b.callback(v,n)):(i=this.bindings[l])===null||i===void 0||i.filter(b=>{var S,_,I,R,N,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,k=(S=b.filter)===null||S===void 0?void 0:S.event;return O&&((_=r.ids)===null||_===void 0?void 0:_.includes(O))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((I=r.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const O=(N=(R=b==null?void 0:b.filter)===null||R===void 0?void 0:R.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return O==="*"||O===((A=r==null?void 0:r.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:_,table:I,commit_timestamp:R,type:N,errors:A}=S;v=Object.assign(Object.assign({},{schema:_,table:I,commit_timestamp:R,eventType:N,new:{},old:{},errors:A}),this._getPayloadRecords(S))}b.callback(v,n)})}_isClosed(){return this.state===Nr.closed}_isJoined(){return this.state===Nr.joined}_isJoining(){return this.state===Nr.joining}_isLeaving(){return this.state===Nr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&dy.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bs.close,{},e)}_onError(e){this._on(Bs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=T2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=T2(e.columns,e.old_record)),r}}const dp=()=>{},Rh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hD=[1e3,2e3,5e3,1e4],fD=1e4,mD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=X1,this.transport=null,this.heartbeatIntervalMs=Rh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dp,this.ref=0,this.reconnectTimer=null,this.logger=dp,this.conn=null,this.sendBuffer=[],this.serializer=new iD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Ho(async()=>{const{default:d}=await Promise.resolve().then(()=>rl);return{default:d}},void 0).then(({default:d})=>d(...l)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${K1.websocket}`,this.httpEndpoint=WN(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=J5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rD}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ku.connecting:return xa.Connecting;case ku.open:return xa.Open;case ku.closing:return xa.Closing;default:return xa.Closed}}isConnected(){return this.connectionState()===xa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new dy(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,l=()=>{this.encode(e,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(nD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Rh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,d=l?`(${l})`:"",m=i.status||"";this.log("receive",`${m} ${n} ${s} ${d}`.trim(),i),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([mD],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:tD};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Bs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new HN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,l,d,m,f,x;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:X1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Rh.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:dp,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:y=>hD[y-1]||fD,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(y,v)=>v(JSON.stringify(y)),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class hy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gD extends hy{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Z1 extends hy{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const fy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>rl);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},xD=()=>De(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ho(()=>Promise.resolve().then(()=>rl),void 0)).Response:Response}),J1=t=>{if(Array.isArray(t))return t.map(r=>J1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=J1(n)}),e},yD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},wD=(t,e,r)=>De(void 0,void 0,void 0,function*(){const n=yield xD();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,l=(s==null?void 0:s.statusCode)||i+"";e(new gD(hp(s),i,l))}).catch(s=>{e(new Z1(hp(s),s))}):e(new Z1(hp(t),t))}),vD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(yD(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Dd(t,e,r,n,s,i){return De(this,void 0,void 0,function*(){return new Promise((l,d)=>{t(r,vD(e,n,s,i)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>l(m)).catch(m=>wD(m,d,n))})})}function dd(t,e,r,n){return De(this,void 0,void 0,function*(){return Dd(t,"GET",e,r,n)})}function ks(t,e,r,n,s){return De(this,void 0,void 0,function*(){return Dd(t,"POST",e,n,s,r)})}function eg(t,e,r,n,s){return De(this,void 0,void 0,function*(){return Dd(t,"PUT",e,n,s,r)})}function bD(t,e,r,n){return De(this,void 0,void 0,function*(){return Dd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function my(t,e,r,n,s){return De(this,void 0,void 0,function*(){return Dd(t,"DELETE",e,n,s,r)})}class _D{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return De(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}var GN;class CD{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[GN]="BlobDownloadBuilder",this.promise=null}asStream(){return new _D(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return De(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}GN=Symbol.toStringTag;const ED={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},O2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SD{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=fy(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return De(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},O2),s);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const m=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),m&&i.append("metadata",this.encodeMetadata(m)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),m&&i.append("metadata",this.encodeMetadata(m))):(i=n,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,m&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const f=this._removeEmptyFolders(r),x=this._getFinalPath(f),y=yield(e=="PUT"?eg:ks)(this.fetch,`${this.url}/object/${x}`,i,Object.assign({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}upload(e,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return De(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),l=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",r);try{let m;const f=Object.assign({upsert:O2.upsert},s),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",f.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",f.cacheControl)):(m=n,x["cache-control"]=`max-age=${f.cacheControl}`,x["content-type"]=f.contentType);const y=yield eg(this.fetch,d.toString(),m,{headers:x});return{data:{path:i,fullPath:y.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Yt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return De(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ks(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),d=l.searchParams.get("token");if(!d)throw new hy("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}update(e,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return De(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return De(this,void 0,void 0,function*(){try{return{data:{path:(yield ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return De(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ks(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return De(this,void 0,void 0,function*(){try{const s=yield ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",d=this._getFinalPath(e),m=()=>dd(this.fetch,`${this.url}/${s}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new CD(m,this.shouldThrowOnError)}info(e){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield dd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:J1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}exists(e){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield bD(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n)&&n instanceof Z1){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});m!==""&&s.push(m);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${f}`)}}}remove(e){return De(this,void 0,void 0,function*(){try{return{data:yield my(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}list(e,r,n){return De(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ED),r),{prefix:e||""});return{data:yield ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}listV2(e,r){return De(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ks(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const YN="2.78.0",qN={"X-Client-Info":`storage-js/${YN}`};class ND{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qN),r),this.fetch=fy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return De(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield dd(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}getBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield dd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}createBucket(e){return De(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return De(this,void 0,void 0,function*(){try{return{data:yield eg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Yt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield my(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class AD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qN),r),this.fetch=fy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}listBuckets(e){return De(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield dd(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield my(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}}const py={"X-Client-Info":`storage-js/${YN}`,"Content-Type":"application/json"};class XN extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Un(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class fp extends XN{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class TD extends XN{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var j2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(j2||(j2={}));const gy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>rl);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ID=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},M2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),RD=(t,e,r)=>De(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new fp(M2(l),s,d))}).catch(()=>{const l=s+"",d=i.statusText||`HTTP ${s} error`;e(new fp(d,s,l))});else{const l=s+"",d=i.statusText||`HTTP ${s} error`;e(new fp(d,s,l))}}else e(new TD(M2(t),t))}),OD=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(ID(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function jD(t,e,r,n,s,i){return De(this,void 0,void 0,function*(){return new Promise((l,d)=>{t(r,OD(e,n,s,i)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const f=m.headers.get("content-type");return!f||!f.includes("application/json")?{}:m.json()}).then(m=>l(m)).catch(m=>RD(m,d,n))})})}function zn(t,e,r,n,s){return De(this,void 0,void 0,function*(){return jD(t,"POST",e,n,s,r)})}class MD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},py),r),this.fetch=gy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return De(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getIndex(e,r){return De(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}})}listIndexes(e){return De(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return De(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Un(n))return{data:null,error:n};throw n}})}}class kD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},py),r),this.fetch=gy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return De(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getVectors(e){return De(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}listVectors(e){return De(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield zn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}queryVectors(e){return De(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteVectors(e){return De(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}}class PD{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},py),r),this.fetch=gy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return De(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}getBucket(e){return De(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}listBuckets(){return De(this,arguments,void 0,function*(e={}){try{return{data:yield zn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}deleteBucket(e){return De(this,void 0,void 0,function*(){try{return{data:(yield zn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}})}}class DD extends PD{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new LD(this.url,this.headers,e,this.fetch)}}class LD extends MD{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return De(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return De(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return De(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return De(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new BD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class BD extends kD{constructor(e,r,n,s,i){super(e,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return De(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return De(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return De(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return De(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return De(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class FD extends ND{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new SD(this.url,this.headers,e,this.fetch)}get vectors(){return new DD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AD(this.url+"/iceberg",this.headers,this.fetch)}}const UD="2.78.0";let wu="";typeof Deno<"u"?wu="deno":typeof document<"u"?wu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wu="react-native":wu="node";const zD={"X-Client-Info":`supabase-js-${wu}/${UD}`},VD={headers:zD},HD={schema:"public"},$D={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WD={},GD=t=>{let e;return t?e=t:typeof fetch>"u"?e=EN:e=fetch,(...r)=>e(...r)},YD=()=>typeof Headers>"u"?SN:Headers,qD=(t,e,r)=>{const n=GD(r),s=YD();return async(i,l)=>{var d;const m=(d=await e())!==null&&d!==void 0?d:t;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${m}`),n(i,Object.assign(Object.assign({},l),{headers:f}))}};function XD(t){return t.endsWith("/")?t:t+"/"}function KD(t,e){var r,n;const{db:s,auth:i,realtime:l,global:d}=t,{db:m,auth:f,realtime:x,global:y}=e,v={db:Object.assign(Object.assign({},m),s),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},x),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),d),{headers:Object.assign(Object.assign({},(r=y==null?void 0:y.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function QD(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(XD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const KN="2.78.0",Al=30*1e3,tg=3,mp=tg*Al,ZD="http://localhost:9999",JD="supabase.auth.token",eL={"X-Client-Info":`gotrue-js/${KN}`},rg="X-Supabase-Api-Version",QN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rL=10*60*1e3;class hd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ze(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class nL extends hd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function sL(t){return ze(t)&&t.name==="AuthApiError"}class ya extends hd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Zo extends hd{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Is extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iL(t){return ze(t)&&t.name==="AuthSessionMissingError"}class xl extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oh extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jh extends Zo{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oL(t){return ze(t)&&t.name==="AuthImplicitGrantRedirectError"}class k2 extends Zo{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ng extends Zo{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function pp(t){return ze(t)&&t.name==="AuthRetryableFetchError"}class P2 extends Zo{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sg extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),D2=` 	
\r=`.split(""),aL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<D2.length;e+=1)t[D2[e].charCodeAt(0)]=-2;for(let e=0;e<$f.length;e+=1)t[$f[e].charCodeAt(0)]=e;return t})();function L2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r($f[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r($f[n]),e.queuedBits-=6}}function ZN(t,e,r){const n=aL[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function B2(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{uL(l,n,r)};for(let l=0;l<t.length;l+=1)ZN(t.charCodeAt(l),s,i);return e.join("")}function lL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cL(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}lL(n,e)}}function uL(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Jl(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ZN(t.charCodeAt(s),r,n);return new Uint8Array(e)}function dL(t){const e=[];return cL(t,r=>e.push(r)),new Uint8Array(e)}function _a(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>L2(s,r,n)),L2(null,r,n),e.join("")}function hL(t){return Math.round(Date.now()/1e3)+t}function fL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const an=()=>typeof window<"u"&&typeof document<"u",ca={tested:!1,writable:!1},JN=()=>{if(!an())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ca.tested)return ca.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ca.tested=!0,ca.writable=!0}catch{ca.tested=!0,ca.writable=!1}return ca.writable};function mL(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const eA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ho(async()=>{const{default:n}=await Promise.resolve().then(()=>rl);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},pL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Tl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ua=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},io=async(t,e)=>{await t.removeItem(e)};class $0{constructor(){this.promise=new $0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}$0.promiseConstructor=Promise;function gp(t){const e=t.split(".");if(e.length!==3)throw new sg("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!tL.test(e[n]))throw new sg("JWT not in base64url format");return{header:JSON.parse(B2(e[0])),payload:JSON.parse(B2(e[1])),signature:Jl(e[2]),raw:{header:e[0],payload:e[1]}}}async function gL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xL(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await t(i);if(!e(i,null,l)){n(l);return}}catch(l){if(!e(i,l)){s(l);return}}})()})}function yL(t){return("0"+t.toString(16)).substr(-2)}function wL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,yL).join("")}async function vL(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function bL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await vL(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yl(t,e,r=!1){const n=wL();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Tl(t,`${e}-code-verifier`,s);const i=await bL(n);return[i,n===i?"plain":"s256"]}const _L=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CL(t){const e=t.headers.get(rg);if(!e||!e.match(_L))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function EL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const NL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wl(t){if(!NL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xp(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AL(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function F2(t){return JSON.parse(JSON.stringify(t))}const pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),TL=[502,503,504];async function U2(t){var e;if(!pL(t))throw new ng(pa(t),0);if(TL.includes(t.status))throw new ng(pa(t),t.status);let r;try{r=await t.json()}catch(i){throw new ya(pa(i),i)}let n;const s=CL(t);if(s&&s.getTime()>=QN["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new P2(pa(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Is}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new P2(pa(r),t.status,r.weak_password.reasons);throw new nL(pa(r),t.status||500,n)}const IL=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function qe(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[rg]||(i[rg]=QN["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",m=await RL(t,e,r+d,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}}async function RL(t,e,r,n,s,i){const l=IL(e,n,s,i);let d;try{d=await t(r,Object.assign({},l))}catch(m){throw console.error(m),new ng(pa(m),0)}if(d.ok||await U2(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(m){await U2(m)}}function Rs(t){var e;let r=null;ML(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=hL(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function z2(t){const e=Rs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function mo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function OL(t){return{data:t,error:null}}function jL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,l=Qo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},m=Object.assign({},l);return{data:{properties:d,user:m},error:null}}function V2(t){return t}function ML(t){return t.access_token&&t.refresh_token&&t.expires_in}const yp=["global","local","others"];class kL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=eA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=yp[0]){if(yp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yp.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:mo})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Qo(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mo})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,l,d,m;try{const f={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:V2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(m=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(S.split(";")[1].split("=")[1]);f[`${I}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(ze(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){wl(e);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mo})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wl(e);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:mo})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){wl(e);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:mo})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wl(e.userId);try{const{data:r,error:n}=await qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wl(e.userId),wl(e.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,l,d,m;try{const f={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:V2});if(x.error)throw x.error;const y=await x.json(),v=(l=x.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(m=(d=x.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(S.split(";")[1].split("=")[1]);f[`${I}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(ze(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}}function H2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const vl={debug:!!(globalThis&&JN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PL extends tA{}async function DL(t,e,r){vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),vl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function LL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function BL(t){return parseInt(t,16)}function FL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function UL(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:d,requestId:m,resources:f,scheme:x,uri:y,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=rA(t.address),S=x?`${x}://${n}`:n,_=t.statement?`${t.statement}
`:"",I=`${S} wants you to sign in with your Ethereum account:
${b}

${_}`;let R=`URI: ${y}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(R+=`
Expiration Time: ${s.toISOString()}`),d&&(R+=`
Not Before: ${d.toISOString()}`),m&&(R+=`
Request ID: ${m}`),f){let N=`
Resources:`;for(const A of f){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);N+=`
- ${A}`}R+=N}return`${I}
${R}`}class xr extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Wf extends xr{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function zL({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new xr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new xr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new xr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new xr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new xr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new xr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new xr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(nA(l)){if(i.rp.id!==l)return new xr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new xr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function VL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new xr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(nA(n)){if(r.rpId!==n)return new xr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new xr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class HL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $L=new HL;function WL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Qo(t,["challenge","user","excludeCredentials"]),i=Jl(e).buffer,l=Object.assign(Object.assign({},r),{id:Jl(r.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const f=n[m];d.excludeCredentials[m]=Object.assign(Object.assign({},f),{id:Jl(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function GL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Qo(t,["challenge","allowCredentials"]),s=Jl(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},d),{id:Jl(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return i}function YL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:_a(new Uint8Array(t.response.attestationObject)),clientDataJSON:_a(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function qL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:_a(new Uint8Array(s.authenticatorData)),clientDataJSON:_a(new Uint8Array(s.clientDataJSON)),signature:_a(new Uint8Array(s.signature)),userHandle:s.userHandle?_a(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function $2(){var t,e;return!!(an()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",e)}:{data:null,error:new Wf("Empty credential response",e)}}catch(e){return{data:null,error:zL({error:e,options:t})}}}async function KL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",e)}:{data:null,error:new Wf("Empty credential response",e)}}catch(e){return{data:null,error:VL({error:e,options:t})}}}const QL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},ZL={userVerification:"preferred",hints:["security-key"]};function Gf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(e(l)){const d=n[i];e(d)?n[i]=Gf(d,l):n[i]=Gf(l)}else n[i]=l}return n}function JL(t,e){return Gf(QL,t,e||{})}function e7(t,e){return Gf(ZL,t,e||{})}class t7{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:d};const m=s??$L.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=JL(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:x,error:y}=await XL({publicKey:f,signal:m});return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}case"request":{const f=e7(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:x,error:y}=await KL(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:m}));return x?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:x}},error:null}:{data:null,error:y}}}}catch(l){return ze(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new hd("rpId is required for WebAuthn authentication")};try{if(!$2())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:d};const{webauthn:m}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:n,credential_response:m.credential_response}})}catch(l){return ze(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new hd("rpId is required for WebAuthn registration")};try{if(!$2())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(x=>{var y;return(y=x.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:d};const{data:m,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return m?this._verify({factorId:l.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:n,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:f}}catch(l){return ze(l)?{data:null,error:l}:{data:null,error:new ya("Unexpected error in register",l)}}}}LL();const r7={url:ZD,storageKey:JD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function W2(t,e,r){return await r()}const bl={};class fd{get jwks(){var e,r;return(r=(e=bl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){bl[this.storageKey]=Object.assign(Object.assign({},bl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=bl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bl[this.storageKey]=Object.assign(Object.assign({},bl[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fd.nextInstanceID,fd.nextInstanceID+=1,this.instanceID>0&&an()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},r7),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new kL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=eA(s.fetch),this.lock=s.lock||W2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:an()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=DL:this.lock=W2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new t7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:JN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H2(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=H2(this.memoryStorage)),an()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${KN}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=mL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),an()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),oL(i)){const m=(e=i.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?{error:r}:{error:new ya("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rs}),{data:l,error:d}=i;if(d||!l)return{data:{user:null,session:null},error:d};const m=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:x,password:y,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await yl(this.storage,this.storageKey)),i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:x,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:S},xform:Rs})}else if("phone"in e){const{phone:x,password:y,options:v}=e;i=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Rs})}else throw new Oh("You must provide either an email or phone number and a password");const{data:l,error:d}=i;if(d||!l)return{data:{user:null,session:null},error:d};const m=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:l,options:d}=e;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:z2})}else if("phone"in e){const{phone:i,password:l,options:d}=e;r=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:z2})}else throw new Oh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new xl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,l,d,m,f,x,y,v;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:_,wallet:I,statement:R,options:N}=e;let A;if(an())if(typeof I=="object")A=I;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")A=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=I}const O=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href),k=await A.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=rA(k[0]);let B=(n=N==null?void 0:N.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const M=await A.request({method:"eth_chainId"});B=BL(M)}const P={domain:O.host,address:F,statement:R,uri:O.href,version:"1",chainId:B,nonce:(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(x=N==null?void 0:N.signInWithEthereum)===null||x===void 0?void 0:x.resources};b=UL(P),S=await A.request({method:"personal_sign",params:[FL(b),F]})}try{const{data:_,error:I}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Rs});if(I)throw I;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new xl}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:I})}catch(_){if(ze(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var r,n,s,i,l,d,m,f,x,y,v,b;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:I,wallet:R,statement:N,options:A}=e;let O;if(an())if(typeof R=="object")O=R;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))O=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=R}const k=new URL((r=A==null?void 0:A.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const F=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),N?{statement:N}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)S=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),_=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${k.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=A==null?void 0:A.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=A==null?void 0:A.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((y=(x=A==null?void 0:A.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||y===void 0)&&y.length?["Resources",...A.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await O.signMessage(new TextEncoder().encode(S),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=F}}try{const{data:I,error:R}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:_a(_)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Rs});if(R)throw R;return!I||!I.session||!I.user?{data:{user:null,session:null},error:new xl}:(I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),{data:Object.assign({},I),error:R})}catch(I){if(ze(I))return{data:{user:null,session:null},error:I};throw I}}async _exchangeCodeForSession(e){const r=await ua(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Rs});if(await io(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(ze(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=e,d=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rs}),{data:m,error:f}=d;return f?{data:{user:null,session:null},error:f}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new xl}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:f})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,l;try{if("email"in e){const{email:d,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await yl(this.storage,this.storageKey));const{error:y}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:d,options:m}=e,{data:f,error:x}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(l=m==null?void 0:m.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:x}}throw new Oh("You must provide either an email or phone number.")}catch(d){if(ze(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:d}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Rs});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const m=l.session,f=l.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:f,session:m},error:null}}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await yl(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:OL})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Is;const{error:s}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:l}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:l,error:d}=await qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d}}throw new Oh("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<mp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await ua(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=xp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=AL(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mo}):await this._useSession(async r=>{var n,s,i;const{data:l,error:d}=r;if(d)throw d;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:mo})})}catch(r){if(ze(r))return iL(r)&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Is;const l=s.session;let d=null,m=null;this.flowType==="pkce"&&e.email!=null&&([d,m]=await yl(this.storage,this.storageKey));const{data:f,error:x}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:m}),jwt:l.access_token,xform:mo});if(x)throw x;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Is;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=gp(e.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:m}=await this._getUser(e.access_token);if(m)throw m;i={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ze(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:d}=r;if(d)throw d;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Is;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!an())throw new jh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new k2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k2("No code detected.");const{data:N,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:d,expires_at:m,token_type:f}=e;if(!i||!d||!l||!f)throw new jh("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(d);let v=x+y;m&&(v=parseInt(m));const b=v-x;b*1e3<=Al&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const S=v-y;x-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,x):x-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,x);const{data:_,error:I}=await this._getUser(i);if(I)throw I;const R={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:v,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ua(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:d}=await this.admin.signOut(l,e);if(d&&!(sL(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=fL(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await yl(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,d,m,f,x;const{data:y,error:v}=i;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&x!==void 0?x:void 0})});if(s)throw s;return an()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ze(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:d,token:m,access_token:f,nonce:x}=e,y=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:m,access_token:f,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Rs}),{data:v,error:b}=y;return b?{data:{user:null,session:null},error:b}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new xl}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:b})}catch(s){if(ze(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await xL(async s=>(s>0&&await gL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rs})),(s,i)=>{const l=200*Math.pow(2,s);return i&&pp(i)&&Date.now()+l-n<Al})}catch(n){if(this._debug(r,"error",n),ze(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),an()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ua(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ua(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Tl(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:xp()}else if(s&&!s.user&&!s.user){const l=await ua(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await io(this.storage,this.storageKey+"-user"),await Tl(this.storage,this.storageKey,s)):s.user=xp()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<mp;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${mp}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),pp(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(s.access_token);!d&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $0;const{data:i,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!i.session)throw new Is;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={data:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(s,"error",i),ze(i)){const l={data:null,error:i};return pp(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(m){i.push(m)}});if(await Promise.all(l),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Tl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=F2(s);await Tl(this.storage,this.storageKey,i)}else{const s=F2(r);await Tl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await io(this.storage,this.storageKey),await io(this.storage,this.storageKey+"-code-verifier"),await io(this.storage,this.storageKey+"-user"),this.userStorage&&await io(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&an()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Al);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Al);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Al}ms, refresh threshold is ${tg} ticks`),s<=tg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!an()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await yl(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(d.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:f}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&m.type==="totp"&&(!((s=m==null?void 0:m.totp)===null||s===void 0)&&s.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?YL(e.webauthn.credential_response):qL(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:m}=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:WL(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:GL(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ze(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gp(n.access_token);let l=null;i.aal&&(l=i.aal);let d=l;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(x=>x.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?{data:null,error:s}:n?await qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new Is}})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return{data:null,error:i};if(!s)return{data:null,error:new Is};const l=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&an()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return{data:null,error:i};if(!s)return{data:null,error:new Is};const l=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&an()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(d=>d.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+rL>s)return n;const{data:i,error:l}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};n=b.session.access_token}const{header:s,payload:i,signature:l,raw:{header:d,payload:m}}=gp(n);r!=null&&r.allowExpired||EL(i.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:i,header:s,signature:l},error:null}}const x=SL(s.alg),y=await crypto.subtle.importKey("jwk",f,x,!0,["verify"]);if(!await crypto.subtle.verify(x,y,l,dL(`${d}.${m}`)))throw new sg("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}fd.nextInstanceID=0;const n7=fd;class s7 extends n7{constructor(e){super(e)}}class i7{constructor(e,r,n){var s,i,l;this.supabaseUrl=e,this.supabaseKey=r;const d=QD(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const m=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:HD,realtime:WD,auth:Object.assign(Object.assign({},$D),{storageKey:m}),global:VD},x=KD(n??{},f);this.storageKey=(s=x.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=x.global.headers)!==null&&i!==void 0?i:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=x.auth)!==null&&l!==void 0?l:{},this.headers,x.global.fetch),this.fetch=qD(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new Z5(new URL("rest/v1",d).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new FD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new $5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:d,lock:m,debug:f},x,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s7({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),x),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:d,lock:m,debug:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new pD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const o7=(t,e,r)=>new i7(t,e,r);function a7(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}a7()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const l7="https://mtwburwdescvdngmzcmu.supabase.co",c7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10d2J1cndkZXNjdmRuZ216Y211Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM2MzMsImV4cCI6MjA3NzY4OTYzM30.9Ez2Dg9DdMaqNJy960B5V4U8H8uvz5RS5KyVsSHIZ2c",ue=o7(l7,c7,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),G2=Object.freeze(Object.defineProperty({__proto__:null,supabase:ue},Symbol.toStringTag,{value:"Module"})),sA=E.createContext(void 0),u7=({children:t})=>{const[e,r]=E.useState(null),[n,s]=E.useState(null),[i,l]=E.useState(null),[d,m]=E.useState(!0);E.useEffect(()=>{const{data:{subscription:b}}=ue.auth.onAuthStateChange((S,_)=>{s(_),r((_==null?void 0:_.user)??null),_!=null&&_.user?setTimeout(()=>{f(_.user.id)},0):l(null)});return ue.auth.getSession().then(({data:{session:S}})=>{s(S),r((S==null?void 0:S.user)??null),S!=null&&S.user?f(S.user.id).then(()=>m(!1)):m(!1)}),()=>b.unsubscribe()},[]);const f=async b=>{const{data:S,error:_}=await ue.from("user_roles").select("role").eq("user_id",b).single();l(!_&&S?S.role:"customer")},x=async(b,S,_,I)=>{const R=`${window.location.origin}/home`,{error:N}=await ue.auth.signUp({email:b,password:S,options:{emailRedirectTo:R,data:{full_name:_,phone:I}}});return{error:N}},y=async(b,S)=>{const{error:_}=await ue.auth.signInWithPassword({email:b,password:S});return{error:_}},v=async()=>{await ue.auth.signOut()};return u.jsx(sA.Provider,{value:{user:e,session:n,userRole:i,signUp:x,signIn:y,signOut:v,loading:d},children:t})},Gr=()=>{const t=E.useContext(sA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},d7=R0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=E.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const l=n?aj:"button";return u.jsx(l,{className:Ie(d7({variant:e,size:r,className:t})),ref:i,...s})});Te.displayName="Button";function Oi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Kn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ec={duration:.5,overwrite:!1,delay:0},xy,$r,Wt,fs=1e8,Ot=1/fs,ig=Math.PI*2,h7=ig/4,f7=0,oA=Math.sqrt,m7=Math.cos,p7=Math.sin,Pr=function(e){return typeof e=="string"},dr=function(e){return typeof e=="function"},Yi=function(e){return typeof e=="number"},yy=function(e){return typeof e>"u"},vi=function(e){return typeof e=="object"},In=function(e){return e!==!1},wy=function(){return typeof window<"u"},Mh=function(e){return dr(e)||Pr(e)},aA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},tn=Array.isArray,og=/(?:-?\.?\d|\.)+/gi,lA=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,zl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,cA=/[+-]=-?[.\d]+/,uA=/[^,'"\[\]\s]+/gi,g7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Xt,oi,ag,vy,Zn={},Yf={},dA,hA=function(e){return(Yf=Sc(e,Zn))&&Mn},by=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},md=function(e,r){return!r&&console.warn(e)},fA=function(e,r){return e&&(Zn[e]=r)&&Yf&&(Yf[e]=r)||Zn},pd=function(){return 0},x7={suppressEvents:!0,isStart:!0,kill:!1},rf={suppressEvents:!0,kill:!1},y7={suppressEvents:!0},_y={},Do=[],lg={},mA,Bn={},vp={},Y2=30,nf=[],Cy="",Ey=function(e){var r=e[0],n,s;if(vi(r)||dr(r)||(e=[e]),!(n=(r._gsap||{}).harness)){for(s=nf.length;s--&&!nf[s].targetTest(r););n=nf[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new BA(e[s],n)))||e.splice(s,1);return e},ka=function(e){return e._gsap||Ey(ms(e))[0]._gsap},pA=function(e,r,n){return(n=e[r])&&dr(n)?e[r]():yy(n)&&e.getAttribute&&e.getAttribute(r)||n},Rn=function(e,r){return(e=e.split(",")).forEach(r)||e},fr=function(e){return Math.round(e*1e5)/1e5||0},wr=function(e){return Math.round(e*1e7)/1e7||0},ec=function(e,r){var n=r.charAt(0),s=parseFloat(r.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},w7=function(e,r){for(var n=r.length,s=0;e.indexOf(r[s])<0&&++s<n;);return s<n},qf=function(){var e=Do.length,r=Do.slice(0),n,s;for(lg={},Do.length=0,n=0;n<e;n++)s=r[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Sy=function(e){return!!(e._initted||e._startAt||e.add)},gA=function(e,r,n,s){Do.length&&!$r&&qf(),e.render(r,n,!!($r&&r<0&&Sy(e))),Do.length&&!$r&&qf()},xA=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(uA).length<2?r:Pr(e)?e.trim():e},yA=function(e){return e},Jn=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e},v7=function(e){return function(r,n){for(var s in n)s in r||s==="duration"&&e||s==="ease"||(r[s]=n[s])}},Sc=function(e,r){for(var n in r)e[n]=r[n];return e},q2=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=vi(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},Xf=function(e,r){var n={},s;for(s in e)s in r||(n[s]=e[s]);return n},Lu=function(e){var r=e.parent||Xt,n=e.keyframes?v7(tn(e.keyframes)):Jn;if(In(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},b7=function(e,r){for(var n=e.length,s=n===r.length;s&&n--&&e[n]===r[n];);return n<0},wA=function(e,r,n,s,i){var l=e[s],d;if(i)for(d=r[i];l&&l[i]>d;)l=l._prev;return l?(r._next=l._next,l._next=r):(r._next=e[n],e[n]=r),r._next?r._next._prev=r:e[s]=r,r._prev=l,r.parent=r._dp=e,r},W0=function(e,r,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var i=r._prev,l=r._next;i?i._next=l:e[n]===r&&(e[n]=l),l?l._prev=i:e[s]===r&&(e[s]=i),r._next=r._prev=r.parent=null},$o=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Pa=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},_7=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},cg=function(e,r,n,s){return e._startAt&&($r?e._startAt.revert(rf):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(r,!0,s))},C7=function t(e){return!e||e._ts&&t(e.parent)},X2=function(e){return e._repeat?Nc(e._tTime,e=e.duration()+e._rDelay)*e:0},Nc=function(e,r){var n=Math.floor(e=wr(e/r));return e&&n===e?n-1:n},Kf=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},G0=function(e){return e._end=wr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ot)||0))},Y0=function(e,r){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=wr(n._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),G0(e),n._dirty||Pa(n,e)),e},vA=function(e,r){var n;if((r._time||!r._dur&&r._initted||r._start<e._time&&(r._dur||!r.add))&&(n=Kf(e.rawTime(),r),(!r._dur||Ld(0,r.totalDuration(),n)-r._tTime>Ot)&&r.render(n,!0)),Pa(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Ot}},di=function(e,r,n,s){return r.parent&&$o(r),r._start=wr((Yi(n)?n:n||e!==Xt?as(e,n,r):e._time)+r._delay),r._end=wr(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),wA(e,r,"_first","_last",e._sort?"_start":0),ug(r)||(e._recent=r),s||vA(e,r),e._ts<0&&Y0(e,e._tTime),e},bA=function(e,r){return(Zn.ScrollTrigger||by("scrollTrigger",r))&&Zn.ScrollTrigger.create(r,e)},_A=function(e,r,n,s,i){if(Ay(e,r,i),!e._initted)return 1;if(!n&&e._pt&&!$r&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&mA!==Vn.frame)return Do.push(e),e._lazy=[i,s],1},E7=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},ug=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},S7=function(e,r,n,s){var i=e.ratio,l=r<0||!r&&(!e._start&&E7(e)&&!(!e._initted&&ug(e))||(e._ts<0||e._dp._ts<0)&&!ug(e))?0:1,d=e._rDelay,m=0,f,x,y;if(d&&e._repeat&&(m=Ld(0,e._tDur,r),x=Nc(m,d),e._yoyo&&x&1&&(l=1-l),x!==Nc(e._tTime,d)&&(i=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==i||$r||s||e._zTime===Ot||!r&&e._zTime){if(!e._initted&&_A(e,r,s,n,m))return;for(y=e._zTime,e._zTime=r||(n?Ot:0),n||(n=r&&!y),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=m,f=e._pt;f;)f.r(l,f.d),f=f._next;r<0&&cg(e,r,n,!0),e._onUpdate&&!n&&Wn(e,"onUpdate"),m&&e._repeat&&!n&&e.parent&&Wn(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===l&&(l&&$o(e,1),!n&&!$r&&(Wn(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},N7=function(e,r,n){var s;if(n>r)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>r)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<r)return s;s=s._prev}},Ac=function(e,r,n,s){var i=e._repeat,l=wr(r)||0,d=e._tTime/e._tDur;return d&&!s&&(e._time*=l/e._dur),e._dur=l,e._tDur=i?i<0?1e10:wr(l*(i+1)+e._rDelay*i):l,d>0&&!s&&Y0(e,e._tTime=e._tDur*d),e.parent&&G0(e),n||Pa(e.parent,e),e},K2=function(e){return e instanceof hn?Pa(e):Ac(e,e._dur)},A7={_start:0,endTime:pd,totalDuration:pd},as=function t(e,r,n){var s=e.labels,i=e._recent||A7,l=e.duration()>=fs?i.endTime(!1):e._dur,d,m,f;return Pr(r)&&(isNaN(r)||r in s)?(m=r.charAt(0),f=r.substr(-1)==="%",d=r.indexOf("="),m==="<"||m===">"?(d>=0&&(r=r.replace(/=/,"")),(m==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(r.substr(1))||0)*(f?(d<0?i:n).totalDuration()/100:1)):d<0?(r in s||(s[r]=l),s[r]):(m=parseFloat(r.charAt(d-1)+r.substr(d+1)),f&&n&&(m=m/100*(tn(n)?n[0]:n).totalDuration()),d>1?t(e,r.substr(0,d-1),n)+m:l+m)):r==null?l:+r},Bu=function(e,r,n){var s=Yi(r[1]),i=(s?2:1)+(e<2?0:1),l=r[i],d,m;if(s&&(l.duration=r[1]),l.parent=n,e){for(d=l,m=n;m&&!("immediateRender"in d);)d=m.vars.defaults||{},m=In(m.vars.inherit)&&m.parent;l.immediateRender=In(d.immediateRender),e<2?l.runBackwards=1:l.startAt=r[i-1]}return new yr(r[0],l,r[i+1])},Jo=function(e,r){return e||e===0?r(e):r},Ld=function(e,r,n){return n<e?e:n>r?r:n},en=function(e,r){return!Pr(e)||!(r=g7.exec(e))?"":r[1]},T7=function(e,r,n){return Jo(n,function(s){return Ld(e,r,s)})},dg=[].slice,CA=function(e,r){return e&&vi(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&vi(e[0]))&&!e.nodeType&&e!==oi},I7=function(e,r,n){return n===void 0&&(n=[]),e.forEach(function(s){var i;return Pr(s)&&!r||CA(s,1)?(i=n).push.apply(i,ms(s)):n.push(s)})||n},ms=function(e,r,n){return Wt&&!r&&Wt.selector?Wt.selector(e):Pr(e)&&!n&&(ag||!Tc())?dg.call((r||vy).querySelectorAll(e),0):tn(e)?I7(e,n):CA(e)?dg.call(e,0):e?[e]:[]},hg=function(e){return e=ms(e)[0]||md("Invalid scope")||{},function(r){var n=e.current||e.nativeElement||e;return ms(r,n.querySelectorAll?n:n===e?md("Invalid scope")||vy.createElement("div"):e)}},EA=function(e){return e.sort(function(){return .5-Math.random()})},SA=function(e){if(dr(e))return e;var r=vi(e)?e:{each:e},n=Da(r.ease),s=r.from||0,i=parseFloat(r.base)||0,l={},d=s>0&&s<1,m=isNaN(s)||d,f=r.axis,x=s,y=s;return Pr(s)?x=y={center:.5,edges:.5,end:1}[s]||0:!d&&m&&(x=s[0],y=s[1]),function(v,b,S){var _=(S||r).length,I=l[_],R,N,A,O,k,F,B,P,M;if(!I){if(M=r.grid==="auto"?0:(r.grid||[1,fs])[1],!M){for(B=-fs;B<(B=S[M++].getBoundingClientRect().left)&&M<_;);M<_&&M--}for(I=l[_]=[],R=m?Math.min(M,_)*x-.5:s%M,N=M===fs?0:m?_*y/M-.5:s/M|0,B=0,P=fs,F=0;F<_;F++)A=F%M-R,O=N-(F/M|0),I[F]=k=f?Math.abs(f==="y"?O:A):oA(A*A+O*O),k>B&&(B=k),k<P&&(P=k);s==="random"&&EA(I),I.max=B-P,I.min=P,I.v=_=(parseFloat(r.amount)||parseFloat(r.each)*(M>_?_-1:f?f==="y"?_/M:M:Math.max(M,_/M))||0)*(s==="edges"?-1:1),I.b=_<0?i-_:i,I.u=en(r.amount||r.each)||0,n=n&&_<0?PA(n):n}return _=(I[v]-I.min)/I.max||0,wr(I.b+(n?n(_):_)*I.v)+I.u}},fg=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=wr(Math.round(parseFloat(n)/e)*e*r);return(s-s%1)/r+(Yi(n)?0:en(n))}},NA=function(e,r){var n=tn(e),s,i;return!n&&vi(e)&&(s=n=e.radius||fs,e.values?(e=ms(e.values),(i=!Yi(e[0]))&&(s*=s)):e=fg(e.increment)),Jo(r,n?dr(e)?function(l){return i=e(l),Math.abs(i-l)<=s?i:l}:function(l){for(var d=parseFloat(i?l.x:l),m=parseFloat(i?l.y:0),f=fs,x=0,y=e.length,v,b;y--;)i?(v=e[y].x-d,b=e[y].y-m,v=v*v+b*b):v=Math.abs(e[y]-d),v<f&&(f=v,x=y);return x=!s||f<=s?e[x]:l,i||x===l||Yi(l)?x:x+en(l)}:fg(e))},AA=function(e,r,n,s){return Jo(tn(e)?!r:n===!0?!!(n=0):!s,function(){return tn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(r-e+n*.99))/n)*n*s)/s})},R7=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(s){return r.reduce(function(i,l){return l(i)},s)}},O7=function(e,r){return function(n){return e(parseFloat(n))+(r||en(n))}},j7=function(e,r,n){return IA(e,r,0,1,n)},TA=function(e,r,n){return Jo(n,function(s){return e[~~r(s)]})},M7=function t(e,r,n){var s=r-e;return tn(e)?TA(e,t(0,e.length),r):Jo(n,function(i){return(s+(i-e)%s)%s+e})},k7=function t(e,r,n){var s=r-e,i=s*2;return tn(e)?TA(e,t(0,e.length-1),r):Jo(n,function(l){return l=(i+(l-e)%i)%i||0,e+(l>s?i-l:l)})},gd=function(e){for(var r=0,n="",s,i,l,d;~(s=e.indexOf("random(",r));)l=e.indexOf(")",s),d=e.charAt(s+7)==="[",i=e.substr(s+7,l-s-7).match(d?uA:og),n+=e.substr(r,s-r)+AA(d?i:+i[0],d?0:+i[1],+i[2]||1e-5),r=l+1;return n+e.substr(r,e.length-r)},IA=function(e,r,n,s,i){var l=r-e,d=s-n;return Jo(i,function(m){return n+((m-e)/l*d||0)})},P7=function t(e,r,n,s){var i=isNaN(e+r)?0:function(b){return(1-b)*e+b*r};if(!i){var l=Pr(e),d={},m,f,x,y,v;if(n===!0&&(s=1)&&(n=null),l)e={p:e},r={p:r};else if(tn(e)&&!tn(r)){for(x=[],y=e.length,v=y-2,f=1;f<y;f++)x.push(t(e[f-1],e[f]));y--,i=function(S){S*=y;var _=Math.min(v,~~S);return x[_](S-_)},n=r}else s||(e=Sc(tn(e)?[]:{},e));if(!x){for(m in r)Ny.call(d,e,m,"get",r[m]);i=function(S){return Ry(S,d)||(l?e.p:e)}}}return Jo(n,i)},Q2=function(e,r,n){var s=e.labels,i=fs,l,d,m;for(l in s)d=s[l]-r,d<0==!!n&&d&&i>(d=Math.abs(d))&&(m=l,i=d);return m},Wn=function(e,r,n){var s=e.vars,i=s[r],l=Wt,d=e._ctx,m,f,x;if(i)return m=s[r+"Params"],f=s.callbackScope||e,n&&Do.length&&qf(),d&&(Wt=d),x=m?i.apply(f,m):i.call(f),Wt=l,x},vu=function(e){return $o(e),e.scrollTrigger&&e.scrollTrigger.kill(!!$r),e.progress()<1&&Wn(e,"onInterrupt"),e},Vl,RA=[],OA=function(e){if(e)if(e=!e.name&&e.default||e,wy()||e.headless){var r=e.name,n=dr(e),s=r&&!n&&e.init?function(){this._props=[]}:e,i={init:pd,render:Ry,add:Ny,kill:Q7,modifier:K7,rawVars:0},l={targetTest:0,get:0,getSetter:Iy,aliases:{},register:0};if(Tc(),e!==s){if(Bn[r])return;Jn(s,Jn(Xf(e,i),l)),Sc(s.prototype,Sc(i,Xf(e,l))),Bn[s.prop=r]=s,e.targetTest&&(nf.push(s),_y[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}fA(r,s),e.register&&e.register(Mn,s,On)}else RA.push(e)},Rt=255,bu={aqua:[0,Rt,Rt],lime:[0,Rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rt],navy:[0,0,128],white:[Rt,Rt,Rt],olive:[128,128,0],yellow:[Rt,Rt,0],orange:[Rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rt,0,0],pink:[Rt,192,203],cyan:[0,Rt,Rt],transparent:[Rt,Rt,Rt,0]},bp=function(e,r,n){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(n-r)*e*6:e<.5?n:e*3<2?r+(n-r)*(2/3-e)*6:r)*Rt+.5|0},jA=function(e,r,n){var s=e?Yi(e)?[e>>16,e>>8&Rt,e&Rt]:0:bu.black,i,l,d,m,f,x,y,v,b,S;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),bu[e])s=bu[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),l=e.charAt(2),d=e.charAt(3),e="#"+i+i+l+l+d+d+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Rt,s&Rt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Rt,e&Rt]}else if(e.substr(0,3)==="hsl"){if(s=S=e.match(og),!r)m=+s[0]%360/360,f=+s[1]/100,x=+s[2]/100,l=x<=.5?x*(f+1):x+f-x*f,i=x*2-l,s.length>3&&(s[3]*=1),s[0]=bp(m+1/3,i,l),s[1]=bp(m,i,l),s[2]=bp(m-1/3,i,l);else if(~e.indexOf("="))return s=e.match(lA),n&&s.length<4&&(s[3]=1),s}else s=e.match(og)||bu.transparent;s=s.map(Number)}return r&&!S&&(i=s[0]/Rt,l=s[1]/Rt,d=s[2]/Rt,y=Math.max(i,l,d),v=Math.min(i,l,d),x=(y+v)/2,y===v?m=f=0:(b=y-v,f=x>.5?b/(2-y-v):b/(y+v),m=y===i?(l-d)/b+(l<d?6:0):y===l?(d-i)/b+2:(i-l)/b+4,m*=60),s[0]=~~(m+.5),s[1]=~~(f*100+.5),s[2]=~~(x*100+.5)),n&&s.length<4&&(s[3]=1),s},MA=function(e){var r=[],n=[],s=-1;return e.split(Lo).forEach(function(i){var l=i.match(zl)||[];r.push.apply(r,l),n.push(s+=l.length+1)}),r.c=n,r},Z2=function(e,r,n){var s="",i=(e+s).match(Lo),l=r?"hsla(":"rgba(",d=0,m,f,x,y;if(!i)return e;if(i=i.map(function(v){return(v=jA(v,r,1))&&l+(r?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(x=MA(e),m=n.c,m.join(s)!==x.c.join(s)))for(f=e.replace(Lo,"1").split(zl),y=f.length-1;d<y;d++)s+=f[d]+(~m.indexOf(d)?i.shift()||l+"0,0,0,0)":(x.length?x:i.length?i:n).shift());if(!f)for(f=e.split(Lo),y=f.length-1;d<y;d++)s+=f[d]+i[d];return s+f[y]},Lo=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in bu)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),D7=/hsl[a]?\(/,kA=function(e){var r=e.join(" "),n;if(Lo.lastIndex=0,Lo.test(r))return n=D7.test(r),e[1]=Z2(e[1],n),e[0]=Z2(e[0],n,MA(e[1])),!0},xd,Vn=function(){var t=Date.now,e=500,r=33,n=t(),s=n,i=1e3/240,l=i,d=[],m,f,x,y,v,b,S=function _(I){var R=t()-s,N=I===!0,A,O,k,F;if((R>e||R<0)&&(n+=R-r),s+=R,k=s-n,A=k-l,(A>0||N)&&(F=++y.frame,v=k-y.time*1e3,y.time=k=k/1e3,l+=A+(A>=i?4:i-A),O=1),N||(m=f(_)),O)for(b=0;b<d.length;b++)d[b](k,v,F,I)};return y={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(I){return v/(1e3/(I||60))},wake:function(){dA&&(!ag&&wy()&&(oi=ag=window,vy=oi.document||{},Zn.gsap=Mn,(oi.gsapVersions||(oi.gsapVersions=[])).push(Mn.version),hA(Yf||oi.GreenSockGlobals||!oi.gsap&&oi||{}),RA.forEach(OA)),x=typeof requestAnimationFrame<"u"&&requestAnimationFrame,m&&y.sleep(),f=x||function(I){return setTimeout(I,l-y.time*1e3+1|0)},xd=1,S(2))},sleep:function(){(x?cancelAnimationFrame:clearTimeout)(m),xd=0,f=pd},lagSmoothing:function(I,R){e=I||1/0,r=Math.min(R||33,e)},fps:function(I){i=1e3/(I||240),l=y.time*1e3+i},add:function(I,R,N){var A=R?function(O,k,F,B){I(O,k,F,B),y.remove(A)}:I;return y.remove(I),d[N?"unshift":"push"](A),Tc(),A},remove:function(I,R){~(R=d.indexOf(I))&&d.splice(R,1)&&b>=R&&b--},_listeners:d},y}(),Tc=function(){return!xd&&Vn.wake()},dt={},L7=/^[\d.\-M][\d.\-,\s]/,B7=/["']/g,F7=function(e){for(var r={},n=e.substr(1,e.length-3).split(":"),s=n[0],i=1,l=n.length,d,m,f;i<l;i++)m=n[i],d=i!==l-1?m.lastIndexOf(","):m.length,f=m.substr(0,d),r[s]=isNaN(f)?f.replace(B7,"").trim():+f,s=m.substr(d+1).trim();return r},U7=function(e){var r=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",r);return e.substring(r,~s&&s<n?e.indexOf(")",n+1):n)},z7=function(e){var r=(e+"").split("("),n=dt[r[0]];return n&&r.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[F7(r[1])]:U7(e).split(",").map(xA)):dt._CE&&L7.test(e)?dt._CE("",e):n},PA=function(e){return function(r){return 1-e(1-r)}},DA=function t(e,r){for(var n=e._first,s;n;)n instanceof hn?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=r)),n=n._next},Da=function(e,r){return e&&(dr(e)?e:dt[e]||z7(e))||r},nl=function(e,r,n,s){n===void 0&&(n=function(m){return 1-r(1-m)}),s===void 0&&(s=function(m){return m<.5?r(m*2)/2:1-r((1-m)*2)/2});var i={easeIn:r,easeOut:n,easeInOut:s},l;return Rn(e,function(d){dt[d]=Zn[d]=i,dt[l=d.toLowerCase()]=n;for(var m in i)dt[l+(m==="easeIn"?".in":m==="easeOut"?".out":".inOut")]=dt[d+"."+m]=i[m]}),i},LA=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},_p=function t(e,r,n){var s=r>=1?r:1,i=(n||(e?.3:.45))/(r<1?r:1),l=i/ig*(Math.asin(1/s)||0),d=function(x){return x===1?1:s*Math.pow(2,-10*x)*p7((x-l)*i)+1},m=e==="out"?d:e==="in"?function(f){return 1-d(1-f)}:LA(d);return i=ig/i,m.config=function(f,x){return t(e,f,x)},m},Cp=function t(e,r){r===void 0&&(r=1.70158);var n=function(l){return l?--l*l*((r+1)*l+r)+1:0},s=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:LA(n);return s.config=function(i){return t(e,i)},s};Rn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;nl(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});dt.Linear.easeNone=dt.none=dt.Linear.easeIn;nl("Elastic",_p("in"),_p("out"),_p());(function(t,e){var r=1/e,n=2*r,s=2.5*r,i=function(d){return d<r?t*d*d:d<n?t*Math.pow(d-1.5/e,2)+.75:d<s?t*(d-=2.25/e)*d+.9375:t*Math.pow(d-2.625/e,2)+.984375};nl("Bounce",function(l){return 1-i(1-l)},i)})(7.5625,2.75);nl("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});nl("Circ",function(t){return-(oA(1-t*t)-1)});nl("Sine",function(t){return t===1?1:-m7(t*h7)+1});nl("Back",Cp("in"),Cp("out"),Cp());dt.SteppedEase=dt.steps=Zn.SteppedEase={config:function(e,r){e===void 0&&(e=1);var n=1/e,s=e+(r?0:1),i=r?1:0,l=1-Ot;return function(d){return((s*Ld(0,l,d)|0)+i)*n}}};Ec.ease=dt["quad.out"];Rn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Cy+=t+","+t+"Params,"});var BA=function(e,r){this.id=f7++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:pA,this.set=r?r.getSetter:Iy},yd=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Ac(this,+r.duration,1,1),this.data=r.data,Wt&&(this._ctx=Wt,Wt.data.push(this)),xd||Vn.wake()}var e=t.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Ac(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(Tc(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Y0(this,n),!i._dp||i.parent||vA(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&di(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Ot||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),gA(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+X2(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+X2(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,s):this._repeat?Nc(this._tTime,i)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Ot?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Kf(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ot?0:this._rts,this.totalTime(Ld(-Math.abs(this._delay),this.totalDuration(),i),s!==!1),G0(this),_7(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Tc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ot&&(this._tTime-=Ot)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&di(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(In(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kf(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=y7);var s=$r;return $r=n,Sy(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),$r=s,this},e.globalTime=function(n){for(var s=this,i=arguments.length?n:s.rawTime();s;)i=s._start+i/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,K2(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,K2(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(as(this,n),In(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,In(s)),this._dur||(this._zTime=-Ot),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ot:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ot,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=s&&i<this.endTime(!0)-Ot)},e.eventCallback=function(n,s,i){var l=this.vars;return arguments.length>1?(s?(l[n]=s,i&&(l[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=s)):delete l[n],this):l[n]},e.then=function(n){var s=this;return new Promise(function(i){var l=dr(n)?n:yA,d=function(){var f=s.then;s.then=null,dr(l)&&(l=l(s))&&(l.then||l===s)&&(s.then=f),i(l),s.then=f};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?d():s._prom=d})},e.kill=function(){vu(this)},t}();Jn(yd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ot,_prom:0,_ps:!1,_rts:1});var hn=function(t){iA(e,t);function e(n,s){var i;return n===void 0&&(n={}),i=t.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=In(n.sortChildren),Xt&&di(n.parent||Xt,Oi(i),s),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&bA(Oi(i),n.scrollTrigger),i}var r=e.prototype;return r.to=function(s,i,l){return Bu(0,arguments,this),this},r.from=function(s,i,l){return Bu(1,arguments,this),this},r.fromTo=function(s,i,l,d){return Bu(2,arguments,this),this},r.set=function(s,i,l){return i.duration=0,i.parent=this,Lu(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new yr(s,i,as(this,l),1),this},r.call=function(s,i,l){return di(this,yr.delayedCall(0,s,i),l)},r.staggerTo=function(s,i,l,d,m,f,x){return l.duration=i,l.stagger=l.stagger||d,l.onComplete=f,l.onCompleteParams=x,l.parent=this,new yr(s,l,as(this,m)),this},r.staggerFrom=function(s,i,l,d,m,f,x){return l.runBackwards=1,Lu(l).immediateRender=In(l.immediateRender),this.staggerTo(s,i,l,d,m,f,x)},r.staggerFromTo=function(s,i,l,d,m,f,x,y){return d.startAt=l,Lu(d).immediateRender=In(d.immediateRender),this.staggerTo(s,i,d,m,f,x,y)},r.render=function(s,i,l){var d=this._time,m=this._dirty?this.totalDuration():this._tDur,f=this._dur,x=s<=0?0:wr(s),y=this._zTime<0!=s<0&&(this._initted||!f),v,b,S,_,I,R,N,A,O,k,F,B;if(this!==Xt&&x>m&&s>=0&&(x=m),x!==this._tTime||l||y){if(d!==this._time&&f&&(x+=this._time-d,s+=this._time-d),v=x,O=this._start,A=this._ts,R=!A,y&&(f||(d=this._zTime),(s||!i)&&(this._zTime=s)),this._repeat){if(F=this._yoyo,I=f+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(I*100+s,i,l);if(v=wr(x%I),x===m?(_=this._repeat,v=f):(k=wr(x/I),_=~~k,_&&_===k&&(v=f,_--),v>f&&(v=f)),k=Nc(this._tTime,I),!d&&this._tTime&&k!==_&&this._tTime-k*I-this._dur<=0&&(k=_),F&&_&1&&(v=f-v,B=1),_!==k&&!this._lock){var P=F&&k&1,M=P===(F&&_&1);if(_<k&&(P=!P),d=P?0:x%f?f:x,this._lock=1,this.render(d||(B?0:wr(_*I)),i,!f)._lock=0,this._tTime=x,!i&&this.parent&&Wn(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1),d&&d!==this._time||R!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,m=this._tDur,M&&(this._lock=2,d=P?f:-1e-4,this.render(d,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!R)return this;DA(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(N=N7(this,wr(d),wr(v)),N&&(x-=v-(v=N._start))),this._tTime=x,this._time=v,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,d=0),!d&&x&&!i&&!k&&(Wn(this,"onStart"),this._tTime!==x))return this;if(v>=d&&s>=0)for(b=this._first;b;){if(S=b._next,(b._act||v>=b._start)&&b._ts&&N!==b){if(b.parent!==this)return this.render(s,i,l);if(b.render(b._ts>0?(v-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(v-b._start)*b._ts,i,l),v!==this._time||!this._ts&&!R){N=0,S&&(x+=this._zTime=-Ot);break}}b=S}else{b=this._last;for(var $=s<0?s:v;b;){if(S=b._prev,(b._act||$<=b._end)&&b._ts&&N!==b){if(b.parent!==this)return this.render(s,i,l);if(b.render(b._ts>0?($-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+($-b._start)*b._ts,i,l||$r&&Sy(b)),v!==this._time||!this._ts&&!R){N=0,S&&(x+=this._zTime=$?-Ot:Ot);break}}b=S}}if(N&&!i&&(this.pause(),N.render(v>=d?0:-Ot)._zTime=v>=d?1:-1,this._ts))return this._start=O,G0(this),this.render(s,i,l);this._onUpdate&&!i&&Wn(this,"onUpdate",!0),(x===m&&this._tTime>=this.totalDuration()||!x&&d)&&(O===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((s||!f)&&(x===m&&this._ts>0||!x&&this._ts<0)&&$o(this,1),!i&&!(s<0&&!d)&&(x||d||!m)&&(Wn(this,x===m&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(x<m&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(s,i){var l=this;if(Yi(i)||(i=as(this,i,s)),!(s instanceof yd)){if(tn(s))return s.forEach(function(d){return l.add(d,i)}),this;if(Pr(s))return this.addLabel(s,i);if(dr(s))s=yr.delayedCall(0,s);else return this}return this!==s?di(this,s,i):this},r.getChildren=function(s,i,l,d){s===void 0&&(s=!0),i===void 0&&(i=!0),l===void 0&&(l=!0),d===void 0&&(d=-fs);for(var m=[],f=this._first;f;)f._start>=d&&(f instanceof yr?i&&m.push(f):(l&&m.push(f),s&&m.push.apply(m,f.getChildren(!0,i,l)))),f=f._next;return m},r.getById=function(s){for(var i=this.getChildren(1,1,1),l=i.length;l--;)if(i[l].vars.id===s)return i[l]},r.remove=function(s){return Pr(s)?this.removeLabel(s):dr(s)?this.killTweensOf(s):(s.parent===this&&W0(this,s),s===this._recent&&(this._recent=this._last),Pa(this))},r.totalTime=function(s,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=wr(Vn.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),t.prototype.totalTime.call(this,s,i),this._forcing=0,this):this._tTime},r.addLabel=function(s,i){return this.labels[s]=as(this,i),this},r.removeLabel=function(s){return delete this.labels[s],this},r.addPause=function(s,i,l){var d=yr.delayedCall(0,i||pd,l);return d.data="isPause",this._hasPause=1,di(this,d,as(this,s))},r.removePause=function(s){var i=this._first;for(s=as(this,s);i;)i._start===s&&i.data==="isPause"&&$o(i),i=i._next},r.killTweensOf=function(s,i,l){for(var d=this.getTweensOf(s,l),m=d.length;m--;)Co!==d[m]&&d[m].kill(s,i);return this},r.getTweensOf=function(s,i){for(var l=[],d=ms(s),m=this._first,f=Yi(i),x;m;)m instanceof yr?w7(m._targets,d)&&(f?(!Co||m._initted&&m._ts)&&m.globalTime(0)<=i&&m.globalTime(m.totalDuration())>i:!i||m.isActive())&&l.push(m):(x=m.getTweensOf(d,i)).length&&l.push.apply(l,x),m=m._next;return l},r.tweenTo=function(s,i){i=i||{};var l=this,d=as(l,s),m=i,f=m.startAt,x=m.onStart,y=m.onStartParams,v=m.immediateRender,b,S=yr.to(l,Jn({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:d,overwrite:"auto",duration:i.duration||Math.abs((d-(f&&"time"in f?f.time:l._time))/l.timeScale())||Ot,onStart:function(){if(l.pause(),!b){var I=i.duration||Math.abs((d-(f&&"time"in f?f.time:l._time))/l.timeScale());S._dur!==I&&Ac(S,I,0,1).render(S._time,!0,!0),b=1}x&&x.apply(S,y||[])}},i));return v?S.render(0):S},r.tweenFromTo=function(s,i,l){return this.tweenTo(i,Jn({startAt:{time:as(this,s)}},l))},r.recent=function(){return this._recent},r.nextLabel=function(s){return s===void 0&&(s=this._time),Q2(this,as(this,s))},r.previousLabel=function(s){return s===void 0&&(s=this._time),Q2(this,as(this,s),1)},r.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Ot)},r.shiftChildren=function(s,i,l){l===void 0&&(l=0);for(var d=this._first,m=this.labels,f;d;)d._start>=l&&(d._start+=s,d._end+=s),d=d._next;if(i)for(f in m)m[f]>=l&&(m[f]+=s);return Pa(this)},r.invalidate=function(s){var i=this._first;for(this._lock=0;i;)i.invalidate(s),i=i._next;return t.prototype.invalidate.call(this,s)},r.clear=function(s){s===void 0&&(s=!0);for(var i=this._first,l;i;)l=i._next,this.remove(i),i=l;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Pa(this)},r.totalDuration=function(s){var i=0,l=this,d=l._last,m=fs,f,x,y;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-s:s));if(l._dirty){for(y=l.parent;d;)f=d._prev,d._dirty&&d.totalDuration(),x=d._start,x>m&&l._sort&&d._ts&&!l._lock?(l._lock=1,di(l,d,x-d._delay,1)._lock=0):m=x,x<0&&d._ts&&(i-=x,(!y&&!l._dp||y&&y.smoothChildTiming)&&(l._start+=x/l._ts,l._time-=x,l._tTime-=x),l.shiftChildren(-x,!1,-1/0),m=0),d._end>i&&d._ts&&(i=d._end),d=f;Ac(l,l===Xt&&l._time>i?l._time:i,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(s){if(Xt._ts&&(gA(Xt,Kf(s,Xt)),mA=Vn.frame),Vn.frame>=Y2){Y2+=Kn.autoSleep||120;var i=Xt._first;if((!i||!i._ts)&&Kn.autoSleep&&Vn._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Vn.sleep()}}},e}(yd);Jn(hn.prototype,{_lock:0,_hasPause:0,_forcing:0});var V7=function(e,r,n,s,i,l,d){var m=new On(this._pt,e,r,0,1,$A,null,i),f=0,x=0,y,v,b,S,_,I,R,N;for(m.b=n,m.e=s,n+="",s+="",(R=~s.indexOf("random("))&&(s=gd(s)),l&&(N=[n,s],l(N,e,r),n=N[0],s=N[1]),v=n.match(wp)||[];y=wp.exec(s);)S=y[0],_=s.substring(f,y.index),b?b=(b+1)%5:_.substr(-5)==="rgba("&&(b=1),S!==v[x++]&&(I=parseFloat(v[x-1])||0,m._pt={_next:m._pt,p:_||x===1?_:",",s:I,c:S.charAt(1)==="="?ec(I,S)-I:parseFloat(S)-I,m:b&&b<4?Math.round:0},f=wp.lastIndex);return m.c=f<s.length?s.substring(f,s.length):"",m.fp=d,(cA.test(s)||R)&&(m.e=0),this._pt=m,m},Ny=function(e,r,n,s,i,l,d,m,f,x){dr(s)&&(s=s(i||0,e,l));var y=e[r],v=n!=="get"?n:dr(y)?f?e[r.indexOf("set")||!dr(e["get"+r.substr(3)])?r:"get"+r.substr(3)](f):e[r]():y,b=dr(y)?f?Y7:VA:Ty,S;if(Pr(s)&&(~s.indexOf("random(")&&(s=gd(s)),s.charAt(1)==="="&&(S=ec(v,s)+(en(v)||0),(S||S===0)&&(s=S))),!x||v!==s||mg)return!isNaN(v*s)&&s!==""?(S=new On(this._pt,e,r,+v||0,s-(v||0),typeof y=="boolean"?X7:HA,0,b),f&&(S.fp=f),d&&S.modifier(d,this,e),this._pt=S):(!y&&!(r in e)&&by(r,s),V7.call(this,e,r,v,s,b,m||Kn.stringFilter,f))},H7=function(e,r,n,s,i){if(dr(e)&&(e=Fu(e,i,r,n,s)),!vi(e)||e.style&&e.nodeType||tn(e)||aA(e))return Pr(e)?Fu(e,i,r,n,s):e;var l={},d;for(d in e)l[d]=Fu(e[d],i,r,n,s);return l},FA=function(e,r,n,s,i,l){var d,m,f,x;if(Bn[e]&&(d=new Bn[e]).init(i,d.rawVars?r[e]:H7(r[e],s,i,l,n),n,s,l)!==!1&&(n._pt=m=new On(n._pt,i,e,0,1,d.render,d,0,d.priority),n!==Vl))for(f=n._ptLookup[n._targets.indexOf(i)],x=d._props.length;x--;)f[d._props[x]]=m;return d},Co,mg,Ay=function t(e,r,n){var s=e.vars,i=s.ease,l=s.startAt,d=s.immediateRender,m=s.lazy,f=s.onUpdate,x=s.runBackwards,y=s.yoyoEase,v=s.keyframes,b=s.autoRevert,S=e._dur,_=e._startAt,I=e._targets,R=e.parent,N=R&&R.data==="nested"?R.vars.targets:I,A=e._overwrite==="auto"&&!xy,O=e.timeline,k,F,B,P,M,$,G,K,ee,z,V,J,Y;if(O&&(!v||!i)&&(i="none"),e._ease=Da(i,Ec.ease),e._yEase=y?PA(Da(y===!0?i:y,Ec.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!O&&!!s.runBackwards,!O||v&&!s.stagger){if(K=I[0]?ka(I[0]).harness:0,J=K&&s[K.prop],k=Xf(s,_y),_&&(_._zTime<0&&_.progress(1),r<0&&x&&d&&!b?_.render(-1,!0):_.revert(x&&S?rf:x7),_._lazy=0),l){if($o(e._startAt=yr.set(I,Jn({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!_&&In(m),startAt:null,delay:0,onUpdate:f&&function(){return Wn(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,r<0&&($r||!d&&!b)&&e._startAt.revert(rf),d&&S&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(x&&S&&!_){if(r&&(d=!1),B=Jn({overwrite:!1,data:"isFromStart",lazy:d&&!_&&In(m),immediateRender:d,stagger:0,parent:R},k),J&&(B[K.prop]=J),$o(e._startAt=yr.set(I,B)),e._startAt._dp=0,e._startAt._sat=e,r<0&&($r?e._startAt.revert(rf):e._startAt.render(-1,!0)),e._zTime=r,!d)t(e._startAt,Ot,Ot);else if(!r)return}for(e._pt=e._ptCache=0,m=S&&In(m)||m&&!S,F=0;F<I.length;F++){if(M=I[F],G=M._gsap||Ey(I)[F]._gsap,e._ptLookup[F]=z={},lg[G.id]&&Do.length&&qf(),V=N===I?F:N.indexOf(M),K&&(ee=new K).init(M,J||k,e,V,N)!==!1&&(e._pt=P=new On(e._pt,M,ee.name,0,1,ee.render,ee,0,ee.priority),ee._props.forEach(function(q){z[q]=P}),ee.priority&&($=1)),!K||J)for(B in k)Bn[B]&&(ee=FA(B,k,e,V,M,N))?ee.priority&&($=1):z[B]=P=Ny.call(e,M,B,"get",k[B],V,N,0,s.stringFilter);e._op&&e._op[F]&&e.kill(M,e._op[F]),A&&e._pt&&(Co=e,Xt.killTweensOf(M,z,e.globalTime(r)),Y=!e.parent,Co=0),e._pt&&m&&(lg[G.id]=1)}$&&WA(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!Y,v&&r<=0&&O.render(fs,!0,!0)},$7=function(e,r,n,s,i,l,d,m){var f=(e._pt&&e._ptCache||(e._ptCache={}))[r],x,y,v,b;if(!f)for(f=e._ptCache[r]=[],v=e._ptLookup,b=e._targets.length;b--;){if(x=v[b][r],x&&x.d&&x.d._pt)for(x=x.d._pt;x&&x.p!==r&&x.fp!==r;)x=x._next;if(!x)return mg=1,e.vars[r]="+=0",Ay(e,d),mg=0,m?md(r+" not eligible for reset"):1;f.push(x)}for(b=f.length;b--;)y=f[b],x=y._pt||y,x.s=(s||s===0)&&!i?s:x.s+(s||0)+l*x.c,x.c=n-x.s,y.e&&(y.e=fr(n)+en(y.e)),y.b&&(y.b=x.s+en(y.b))},W7=function(e,r){var n=e[0]?ka(e[0]).harness:0,s=n&&n.aliases,i,l,d,m;if(!s)return r;i=Sc({},r);for(l in s)if(l in i)for(m=s[l].split(","),d=m.length;d--;)i[m[d]]=i[l];return i},G7=function(e,r,n,s){var i=r.ease||s||"power1.inOut",l,d;if(tn(r))d=n[e]||(n[e]=[]),r.forEach(function(m,f){return d.push({t:f/(r.length-1)*100,v:m,e:i})});else for(l in r)d=n[l]||(n[l]=[]),l==="ease"||d.push({t:parseFloat(e),v:r[l],e:i})},Fu=function(e,r,n,s,i){return dr(e)?e.call(r,n,s,i):Pr(e)&&~e.indexOf("random(")?gd(e):e},UA=Cy+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",zA={};Rn(UA+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return zA[t]=1});var yr=function(t){iA(e,t);function e(n,s,i,l){var d;typeof s=="number"&&(i.duration=s,s=i,i=null),d=t.call(this,l?s:Lu(s))||this;var m=d.vars,f=m.duration,x=m.delay,y=m.immediateRender,v=m.stagger,b=m.overwrite,S=m.keyframes,_=m.defaults,I=m.scrollTrigger,R=m.yoyoEase,N=s.parent||Xt,A=(tn(n)||aA(n)?Yi(n[0]):"length"in s)?[n]:ms(n),O,k,F,B,P,M,$,G;if(d._targets=A.length?Ey(A):md("GSAP target "+n+" not found. https://gsap.com",!Kn.nullTargetWarn)||[],d._ptLookup=[],d._overwrite=b,S||v||Mh(f)||Mh(x)){if(s=d.vars,O=d.timeline=new hn({data:"nested",defaults:_||{},targets:N&&N.data==="nested"?N.vars.targets:A}),O.kill(),O.parent=O._dp=Oi(d),O._start=0,v||Mh(f)||Mh(x)){if(B=A.length,$=v&&SA(v),vi(v))for(P in v)~UA.indexOf(P)&&(G||(G={}),G[P]=v[P]);for(k=0;k<B;k++)F=Xf(s,zA),F.stagger=0,R&&(F.yoyoEase=R),G&&Sc(F,G),M=A[k],F.duration=+Fu(f,Oi(d),k,M,A),F.delay=(+Fu(x,Oi(d),k,M,A)||0)-d._delay,!v&&B===1&&F.delay&&(d._delay=x=F.delay,d._start+=x,F.delay=0),O.to(M,F,$?$(k,M,A):0),O._ease=dt.none;O.duration()?f=x=0:d.timeline=0}else if(S){Lu(Jn(O.vars.defaults,{ease:"none"})),O._ease=Da(S.ease||s.ease||"none");var K=0,ee,z,V;if(tn(S))S.forEach(function(J){return O.to(A,J,">")}),O.duration();else{F={};for(P in S)P==="ease"||P==="easeEach"||G7(P,S[P],F,S.easeEach);for(P in F)for(ee=F[P].sort(function(J,Y){return J.t-Y.t}),K=0,k=0;k<ee.length;k++)z=ee[k],V={ease:z.e,duration:(z.t-(k?ee[k-1].t:0))/100*f},V[P]=z.v,O.to(A,V,K),K+=V.duration;O.duration()<f&&O.to({},{duration:f-O.duration()})}}f||d.duration(f=O.duration())}else d.timeline=0;return b===!0&&!xy&&(Co=Oi(d),Xt.killTweensOf(A),Co=0),di(N,Oi(d),i),s.reversed&&d.reverse(),s.paused&&d.paused(!0),(y||!f&&!S&&d._start===wr(N._time)&&In(y)&&C7(Oi(d))&&N.data!=="nested")&&(d._tTime=-Ot,d.render(Math.max(0,-x)||0)),I&&bA(Oi(d),I),d}var r=e.prototype;return r.render=function(s,i,l){var d=this._time,m=this._tDur,f=this._dur,x=s<0,y=s>m-Ot&&!x?m:s<Ot?0:s,v,b,S,_,I,R,N,A,O;if(!f)S7(this,s,i,l);else if(y!==this._tTime||!s||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==x||this._lazy){if(v=y,A=this.timeline,this._repeat){if(_=f+this._rDelay,this._repeat<-1&&x)return this.totalTime(_*100+s,i,l);if(v=wr(y%_),y===m?(S=this._repeat,v=f):(I=wr(y/_),S=~~I,S&&S===I?(v=f,S--):v>f&&(v=f)),R=this._yoyo&&S&1,R&&(O=this._yEase,v=f-v),I=Nc(this._tTime,_),v===d&&!l&&this._initted&&S===I)return this._tTime=y,this;S!==I&&(A&&this._yEase&&DA(A,R),this.vars.repeatRefresh&&!R&&!this._lock&&v!==_&&this._initted&&(this._lock=l=1,this.render(wr(_*S),!0).invalidate()._lock=0))}if(!this._initted){if(_A(this,x?s:v,l,i,y))return this._tTime=0,this;if(d!==this._time&&!(l&&this.vars.repeatRefresh&&S!==I))return this;if(f!==this._dur)return this.render(s,i,l)}if(this._tTime=y,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=N=(O||this._ease)(v/f),this._from&&(this.ratio=N=1-N),!d&&y&&!i&&!I&&(Wn(this,"onStart"),this._tTime!==y))return this;for(b=this._pt;b;)b.r(N,b.d),b=b._next;A&&A.render(s<0?s:A._dur*A._ease(v/this._dur),i,l)||this._startAt&&(this._zTime=s),this._onUpdate&&!i&&(x&&cg(this,s,i,l),Wn(this,"onUpdate")),this._repeat&&S!==I&&this.vars.onRepeat&&!i&&this.parent&&Wn(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(x&&!this._onUpdate&&cg(this,s,!0,!0),(s||!f)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&$o(this,1),!i&&!(x&&!d)&&(y||d||R)&&(Wn(this,y===m?"onComplete":"onReverseComplete",!0),this._prom&&!(y<m&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),t.prototype.invalidate.call(this,s)},r.resetTo=function(s,i,l,d,m){xd||Vn.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),x;return this._initted||Ay(this,f),x=this._ease(f/this._dur),$7(this,s,i,l,d,x,f,m)?this.resetTo(s,i,l,d,1):(Y0(this,0),this.parent||wA(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(s,i){if(i===void 0&&(i="all"),!s&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?vu(this):this.scrollTrigger&&this.scrollTrigger.kill(!!$r),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(s,i,Co&&Co.vars.overwrite!==!0)._first||vu(this),this.parent&&l!==this.timeline.totalDuration()&&Ac(this,this._dur*this.timeline._tDur/l,0,1),this}var d=this._targets,m=s?ms(s):d,f=this._ptLookup,x=this._pt,y,v,b,S,_,I,R;if((!i||i==="all")&&b7(d,m))return i==="all"&&(this._pt=0),vu(this);for(y=this._op=this._op||[],i!=="all"&&(Pr(i)&&(_={},Rn(i,function(N){return _[N]=1}),i=_),i=W7(d,i)),R=d.length;R--;)if(~m.indexOf(d[R])){v=f[R],i==="all"?(y[R]=i,S=v,b={}):(b=y[R]=y[R]||{},S=i);for(_ in S)I=v&&v[_],I&&((!("kill"in I.d)||I.d.kill(_)===!0)&&W0(this,I,"_pt"),delete v[_]),b!=="all"&&(b[_]=1)}return this._initted&&!this._pt&&x&&vu(this),this},e.to=function(s,i){return new e(s,i,arguments[2])},e.from=function(s,i){return Bu(1,arguments)},e.delayedCall=function(s,i,l,d){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:i,onReverseComplete:i,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:d})},e.fromTo=function(s,i,l){return Bu(2,arguments)},e.set=function(s,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(s,i)},e.killTweensOf=function(s,i,l){return Xt.killTweensOf(s,i,l)},e}(yd);Jn(yr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Rn("staggerTo,staggerFrom,staggerFromTo",function(t){yr[t]=function(){var e=new hn,r=dg.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var Ty=function(e,r,n){return e[r]=n},VA=function(e,r,n){return e[r](n)},Y7=function(e,r,n,s){return e[r](s.fp,n)},q7=function(e,r,n){return e.setAttribute(r,n)},Iy=function(e,r){return dr(e[r])?VA:yy(e[r])&&e.setAttribute?q7:Ty},HA=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},X7=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},$A=function(e,r){var n=r._pt,s="";if(!e&&r.b)s=r.b;else if(e===1&&r.e)s=r.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=r.c}r.set(r.t,r.p,s,r)},Ry=function(e,r){for(var n=r._pt;n;)n.r(e,n.d),n=n._next},K7=function(e,r,n,s){for(var i=this._pt,l;i;)l=i._next,i.p===s&&i.modifier(e,r,n),i=l},Q7=function(e){for(var r=this._pt,n,s;r;)s=r._next,r.p===e&&!r.op||r.op===e?W0(this,r,"_pt"):r.dep||(n=1),r=s;return!n},Z7=function(e,r,n,s){s.mSet(e,r,s.m.call(s.tween,n,s.mt),s)},WA=function(e){for(var r=e._pt,n,s,i,l;r;){for(n=r._next,s=i;s&&s.pr>r.pr;)s=s._next;(r._prev=s?s._prev:l)?r._prev._next=r:i=r,(r._next=s)?s._prev=r:l=r,r=n}e._pt=i},On=function(){function t(r,n,s,i,l,d,m,f,x){this.t=n,this.s=i,this.c=l,this.p=s,this.r=d||HA,this.d=m||this,this.set=f||Ty,this.pr=x||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(n,s,i){this.mSet=this.mSet||this.set,this.set=Z7,this.m=n,this.mt=i,this.tween=s},t}();Rn(Cy+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return _y[t]=1});Zn.TweenMax=Zn.TweenLite=yr;Zn.TimelineLite=Zn.TimelineMax=hn;Xt=new hn({sortChildren:!1,defaults:Ec,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Kn.stringFilter=kA;var La=[],sf={},J7=[],J2=0,e9=0,Ep=function(e){return(sf[e]||J7).map(function(r){return r()})},pg=function(){var e=Date.now(),r=[];e-J2>2&&(Ep("matchMediaInit"),La.forEach(function(n){var s=n.queries,i=n.conditions,l,d,m,f;for(d in s)l=oi.matchMedia(s[d]).matches,l&&(m=1),l!==i[d]&&(i[d]=l,f=1);f&&(n.revert(),m&&r.push(n))}),Ep("matchMediaRevert"),r.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),J2=e,Ep("matchMedia"))},GA=function(){function t(r,n){this.selector=n&&hg(n),this.data=[],this._r=[],this.isReverted=!1,this.id=e9++,r&&this.add(r)}var e=t.prototype;return e.add=function(n,s,i){dr(n)&&(i=s,s=n,n=dr);var l=this,d=function(){var f=Wt,x=l.selector,y;return f&&f!==l&&f.data.push(l),i&&(l.selector=hg(i)),Wt=l,y=s.apply(l,arguments),dr(y)&&l._r.push(y),Wt=f,l.selector=x,l.isReverted=!1,y};return l.last=d,n===dr?d(l,function(m){return l.add(null,m)}):n?l[n]=d:d},e.ignore=function(n){var s=Wt;Wt=null,n(this),Wt=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof t?n.push.apply(n,s.getTweens()):s instanceof yr&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var i=this;if(n?function(){for(var d=i.getTweens(),m=i.data.length,f;m--;)f=i.data[m],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(x){return d.splice(d.indexOf(x),1)}));for(d.map(function(x){return{g:x._dur||x._delay||x._sat&&!x._sat.vars.immediateRender?x.globalTime(0):-1/0,t:x}}).sort(function(x,y){return y.g-x.g||-1/0}).forEach(function(x){return x.t.revert(n)}),m=i.data.length;m--;)f=i.data[m],f instanceof hn?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof yr)&&f.revert&&f.revert(n);i._r.forEach(function(x){return x(n,i)}),i.isReverted=!0}():this.data.forEach(function(d){return d.kill&&d.kill()}),this.clear(),s)for(var l=La.length;l--;)La[l].id===this.id&&La.splice(l,1)},e.revert=function(n){this.kill(n||{})},t}(),t9=function(){function t(r){this.contexts=[],this.scope=r,Wt&&Wt.data.push(this)}var e=t.prototype;return e.add=function(n,s,i){vi(n)||(n={matches:n});var l=new GA(0,i||this.scope),d=l.conditions={},m,f,x;Wt&&!l.selector&&(l.selector=Wt.selector),this.contexts.push(l),s=l.add("onMatch",s),l.queries=n;for(f in n)f==="all"?x=1:(m=oi.matchMedia(n[f]),m&&(La.indexOf(l)<0&&La.push(l),(d[f]=m.matches)&&(x=1),m.addListener?m.addListener(pg):m.addEventListener("change",pg)));return x&&s(l,function(y){return l.add(null,y)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},t}(),Qf={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(s){return OA(s)})},timeline:function(e){return new hn(e)},getTweensOf:function(e,r){return Xt.getTweensOf(e,r)},getProperty:function(e,r,n,s){Pr(e)&&(e=ms(e)[0]);var i=ka(e||{}).get,l=n?yA:xA;return n==="native"&&(n=""),e&&(r?l((Bn[r]&&Bn[r].get||i)(e,r,n,s)):function(d,m,f){return l((Bn[d]&&Bn[d].get||i)(e,d,m,f))})},quickSetter:function(e,r,n){if(e=ms(e),e.length>1){var s=e.map(function(x){return Mn.quickSetter(x,r,n)}),i=s.length;return function(x){for(var y=i;y--;)s[y](x)}}e=e[0]||{};var l=Bn[r],d=ka(e),m=d.harness&&(d.harness.aliases||{})[r]||r,f=l?function(x){var y=new l;Vl._pt=0,y.init(e,n?x+n:x,Vl,0,[e]),y.render(1,y),Vl._pt&&Ry(1,Vl)}:d.set(e,m);return l?f:function(x){return f(e,m,n?x+n:x,d,1)}},quickTo:function(e,r,n){var s,i=Mn.to(e,Jn((s={},s[r]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),l=function(m,f,x){return i.resetTo(r,m,f,x)};return l.tween=i,l},isTweening:function(e){return Xt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Da(e.ease,Ec.ease)),q2(Ec,e||{})},config:function(e){return q2(Kn,e||{})},registerEffect:function(e){var r=e.name,n=e.effect,s=e.plugins,i=e.defaults,l=e.extendTimeline;(s||"").split(",").forEach(function(d){return d&&!Bn[d]&&!Zn[d]&&md(r+" effect requires "+d+" plugin.")}),vp[r]=function(d,m,f){return n(ms(d),Jn(m||{},i),f)},l&&(hn.prototype[r]=function(d,m,f){return this.add(vp[r](d,vi(m)?m:(f=m)&&{},this),f)})},registerEase:function(e,r){dt[e]=Da(r)},parseEase:function(e,r){return arguments.length?Da(e,r):dt},getById:function(e){return Xt.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var n=new hn(e),s,i;for(n.smoothChildTiming=In(e.smoothChildTiming),Xt.remove(n),n._dp=0,n._time=n._tTime=Xt._time,s=Xt._first;s;)i=s._next,(r||!(!s._dur&&s instanceof yr&&s.vars.onComplete===s._targets[0]))&&di(n,s,s._start-s._delay),s=i;return di(Xt,n,0),n},context:function(e,r){return e?new GA(e,r):Wt},matchMedia:function(e){return new t9(e)},matchMediaRefresh:function(){return La.forEach(function(e){var r=e.conditions,n,s;for(s in r)r[s]&&(r[s]=!1,n=1);n&&e.revert()})||pg()},addEventListener:function(e,r){var n=sf[e]||(sf[e]=[]);~n.indexOf(r)||n.push(r)},removeEventListener:function(e,r){var n=sf[e],s=n&&n.indexOf(r);s>=0&&n.splice(s,1)},utils:{wrap:M7,wrapYoyo:k7,distribute:SA,random:AA,snap:NA,normalize:j7,getUnit:en,clamp:T7,splitColor:jA,toArray:ms,selector:hg,mapRange:IA,pipe:R7,unitize:O7,interpolate:P7,shuffle:EA},install:hA,effects:vp,ticker:Vn,updateRoot:hn.updateRoot,plugins:Bn,globalTimeline:Xt,core:{PropTween:On,globals:fA,Tween:yr,Timeline:hn,Animation:yd,getCache:ka,_removeLinkedListItem:W0,reverting:function(){return $r},context:function(e){return e&&Wt&&(Wt.data.push(e),e._ctx=Wt),Wt},suppressOverwrites:function(e){return xy=e}}};Rn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Qf[t]=yr[t]});Vn.add(hn.updateRoot);Vl=Qf.to({},{duration:0});var r9=function(e,r){for(var n=e._pt;n&&n.p!==r&&n.op!==r&&n.fp!==r;)n=n._next;return n},n9=function(e,r){var n=e._targets,s,i,l;for(s in r)for(i=n.length;i--;)l=e._ptLookup[i][s],l&&(l=l.d)&&(l._pt&&(l=r9(l,s)),l&&l.modifier&&l.modifier(r[s],e,n[i],s))},Sp=function(e,r){return{name:e,headless:1,rawVars:1,init:function(s,i,l){l._onInit=function(d){var m,f;if(Pr(i)&&(m={},Rn(i,function(x){return m[x]=1}),i=m),r){m={};for(f in i)m[f]=r(i[f]);i=m}n9(d,i)}}}},Mn=Qf.registerPlugin({name:"attr",init:function(e,r,n,s,i){var l,d,m;this.tween=n;for(l in r)m=e.getAttribute(l)||"",d=this.add(e,"setAttribute",(m||0)+"",r[l],s,i,0,0,l),d.op=l,d.b=m,this._props.push(l)},render:function(e,r){for(var n=r._pt;n;)$r?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,r){for(var n=r.length;n--;)this.add(e,n,e[n]||0,r[n],0,0,0,0,0,1)}},Sp("roundProps",fg),Sp("modifiers"),Sp("snap",NA))||Qf;yr.version=hn.version=Mn.version="3.13.0";dA=1;wy()&&Tc();dt.Power0;dt.Power1;dt.Power2;dt.Power3;dt.Power4;dt.Linear;dt.Quad;dt.Cubic;dt.Quart;dt.Quint;dt.Strong;dt.Elastic;dt.Back;dt.SteppedEase;dt.Bounce;dt.Sine;dt.Expo;dt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var eb,Eo,tc,Oy,Ca,tb,jy,s9=function(){return typeof window<"u"},qi={},ga=180/Math.PI,rc=Math.PI/180,_l=Math.atan2,rb=1e8,My=/([A-Z])/g,i9=/(left|right|width|margin|padding|x)/i,o9=/[\s,\(]\S/,fi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gg=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},a9=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},l9=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},c9=function(e,r){var n=r.s+r.c*e;r.set(r.t,r.p,~~(n+(n<0?-.5:.5))+r.u,r)},YA=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},qA=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},u9=function(e,r,n){return e.style[r]=n},d9=function(e,r,n){return e.style.setProperty(r,n)},h9=function(e,r,n){return e._gsap[r]=n},f9=function(e,r,n){return e._gsap.scaleX=e._gsap.scaleY=n},m9=function(e,r,n,s,i){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(i,l)},p9=function(e,r,n,s,i){var l=e._gsap;l[r]=n,l.renderTransform(i,l)},Qt="transform",jn=Qt+"Origin",g9=function t(e,r){var n=this,s=this.target,i=s.style,l=s._gsap;if(e in qi&&i){if(this.tfm=this.tfm||{},e!=="transform")e=fi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(d){return n.tfm[d]=ki(s,d)}):this.tfm[e]=l.x?l[e]:ki(s,e),e===jn&&(this.tfm.zOrigin=l.zOrigin);else return fi.transform.split(",").forEach(function(d){return t.call(n,d,r)});if(this.props.indexOf(Qt)>=0)return;l.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(jn,r,"")),e=Qt}(i||r)&&this.props.push(e,r,i[e])},XA=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},x9=function(){var e=this.props,r=this.target,n=r.style,s=r._gsap,i,l;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?r[e[i]](e[i+2]):r[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(My,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)s[l]=this.tfm[l];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),i=jy(),(!i||!i.isStart)&&!n[Qt]&&(XA(n),s.zOrigin&&n[jn]&&(n[jn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},KA=function(e,r){var n={target:e,props:[],revert:x9,save:g9};return e._gsap||Mn.core.getCache(e),r&&e.style&&e.nodeType&&r.split(",").forEach(function(s){return n.save(s)}),n},QA,xg=function(e,r){var n=Eo.createElementNS?Eo.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Eo.createElement(e);return n&&n.style?n:Eo.createElement(e)},ps=function t(e,r,n){var s=getComputedStyle(e);return s[r]||s.getPropertyValue(r.replace(My,"-$1").toLowerCase())||s.getPropertyValue(r)||!n&&t(e,Ic(r)||r,1)||""},nb="O,Moz,ms,Ms,Webkit".split(","),Ic=function(e,r,n){var s=r||Ca,i=s.style,l=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(nb[l]+e in i););return l<0?null:(l===3?"ms":l>=0?nb[l]:"")+e},yg=function(){s9()&&window.document&&(eb=window,Eo=eb.document,tc=Eo.documentElement,Ca=xg("div")||{style:{}},xg("div"),Qt=Ic(Qt),jn=Qt+"Origin",Ca.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",QA=!!Ic("perspective"),jy=Mn.core.reverting,Oy=1)},sb=function(e){var r=e.ownerSVGElement,n=xg("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),i;s.style.display="block",n.appendChild(s),tc.appendChild(n);try{i=s.getBBox()}catch{}return n.removeChild(s),tc.removeChild(n),i},ib=function(e,r){for(var n=r.length;n--;)if(e.hasAttribute(r[n]))return e.getAttribute(r[n])},ZA=function(e){var r,n;try{r=e.getBBox()}catch{r=sb(e),n=1}return r&&(r.width||r.height)||n||(r=sb(e)),r&&!r.width&&!r.x&&!r.y?{x:+ib(e,["x","cx","x1"])||0,y:+ib(e,["y","cy","y1"])||0,width:0,height:0}:r},JA=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ZA(e))},Wa=function(e,r){if(r){var n=e.style,s;r in qi&&r!==jn&&(r=Qt),n.removeProperty?(s=r.substr(0,2),(s==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),n.removeProperty(s==="--"?r:r.replace(My,"-$1").toLowerCase())):n.removeAttribute(r)}},So=function(e,r,n,s,i,l){var d=new On(e._pt,r,n,0,1,l?qA:YA);return e._pt=d,d.b=s,d.e=i,e._props.push(n),d},ob={deg:1,rad:1,turn:1},y9={grid:1,flex:1},Wo=function t(e,r,n,s){var i=parseFloat(n)||0,l=(n+"").trim().substr((i+"").length)||"px",d=Ca.style,m=i9.test(r),f=e.tagName.toLowerCase()==="svg",x=(f?"client":"offset")+(m?"Width":"Height"),y=100,v=s==="px",b=s==="%",S,_,I,R;if(s===l||!i||ob[s]||ob[l])return i;if(l!=="px"&&!v&&(i=t(e,r,n,"px")),R=e.getCTM&&JA(e),(b||l==="%")&&(qi[r]||~r.indexOf("adius")))return S=R?e.getBBox()[m?"width":"height"]:e[x],fr(b?i/S*y:i/100*S);if(d[m?"width":"height"]=y+(v?l:s),_=s!=="rem"&&~r.indexOf("adius")||s==="em"&&e.appendChild&&!f?e:e.parentNode,R&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===Eo||!_.appendChild)&&(_=Eo.body),I=_._gsap,I&&b&&I.width&&m&&I.time===Vn.time&&!I.uncache)return fr(i/I.width*y);if(b&&(r==="height"||r==="width")){var N=e.style[r];e.style[r]=y+s,S=e[x],N?e.style[r]=N:Wa(e,r)}else(b||l==="%")&&!y9[ps(_,"display")]&&(d.position=ps(e,"position")),_===e&&(d.position="static"),_.appendChild(Ca),S=Ca[x],_.removeChild(Ca),d.position="absolute";return m&&b&&(I=ka(_),I.time=Vn.time,I.width=_[x]),fr(v?S*i/y:S&&i?y/S*i:0)},ki=function(e,r,n,s){var i;return Oy||yg(),r in fi&&r!=="transform"&&(r=fi[r],~r.indexOf(",")&&(r=r.split(",")[0])),qi[r]&&r!=="transform"?(i=vd(e,s),i=r!=="transformOrigin"?i[r]:i.svg?i.origin:Jf(ps(e,jn))+" "+i.zOrigin+"px"):(i=e.style[r],(!i||i==="auto"||s||~(i+"").indexOf("calc("))&&(i=Zf[r]&&Zf[r](e,r,n)||ps(e,r)||pA(e,r)||(r==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Wo(e,r,i,n)+n:i},w9=function(e,r,n,s){if(!n||n==="none"){var i=Ic(r,e,1),l=i&&ps(e,i,1);l&&l!==n?(r=i,n=l):r==="borderColor"&&(n=ps(e,"borderTopColor"))}var d=new On(this._pt,e.style,r,0,1,$A),m=0,f=0,x,y,v,b,S,_,I,R,N,A,O,k;if(d.b=n,d.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=ps(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(_=e.style[r],e.style[r]=s,s=ps(e,r)||s,_?e.style[r]=_:Wa(e,r)),x=[n,s],kA(x),n=x[0],s=x[1],v=n.match(zl)||[],k=s.match(zl)||[],k.length){for(;y=zl.exec(s);)I=y[0],N=s.substring(m,y.index),S?S=(S+1)%5:(N.substr(-5)==="rgba("||N.substr(-5)==="hsla(")&&(S=1),I!==(_=v[f++]||"")&&(b=parseFloat(_)||0,O=_.substr((b+"").length),I.charAt(1)==="="&&(I=ec(b,I)+O),R=parseFloat(I),A=I.substr((R+"").length),m=zl.lastIndex-A.length,A||(A=A||Kn.units[r]||O,m===s.length&&(s+=A,d.e+=A)),O!==A&&(b=Wo(e,r,_,A)||0),d._pt={_next:d._pt,p:N||f===1?N:",",s:b,c:R-b,m:S&&S<4||r==="zIndex"?Math.round:0});d.c=m<s.length?s.substring(m,s.length):""}else d.r=r==="display"&&s==="none"?qA:YA;return cA.test(s)&&(d.e=0),this._pt=d,d},ab={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v9=function(e){var r=e.split(" "),n=r[0],s=r[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),r[0]=ab[n]||n,r[1]=ab[s]||s,r.join(" ")},b9=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var n=r.t,s=n.style,i=r.u,l=n._gsap,d,m,f;if(i==="all"||i===!0)s.cssText="",m=1;else for(i=i.split(","),f=i.length;--f>-1;)d=i[f],qi[d]&&(m=1,d=d==="transformOrigin"?jn:Qt),Wa(n,d);m&&(Wa(n,Qt),l&&(l.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",vd(n,1),l.uncache=1,XA(s)))}},Zf={clearProps:function(e,r,n,s,i){if(i.data!=="isFromStart"){var l=e._pt=new On(e._pt,r,n,0,0,b9);return l.u=s,l.pr=-10,l.tween=i,e._props.push(n),1}}},wd=[1,0,0,1,0,0],eT={},tT=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},lb=function(e){var r=ps(e,Qt);return tT(r)?wd:r.substr(7).match(lA).map(fr)},ky=function(e,r){var n=e._gsap||ka(e),s=e.style,i=lb(e),l,d,m,f;return n.svg&&e.getAttribute("transform")?(m=e.transform.baseVal.consolidate().matrix,i=[m.a,m.b,m.c,m.d,m.e,m.f],i.join(",")==="1,0,0,1,0,0"?wd:i):(i===wd&&!e.offsetParent&&e!==tc&&!n.svg&&(m=s.display,s.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,d=e.nextElementSibling,tc.appendChild(e)),i=lb(e),m?s.display=m:Wa(e,"display"),f&&(d?l.insertBefore(e,d):l?l.appendChild(e):tc.removeChild(e))),r&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},wg=function(e,r,n,s,i,l){var d=e._gsap,m=i||ky(e,!0),f=d.xOrigin||0,x=d.yOrigin||0,y=d.xOffset||0,v=d.yOffset||0,b=m[0],S=m[1],_=m[2],I=m[3],R=m[4],N=m[5],A=r.split(" "),O=parseFloat(A[0])||0,k=parseFloat(A[1])||0,F,B,P,M;n?m!==wd&&(B=b*I-S*_)&&(P=O*(I/B)+k*(-_/B)+(_*N-I*R)/B,M=O*(-S/B)+k*(b/B)-(b*N-S*R)/B,O=P,k=M):(F=ZA(e),O=F.x+(~A[0].indexOf("%")?O/100*F.width:O),k=F.y+(~(A[1]||A[0]).indexOf("%")?k/100*F.height:k)),s||s!==!1&&d.smooth?(R=O-f,N=k-x,d.xOffset=y+(R*b+N*_)-R,d.yOffset=v+(R*S+N*I)-N):d.xOffset=d.yOffset=0,d.xOrigin=O,d.yOrigin=k,d.smooth=!!s,d.origin=r,d.originIsAbsolute=!!n,e.style[jn]="0px 0px",l&&(So(l,d,"xOrigin",f,O),So(l,d,"yOrigin",x,k),So(l,d,"xOffset",y,d.xOffset),So(l,d,"yOffset",v,d.yOffset)),e.setAttribute("data-svg-origin",O+" "+k)},vd=function(e,r){var n=e._gsap||new BA(e);if("x"in n&&!r&&!n.uncache)return n;var s=e.style,i=n.scaleX<0,l="px",d="deg",m=getComputedStyle(e),f=ps(e,jn)||"0",x,y,v,b,S,_,I,R,N,A,O,k,F,B,P,M,$,G,K,ee,z,V,J,Y,q,Q,ie,fe,oe,le,ce,Be;return x=y=v=_=I=R=N=A=O=0,b=S=1,n.svg=!!(e.getCTM&&JA(e)),m.translate&&((m.translate!=="none"||m.scale!=="none"||m.rotate!=="none")&&(s[Qt]=(m.translate!=="none"?"translate3d("+(m.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(m.rotate!=="none"?"rotate("+m.rotate+") ":"")+(m.scale!=="none"?"scale("+m.scale.split(" ").join(",")+") ":"")+(m[Qt]!=="none"?m[Qt]:"")),s.scale=s.rotate=s.translate="none"),B=ky(e,n.svg),n.svg&&(n.uncache?(q=e.getBBox(),f=n.xOrigin-q.x+"px "+(n.yOrigin-q.y)+"px",Y=""):Y=!r&&e.getAttribute("data-svg-origin"),wg(e,Y||f,!!Y||n.originIsAbsolute,n.smooth!==!1,B)),k=n.xOrigin||0,F=n.yOrigin||0,B!==wd&&(G=B[0],K=B[1],ee=B[2],z=B[3],x=V=B[4],y=J=B[5],B.length===6?(b=Math.sqrt(G*G+K*K),S=Math.sqrt(z*z+ee*ee),_=G||K?_l(K,G)*ga:0,N=ee||z?_l(ee,z)*ga+_:0,N&&(S*=Math.abs(Math.cos(N*rc))),n.svg&&(x-=k-(k*G+F*ee),y-=F-(k*K+F*z))):(Be=B[6],le=B[7],ie=B[8],fe=B[9],oe=B[10],ce=B[11],x=B[12],y=B[13],v=B[14],P=_l(Be,oe),I=P*ga,P&&(M=Math.cos(-P),$=Math.sin(-P),Y=V*M+ie*$,q=J*M+fe*$,Q=Be*M+oe*$,ie=V*-$+ie*M,fe=J*-$+fe*M,oe=Be*-$+oe*M,ce=le*-$+ce*M,V=Y,J=q,Be=Q),P=_l(-ee,oe),R=P*ga,P&&(M=Math.cos(-P),$=Math.sin(-P),Y=G*M-ie*$,q=K*M-fe*$,Q=ee*M-oe*$,ce=z*$+ce*M,G=Y,K=q,ee=Q),P=_l(K,G),_=P*ga,P&&(M=Math.cos(P),$=Math.sin(P),Y=G*M+K*$,q=V*M+J*$,K=K*M-G*$,J=J*M-V*$,G=Y,V=q),I&&Math.abs(I)+Math.abs(_)>359.9&&(I=_=0,R=180-R),b=fr(Math.sqrt(G*G+K*K+ee*ee)),S=fr(Math.sqrt(J*J+Be*Be)),P=_l(V,J),N=Math.abs(P)>2e-4?P*ga:0,O=ce?1/(ce<0?-ce:ce):0),n.svg&&(Y=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!tT(ps(e,Qt)),Y&&e.setAttribute("transform",Y))),Math.abs(N)>90&&Math.abs(N)<270&&(i?(b*=-1,N+=_<=0?180:-180,_+=_<=0?180:-180):(S*=-1,N+=N<=0?180:-180)),r=r||n.uncache,n.x=x-((n.xPercent=x&&(!r&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-x)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=y-((n.yPercent=y&&(!r&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=v+l,n.scaleX=fr(b),n.scaleY=fr(S),n.rotation=fr(_)+d,n.rotationX=fr(I)+d,n.rotationY=fr(R)+d,n.skewX=N+d,n.skewY=A+d,n.transformPerspective=O+l,(n.zOrigin=parseFloat(f.split(" ")[2])||!r&&n.zOrigin||0)&&(s[jn]=Jf(f)),n.xOffset=n.yOffset=0,n.force3D=Kn.force3D,n.renderTransform=n.svg?C9:QA?rT:_9,n.uncache=0,n},Jf=function(e){return(e=e.split(" "))[0]+" "+e[1]},Np=function(e,r,n){var s=en(r);return fr(parseFloat(r)+parseFloat(Wo(e,"x",n+"px",s)))+s},_9=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,rT(e,r)},da="0deg",hu="0px",ha=") ",rT=function(e,r){var n=r||this,s=n.xPercent,i=n.yPercent,l=n.x,d=n.y,m=n.z,f=n.rotation,x=n.rotationY,y=n.rotationX,v=n.skewX,b=n.skewY,S=n.scaleX,_=n.scaleY,I=n.transformPerspective,R=n.force3D,N=n.target,A=n.zOrigin,O="",k=R==="auto"&&e&&e!==1||R===!0;if(A&&(y!==da||x!==da)){var F=parseFloat(x)*rc,B=Math.sin(F),P=Math.cos(F),M;F=parseFloat(y)*rc,M=Math.cos(F),l=Np(N,l,B*M*-A),d=Np(N,d,-Math.sin(F)*-A),m=Np(N,m,P*M*-A+A)}I!==hu&&(O+="perspective("+I+ha),(s||i)&&(O+="translate("+s+"%, "+i+"%) "),(k||l!==hu||d!==hu||m!==hu)&&(O+=m!==hu||k?"translate3d("+l+", "+d+", "+m+") ":"translate("+l+", "+d+ha),f!==da&&(O+="rotate("+f+ha),x!==da&&(O+="rotateY("+x+ha),y!==da&&(O+="rotateX("+y+ha),(v!==da||b!==da)&&(O+="skew("+v+", "+b+ha),(S!==1||_!==1)&&(O+="scale("+S+", "+_+ha),N.style[Qt]=O||"translate(0, 0)"},C9=function(e,r){var n=r||this,s=n.xPercent,i=n.yPercent,l=n.x,d=n.y,m=n.rotation,f=n.skewX,x=n.skewY,y=n.scaleX,v=n.scaleY,b=n.target,S=n.xOrigin,_=n.yOrigin,I=n.xOffset,R=n.yOffset,N=n.forceCSS,A=parseFloat(l),O=parseFloat(d),k,F,B,P,M;m=parseFloat(m),f=parseFloat(f),x=parseFloat(x),x&&(x=parseFloat(x),f+=x,m+=x),m||f?(m*=rc,f*=rc,k=Math.cos(m)*y,F=Math.sin(m)*y,B=Math.sin(m-f)*-v,P=Math.cos(m-f)*v,f&&(x*=rc,M=Math.tan(f-x),M=Math.sqrt(1+M*M),B*=M,P*=M,x&&(M=Math.tan(x),M=Math.sqrt(1+M*M),k*=M,F*=M)),k=fr(k),F=fr(F),B=fr(B),P=fr(P)):(k=y,P=v,F=B=0),(A&&!~(l+"").indexOf("px")||O&&!~(d+"").indexOf("px"))&&(A=Wo(b,"x",l,"px"),O=Wo(b,"y",d,"px")),(S||_||I||R)&&(A=fr(A+S-(S*k+_*B)+I),O=fr(O+_-(S*F+_*P)+R)),(s||i)&&(M=b.getBBox(),A=fr(A+s/100*M.width),O=fr(O+i/100*M.height)),M="matrix("+k+","+F+","+B+","+P+","+A+","+O+")",b.setAttribute("transform",M),N&&(b.style[Qt]=M)},E9=function(e,r,n,s,i){var l=360,d=Pr(i),m=parseFloat(i)*(d&&~i.indexOf("rad")?ga:1),f=m-s,x=s+f+"deg",y,v;return d&&(y=i.split("_")[1],y==="short"&&(f%=l,f!==f%(l/2)&&(f+=f<0?l:-l)),y==="cw"&&f<0?f=(f+l*rb)%l-~~(f/l)*l:y==="ccw"&&f>0&&(f=(f-l*rb)%l-~~(f/l)*l)),e._pt=v=new On(e._pt,r,n,s,f,a9),v.e=x,v.u="deg",e._props.push(n),v},cb=function(e,r){for(var n in r)e[n]=r[n];return e},S9=function(e,r,n){var s=cb({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",l=n.style,d,m,f,x,y,v,b,S;s.svg?(f=n.getAttribute("transform"),n.setAttribute("transform",""),l[Qt]=r,d=vd(n,1),Wa(n,Qt),n.setAttribute("transform",f)):(f=getComputedStyle(n)[Qt],l[Qt]=r,d=vd(n,1),l[Qt]=f);for(m in qi)f=s[m],x=d[m],f!==x&&i.indexOf(m)<0&&(b=en(f),S=en(x),y=b!==S?Wo(n,m,f,S):parseFloat(f),v=parseFloat(x),e._pt=new On(e._pt,d,m,y,v-y,gg),e._pt.u=S||0,e._props.push(m));cb(d,s)};Rn("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",s="Bottom",i="Left",l=(e<3?[r,n,s,i]:[r+i,r+n,s+n,s+i]).map(function(d){return e<2?t+d:"border"+d+t});Zf[e>1?"border"+t:t]=function(d,m,f,x,y){var v,b;if(arguments.length<4)return v=l.map(function(S){return ki(d,S,f)}),b=v.join(" "),b.split(v[0]).length===5?v[0]:b;v=(x+"").split(" "),b={},l.forEach(function(S,_){return b[S]=v[_]=v[_]||v[(_-1)/2|0]}),d.init(m,b,y)}});var nT={name:"css",register:yg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,n,s,i){var l=this._props,d=e.style,m=n.vars.startAt,f,x,y,v,b,S,_,I,R,N,A,O,k,F,B,P;Oy||yg(),this.styles=this.styles||KA(e),P=this.styles.props,this.tween=n;for(_ in r)if(_!=="autoRound"&&(x=r[_],!(Bn[_]&&FA(_,r,n,s,e,i)))){if(b=typeof x,S=Zf[_],b==="function"&&(x=x.call(n,s,e,i),b=typeof x),b==="string"&&~x.indexOf("random(")&&(x=gd(x)),S)S(this,e,_,x,n)&&(B=1);else if(_.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(_)+"").trim(),x+="",Lo.lastIndex=0,Lo.test(f)||(I=en(f),R=en(x)),R?I!==R&&(f=Wo(e,_,f,R)+R):I&&(x+=I),this.add(d,"setProperty",f,x,s,i,0,0,_),l.push(_),P.push(_,0,d[_]);else if(b!=="undefined"){if(m&&_ in m?(f=typeof m[_]=="function"?m[_].call(n,s,e,i):m[_],Pr(f)&&~f.indexOf("random(")&&(f=gd(f)),en(f+"")||f==="auto"||(f+=Kn.units[_]||en(ki(e,_))||""),(f+"").charAt(1)==="="&&(f=ki(e,_))):f=ki(e,_),v=parseFloat(f),N=b==="string"&&x.charAt(1)==="="&&x.substr(0,2),N&&(x=x.substr(2)),y=parseFloat(x),_ in fi&&(_==="autoAlpha"&&(v===1&&ki(e,"visibility")==="hidden"&&y&&(v=0),P.push("visibility",0,d.visibility),So(this,d,"visibility",v?"inherit":"hidden",y?"inherit":"hidden",!y)),_!=="scale"&&_!=="transform"&&(_=fi[_],~_.indexOf(",")&&(_=_.split(",")[0]))),A=_ in qi,A){if(this.styles.save(_),b==="string"&&x.substring(0,6)==="var(--"&&(x=ps(e,x.substring(4,x.indexOf(")"))),y=parseFloat(x)),O||(k=e._gsap,k.renderTransform&&!r.parseTransform||vd(e,r.parseTransform),F=r.smoothOrigin!==!1&&k.smooth,O=this._pt=new On(this._pt,d,Qt,0,1,k.renderTransform,k,0,-1),O.dep=1),_==="scale")this._pt=new On(this._pt,k,"scaleY",k.scaleY,(N?ec(k.scaleY,N+y):y)-k.scaleY||0,gg),this._pt.u=0,l.push("scaleY",_),_+="X";else if(_==="transformOrigin"){P.push(jn,0,d[jn]),x=v9(x),k.svg?wg(e,x,0,F,0,this):(R=parseFloat(x.split(" ")[2])||0,R!==k.zOrigin&&So(this,k,"zOrigin",k.zOrigin,R),So(this,d,_,Jf(f),Jf(x)));continue}else if(_==="svgOrigin"){wg(e,x,1,F,0,this);continue}else if(_ in eT){E9(this,k,_,v,N?ec(v,N+x):x);continue}else if(_==="smoothOrigin"){So(this,k,"smooth",k.smooth,x);continue}else if(_==="force3D"){k[_]=x;continue}else if(_==="transform"){S9(this,x,e);continue}}else _ in d||(_=Ic(_)||_);if(A||(y||y===0)&&(v||v===0)&&!o9.test(x)&&_ in d)I=(f+"").substr((v+"").length),y||(y=0),R=en(x)||(_ in Kn.units?Kn.units[_]:I),I!==R&&(v=Wo(e,_,f,R)),this._pt=new On(this._pt,A?k:d,_,v,(N?ec(v,N+y):y)-v,!A&&(R==="px"||_==="zIndex")&&r.autoRound!==!1?c9:gg),this._pt.u=R||0,I!==R&&R!=="%"&&(this._pt.b=f,this._pt.r=l9);else if(_ in d)w9.call(this,e,_,f,N?N+x:x);else if(_ in e)this.add(e,_,f||e[_],N?N+x:x,s,i);else if(_!=="parseTransform"){by(_,x);continue}A||(_ in d?P.push(_,0,d[_]):typeof e[_]=="function"?P.push(_,2,e[_]()):P.push(_,1,f||e[_])),l.push(_)}}B&&WA(this)},render:function(e,r){if(r.tween._time||!jy())for(var n=r._pt;n;)n.r(e,n.d),n=n._next;else r.styles.revert()},get:ki,aliases:fi,getSetter:function(e,r,n){var s=fi[r];return s&&s.indexOf(",")<0&&(r=s),r in qi&&r!==jn&&(e._gsap.x||ki(e,"x"))?n&&tb===n?r==="scale"?f9:h9:(tb=n||{})&&(r==="scale"?m9:p9):e.style&&!yy(e.style[r])?u9:~r.indexOf("-")?d9:Iy(e,r)},core:{_removeProperty:Wa,_getMatrix:ky}};Mn.utils.checkPrefix=Ic;Mn.core.getStyleSaver=KA;(function(t,e,r,n){var s=Rn(t+","+e+","+r,function(i){qi[i]=1});Rn(e,function(i){Kn.units[i]="deg",eT[i]=1}),fi[s[13]]=t+","+e,Rn(n,function(i){var l=i.split(":");fi[l[1]]=s[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Rn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Kn.units[t]="px"});Mn.registerPlugin(nT);var ji=Mn.registerPlugin(nT)||Mn;ji.core.Tween;const Py="/ALAN_NEW/assets/ALANLOGO-CiZZgqjV.png",N9="/ALAN_NEW/assets/onbarding1-DYox49Gq.png",A9="/ALAN_NEW/assets/onbarding2-vDKFdda2.png",T9="/ALAN_NEW/assets/onbarding3-D_6Pmr_M.png",fu=[{title:"Discover Premium Dining",description:"Browse the finest restaurants in Yangon with detailed menus and exclusive offerings",image:N9},{title:"Prepay with Ease",description:"Secure your table and meals in advance with convenient payment options",image:A9},{title:"Skip the Wait",description:"Show your QR code and enjoy your meal immediately upon arrival",image:T9}],I9=()=>{const[t,e]=E.useState(0),r=sn(),n=E.useRef(null),s=E.useRef(null),i=E.useRef(null),l=E.useRef(null);E.useEffect(()=>{if(!n.current)return;const x=ji.timeline();return x.fromTo(s.current,{opacity:0,y:10,scale:.98},{opacity:1,y:0,scale:1,duration:.4,ease:"power2.out"}).fromTo(i.current,{opacity:0,y:12},{opacity:1,y:0,duration:.45,ease:"power2.out"},"-=0.15").fromTo(l.current,{opacity:0,y:16,rotate:-2},{opacity:1,y:0,rotate:0,duration:.5,ease:"power2.out"},"-=0.2"),()=>{x.kill()}},[t]);const d=()=>{t<fu.length-1?e(t+1):r("/auth")},m=()=>{r("/auth")},f=fu[t];return u.jsxs("div",{ref:n,className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col",children:[u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:u.jsxs("div",{className:"w-full max-w-md space-y-8",children:[u.jsx("div",{className:"flex justify-center",ref:s,children:u.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full luxury-gradient flex items-center justify-center luxury-shadow overflow-hidden",children:u.jsx("img",{src:Py,alt:"ALAN Logo",className:"w-16 h-16 object-contain drop-shadow"})})}),u.jsxs("div",{className:"text-center space-y-4",ref:i,children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:f.title}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:f.description})]}),u.jsx("div",{className:"flex justify-center",ref:l,children:u.jsx("div",{className:"w-full flex items-center justify-center",children:u.jsx("img",{src:f.image,alt:"Onboarding illustration",className:"max-h-56 sm:max-h-64 object-contain"})})}),u.jsx("div",{className:"flex justify-center gap-2",children:fu.map((x,y)=>u.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${y===t?"w-8 bg-primary":"w-2 bg-muted"}`},y))})]})}),u.jsxs("div",{className:"p-6 space-y-3 max-w-md mx-auto w-full",children:[u.jsxs(Te,{onClick:d,className:"w-full h-12 text-base font-medium luxury-gradient",size:"lg",children:[t<fu.length-1?"Next":"Get Started",u.jsx(UE,{className:"ml-2 h-5 w-5"})]}),t<fu.length-1&&u.jsx(Te,{onClick:m,variant:"ghost",className:"w-full h-12 text-base font-medium",size:"lg",children:"Skip"})]})]})},ot=E.forwardRef(({className:t,type:e,...r},n)=>u.jsx("input",{type:e,className:Ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ot.displayName="Input";var R9="Label",sT=E.forwardRef((t,e)=>u.jsx(Le.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));sT.displayName=R9;var iT=sT;const O9=R0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=E.forwardRef(({className:t,...e},r)=>u.jsx(iT,{ref:r,className:Ie(O9(),t),...e}));Qe.displayName=iT.displayName;const He=E.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:Ie("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));He.displayName="Card";const ur=E.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:Ie("flex flex-col space-y-1.5 p-6",t),...e}));ur.displayName="CardHeader";const pr=E.forwardRef(({className:t,...e},r)=>u.jsx("h3",{ref:r,className:Ie("text-2xl font-semibold leading-none tracking-tight",t),...e}));pr.displayName="CardTitle";const Bi=E.forwardRef(({className:t,...e},r)=>u.jsx("p",{ref:r,className:Ie("text-sm text-muted-foreground",t),...e}));Bi.displayName="CardDescription";const Ct=E.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:Ie("p-6 pt-0",t),...e}));Ct.displayName="CardContent";const j9=E.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:Ie("flex items-center p-6 pt-0",t),...e}));j9.displayName="CardFooter";var M9=E.createContext(void 0);function Vc(t){const e=E.useContext(M9);return t||e||"ltr"}var Ap="rovingFocusGroup.onEntryFocus",k9={bubbles:!1,cancelable:!0},Bd="RovingFocusGroup",[vg,oT,P9]=A0(Bd),[D9,Hc]=gn(Bd,[P9]),[L9,B9]=D9(Bd),aT=E.forwardRef((t,e)=>u.jsx(vg.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(vg.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(F9,{...t,ref:e})})}));aT.displayName=Bd;var F9=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:f,preventScrollOnEntryFocus:x=!1,...y}=t,v=E.useRef(null),b=Je(e,v),S=Vc(i),[_,I]=yi({prop:l,defaultProp:d??null,onChange:m,caller:Bd}),[R,N]=E.useState(!1),A=cr(f),O=oT(r),k=E.useRef(!1),[F,B]=E.useState(0);return E.useEffect(()=>{const P=v.current;if(P)return P.addEventListener(Ap,A),()=>P.removeEventListener(Ap,A)},[A]),u.jsx(L9,{scope:r,orientation:n,dir:S,loop:s,currentTabStopId:_,onItemFocus:E.useCallback(P=>I(P),[I]),onItemShiftTab:E.useCallback(()=>N(!0),[]),onFocusableItemAdd:E.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:E.useCallback(()=>B(P=>P-1),[]),children:u.jsx(Le.div,{tabIndex:R||F===0?-1:0,"data-orientation":n,...y,ref:b,style:{outline:"none",...t.style},onMouseDown:Ne(t.onMouseDown,()=>{k.current=!0}),onFocus:Ne(t.onFocus,P=>{const M=!k.current;if(P.target===P.currentTarget&&M&&!R){const $=new CustomEvent(Ap,k9);if(P.currentTarget.dispatchEvent($),!$.defaultPrevented){const G=O().filter(J=>J.focusable),K=G.find(J=>J.active),ee=G.find(J=>J.id===_),V=[K,ee,...G].filter(Boolean).map(J=>J.ref.current);uT(V,x)}}k.current=!1}),onBlur:Ne(t.onBlur,()=>N(!1))})})}),lT="RovingFocusGroupItem",cT=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:l,...d}=t,m=$s(),f=i||m,x=B9(lT,r),y=x.currentTabStopId===f,v=oT(r),{onFocusableItemAdd:b,onFocusableItemRemove:S,currentTabStopId:_}=x;return E.useEffect(()=>{if(n)return b(),()=>S()},[n,b,S]),u.jsx(vg.ItemSlot,{scope:r,id:f,focusable:n,active:s,children:u.jsx(Le.span,{tabIndex:y?0:-1,"data-orientation":x.orientation,...d,ref:e,onMouseDown:Ne(t.onMouseDown,I=>{n?x.onItemFocus(f):I.preventDefault()}),onFocus:Ne(t.onFocus,()=>x.onItemFocus(f)),onKeyDown:Ne(t.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){x.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const R=V9(I,x.orientation,x.dir);if(R!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let A=v().filter(O=>O.focusable).map(O=>O.ref.current);if(R==="last")A.reverse();else if(R==="prev"||R==="next"){R==="prev"&&A.reverse();const O=A.indexOf(I.currentTarget);A=x.loop?H9(A,O+1):A.slice(O+1)}setTimeout(()=>uT(A))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:_!=null}):l})})});cT.displayName=lT;var U9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function V9(t,e,r){const n=z9(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return U9[n]}function uT(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function H9(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Dy=aT,Ly=cT,q0="Tabs",[$9,gH]=gn(q0,[Hc]),dT=Hc(),[W9,By]=$9(q0),hT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:d,activationMode:m="automatic",...f}=t,x=Vc(d),[y,v]=yi({prop:n,onChange:s,defaultProp:i??"",caller:q0});return u.jsx(W9,{scope:r,baseId:$s(),value:y,onValueChange:v,orientation:l,dir:x,activationMode:m,children:u.jsx(Le.div,{dir:x,"data-orientation":l,...f,ref:e})})});hT.displayName=q0;var fT="TabsList",mT=E.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=By(fT,r),l=dT(r);return u.jsx(Dy,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:u.jsx(Le.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});mT.displayName=fT;var pT="TabsTrigger",gT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,l=By(pT,r),d=dT(r),m=wT(l.baseId,n),f=vT(l.baseId,n),x=n===l.value;return u.jsx(Ly,{asChild:!0,...d,focusable:!s,active:x,children:u.jsx(Le.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":f,"data-state":x?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:m,...i,ref:e,onMouseDown:Ne(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?l.onValueChange(n):y.preventDefault()}),onKeyDown:Ne(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&l.onValueChange(n)}),onFocus:Ne(t.onFocus,()=>{const y=l.activationMode!=="manual";!x&&!s&&y&&l.onValueChange(n)})})})});gT.displayName=pT;var xT="TabsContent",yT=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...l}=t,d=By(xT,r),m=wT(d.baseId,n),f=vT(d.baseId,n),x=n===d.value,y=E.useRef(x);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),u.jsx(nn,{present:s||x,children:({present:v})=>u.jsx(Le.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!v,id:f,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&i})})});yT.displayName=xT;function wT(t,e){return`${t}-trigger-${e}`}function vT(t,e){return`${t}-content-${e}`}var G9=hT,bT=mT,_T=gT,CT=yT;const ET=G9,Fy=E.forwardRef(({className:t,...e},r)=>u.jsx(bT,{ref:r,className:Ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Fy.displayName=bT.displayName;const bd=E.forwardRef(({className:t,...e},r)=>u.jsx(_T,{ref:r,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=inactive]:text-muted-foreground/70 data-[state=inactive]:hover:text-muted-foreground",t),...e}));bd.displayName=_T.displayName;const bg=E.forwardRef(({className:t,...e},r)=>u.jsx(CT,{ref:r,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=inactive]:hidden",t),...e}));bg.displayName=CT.displayName;const Y9=()=>{const[t,e]=E.useState(!1),{signUp:r,signIn:n,user:s,userRole:i}=Gr(),l=sn(),[d,m]=E.useState("signin"),f=E.useRef(null),x=E.useRef(null),y=E.useRef(null);E.useRef(null),E.useEffect(()=>{ji.timeline({defaults:{ease:"power2.out"}}).fromTo(f.current,{opacity:0,y:-12,scale:.92},{opacity:1,y:0,scale:1,duration:.5}).fromTo(x.current,{opacity:0,y:16},{opacity:1,y:0,duration:.5},"-=0.25")},[]),E.useEffect(()=>{const N=y.current;if(!N)return;const A=N.querySelector('[data-state="active"]');if(!A)return;const O=A.scrollHeight,k=N.offsetHeight;ji.set(N,{height:k}),ji.to(N,{height:O,duration:.45,ease:"power2.out",onComplete:()=>ji.set(N,{height:"auto"})}),ji.fromTo(A,{opacity:0,y:8},{opacity:1,y:0,duration:.35,ease:"power2.out"})},[d]),E.useEffect(()=>{const N=y.current;if(!N)return;const A=N.querySelector('[data-state="active"]');A&&(ji.set(N,{height:A.scrollHeight}),ji.set(N,{height:"auto"}))},[]),E.useEffect(()=>{s&&i&&l(i==="admin"?"/admin":i==="restaurant_owner"?"/dashboard":"/home")},[s,i,l]);const[v,b]=E.useState({email:"",password:"",fullName:"",phone:""}),[S,_]=E.useState({email:"",password:""}),I=async N=>{N.preventDefault(),e(!0);const{error:A}=await r(v.email,v.password,v.fullName,v.phone);A?ve.error(A.message||"Failed to sign up"):(ve.success("Account created! Welcome to ALAN"),l("/home")),e(!1)},R=async N=>{N.preventDefault(),e(!0);const{error:A}=await n(S.email,S.password);A?ve.error(A.message||"Failed to sign in"):ve.success("Signing in..."),e(!1)};return u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:u.jsxs("div",{className:"w-full max-w-md space-y-6",children:[u.jsxs("div",{className:"text-center space-y-2",ref:f,children:[u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center overflow-hidden",children:u.jsx("img",{src:Py,alt:"ALAN Logo",className:"w-10 h-10 object-contain drop-shadow"})})}),u.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ALAN"}),u.jsx("p",{className:"text-muted-foreground",children:"Luxury dining made simple"})]}),u.jsxs(He,{className:"border-border/50 luxury-shadow",ref:x,children:[u.jsxs(ur,{children:[u.jsx(pr,{children:"Welcome"}),u.jsx(Bi,{children:"Sign in or create an account to continue"})]}),u.jsx(Ct,{className:"px-6 pt-2 pb-6",children:u.jsxs(ET,{value:d,onValueChange:N=>m(N),className:"w-full",children:[u.jsxs(Fy,{className:"grid w-full grid-cols-2",children:[u.jsx(bd,{value:"signin",children:"Sign In"}),u.jsx(bd,{value:"signup",children:"Sign Up"})]}),u.jsxs("div",{ref:y,className:"relative overflow-visible box-border px-3 sm:px-4 pb-5",children:[u.jsx(bg,{value:"signin",forceMount:!0,children:u.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signin-email",children:"Email"}),u.jsx(ot,{id:"signin-email",type:"email",placeholder:"your@email.com",value:S.email,onChange:N=>_({...S,email:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signin-password",children:"Password"}),u.jsx(ot,{id:"signin-password",type:"password",placeholder:"",value:S.password,onChange:N=>_({...S,password:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsx(Te,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Signing in...":"Sign In"})]})}),u.jsx(bg,{value:"signup",forceMount:!0,children:u.jsxs("form",{onSubmit:I,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signup-name",children:"Full Name"}),u.jsx(ot,{id:"signup-name",type:"text",placeholder:"John Doe",value:v.fullName,onChange:N=>b({...v,fullName:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signup-phone",children:"Phone"}),u.jsx(ot,{id:"signup-phone",type:"tel",placeholder:"+95 9 XXX XXX XXX",value:v.phone,onChange:N=>b({...v,phone:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signup-email",children:"Email"}),u.jsx(ot,{id:"signup-email",type:"email",placeholder:"your@email.com",value:v.email,onChange:N=>b({...v,email:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"signup-password",children:"Password"}),u.jsx(ot,{id:"signup-password",type:"password",placeholder:"",value:v.password,onChange:N=>b({...v,password:N.target.value}),required:!0,className:"h-12 px-4"})]}),u.jsx(Te,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Creating account...":"Create Account"})]})})]})]})})]})]})})},q9=R0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function kr({className:t,variant:e,...r}){return u.jsx("div",{className:Ie(q9({variant:e}),t),...r})}const X0=()=>{const t=Ko(),e=r=>t.pathname===r;return u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card/95 border-t border-border glass-effect z-50 backdrop-blur-xl",children:u.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[u.jsxs(Ch,{to:"/home",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/home")?"text-primary":"text-muted-foreground"}`,children:[u.jsx(WE,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),u.jsxs(Ch,{to:"/orders",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/orders")?"text-primary":"text-muted-foreground"}`,children:[u.jsx(XE,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),u.jsxs(Ch,{to:"/blog",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/blog")?"text-primary":"text-muted-foreground"}`,children:[u.jsx(Lx,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),u.jsxs(Ch,{to:"/profile",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/profile")?"text-primary":"text-muted-foreground"}`,children:[u.jsx(zs,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})},X9=(t,e)=>{if(!t||e<=0)return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"};switch(t){case"Explorer":return{label:"Explorer",description:"You are discovering new places. Keep exploring.",icon:"compass"};case"Preferred":return{label:"Preferred",description:"A valued guest with consistent fine dining choices.",icon:"star"};case"Loyal Customer":return{label:"Loyal Customer",description:"One of our most loyal guests. Thank you for dining with us.",icon:"shield"};case"Super Customer":return{label:"Super Customer",description:"Elite status. Enjoy priority perks and curated experiences.",icon:"crown"};default:return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"}}};function Uy(){const{user:t}=Gr(),[e,r]=E.useState(null),[n,s]=E.useState(!0);E.useEffect(()=>{(async()=>{if(!t){r(null),s(!1);return}s(!0);const{data:d,error:m}=await ue.from("customer_loyalty_summary").select("*").eq("customer_id",t.id).maybeSingle();if(!m&&d){r({customer_id:d.customer_id,total_points:Number(d.total_points)||0,total_completed_orders:Number(d.total_completed_orders)||0,total_spent:Number(d.total_spent)||0,current_badge:d.current_badge||"Newbie",updated_at:d.updated_at}),s(!1);return}const{data:f,error:x}=await ue.from("orders").select("total_amount, status").eq("customer_id",t.id).eq("status","completed");if(x){console.error("Failed to load loyalty summary:",x),r(null),s(!1);return}const y=(f||[]).reduce((I,R)=>I+(Number(R.total_amount)||0),0),v=(f==null?void 0:f.length)||0,b=Math.floor(y/1e5);let S;v<=0?S="Newbie":v<=4?S="Explorer":v<=9?S="Preferred":v<=29?S="Loyal Customer":S="Super Customer";const _=new Date().toISOString();r({customer_id:t.id,total_points:b,total_completed_orders:v,total_spent:y,current_badge:S,updated_at:_}),s(!1)})()},[t]);const i=X9(e==null?void 0:e.current_badge,(e==null?void 0:e.total_completed_orders)||0);return{loading:n,summary:e,badgeLabel:i.label,badgeDescription:i.description,badgeIcon:i.icon}}function K9({restaurants:t}){const e=sn(),r=E.useRef(null),n=E.useRef(0),s=E.useRef(null),i=(t||[]).filter(l=>l.image).slice(0,20);return E.useEffect(()=>{const l=r.current;if(!l||i.length===0)return;let d=!1,m=0,f=0,x=0,y=0,v=1,b=performance.now();const S=()=>l.scrollWidth-l.clientWidth,_=()=>{const M=S();l.scrollLeft<0&&(l.scrollLeft=0),l.scrollLeft>M&&(l.scrollLeft=M)},I=()=>{s.current!==null&&(cancelAnimationFrame(s.current),s.current=null)},R=()=>{const M=r.current;if(!M){s.current=null;return}const $=performance.now(),G=$-b;b=$;let K=n.current;if(Math.abs(K)>=.02)M.scrollLeft+=K,_(),K*=.95,n.current=K;else if(n.current=0,!d){const ee=S();if(ee>0){const V=.02*G*v;M.scrollLeft+=V,M.scrollLeft<=0?(M.scrollLeft=0,v=1):M.scrollLeft>=ee&&(M.scrollLeft=ee,v=-1)}}s.current=requestAnimationFrame(R)};I(),b=performance.now(),s.current=requestAnimationFrame(R);const N=M=>{d=!0,I(),m=M.pageX,x=M.pageX,f=l.scrollLeft,y=performance.now(),l.classList.add("cursor-grabbing")},A=M=>{if(d&&(d=!1,l.classList.remove("cursor-grabbing"),_(),M!==null)){const $=performance.now(),G=M-x,K=$-y||1;let ee=-(G/K)*12;ee>40&&(ee=40),ee<-40&&(ee=-40),n.current=ee}},O=M=>{A(M.pageX)},k=M=>{if(!d)return;M.preventDefault();const $=M.pageX-m;l.scrollLeft=f-$;const G=performance.now();x=M.pageX,y=G},F=M=>{if(!M.touches[0])return;d=!0,I();const $=M.touches[0].pageX;m=$,x=$,f=l.scrollLeft,y=performance.now()},B=M=>{const $=M.changedTouches&&M.changedTouches[0]?M.changedTouches[0].pageX:null;A($)},P=M=>{if(!d||!M.touches[0])return;const $=M.touches[0].pageX,G=$-m;l.scrollLeft=f-G;const K=performance.now();x=$,y=K};return l.addEventListener("mousedown",N),window.addEventListener("mouseup",O),l.addEventListener("mouseleave",O),l.addEventListener("mousemove",k),l.addEventListener("touchstart",F,{passive:!0}),l.addEventListener("touchend",B),l.addEventListener("touchcancel",B),l.addEventListener("touchmove",P,{passive:!1}),()=>{l.removeEventListener("mousedown",N),window.removeEventListener("mouseup",O),l.removeEventListener("mouseleave",O),l.removeEventListener("mousemove",k),l.removeEventListener("touchstart",F),l.removeEventListener("touchend",B),l.removeEventListener("touchcancel",B),l.removeEventListener("touchmove",P),I()}},[i.length]),i.length===0?null:u.jsxs("div",{className:"w-full mt-3 mb-4",children:[u.jsx("div",{ref:r,className:`\r
          mx-auto max-w-md px-4 flex gap-5 overflow-x-auto select-none\r
          snap-x snap-mandatory cursor-grab no-scrollbar\r
        `,style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(l=>u.jsxs("button",{onClick:()=>e(`/restaurant/${l.id}`),className:"relative flex-shrink-0 snap-start group",style:{scrollSnapAlign:"start"},children:[u.jsx("div",{className:`\r
                w-20 h-20 rounded-full overflow-hidden\r
                bg-black/70 border border-yellow-500/40\r
                transition-transform duration-300 ease-out\r
                group-active:scale-95 group-hover:scale-[1.03]\r
              `,children:u.jsx("img",{src:l.image||void 0,alt:l.title,className:"w-full h-full object-cover",loading:"lazy"})}),u.jsx("div",{className:"mt-1.5 w-20 text-center",children:u.jsx("span",{className:"text-[9px] font-semibold text-black block truncate",children:l.title})})]},l.id))}),u.jsx("style",{children:`
          .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .no-scrollbar::-webkit-scrollbar {
            display: none;
          }
        `})]})}const Q9=()=>{var oe,le,ce,Be,xe,be,Pe,Xe;const[t,e]=E.useState(""),[r,n]=E.useState([]),[s,i]=E.useState(!0),[l,d]=E.useState(!1),[m,f]=E.useState(!1),[x,y]=E.useState([]),[v,b]=E.useState(null),[S,_]=E.useState(null),[I,R]=E.useState(null),[N,A]=E.useState(null),O=sn(),{user:k,signOut:F}=Gr(),{loading:B,summary:P,badgeLabel:M,badgeIcon:$}=Uy(),G=((oe=k==null?void 0:k.user_metadata)==null?void 0:oe.full_name)||(k==null?void 0:k.email)||"Guest",K=()=>{const ae=new Date().getHours();return ae<12?"Good morning":ae<18?"Good afternoon":"Good evening"},ee=async()=>{await F(),d(!1),O("/auth")},z=()=>{const ae="w-3.5 h-3.5 text-yellow-300 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]";switch($){case"compass":return u.jsx(HE,{className:ae});case"star":return u.jsx(wc,{className:ae});case"shield":return u.jsx(kf,{className:ae});case"crown":return u.jsx($E,{className:ae});case"sparkles":default:return u.jsx(nd,{className:ae})}},V=async()=>{if(!k)return;const{data:ae,error:Ee}=await ue.from("customer_notifications").select("id, order_id, title, message, status, created_at").eq("customer_id",k.id).order("created_at",{ascending:!1}).limit(15);if(Ee){console.error("Failed to load notifications",Ee);return}y(ae||[])},J=()=>{const ae=new Audio("/sound/notification.mp3");return ae.preload="auto",ae},Y=()=>{try{J().play().catch(()=>{})}catch{}};E.useEffect(()=>{if(!k){y([]);return}V();const ae=ue.channel(`customer-notifications-${k.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"customer_notifications",filter:`customer_id=eq.${k.id}`},async Ee=>{const ke=Ee.new,Me={id:ke.id,order_id:ke.order_id,title:ke.title,message:ke.message,status:ke.status,created_at:ke.created_at};y(gt=>gt.some(St=>St.id===Me.id)?gt:[Me,...gt].slice(0,20)),Y()}).subscribe();return()=>{ue.removeChannel(ae)}},[k==null?void 0:k.id]);const q=x.filter(ae=>ae.status==="unread").length;E.useEffect(()=>{if(!l&&!m)return;const ae=Ee=>{const ke=Ee.target;l&&I&&!I.contains(ke)&&d(!1),m&&N&&!N.contains(ke)&&f(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[l,m,I,N]);const Q=async ae=>{if(typeof window<"u"&&(window.__alan_activeRatingNotificationId=ae.id,window.__alan_activeRatingNotificationOrderId=ae.order_id||null),b(ae),_(null),f(!1),ae.order_id)try{const{data:Ee,error:ke}=await ue.from("orders").select(`
            id,
            status,
            order_type,
            total_amount,
            created_at,
            order_items,
            restaurants (
              name,
              image_url,
              address
            )
          `).eq("id",ae.order_id).single();!ke&&Ee&&_(Ee)}catch(Ee){console.error("Failed to load order summary for notification",Ee)}if(ae.status==="unread"){y(ke=>ke.map(Me=>Me.id===ae.id?{...Me,status:"read"}:Me));const{error:Ee}=await ue.from("customer_notifications").update({status:"read"}).eq("id",ae.id);Ee&&console.error("Failed to mark notification read",Ee)}};E.useEffect(()=>{ie()},[]);const ie=async()=>{try{const{data:ae,error:Ee}=await ue.from("restaurants").select("*").order("rating",{ascending:!1});if(Ee)throw Ee;n(ae||[])}catch(ae){console.error("Error fetching restaurants:",ae),ve.error("Failed to load restaurants")}finally{i(!1)}},fe=r.filter(ae=>{var Ee;return ae.name.toLowerCase().includes(t.toLowerCase())||(((Ee=ae.cuisine_type)==null?void 0:Ee.toLowerCase())||"").includes(t.toLowerCase())});return u.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[u.jsx("div",{className:"sticky top-0 z-40 py-2 bg-background/60 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:u.jsxs("div",{className:"mx-auto max-w-md px-4",children:[u.jsx("div",{className:"luxury-gradient text-white rounded-xl shadow-md",children:u.jsxs("div",{className:"px-4 py-2 flex items-center justify-between gap-3",children:[u.jsx("img",{src:Py,alt:"ALAN Logo",className:"h-7 w-auto object-contain drop-shadow"}),u.jsxs("div",{className:"flex items-center gap-2 relative",children:[k&&u.jsxs("div",{className:"relative",ref:ae=>A(ae),children:[u.jsxs("button",{onClick:()=>{f(ae=>!ae),d(!1)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 transition-all","aria-label":"Notifications",children:[u.jsx(LE,{className:"h-4 w-4 text-white"}),q>0&&u.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[14px] h-[14px] px-[3px] rounded-full bg-red-500 text-[9px] leading-[14px] text-white flex items-center justify-center",children:q>9?"9+":q})]}),m&&u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[u.jsxs("div",{className:"px-3 py-2 border-b border-border/40 flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[11px] font-semibold text-foreground",children:"Activity"}),u.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Loyalty & orders"})]}),x.length>0&&u.jsx("button",{onClick:async()=>{const ae=x.filter(ke=>ke.status==="unread").map(ke=>ke.id);if(ae.length===0)return;const{error:Ee}=await ue.from("customer_notifications").update({status:"read"}).in("id",ae);Ee?console.error("Failed to mark all read",Ee):y(ke=>ke.map(Me=>ae.includes(Me.id)?{...Me,status:"read"}:Me))},className:"text-[8px] px-2 py-1 rounded-full bg-primary/5 text-primary hover:bg-primary/10",children:"Mark all as read"})]}),u.jsx("div",{className:"max-h-72 overflow-y-auto",children:x.length===0?u.jsx("div",{className:"px-3 py-4 text-[10px] text-muted-foreground",children:"No notifications yet. You will see your order and loyalty updates here."}):x.map(ae=>u.jsxs("button",{onClick:()=>Q(ae),className:`w-full px-3 py-2.5 flex items-start gap-2 hover:bg-accent/40 transition-colors ${ae.status==="unread"?"bg-primary/5":""}`,children:[u.jsx("div",{className:"mt-1 w-2 h-2",children:ae.status==="unread"?u.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):u.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:u.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[u.jsx("div",{className:`text-[9px] text-left ${ae.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}`,children:ae.message}),u.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const Ee=new Date(ae.created_at),ke=String(Ee.getDate()).padStart(2,"0"),Me=String(Ee.getMonth()+1).padStart(2,"0"),gt=Ee.getFullYear();let St=Ee.getHours();const er=String(Ee.getMinutes()).padStart(2,"0"),me=St>=12?"PM":"AM";return St=St%12||12,`${ke}/${Me}/${gt} ${St}:${er} ${me}`})()})]})]},ae.id))})]})]}),u.jsxs("div",{className:"relative",ref:ae=>R(ae),children:[u.jsxs("button",{onClick:()=>{d(ae=>!ae),f(!1)},className:"relative w-9 h-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/15 transition-all border border-white/20 shadow-sm","aria-label":"Profile & loyalty menu",children:[u.jsx(zs,{className:"h-4 w-4 text-white"}),u.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full bg-black/70 flex items-center justify-center border border-yellow-300/80 shadow-md",children:z()})]}),l&&u.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[u.jsxs("div",{className:"px-3 py-2.5 border-b border-border/40 flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full luxury-gradient flex items-center justify-center",children:u.jsx(zs,{className:"w-4 h-4 text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-[10px] font-semibold text-foreground truncate",children:G}),u.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:u.jsx(kr,{className:"px-1.5 py-0 text-[8px] rounded-full bg-primary/10 text-primary border-primary/20",children:B?"Calculating badge...":M||"Newbie"})})]}),P&&u.jsxs("div",{className:"w-14 h-14 rounded-full bg-primary flex flex-col items-center justify-center leading-tight shadow-sm",children:[u.jsx("span",{className:"text-[14px] font-semibold text-white",children:P.total_points}),u.jsx("span",{className:"text-[8px] uppercase tracking-wide text-white/85",children:"pts"})]})]}),u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>{d(!1),O("/profile")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[u.jsx(zs,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"View profile & history"})]}),u.jsxs("button",{onClick:()=>{d(!1),O("/orders")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[u.jsx(M1,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"My current orders"})]})]}),u.jsxs("button",{onClick:ee,className:"w-full px-3 py-2.5 text-[10px] text-left text-red-500 hover:bg-red-500/5 border-t border-border/40 flex items-center gap-2",children:[u.jsx(j0,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Logout"})]})]})]})]})]})}),u.jsx("p",{className:"text-xs opacity-80 mt-2 text-center",children:"Discover Fine Dining with Ease and Comfort"})]})}),v&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{b(null),_(null)},children:u.jsxs("div",{className:"w-[90%] max-w-sm bg-background rounded-2xl shadow-xl border border-border/60 p-4 space-y-3",onClick:ae=>ae.stopPropagation(),children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/40 flex items-center justify-center",children:v.message.includes("Please give us rating for our service.")?u.jsx("span",{className:"text-emerald-400 text-lg",children:""}):v.title.toLowerCase().includes("order placed")||v.message.toLowerCase().includes("order has been placed")?u.jsx("span",{className:"text-primary text-lg",children:""}):u.jsx("span",{className:"text-primary text-lg",children:""})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("h2",{className:"text-sm font-semibold text-foreground",children:v.title}),u.jsx("div",{className:"text-[9px] text-muted-foreground",children:(()=>{const ae=new Date(v.created_at),Ee=String(ae.getDate()).padStart(2,"0"),ke=String(ae.getMonth()+1).padStart(2,"0"),Me=ae.getFullYear();let gt=ae.getHours();const St=String(ae.getMinutes()).padStart(2,"0"),er=gt>=12?"PM":"AM";return gt=gt%12||12,`${Ee}/${ke}/${Me} - ${gt}:${St} ${er}`})()})]})]}),u.jsx("button",{onClick:()=>{b(null),_(null)},className:"text-[9px] px-2 py-0.5 rounded-full bg-muted text-muted-foreground hover:bg-accent/60",children:"Close"})]}),u.jsx("div",{className:"mt-1 text-[10px] leading-relaxed text-foreground whitespace-pre-line",children:v.message}),v.order_id&&!v.message.includes("Please give us rating for our service.")&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-border/40 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:"Order Summary"}),u.jsx("div",{className:"text-[8px] text-primary",children:"Live booking confirmed"})]}),S?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted overflow-hidden",children:(le=S.restaurants)!=null&&le.image_url?u.jsx("img",{src:S.restaurants.image_url,alt:S.restaurants.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] text-muted-foreground",children:((xe=(Be=(ce=S.restaurants)==null?void 0:ce.name)==null?void 0:Be.charAt(0))==null?void 0:xe.toUpperCase())||"R"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:((be=S.restaurants)==null?void 0:be.name)||"Your Restaurant"}),u.jsx("div",{className:"text-[8px] text-muted-foreground line-clamp-2",children:(Pe=S.restaurants)==null?void 0:Pe.address}),u.jsxs("div",{className:"mt-0.5 inline-flex items-center gap-1 px-2 py-[2px] rounded-full bg-primary/5 text-[8px] text-primary border border-primary/20",children:[u.jsx("span",{className:"text-[9px]",children:""}),u.jsx("span",{className:"capitalize",children:((Xe=S.order_type)==null?void 0:Xe.replace("_"," "))||"dine in"}),u.jsx("span",{className:"mx-1 text-[7px] text-muted-foreground",children:""}),u.jsx("span",{className:"capitalize text-[8px]",children:S.status||"paid"})]})]})]}),Array.isArray(S.order_items)&&S.order_items.length>0&&u.jsxs("div",{className:"bg-muted/40 rounded-xl px-2 py-2 space-y-1",children:[S.order_items.slice(0,3).map((ae,Ee)=>u.jsxs("div",{className:"flex justify-between items-center text-[8px] text-muted-foreground",children:[u.jsxs("span",{children:[ae.quantity," ",ae.name]}),ae.price&&u.jsxs("span",{className:"text-[8px]",children:[(ae.price*ae.quantity).toLocaleString()," MMK"]})]},Ee)),S.order_items.length>3&&u.jsxs("div",{className:"text-[7px] text-muted-foreground/80",children:["+ ",S.order_items.length-3," more item(s)"]})]}),u.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-border/40 mt-1",children:[u.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Total Paid"}),u.jsxs("div",{className:"text-[11px] font-semibold text-primary",children:[Number(S.total_amount||0).toLocaleString()," ","MMK"]})]})]}):u.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Loading your order summary..."})]}),v.message.includes("Please give us rating for our service.")&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-border/40",children:[u.jsxs("div",{className:"flex flex-col items-center gap-1 mb-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 border border-emerald-400/40 flex items-center justify-center shadow-sm",children:u.jsx("span",{className:"text-emerald-400 text-xl",children:""})}),u.jsx("div",{className:"text-[11px] font-semibold text-foreground",children:"Thank you for dining with us"}),u.jsx("div",{className:"text-[9px] text-muted-foreground text-center",children:"Rate your experience to help us refine our luxury service."})]}),u.jsx(Z9,{}),u.jsx("div",{className:"mt-2 text-[8px] text-center text-muted-foreground",children:"Your feedback updates this restaurant's rating in real time for all customers."})]})]})}),u.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h2",{className:"text-xl font-semibold",children:[K(),","," ",u.jsx("span",{className:"font-bold text-yellow-500",children:G})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Md,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(ot,{placeholder:"Search restaurants or cuisine...",value:t,onChange:ae=>e(ae.target.value),className:"pl-10"})]})]}),!s&&fe.length>0&&u.jsx(K9,{restaurants:[...fe].sort((ae,Ee)=>(Ee.rating||0)-(ae.rating||0)).slice(0,10).map(ae=>({id:ae.id,image:ae.image_url,title:ae.name}))}),s?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):fe.length===0?u.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No restaurants found"}):fe.map(ae=>u.jsxs(He,{className:"overflow-hidden cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg",onClick:()=>O(`/restaurant/${ae.id}`),children:[u.jsxs("div",{className:"relative h-48",children:[u.jsx("img",{src:ae.image_url,alt:ae.name,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute top-3 right-3",children:u.jsxs(kr,{className:"bg-primary text-primary-foreground border-0",children:[u.jsx(wc,{className:"h-3 w-3 mr-1 fill-current"}),ae.rating]})})]}),u.jsxs("div",{className:"p-4 space-y-2",children:[u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-lg text-foreground",children:ae.name}),u.jsx("p",{className:"text-sm text-muted-foreground",children:ae.description})]})}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[u.jsx(kr,{variant:"secondary",className:"font-normal",children:ae.cuisine_type}),u.jsxs("div",{className:"flex items-center gap-1 text-[0.625rem]",children:[u.jsx(M1,{className:"h-3 w-3"}),ae.address]})]})]})]},ae.id))]}),u.jsx(X0,{})]})},Z9=()=>{const[t,e]=E.useState(null),[r,n]=E.useState(null),[s,i]=E.useState(!1),l=x=>x?x<=1.5?"Very Bad":x<=2.5?"Needs Improvement":x<=3.5?"Good":x<=4.5?"Very Good":"Excellent":"Tap or hover to rate",d=async x=>{if(!(s||x<=0)){i(!0);try{const{data:{user:y}}=await ue.auth.getUser();if(!y){ve.error("Please sign in to rate");return}const v=window.__alan_activeRatingNotificationId;let S=window.__alan_activeRatingNotificationOrderId||null;if(!v&&!S){ve.error("Unable to link rating to order");return}if(!S&&v){const{data:N,error:A}=await ue.from("customer_notifications").select("order_id").eq("id",v).single();if(A||!(N!=null&&N.order_id)){ve.error("Unable to link rating to order");return}S=N.order_id}const{data:_,error:I}=await ue.from("orders").select("id, restaurant_id").eq("id",S).single();if(I||!(_!=null&&_.restaurant_id)){ve.error("Unable to resolve restaurant for rating");return}const{error:R}=await ue.from("restaurant_ratings").upsert({restaurant_id:_.restaurant_id,customer_id:y.id,order_id:_.id,rating:x},{onConflict:"restaurant_id,customer_id,order_id"});if(R){console.error("Failed to save rating",R),ve.error("Failed to submit rating");return}v&&await ue.from("customer_notifications").update({status:"read"}).eq("id",v),ve.success("Thank you for your rating!"),n(x),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alanRefreshRestaurants"))}catch(y){console.error("Error while submitting rating",y),ve.error("Something went wrong while submitting rating")}finally{i(!1)}}},m=t??r??0,f=x=>{const y=x+1,v=y-.5,b=m>=y,S=!b&&m>=v;return u.jsxs("div",{className:"relative w-7 h-7 cursor-pointer",onMouseMove:_=>{const I=_.currentTarget.getBoundingClientRect(),N=_.clientX-I.left<I.width/2?.5:1;e(y-(N===.5?.5:0))},onMouseLeave:()=>e(null),onClick:()=>d(m||y),onTouchStart:()=>{const _=y;e(_),d(_)},children:[u.jsx(wc,{className:"w-7 h-7 text-yellow-500/40"}),(b||S)&&u.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{width:b?"100%":"50%"},children:u.jsx(wc,{className:"w-7 h-7 text-yellow-400 fill-yellow-400 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]"})})]},y)};return u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("div",{className:"flex items-center gap-1.5",children:[0,1,2,3,4].map(f)}),u.jsx("div",{className:"text-[8px] text-emerald-400 font-medium mt-0.5",children:l(m)}),s&&u.jsx("div",{className:"text-[7px] text-muted-foreground mt-0.5",children:"Submitting your rating..."})]})};var Tp="focusScope.autoFocusOnMount",Ip="focusScope.autoFocusOnUnmount",ub={bubbles:!1,cancelable:!0},J9="FocusScope",K0=E.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=t,[d,m]=E.useState(null),f=cr(s),x=cr(i),y=E.useRef(null),v=Je(e,_=>m(_)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let _=function(A){if(b.paused||!d)return;const O=A.target;d.contains(O)?y.current=O:lo(y.current,{select:!0})},I=function(A){if(b.paused||!d)return;const O=A.relatedTarget;O!==null&&(d.contains(O)||lo(y.current,{select:!0}))},R=function(A){if(document.activeElement===document.body)for(const k of A)k.removedNodes.length>0&&lo(d)};document.addEventListener("focusin",_),document.addEventListener("focusout",I);const N=new MutationObserver(R);return d&&N.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",I),N.disconnect()}}},[n,d,b.paused]),E.useEffect(()=>{if(d){hb.add(b);const _=document.activeElement;if(!d.contains(_)){const R=new CustomEvent(Tp,ub);d.addEventListener(Tp,f),d.dispatchEvent(R),R.defaultPrevented||(eB(iB(ST(d)),{select:!0}),document.activeElement===_&&lo(d))}return()=>{d.removeEventListener(Tp,f),setTimeout(()=>{const R=new CustomEvent(Ip,ub);d.addEventListener(Ip,x),d.dispatchEvent(R),R.defaultPrevented||lo(_??document.body,{select:!0}),d.removeEventListener(Ip,x),hb.remove(b)},0)}}},[d,f,x,b]);const S=E.useCallback(_=>{if(!r&&!n||b.paused)return;const I=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,R=document.activeElement;if(I&&R){const N=_.currentTarget,[A,O]=tB(N);A&&O?!_.shiftKey&&R===O?(_.preventDefault(),r&&lo(A,{select:!0})):_.shiftKey&&R===A&&(_.preventDefault(),r&&lo(O,{select:!0})):R===N&&_.preventDefault()}},[r,n,b.paused]);return u.jsx(Le.div,{tabIndex:-1,...l,ref:v,onKeyDown:S})});K0.displayName=J9;function eB(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(lo(n,{select:e}),document.activeElement!==r)return}function tB(t){const e=ST(t),r=db(e,t),n=db(e.reverse(),t);return[r,n]}function ST(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function db(t,e){for(const r of t)if(!rB(r,{upTo:e}))return r}function rB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function nB(t){return t instanceof HTMLInputElement&&"select"in t}function lo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&nB(t)&&e&&t.select()}}var hb=sB();function sB(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=fb(t,e),t.unshift(e)},remove(e){var r;t=fb(t,e),(r=t[0])==null||r.resume()}}}function fb(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function iB(t){return t.filter(e=>e.tagName!=="A")}var Rp=0;function zy(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??mb()),document.body.insertAdjacentElement("beforeend",t[1]??mb()),Rp++,()=>{Rp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rp--}},[])}function mb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var of="right-scroll-bar-position",af="width-before-scroll-bar",oB="with-scroll-bars-hidden",aB="--removed-body-scroll-bar-size";function Op(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lB(t,e){var r=E.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var cB=typeof window<"u"?E.useLayoutEffect:E.useEffect,pb=new WeakMap;function uB(t,e){var r=lB(null,function(n){return t.forEach(function(s){return Op(s,n)})});return cB(function(){var n=pb.get(r);if(n){var s=new Set(n),i=new Set(t),l=r.current;s.forEach(function(d){i.has(d)||Op(d,null)}),i.forEach(function(d){s.has(d)||Op(d,l)})}pb.set(r,t)},[t]),r}function dB(t){return t}function hB(t,e){e===void 0&&(e=dB);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=e(i,n);return r.push(l),function(){r=r.filter(function(d){return d!==l})}},assignSyncMedium:function(i){for(n=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(d){return i(d)},filter:function(){return r}}},assignMedium:function(i){n=!0;var l=[];if(r.length){var d=r;r=[],d.forEach(i),l=r}var m=function(){var x=l;l=[],x.forEach(i)},f=function(){return Promise.resolve().then(m)};f(),r={push:function(x){l.push(x),f()},filter:function(x){return l=l.filter(x),r}}}};return s}function fB(t){t===void 0&&(t={});var e=hB(null);return e.options=ds({async:!0,ssr:!1},t),e}var NT=function(t){var e=t.sideCar,r=Qo(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,ds({},r))};NT.isSideCarExport=!0;function mB(t,e){return t.useMedium(e),NT}var AT=fB(),jp=function(){},Q0=E.forwardRef(function(t,e){var r=E.useRef(null),n=E.useState({onScrollCapture:jp,onWheelCapture:jp,onTouchMoveCapture:jp}),s=n[0],i=n[1],l=t.forwardProps,d=t.children,m=t.className,f=t.removeScrollBar,x=t.enabled,y=t.shards,v=t.sideCar,b=t.noRelative,S=t.noIsolation,_=t.inert,I=t.allowPinchZoom,R=t.as,N=R===void 0?"div":R,A=t.gapMode,O=Qo(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=v,F=uB([r,e]),B=ds(ds({},O),s);return E.createElement(E.Fragment,null,x&&E.createElement(k,{sideCar:AT,removeScrollBar:f,shards:y,noRelative:b,noIsolation:S,inert:_,setCallbacks:i,allowPinchZoom:!!I,lockRef:r,gapMode:A}),l?E.cloneElement(E.Children.only(d),ds(ds({},B),{ref:F})):E.createElement(N,ds({},B,{className:m,ref:F}),d))});Q0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q0.classNames={fullWidth:af,zeroRight:of};var pB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=pB();return e&&t.setAttribute("nonce",e),t}function xB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var wB=function(){var t=0,e=null;return{add:function(r){t==0&&(e=gB())&&(xB(e,r),yB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},vB=function(){var t=wB();return function(e,r){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},TT=function(){var t=vB(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},bB={left:0,top:0,right:0,gap:0},Mp=function(t){return parseInt(t||"",10)||0},_B=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Mp(r),Mp(n),Mp(s)]},CB=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return bB;var e=_B(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},EB=TT(),nc="data-scroll-locked",SB=function(t,e,r,n){var s=t.left,i=t.top,l=t.right,d=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(oB,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(d,"px ").concat(n,`;
  }
  body[`).concat(nc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(d,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(of,` {
    right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(af,` {
    margin-right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(of," .").concat(of,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(af," .").concat(af,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(nc,`] {
    `).concat(aB,": ").concat(d,`px;
  }
`)},gb=function(){var t=parseInt(document.body.getAttribute(nc)||"0",10);return isFinite(t)?t:0},NB=function(){E.useEffect(function(){return document.body.setAttribute(nc,(gb()+1).toString()),function(){var t=gb()-1;t<=0?document.body.removeAttribute(nc):document.body.setAttribute(nc,t.toString())}},[])},AB=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;NB();var i=E.useMemo(function(){return CB(s)},[s]);return E.createElement(EB,{styles:SB(i,!e,s,r?"":"!important")})},_g=!1;if(typeof window<"u")try{var kh=Object.defineProperty({},"passive",{get:function(){return _g=!0,!0}});window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{_g=!1}var Cl=_g?{passive:!1}:!1,TB=function(t){return t.tagName==="TEXTAREA"},IT=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!TB(t)&&r[e]==="visible")},IB=function(t){return IT(t,"overflowY")},RB=function(t){return IT(t,"overflowX")},xb=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=RT(t,n);if(s){var i=OT(t,n),l=i[1],d=i[2];if(l>d)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},OB=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},jB=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},RT=function(t,e){return t==="v"?IB(e):RB(e)},OT=function(t,e){return t==="v"?OB(e):jB(e)},MB=function(t,e){return t==="h"&&e==="rtl"?-1:1},kB=function(t,e,r,n,s){var i=MB(t,window.getComputedStyle(e).direction),l=i*n,d=r.target,m=e.contains(d),f=!1,x=l>0,y=0,v=0;do{if(!d)break;var b=OT(t,d),S=b[0],_=b[1],I=b[2],R=_-I-i*S;(S||R)&&RT(t,d)&&(y+=R,v+=S);var N=d.parentNode;d=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!m&&d!==document.body||m&&(e.contains(d)||e===d));return(x&&(Math.abs(y)<1||!s)||!x&&(Math.abs(v)<1||!s))&&(f=!0),f},Ph=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yb=function(t){return[t.deltaX,t.deltaY]},wb=function(t){return t&&"current"in t?t.current:t},PB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},DB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},LB=0,El=[];function BB(t){var e=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),s=E.useState(LB++)[0],i=E.useState(TT)[0],l=E.useRef(t);E.useEffect(function(){l.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=ly([t.lockRef.current],(t.shards||[]).map(wb),!0).filter(Boolean);return _.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var d=E.useCallback(function(_,I){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!l.current.allowPinchZoom;var R=Ph(_),N=r.current,A="deltaX"in _?_.deltaX:N[0]-R[0],O="deltaY"in _?_.deltaY:N[1]-R[1],k,F=_.target,B=Math.abs(A)>Math.abs(O)?"h":"v";if("touches"in _&&B==="h"&&F.type==="range")return!1;var P=xb(B,F);if(!P)return!0;if(P?k=B:(k=B==="v"?"h":"v",P=xb(B,F)),!P)return!1;if(!n.current&&"changedTouches"in _&&(A||O)&&(n.current=k),!k)return!0;var M=n.current||k;return kB(M,I,_,M==="h"?A:O,!0)},[]),m=E.useCallback(function(_){var I=_;if(!(!El.length||El[El.length-1]!==i)){var R="deltaY"in I?yb(I):Ph(I),N=e.current.filter(function(k){return k.name===I.type&&(k.target===I.target||I.target===k.shadowParent)&&PB(k.delta,R)})[0];if(N&&N.should){I.cancelable&&I.preventDefault();return}if(!N){var A=(l.current.shards||[]).map(wb).filter(Boolean).filter(function(k){return k.contains(I.target)}),O=A.length>0?d(I,A[0]):!l.current.noIsolation;O&&I.cancelable&&I.preventDefault()}}},[]),f=E.useCallback(function(_,I,R,N){var A={name:_,delta:I,target:R,should:N,shadowParent:FB(R)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(O){return O!==A})},1)},[]),x=E.useCallback(function(_){r.current=Ph(_),n.current=void 0},[]),y=E.useCallback(function(_){f(_.type,yb(_),_.target,d(_,t.lockRef.current))},[]),v=E.useCallback(function(_){f(_.type,Ph(_),_.target,d(_,t.lockRef.current))},[]);E.useEffect(function(){return El.push(i),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",m,Cl),document.addEventListener("touchmove",m,Cl),document.addEventListener("touchstart",x,Cl),function(){El=El.filter(function(_){return _!==i}),document.removeEventListener("wheel",m,Cl),document.removeEventListener("touchmove",m,Cl),document.removeEventListener("touchstart",x,Cl)}},[]);var b=t.removeScrollBar,S=t.inert;return E.createElement(E.Fragment,null,S?E.createElement(i,{styles:DB(s)}):null,b?E.createElement(AB,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function FB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const UB=mB(AT,BB);var Z0=E.forwardRef(function(t,e){return E.createElement(Q0,ds({},t,{ref:e,sideCar:UB}))});Z0.classNames=Q0.classNames;var zB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Sl=new WeakMap,Dh=new WeakMap,Lh={},kp=0,jT=function(t){return t&&(t.host||jT(t.parentNode))},VB=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=jT(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},HB=function(t,e,r,n){var s=VB(e,Array.isArray(t)?t:[t]);Lh[r]||(Lh[r]=new WeakMap);var i=Lh[r],l=[],d=new Set,m=new Set(s),f=function(y){!y||d.has(y)||(d.add(y),f(y.parentNode))};s.forEach(f);var x=function(y){!y||m.has(y)||Array.prototype.forEach.call(y.children,function(v){if(d.has(v))x(v);else try{var b=v.getAttribute(n),S=b!==null&&b!=="false",_=(Sl.get(v)||0)+1,I=(i.get(v)||0)+1;Sl.set(v,_),i.set(v,I),l.push(v),_===1&&S&&Dh.set(v,!0),I===1&&v.setAttribute(r,"true"),S||v.setAttribute(n,"true")}catch(R){console.error("aria-hidden: cannot operate on ",v,R)}})};return x(e),d.clear(),kp++,function(){l.forEach(function(y){var v=Sl.get(y)-1,b=i.get(y)-1;Sl.set(y,v),i.set(y,b),v||(Dh.has(y)||y.removeAttribute(n),Dh.delete(y)),b||y.removeAttribute(r)}),kp--,kp||(Sl=new WeakMap,Sl=new WeakMap,Dh=new WeakMap,Lh={})}},Vy=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=zB(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),HB(n,s,r,"aria-hidden")):function(){return null}},J0="Dialog",[MT,xH]=gn(J0),[$B,Ks]=MT(J0),kT=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:l=!0}=t,d=E.useRef(null),m=E.useRef(null),[f,x]=yi({prop:n,defaultProp:s??!1,onChange:i,caller:J0});return u.jsx($B,{scope:e,triggerRef:d,contentRef:m,contentId:$s(),titleId:$s(),descriptionId:$s(),open:f,onOpenChange:x,onOpenToggle:E.useCallback(()=>x(y=>!y),[x]),modal:l,children:r})};kT.displayName=J0;var PT="DialogTrigger",DT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(PT,r),i=Je(e,s.triggerRef);return u.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Wy(s.open),...n,ref:i,onClick:Ne(t.onClick,s.onOpenToggle)})});DT.displayName=PT;var Hy="DialogPortal",[WB,LT]=MT(Hy,{forceMount:void 0}),BT=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=Ks(Hy,e);return u.jsx(WB,{scope:e,forceMount:r,children:E.Children.map(n,l=>u.jsx(nn,{present:r||i.open,children:u.jsx(Od,{asChild:!0,container:s,children:l})}))})};BT.displayName=Hy;var e0="DialogOverlay",FT=E.forwardRef((t,e)=>{const r=LT(e0,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks(e0,t.__scopeDialog);return i.modal?u.jsx(nn,{present:n||i.open,children:u.jsx(YB,{...s,ref:e})}):null});FT.displayName=e0;var GB=Ha("DialogOverlay.RemoveScroll"),YB=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(e0,r);return u.jsx(Z0,{as:GB,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Le.div,{"data-state":Wy(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ga="DialogContent",UT=E.forwardRef((t,e)=>{const r=LT(Ga,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=Ks(Ga,t.__scopeDialog);return u.jsx(nn,{present:n||i.open,children:i.modal?u.jsx(qB,{...s,ref:e}):u.jsx(XB,{...s,ref:e})})});UT.displayName=Ga;var qB=E.forwardRef((t,e)=>{const r=Ks(Ga,t.__scopeDialog),n=E.useRef(null),s=Je(e,r.contentRef,n);return E.useEffect(()=>{const i=n.current;if(i)return Vy(i)},[]),u.jsx(zT,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ne(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0;(l.button===2||d)&&i.preventDefault()}),onFocusOutside:Ne(t.onFocusOutside,i=>i.preventDefault())})}),XB=E.forwardRef((t,e)=>{const r=Ks(Ga,t.__scopeDialog),n=E.useRef(!1),s=E.useRef(!1);return u.jsx(zT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,d;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(d=r.triggerRef.current)==null||d.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var m,f;(m=t.onInteractOutside)==null||m.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((f=r.triggerRef.current)==null?void 0:f.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zT=E.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...l}=t,d=Ks(Ga,r),m=E.useRef(null),f=Je(e,m);return zy(),u.jsxs(u.Fragment,{children:[u.jsx(K0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(Pc,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Wy(d.open),...l,ref:f,onDismiss:()=>d.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(KB,{titleId:d.titleId}),u.jsx(ZB,{contentRef:m,descriptionId:d.descriptionId})]})]})}),$y="DialogTitle",VT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks($y,r);return u.jsx(Le.h2,{id:s.titleId,...n,ref:e})});VT.displayName=$y;var HT="DialogDescription",$T=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(HT,r);return u.jsx(Le.p,{id:s.descriptionId,...n,ref:e})});$T.displayName=HT;var WT="DialogClose",GT=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=Ks(WT,r);return u.jsx(Le.button,{type:"button",...n,ref:e,onClick:Ne(t.onClick,()=>s.onOpenChange(!1))})});GT.displayName=WT;function Wy(t){return t?"open":"closed"}var YT="DialogTitleWarning",[yH,qT]=ij(YT,{contentName:Ga,titleName:$y,docsSlug:"dialog"}),KB=({titleId:t})=>{const e=qT(YT),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},QB="DialogDescriptionWarning",ZB=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qT(QB).contentName}}.`;return E.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},JB=kT,eF=DT,tF=BT,XT=FT,KT=UT,QT=VT,ZT=$T,rF=GT;const Xs=JB,JT=eF,nF=tF,e3=E.forwardRef(({className:t,...e},r)=>u.jsx(XT,{ref:r,className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));e3.displayName=XT.displayName;const _s=E.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(nF,{children:[u.jsx(e3,{}),u.jsxs(KT,{ref:n,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,u.jsxs(rF,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[u.jsx(QE,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_s.displayName=KT.displayName;const bi=({className:t,...e})=>u.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bi.displayName="DialogHeader";const Cg=({className:t,...e})=>u.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Cg.displayName="DialogFooter";const _i=E.forwardRef(({className:t,...e},r)=>u.jsx(QT,{ref:r,className:Ie("text-lg font-semibold leading-none tracking-tight",t),...e}));_i.displayName=QT.displayName;const t3=E.forwardRef(({className:t,...e},r)=>u.jsx(ZT,{ref:r,className:Ie("text-sm text-muted-foreground",t),...e}));t3.displayName=ZT.displayName;const sF=()=>{const{id:t}=d5(),e=sn(),[r,n]=E.useState(null),[s,i]=E.useState([]),[l,d]=E.useState(""),[m,f]=E.useState(!0),[x,y]=E.useState([]),[v,b]=E.useState("dine_in"),[S,_]=E.useState(null),[I,R]=E.useState(!1);E.useEffect(()=>{t&&N()},[t]);const N=async()=>{try{const[P,M]=await Promise.all([ue.from("restaurants").select("*").eq("id",t).single(),ue.from("menu_items").select("*").eq("restaurant_id",t).eq("available",!0)]);if(P.error)throw P.error;if(M.error)throw M.error;n(P.data),i(M.data||[])}catch(P){console.error("Error fetching data:",P),ve.error("Failed to load restaurant details")}finally{f(!1)}};if(m)return u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})});if(!r)return u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),u.jsx(Te,{onClick:()=>e("/home"),children:"Back to Home"})]})});const A=P=>{y(M=>M.find(G=>G.id===P.id)?M.map(G=>G.id===P.id?{...G,quantity:G.quantity+1}:G):[...M,{id:P.id,name:P.name,price:P.price,quantity:1}])},O=P=>{y(M=>{const $=M.find(G=>G.id===P);return $&&$.quantity>1?M.map(G=>G.id===P?{...G,quantity:G.quantity-1}:G):M.filter(G=>G.id!==P)})},k=x.reduce((P,M)=>P+M.price*M.quantity,0),F=x.reduce((P,M)=>P+M.quantity,0),B=()=>{if(x.length===0){ve.error("Please add items to your cart");return}e("/payment",{state:{cart:x,restaurant:r,orderType:v,totalAmount:k}})};return u.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[u.jsxs("div",{className:"relative h-64",children:[u.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}),u.jsx(Te,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-black/50 text-white hover:bg-black/70",onClick:()=>e(-1),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsx(Te,{variant:"secondary",size:"sm",className:"absolute bottom-4 right-4 bg-black/65 text-white hover:bg-black/80 border-none px-3 py-1 text-xs rounded-full",onClick:()=>{const M=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.address||r.name)}`;window.open(M,"_blank","noopener,noreferrer")},children:"View on Map"})]}),u.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r.name}),u.jsx("p",{className:"text-muted-foreground",children:r.description})]}),u.jsxs(kr,{className:"bg-primary text-primary-foreground border-0",children:[u.jsx(wc,{className:"h-3 w-3 mr-1 fill-current"}),r.rating]})]}),u.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(M1,{className:"h-4 w-4"}),r.address]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(ja,{className:"h-4 w-4"}),r.open_hours]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(YE,{className:"h-4 w-4"}),r.phone]})]})]}),u.jsxs(He,{className:"p-4",children:[u.jsx("h3",{className:"font-semibold mb-3",children:"Order Type"}),u.jsx(ET,{value:v,onValueChange:P=>b(P),children:u.jsxs(Fy,{className:"grid w-full grid-cols-2",children:[u.jsxs(bd,{value:"dine_in",children:[u.jsx(Fx,{className:"h-4 w-4 mr-2"}),"Dine In"]}),u.jsxs(bd,{value:"takeaway",children:[u.jsx(Pf,{className:"h-4 w-4 mr-2"}),"Takeaway"]})]})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Menu"}),u.jsx("div",{className:"mt-2",children:u.jsx("input",{type:"text",value:l,onChange:P=>d(P.target.value),placeholder:"Search menu items...",className:"w-full px-3 py-2 rounded-md border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary"})}),s.filter(P=>{const M=l.toLowerCase().trim();return M?P.name.toLowerCase().includes(M)||(P.description||"").toLowerCase().includes(M):!0}).map(P=>{const M=x.find($=>$.id===P.id);return u.jsx(He,{className:"overflow-hidden",children:u.jsxs("div",{className:"flex gap-4 p-4",children:[u.jsx("button",{type:"button",className:"focus:outline-none",onClick:()=>_(P),children:u.jsx("img",{src:P.image_url,alt:P.name,className:"w-24 h-24 rounded-lg object-cover transition-transform duration-200 hover:scale-105"})}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:P.name}),u.jsx("p",{className:"text-sm text-muted-foreground",children:P.description})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-semibold text-primary",children:[P.price.toLocaleString()," MMK"]}),M?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Te,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>O(P.id),children:u.jsx(sM,{className:"h-4 w-4"})}),u.jsx("span",{className:"w-8 text-center font-medium",children:M.quantity}),u.jsx(Te,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>A(P),children:u.jsx(ko,{className:"h-4 w-4"})})]}):u.jsxs(Te,{size:"sm",variant:"outline",onClick:()=>A(P),children:[u.jsx(ko,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})]})},P.id)})]})]}),u.jsx(Xs,{open:!!S,onOpenChange:P=>!P&&_(null),children:u.jsx(_s,{className:"max-w-sm p-0 border-0 bg-transparent shadow-none",children:S&&u.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[u.jsx("img",{src:S.image_url,alt:S.name,className:"w-full h-[360px] object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),u.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4 flex flex-col gap-2 text-white",children:[u.jsxs("div",{className:"flex items-baseline justify-between gap-3",children:[u.jsx("h3",{className:"text-lg font-semibold leading-tight",children:S.name}),u.jsxs("span",{className:"text-sm font-semibold px-2 py-1 rounded-full bg-white/12 backdrop-blur",children:[S.price.toLocaleString()," MMK"]})]}),S.description&&u.jsx("p",{className:"text-xs text-white/80 line-clamp-2",children:S.description}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs(Te,{size:"sm",className:"luxury-gradient px-5 py-2 text-sm font-medium shadow-md hover:shadow-lg transition-all",onClick:()=>{A(S),_(null)},children:[u.jsx(ko,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})})]})]})})}),x.length>0&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-4",children:u.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm text-muted-foreground",children:[F," items"]}),u.jsxs("div",{className:"text-lg font-bold",children:[k.toLocaleString()," MMK"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Te,{variant:"outline",size:"lg",onClick:()=>R(!0),children:"View Orders"}),u.jsx(Te,{onClick:B,className:"luxury-gradient",size:"lg",children:"Pay"})]})]})}),u.jsx(Xs,{open:I,onOpenChange:R,children:u.jsxs(_s,{className:"max-w-md",children:[u.jsx(bi,{children:u.jsx(_i,{children:"Your Order Summary"})}),x.length===0?u.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in your cart."}):u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"space-y-1",children:x.map(P=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium",children:P.name}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.quantity," x ",P.price.toLocaleString()," MMK"]})]}),u.jsxs("span",{className:"font-semibold",children:[(P.price*P.quantity).toLocaleString()," MMK"]})]},P.id))}),u.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[u.jsxs("span",{className:"text-sm text-muted-foreground",children:["Total (",F," items)"]}),u.jsxs("span",{className:"text-lg font-bold text-primary",children:[k.toLocaleString()," MMK"]})]})]})]})})]})};function Gy(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Yy="Radio",[iF,r3]=gn(Yy),[oF,aF]=iF(Yy),n3=E.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:i,disabled:l,value:d="on",onCheck:m,form:f,...x}=t,[y,v]=E.useState(null),b=Je(e,I=>v(I)),S=E.useRef(!1),_=y?f||!!y.closest("form"):!0;return u.jsxs(oF,{scope:r,checked:s,disabled:l,children:[u.jsx(Le.button,{type:"button",role:"radio","aria-checked":s,"data-state":a3(s),"data-disabled":l?"":void 0,disabled:l,value:d,...x,ref:b,onClick:Ne(t.onClick,I=>{s||m==null||m(),_&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),_&&u.jsx(o3,{control:y,bubbles:!S.current,name:n,value:d,checked:s,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});n3.displayName=Yy;var s3="RadioIndicator",i3=E.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...s}=t,i=aF(s3,r);return u.jsx(nn,{present:n||i.checked,children:u.jsx(Le.span,{"data-state":a3(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});i3.displayName=s3;var lF="RadioBubbleInput",o3=E.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const l=E.useRef(null),d=Je(l,i),m=Gy(r),f=qx(e);return E.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==r&&b){const S=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(S)}},[m,r,n]),u.jsx(Le.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:d,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o3.displayName=lF;function a3(t){return t?"checked":"unchecked"}var cF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],em="RadioGroup",[uF,wH]=gn(em,[Hc,r3]),l3=Hc(),c3=r3(),[dF,hF]=uF(em),u3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:i,required:l=!1,disabled:d=!1,orientation:m,dir:f,loop:x=!0,onValueChange:y,...v}=t,b=l3(r),S=Vc(f),[_,I]=yi({prop:i,defaultProp:s??null,onChange:y,caller:em});return u.jsx(dF,{scope:r,name:n,required:l,disabled:d,value:_,onValueChange:I,children:u.jsx(Dy,{asChild:!0,...b,orientation:m,dir:S,loop:x,children:u.jsx(Le.div,{role:"radiogroup","aria-required":l,"aria-orientation":m,"data-disabled":d?"":void 0,dir:S,...v,ref:e})})})});u3.displayName=em;var d3="RadioGroupItem",h3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...s}=t,i=hF(d3,r),l=i.disabled||n,d=l3(r),m=c3(r),f=E.useRef(null),x=Je(e,f),y=i.value===s.value,v=E.useRef(!1);return E.useEffect(()=>{const b=_=>{cF.includes(_.key)&&(v.current=!0)},S=()=>v.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",S)}},[]),u.jsx(Ly,{asChild:!0,...d,focusable:!l,active:y,children:u.jsx(n3,{disabled:l,required:i.required,checked:y,...m,...s,name:i.name,ref:x,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ne(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:Ne(s.onFocus,()=>{var b;v.current&&((b=f.current)==null||b.click())})})})});h3.displayName=d3;var fF="RadioGroupIndicator",f3=E.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,s=c3(r);return u.jsx(i3,{...s,...n,ref:e})});f3.displayName=fF;var m3=u3,p3=h3,mF=f3;const g3=E.forwardRef(({className:t,...e},r)=>u.jsx(m3,{className:Ie("grid gap-2",t),...e,ref:r}));g3.displayName=m3.displayName;const x3=E.forwardRef(({className:t,...e},r)=>u.jsx(p3,{ref:r,className:Ie("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:u.jsx(mF,{className:"flex items-center justify-center",children:u.jsx(VE,{className:"h-2.5 w-2.5 fill-current text-current"})})}));x3.displayName=p3.displayName;const pF=[{id:"mpu",name:"MPU Card",icon:eM},{id:"kbzpay",name:"KBZPay",icon:uM},{id:"wavepay",name:"WavePay",icon:dM}],gF=()=>{const t=Ko(),e=sn(),{cart:r,restaurant:n,orderType:s,totalAmount:i}=t.state||{},[l,d]=E.useState("kbzpay"),[m,f]=E.useState(!1);if(!r||!n)return e("/home"),null;const x=async()=>{f(!0),await new Promise(y=>setTimeout(y,2e3));try{const{data:{user:y}}=await ue.auth.getUser();if(!y){ve.error("Please sign in to complete your order"),e("/auth");return}const v=`ALAN-${Date.now()}-${n.id}-${y.id.substring(0,8)}`,{data:b,error:S}=await ue.from("orders").insert({customer_id:y.id,restaurant_id:n.id,order_type:s,payment_method:l,total_amount:i,status:"paid",qr_code:v,order_items:r}).select().single();if(S){console.error("Order creation error:",S),ve.error("Failed to create order. Please try again.");return}ve.success("Payment successful!"),e("/confirmation",{state:{order:b,restaurant:n,orderType:s}})}catch(y){console.error("Payment error:",y),ve.error("Failed to process payment. Please try again.")}finally{f(!1)}};return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:u.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-4",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsx("h1",{className:"text-2xl font-bold",children:"Payment"})]})}),u.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[u.jsxs(He,{className:"p-4 space-y-3",children:[u.jsx("h2",{className:"font-semibold text-lg",children:"Order Summary"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),u.jsx("span",{className:"font-medium",children:n.name})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),u.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Items"}),u.jsxs("span",{className:"font-medium",children:[r.length," item(s)"]})]}),u.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[u.jsx("span",{className:"font-semibold",children:"Total Amount"}),u.jsxs("span",{className:"font-bold text-primary text-lg",children:[i.toLocaleString()," MMK"]})]})]})]}),u.jsxs(He,{className:"p-4 space-y-4",children:[u.jsx("h2",{className:"font-semibold text-lg",children:"Payment Method"}),u.jsx(g3,{value:l,onValueChange:y=>d(y),children:pF.map(y=>{const v=y.icon;return u.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>d(y.id),children:[u.jsx(x3,{value:y.id,id:y.id}),u.jsxs(Qe,{htmlFor:y.id,className:"flex items-center gap-3 cursor-pointer flex-1",children:[u.jsx(v,{className:"h-5 w-5 text-primary"}),u.jsx("span",{className:"font-medium",children:y.name})]})]},y.id)})})]}),u.jsxs(He,{className:"p-4 space-y-3",children:[u.jsx("h2",{className:"font-semibold text-lg",children:"Items"}),r.map(y=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsxs("span",{children:[y.name," x ",y.quantity]}),u.jsxs("span",{className:"font-medium",children:[(y.price*y.quantity).toLocaleString()," MMK"]})]},y.id))]}),u.jsx(Te,{onClick:x,disabled:m,className:"w-full luxury-gradient h-12 text-base",size:"lg",children:m?u.jsxs(u.Fragment,{children:[u.jsx(Uo,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing Payment..."]}):`Pay ${i.toLocaleString()} MMK`}),u.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"This is a mock payment. No actual transaction will occur."})]})]})};var xF=Object.defineProperty,t0=Object.getOwnPropertySymbols,y3=Object.prototype.hasOwnProperty,w3=Object.prototype.propertyIsEnumerable,vb=(t,e,r)=>e in t?xF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Eg=(t,e)=>{for(var r in e||(e={}))y3.call(e,r)&&vb(t,r,e[r]);if(t0)for(var r of t0(e))w3.call(e,r)&&vb(t,r,e[r]);return t},Sg=(t,e)=>{var r={};for(var n in t)y3.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&t0)for(var n of t0(t))e.indexOf(n)<0&&w3.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ya;(t=>{const e=class at{constructor(m,f,x,y){if(this.version=m,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],m<at.MIN_VERSION||m>at.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let v=[];for(let S=0;S<this.size;S++)v.push(!1);for(let S=0;S<this.size;S++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(x);if(this.drawCodewords(b),y==-1){let S=1e9;for(let _=0;_<8;_++){this.applyMask(_),this.drawFormatBits(_);const I=this.getPenaltyScore();I<S&&(y=_,S=I),this.applyMask(_)}}s(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(m,f){const x=t.QrSegment.makeSegments(m);return at.encodeSegments(x,f)}static encodeBinary(m,f){const x=t.QrSegment.makeBytes(m);return at.encodeSegments([x],f)}static encodeSegments(m,f,x=1,y=40,v=-1,b=!0){if(!(at.MIN_VERSION<=x&&x<=y&&y<=at.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let S,_;for(S=x;;S++){const A=at.getNumDataCodewords(S,f)*8,O=l.getTotalBits(m,S);if(O<=A){_=O;break}if(S>=y)throw new RangeError("Data too long")}for(const A of[at.Ecc.MEDIUM,at.Ecc.QUARTILE,at.Ecc.HIGH])b&&_<=at.getNumDataCodewords(S,A)*8&&(f=A);let I=[];for(const A of m){r(A.mode.modeBits,4,I),r(A.numChars,A.mode.numCharCountBits(S),I);for(const O of A.getData())I.push(O)}s(I.length==_);const R=at.getNumDataCodewords(S,f)*8;s(I.length<=R),r(0,Math.min(4,R-I.length),I),r(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let A=236;I.length<R;A^=253)r(A,8,I);let N=[];for(;N.length*8<I.length;)N.push(0);return I.forEach((A,O)=>N[O>>>3]|=A<<7-(O&7)),new at(S,f,N,v)}getModule(m,f){return 0<=m&&m<this.size&&0<=f&&f<this.size&&this.modules[f][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let x=0;x<this.size;x++)this.setFunctionModule(6,x,x%2==0),this.setFunctionModule(x,6,x%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),f=m.length;for(let x=0;x<f;x++)for(let y=0;y<f;y++)x==0&&y==0||x==0&&y==f-1||x==f-1&&y==0||this.drawAlignmentPattern(m[x],m[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const f=this.errorCorrectionLevel.formatBits<<3|m;let x=f;for(let v=0;v<10;v++)x=x<<1^(x>>>9)*1335;const y=(f<<10|x)^21522;s(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,n(y,v));this.setFunctionModule(8,7,n(y,6)),this.setFunctionModule(8,8,n(y,7)),this.setFunctionModule(7,8,n(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,n(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,n(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,n(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let x=0;x<12;x++)m=m<<1^(m>>>11)*7973;const f=this.version<<12|m;s(f>>>18==0);for(let x=0;x<18;x++){const y=n(f,x),v=this.size-11+x%3,b=Math.floor(x/3);this.setFunctionModule(v,b,y),this.setFunctionModule(b,v,y)}}drawFinderPattern(m,f){for(let x=-4;x<=4;x++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(x)),b=m+y,S=f+x;0<=b&&b<this.size&&0<=S&&S<this.size&&this.setFunctionModule(b,S,v!=2&&v!=4)}}drawAlignmentPattern(m,f){for(let x=-2;x<=2;x++)for(let y=-2;y<=2;y++)this.setFunctionModule(m+y,f+x,Math.max(Math.abs(y),Math.abs(x))!=1)}setFunctionModule(m,f,x){this.modules[f][m]=x,this.isFunction[f][m]=!0}addEccAndInterleave(m){const f=this.version,x=this.errorCorrectionLevel;if(m.length!=at.getNumDataCodewords(f,x))throw new RangeError("Invalid argument");const y=at.NUM_ERROR_CORRECTION_BLOCKS[x.ordinal][f],v=at.ECC_CODEWORDS_PER_BLOCK[x.ordinal][f],b=Math.floor(at.getNumRawDataModules(f)/8),S=y-b%y,_=Math.floor(b/y);let I=[];const R=at.reedSolomonComputeDivisor(v);for(let A=0,O=0;A<y;A++){let k=m.slice(O,O+_-v+(A<S?0:1));O+=k.length;const F=at.reedSolomonComputeRemainder(k,R);A<S&&k.push(0),I.push(k.concat(F))}let N=[];for(let A=0;A<I[0].length;A++)I.forEach((O,k)=>{(A!=_-v||k>=S)&&N.push(O[A])});return s(N.length==b),N}drawCodewords(m){if(m.length!=Math.floor(at.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let x=this.size-1;x>=1;x-=2){x==6&&(x=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const b=x-v,_=(x+1&2)==0?this.size-1-y:y;!this.isFunction[_][b]&&f<m.length*8&&(this.modules[_][b]=n(m[f>>>3],7-(f&7)),f++)}}s(f==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let x=0;x<this.size;x++){let y;switch(m){case 0:y=(x+f)%2==0;break;case 1:y=f%2==0;break;case 2:y=x%3==0;break;case 3:y=(x+f)%3==0;break;case 4:y=(Math.floor(x/3)+Math.floor(f/2))%2==0;break;case 5:y=x*f%2+x*f%3==0;break;case 6:y=(x*f%2+x*f%3)%2==0;break;case 7:y=((x+f)%2+x*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][x]&&y&&(this.modules[f][x]=!this.modules[f][x])}}getPenaltyScore(){let m=0;for(let v=0;v<this.size;v++){let b=!1,S=0,_=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[v][I]==b?(S++,S==5?m+=at.PENALTY_N1:S>5&&m++):(this.finderPenaltyAddHistory(S,_),b||(m+=this.finderPenaltyCountPatterns(_)*at.PENALTY_N3),b=this.modules[v][I],S=1);m+=this.finderPenaltyTerminateAndCount(b,S,_)*at.PENALTY_N3}for(let v=0;v<this.size;v++){let b=!1,S=0,_=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][v]==b?(S++,S==5?m+=at.PENALTY_N1:S>5&&m++):(this.finderPenaltyAddHistory(S,_),b||(m+=this.finderPenaltyCountPatterns(_)*at.PENALTY_N3),b=this.modules[I][v],S=1);m+=this.finderPenaltyTerminateAndCount(b,S,_)*at.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let b=0;b<this.size-1;b++){const S=this.modules[v][b];S==this.modules[v][b+1]&&S==this.modules[v+1][b]&&S==this.modules[v+1][b+1]&&(m+=at.PENALTY_N2)}let f=0;for(const v of this.modules)f=v.reduce((b,S)=>b+(S?1:0),f);const x=this.size*this.size,y=Math.ceil(Math.abs(f*20-x*10)/x)-1;return s(0<=y&&y<=9),m+=y*at.PENALTY_N4,s(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let x=[6];for(let y=this.size-7;x.length<m;y-=f)x.splice(1,0,y);return x}}static getNumRawDataModules(m){if(m<at.MIN_VERSION||m>at.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*m+128)*m+64;if(m>=2){const x=Math.floor(m/7)+2;f-=(25*x-10)*x-55,m>=7&&(f-=36)}return s(208<=f&&f<=29648),f}static getNumDataCodewords(m,f){return Math.floor(at.getNumRawDataModules(m)/8)-at.ECC_CODEWORDS_PER_BLOCK[f.ordinal][m]*at.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let f=[];for(let y=0;y<m-1;y++)f.push(0);f.push(1);let x=1;for(let y=0;y<m;y++){for(let v=0;v<f.length;v++)f[v]=at.reedSolomonMultiply(f[v],x),v+1<f.length&&(f[v]^=f[v+1]);x=at.reedSolomonMultiply(x,2)}return f}static reedSolomonComputeRemainder(m,f){let x=f.map(y=>0);for(const y of m){const v=y^x.shift();x.push(0),f.forEach((b,S)=>x[S]^=at.reedSolomonMultiply(b,v))}return x}static reedSolomonMultiply(m,f){if(m>>>8||f>>>8)throw new RangeError("Byte out of range");let x=0;for(let y=7;y>=0;y--)x=x<<1^(x>>>7)*285,x^=(f>>>y&1)*m;return s(x>>>8==0),x}finderPenaltyCountPatterns(m){const f=m[1];s(f<=this.size*3);const x=f>0&&m[2]==f&&m[3]==f*3&&m[4]==f&&m[5]==f;return(x&&m[0]>=f*4&&m[6]>=f?1:0)+(x&&m[6]>=f*4&&m[0]>=f?1:0)}finderPenaltyTerminateAndCount(m,f,x){return m&&(this.finderPenaltyAddHistory(f,x),f=0),f+=this.size,this.finderPenaltyAddHistory(f,x),this.finderPenaltyCountPatterns(x)}finderPenaltyAddHistory(m,f){f[0]==0&&(m+=this.size),f.pop(),f.unshift(m)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(d,m,f){if(m<0||m>31||d>>>m)throw new RangeError("Value out of range");for(let x=m-1;x>=0;x--)f.push(d>>>x&1)}function n(d,m){return(d>>>m&1)!=0}function s(d){if(!d)throw new Error("Assertion error")}const i=class ir{constructor(m,f,x){if(this.mode=m,this.numChars=f,this.bitData=x,f<0)throw new RangeError("Invalid argument");this.bitData=x.slice()}static makeBytes(m){let f=[];for(const x of m)r(x,8,f);return new ir(ir.Mode.BYTE,m.length,f)}static makeNumeric(m){if(!ir.isNumeric(m))throw new RangeError("String contains non-numeric characters");let f=[];for(let x=0;x<m.length;){const y=Math.min(m.length-x,3);r(parseInt(m.substring(x,x+y),10),y*3+1,f),x+=y}return new ir(ir.Mode.NUMERIC,m.length,f)}static makeAlphanumeric(m){if(!ir.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],x;for(x=0;x+2<=m.length;x+=2){let y=ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x))*45;y+=ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x+1)),r(y,11,f)}return x<m.length&&r(ir.ALPHANUMERIC_CHARSET.indexOf(m.charAt(x)),6,f),new ir(ir.Mode.ALPHANUMERIC,m.length,f)}static makeSegments(m){return m==""?[]:ir.isNumeric(m)?[ir.makeNumeric(m)]:ir.isAlphanumeric(m)?[ir.makeAlphanumeric(m)]:[ir.makeBytes(ir.toUtf8ByteArray(m))]}static makeEci(m){let f=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)r(m,8,f);else if(m<16384)r(2,2,f),r(m,14,f);else if(m<1e6)r(6,3,f),r(m,21,f);else throw new RangeError("ECI assignment value out of range");return new ir(ir.Mode.ECI,0,f)}static isNumeric(m){return ir.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return ir.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,f){let x=0;for(const y of m){const v=y.mode.numCharCountBits(f);if(y.numChars>=1<<v)return 1/0;x+=4+v+y.bitData.length}return x}static toUtf8ByteArray(m){m=encodeURI(m);let f=[];for(let x=0;x<m.length;x++)m.charAt(x)!="%"?f.push(m.charCodeAt(x)):(f.push(parseInt(m.substring(x+1,x+3),16)),x+=2);return f}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=i;t.QrSegment=i})(Ya||(Ya={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Ya||(Ya={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Ya||(Ya={}));var Hl=Ya;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var yF={L:Hl.QrCode.Ecc.LOW,M:Hl.QrCode.Ecc.MEDIUM,Q:Hl.QrCode.Ecc.QUARTILE,H:Hl.QrCode.Ecc.HIGH},v3=128,b3="L",_3="#FFFFFF",C3="#000000",E3=!1,S3=1,wF=4,vF=0,bF=.1;function N3(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(l,d){if(!l&&i!==null){r.push(`M${i+e} ${s+e}h${d-i}v1H${i+e}z`),i=null;return}if(d===n.length-1){if(!l)return;i===null?r.push(`M${d+e},${s+e} h1v1H${d+e}z`):r.push(`M${i+e},${s+e} h${d+1-i}v1H${i+e}z`);return}l&&i===null&&(i=d)})}),r.join("")}function A3(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function _F(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*bF),l=s/e,d=(n.width||i)*l,m=(n.height||i)*l,f=n.x==null?t.length/2-d/2:n.x*l,x=n.y==null?t.length/2-m/2:n.y*l,y=n.opacity==null?1:n.opacity;let v=null;if(n.excavate){let S=Math.floor(f),_=Math.floor(x),I=Math.ceil(d+f-S),R=Math.ceil(m+x-_);v={x:S,y:_,w:I,h:R}}const b=n.crossOrigin;return{x:f,y:x,h:m,w:d,excavation:v,opacity:y,crossOrigin:b}}function CF(t,e){return e!=null?Math.max(Math.floor(e),0):t?wF:vF}function T3({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:l,boostLevel:d}){let m=pe.useMemo(()=>{const S=(Array.isArray(t)?t:[t]).reduce((_,I)=>(_.push(...Hl.QrSegment.makeSegments(I)),_),[]);return Hl.QrCode.encodeSegments(S,yF[e],r,void 0,void 0,d)},[t,e,r,d]);const{cells:f,margin:x,numCells:y,calculatedImageSettings:v}=pe.useMemo(()=>{let b=m.getModules();const S=CF(n,s),_=b.length+S*2,I=_F(b,l,S,i);return{cells:b,margin:S,numCells:_,calculatedImageSettings:I}},[m,l,i,n,s]);return{qrcode:m,margin:x,cells:f,numCells:y,calculatedImageSettings:v}}var EF=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),SF=pe.forwardRef(function(e,r){const n=e,{value:s,size:i=v3,level:l=b3,bgColor:d=_3,fgColor:m=C3,includeMargin:f=E3,minVersion:x=S3,boostLevel:y,marginSize:v,imageSettings:b}=n,_=Sg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=_,R=Sg(_,["style"]),N=b==null?void 0:b.src,A=pe.useRef(null),O=pe.useRef(null),k=pe.useCallback(z=>{A.current=z,typeof r=="function"?r(z):r&&(r.current=z)},[r]),[F,B]=pe.useState(!1),{margin:P,cells:M,numCells:$,calculatedImageSettings:G}=T3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:f,marginSize:v,imageSettings:b,size:i});pe.useEffect(()=>{if(A.current!=null){const z=A.current,V=z.getContext("2d");if(!V)return;let J=M;const Y=O.current,q=G!=null&&Y!==null&&Y.complete&&Y.naturalHeight!==0&&Y.naturalWidth!==0;q&&G.excavation!=null&&(J=A3(M,G.excavation));const Q=window.devicePixelRatio||1;z.height=z.width=i*Q;const ie=i/$*Q;V.scale(ie,ie),V.fillStyle=d,V.fillRect(0,0,$,$),V.fillStyle=m,EF?V.fill(new Path2D(N3(J,P))):M.forEach(function(fe,oe){fe.forEach(function(le,ce){le&&V.fillRect(ce+P,oe+P,1,1)})}),G&&(V.globalAlpha=G.opacity),q&&V.drawImage(Y,G.x+P,G.y+P,G.w,G.h)}}),pe.useEffect(()=>{B(!1)},[N]);const K=Eg({height:i,width:i},I);let ee=null;return N!=null&&(ee=pe.createElement("img",{src:N,key:N,style:{display:"none"},onLoad:()=>{B(!0)},ref:O,crossOrigin:G==null?void 0:G.crossOrigin})),pe.createElement(pe.Fragment,null,pe.createElement("canvas",Eg({style:K,height:i,width:i,ref:k,role:"img"},R)),ee)});SF.displayName="QRCodeCanvas";var r0=pe.forwardRef(function(e,r){const n=e,{value:s,size:i=v3,level:l=b3,bgColor:d=_3,fgColor:m=C3,includeMargin:f=E3,minVersion:x=S3,boostLevel:y,title:v,marginSize:b,imageSettings:S}=n,_=Sg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:R,numCells:N,calculatedImageSettings:A}=T3({value:s,level:l,minVersion:x,boostLevel:y,includeMargin:f,marginSize:b,imageSettings:S,size:i});let O=R,k=null;S!=null&&A!=null&&(A.excavation!=null&&(O=A3(R,A.excavation)),k=pe.createElement("image",{href:S.src,height:A.h,width:A.w,x:A.x+I,y:A.y+I,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const F=N3(O,I);return pe.createElement("svg",Eg({height:i,width:i,viewBox:`0 0 ${N} ${N}`,ref:r,role:"img"},_),!!v&&pe.createElement("title",null,v),pe.createElement("path",{fill:d,d:`M0,0 h${N}v${N}H0z`,shapeRendering:"crispEdges"}),pe.createElement("path",{fill:m,d:F,shapeRendering:"crispEdges"}),k)});r0.displayName="QRCodeSVG";const NF=()=>{const t=Ko(),e=sn(),{order:r,restaurant:n,orderType:s}=t.state||{};return!r||!n?(e("/home"),null):u.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:u.jsxs("div",{className:"max-w-md w-full space-y-6",children:[u.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[u.jsx("div",{className:"w-20 h-20 rounded-full luxury-gradient flex items-center justify-center",children:u.jsx(O0,{className:"w-12 h-12 text-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-center",children:"Payment Successful!"}),u.jsx("p",{className:"text-muted-foreground text-center",children:s==="dine_in"?"Your table is ready":"Your order is confirmed"})]}),u.jsxs(He,{className:"p-6 space-y-4 luxury-shadow",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"font-semibold text-lg",children:"Your QR Code"}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["Show this code at ",n.name," to confirm your booking"]})]}),u.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:u.jsx(r0,{value:r.qr_code,size:200,level:"H",includeMargin:!0})}),u.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),u.jsx("span",{className:"font-medium",children:r.id.slice(0,8)})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),u.jsx("span",{className:"font-medium",children:n.name})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Type"}),u.jsx("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Amount"}),u.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(Te,{onClick:()=>e("/orders"),className:"w-full luxury-gradient",size:"lg",children:"View My Orders"}),u.jsxs(Te,{onClick:()=>e("/home"),variant:"outline",className:"w-full",size:"lg",children:[u.jsx(WE,{className:"mr-2 h-5 w-5"}),"Back to Home"]})]}),u.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"A confirmation has been sent to your registered email"})]})})},bb={paid:"bg-blue-500",preparing:"bg-yellow-500",ready:"bg-green-500",served:"bg-purple-500",completed:"bg-gray-500",cancelled:"bg-red-500"},AF=()=>{var f,x,y;const[t,e]=E.useState([]),[r,n]=E.useState(null),[s,i]=E.useState(!1),[l,d]=E.useState(!0);E.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:{user:v}}=await ue.auth.getUser();if(!v){ve.error("Please sign in to view your orders"),d(!1);return}const{data:b,error:S}=await ue.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          )
        `).eq("customer_id",v.id).order("created_at",{ascending:!1});S&&(console.error("Error fetching orders:",S),ve.error("Failed to load orders")),e(b||[])}catch(v){console.error("Error fetching orders:",v),ve.error("Failed to load orders")}finally{d(!1)}};return l?u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):u.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[u.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:u.jsxs("div",{className:"max-w-md mx-auto",children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Orders"}),u.jsx("p",{className:"text-muted-foreground",children:"Track your bookings and orders"})]})}),u.jsx("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:t.filter(v=>v.status!=="completed").length===0?u.jsxs(He,{className:"p-8 text-center space-y-2",children:[u.jsx("p",{className:"text-muted-foreground",children:"No active orders"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Your completed orders are now available in your profile under Order History."})]}):t.filter(v=>v.status!=="completed").map(v=>{var b,S,_,I;return u.jsx(He,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>n(v),children:u.jsxs("div",{className:"flex gap-4 p-4",children:[u.jsx("img",{src:(b=v.restaurants)==null?void 0:b.image_url,alt:(S=v.restaurants)==null?void 0:S.name,className:"w-20 h-20 rounded-lg object-cover"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:(_=v.restaurants)==null?void 0:_.name}),u.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(I=v.order_type)==null?void 0:I.replace("_"," ")})]}),u.jsx(kr,{className:`${bb[v.status]} text-white border-0`,children:v.status})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[u.jsx(ja,{className:"h-3 w-3"}),(()=>{const R=new Date(v.created_at),N=String(R.getDate()).padStart(2,"0"),A=String(R.getMonth()+1).padStart(2,"0"),O=R.getFullYear();let k=R.getHours();const F=String(R.getMinutes()).padStart(2,"0"),B=k>=12?"PM":"AM";return k=k%12||12,`${N}/${A}/${O} - ${k}:${F} ${B}`})()]}),u.jsxs("span",{className:"font-semibold text-primary",children:[v.total_amount.toLocaleString()," MMK"]})]})]})]})},v.id)})}),u.jsx(Xs,{open:!!r&&!s,onOpenChange:v=>{v||(n(null),i(!1))},children:u.jsxs(_s,{className:"w-full max-w-md",children:[u.jsx(bi,{children:u.jsx(_i,{children:"Order Details"})}),r&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-white rounded-xl shadow-sm",children:[u.jsx("div",{className:"text-xs font-medium text-muted-foreground tracking-wide uppercase text-center",children:"Present this QR code at the restaurant"}),u.jsx("button",{type:"button",className:"mt-1",onClick:()=>i(!0),children:u.jsx(r0,{value:r.qr_code,size:220,level:"H",includeMargin:!0})}),u.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center",children:"Tap the QR code to enlarge for easier scanning."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),u.jsx("span",{className:"font-medium",children:(f=r.restaurants)==null?void 0:f.name})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),u.jsx("span",{className:"font-medium capitalize",children:(x=r.order_type)==null?void 0:x.replace("_"," ")})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Payment Method"}),u.jsx("span",{className:"font-medium uppercase",children:r.payment_method})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-muted-foreground",children:"Status"}),u.jsx(kr,{className:`${bb[r.status]} text-white border-0`,children:r.status})]}),u.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[u.jsx("span",{className:"font-semibold",children:"Total Amount"}),u.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold text-sm",children:"Items"}),(y=r.order_items)==null?void 0:y.map((v,b)=>u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsxs("span",{children:[v.name," x ",v.quantity]}),u.jsxs("span",{children:[(v.price*v.quantity).toLocaleString()," MMK"]})]},b))]})]})]})}),u.jsx(Xs,{open:!!r&&s,onOpenChange:v=>{v||i(!1)},children:u.jsx(_s,{className:"max-w-sm w-full bg-background border-none shadow-none p-0 flex flex-col items-center justify-center",children:r&&u.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[u.jsx("div",{className:"text-[0.65rem] font-medium text-muted-foreground text-center mt-2",children:"Show this QR code to the restaurant for scanning"}),u.jsx("div",{className:"w-full flex justify-center",children:u.jsx(r0,{value:r.qr_code,size:360,level:"H",includeMargin:!1})}),u.jsx(Te,{variant:"outline",size:"sm",className:"mt-1 mb-2 w-32",onClick:()=>i(!1),children:"Close"})]})})}),u.jsx(X0,{})]})};function Ng(t,[e,r]){return Math.min(r,Math.max(e,t))}function TF(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var qy="ScrollArea",[I3,_H]=gn(qy),[IF,Cs]=I3(qy),R3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...l}=t,[d,m]=E.useState(null),[f,x]=E.useState(null),[y,v]=E.useState(null),[b,S]=E.useState(null),[_,I]=E.useState(null),[R,N]=E.useState(0),[A,O]=E.useState(0),[k,F]=E.useState(!1),[B,P]=E.useState(!1),M=Je(e,G=>m(G)),$=Vc(s);return u.jsx(IF,{scope:r,type:n,dir:$,scrollHideDelay:i,scrollArea:d,viewport:f,onViewportChange:x,content:y,onContentChange:v,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:k,onScrollbarXEnabledChange:F,scrollbarY:_,onScrollbarYChange:I,scrollbarYEnabled:B,onScrollbarYEnabledChange:P,onCornerWidthChange:N,onCornerHeightChange:O,children:u.jsx(Le.div,{dir:$,...l,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":A+"px",...t.style}})})});R3.displayName=qy;var O3="ScrollAreaViewport",j3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=t,l=Cs(O3,r),d=E.useRef(null),m=Je(e,d,l.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),u.jsx(Le.div,{"data-radix-scroll-area-viewport":"",...i,ref:m,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:u.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});j3.displayName=O3;var Ei="ScrollAreaScrollbar",Xy=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,d=t.orientation==="horizontal";return E.useEffect(()=>(d?i(!0):l(!0),()=>{d?i(!1):l(!1)}),[d,i,l]),s.type==="hover"?u.jsx(RF,{...n,ref:e,forceMount:r}):s.type==="scroll"?u.jsx(OF,{...n,ref:e,forceMount:r}):s.type==="auto"?u.jsx(M3,{...n,ref:e,forceMount:r}):s.type==="always"?u.jsx(Ky,{...n,ref:e}):null});Xy.displayName=Ei;var RF=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),[i,l]=E.useState(!1);return E.useEffect(()=>{const d=s.scrollArea;let m=0;if(d){const f=()=>{window.clearTimeout(m),l(!0)},x=()=>{m=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return d.addEventListener("pointerenter",f),d.addEventListener("pointerleave",x),()=>{window.clearTimeout(m),d.removeEventListener("pointerenter",f),d.removeEventListener("pointerleave",x)}}},[s.scrollArea,s.scrollHideDelay]),u.jsx(nn,{present:r||i,children:u.jsx(M3,{"data-state":i?"visible":"hidden",...n,ref:e})})}),OF=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=Cs(Ei,t.__scopeScrollArea),i=t.orientation==="horizontal",l=rm(()=>m("SCROLL_END"),100),[d,m]=TF("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return E.useEffect(()=>{if(d==="idle"){const f=window.setTimeout(()=>m("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[d,s.scrollHideDelay,m]),E.useEffect(()=>{const f=s.viewport,x=i?"scrollLeft":"scrollTop";if(f){let y=f[x];const v=()=>{const b=f[x];y!==b&&(m("SCROLL"),l()),y=b};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,i,m,l]),u.jsx(nn,{present:r||d!=="hidden",children:u.jsx(Ky,{"data-state":d==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Ne(t.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:Ne(t.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),M3=E.forwardRef((t,e)=>{const r=Cs(Ei,t.__scopeScrollArea),{forceMount:n,...s}=t,[i,l]=E.useState(!1),d=t.orientation==="horizontal",m=rm(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;l(d?f:x)}},10);return Rc(r.viewport,m),Rc(r.content,m),u.jsx(nn,{present:n||i,children:u.jsx(Ky,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Ky=E.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=Cs(Ei,t.__scopeScrollArea),i=E.useRef(null),l=E.useRef(0),[d,m]=E.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=B3(d.viewport,d.content),x={...n,sizes:d,onSizesChange:m,hasThumb:f>0&&f<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function y(v,b){return LF(v,l.current,d,b)}return r==="horizontal"?u.jsx(jF,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,b=_b(v,d,s.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=y(v,s.dir))}}):r==="vertical"?u.jsx(MF,{...x,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,b=_b(v,d);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=y(v))}}):null}),jF=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Cs(Ei,t.__scopeScrollArea),[l,d]=E.useState(),m=E.useRef(null),f=Je(e,m,i.onScrollbarXChange);return E.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),u.jsx(P3,{"data-orientation":"horizontal",...s,ref:f,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tm(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,y)=>{if(i.viewport){const v=i.viewport.scrollLeft+x.deltaX;t.onWheelScroll(v),U3(v,y)&&x.preventDefault()}},onResize:()=>{m.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:s0(l.paddingLeft),paddingEnd:s0(l.paddingRight)}})}})}),MF=E.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=Cs(Ei,t.__scopeScrollArea),[l,d]=E.useState(),m=E.useRef(null),f=Je(e,m,i.onScrollbarYChange);return E.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),u.jsx(P3,{"data-orientation":"vertical",...s,ref:f,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tm(r)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,y)=>{if(i.viewport){const v=i.viewport.scrollTop+x.deltaY;t.onWheelScroll(v),U3(v,y)&&x.preventDefault()}},onResize:()=>{m.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:s0(l.paddingTop),paddingEnd:s0(l.paddingBottom)}})}})}),[kF,k3]=I3(Ei),P3=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:m,onDragScroll:f,onWheelScroll:x,onResize:y,...v}=t,b=Cs(Ei,r),[S,_]=E.useState(null),I=Je(e,M=>_(M)),R=E.useRef(null),N=E.useRef(""),A=b.viewport,O=n.content-n.viewport,k=cr(x),F=cr(m),B=rm(y,10);function P(M){if(R.current){const $=M.clientX-R.current.left,G=M.clientY-R.current.top;f({x:$,y:G})}}return E.useEffect(()=>{const M=$=>{const G=$.target;(S==null?void 0:S.contains(G))&&k($,O)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[A,S,O,k]),E.useEffect(F,[n,F]),Rc(S,B),Rc(b.content,B),u.jsx(kF,{scope:r,scrollbar:S,hasThumb:s,onThumbChange:cr(i),onThumbPointerUp:cr(l),onThumbPositionChange:F,onThumbPointerDown:cr(d),children:u.jsx(Le.div,{...v,ref:I,style:{position:"absolute",...v.style},onPointerDown:Ne(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),R.current=S.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),P(M))}),onPointerMove:Ne(t.onPointerMove,P),onPointerUp:Ne(t.onPointerUp,M=>{const $=M.target;$.hasPointerCapture(M.pointerId)&&$.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=N.current,b.viewport&&(b.viewport.style.scrollBehavior=""),R.current=null})})})}),n0="ScrollAreaThumb",D3=E.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=k3(n0,t.__scopeScrollArea);return u.jsx(nn,{present:r||s.hasThumb,children:u.jsx(PF,{ref:e,...n})})}),PF=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,i=Cs(n0,r),l=k3(n0,r),{onThumbPositionChange:d}=l,m=Je(e,y=>l.onThumbChange(y)),f=E.useRef(void 0),x=rm(()=>{f.current&&(f.current(),f.current=void 0)},100);return E.useEffect(()=>{const y=i.viewport;if(y){const v=()=>{if(x(),!f.current){const b=BF(y,d);f.current=b,d()}};return d(),y.addEventListener("scroll",v),()=>y.removeEventListener("scroll",v)}},[i.viewport,x,d]),u.jsx(Le.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ne(t.onPointerDownCapture,y=>{const b=y.target.getBoundingClientRect(),S=y.clientX-b.left,_=y.clientY-b.top;l.onThumbPointerDown({x:S,y:_})}),onPointerUp:Ne(t.onPointerUp,l.onThumbPointerUp)})});D3.displayName=n0;var Qy="ScrollAreaCorner",L3=E.forwardRef((t,e)=>{const r=Cs(Qy,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?u.jsx(DF,{...t,ref:e}):null});L3.displayName=Qy;var DF=E.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=Cs(Qy,r),[i,l]=E.useState(0),[d,m]=E.useState(0),f=!!(i&&d);return Rc(s.scrollbarX,()=>{var y;const x=((y=s.scrollbarX)==null?void 0:y.offsetHeight)||0;s.onCornerHeightChange(x),m(x)}),Rc(s.scrollbarY,()=>{var y;const x=((y=s.scrollbarY)==null?void 0:y.offsetWidth)||0;s.onCornerWidthChange(x),l(x)}),f?u.jsx(Le.div,{...n,ref:e,style:{width:i,height:d,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function s0(t){return t?parseInt(t,10):0}function B3(t,e){const r=t/e;return isNaN(r)?0:r}function tm(t){const e=B3(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function LF(t,e,r,n="ltr"){const s=tm(r),i=s/2,l=e||i,d=s-l,m=r.scrollbar.paddingStart+l,f=r.scrollbar.size-r.scrollbar.paddingEnd-d,x=r.content-r.viewport,y=n==="ltr"?[0,x]:[x*-1,0];return F3([m,f],y)(t)}function _b(t,e,r="ltr"){const n=tm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,l=e.content-e.viewport,d=i-n,m=r==="ltr"?[0,l]:[l*-1,0],f=Ng(t,m);return F3([0,l],[0,d])(f)}function F3(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function U3(t,e){return t>0&&t<e}var BF=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},l=r.left!==i.left,d=r.top!==i.top;(l||d)&&e(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function rm(t,e){const r=cr(t),n=E.useRef(0);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),E.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Rc(t,e){const r=cr(e);gr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var z3=R3,FF=j3,UF=L3;const nm=E.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(z3,{ref:n,className:Ie("relative overflow-hidden",t),...r,children:[u.jsx(FF,{className:"h-full w-full rounded-[inherit]",children:e}),u.jsx(V3,{}),u.jsx(UF,{})]}));nm.displayName=z3.displayName;const V3=E.forwardRef(({className:t,orientation:e="vertical",...r},n)=>u.jsx(Xy,{ref:n,orientation:e,className:Ie("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:u.jsx(D3,{className:"relative flex-1 rounded-full bg-border"})}));V3.displayName=Xy.displayName;const zF=()=>{const{user:t,signOut:e}=Gr(),r=sn(),[n,s]=E.useState(null),[i,l]=E.useState([]),[d,m]=E.useState(!1),[f,x]=E.useState({full_name:"",phone:""}),{loading:y,summary:v,badgeLabel:b,badgeDescription:S,badgeIcon:_}=Uy(),I=()=>{const k="w-4 h-4";switch(_){case"compass":return u.jsx(HE,{className:k});case"star":return u.jsx(wc,{className:k});case"shield":return u.jsx(kf,{className:k});case"crown":return u.jsx($E,{className:k});case"sparkles":default:return u.jsx(nd,{className:k})}};E.useEffect(()=>{t&&(R(),N())},[t]);const R=async()=>{try{const{data:k,error:F}=await ue.from("profiles").select("*").eq("id",t==null?void 0:t.id).single();if(F)throw F;s(k),x({full_name:k.full_name||"",phone:k.phone||""})}catch(k){console.error("Error fetching profile:",k)}},N=async()=>{if(t)try{const{data:k,error:F}=await ue.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          ),
          order_items
        `).eq("customer_id",t.id).eq("status","completed").order("created_at",{ascending:!1});if(F)throw F;l(k||[])}catch(k){console.error("Error fetching order history:",k)}},A=async()=>{try{const{error:k}=await ue.from("profiles").update({full_name:f.full_name,phone:f.phone}).eq("id",t==null?void 0:t.id);if(k)throw k;ve.success("Profile updated successfully"),m(!1),R()}catch(k){console.error("Error updating profile:",k),ve.error("Failed to update profile")}},O=async()=>{await e(),r("/auth"),ve.success("Signed out successfully")};return u.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[u.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:u.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings"})]}),u.jsx(Te,{onClick:O,variant:"outline",size:"icon",className:"shrink-0",children:u.jsx(j0,{className:"h-4 w-4"})})]})}),u.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[u.jsxs(He,{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center relative",children:[u.jsx(zs,{className:"w-8 h-8 text-white"}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-background border border-yellow-400 flex items-center justify-center shadow-sm",children:I()})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-xl font-semibold",children:(n==null?void 0:n.full_name)||"User"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email}),u.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[u.jsx(kr,{className:"px-2 py-0.5 text-[9px] rounded-full bg-primary/10 text-primary border-primary/20",children:y?"Calculating badge...":b||"Newbie"}),v&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"inline-flex items-baseline gap-1 px-2 py-0.5 rounded-full bg-primary/10 border border-primary/30",children:[u.jsx("span",{className:"text-[11px] font-semibold text-primary",children:v.total_points}),u.jsx("span",{className:"text-[8px] uppercase tracking-wide text-primary/80",children:"pts"})]}),u.jsxs("span",{className:"text-[9px] text-muted-foreground/80",children:[v.total_completed_orders," completed orders"]})]})]})]}),u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>m(!d),children:u.jsx(M0,{className:"h-4 w-4"})})]}),u.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/40 rounded-xl px-3 py-2",children:S}),d?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"full_name",children:"Full Name"}),u.jsx(ot,{id:"full_name",value:f.full_name,onChange:k=>x({...f,full_name:k.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"phone",children:"Phone"}),u.jsx(ot,{id:"phone",value:f.phone,onChange:k=>x({...f,phone:k.target.value})})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Te,{onClick:A,className:"flex-1 luxury-gradient",children:"Save Changes"}),u.jsx(Te,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx(zs,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-muted-foreground",children:"Name:"}),u.jsx("span",{className:"font-medium",children:(n==null?void 0:n.full_name)||"Not set"})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx(nM,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-muted-foreground",children:"Email:"}),u.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsx(YE,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),u.jsx("span",{className:"font-medium",children:(n==null?void 0:n.phone)||"Not set"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Orders History"}),u.jsxs(He,{className:"p-4 luxury-gradient text-white flex items-center justify-between",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs uppercase tracking-wide opacity-80",children:"Total Spent"}),u.jsxs("p",{className:"text-2xl font-semibold",children:[i.reduce((k,F)=>k+(F.total_amount||0),0).toLocaleString()," ","MMK"]})]}),u.jsxs("div",{className:"text-right text-[10px] opacity-80",children:[u.jsx("p",{children:"Completed orders only"}),u.jsxs("p",{children:[i.length," orders"]})]})]}),i.length===0?u.jsx(He,{className:"p-4 text-sm text-muted-foreground",children:"No completed orders yet. Once your orders are completed, they will appear here."}):u.jsx(He,{className:"p-0",children:u.jsx(nm,{className:"max-h-72",children:u.jsx("div",{className:"divide-y",children:i.map(k=>{var F,B,P,M,$;return u.jsxs("div",{className:"px-4 py-3 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:(F=k.restaurants)==null?void 0:F.image_url,alt:(B=k.restaurants)==null?void 0:B.name,className:"w-10 h-10 rounded-md object-cover"}),u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium",children:(P=k.restaurants)==null?void 0:P.name}),u.jsxs("p",{className:"text-[11px] text-muted-foreground capitalize",children:[(M=k.order_type)==null?void 0:M.replace("_"," ")," "," ",new Date(k.created_at).toLocaleDateString()]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-xs font-semibold text-primary",children:[($=k.total_amount)==null?void 0:$.toLocaleString()," MMK"]}),u.jsx(kr,{className:"mt-1 bg-gray-500 text-white border-0 text-[9px]",children:"Completed"})]})]})})]}),Array.isArray(k.order_items)&&k.order_items.length>0&&u.jsx("div",{className:"pl-13 text-[10px] text-muted-foreground leading-snug",children:k.order_items.map(G=>`${G.name} x${G.quantity}`).join("  ")})]},k.id)})})})})]})]}),u.jsx(X0,{})]})};var H3={exports:{}},$3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=E;function VF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HF=typeof Object.is=="function"?Object.is:VF,$F=Oc.useState,WF=Oc.useEffect,GF=Oc.useLayoutEffect,YF=Oc.useDebugValue;function qF(t,e){var r=e(),n=$F({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return GF(function(){s.value=r,s.getSnapshot=e,Pp(s)&&i({inst:s})},[t,r,e]),WF(function(){return Pp(s)&&i({inst:s}),t(function(){Pp(s)&&i({inst:s})})},[t]),YF(r),r}function Pp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!HF(t,r)}catch{return!0}}function XF(t,e){return e()}var KF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XF:qF;$3.useSyncExternalStore=Oc.useSyncExternalStore!==void 0?Oc.useSyncExternalStore:KF;H3.exports=$3;var QF=H3.exports;function ZF(){return QF.useSyncExternalStore(JF,()=>!0,()=>!1)}function JF(){return()=>{}}var Zy="Avatar",[eU,CH]=gn(Zy),[tU,W3]=eU(Zy),G3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,i]=E.useState("idle");return u.jsx(tU,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:u.jsx(Le.span,{...n,ref:e})})});G3.displayName=Zy;var Y3="AvatarImage",q3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=t,l=W3(Y3,r),d=rU(n,i),m=cr(f=>{s(f),l.onImageLoadingStatusChange(f)});return gr(()=>{d!=="idle"&&m(d)},[d,m]),d==="loaded"?u.jsx(Le.img,{...i,ref:e,src:n}):null});q3.displayName=Y3;var X3="AvatarFallback",K3=E.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,i=W3(X3,r),[l,d]=E.useState(n===void 0);return E.useEffect(()=>{if(n!==void 0){const m=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(m)}},[n]),l&&i.imageLoadingStatus!=="loaded"?u.jsx(Le.span,{...s,ref:e}):null});K3.displayName=X3;function Cb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function rU(t,{referrerPolicy:e,crossOrigin:r}){const n=ZF(),s=E.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[l,d]=E.useState(()=>Cb(i,t));return gr(()=>{d(Cb(i,t))},[i,t]),gr(()=>{const m=y=>()=>{d(y)};if(!i)return;const f=m("loaded"),x=m("error");return i.addEventListener("load",f),i.addEventListener("error",x),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",f),i.removeEventListener("error",x)}},[i,r,e]),l}var Q3=G3,Z3=q3,J3=K3;const eI=E.forwardRef(({className:t,...e},r)=>u.jsx(Q3,{ref:r,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));eI.displayName=Q3.displayName;const tI=E.forwardRef(({className:t,...e},r)=>u.jsx(Z3,{ref:r,className:Ie("aspect-square h-full w-full",t),...e}));tI.displayName=Z3.displayName;const rI=E.forwardRef(({className:t,...e},r)=>u.jsx(J3,{ref:r,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));rI.displayName=J3.displayName;const $c=E.forwardRef(({className:t,...e},r)=>u.jsx("textarea",{className:Ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));$c.displayName="Textarea";function Nl({className:t,...e}){return u.jsx("div",{className:Ie("relative overflow-hidden rounded-md bg-muted/70","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_1.2s_infinite]",t),...e})}const nU=()=>{const t=sn();Gr(),Uy();const[e,r]=E.useState([]),[n,s]=E.useState({}),[i,l]=E.useState(new Set),[d,m]=E.useState(new Set),[f,x]=E.useState({}),[y,v]=E.useState(!0),[b,S]=E.useState({}),[_,I]=E.useState({}),[R,N]=E.useState(null);E.useEffect(()=>{(async()=>{var K;const{data:$,error:G}=await ue.auth.getUser();G&&console.error("Error getting current user for blog comments:",G),N(((K=$==null?void 0:$.user)==null?void 0:K.id)??null),await A()})()},[]);const A=async()=>{try{v(!0);const{data:M,error:$}=await ue.from("blog_posts").select(`
          *,
          restaurants (
            name,
            image_url
          ),
          comments_count:blog_comments(count)
        `).eq("is_published",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if($){console.error("Error loading blog posts",$),r([]);return}const G=(M==null?void 0:M.map(K=>{var ee;return{...K,comments_count:Array.isArray(K.comments_count)&&K.comments_count.length>0&&typeof((ee=K.comments_count[0])==null?void 0:ee.count)=="number"?K.comments_count[0].count:0}}))||[];r(G)}catch(M){console.error("Unexpected error loading blog posts",M),r([])}finally{v(!1)}},O=M=>{m($=>{const G=new Set($);return G.has(M)?G.delete(M):G.add(M),G})},k=async M=>{const $=new Set(i);if($.has(M)){$.delete(M),l($);return}$.add(M),l($),n[M]||await F(M)},F=async M=>{try{S(ee=>({...ee,[M]:!0}));let{data:$,error:G}=await ue.from("blog_comments_with_profiles").select("*").eq("blog_post_id",M).order("created_at",{ascending:!0});if(G){console.warn("View query failed, trying original approach:",G);const ee=await ue.from("blog_comments").select(`
            *,
            profiles:customer_id (
              full_name
            )
            `).eq("blog_post_id",M).eq("is_deleted",!1).order("created_at",{ascending:!0});$=ee.data,G=ee.error}if(G){console.error("Error loading comments",G);return}const K={...n};K[M]=$||[],s(K)}catch($){console.error("Unexpected error loading comments",$)}finally{S($=>({...$,[M]:!1}))}},B=async M=>{const $=(f[M]||"").trim();if(!(!$||!R))try{I(ee=>({...ee,[M]:!0}));const{data:G,error:K}=await ue.from("blog_comments").insert({blog_post_id:M,customer_id:R,content:$}).select("*").single();if(K){console.error("Error adding comment",K);return}if(setTimeout(()=>{F(M)},100),s(ee=>{const z=ee[M]||[];return{...ee,[M]:[...z,G]}}),x(ee=>({...ee,[M]:""})),r(ee=>ee.map(z=>z.id===M?{...z,comments_count:(z.comments_count||0)+1}:z)),!i.has(M)){const ee=new Set(i);ee.add(M),l(ee)}}catch(G){console.error("Unexpected error adding comment",G)}finally{I(G=>({...G,[M]:!1}))}},P=()=>u.jsxs(He,{className:"p-4 space-y-3 bg-card/60 backdrop-blur-sm border-border/40 animate-pulse",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Nl,{className:"w-10 h-10 rounded-full"}),u.jsxs("div",{className:"space-y-1 flex-1",children:[u.jsx(Nl,{className:"h-3 w-24"}),u.jsx(Nl,{className:"h-3 w-40"})]})]}),u.jsx(Nl,{className:"h-4 w-3/4"}),u.jsx(Nl,{className:"h-3 w-full"}),u.jsx(Nl,{className:"h-3 w-5/6"})]});return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10 pb-20",children:[u.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:u.jsxs("div",{className:"max-w-md mx-auto px-5 py-4 flex items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nd,{className:"w-4 h-4 text-primary"}),u.jsx("p",{className:"text-[10px] uppercase tracking-[0.18em] text-primary/80",children:"Stories from our restaurants"})]}),u.jsx("h1",{className:"text-2xl font-semibold text-foreground leading-tight",children:"Food Journal"}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Discover promotions, new menus, and behind-the-scenes stories from all our partners."})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(Te,{variant:"outline",size:"icon",className:"rounded-full border-border/70 hover:bg-primary/5",onClick:A,children:u.jsx(Uv,{className:"w-4 h-4 rotate-90"})})})]})}),u.jsxs("div",{className:"max-w-md mx-auto px-5 pt-4 pb-4 space-y-4",children:[y&&u.jsxs(u.Fragment,{children:[P(),P()]}),!y&&e.length===0&&u.jsx(He,{className:"p-6 text-center bg-card/60 backdrop-blur-sm border-dashed border-border/60",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"No blog posts yet. Restaurants will share their promotions and menu highlights here."})}),!y&&e.map(M=>{var ee,z,V,J,Y;const $=n[M.id]||[],G=i.has(M.id),K=(((ee=M.restaurants)==null?void 0:ee.name)||"R").split(" ").map(q=>q[0]).join("").slice(0,2).toUpperCase();return u.jsxs(He,{id:`blog-post-${M.id}`,className:Ie("group relative overflow-hidden border-border/40 bg-card/90 backdrop-blur-md transition-all duration-300","hover:-translate-y-0.5 hover:shadow-[0_14px_40px_rgba(15,23,42,0.12)]"),children:[M.is_pinned&&u.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-primary/60 to-amber-400"}),u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(eI,{className:"w-9 h-9 ring-1 ring-primary/15 shadow-sm",children:[((z=M.restaurants)==null?void 0:z.image_url)&&u.jsx(tI,{src:M.restaurants.image_url,alt:((V=M.restaurants)==null?void 0:V.name)||"Restaurant"}),u.jsx(rI,{className:"bg-primary/10 text-[9px] text-primary",children:K})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-[11px] font-semibold text-foreground truncate",children:((J=M.restaurants)==null?void 0:J.name)||"Featured Restaurant"}),u.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-muted-foreground",children:[u.jsxs("span",{className:"inline-flex items-center gap-1",children:[u.jsx(ja,{className:"w-3 h-3"}),new Date(M.created_at).toLocaleDateString()]}),M.is_pinned&&u.jsx(kr,{variant:"outline",className:"h-4 px-1.5 text-[8px] border-primary/40 text-primary bg-primary/5",children:"Highlight"})]})]})]}),M.hero_image_url&&u.jsx("div",{className:"mt-1 overflow-hidden rounded-xl border border-border/40 bg-muted/40 cursor-pointer",onClick:()=>O(M.id),children:u.jsx("img",{src:M.hero_image_url,alt:M.title,className:"w-full h-32 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})}),u.jsxs("div",{className:"space-y-1 cursor-pointer",onClick:()=>O(M.id),children:[u.jsx("h2",{className:"text-base font-semibold text-foreground leading-relaxed",children:M.title}),d.has(M.id)?u.jsx("p",{className:"text-[11px] text-muted-foreground font-sans whitespace-pre-line leading-loose",children:M.content}):u.jsx("p",{className:"text-[11px] text-muted-foreground font-sans line-clamp-3 leading-loose",children:M.excerpt||M.content.slice(0,180).concat(M.content.length>180?"":"")})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2 gap-3",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("button",{type:"button",onClick:()=>O(M.id),className:"inline-flex items-center gap-1 text-[9px] text-primary/90 hover:text-primary underline-offset-2 hover:underline transition-colors",children:[d.has(M.id)?"Show less":"Read more",u.jsx(Uv,{className:Ie("w-3 h-3 transition-transform",d.has(M.id)?"rotate-180":"translate-x-0")})]}),u.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-muted-foreground",children:[u.jsx(Zh,{className:"w-3 h-3"}),u.jsx("span",{children:(()=>{const q=typeof M.comments_count=="number"?M.comments_count:$.length||0;return`${q} ${q===1?"comment":"comments"}`})()})]})]}),u.jsxs(Te,{variant:"ghost",size:"sm",className:"h-7 px-2 text-[9px] gap-1 text-primary/90 hover:bg-primary/5",onClick:()=>k(M.id),children:[G?"Hide feedback":"View feedback",u.jsx(Bx,{className:Ie("w-3 h-3 transition-transform",G?"rotate-180":"rotate-0")})]})]})]}),G&&u.jsxs("div",{className:"border-t border-border/30 bg-muted/30 px-3 pb-3 pt-2 space-y-2",children:[b[M.id]&&u.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Loading comments"}),!b[M.id]&&$.length===0&&u.jsx("p",{className:"text-[9px] text-muted-foreground",children:"No comments yet. Be the first to share your thoughts."}),!b[M.id]&&$.filter(q=>q.parent_comment_id===null||q.parent_comment_id===void 0).map(q=>{const Q=q.display_name||`Guest ${q.customer_id.slice(0,6).toUpperCase()}`,ie=Q.split(" ").map(fe=>fe[0]).join("").slice(0,2).toUpperCase();return u.jsx("div",{className:"space-y-2",children:u.jsxs("div",{className:"flex items-start gap-2 text-[9px] bg-background/60 border border-border/20 rounded-xl px-2 py-1.5",children:[u.jsx("div",{className:"mt-0.5 w-6 h-6 rounded-full bg-gradient-to-br from-amber-400 via-yellow-300 to-amber-500 text-[8px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-amber-300/70",children:ie}),u.jsxs("div",{className:"flex-1 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[9px] text-foreground font-medium truncate max-w-[120px]",children:Q}),u.jsxs("span",{className:"text-[8px] text-muted-foreground whitespace-nowrap",children:[new Date(q.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(q.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),u.jsx("p",{className:"text-[9px] text-foreground leading-snug",children:q.content}),(()=>{const fe=$.filter(oe=>oe.parent_comment_id===q.id);return fe.length===0?null:u.jsx("div",{className:"space-y-1 mt-2 border-l-2 border-border/40 pl-2",children:fe.map(oe=>{const le=oe.display_name||`Guest ${oe.customer_id.slice(0,6).toUpperCase()}`,ce=le.split(" ").map(Be=>Be[0]).join("").slice(0,2).toUpperCase();return u.jsxs("div",{className:"flex items-start gap-1 opacity-80",children:[u.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full bg-gradient-to-br from-emerald-400 via-emerald-300 to-emerald-500 text-[7px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-emerald-300/70",children:ce}),u.jsxs("div",{className:"flex-1 space-y-0.5",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-[8px] text-foreground font-medium truncate max-w-[100px]",children:[le," (Reply)"]}),u.jsxs("span",{className:"text-[7px] text-muted-foreground whitespace-nowrap",children:[new Date(oe.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(oe.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),u.jsx("p",{className:"text-[8px] text-foreground leading-snug",children:oe.content})]})]},oe.id)})})})()]})]})},q.id)}),u.jsxs("div",{className:"pt-1.5",children:[u.jsx($c,{placeholder:R?"Add a thoughtful comment about this promotion or menu":"Sign in to leave a comment.",value:f[M.id]||"",onChange:q=>x(Q=>({...Q,[M.id]:q.target.value})),disabled:!R||!!_[M.id],className:"h-14 text-[9px] resize-none border-border/40 bg-background/80 focus-visible:ring-primary/40"}),u.jsxs("div",{className:"flex justify-end mt-1 gap-2",children:[!R&&u.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[8px] text-muted-foreground",onClick:()=>t("/auth"),children:"Sign in to comment"}),u.jsx(Te,{size:"sm",className:"h-6 px-3 text-[8px] rounded-full bg-primary/90 hover:bg-primary shadow-sm",disabled:!R||!((Y=f[M.id])!=null&&Y.trim())||!!_[M.id],onClick:()=>B(M.id),children:_[M.id]?"Posting":"Post comment"})]})]})]})]},M.id)})]}),u.jsx(X0,{})]})};var sU=[" ","Enter","ArrowUp","ArrowDown"],iU=[" ","Enter"],qa="Select",[sm,im,oU]=A0(qa),[Wc,EH]=gn(qa,[oU,Fc]),om=Fc(),[aU,ea]=Wc(qa),[lU,cU]=Wc(qa),nI=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:l,defaultValue:d,onValueChange:m,dir:f,name:x,autoComplete:y,disabled:v,required:b,form:S}=t,_=om(e),[I,R]=E.useState(null),[N,A]=E.useState(null),[O,k]=E.useState(!1),F=Vc(f),[B,P]=yi({prop:n,defaultProp:s??!1,onChange:i,caller:qa}),[M,$]=yi({prop:l,defaultProp:d,onChange:m,caller:qa}),G=E.useRef(null),K=I?S||!!I.closest("form"):!0,[ee,z]=E.useState(new Set),V=Array.from(ee).map(J=>J.props.value).join(";");return u.jsx(Qx,{..._,children:u.jsxs(aU,{required:b,scope:e,trigger:I,onTriggerChange:R,valueNode:N,onValueNodeChange:A,valueNodeHasChildren:O,onValueNodeHasChildrenChange:k,contentId:$s(),value:M,onValueChange:$,open:B,onOpenChange:P,dir:F,triggerPointerDownPosRef:G,disabled:v,children:[u.jsx(sm.Provider,{scope:e,children:u.jsx(lU,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(J=>{z(Y=>new Set(Y).add(J))},[]),onNativeOptionRemove:E.useCallback(J=>{z(Y=>{const q=new Set(Y);return q.delete(J),q})},[]),children:r})}),K?u.jsxs(AI,{"aria-hidden":!0,required:b,tabIndex:-1,name:x,autoComplete:y,value:M,onChange:J=>$(J.target.value),disabled:v,form:S,children:[M===void 0?u.jsx("option",{value:""}):null,Array.from(ee)]},V):null]})})};nI.displayName=qa;var sI="SelectTrigger",iI=E.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=om(r),l=ea(sI,r),d=l.disabled||n,m=Je(e,l.onTriggerChange),f=im(r),x=E.useRef("touch"),[y,v,b]=II(_=>{const I=f().filter(A=>!A.disabled),R=I.find(A=>A.value===l.value),N=RI(I,_,R);N!==void 0&&l.onValueChange(N.value)}),S=_=>{d||(l.onOpenChange(!0),b()),_&&(l.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return u.jsx(Zx,{asChild:!0,...i,children:u.jsx(Le.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":TI(l.value)?"":void 0,...s,ref:m,onClick:Ne(s.onClick,_=>{_.currentTarget.focus(),x.current!=="mouse"&&S(_)}),onPointerDown:Ne(s.onPointerDown,_=>{x.current=_.pointerType;const I=_.target;I.hasPointerCapture(_.pointerId)&&I.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(S(_),_.preventDefault())}),onKeyDown:Ne(s.onKeyDown,_=>{const I=y.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&v(_.key),!(I&&_.key===" ")&&sU.includes(_.key)&&(S(),_.preventDefault())})})})});iI.displayName=sI;var oI="SelectValue",aI=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:l="",...d}=t,m=ea(oI,r),{onValueNodeHasChildrenChange:f}=m,x=i!==void 0,y=Je(e,m.onValueNodeChange);return gr(()=>{f(x)},[f,x]),u.jsx(Le.span,{...d,ref:y,style:{pointerEvents:"none"},children:TI(m.value)?u.jsx(u.Fragment,{children:l}):i})});aI.displayName=oI;var uU="SelectIcon",lI=E.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return u.jsx(Le.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});lI.displayName=uU;var dU="SelectPortal",cI=t=>u.jsx(Od,{asChild:!0,...t});cI.displayName=dU;var Xa="SelectContent",uI=E.forwardRef((t,e)=>{const r=ea(Xa,t.__scopeSelect),[n,s]=E.useState();if(gr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Za.createPortal(u.jsx(dI,{scope:t.__scopeSelect,children:u.jsx(sm.Slot,{scope:t.__scopeSelect,children:u.jsx("div",{children:t.children})})}),i):null}return u.jsx(hI,{...t,ref:e})});uI.displayName=Xa;var Os=10,[dI,ta]=Wc(Xa),hU="SelectContentImpl",fU=Ha("SelectContent.RemoveScroll"),hI=E.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:d,sideOffset:m,align:f,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:I,...R}=t,N=ea(Xa,r),[A,O]=E.useState(null),[k,F]=E.useState(null),B=Je(e,be=>O(be)),[P,M]=E.useState(null),[$,G]=E.useState(null),K=im(r),[ee,z]=E.useState(!1),V=E.useRef(!1);E.useEffect(()=>{if(A)return Vy(A)},[A]),zy();const J=E.useCallback(be=>{const[Pe,...Xe]=K().map(ke=>ke.ref.current),[ae]=Xe.slice(-1),Ee=document.activeElement;for(const ke of be)if(ke===Ee||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===Pe&&k&&(k.scrollTop=0),ke===ae&&k&&(k.scrollTop=k.scrollHeight),ke==null||ke.focus(),document.activeElement!==Ee))return},[K,k]),Y=E.useCallback(()=>J([P,A]),[J,P,A]);E.useEffect(()=>{ee&&Y()},[ee,Y]);const{onOpenChange:q,triggerPointerDownPosRef:Q}=N;E.useEffect(()=>{if(A){let be={x:0,y:0};const Pe=ae=>{var Ee,ke;be={x:Math.abs(Math.round(ae.pageX)-(((Ee=Q.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((ke=Q.current)==null?void 0:ke.y)??0))}},Xe=ae=>{be.x<=10&&be.y<=10?ae.preventDefault():A.contains(ae.target)||q(!1),document.removeEventListener("pointermove",Pe),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Pe),document.addEventListener("pointerup",Xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Pe),document.removeEventListener("pointerup",Xe,{capture:!0})}}},[A,q,Q]),E.useEffect(()=>{const be=()=>q(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[q]);const[ie,fe]=II(be=>{const Pe=K().filter(Ee=>!Ee.disabled),Xe=Pe.find(Ee=>Ee.ref.current===document.activeElement),ae=RI(Pe,be,Xe);ae&&setTimeout(()=>ae.ref.current.focus())}),oe=E.useCallback((be,Pe,Xe)=>{const ae=!V.current&&!Xe;(N.value!==void 0&&N.value===Pe||ae)&&(M(be),ae&&(V.current=!0))},[N.value]),le=E.useCallback(()=>A==null?void 0:A.focus(),[A]),ce=E.useCallback((be,Pe,Xe)=>{const ae=!V.current&&!Xe;(N.value!==void 0&&N.value===Pe||ae)&&G(be)},[N.value]),Be=n==="popper"?Ag:fI,xe=Be===Ag?{side:d,sideOffset:m,align:f,alignOffset:x,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:_,avoidCollisions:I}:{};return u.jsx(dI,{scope:r,content:A,viewport:k,onViewportChange:F,itemRefCallback:oe,selectedItem:P,onItemLeave:le,itemTextRefCallback:ce,focusSelectedItem:Y,selectedItemText:$,position:n,isPositioned:ee,searchRef:ie,children:u.jsx(Z0,{as:fU,allowPinchZoom:!0,children:u.jsx(K0,{asChild:!0,trapped:N.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Ne(s,be=>{var Pe;(Pe=N.trigger)==null||Pe.focus({preventScroll:!0}),be.preventDefault()}),children:u.jsx(Pc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:u.jsx(Be,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:be=>be.preventDefault(),...R,...xe,onPlaced:()=>z(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...R.style},onKeyDown:Ne(R.onKeyDown,be=>{const Pe=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Pe&&be.key.length===1&&fe(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let ae=K().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(be.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Ee=be.target,ke=ae.indexOf(Ee);ae=ae.slice(ke+1)}setTimeout(()=>J(ae)),be.preventDefault()}})})})})})})});hI.displayName=hU;var mU="SelectItemAlignedPosition",fI=E.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=ea(Xa,r),l=ta(Xa,r),[d,m]=E.useState(null),[f,x]=E.useState(null),y=Je(e,B=>x(B)),v=im(r),b=E.useRef(!1),S=E.useRef(!0),{viewport:_,selectedItem:I,selectedItemText:R,focusSelectedItem:N}=l,A=E.useCallback(()=>{if(i.trigger&&i.valueNode&&d&&f&&_&&I&&R){const B=i.trigger.getBoundingClientRect(),P=f.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),$=R.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=$.left-P.left,ke=M.left-Ee,Me=B.left-ke,gt=B.width+Me,St=Math.max(gt,P.width),er=window.innerWidth-Os,me=Ng(ke,[Os,Math.max(Os,er-St)]);d.style.minWidth=gt+"px",d.style.left=me+"px"}else{const Ee=P.right-$.right,ke=window.innerWidth-M.right-Ee,Me=window.innerWidth-B.right-ke,gt=B.width+Me,St=Math.max(gt,P.width),er=window.innerWidth-Os,me=Ng(ke,[Os,Math.max(Os,er-St)]);d.style.minWidth=gt+"px",d.style.right=me+"px"}const G=v(),K=window.innerHeight-Os*2,ee=_.scrollHeight,z=window.getComputedStyle(f),V=parseInt(z.borderTopWidth,10),J=parseInt(z.paddingTop,10),Y=parseInt(z.borderBottomWidth,10),q=parseInt(z.paddingBottom,10),Q=V+J+ee+q+Y,ie=Math.min(I.offsetHeight*5,Q),fe=window.getComputedStyle(_),oe=parseInt(fe.paddingTop,10),le=parseInt(fe.paddingBottom,10),ce=B.top+B.height/2-Os,Be=K-ce,xe=I.offsetHeight/2,be=I.offsetTop+xe,Pe=V+J+be,Xe=Q-Pe;if(Pe<=ce){const Ee=G.length>0&&I===G[G.length-1].ref.current;d.style.bottom="0px";const ke=f.clientHeight-_.offsetTop-_.offsetHeight,Me=Math.max(Be,xe+(Ee?le:0)+ke+Y),gt=Pe+Me;d.style.height=gt+"px"}else{const Ee=G.length>0&&I===G[0].ref.current;d.style.top="0px";const Me=Math.max(ce,V+_.offsetTop+(Ee?oe:0)+xe)+Xe;d.style.height=Me+"px",_.scrollTop=Pe-ce+_.offsetTop}d.style.margin=`${Os}px 0`,d.style.minHeight=ie+"px",d.style.maxHeight=K+"px",n==null||n(),requestAnimationFrame(()=>b.current=!0)}},[v,i.trigger,i.valueNode,d,f,_,I,R,i.dir,n]);gr(()=>A(),[A]);const[O,k]=E.useState();gr(()=>{f&&k(window.getComputedStyle(f).zIndex)},[f]);const F=E.useCallback(B=>{B&&S.current===!0&&(A(),N==null||N(),S.current=!1)},[A,N]);return u.jsx(gU,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:b,onScrollButtonChange:F,children:u.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:u.jsx(Le.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});fI.displayName=mU;var pU="SelectPopperPosition",Ag=E.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Os,...i}=t,l=om(r);return u.jsx(Jx,{...l,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ag.displayName=pU;var[gU,Jy]=Wc(Xa,{}),Tg="SelectViewport",mI=E.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=ta(Tg,r),l=Jy(Tg,r),d=Je(e,i.onViewportChange),m=E.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),u.jsx(sm.Slot,{scope:r,children:u.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ne(s.onScroll,f=>{const x=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=l;if(v!=null&&v.current&&y){const b=Math.abs(m.current-x.scrollTop);if(b>0){const S=window.innerHeight-Os*2,_=parseFloat(y.style.minHeight),I=parseFloat(y.style.height),R=Math.max(_,I);if(R<S){const N=R+b,A=Math.min(S,N),O=N-A;y.style.height=A+"px",y.style.bottom==="0px"&&(x.scrollTop=O>0?O:0,y.style.justifyContent="flex-end")}}}m.current=x.scrollTop})})})]})});mI.displayName=Tg;var pI="SelectGroup",[xU,yU]=Wc(pI),wU=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=$s();return u.jsx(xU,{scope:r,id:s,children:u.jsx(Le.div,{role:"group","aria-labelledby":s,...n,ref:e})})});wU.displayName=pI;var gI="SelectLabel",xI=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=yU(gI,r);return u.jsx(Le.div,{id:s.id,...n,ref:e})});xI.displayName=gI;var i0="SelectItem",[vU,yI]=Wc(i0),wI=E.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...l}=t,d=ea(i0,r),m=ta(i0,r),f=d.value===n,[x,y]=E.useState(i??""),[v,b]=E.useState(!1),S=Je(e,N=>{var A;return(A=m.itemRefCallback)==null?void 0:A.call(m,N,n,s)}),_=$s(),I=E.useRef("touch"),R=()=>{s||(d.onValueChange(n),d.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(vU,{scope:r,value:n,disabled:s,textId:_,isSelected:f,onItemTextChange:E.useCallback(N=>{y(A=>A||((N==null?void 0:N.textContent)??"").trim())},[]),children:u.jsx(sm.ItemSlot,{scope:r,value:n,disabled:s,textValue:x,children:u.jsx(Le.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:S,onFocus:Ne(l.onFocus,()=>b(!0)),onBlur:Ne(l.onBlur,()=>b(!1)),onClick:Ne(l.onClick,()=>{I.current!=="mouse"&&R()}),onPointerUp:Ne(l.onPointerUp,()=>{I.current==="mouse"&&R()}),onPointerDown:Ne(l.onPointerDown,N=>{I.current=N.pointerType}),onPointerMove:Ne(l.onPointerMove,N=>{var A;I.current=N.pointerType,s?(A=m.onItemLeave)==null||A.call(m):I.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ne(l.onPointerLeave,N=>{var A;N.currentTarget===document.activeElement&&((A=m.onItemLeave)==null||A.call(m))}),onKeyDown:Ne(l.onKeyDown,N=>{var O;((O=m.searchRef)==null?void 0:O.current)!==""&&N.key===" "||(iU.includes(N.key)&&R(),N.key===" "&&N.preventDefault())})})})})});wI.displayName=i0;var _u="SelectItemText",vI=E.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,l=ea(_u,r),d=ta(_u,r),m=yI(_u,r),f=cU(_u,r),[x,y]=E.useState(null),v=Je(e,R=>y(R),m.onItemTextChange,R=>{var N;return(N=d.itemTextRefCallback)==null?void 0:N.call(d,R,m.value,m.disabled)}),b=x==null?void 0:x.textContent,S=E.useMemo(()=>u.jsx("option",{value:m.value,disabled:m.disabled,children:b},m.value),[m.disabled,m.value,b]),{onNativeOptionAdd:_,onNativeOptionRemove:I}=f;return gr(()=>(_(S),()=>I(S)),[_,I,S]),u.jsxs(u.Fragment,{children:[u.jsx(Le.span,{id:m.textId,...i,ref:v}),m.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Za.createPortal(i.children,l.valueNode):null]})});vI.displayName=_u;var bI="SelectItemIndicator",_I=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return yI(bI,r).isSelected?u.jsx(Le.span,{"aria-hidden":!0,...n,ref:e}):null});_I.displayName=bI;var Ig="SelectScrollUpButton",CI=E.forwardRef((t,e)=>{const r=ta(Ig,t.__scopeSelect),n=Jy(Ig,t.__scopeSelect),[s,i]=E.useState(!1),l=Je(e,n.onScrollButtonChange);return gr(()=>{if(r.viewport&&r.isPositioned){let d=function(){const f=m.scrollTop>0;i(f)};const m=r.viewport;return d(),m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),s?u.jsx(SI,{...t,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:m}=r;d&&m&&(d.scrollTop=d.scrollTop-m.offsetHeight)}}):null});CI.displayName=Ig;var Rg="SelectScrollDownButton",EI=E.forwardRef((t,e)=>{const r=ta(Rg,t.__scopeSelect),n=Jy(Rg,t.__scopeSelect),[s,i]=E.useState(!1),l=Je(e,n.onScrollButtonChange);return gr(()=>{if(r.viewport&&r.isPositioned){let d=function(){const f=m.scrollHeight-m.clientHeight,x=Math.ceil(m.scrollTop)<f;i(x)};const m=r.viewport;return d(),m.addEventListener("scroll",d),()=>m.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),s?u.jsx(SI,{...t,ref:l,onAutoScroll:()=>{const{viewport:d,selectedItem:m}=r;d&&m&&(d.scrollTop=d.scrollTop+m.offsetHeight)}}):null});EI.displayName=Rg;var SI=E.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=ta("SelectScrollButton",r),l=E.useRef(null),d=im(r),m=E.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return E.useEffect(()=>()=>m(),[m]),gr(()=>{var x;const f=d().find(y=>y.ref.current===document.activeElement);(x=f==null?void 0:f.ref.current)==null||x.scrollIntoView({block:"nearest"})},[d]),u.jsx(Le.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ne(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Ne(s.onPointerMove,()=>{var f;(f=i.onItemLeave)==null||f.call(i),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Ne(s.onPointerLeave,()=>{m()})})}),bU="SelectSeparator",NI=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return u.jsx(Le.div,{"aria-hidden":!0,...n,ref:e})});NI.displayName=bU;var Og="SelectArrow",_U=E.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=om(r),i=ea(Og,r),l=ta(Og,r);return i.open&&l.position==="popper"?u.jsx(ey,{...s,...n,ref:e}):null});_U.displayName=Og;var CU="SelectBubbleInput",AI=E.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const s=E.useRef(null),i=Je(n,s),l=Gy(e);return E.useEffect(()=>{const d=s.current;if(!d)return;const m=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(m,"value").set;if(l!==e&&x){const y=new Event("change",{bubbles:!0});x.call(d,e),d.dispatchEvent(y)}},[l,e]),u.jsx(Le.select,{...r,style:{...mE,...r.style},ref:i,defaultValue:e})});AI.displayName=CU;function TI(t){return t===""||t===void 0}function II(t){const e=cr(t),r=E.useRef(""),n=E.useRef(0),s=E.useCallback(l=>{const d=r.current+l;e(d),function m(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>m(""),1e3))}(d)},[e]),i=E.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function RI(t,e,r){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let l=EU(t,Math.max(i,0));s.length===1&&(l=l.filter(f=>f!==r));const m=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return m!==r?m:void 0}function EU(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var SU=nI,OI=iI,NU=aI,AU=lI,TU=cI,jI=uI,IU=mI,MI=xI,kI=wI,RU=vI,OU=_I,PI=CI,DI=EI,LI=NI;const gs=SU,xs=NU,Gn=E.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(OI,{ref:n,className:Ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,u.jsx(AU,{asChild:!0,children:u.jsx(Bx,{className:"h-4 w-4 opacity-50"})})]}));Gn.displayName=OI.displayName;const BI=E.forwardRef(({className:t,...e},r)=>u.jsx(PI,{ref:r,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Jj,{className:"h-4 w-4"})}));BI.displayName=PI.displayName;const FI=E.forwardRef(({className:t,...e},r)=>u.jsx(DI,{ref:r,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Bx,{className:"h-4 w-4"})}));FI.displayName=DI.displayName;const Yn=E.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>u.jsx(TU,{children:u.jsxs(jI,{ref:s,className:Ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[u.jsx(BI,{}),u.jsx(IU,{className:Ie("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(FI,{})]})}));Yn.displayName=jI.displayName;const jU=E.forwardRef(({className:t,...e},r)=>u.jsx(MI,{ref:r,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));jU.displayName=MI.displayName;const rt=E.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(kI,{ref:n,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(OU,{children:u.jsx(FE,{className:"h-4 w-4"})})}),u.jsx(RU,{children:e})]}));rt.displayName=kI.displayName;const MU=E.forwardRef(({className:t,...e},r)=>u.jsx(LI,{ref:r,className:Ie("-mx-1 my-1 h-px bg-muted",t),...e}));MU.displayName=LI.displayName;const kU=()=>{const{user:t}=Gr(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[i,l]=E.useState("all"),[d,m]=E.useState("all"),[f,x]=E.useState(""),[y,v]=E.useState(1),b=6;E.useEffect(()=>{t&&S()},[t]);const S=async()=>{try{const{data:P,error:M}=await ue.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(M)throw M;const{data:$,error:G}=await ue.from("orders").select("*").eq("restaurant_id",P.id).order("created_at",{ascending:!1});if(G)throw G;const K=[...new Set(($||[]).map(J=>J.customer_id))],{data:ee,error:z}=await ue.rpc("get_order_customers",{customer_ids:K});z&&console.error("Failed to load customer details:",z);const V=($||[]).map(J=>{const Y=ee==null?void 0:ee.find(q=>q.user_id===J.customer_id);return{...J,customer_name:(Y==null?void 0:Y.full_name)||"Customer",customer_phone:(Y==null?void 0:Y.phone)||null}});r(V)}catch(P){console.error("Error fetching orders:",P),ve.error("Failed to load orders")}finally{s(!1)}},_=async(P,M)=>{try{const{error:$}=await ue.from("orders").update({status:M}).eq("id",P);if($)throw $;r(G=>G.map(K=>K.id===P?{...K,status:M}:K)),ve.success("Order status updated")}catch($){console.error("Error updating order:",$),ve.error("Failed to update order status")}};E.useEffect(()=>{const P=M=>{const $=M,{orderId:G,status:K}=$.detail||{};!G||!K||r(ee=>ee.map(z=>z.id===G?{...z,status:K}:z))};return window.addEventListener("orderStatusUpdated",P),()=>{window.removeEventListener("orderStatusUpdated",P)}},[]);const I=()=>{l("all"),m("all"),x(""),v(1)},R=P=>{const M={paid:{label:"Paid",className:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/10"},preparing:{label:"Preparing",className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/10"},ready:{label:"Ready",className:"bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/10"},completed:{label:"Completed",className:"bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-500/10"},cancelled:{label:"Cancelled",className:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/10"},served:{label:"Served",className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/10"}};return M[P]||M.paid},N=P=>{switch(P){case"paid":return"bg-purple-50/60 dark:bg-purple-500/5";case"preparing":return"bg-blue-50/60 dark:bg-blue-500/5";case"ready":return"bg-green-50/60 dark:bg-green-500/5";case"completed":return"bg-slate-50/60 dark:bg-slate-500/5";case"served":return"bg-emerald-50/60 dark:bg-emerald-500/5";case"cancelled":return"bg-red-50/40 dark:bg-red-500/5";default:return"bg-card"}},A=P=>{const M=new Date(P),G=Math.floor((new Date().getTime()-M.getTime())/6e4);return G<60?`${G} mins ago`:G<1440?`${Math.floor(G/60)} hours ago`:`${Math.floor(G/1440)} days ago`},O=e.filter(P=>{const M=i==="all"?!0:P.order_type===i,$=d==="all"?!0:P.status===d,G=f?new Date(P.created_at).toISOString().slice(0,10)===f:!0;return M&&$&&G}),k=Math.max(1,Math.ceil(O.length/b)),F=O.slice((y-1)*b,y*b),B=P=>{P<1||P>k||v(P)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage incoming orders and update their status"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-card/60 border border-border/40 rounded-2xl p-3 glass-effect",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Order Type"}),u.jsxs(gs,{value:i,onValueChange:P=>l(P),children:[u.jsx(Gn,{className:"h-9 text-xs",children:u.jsx(xs,{placeholder:"All Types"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All Types"}),u.jsx(rt,{value:"dine_in",children:"Dine In"}),u.jsx(rt,{value:"takeaway",children:"Take Away"})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Status"}),u.jsxs(gs,{value:d,onValueChange:P=>m(P),children:[u.jsx(Gn,{className:"h-9 text-xs",children:u.jsx(xs,{placeholder:"All Status"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All Status"}),u.jsx(rt,{value:"paid",children:"Paid"}),u.jsx(rt,{value:"preparing",children:"Preparing"}),u.jsx(rt,{value:"ready",children:"Ready"}),u.jsx(rt,{value:"completed",children:"Completed"}),u.jsx(rt,{value:"served",children:"Served"}),u.jsx(rt,{value:"cancelled",children:"Cancelled"})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Date"}),u.jsx("input",{type:"date",value:f,onChange:P=>x(P.target.value),className:"h-9 w-full rounded-md border border-border/40 bg-background/60 px-2 text-xs text-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/60"})]})]}),u.jsx("div",{className:"flex justify-end -mt-1",children:u.jsxs("button",{type:"button",onClick:I,className:"flex items-center gap-1 text-[10px] text-muted-foreground hover:text-primary transition-colors",children:[u.jsx(zE,{className:"w-3 h-3"}),u.jsx("span",{children:"Clear filters"})]})}),n?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):O.length===0?u.jsx(He,{children:u.jsx(Ct,{className:"py-12 text-center text-muted-foreground",children:"No orders found for selected filters"})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 auto-rows-fr",children:F.map(P=>{const M=R(P.status);return u.jsxs(He,{className:`border border-border/40 rounded-2xl overflow-hidden transition-all duration-150 hover:shadow-md ${N(P.status)}`,children:[u.jsx(ur,{className:"pb-2 px-3 pt-3",children:u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex items-start gap-1.5",children:[u.jsx(zs,{className:"h-3.5 w-3.5 mt-0.5 shrink-0 text-primary"}),u.jsxs("div",{className:"leading-tight",children:[u.jsx("div",{className:"text-xs font-semibold text-foreground",children:P.customer_name}),P.customer_phone&&u.jsx("div",{className:"text-[10px] text-muted-foreground",children:P.customer_phone})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[u.jsx(kr,{className:`px-2 py-0.5 text-[10px] font-medium rounded-full ${M.className}`,children:M.label}),u.jsxs("div",{className:"text-[9px] text-muted-foreground font-mono",children:["#",P.id.substring(0,8)]})]})]})}),u.jsxs(Ct,{className:"px-3 pb-3 pt-1 space-y-2.5",children:[u.jsx("div",{className:"space-y-1.5",children:u.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[P.order_type==="dine_in"?u.jsx(Fx,{className:"h-3.5 w-3.5"}):u.jsx(Pf,{className:"h-3.5 w-3.5"}),u.jsx("span",{className:"capitalize",children:P.order_type==="dine_in"?"Dine in":"Takeaway"})]}),u.jsxs("div",{className:"flex flex-col items-end gap-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(ja,{className:"h-3.5 w-3.5"}),u.jsx("span",{children:A(P.created_at)})]}),u.jsx("div",{className:"text-[8px] text-muted-foreground/80",children:(()=>{const $=new Date(P.created_at),G=String($.getDate()).padStart(2,"0"),K=String($.getMonth()+1).padStart(2,"0"),ee=$.getFullYear();let z=$.getHours();const V=String($.getMinutes()).padStart(2,"0"),J=z>=12?"PM":"AM";return z=z%12||12,`${G}/${K}/${ee} - ${z}:${V} ${J}`})()})]})]})}),u.jsxs("div",{className:"space-y-0.5",children:[u.jsx("h4",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:"Items"}),u.jsxs("ul",{className:"space-y-0.5",children:[P.order_items.slice(0,3).map(($,G)=>u.jsxs("li",{className:"text-[10px] text-muted-foreground truncate",children:[$.quantity,"x ",$.name]},G)),P.order_items.length>3&&u.jsxs("li",{className:"text-[9px] text-muted-foreground/80",children:["+",P.order_items.length-3," more item",P.order_items.length-3>1?"s":""]})]})]}),u.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-border/40",children:[u.jsxs("span",{className:"font-semibold text-xs",children:[P.total_amount.toLocaleString()," MMK"]}),u.jsxs(gs,{value:P.status,onValueChange:$=>_(P.id,$),children:[u.jsx(Gn,{className:"h-8 w-32 text-[10px]",children:u.jsx(xs,{})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"paid",children:"Paid"}),u.jsx(rt,{value:"preparing",children:"Preparing"}),u.jsx(rt,{value:"ready",children:"Ready"}),u.jsx(rt,{value:"served",children:"Served"}),u.jsx(rt,{value:"completed",children:"Completed"}),u.jsx(rt,{value:"cancelled",children:"Cancelled"})]})]})]})]})]},P.id)})}),k>1&&u.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 pb-1",children:[u.jsx("button",{type:"button",onClick:()=>B(y-1),disabled:y===1,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===1?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""}),Array.from({length:k}).map((P,M)=>{const $=M+1,G=$===y;return u.jsx("button",{type:"button",onClick:()=>B($),className:`min-w-9 h-9 px-2 rounded-full flex items-center justify-center text-xs font-semibold border transition-colors ${G?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background text-muted-foreground border-border/70 hover:bg-primary/5 hover:text-primary"}`,children:$},$)}),u.jsx("button",{type:"button",onClick:()=>B(y+1),disabled:y===k,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${y===k?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""})]})]})]})};var Oe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Oe||(Oe={}));var Eb=new Map([[Oe.QR_CODE,"QR_CODE"],[Oe.AZTEC,"AZTEC"],[Oe.CODABAR,"CODABAR"],[Oe.CODE_39,"CODE_39"],[Oe.CODE_93,"CODE_93"],[Oe.CODE_128,"CODE_128"],[Oe.DATA_MATRIX,"DATA_MATRIX"],[Oe.MAXICODE,"MAXICODE"],[Oe.ITF,"ITF"],[Oe.EAN_13,"EAN_13"],[Oe.EAN_8,"EAN_8"],[Oe.PDF_417,"PDF_417"],[Oe.RSS_14,"RSS_14"],[Oe.RSS_EXPANDED,"RSS_EXPANDED"],[Oe.UPC_A,"UPC_A"],[Oe.UPC_E,"UPC_E"],[Oe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Sb;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Sb||(Sb={}));function PU(t){return Object.values(Oe).includes(t)}var Ws;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ws||(Ws={}));var Fs=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ws.SCAN_TYPE_CAMERA,Ws.SCAN_TYPE_FILE],t}(),UI=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Eb.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Eb.get(e))},t}(),Nb=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),jg;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(jg||(jg={}));var zI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:jg.UNKWOWN_ERROR}},t}(),VI=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ii(t){return typeof t>"u"||t===null}function DU(t,e,r){return t>r?r:t<e?e:t}var $l=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),_t=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Ab=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),HI=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),l=Object.keys(e),d=0,m=l;d<m.length;d++){var f=m[d];if(i.has(f))return r.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},t}(),Mg={exports:{}};(function(t,e){(function(r,n){n(e)})(tu,function(r){function n(D){return D==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,o){D.__proto__=o}||function(D,o){for(var a in o)o.hasOwnProperty(a)&&(D[a]=o[a])};function i(D,o){s(D,o);function a(){this.constructor=D}D.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}function l(D,o){var a=Object.setPrototypeOf;a?a(D,o):D.__proto__=o}function d(D,o){o===void 0&&(o=D.constructor);var a=Error.captureStackTrace;a&&a(D,o)}var m=function(D){i(o,D);function o(a){var c=this.constructor,h=D.call(this,a)||this;return Object.defineProperty(h,"name",{value:c.name,enumerable:!1}),l(h,c.prototype),d(h),h}return o}(Error);class f extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}f.kind="Exception";class x extends f{}x.kind="ArgumentException";class y extends f{}y.kind="IllegalArgumentException";class v{constructor(o){if(this.binarizer=o,o===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,a){return this.binarizer.getBlackRow(o,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,a,c,h){const p=this.binarizer.getLuminanceSource().crop(o,a,c,h);return new v(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class b extends f{static getChecksumInstance(){return new b}}b.kind="ChecksumException";class S{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class _{static arraycopy(o,a,c,h,p){for(;p--;)c[h++]=o[a++]}static currentTimeMillis(){return Date.now()}}class I extends f{}I.kind="IndexOutOfBoundsException";class R extends I{constructor(o=void 0,a=void 0){super(a),this.index=o,this.message=a}}R.kind="ArrayIndexOutOfBoundsException";class N{static fill(o,a){for(let c=0,h=o.length;c<h;c++)o[c]=a}static fillWithin(o,a,c,h){N.rangeCheck(o.length,a,c);for(let p=a;p<c;p++)o[p]=h}static rangeCheck(o,a,c){if(a>c)throw new y("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new R(a);if(c>o)throw new R(c)}static asList(...o){return o}static create(o,a,c){return Array.from({length:o}).map(p=>Array.from({length:a}).fill(c))}static createInt32Array(o,a,c){return Array.from({length:o}).map(p=>Int32Array.from({length:a}).fill(c))}static equals(o,a){if(!o||!a||!o.length||!a.length||o.length!==a.length)return!1;for(let c=0,h=o.length;c<h;c++)if(o[c]!==a[c])return!1;return!0}static hashCode(o){if(o===null)return 0;let a=1;for(const c of o)a=31*a+c;return a}static fillUint8Array(o,a){for(let c=0;c!==o.length;c++)o[c]=a}static copyOf(o,a){return o.slice(0,a)}static copyOfUint8Array(o,a){if(o.length<=a){const c=new Uint8Array(a);return c.set(o),c}return o.slice(0,a)}static copyOfRange(o,a,c){const h=c-a,p=new Int32Array(h);return _.arraycopy(o,a,p,0,h),p}static binarySearch(o,a,c){c===void 0&&(c=N.numberComparator);let h=0,p=o.length-1;for(;h<=p;){const g=p+h>>1,w=c(a,o[g]);if(w>0)h=g+1;else if(w<0)p=g-1;else return g}return-h-1}static numberComparator(o,a){return o-a}}class A{static numberOfTrailingZeros(o){let a;if(o===0)return 32;let c=31;return a=o<<16,a!==0&&(c-=16,o=a),a=o<<8,a!==0&&(c-=8,o=a),a=o<<4,a!==0&&(c-=4,o=a),a=o<<2,a!==0&&(c-=2,o=a),c-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let a=1;return o>>>16||(a+=16,o<<=16),o>>>24||(a+=8,o<<=8),o>>>28||(a+=4,o<<=4),o>>>30||(a+=2,o<<=2),a-=o>>>31,a}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,a){return Math.trunc(o/a)}static parseInt(o,a=void 0){return parseInt(o,a)}}A.MIN_VALUE_32_BITS=-2147483648,A.MAX_VALUE=Number.MAX_SAFE_INTEGER;class O{constructor(o,a){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,a==null?this.bits=O.makeArray(o):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const a=O.makeArray(o);_.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const a=this.size;if(o>=a)return a;const c=this.bits;let h=Math.floor(o/32),p=c[h];p&=~((1<<(o&31))-1);const g=c.length;for(;p===0;){if(++h===g)return a;p=c[h]}const w=h*32+A.numberOfTrailingZeros(p);return w>a?a:w}getNextUnset(o){const a=this.size;if(o>=a)return a;const c=this.bits;let h=Math.floor(o/32),p=~c[h];p&=~((1<<(o&31))-1);const g=c.length;for(;p===0;){if(++h===g)return a;p=~c[h]}const w=h*32+A.numberOfTrailingZeros(p);return w>a?a:w}setBulk(o,a){this.bits[Math.floor(o/32)]=a}setRange(o,a){if(a<o||o<0||a>this.size)throw new y;if(a===o)return;a--;const c=Math.floor(o/32),h=Math.floor(a/32),p=this.bits;for(let g=c;g<=h;g++){const w=g>c?0:o&31,T=(2<<(g<h?31:a&31))-(1<<w);p[g]|=T}}clear(){const o=this.bits.length,a=this.bits;for(let c=0;c<o;c++)a[c]=0}isRange(o,a,c){if(a<o||o<0||a>this.size)throw new y;if(a===o)return!0;a--;const h=Math.floor(o/32),p=Math.floor(a/32),g=this.bits;for(let w=h;w<=p;w++){const C=w>h?0:o&31,j=(2<<(w<p?31:a&31))-(1<<C)&4294967295;if((g[w]&j)!==(c?j:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,a){if(a<0||a>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((o>>c-1&1)===1)}appendBitArray(o){const a=o.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(o.get(c))}xor(o){if(this.size!==o.size)throw new y("Sizes don't match");const a=this.bits;for(let c=0,h=a.length;c<h;c++)a[c]^=o.bits[c]}toBytes(o,a,c,h){for(let p=0;p<h;p++){let g=0;for(let w=0;w<8;w++)this.get(o)&&(g|=1<<7-w),o++;a[c+p]=g}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,h=this.bits;for(let p=0;p<c;p++){let g=h[p];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,o[a-p]=g}if(this.size!==c*32){const p=c*32-this.size;let g=o[0]>>>p;for(let w=1;w<c;w++){const C=o[w];g|=C<<32-p,o[w-1]=g,g=C>>>p}o[c-1]=g}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof O))return!1;const a=o;return this.size===a.size&&N.equals(this.bits,a.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let o="";for(let a=0,c=this.size;a<c;a++)a&7||(o+=" "),o+=this.get(a)?"X":".";return o}clone(){return new O(this.size,this.bits.slice())}}var k;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(k||(k={}));var F=k;class B extends f{static getFormatInstance(){return new B}}B.kind="FormatException";var P;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(P||(P={}));class M{constructor(o,a,c,...h){this.valueIdentifier=o,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,M.VALUE_IDENTIFIER_TO_ECI.set(o,this),M.NAME_TO_ECI.set(c,this);const p=this.values;for(let g=0,w=p.length;g!==w;g++){const C=p[g];M.VALUES_TO_ECI.set(C,this)}for(const g of h)M.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new B("incorect value");const a=M.VALUES_TO_ECI.get(o);if(a===void 0)throw new B("incorect value");return a}static getCharacterSetECIByName(o){const a=M.NAME_TO_ECI.get(o);if(a===void 0)throw new B("incorect value");return a}equals(o){if(!(o instanceof M))return!1;const a=o;return this.getName()===a.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(P.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(P.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(P.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(P.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(P.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(P.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(P.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(P.Big5,28,"Big5"),M.GB18030=new M(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(P.EUC_KR,30,"EUC_KR","EUC-KR");class $ extends f{}$.kind="UnsupportedOperationException";class G{static decode(o,a){const c=this.encodingName(a);return this.customDecoder?this.customDecoder(o,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(o,c):new TextDecoder(c).decode(o)}static shouldDecodeOnFallback(o){return!G.isBrowser()&&o==="ISO-8859-1"}static encode(o,a){const c=this.encodingName(a);return this.customEncoder?this.customEncoder(o,c):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof M?o:M.getCharacterSetECIByName(o)}static decodeFallback(o,a){const c=this.encodingCharacterSet(a);if(G.isDecodeFallbackSupported(c)){let h="";for(let p=0,g=o.length;p<g;p++){let w=o[p].toString(16);w.length<2&&(w="0"+w),h+="%"+w}return decodeURIComponent(h)}if(c.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new $(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(M.UTF8)||o.equals(M.ISO8859_1)||o.equals(M.ASCII)}static encodeFallback(o){const c=btoa(unescape(encodeURIComponent(o))).split(""),h=[];for(let p=0;p<c.length;p++)h.push(c[p].charCodeAt(0));return new Uint8Array(h)}}class K{static castAsNonUtf8Char(o,a=null){const c=a?a.getName():this.ISO88591;return G.decode(new Uint8Array([o]),c)}static guessEncoding(o,a){if(a!=null&&a.get(F.CHARACTER_SET)!==void 0)return a.get(F.CHARACTER_SET).toString();const c=o.length;let h=!0,p=!0,g=!0,w=0,C=0,T=0,j=0,L=0,U=0,W=0,X=0,Z=0,te=0,se=0;const we=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let _e=0;_e<c&&(h||p||g);_e++){const ge=o[_e]&255;g&&(w>0?ge&128?w--:g=!1:ge&128&&(ge&64?(w++,ge&32?(w++,ge&16?(w++,ge&8?g=!1:j++):T++):C++):g=!1)),h&&(ge>127&&ge<160?h=!1:ge>159&&(ge<192||ge===215||ge===247)&&se++),p&&(L>0?ge<64||ge===127||ge>252?p=!1:L--:ge===128||ge===160||ge>239?p=!1:ge>160&&ge<224?(U++,X=0,W++,W>Z&&(Z=W)):ge>127?(L++,W=0,X++,X>te&&(te=X)):(W=0,X=0))}return g&&w>0&&(g=!1),p&&L>0&&(p=!1),g&&(we||C+T+j>0)?K.UTF8:p&&(K.ASSUME_SHIFT_JIS||Z>=3||te>=3)?K.SHIFT_JIS:h&&p?Z===2&&U===2||se*10>=c?K.SHIFT_JIS:K.ISO88591:h?K.ISO88591:p?K.SHIFT_JIS:g?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(o,...a){let c=-1;function h(g,w,C,T,j,L){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=j?parseInt(j.substr(1)):void 0,W;switch(L){case"s":W=a[c];break;case"c":W=a[c][0];break;case"f":W=parseFloat(a[c]).toFixed(g);break;case"p":W=parseFloat(a[c]).toPrecision(g);break;case"e":W=parseFloat(a[c]).toExponential(g);break;case"x":W=parseInt(a[c]).toString(U||16);break;case"d":W=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(U);let X=parseInt(C),Z=C&&C[0]+""=="0"?"0":" ";for(;W.length<X;)W=w!==void 0?W+Z:Z+W;return W}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(p,h)}static getBytes(o,a){return G.encode(o,a)}static getCharCode(o,a=0){return o.charCodeAt(a)}static getCharAt(o){return String.fromCharCode(o)}}K.SHIFT_JIS=M.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=M.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=M.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class ee{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=K.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,a,c){for(let h=a;a<a+c;h++)this.append(o[h]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+1)}substring(o,a){return this.value.substring(o,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,a){this.value=this.value.substr(0,o)+a+this.value.substr(o+a.length)}}class z{constructor(o,a,c,h){if(this.width=o,this.height=a,this.rowSize=c,this.bits=h,a==null&&(a=o),this.height=a,o<1||a<1)throw new y("Both dimensions must be greater than 0");c==null&&(c=Math.floor((o+31)/32)),this.rowSize=c,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const a=o.length,c=o[0].length,h=new z(c,a);for(let p=0;p<a;p++){const g=o[p];for(let w=0;w<c;w++)g[w]&&h.set(w,p)}return h}static parseFromString(o,a,c){if(o===null)throw new y("stringRepresentation cannot be null");const h=new Array(o.length);let p=0,g=0,w=-1,C=0,T=0;for(;T<o.length;)if(o.charAt(T)===`
`||o.charAt(T)==="\r"){if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");g=p,C++}T++}else if(o.substring(T,T+a.length)===a)T+=a.length,h[p]=!0,p++;else if(o.substring(T,T+c.length)===c)T+=c.length,h[p]=!1,p++;else throw new y("illegal character encountered: "+o.substring(T));if(p>g){if(w===-1)w=p-g;else if(p-g!==w)throw new y("row lengths do not match");C++}const j=new z(w,C);for(let L=0;L<p;L++)h[L]&&j.set(Math.floor(L%w),Math.floor(L/w));return j}get(o,a){const c=a*this.rowSize+Math.floor(o/32);return(this.bits[c]>>>(o&31)&1)!==0}set(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]|=1<<(o&31)&4294967295}unset(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]&=~(1<<(o&31)&4294967295)}flip(o,a){const c=a*this.rowSize+Math.floor(o/32);this.bits[c]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new y("input matrix dimensions do not match");const a=new O(Math.floor(this.width/32)+1),c=this.rowSize,h=this.bits;for(let p=0,g=this.height;p<g;p++){const w=p*c,C=o.getRow(p,a).getBitArray();for(let T=0;T<c;T++)h[w+T]^=C[T]}}clear(){const o=this.bits,a=o.length;for(let c=0;c<a;c++)o[c]=0}setRegion(o,a,c,h){if(a<0||o<0)throw new y("Left and top must be nonnegative");if(h<1||c<1)throw new y("Height and width must be at least 1");const p=o+c,g=a+h;if(g>this.height||p>this.width)throw new y("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let T=a;T<g;T++){const j=T*w;for(let L=o;L<p;L++)C[j+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(o,a){a==null||a.getSize()<this.width?a=new O(this.width):a.clear();const c=this.rowSize,h=this.bits,p=o*c;for(let g=0;g<c;g++)a.setBulk(g*32,h[p+g]);return a}setRow(o,a){_.arraycopy(a.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),a=this.getHeight();let c=new O(o),h=new O(o);for(let p=0,g=Math.floor((a+1)/2);p<g;p++)c=this.getRow(p,c),h=this.getRow(a-1-p,h),c.reverse(),h.reverse(),this.setRow(p,h),this.setRow(a-1-p,c)}getEnclosingRectangle(){const o=this.width,a=this.height,c=this.rowSize,h=this.bits;let p=o,g=a,w=-1,C=-1;for(let T=0;T<a;T++)for(let j=0;j<c;j++){const L=h[T*c+j];if(L!==0){if(T<g&&(g=T),T>C&&(C=T),j*32<p){let U=0;for(;!(L<<31-U&4294967295);)U++;j*32+U<p&&(p=j*32+U)}if(j*32+31>w){let U=31;for(;!(L>>>U);)U--;j*32+U>w&&(w=j*32+U)}}}return w<p||C<g?null:Int32Array.from([p,g,w-p+1,C-g+1])}getTopLeftOnBit(){const o=this.rowSize,a=this.bits;let c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;const h=c/o;let p=c%o*32;const g=a[c];let w=0;for(;!(g<<31-w&4294967295);)w++;return p+=w,Int32Array.from([p,h])}getBottomRightOnBit(){const o=this.rowSize,a=this.bits;let c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;const h=Math.floor(c/o);let p=Math.floor(c%o)*32;const g=a[c];let w=31;for(;!(g>>>w);)w--;return p+=w,Int32Array.from([p,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof z))return!1;const a=o;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&N.equals(this.bits,a.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+N.hashCode(this.bits),o}toString(o="X ",a="  ",c=`
`){return this.buildToString(o,a,c)}buildToString(o,a,c){let h=new ee;for(let p=0,g=this.height;p<g;p++){for(let w=0,C=this.width;w<C;w++)h.append(this.get(w,p)?o:a);h.append(c)}return h.toString()}clone(){return new z(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends f{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class J extends S{constructor(o){super(o),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(o,a){const c=this.getLuminanceSource(),h=c.getWidth();a==null||a.getSize()<h?a=new O(h):a.clear(),this.initArrays(h);const p=c.getRow(o,this.luminances),g=this.buckets;for(let C=0;C<h;C++)g[(p[C]&255)>>J.LUMINANCE_SHIFT]++;const w=J.estimateBlackPoint(g);if(h<3)for(let C=0;C<h;C++)(p[C]&255)<w&&a.set(C);else{let C=p[0]&255,T=p[1]&255;for(let j=1;j<h-1;j++){const L=p[j+1]&255;(T*4-C-L)/2<w&&a.set(j),C=T,T=L}}return a}getBlackMatrix(){const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight(),h=new z(a,c);this.initArrays(a);const p=this.buckets;for(let C=1;C<5;C++){const T=Math.floor(c*C/5),j=o.getRow(T,this.luminances),L=Math.floor(a*4/5);for(let U=Math.floor(a/5);U<L;U++){const W=j[U]&255;p[W>>J.LUMINANCE_SHIFT]++}}const g=J.estimateBlackPoint(p),w=o.getMatrix();for(let C=0;C<c;C++){const T=C*a;for(let j=0;j<a;j++)(w[T+j]&255)<g&&h.set(j,C)}return h}createBinarizer(o){return new J(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const a=this.buckets;for(let c=0;c<J.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(o){const a=o.length;let c=0,h=0,p=0;for(let j=0;j<a;j++)o[j]>p&&(h=j,p=o[j]),o[j]>c&&(c=o[j]);let g=0,w=0;for(let j=0;j<a;j++){const L=j-h,U=o[j]*L*L;U>w&&(g=j,w=U)}if(h>g){const j=h;h=g,g=j}if(g-h<=a/16)throw new V;let C=g-1,T=-1;for(let j=g-1;j>h;j--){const L=j-h,U=L*L*(g-j)*(c-o[j]);U>T&&(C=j,T=U)}return C<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class Y extends J{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),a=o.getWidth(),c=o.getHeight();if(a>=Y.MINIMUM_DIMENSION&&c>=Y.MINIMUM_DIMENSION){const h=o.getMatrix();let p=a>>Y.BLOCK_SIZE_POWER;a&Y.BLOCK_SIZE_MASK&&p++;let g=c>>Y.BLOCK_SIZE_POWER;c&Y.BLOCK_SIZE_MASK&&g++;const w=Y.calculateBlackPoints(h,p,g,a,c),C=new z(a,c);Y.calculateThresholdForBlock(h,p,g,a,c,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new Y(o)}static calculateThresholdForBlock(o,a,c,h,p,g,w){const C=p-Y.BLOCK_SIZE,T=h-Y.BLOCK_SIZE;for(let j=0;j<c;j++){let L=j<<Y.BLOCK_SIZE_POWER;L>C&&(L=C);const U=Y.cap(j,2,c-3);for(let W=0;W<a;W++){let X=W<<Y.BLOCK_SIZE_POWER;X>T&&(X=T);const Z=Y.cap(W,2,a-3);let te=0;for(let we=-2;we<=2;we++){const _e=g[U+we];te+=_e[Z-2]+_e[Z-1]+_e[Z]+_e[Z+1]+_e[Z+2]}const se=te/25;Y.thresholdBlock(o,X,L,se,h,w)}}}static cap(o,a,c){return o<a?a:o>c?c:o}static thresholdBlock(o,a,c,h,p,g){for(let w=0,C=c*p+a;w<Y.BLOCK_SIZE;w++,C+=p)for(let T=0;T<Y.BLOCK_SIZE;T++)(o[C+T]&255)<=h&&g.set(a+T,c+w)}static calculateBlackPoints(o,a,c,h,p){const g=p-Y.BLOCK_SIZE,w=h-Y.BLOCK_SIZE,C=new Array(c);for(let T=0;T<c;T++){C[T]=new Int32Array(a);let j=T<<Y.BLOCK_SIZE_POWER;j>g&&(j=g);for(let L=0;L<a;L++){let U=L<<Y.BLOCK_SIZE_POWER;U>w&&(U=w);let W=0,X=255,Z=0;for(let se=0,we=j*h+U;se<Y.BLOCK_SIZE;se++,we+=h){for(let _e=0;_e<Y.BLOCK_SIZE;_e++){const ge=o[we+_e]&255;W+=ge,ge<X&&(X=ge),ge>Z&&(Z=ge)}if(Z-X>Y.MIN_DYNAMIC_RANGE)for(se++,we+=h;se<Y.BLOCK_SIZE;se++,we+=h)for(let _e=0;_e<Y.BLOCK_SIZE;_e++)W+=o[we+_e]&255}let te=W>>Y.BLOCK_SIZE_POWER*2;if(Z-X<=Y.MIN_DYNAMIC_RANGE&&(te=X/2,T>0&&L>0)){const se=(C[T-1][L]+2*C[T][L-1]+C[T-1][L-1])/4;X<se&&(te=se)}C[T][L]=te}}return C}}Y.BLOCK_SIZE_POWER=3,Y.BLOCK_SIZE=1<<Y.BLOCK_SIZE_POWER,Y.BLOCK_SIZE_MASK=Y.BLOCK_SIZE-1,Y.MINIMUM_DIMENSION=Y.BLOCK_SIZE*5,Y.MIN_DYNAMIC_RANGE=24;class q{constructor(o,a){this.width=o,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,a,c,h){throw new $("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let a=new ee;for(let c=0;c<this.height;c++){const h=this.getRow(c,o);for(let p=0;p<this.width;p++){const g=h[p]&255;let w;g<64?w="#":g<128?w="+":g<192?w=".":w=" ",a.append(w)}a.append(`
`)}return a.toString()}}class Q extends q{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,a){const c=this.delegate.getRow(o,a),h=this.getWidth();for(let p=0;p<h;p++)c[p]=255-(c[p]&255);return c}getMatrix(){const o=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let h=0;h<a;h++)c[h]=255-(o[h]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(o,a,c,h){return new Q(this.delegate.crop(o,a,c,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Q(this.delegate.rotateCounterClockwise45())}}class ie extends q{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=ie.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const a=o.getContext("2d").getImageData(0,0,o.width,o.height);return ie.toGrayscaleBuffer(a.data,o.width,o.height)}static toGrayscaleBuffer(o,a,c){const h=new Uint8ClampedArray(a*c);for(let p=0,g=0,w=o.length;p<w;p+=4,g++){let C;if(o[p+3]===0)C=255;else{const j=o[p],L=o[p+1],U=o[p+2];C=306*j+601*L+117*U+512>>10}h[g]=C}return h}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth(),h=o*c;return a===null?a=this.buffer.slice(h,h+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(h,h+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,a,c,h){return super.crop(o,a,c,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const a=this.getTempCanvasElement(),c=a.getContext("2d"),h=o*ie.DEGREE_TO_RADIANS,p=this.canvas.width,g=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(h))*p+Math.abs(Math.sin(h))*g),C=Math.ceil(Math.abs(Math.sin(h))*p+Math.abs(Math.cos(h))*g);return a.width=w,a.height=C,c.translate(w/2,C/2),c.rotate(h),c.drawImage(this.canvas,p/-2,g/-2),this.buffer=ie.makeBufferFromCanvasImageData(a),this}invert(){return new Q(this)}}ie.DEGREE_TO_RADIANS=Math.PI/180;class fe{constructor(o,a,c){this.deviceId=o,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||tu||self||window||void 0)&&(globalThis||tu||self||window||void 0).__awaiter||function(D,o,a,c){function h(p){return p instanceof a?p:new a(function(g){g(p)})}return new(a||(a=Promise))(function(p,g){function w(j){try{T(c.next(j))}catch(L){g(L)}}function C(j){try{T(c.throw(j))}catch(L){g(L)}}function T(j){j.done?p(j.value):h(j.value).then(w,C)}T((c=c.apply(D,o||[])).next())})};class le{constructor(o,a=500,c){this.reader=o,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const c of o){const h=c.kind==="video"?"videoinput":c.kind;if(h!=="videoinput")continue;const p=c.deviceId||c.id,g=c.label||`Video device ${a.length+1}`,w=c.groupId,C={deviceId:p,label:g,kind:h,groupId:w};a.push(C)}return a})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new fe(a.deviceId,a.label))})}findDeviceById(o){return oe(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===o):null})}decodeFromInputVideoDevice(o,a){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,a)})}decodeOnceFromVideoDevice(o,a){return oe(this,void 0,void 0,function*(){this.reset();let c;o?c={deviceId:{exact:o}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(o,a){return oe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(o,a){return oe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(o,a,c){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,a,c)})}decodeFromVideoDevice(o,a,c){return oe(this,void 0,void 0,function*(){let h;o?h={deviceId:{exact:o}}:h={facingMode:"environment"};const p={video:h};return yield this.decodeFromConstraints(p,a,c)})}decodeFromConstraints(o,a,c){return oe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(h,a,c)})}decodeFromStream(o,a,c){return oe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(o,a);return yield this.decodeContinuously(h,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,a){return oe(this,void 0,void 0,function*(){const c=this.prepareVideoElement(a);return this.addVideoSource(c,o),this.videoElement=c,this.stream=o,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(o){return new Promise((a,c)=>this.playVideoOnLoad(o,()=>a()))}playVideoOnLoad(o,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",a),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,a){const c=document.getElementById(o);if(!c)throw new x(`element with id '${o}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new x(`element with id '${o}' must be an ${a} element`);return c}decodeFromImage(o,a){if(!o&&!a)throw new x("either imageElement with a src set or an url must be provided");return a&&!o?this.decodeFromImageUrl(a):this.decodeFromImageElement(o)}decodeFromVideo(o,a){if(!o&&!a)throw new x("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,a,c){if(o===void 0&&a===void 0)throw new x("Either an element with a src set or an URL must be provided");return a&&!o?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(o,c)}decodeFromImageElement(o){if(!o)throw new x("An image element must be provided.");this.reset();const a=this.prepareImageElement(o);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(o){const a=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(o,a){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(o){if(!o)throw new x("A video element must be provided.");this.reset();const a=this.prepareVideoElement(o);return this.videoElement=a,a}decodeFromImageUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const c=this._decodeOnLoadImage(a);return a.src=o,c}decodeFromVideoUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=o,c}decodeFromVideoUrlContinuously(o,a){if(!o)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(c,a);return c.src=o,h}_decodeOnLoadImage(o){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(a,c),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,a){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,a)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let a;return typeof o>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(a=o),a}prepareVideoElement(o){let a;return!o&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof o=="string"&&(a=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(a=o),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(o,a=!0,c=!0){this._stopAsyncDecode=!1;const h=(p,g)=>{if(this._stopAsyncDecode){g(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(o);p(w)}catch(w){const C=a&&w instanceof V,j=(w instanceof b||w instanceof B)&&c;if(C||j)return setTimeout(h,this._timeBetweenDecodingAttempts,p,g);g(w)}};return new Promise((p,g)=>h(p,g))}decodeContinuously(o,a){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(o);a(h,null),setTimeout(c,this.timeBetweenScansMillis)}catch(h){a(null,h);const p=h instanceof b||h instanceof B,g=h instanceof V;(p||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(o){const a=this.createBinaryBitmap(o);return this.decodeBitmap(a)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,a,c){a||(a={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(o,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const a=this.getCaptureCanvas(o),c=new ie(a),h=new Y(c);return new v(h)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const a=this.createCaptureCanvas(o);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let c,h;return typeof o<"u"&&(o instanceof HTMLVideoElement?(c=o.videoWidth,h=o.videoHeight):o instanceof HTMLImageElement&&(c=o.naturalWidth||o.width,h=o.naturalHeight||o.height)),a.style.width=c+"px",a.style.height=h+"px",a.width=c,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,a){try{o.srcObject=a}catch{o.src=URL.createObjectURL(a)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class ce{constructor(o,a,c=a==null?0:8*a.length,h,p,g=_.currentTimeMillis()){this.text=o,this.rawBytes=a,this.numBits=c,this.resultPoints=h,this.format=p,this.timestamp=g,this.text=o,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=h,this.format=p,this.resultMetadata=null,g==null?this.timestamp=_.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,a)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const a=this.resultPoints;if(a===null)this.resultPoints=o;else if(o!==null&&o.length>0){const c=new Array(a.length+o.length);_.arraycopy(a,0,c,0,a.length),_.arraycopy(o,0,c,a.length,o.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Be;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Be||(Be={}));var xe=Be,be;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(be||(be={}));var Pe=be;class Xe{constructor(o,a,c,h,p=-1,g=-1){this.rawBytes=o,this.text=a,this.byteSegments=c,this.ecLevel=h,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=g,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ae{exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}static addOrSubtract(o,a){return o^a}}class Ee{constructor(o,a){if(a.length===0)throw new y;this.field=o;const c=a.length;if(c>1&&a[0]===0){let h=1;for(;h<c&&a[h]===0;)h++;h===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-h),_.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const a=this.coefficients;let c;if(o===1){c=0;for(let g=0,w=a.length;g!==w;g++){const C=a[g];c=ae.addOrSubtract(c,C)}return c}c=a[0];const h=a.length,p=this.field;for(let g=1;g<h;g++)c=ae.addOrSubtract(p.multiply(o,c),a[g]);return c}addOrSubtract(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){const g=a;a=c,c=g}let h=new Int32Array(c.length);const p=c.length-a.length;_.arraycopy(c,0,h,0,p);for(let g=p;g<c.length;g++)h[g]=ae.addOrSubtract(a[g-p],c[g]);return new Ee(this.field,h)}multiply(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const a=this.coefficients,c=a.length,h=o.coefficients,p=h.length,g=new Int32Array(c+p-1),w=this.field;for(let C=0;C<c;C++){const T=a[C];for(let j=0;j<p;j++)g[C+j]=ae.addOrSubtract(g[C+j],w.multiply(T,h[j]))}return new Ee(w,g)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const a=this.coefficients.length,c=this.field,h=new Int32Array(a),p=this.coefficients;for(let g=0;g<a;g++)h[g]=c.multiply(p[g],o);return new Ee(c,h)}multiplyByMonomial(o,a){if(o<0)throw new y;if(a===0)return this.field.getZero();const c=this.coefficients,h=c.length,p=new Int32Array(h+o),g=this.field;for(let w=0;w<h;w++)p[w]=g.multiply(c[w],a);return new Ee(g,p)}divide(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new y("Divide by 0");const a=this.field;let c=a.getZero(),h=this;const p=o.getCoefficient(o.getDegree()),g=a.inverse(p);for(;h.getDegree()>=o.getDegree()&&!h.isZero();){const w=h.getDegree()-o.getDegree(),C=a.multiply(h.getCoefficient(h.getDegree()),g),T=o.multiplyByMonomial(w,C),j=a.buildMonomial(w,C);c=c.addOrSubtract(j),h=h.addOrSubtract(T)}return[c,h]}toString(){let o="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(o+=" - ",c=-c):o.length>0&&(o+=" + "),a===0||c!==1){const h=this.field.log(c);h===0?o+="1":h===1?o+="a":(o+="a^",o+=h)}a!==0&&(a===1?o+="x":(o+="x^",o+=a))}}return o}}class ke extends f{}ke.kind="ArithmeticException";class Me extends ae{constructor(o,a,c){super(),this.primitive=o,this.size=a,this.generatorBase=c;const h=new Int32Array(a);let p=1;for(let w=0;w<a;w++)h[w]=p,p*=2,p>=a&&(p^=o,p&=a-1);this.expTable=h;const g=new Int32Array(a);for(let w=0;w<a-1;w++)g[h[w]]=w;this.logTable=g,this.zero=new Ee(this,Int32Array.from([0])),this.one=new Ee(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new y;if(a===0)return this.zero;const c=new Int32Array(o+1);return c[0]=a,new Ee(this,c)}inverse(o){if(o===0)throw new ke;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+A.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class gt extends f{}gt.kind="ReedSolomonException";class St extends f{}St.kind="IllegalStateException";class er{constructor(o){this.field=o}decode(o,a){const c=this.field,h=new Ee(c,o),p=new Int32Array(a);let g=!0;for(let W=0;W<a;W++){const X=h.evaluateAt(c.exp(W+c.getGeneratorBase()));p[p.length-1-W]=X,X!==0&&(g=!1)}if(g)return;const w=new Ee(c,p),C=this.runEuclideanAlgorithm(c.buildMonomial(a,1),w,a),T=C[0],j=C[1],L=this.findErrorLocations(T),U=this.findErrorMagnitudes(j,L);for(let W=0;W<L.length;W++){const X=o.length-1-c.log(L[W]);if(X<0)throw new gt("Bad error location");o[X]=Me.addOrSubtract(o[X],U[W])}}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){const W=o;o=a,a=W}const h=this.field;let p=o,g=a,w=h.getZero(),C=h.getOne();for(;g.getDegree()>=(c/2|0);){let W=p,X=w;if(p=g,w=C,p.isZero())throw new gt("r_{i-1} was zero");g=W;let Z=h.getZero();const te=p.getCoefficient(p.getDegree()),se=h.inverse(te);for(;g.getDegree()>=p.getDegree()&&!g.isZero();){const we=g.getDegree()-p.getDegree(),_e=h.multiply(g.getCoefficient(g.getDegree()),se);Z=Z.addOrSubtract(h.buildMonomial(we,_e)),g=g.addOrSubtract(p.multiplyByMonomial(we,_e))}if(C=Z.multiply(w).addOrSubtract(X),g.getDegree()>=p.getDegree())throw new St("Division algorithm failed to reduce polynomial?")}const T=C.getCoefficient(0);if(T===0)throw new gt("sigmaTilde(0) was zero");const j=h.inverse(T),L=C.multiplyScalar(j),U=g.multiplyScalar(j);return[L,U]}findErrorLocations(o){const a=o.getDegree();if(a===1)return Int32Array.from([o.getCoefficient(1)]);const c=new Int32Array(a);let h=0;const p=this.field;for(let g=1;g<p.getSize()&&h<a;g++)o.evaluateAt(g)===0&&(c[h]=p.inverse(g),h++);if(h!==a)throw new gt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(o,a){const c=a.length,h=new Int32Array(c),p=this.field;for(let g=0;g<c;g++){const w=p.inverse(a[g]);let C=1;for(let T=0;T<c;T++)if(g!==T){const j=p.multiply(a[T],w),L=j&1?j&-2:j|1;C=p.multiply(C,L)}h[g]=p.multiply(o.evaluateAt(w),p.inverse(C)),p.getGeneratorBase()!==0&&(h[g]=p.multiply(h[g],w))}return h}}var me;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(me||(me={}));class Fe{decode(o){this.ddata=o;let a=o.getBits(),c=this.extractBits(a),h=this.correctBits(c),p=Fe.convertBoolArrayToByteArray(h),g=Fe.getEncodedData(h),w=new Xe(p,g,null,null);return w.setNumBits(h.length),w}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let a=o.length,c=me.UPPER,h=me.UPPER,p="",g=0;for(;g<a;)if(h===me.BINARY){if(a-g<5)break;let w=Fe.readCode(o,g,5);if(g+=5,w===0){if(a-g<11)break;w=Fe.readCode(o,g,11)+31,g+=11}for(let C=0;C<w;C++){if(a-g<8){g=a;break}const T=Fe.readCode(o,g,8);p+=K.castAsNonUtf8Char(T),g+=8}h=c}else{let w=h===me.DIGIT?4:5;if(a-g<w)break;let C=Fe.readCode(o,g,w);g+=w;let T=Fe.getCharacter(h,C);T.startsWith("CTRL_")?(c=h,h=Fe.getTable(T.charAt(5)),T.charAt(6)==="L"&&(c=h)):(p+=T,h=c)}return p}static getTable(o){switch(o){case"L":return me.LOWER;case"P":return me.PUNCT;case"M":return me.MIXED;case"D":return me.DIGIT;case"B":return me.BINARY;case"U":default:return me.UPPER}}static getCharacter(o,a){switch(o){case me.UPPER:return Fe.UPPER_TABLE[a];case me.LOWER:return Fe.LOWER_TABLE[a];case me.MIXED:return Fe.MIXED_TABLE[a];case me.PUNCT:return Fe.PUNCT_TABLE[a];case me.DIGIT:return Fe.DIGIT_TABLE[a];default:throw new St("Bad table")}}correctBits(o){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=Me.AZTEC_DATA_10):(c=12,a=Me.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),p=o.length/c;if(p<h)throw new B;let g=o.length%c,w=new Int32Array(p);for(let U=0;U<p;U++,g+=c)w[U]=Fe.readCode(o,g,c);try{new er(a).decode(w,p-h)}catch(U){throw new B(U)}let C=(1<<c)-1,T=0;for(let U=0;U<h;U++){let W=w[U];if(W===0||W===C)throw new B;(W===1||W===C-1)&&T++}let j=new Array(h*c-T),L=0;for(let U=0;U<h;U++){let W=w[U];if(W===1||W===C-1)j.fill(W>1,L,L+c-1),L+=c-1;else for(let X=c-1;X>=0;--X)j[L++]=(W&1<<X)!==0}return j}extractBits(o){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),h=(a?11:14)+c*4,p=new Int32Array(h),g=new Array(this.totalBitsInLayer(c,a));if(a)for(let w=0;w<p.length;w++)p[w]=w;else{let w=h+1+2*A.truncDivision(A.truncDivision(h,2)-1,15),C=h/2,T=A.truncDivision(w,2);for(let j=0;j<C;j++){let L=j+A.truncDivision(j,15);p[C-j-1]=T-L-1,p[C+j]=T+L+1}}for(let w=0,C=0;w<c;w++){let T=(c-w)*4+(a?9:12),j=w*2,L=h-1-j;for(let U=0;U<T;U++){let W=U*2;for(let X=0;X<2;X++)g[C+W+X]=o.get(p[j+X],p[j+U]),g[C+2*T+W+X]=o.get(p[j+U],p[L-X]),g[C+4*T+W+X]=o.get(p[L-X],p[L-U]),g[C+6*T+W+X]=o.get(p[L-U],p[j+X])}C+=T*8}return g}static readCode(o,a,c){let h=0;for(let p=a;p<a+c;p++)h<<=1,o[p]&&(h|=1);return h}static readByte(o,a){let c=o.length-a;return c>=8?Fe.readCode(o,a,8):Fe.readCode(o,a,c)<<8-c}static convertBoolArrayToByteArray(o){let a=new Uint8Array((o.length+7)/8);for(let c=0;c<a.length;c++)a[c]=Fe.readByte(o,8*c);return a}totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}Fe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Fe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Fe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Fe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Fe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ae{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,a,c,h){const p=o-c,g=a-h;return Math.sqrt(p*p+g*g)}static sum(o){let a=0;for(let c=0,h=o.length;c!==h;c++){const p=o[c];a+=p}return a}}class bt{static floatToIntBits(o){return o}}bt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(o,a){this.x=o,this.y=a}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ce){const a=o;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*bt.floatToIntBits(this.x)+bt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const a=this.distance(o[0],o[1]),c=this.distance(o[1],o[2]),h=this.distance(o[0],o[2]);let p,g,w;if(c>=a&&c>=h?(g=o[0],p=o[1],w=o[2]):h>=c&&h>=a?(g=o[1],p=o[0],w=o[2]):(g=o[2],p=o[0],w=o[1]),this.crossProductZ(p,g,w)<0){const C=p;p=w,w=C}o[0]=p,o[1]=g,o[2]=w}static distance(o,a){return Ae.distance(o.x,o.y,a.x,a.y)}static crossProductZ(o,a,c){const h=a.x,p=a.y;return(c.x-h)*(o.y-p)-(c.y-p)*(o.x-h)}}class Dr{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it extends Dr{constructor(o,a,c,h,p){super(o,a),this.compact=c,this.nbDatablocks=h,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class tr{constructor(o,a,c,h){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),a==null&&(a=tr.INIT_SIZE),c==null&&(c=o.getWidth()/2|0),h==null&&(h=o.getHeight()/2|0);const p=a/2|0;if(this.leftInit=c-p,this.rightInit=c+p,this.upInit=h-p,this.downInit=h+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let o=this.leftInit,a=this.rightInit,c=this.upInit,h=this.downInit,p=!1,g=!0,w=!1,C=!1,T=!1,j=!1,L=!1;const U=this.width,W=this.height;for(;g;){g=!1;let X=!0;for(;(X||!C)&&a<U;)X=this.containsBlackPoint(c,h,a,!1),X?(a++,g=!0,C=!0):C||a++;if(a>=U){p=!0;break}let Z=!0;for(;(Z||!T)&&h<W;)Z=this.containsBlackPoint(o,a,h,!0),Z?(h++,g=!0,T=!0):T||h++;if(h>=W){p=!0;break}let te=!0;for(;(te||!j)&&o>=0;)te=this.containsBlackPoint(c,h,o,!1),te?(o--,g=!0,j=!0):j||o--;if(o<0){p=!0;break}let se=!0;for(;(se||!L)&&c>=0;)se=this.containsBlackPoint(o,a,c,!0),se?(c--,g=!0,L=!0):L||c--;if(c<0){p=!0;break}g&&(w=!0)}if(!p&&w){const X=a-o;let Z=null;for(let _e=1;Z===null&&_e<X;_e++)Z=this.getBlackPointOnSegment(o,h-_e,o+_e,h);if(Z==null)throw new V;let te=null;for(let _e=1;te===null&&_e<X;_e++)te=this.getBlackPointOnSegment(o,c+_e,o+_e,c);if(te==null)throw new V;let se=null;for(let _e=1;se===null&&_e<X;_e++)se=this.getBlackPointOnSegment(a,c+_e,a-_e,c);if(se==null)throw new V;let we=null;for(let _e=1;we===null&&_e<X;_e++)we=this.getBlackPointOnSegment(a,h-_e,a-_e,h);if(we==null)throw new V;return this.centerEdges(we,Z,se,te)}else throw new V}getBlackPointOnSegment(o,a,c,h){const p=Ae.round(Ae.distance(o,a,c,h)),g=(c-o)/p,w=(h-a)/p,C=this.image;for(let T=0;T<p;T++){const j=Ae.round(o+T*g),L=Ae.round(a+T*w);if(C.get(j,L))return new Ce(j,L)}return null}centerEdges(o,a,c,h){const p=o.getX(),g=o.getY(),w=a.getX(),C=a.getY(),T=c.getX(),j=c.getY(),L=h.getX(),U=h.getY(),W=tr.CORR;return p<this.width/2?[new Ce(L-W,U+W),new Ce(w+W,C+W),new Ce(T-W,j-W),new Ce(p+W,g-W)]:[new Ce(L+W,U+W),new Ce(w+W,C-W),new Ce(T-W,j+W),new Ce(p-W,g-W)]}containsBlackPoint(o,a,c,h){const p=this.image;if(h){for(let g=o;g<=a;g++)if(p.get(g,c))return!0}else for(let g=o;g<=a;g++)if(p.get(c,g))return!0;return!1}}tr.INIT_SIZE=10,tr.CORR=1;class ra{static checkAndNudgePoints(o,a){const c=o.getWidth(),h=o.getHeight();let p=!0;for(let g=0;g<a.length&&p;g+=2){const w=Math.floor(a[g]),C=Math.floor(a[g+1]);if(w<-1||w>c||C<-1||C>h)throw new V;p=!1,w===-1?(a[g]=0,p=!0):w===c&&(a[g]=c-1,p=!0),C===-1?(a[g+1]=0,p=!0):C===h&&(a[g+1]=h-1,p=!0)}p=!0;for(let g=a.length-2;g>=0&&p;g-=2){const w=Math.floor(a[g]),C=Math.floor(a[g+1]);if(w<-1||w>c||C<-1||C>h)throw new V;p=!1,w===-1?(a[g]=0,p=!0):w===c&&(a[g]=c-1,p=!0),C===-1?(a[g+1]=0,p=!0):C===h&&(a[g+1]=h-1,p=!0)}}}class At{constructor(o,a,c,h,p,g,w,C,T){this.a11=o,this.a21=a,this.a31=c,this.a12=h,this.a22=p,this.a32=g,this.a13=w,this.a23=C,this.a33=T}static quadrilateralToQuadrilateral(o,a,c,h,p,g,w,C,T,j,L,U,W,X,Z,te){const se=At.quadrilateralToSquare(o,a,c,h,p,g,w,C);return At.squareToQuadrilateral(T,j,L,U,W,X,Z,te).times(se)}transformPoints(o){const a=o.length,c=this.a11,h=this.a12,p=this.a13,g=this.a21,w=this.a22,C=this.a23,T=this.a31,j=this.a32,L=this.a33;for(let U=0;U<a;U+=2){const W=o[U],X=o[U+1],Z=p*W+C*X+L;o[U]=(c*W+g*X+T)/Z,o[U+1]=(h*W+w*X+j)/Z}}transformPointsWithValues(o,a){const c=this.a11,h=this.a12,p=this.a13,g=this.a21,w=this.a22,C=this.a23,T=this.a31,j=this.a32,L=this.a33,U=o.length;for(let W=0;W<U;W++){const X=o[W],Z=a[W],te=p*X+C*Z+L;o[W]=(c*X+g*Z+T)/te,a[W]=(h*X+w*Z+j)/te}}static squareToQuadrilateral(o,a,c,h,p,g,w,C){const T=o-c+p-w,j=a-h+g-C;if(T===0&&j===0)return new At(c-o,p-c,o,h-a,g-h,a,0,0,1);{const L=c-p,U=w-p,W=h-g,X=C-g,Z=L*X-U*W,te=(T*X-U*j)/Z,se=(L*j-T*W)/Z;return new At(c-o+te*c,w-o+se*w,o,h-a+te*h,C-a+se*C,a,te,se,1)}}static quadrilateralToSquare(o,a,c,h,p,g,w,C){return At.squareToQuadrilateral(o,a,c,h,p,g,w,C).buildAdjoint()}buildAdjoint(){return new At(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new At(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Si extends ra{sampleGrid(o,a,c,h,p,g,w,C,T,j,L,U,W,X,Z,te,se,we,_e){const ge=At.quadrilateralToQuadrilateral(h,p,g,w,C,T,j,L,U,W,X,Z,te,se,we,_e);return this.sampleGridWithTransform(o,a,c,ge)}sampleGridWithTransform(o,a,c,h){if(a<=0||c<=0)throw new V;const p=new z(a,c),g=new Float32Array(2*a);for(let w=0;w<c;w++){const C=g.length,T=w+.5;for(let j=0;j<C;j+=2)g[j]=j/2+.5,g[j+1]=T;h.transformPoints(g),ra.checkAndNudgePoints(o,g);try{for(let j=0;j<C;j+=2)o.get(Math.floor(g[j]),Math.floor(g[j+1]))&&p.set(j/2,w)}catch{throw new V}}return p}}class Qs{static setGridSampler(o){Qs.gridSampler=o}static getInstance(){return Qs.gridSampler}}Qs.gridSampler=new Si;class Lr{constructor(o,a){this.x=o,this.y=a}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class na{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(o){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let h=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),p=this.getMatrixCornerPoints(c);return new it(h,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new V;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(o[0],o[1],a),this.sampleLine(o[1],o[2],a),this.sampleLine(o[2],o[3],a),this.sampleLine(o[3],o[0],a)]);this.shift=this.getRotation(c,a);let h=0;for(let g=0;g<4;g++){let w=c[(this.shift+g)%4];this.compact?(h<<=7,h+=w>>1&127):(h<<=10,h+=(w>>2&992)+(w>>1&31))}let p=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(o,a){let c=0;o.forEach((h,p,g)=>{let w=(h>>a-2<<1)+(h&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let h=0;h<4;h++)if(A.bitCount(c^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new V}getCorrectedParameterData(o,a){let c,h;a?(c=7,h=2):(c=10,h=4);let p=c-h,g=new Int32Array(c);for(let C=c-1;C>=0;--C)g[C]=o&15,o>>=4;try{new er(Me.AZTEC_PARAM).decode(g,p)}catch{throw new V}let w=0;for(let C=0;C<h;C++)w=(w<<4)+g[C];return w}getBullsEyeCorners(o){let a=o,c=o,h=o,p=o,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(a,g,1,-1),U=this.getFirstDifferent(c,g,1,1),W=this.getFirstDifferent(h,g,-1,1),X=this.getFirstDifferent(p,g,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(X,L)*this.nbCenterLayers/(this.distancePoint(p,a)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(L,U,W,X))break}a=L,c=U,h=W,p=X,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let w=new Ce(a.getX()+.5,a.getY()-.5),C=new Ce(c.getX()+.5,c.getY()+.5),T=new Ce(h.getX()-.5,h.getY()+.5),j=new Ce(p.getX()-.5,p.getY()-.5);return this.expandSquare([w,C,T,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,a,c,h;try{let w=new tr(this.image).detect();o=w[0],a=w[1],c=w[2],h=w[3]}catch{let C=this.image.getWidth()/2,T=this.image.getHeight()/2;o=this.getFirstDifferent(new Lr(C+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Lr(C+7,T+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Lr(C-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(C-7,T-7),!1,-1,-1).toResultPoint()}let p=Ae.round((o.getX()+h.getX()+a.getX()+c.getX())/4),g=Ae.round((o.getY()+h.getY()+a.getY()+c.getY())/4);try{let w=new tr(this.image,15,p,g).detect();o=w[0],a=w[1],c=w[2],h=w[3]}catch{o=this.getFirstDifferent(new Lr(p+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Lr(p+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Lr(p-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(p-7,g-7),!1,-1,-1).toResultPoint()}return p=Ae.round((o.getX()+h.getX()+a.getX()+c.getX())/4),g=Ae.round((o.getY()+h.getY()+a.getY()+c.getY())/4),new Lr(p,g)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,a,c,h,p){let g=Qs.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,T=w/2+this.nbCenterLayers;return g.sampleGrid(o,w,w,C,C,T,C,T,T,C,T,a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY(),p.getX(),p.getY())}sampleLine(o,a,c){let h=0,p=this.distanceResultPoint(o,a),g=p/c,w=o.getX(),C=o.getY(),T=g*(a.getX()-o.getX())/p,j=g*(a.getY()-o.getY())/p;for(let L=0;L<c;L++)this.image.get(Ae.round(w+L*T),Ae.round(C+L*j))&&(h|=1<<c-L-1);return h}isWhiteOrBlackRectangle(o,a,c,h){let p=3;o=new Lr(o.getX()-p,o.getY()+p),a=new Lr(a.getX()-p,a.getY()-p),c=new Lr(c.getX()+p,c.getY()-p),h=new Lr(h.getX()+p,h.getY()+p);let g=this.getColor(h,o);if(g===0)return!1;let w=this.getColor(o,a);return w!==g||(w=this.getColor(a,c),w!==g)?!1:(w=this.getColor(c,h),w===g)}getColor(o,a){let c=this.distancePoint(o,a),h=(a.getX()-o.getX())/c,p=(a.getY()-o.getY())/c,g=0,w=o.getX(),C=o.getY(),T=this.image.get(o.getX(),o.getY()),j=Math.ceil(c);for(let U=0;U<j;U++)w+=h,C+=p,this.image.get(Ae.round(w),Ae.round(C))!==T&&g++;let L=g/c;return L>.1&&L<.9?0:L<=.1===T?1:-1}getFirstDifferent(o,a,c,h){let p=o.getX()+c,g=o.getY()+h;for(;this.isValid(p,g)&&this.image.get(p,g)===a;)p+=c,g+=h;for(p-=c,g-=h;this.isValid(p,g)&&this.image.get(p,g)===a;)p+=c;for(p-=c;this.isValid(p,g)&&this.image.get(p,g)===a;)g+=h;return g-=h,new Lr(p,g)}expandSquare(o,a,c){let h=c/(2*a),p=o[0].getX()-o[2].getX(),g=o[0].getY()-o[2].getY(),w=(o[0].getX()+o[2].getX())/2,C=(o[0].getY()+o[2].getY())/2,T=new Ce(w+h*p,C+h*g),j=new Ce(w-h*p,C-h*g);p=o[1].getX()-o[3].getX(),g=o[1].getY()-o[3].getY(),w=(o[1].getX()+o[3].getX())/2,C=(o[1].getY()+o[3].getY())/2;let L=new Ce(w+h*p,C+h*g),U=new Ce(w-h*p,C-h*g);return[T,L,j,U]}isValid(o,a){return o>=0&&o<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(o){let a=Ae.round(o.getX()),c=Ae.round(o.getY());return this.isValid(a,c)}distancePoint(o,a){return Ae.distance(o.getX(),o.getY(),a.getX(),a.getY())}distanceResultPoint(o,a){return Ae.distance(o.getX(),o.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(A.truncDivision(this.nbLayers-4,8)+1)+15}}class ol{decode(o,a=null){let c=null,h=new na(o.getBlackMatrix()),p=null,g=null;try{let j=h.detectMirror(!1);p=j.getPoints(),this.reportFoundResultPoints(a,p),g=new Fe().decode(j)}catch(j){c=j}if(g==null)try{let j=h.detectMirror(!0);p=j.getPoints(),this.reportFoundResultPoints(a,p),g=new Fe().decode(j)}catch(j){throw c??j}let w=new ce(g.getText(),g.getRawBytes(),g.getNumBits(),p,xe.AZTEC,_.currentTimeMillis()),C=g.getByteSegments();C!=null&&w.putMetadata(Pe.BYTE_SEGMENTS,C);let T=g.getECLevel();return T!=null&&w.putMetadata(Pe.ERROR_CORRECTION_LEVEL,T),w}reportFoundResultPoints(o,a){if(o!=null){let c=o.get(F.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((h,p,g)=>{c.foundPossibleResultPoint(h)})}}reset(){}}class $d extends le{constructor(o=500){super(new ol,o)}}class Ut{decode(o,a){try{return this.doDecode(o,a)}catch{if(a&&a.get(F.TRY_HARDER)===!0&&o.isRotateSupported()){const p=o.rotateCounterClockwise(),g=this.doDecode(p,a),w=g.getResultMetadata();let C=270;w!==null&&w.get(Pe.ORIENTATION)===!0&&(C=C+w.get(Pe.ORIENTATION)%360),g.putMetadata(Pe.ORIENTATION,C);const T=g.getResultPoints();if(T!==null){const j=p.getHeight();for(let L=0;L<T.length;L++)T[L]=new Ce(j-T[L].getY()-1,T[L].getX())}return g}else throw new V}}reset(){}doDecode(o,a){const c=o.getWidth(),h=o.getHeight();let p=new O(c);const g=a&&a.get(F.TRY_HARDER)===!0,w=Math.max(1,h>>(g?8:5));let C;g?C=h:C=15;const T=Math.trunc(h/2);for(let j=0;j<C;j++){const L=Math.trunc((j+1)/2),U=(j&1)===0,W=T+w*(U?L:-L);if(W<0||W>=h)break;try{p=o.getBlackRow(W,p)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(p.reverse(),a&&a.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;a.forEach((te,se)=>Z.set(se,te)),Z.delete(F.NEED_RESULT_POINT_CALLBACK),a=Z}try{const Z=this.decodeRow(W,p,a);if(X===1){Z.putMetadata(Pe.ORIENTATION,180);const te=Z.getResultPoints();te!==null&&(te[0]=new Ce(c-te[0].getX()-1,te[0].getY()),te[1]=new Ce(c-te[1].getX()-1,te[1].getY()))}return Z}catch{}}}throw new V}static recordPattern(o,a,c){const h=c.length;for(let T=0;T<h;T++)c[T]=0;const p=o.getSize();if(a>=p)throw new V;let g=!o.get(a),w=0,C=a;for(;C<p;){if(o.get(C)!==g)c[w]++;else{if(++w===h)break;c[w]=1,g=!g}C++}if(!(w===h||w===h-1&&C===p))throw new V}static recordPatternInReverse(o,a,c){let h=c.length,p=o.get(a);for(;a>0&&h>=0;)o.get(--a)!==p&&(h--,p=!p);if(h>=0)throw new V;Ut.recordPattern(o,a+1,c)}static patternMatchVariance(o,a,c){const h=o.length;let p=0,g=0;for(let T=0;T<h;T++)p+=o[T],g+=a[T];if(p<g)return Number.POSITIVE_INFINITY;const w=p/g;c*=w;let C=0;for(let T=0;T<h;T++){const j=o[T],L=a[T]*w,U=j>L?j-L:L-j;if(U>c)return Number.POSITIVE_INFINITY;C+=U}return C/p}}class Se extends Ut{static findStartPattern(o){const a=o.getSize(),c=o.getNextSet(0);let h=0,p=Int32Array.from([0,0,0,0,0,0]),g=c,w=!1;const C=6;for(let T=c;T<a;T++)if(o.get(T)!==w)p[h]++;else{if(h===C-1){let j=Se.MAX_AVG_VARIANCE,L=-1;for(let U=Se.CODE_START_A;U<=Se.CODE_START_C;U++){const W=Ut.patternMatchVariance(p,Se.CODE_PATTERNS[U],Se.MAX_INDIVIDUAL_VARIANCE);W<j&&(j=W,L=U)}if(L>=0&&o.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,L]);g+=p[0]+p[1],p=p.slice(2,p.length-1),p[h-1]=0,p[h]=0,h--}else h++;p[h]=1,w=!w}throw new V}static decodeCode(o,a,c){Ut.recordPattern(o,c,a);let h=Se.MAX_AVG_VARIANCE,p=-1;for(let g=0;g<Se.CODE_PATTERNS.length;g++){const w=Se.CODE_PATTERNS[g],C=this.patternMatchVariance(a,w,Se.MAX_INDIVIDUAL_VARIANCE);C<h&&(h=C,p=g)}if(p>=0)return p;throw new V}decodeRow(o,a,c){const h=c&&c.get(F.ASSUME_GS1)===!0,p=Se.findStartPattern(a),g=p[2];let w=0;const C=new Uint8Array(20);C[w++]=g;let T;switch(g){case Se.CODE_START_A:T=Se.CODE_CODE_A;break;case Se.CODE_START_B:T=Se.CODE_CODE_B;break;case Se.CODE_START_C:T=Se.CODE_CODE_C;break;default:throw new B}let j=!1,L=!1,U="",W=p[0],X=p[1];const Z=Int32Array.from([0,0,0,0,0,0]);let te=0,se=0,we=g,_e=0,ge=!0,ct=!1,Ze=!1;for(;!j;){const pl=L;switch(L=!1,te=se,se=Se.decodeCode(a,Z,X),C[w++]=se,se!==Se.CODE_STOP&&(ge=!0),se!==Se.CODE_STOP&&(_e++,we+=_e*se),W=X,X+=Z.reduce((NR,AR)=>NR+AR,0),se){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new B}switch(T){case Se.CODE_CODE_A:if(se<64)Ze===ct?U+=String.fromCharCode(32+se):U+=String.fromCharCode(32+se+128),Ze=!1;else if(se<96)Ze===ct?U+=String.fromCharCode(se-64):U+=String.fromCharCode(se+64),Ze=!1;else switch(se!==Se.CODE_STOP&&(ge=!1),se){case Se.CODE_FNC_1:h&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!ct&&Ze?(ct=!0,Ze=!1):ct&&Ze?(ct=!1,Ze=!1):Ze=!0;break;case Se.CODE_SHIFT:L=!0,T=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:j=!0;break}break;case Se.CODE_CODE_B:if(se<96)Ze===ct?U+=String.fromCharCode(32+se):U+=String.fromCharCode(32+se+128),Ze=!1;else switch(se!==Se.CODE_STOP&&(ge=!1),se){case Se.CODE_FNC_1:h&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!ct&&Ze?(ct=!0,Ze=!1):ct&&Ze?(ct=!1,Ze=!1):Ze=!0;break;case Se.CODE_SHIFT:L=!0,T=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:j=!0;break}break;case Se.CODE_CODE_C:if(se<100)se<10&&(U+="0"),U+=se;else switch(se!==Se.CODE_STOP&&(ge=!1),se){case Se.CODE_FNC_1:h&&(U.length===0?U+="]C1":U+="");break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_STOP:j=!0;break}break}pl&&(T=T===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const bn=X-W;if(X=a.getNextUnset(X),!a.isRange(X,Math.min(a.getSize(),X+(X-W)/2),!1))throw new V;if(we-=_e*te,we%103!==te)throw new b;const Ns=U.length;if(Ns===0)throw new V;Ns>0&&ge&&(T===Se.CODE_CODE_C?U=U.substring(0,Ns-2):U=U.substring(0,Ns-1));const _n=(p[1]+p[0])/2,It=W+bn/2,Ur=C.length,kn=new Uint8Array(Ur);for(let pl=0;pl<Ur;pl++)kn[pl]=C[pl];const ml=[new Ce(_n,o),new Ce(It,o)];return new ce(U,kn,0,ml,xe.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class rr extends Ut{constructor(o=!1,a=!1){super(),this.usingCheckDigit=o,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,a,c){let h=this.counters;h.fill(0),this.decodeRowResult="";let p=rr.findAsteriskPattern(a,h),g=a.getNextSet(p[1]),w=a.getSize(),C,T;do{rr.recordPattern(a,g,h);let Z=rr.toNarrowWidePattern(h);if(Z<0)throw new V;C=rr.patternToChar(Z),this.decodeRowResult+=C,T=g;for(let te of h)g+=te;g=a.getNextSet(g)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let j=0;for(let Z of h)j+=Z;let L=g-T-j;if(g!==w&&L*2<j)throw new V;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,te=0;for(let se=0;se<Z;se++)te+=rr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(Z)!==rr.ALPHABET_STRING.charAt(te%43))throw new b;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new V;let U;this.extendedMode?U=rr.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;let W=(p[1]+p[0])/2,X=T+j/2;return new ce(U,null,0,[new Ce(W,o),new Ce(X,o)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,a){let c=o.getSize(),h=o.getNextSet(0),p=0,g=h,w=!1,C=a.length;for(let T=h;T<c;T++)if(o.get(T)!==w)a[p]++;else{if(p===C-1){if(this.toNarrowWidePattern(a)===rr.ASTERISK_ENCODING&&o.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=a[0]+a[1],a.copyWithin(0,2,2+p-1),a[p-1]=0,a[p]=0,p--}else p++;a[p]=1,w=!w}throw new V}static toNarrowWidePattern(o){let a=o.length,c=0,h;do{let p=2147483647;for(let C of o)C<p&&C>c&&(p=C);c=p,h=0;let g=0,w=0;for(let C=0;C<a;C++){let T=o[C];T>c&&(w|=1<<a-1-C,h++,g+=T)}if(h===3){for(let C=0;C<a&&h>0;C++){let T=o[C];if(T>c&&(h--,T*2>=g))return-1}return w}}while(h>3);return-1}static patternToChar(o){for(let a=0;a<rr.CHARACTER_ENCODINGS.length;a++)if(rr.CHARACTER_ENCODINGS[a]===o)return rr.ALPHABET_STRING.charAt(a);if(o===rr.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(o){let a=o.length,c="";for(let h=0;h<a;h++){let p=o.charAt(h);if(p==="+"||p==="$"||p==="%"||p==="/"){let g=o.charAt(h+1),w="\0";switch(p){case"+":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)+32);else throw new B;break;case"$":if(g>="A"&&g<="Z")w=String.fromCharCode(g.charCodeAt(0)-64);else throw new B;break;case"%":if(g>="A"&&g<="E")w=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")w=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")w=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")w="\0";else if(g==="V")w="@";else if(g==="W")w="`";else if(g==="X"||g==="Y"||g==="Z")w="";else throw new B;break;case"/":if(g>="A"&&g<="O")w=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")w=":";else throw new B;break}c+=w,h++}else c+=p}return c}}rr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",rr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],rr.ASTERISK_ENCODING=148;class ht extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,a,c){let h=this.decodeStart(a),p=this.decodeEnd(a),g=new ee;ht.decodeMiddle(a,h[1],p[0],g);let w=g.toString(),C=null;c!=null&&(C=c.get(F.ALLOWED_LENGTHS)),C==null&&(C=ht.DEFAULT_ALLOWED_LENGTHS);let T=w.length,j=!1,L=0;for(let X of C){if(T===X){j=!0;break}X>L&&(L=X)}if(!j&&T>L&&(j=!0),!j)throw new B;const U=[new Ce(h[1],o),new Ce(p[0],o)];return new ce(w,null,0,U,xe.ITF,new Date().getTime())}static decodeMiddle(o,a,c,h){let p=new Int32Array(10),g=new Int32Array(5),w=new Int32Array(5);for(p.fill(0),g.fill(0),w.fill(0);a<c;){Ut.recordPattern(o,a,p);for(let T=0;T<5;T++){let j=2*T;g[T]=p[j],w[T]=p[j+1]}let C=ht.decodeDigit(g);h.append(C.toString()),C=this.decodeDigit(w),h.append(C.toString()),p.forEach(function(T){a+=T})}}decodeStart(o){let a=ht.skipWhiteSpace(o),c=ht.findGuardPattern(o,a,ht.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(o,c[0]),c}validateQuietZone(o,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let h=a-1;c>0&&h>=0&&!o.get(h);h--)c--;if(c!==0)throw new V}static skipWhiteSpace(o){const a=o.getSize(),c=o.getNextSet(0);if(c===a)throw new V;return c}decodeEnd(o){o.reverse();try{let a=ht.skipWhiteSpace(o),c;try{c=ht.findGuardPattern(o,a,ht.END_PATTERN_REVERSED[0])}catch(p){p instanceof V&&(c=ht.findGuardPattern(o,a,ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,c[0]);let h=c[0];return c[0]=o.getSize()-c[1],c[1]=o.getSize()-h,c}finally{o.reverse()}}static findGuardPattern(o,a,c){let h=c.length,p=new Int32Array(h),g=o.getSize(),w=!1,C=0,T=a;p.fill(0);for(let j=a;j<g;j++)if(o.get(j)!==w)p[C]++;else{if(C===h-1){if(Ut.patternMatchVariance(p,c,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return[T,j];T+=p[0]+p[1],_.arraycopy(p,2,p,0,C-1),p[C-1]=0,p[C]=0,C--}else C++;p[C]=1,w=!w}throw new V}static decodeDigit(o){let a=ht.MAX_AVG_VARIANCE,c=-1,h=ht.PATTERNS.length;for(let p=0;p<h;p++){let g=ht.PATTERNS[p],w=Ut.patternMatchVariance(o,g,ht.MAX_INDIVIDUAL_VARIANCE);w<a?(a=w,c=p):w===a&&(c=-1)}if(c>=0)return c%10;throw new V}}ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ht.MAX_AVG_VARIANCE=.38,ht.MAX_INDIVIDUAL_VARIANCE=.5,ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ht.START_PATTERN=Int32Array.from([1,1,1,1]),ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class zt extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let a=!1,c,h=0,p=Int32Array.from([0,0,0]);for(;!a;){p=Int32Array.from([0,0,0]),c=zt.findGuardPattern(o,h,!1,this.START_END_PATTERN,p);let g=c[0];h=c[1];let w=g-(h-g);w>=0&&(a=o.isRange(w,g,!1))}return c}static checkChecksum(o){return zt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return zt.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let h=a-1;h>=0;h-=2){let p=o.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}c*=3;for(let h=a-2;h>=0;h-=2){let p=o.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}return(1e3-c)%10}static decodeEnd(o,a){return zt.findGuardPattern(o,a,!1,zt.START_END_PATTERN,new Int32Array(zt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,a,c,h){return this.findGuardPattern(o,a,c,h,new Int32Array(h.length))}static findGuardPattern(o,a,c,h,p){let g=o.getSize();a=c?o.getNextUnset(a):o.getNextSet(a);let w=0,C=a,T=h.length,j=c;for(let L=a;L<g;L++)if(o.get(L)!==j)p[w]++;else{if(w===T-1){if(Ut.patternMatchVariance(p,h,zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE)return Int32Array.from([C,L]);C+=p[0]+p[1];let U=p.slice(2,p.length-1);for(let W=0;W<w-1;W++)p[W]=U[W];p[w-1]=0,p[w]=0,w--}else w++;p[w]=1,j=!j}throw new V}static decodeDigit(o,a,c,h){this.recordPattern(o,c,a);let p=this.MAX_AVG_VARIANCE,g=-1,w=h.length;for(let C=0;C<w;C++){let T=h[C],j=Ut.patternMatchVariance(a,T,zt.MAX_INDIVIDUAL_VARIANCE);j<p&&(p=j,g=C)}if(g>=0)return g;throw new V}}zt.MAX_AVG_VARIANCE=.48,zt.MAX_INDIVIDUAL_VARIANCE=.7,zt.START_END_PATTERN=Int32Array.from([1,1,1]),zt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),zt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),zt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sa{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let h=this.decodeRowStringBuffer,p=this.decodeMiddle(a,c,h),g=h.toString(),w=sa.parseExtensionString(g),C=[new Ce((c[0]+c[1])/2,o),new Ce(p,o)],T=new ce(g,null,0,C,xe.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(o,a,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=o.getSize(),g=a[1],w=0;for(let T=0;T<5&&g<p;T++){let j=zt.decodeDigit(o,h,g,zt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+j%10);for(let L of h)g+=L;j>=10&&(w|=1<<4-T),T!==4&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==5)throw new V;let C=this.determineCheckDigit(w);if(sa.extensionChecksum(c.toString())!==C)throw new V;return g}static extensionChecksum(o){let a=o.length,c=0;for(let h=a-2;h>=0;h-=2)c+=o.charAt(h).charCodeAt(0)-48;c*=3;for(let h=a-1;h>=0;h-=2)c+=o.charAt(h).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(o){for(let a=0;a<10;a++)if(o===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new V}static parseExtensionString(o){if(o.length!==5)return null;let a=sa.parseExtension5String(o);return a==null?null:new Map([[Pe.SUGGESTED_PRICE,a]])}static parseExtension5String(o){let a;switch(o.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(o.substring(1)),h=(c/100).toString(),p=c%100,g=p<10?"0"+p:p.toString();return a+h+"."+g}}class al{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,a,c){let h=this.decodeRowStringBuffer,p=this.decodeMiddle(a,c,h),g=h.toString(),w=al.parseExtensionString(g),C=[new Ce((c[0]+c[1])/2,o),new Ce(p,o)],T=new ce(g,null,0,C,xe.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&T.putAllMetadata(w),T}decodeMiddle(o,a,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=o.getSize(),g=a[1],w=0;for(let C=0;C<2&&g<p;C++){let T=zt.decodeDigit(o,h,g,zt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+T%10);for(let j of h)g+=j;T>=10&&(w|=1<<1-C),C!==1&&(g=o.getNextSet(g),g=o.getNextUnset(g))}if(c.length!==2)throw new V;if(parseInt(c.toString())%4!==w)throw new V;return g}static parseExtensionString(o){return o.length!==2?null:new Map([[Pe.ISSUE_NUMBER,parseInt(o)]])}}class Gc{static decodeRow(o,a,c){let h=zt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sa().decodeRow(o,a,h)}catch{return new al().decodeRow(o,a,h)}}}Gc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ft extends zt{constructor(){super(),this.decodeRowStringBuffer="",ft.L_AND_G_PATTERNS=ft.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let a=ft.L_PATTERNS[o-10],c=new Int32Array(a.length);for(let h=0;h<a.length;h++)c[h]=a[a.length-h-1];ft.L_AND_G_PATTERNS[o]=c}}decodeRow(o,a,c){let h=ft.findStartGuardPattern(a),p=c==null?null:c.get(F.NEED_RESULT_POINT_CALLBACK);if(p!=null){const ge=new Ce((h[0]+h[1])/2,o);p.foundPossibleResultPoint(ge)}let g=this.decodeMiddle(a,h,this.decodeRowStringBuffer),w=g.rowOffset,C=g.resultString;if(p!=null){const ge=new Ce(w,o);p.foundPossibleResultPoint(ge)}let T=this.decodeEnd(a,w);if(p!=null){const ge=new Ce((T[0]+T[1])/2,o);p.foundPossibleResultPoint(ge)}let j=T[1],L=j+(j-T[0]);if(L>=a.getSize()||!a.isRange(j,L,!1))throw new V;let U=C.toString();if(U.length<8)throw new B;if(!ft.checkChecksum(U))throw new b;let W=(h[1]+h[0])/2,X=(T[1]+T[0])/2,Z=this.getBarcodeFormat(),te=[new Ce(W,o),new Ce(X,o)],se=new ce(U,null,0,te,Z,new Date().getTime()),we=0;try{let ge=Gc.decodeRow(o,a,T[1]);se.putMetadata(Pe.UPC_EAN_EXTENSION,ge.getText()),se.putAllMetadata(ge.getResultMetadata()),se.addResultPoints(ge.getResultPoints()),we=ge.getText().length}catch{}let _e=c==null?null:c.get(F.ALLOWED_EAN_EXTENSIONS);if(_e!=null){let ge=!1;for(let ct in _e)if(we.toString()===ct){ge=!0;break}if(!ge)throw new V}return se}decodeEnd(o,a){return ft.findGuardPattern(o,a,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return ft.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let a=o.length;if(a===0)return!1;let c=parseInt(o.charAt(a-1),10);return ft.getStandardUPCEANChecksum(o.substring(0,a-1))===c}static getStandardUPCEANChecksum(o){let a=o.length,c=0;for(let h=a-1;h>=0;h-=2){let p=o.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}c*=3;for(let h=a-2;h>=0;h-=2){let p=o.charAt(h).charCodeAt(0)-48;if(p<0||p>9)throw new B;c+=p}return(1e3-c)%10}}class Es extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=o.getSize(),g=a[1],w=0;for(let T=0;T<6&&g<p;T++){let j=ft.decodeDigit(o,h,g,ft.L_AND_G_PATTERNS);c+=String.fromCharCode(48+j%10);for(let L of h)g+=L;j>=10&&(w|=1<<5-T)}c=Es.determineFirstDigit(c,w),g=ft.findGuardPattern(o,g,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<p;T++){let j=ft.decodeDigit(o,h,g,ft.L_PATTERNS);c+=String.fromCharCode(48+j);for(let L of h)g+=L}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(o,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return o=String.fromCharCode(48+c)+o,o;throw new V}}Es.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ss extends ft{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=o.getSize(),g=a[1];for(let C=0;C<4&&g<p;C++){let T=ft.decodeDigit(o,h,g,ft.L_PATTERNS);c+=String.fromCharCode(48+T);for(let j of h)g+=j}g=ft.findGuardPattern(o,g,!0,ft.MIDDLE_PATTERN,new Int32Array(ft.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&g<p;C++){let T=ft.decodeDigit(o,h,g,ft.L_PATTERNS);c+=String.fromCharCode(48+T);for(let j of h)g+=j}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return xe.EAN_8}}class Wd extends ft{constructor(){super(...arguments),this.ean13Reader=new Es}getBarcodeFormat(){return xe.UPC_A}decode(o,a){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,a,c))}decodeMiddle(o,a,c){return this.ean13Reader.decodeMiddle(o,a,c)}maybeReturnResult(o){let a=o.getText();if(a.charAt(0)==="0"){let c=new ce(a.substring(1),null,null,o.getResultPoints(),xe.UPC_A);return o.getResultMetadata()!=null&&c.putAllMetadata(o.getResultMetadata()),c}else throw new V}reset(){this.ean13Reader.reset()}}class Ve extends ft{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,a,c){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const p=o.getSize();let g=a[1],w=0;for(let T=0;T<6&&g<p;T++){const j=Ve.decodeDigit(o,h,g,Ve.L_AND_G_PATTERNS);c+=String.fromCharCode(48+j%10);for(let L of h)g+=L;j>=10&&(w|=1<<5-T)}let C=Ve.determineNumSysAndCheckDigit(c,w);return{rowOffset:g,resultString:C}}decodeEnd(o,a){return Ve.findGuardPatternWithoutCounters(o,a,!0,Ve.MIDDLE_END_PATTERN)}checkChecksum(o){return ft.checkChecksum(Ve.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,a){for(let c=0;c<=1;c++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][h]){let p=String.fromCharCode(48+c),g=String.fromCharCode(48+h);return p+o+g}throw V.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(o){const a=o.slice(1,7).split("").map(p=>p.charCodeAt(0)),c=new ee;c.append(o.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(h),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(h);break}return o.length>=8&&c.append(o.charAt(7)),c.toString()}}Ve.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ve.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class xt extends Ut{constructor(o){super();let a=o==null?null:o.get(F.POSSIBLE_FORMATS),c=[];n(a)?(c.push(new Es),c.push(new Wd),c.push(new Ss),c.push(new Ve)):(a.indexOf(xe.EAN_13)>-1&&c.push(new Es),a.indexOf(xe.UPC_A)>-1&&c.push(new Wd),a.indexOf(xe.EAN_8)>-1&&c.push(new Ss),a.indexOf(xe.UPC_E)>-1&&c.push(new Ve)),this.readers=c}decodeRow(o,a,c){for(let h of this.readers)try{const p=h.decodeRow(o,a,c),g=p.getBarcodeFormat()===xe.EAN_13&&p.getText().charAt(0)==="0",w=c==null?null:c.get(F.POSSIBLE_FORMATS),C=w==null||w.includes(xe.UPC_A);if(g&&C){const T=p.getRawBytes(),j=new ce(p.getText().substring(1),T,T?T.length:null,p.getResultPoints(),xe.UPC_A);return j.putAllMetadata(p.getResultMetadata()),j}return p}catch{}throw new V}reset(){for(let o of this.readers)o.reset()}}class et extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,a){for(let c=0;c<a.length;c++)if(Ut.patternMatchVariance(o,a[c],et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return c;throw new V}static count(o){return Ae.sum(new Int32Array(o))}static increment(o,a){let c=0,h=a[0];for(let p=1;p<o.length;p++)a[p]>h&&(h=a[p],c=p);o[c]++}static decrement(o,a){let c=0,h=a[0];for(let p=1;p<o.length;p++)a[p]<h&&(h=a[p],c=p);o[c]--}static isFinderPattern(o){let a=o[0]+o[1],c=a+o[2]+o[3],h=a/c;if(h>=et.MIN_FINDER_PATTERN_RATIO&&h<=et.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let w of o)w>g&&(g=w),w<p&&(p=w);return g<10*p}return!1}}et.MAX_AVG_VARIANCE=.2,et.MAX_INDIVIDUAL_VARIANCE=.45,et.MIN_FINDER_PATTERN_RATIO=9.5/12,et.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(o,a){this.value=o,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Ir))return!1;const a=o;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Yr{constructor(o,a,c,h,p){this.value=o,this.startEnd=a,this.value=o,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Ce(c,p)),this.resultPoints.push(new Ce(h,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Yr))return!1;const a=o;return this.value===a.value}hashCode(){return this.value}}class _r{constructor(){}static getRSSvalue(o,a,c){let h=0;for(let C of o)h+=C;let p=0,g=0,w=o.length;for(let C=0;C<w-1;C++){let T;for(T=1,g|=1<<C;T<o[C];T++,g&=~(1<<C)){let j=_r.combins(h-T-1,w-C-2);if(c&&g===0&&h-T-(w-C-1)>=w-C-1&&(j-=_r.combins(h-T-(w-C),w-C-2)),w-C-1>1){let L=0;for(let U=h-T-(w-C-2);U>a;U--)L+=_r.combins(h-T-U-1,w-C-3);j-=L*(w-1-C)}else h-T>a&&j--;p+=j}h-=T}return p}static combins(o,a){let c,h;o-a>a?(h=a,c=o-a):(h=o-a,c=a);let p=1,g=1;for(let w=o;w>c;w--)p*=w,g<=h&&(p/=g,g++);for(;g<=h;)p/=g,g++;return p}}class Ni{static buildBitArray(o){let a=o.length*2-1;o[o.length-1].getRightChar()==null&&(a-=1);let c=12*a,h=new O(c),p=0,w=o[0].getRightChar().getValue();for(let C=11;C>=0;--C)w&1<<C&&h.set(p),p++;for(let C=1;C<o.length;++C){let T=o[C],j=T.getLeftChar().getValue();for(let L=11;L>=0;--L)j&1<<L&&h.set(p),p++;if(T.getRightChar()!=null){let L=T.getRightChar().getValue();for(let U=11;U>=0;--U)L&1<<U&&h.set(p),p++}}return h}}class Cr{constructor(o,a){a?this.decodedInformation=null:(this.finished=o,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rs{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class yn extends rs{constructor(o,a){super(o),this.value=a}getValue(){return this.value}isFNC1(){return this.value===yn.FNC1}}yn.FNC1="$";class ia extends rs{constructor(o,a,c){super(o),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ns extends rs{constructor(o,a,c){if(super(o),a<0||a>10||c<0||c>10)throw new B;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ns.FNC1}isSecondDigitFNC1(){return this.secondDigit===ns.FNC1}isAnyFNC1(){return this.firstDigit===ns.FNC1||this.secondDigit===ns.FNC1}}ns.FNC1=10;class Re{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new V;let a=o.substring(0,2);for(let p of Re.TWO_DIGIT_DATA_LENGTH)if(p[0]===a)return p[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(2,p[2],o):Re.processFixedAI(2,p[1],o);if(o.length<3)throw new V;let c=o.substring(0,3);for(let p of Re.THREE_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(3,p[2],o):Re.processFixedAI(3,p[1],o);for(let p of Re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(4,p[2],o):Re.processFixedAI(4,p[1],o);if(o.length<4)throw new V;let h=o.substring(0,4);for(let p of Re.FOUR_DIGIT_DATA_LENGTH)if(p[0]===h)return p[1]===Re.VARIABLE_LENGTH?Re.processVariableAI(4,p[2],o):Re.processFixedAI(4,p[1],o);throw new V}static processFixedAI(o,a,c){if(c.length<o)throw new V;let h=c.substring(0,o);if(c.length<o+a)throw new V;let p=c.substring(o,o+a),g=c.substring(o+a),w="("+h+")"+p,C=Re.parseFieldsInGeneralPurpose(g);return C==null?w:w+C}static processVariableAI(o,a,c){let h=c.substring(0,o),p;c.length<o+a?p=c.length:p=o+a;let g=c.substring(o,p),w=c.substring(p),C="("+h+")"+g,T=Re.parseFieldsInGeneralPurpose(w);return T==null?C:C+T}}Re.VARIABLE_LENGTH=[],Re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Re.VARIABLE_LENGTH,20],["22",Re.VARIABLE_LENGTH,29],["30",Re.VARIABLE_LENGTH,8],["37",Re.VARIABLE_LENGTH,8],["90",Re.VARIABLE_LENGTH,30],["91",Re.VARIABLE_LENGTH,30],["92",Re.VARIABLE_LENGTH,30],["93",Re.VARIABLE_LENGTH,30],["94",Re.VARIABLE_LENGTH,30],["95",Re.VARIABLE_LENGTH,30],["96",Re.VARIABLE_LENGTH,30],["97",Re.VARIABLE_LENGTH,3],["98",Re.VARIABLE_LENGTH,30],["99",Re.VARIABLE_LENGTH,30]],Re.THREE_DIGIT_DATA_LENGTH=[["240",Re.VARIABLE_LENGTH,30],["241",Re.VARIABLE_LENGTH,30],["242",Re.VARIABLE_LENGTH,6],["250",Re.VARIABLE_LENGTH,30],["251",Re.VARIABLE_LENGTH,30],["253",Re.VARIABLE_LENGTH,17],["254",Re.VARIABLE_LENGTH,20],["400",Re.VARIABLE_LENGTH,30],["401",Re.VARIABLE_LENGTH,30],["402",17],["403",Re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Re.VARIABLE_LENGTH,20],["421",Re.VARIABLE_LENGTH,15],["422",3],["423",Re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Re.VARIABLE_LENGTH,15],["391",Re.VARIABLE_LENGTH,18],["392",Re.VARIABLE_LENGTH,15],["393",Re.VARIABLE_LENGTH,18],["703",Re.VARIABLE_LENGTH,30]],Re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Re.VARIABLE_LENGTH,20],["8003",Re.VARIABLE_LENGTH,30],["8004",Re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Re.VARIABLE_LENGTH,30],["8008",Re.VARIABLE_LENGTH,12],["8018",18],["8020",Re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Re.VARIABLE_LENGTH,70],["8200",Re.VARIABLE_LENGTH,70]];class ll{constructor(o){this.buffer=new ee,this.information=o}decodeAllCodes(o,a){let c=a,h=null;do{let p=this.decodeGeneralPurposeField(c,h),g=Re.parseFieldsInGeneralPurpose(p.getNewString());if(g!=null&&o.append(g),p.isRemaining()?h=""+p.getRemainingValue():h=null,c===p.getNewPosition())break;c=p.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let a=o;a<o+3;++a)if(this.information.get(a))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(o,4);return p===0?new ns(this.information.getSize(),ns.FNC1,ns.FNC1):new ns(this.information.getSize(),p-1,ns.FNC1)}let a=this.extractNumericValueFromBitArray(o,7),c=(a-8)/11,h=(a-8)%11;return new ns(o+7,c,h)}extractNumericValueFromBitArray(o,a){return ll.extractNumericValueFromBitArray(this.information,o,a)}static extractNumericValueFromBitArray(o,a,c){let h=0;for(let p=0;p<c;++p)o.get(a+p)&&(h|=1<<c-p-1);return h}decodeGeneralPurposeField(o,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(o);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new ia(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new ia(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),o=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),o=a.isFinished()):(a=this.parseNumericBlock(),o=a.isFinished()),!(c!==this.current.getPosition())&&!o)break}while(!o);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let a;return o.isSecondDigitFNC1()?a=new ia(this.current.getPosition(),this.buffer.toString()):a=new ia(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Cr(!0,a)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Cr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Cr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let a=new ia(this.current.getPosition(),this.buffer.toString());return new Cr(!0,a)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Cr(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<116)return!0;if(o+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,8);return h>=232&&h<253}decodeIsoIec646(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new yn(o+5,yn.FNC1);if(a>=5&&a<15)return new yn(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<90)return new yn(o+7,""+(c+1));if(c>=90&&c<116)return new yn(o+7,""+(c+7));let h=this.extractNumericValueFromBitArray(o,8),p;switch(h){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new B}return new yn(o+8,p)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(o,5);if(a>=5&&a<16)return!0;if(o+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,6);return c>=16&&c<63}decodeAlphanumeric(o){let a=this.extractNumericValueFromBitArray(o,5);if(a===15)return new yn(o+5,yn.FNC1);if(a>=5&&a<15)return new yn(o+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(o,6);if(c>=32&&c<58)return new yn(o+6,""+(c+33));let h;switch(c){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new St("Decoding invalid alphanumeric value: "+c)}return new yn(o+6,h)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<5&&a+o<this.information.getSize();++a)if(a===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+a))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let a=o;a<o+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let a=0;a<4&&a+o<this.information.getSize();++a)if(this.information.get(o+a))return!1;return!0}}class dm{constructor(o){this.information=o,this.generalDecoder=new ll(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wn extends dm{constructor(o){super(o)}encodeCompressedGtin(o,a){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,a,c)}encodeCompressedGtinWithoutAI(o,a,c){for(let h=0;h<4;++h){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);p/100===0&&o.append("0"),p/10===0&&o.append("0"),o.append(p)}wn.appendCheckDigit(o,c)}static appendCheckDigit(o,a){let c=0;for(let h=0;h<13;h++){let p=o.charAt(h+a).charCodeAt(0)-48;c+=h&1?p:3*p}c=10-c%10,c===10&&(c=0),o.append(c)}}wn.GTIN_SIZE=40;class cl extends wn{constructor(o){super(o)}parseInformation(){let o=new ee;o.append("(01)");let a=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(cl.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,cl.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(o,cl.HEADER_SIZE+44)}}cl.HEADER_SIZE=4;class Gd extends dm{constructor(o){super(o)}parseInformation(){let o=new ee;return this.getGeneralDecoder().decodeAllCodes(o,Gd.HEADER_SIZE)}}Gd.HEADER_SIZE=5;class Yd extends wn{constructor(o){super(o)}encodeCompressedWeight(o,a,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(o,h);let p=this.checkWeight(h),g=1e5;for(let w=0;w<5;++w)p/g===0&&o.append("0"),g/=10;o.append(p)}}class Zs extends Yd{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Zs.HEADER_SIZE+Yd.GTIN_SIZE+Zs.WEIGHT_SIZE)throw new V;let o=new ee;return this.encodeCompressedGtin(o,Zs.HEADER_SIZE),this.encodeCompressedWeight(o,Zs.HEADER_SIZE+Yd.GTIN_SIZE,Zs.WEIGHT_SIZE),o.toString()}}Zs.HEADER_SIZE=5,Zs.WEIGHT_SIZE=15;class J4 extends Zs{constructor(o){super(o)}addWeightCode(o,a){o.append("(3103)")}checkWeight(o){return o}}class eR extends Zs{constructor(o){super(o)}addWeightCode(o,a){a<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Js extends wn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Js.HEADER_SIZE+wn.GTIN_SIZE)throw new V;let o=new ee;this.encodeCompressedGtin(o,Js.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Js.HEADER_SIZE+wn.GTIN_SIZE,Js.LAST_DIGIT_SIZE);o.append("(392"),o.append(a),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Js.HEADER_SIZE+wn.GTIN_SIZE+Js.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}Js.HEADER_SIZE=8,Js.LAST_DIGIT_SIZE=2;class on extends wn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<on.HEADER_SIZE+wn.GTIN_SIZE)throw new V;let o=new ee;this.encodeCompressedGtin(o,on.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+wn.GTIN_SIZE,on.LAST_DIGIT_SIZE);o.append("(393"),o.append(a),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+wn.GTIN_SIZE+on.LAST_DIGIT_SIZE,on.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let h=this.getGeneralDecoder().decodeGeneralPurposeField(on.HEADER_SIZE+wn.GTIN_SIZE+on.LAST_DIGIT_SIZE+on.FIRST_THREE_DIGITS_SIZE,null);return o.append(h.getNewString()),o.toString()}}on.HEADER_SIZE=8,on.LAST_DIGIT_SIZE=2,on.FIRST_THREE_DIGITS_SIZE=10;class Vt extends Yd{constructor(o,a,c){super(o),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE+Vt.DATE_SIZE)throw new V;let o=new ee;return this.encodeCompressedGtin(o,Vt.HEADER_SIZE),this.encodeCompressedWeight(o,Vt.HEADER_SIZE+Vt.GTIN_SIZE,Vt.WEIGHT_SIZE),this.encodeCompressedDate(o,Vt.HEADER_SIZE+Vt.GTIN_SIZE+Vt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Vt.DATE_SIZE);if(c==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let h=c%32;c/=32;let p=c%12+1;c/=12;let g=c;g/10==0&&o.append("0"),o.append(g),p/10==0&&o.append("0"),o.append(p),h/10==0&&o.append("0"),o.append(h)}addWeightCode(o,a){o.append("("),o.append(this.firstAIdigits),o.append(a/1e5),o.append(")")}checkWeight(o){return o%1e5}}Vt.HEADER_SIZE=8,Vt.WEIGHT_SIZE=20,Vt.DATE_SIZE=16;function cw(D){try{if(D.get(1))return new cl(D);if(!D.get(2))return new Gd(D);switch(ll.extractNumericValueFromBitArray(D,1,4)){case 4:return new J4(D);case 5:return new eR(D)}switch(ll.extractNumericValueFromBitArray(D,1,5)){case 12:return new Js(D);case 13:return new on(D)}switch(ll.extractNumericValueFromBitArray(D,1,7)){case 56:return new Vt(D,"310","11");case 57:return new Vt(D,"320","11");case 58:return new Vt(D,"310","13");case 59:return new Vt(D,"320","13");case 60:return new Vt(D,"310","15");case 61:return new Vt(D,"320","15");case 62:return new Vt(D,"310","17");case 63:return new Vt(D,"320","17")}}catch(o){throw console.log(o),new St("unknown decoder: "+D)}}class Ki{constructor(o,a,c,h){this.leftchar=o,this.rightchar=a,this.finderpattern=c,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,a){return o instanceof Ki?Ki.equalsOrNull(o.leftchar,a.leftchar)&&Ki.equalsOrNull(o.rightchar,a.rightchar)&&Ki.equalsOrNull(o.finderpattern,a.finderpattern):!1}static equalsOrNull(o,a){return o===null?a===null:Ki.equals(o,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class hm{constructor(o,a,c){this.pairs=o,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,a){return o instanceof hm?this.checkEqualitity(o,a)&&o.wasReversed===a.wasReversed:!1}checkEqualitity(o,a){if(!o||!a)return;let c;return o.forEach((h,p)=>{a.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class he extends et{constructor(o){super(...arguments),this.pairs=new Array(he.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,a,c){this.pairs.length=0,this.startFromEven=!1;try{return he.constructResult(this.decodeRow2pairs(o,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,he.constructResult(this.decodeRow2pairs(o,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,o))}catch(p){if(p instanceof V){if(!this.pairs.length)throw new V;c=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(o,!1),h){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new V}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return o&&(this.rows=this.rows.reverse()),a}checkRows(o,a){for(let c=a;c<this.rows.length;c++){let h=this.rows[c];this.pairs.length=0;for(let g of o)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!he.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(o);p.push(h);try{return this.checkRows(p,c+1)}catch(g){this.verbose&&console.log(g)}}throw new V}static isValidSequence(o){for(let a of he.FINDER_PATTERN_SEQUENCES){if(o.length>a.length)continue;let c=!0;for(let h=0;h<o.length;h++)if(o[h].getFinderPattern().getValue()!=a[h]){c=!1;break}if(c)return!0}return!1}storeRow(o,a){let c=0,h=!1,p=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>o){p=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),c++}p||h||he.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new hm(this.pairs,o,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,a){for(let c of a)if(c.getPairs().length!==o.length){for(let h of c.getPairs())for(let p of o)if(Ki.equals(h,p))break}}static isPartialRow(o,a){for(let c of a){let h=!0;for(let p of o){let g=!1;for(let w of c.getPairs())if(p.equals(w)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(o){let a=Ni.buildBitArray(o),h=cw(a).parseInformation(),p=o[0].getFinderPattern().getResultPoints(),g=o[o.length-1].getFinderPattern().getResultPoints(),w=[p[0],p[1],g[0],g[1]];return new ce(h,null,null,w,xe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),a=o.getLeftChar(),c=o.getRightChar();if(c==null)return!1;let h=c.getChecksumPortion(),p=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);h+=C.getLeftChar().getChecksumPortion(),p++;let T=C.getRightChar();T!=null&&(h+=T.getChecksumPortion(),p++)}return h%=211,211*(p-4)+h==a.getValue()}static getNextSecondBar(o,a){let c;return o.get(a)?(c=o.getNextUnset(a),c=o.getNextSet(c)):(c=o.getNextSet(a),c=o.getNextUnset(c)),c}retrieveNextPair(o,a,c){let h=a.length%2==0;this.startFromEven&&(h=!h);let p,g=!0,w=-1;do this.findNextPair(o,a,w),p=this.parseFoundFinderPattern(o,c,h),p==null?w=he.getNextSecondBar(o,this.startEnd[0]):g=!1;while(g);let C=this.decodeDataCharacter(o,p,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new V;let T;try{T=this.decodeDataCharacter(o,p,h,!1)}catch(j){T=null,this.verbose&&console.log(j)}return new Ki(C,T,p,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,a,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=o.getSize(),g;c>=0?g=c:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let w=a.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;g<p&&(C=!o.get(g),!!C);)g++;let T=0,j=g;for(let L=g;L<p;L++)if(o.get(L)!=C)h[T]++;else{if(T==3){if(w&&he.reverseCounters(h),he.isFinderPattern(h)){this.startEnd[0]=j,this.startEnd[1]=L;return}w&&he.reverseCounters(h),j+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,C=!C}throw new V}static reverseCounters(o){let a=o.length;for(let c=0;c<a/2;++c){let h=o[c];o[c]=o[a-c-1],o[a-c-1]=h}}parseFoundFinderPattern(o,a,c){let h,p,g;if(c){let T=this.startEnd[0]-1;for(;T>=0&&!o.get(T);)T--;T++,h=this.startEnd[0]-T,p=T,g=this.startEnd[1]}else p=this.startEnd[0],g=o.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let w=this.getDecodeFinderCounters();_.arraycopy(w,0,w,1,w.length-1),w[0]=h;let C;try{C=this.parseFinderValue(w,he.FINDER_PATTERNS)}catch{return null}return new Yr(C,[p,g],p,g,a)}decodeDataCharacter(o,a,c,h){let p=this.getDataCharacterCounters();for(let It=0;It<p.length;It++)p[It]=0;if(h)he.recordPatternInReverse(o,a.getStartEnd()[0],p);else{he.recordPattern(o,a.getStartEnd()[1],p);for(let It=0,Ur=p.length-1;It<Ur;It++,Ur--){let kn=p[It];p[It]=p[Ur],p[Ur]=kn}}let g=17,w=Ae.sum(new Int32Array(p))/g,C=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new V;let T=this.getOddCounts(),j=this.getEvenCounts(),L=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let It=0;It<p.length;It++){let Ur=1*p[It]/w,kn=Ur+.5;if(kn<1){if(Ur<.3)throw new V;kn=1}else if(kn>8){if(Ur>8.7)throw new V;kn=8}let ml=It/2;It&1?(j[ml]=kn,U[ml]=Ur-kn):(T[ml]=kn,L[ml]=Ur-kn)}this.adjustOddEvenCounts(g);let W=4*a.getValue()+(c?0:2)+(h?0:1)-1,X=0,Z=0;for(let It=T.length-1;It>=0;It--){if(he.isNotA1left(a,c,h)){let Ur=he.WEIGHTS[W][2*It];Z+=T[It]*Ur}X+=T[It]}let te=0;for(let It=j.length-1;It>=0;It--)if(he.isNotA1left(a,c,h)){let Ur=he.WEIGHTS[W][2*It+1];te+=j[It]*Ur}let se=Z+te;if(X&1||X>13||X<4)throw new V;let we=(13-X)/2,_e=he.SYMBOL_WIDEST[we],ge=9-_e,ct=_r.getRSSvalue(T,_e,!0),Ze=_r.getRSSvalue(j,ge,!1),bn=he.EVEN_TOTAL_SUBSET[we],Ns=he.GSUM[we],_n=ct*bn+Ze+Ns;return new Ir(_n,se)}static isNotA1left(o,a,c){return!(o.getValue()==0&&a&&c)}adjustOddEvenCounts(o){let a=Ae.sum(new Int32Array(this.getOddCounts())),c=Ae.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1;a>13?p=!0:a<4&&(h=!0);let g=!1,w=!1;c>13?w=!0:c<4&&(g=!0);let C=a+c-o,T=(a&1)==1,j=(c&1)==0;if(C==1)if(T){if(j)throw new V;p=!0}else{if(!j)throw new V;w=!0}else if(C==-1)if(T){if(j)throw new V;h=!0}else{if(!j)throw new V;g=!0}else if(C==0){if(T){if(!j)throw new V;a<c?(h=!0,w=!0):(p=!0,g=!0)}else if(j)throw new V}else throw new V;if(h){if(p)throw new V;he.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&he.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(w)throw new V;he.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&he.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}he.SYMBOL_WIDEST=[7,5,4,3,1],he.EVEN_TOTAL_SUBSET=[4,20,52,104,204],he.GSUM=[0,348,1388,2948,3988],he.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],he.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],he.FINDER_PAT_A=0,he.FINDER_PAT_B=1,he.FINDER_PAT_C=2,he.FINDER_PAT_D=3,he.FINDER_PAT_E=4,he.FINDER_PAT_F=5,he.FINDER_PATTERN_SEQUENCES=[[he.FINDER_PAT_A,he.FINDER_PAT_A],[he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B],[he.FINDER_PAT_A,he.FINDER_PAT_C,he.FINDER_PAT_B,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_C],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_E,he.FINDER_PAT_B,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F],[he.FINDER_PAT_A,he.FINDER_PAT_A,he.FINDER_PAT_B,he.FINDER_PAT_B,he.FINDER_PAT_C,he.FINDER_PAT_D,he.FINDER_PAT_D,he.FINDER_PAT_E,he.FINDER_PAT_E,he.FINDER_PAT_F,he.FINDER_PAT_F]],he.MAX_PAIRS=11;class tR extends Ir{constructor(o,a,c){super(o,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nr extends et{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,a,c){const h=this.decodePair(a,!1,o,c);nr.addOrTally(this.possibleLeftPairs,h),a.reverse();let p=this.decodePair(a,!0,o,c);nr.addOrTally(this.possibleRightPairs,p),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&nr.checkChecksum(g,w))return nr.constructResult(g,w)}throw new V}static addOrTally(o,a){if(a==null)return;let c=!1;for(let h of o)if(h.getValue()===a.getValue()){h.incrementCount(),c=!0;break}c||o.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,a){let c=4537077*o.getValue()+a.getValue(),h=new String(c).toString(),p=new ee;for(let T=13-h.length;T>0;T--)p.append("0");p.append(h);let g=0;for(let T=0;T<13;T++){let j=p.charAt(T).charCodeAt(0)-48;g+=T&1?j:3*j}g=10-g%10,g===10&&(g=0),p.append(g.toString());let w=o.getFinderPattern().getResultPoints(),C=a.getFinderPattern().getResultPoints();return new ce(p.toString(),null,0,[w[0],w[1],C[0],C[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(o,a){let c=(o.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*o.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,c===h}decodePair(o,a,c,h){try{let p=this.findFinderPattern(o,a),g=this.parseFoundFinderPattern(o,c,a,p),w=h==null?null:h.get(F.NEED_RESULT_POINT_CALLBACK);if(w!=null){let j=(p[0]+p[1])/2;a&&(j=o.getSize()-1-j),w.foundPossibleResultPoint(new Ce(j,c))}let C=this.decodeDataCharacter(o,g,!0),T=this.decodeDataCharacter(o,g,!1);return new tR(1597*C.getValue()+T.getValue(),C.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(o,a,c){let h=this.getDataCharacterCounters();for(let te=0;te<h.length;te++)h[te]=0;if(c)Ut.recordPatternInReverse(o,a.getStartEnd()[0],h);else{Ut.recordPattern(o,a.getStartEnd()[1]+1,h);for(let te=0,se=h.length-1;te<se;te++,se--){let we=h[te];h[te]=h[se],h[se]=we}}let p=c?16:15,g=Ae.sum(new Int32Array(h))/p,w=this.getOddCounts(),C=this.getEvenCounts(),T=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let te=0;te<h.length;te++){let se=h[te]/g,we=Math.floor(se+.5);we<1?we=1:we>8&&(we=8);let _e=Math.floor(te/2);te&1?(C[_e]=we,j[_e]=se-we):(w[_e]=we,T[_e]=se-we)}this.adjustOddEvenCounts(c,p);let L=0,U=0;for(let te=w.length-1;te>=0;te--)U*=9,U+=w[te],L+=w[te];let W=0,X=0;for(let te=C.length-1;te>=0;te--)W*=9,W+=C[te],X+=C[te];let Z=U+3*W;if(c){if(L&1||L>12||L<4)throw new V;let te=(12-L)/2,se=nr.OUTSIDE_ODD_WIDEST[te],we=9-se,_e=_r.getRSSvalue(w,se,!1),ge=_r.getRSSvalue(C,we,!0),ct=nr.OUTSIDE_EVEN_TOTAL_SUBSET[te],Ze=nr.OUTSIDE_GSUM[te];return new Ir(_e*ct+ge+Ze,Z)}else{if(X&1||X>10||X<4)throw new V;let te=(10-X)/2,se=nr.INSIDE_ODD_WIDEST[te],we=9-se,_e=_r.getRSSvalue(w,se,!0),ge=_r.getRSSvalue(C,we,!1),ct=nr.INSIDE_ODD_TOTAL_SUBSET[te],Ze=nr.INSIDE_GSUM[te];return new Ir(ge*ct+_e+Ze,Z)}}findFinderPattern(o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=o.getSize(),p=!1,g=0;for(;g<h&&(p=!o.get(g),a!==p);)g++;let w=0,C=g;for(let T=g;T<h;T++)if(o.get(T)!==p)c[w]++;else{if(w===3){if(et.isFinderPattern(c))return[C,T];C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new V}parseFoundFinderPattern(o,a,c,h){let p=o.get(h[0]),g=h[0]-1;for(;g>=0&&p!==o.get(g);)g--;g++;const w=h[0]-g,C=this.getDecodeFinderCounters(),T=new Int32Array(C.length);_.arraycopy(C,0,T,1,C.length-1),T[0]=w;const j=this.parseFinderValue(T,nr.FINDER_PATTERNS);let L=g,U=h[1];return c&&(L=o.getSize()-1-L,U=o.getSize()-1-U),new Yr(j,[g,h[1]],L,U,a)}adjustOddEvenCounts(o,a){let c=Ae.sum(new Int32Array(this.getOddCounts())),h=Ae.sum(new Int32Array(this.getEvenCounts())),p=!1,g=!1,w=!1,C=!1;o?(c>12?g=!0:c<4&&(p=!0),h>12?C=!0:h<4&&(w=!0)):(c>11?g=!0:c<5&&(p=!0),h>10?C=!0:h<4&&(w=!0));let T=c+h-a,j=(c&1)===(o?1:0),L=(h&1)===1;if(T===1)if(j){if(L)throw new V;g=!0}else{if(!L)throw new V;C=!0}else if(T===-1)if(j){if(L)throw new V;p=!0}else{if(!L)throw new V;w=!0}else if(T===0){if(j){if(!L)throw new V;c<h?(p=!0,C=!0):(g=!0,w=!0)}else if(L)throw new V}else throw new V;if(p){if(g)throw new V;et.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&et.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new V;et.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&et.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nr.OUTSIDE_GSUM=[0,161,961,2015,2715],nr.INSIDE_GSUM=[0,336,1036,1516],nr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nr.INSIDE_ODD_WIDEST=[2,4,6,8],nr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ul extends Ut{constructor(o,a){super(),this.readers=[],this.verbose=a===!0;const c=o?o.get(F.POSSIBLE_FORMATS):null,h=o&&o.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(xe.EAN_13)||c.includes(xe.UPC_A)||c.includes(xe.EAN_8)||c.includes(xe.UPC_E))&&this.readers.push(new xt(o)),c.includes(xe.CODE_39)&&this.readers.push(new rr(h)),c.includes(xe.CODE_128)&&this.readers.push(new Se),c.includes(xe.ITF)&&this.readers.push(new ht),c.includes(xe.RSS_14)&&this.readers.push(new nr),c.includes(xe.RSS_EXPANDED)&&this.readers.push(new he(this.verbose))):(this.readers.push(new xt(o)),this.readers.push(new rr),this.readers.push(new xt(o)),this.readers.push(new Se),this.readers.push(new ht),this.readers.push(new nr),this.readers.push(new he(this.verbose)))}decodeRow(o,a,c){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(o,a,c)}catch{}throw new V}reset(){this.readers.forEach(o=>o.reset())}}class rR extends le{constructor(o=500,a){super(new ul(a),o,a)}}class vt{constructor(o,a,c){this.ecCodewords=o,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class wt{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ut{constructor(o,a,c,h,p,g){this.versionNumber=o,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=p,this.ecBlocks=g;let w=0;const C=g.getECCodewords(),T=g.getECBlocks();for(let j of T)w+=j.getCount()*(j.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,a){if(o&1||a&1)throw new B;for(let c of ut.VERSIONS)if(c.symbolSizeRows===o&&c.symbolSizeColumns===a)return c;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new ut(1,10,10,8,8,new vt(5,new wt(1,3))),new ut(2,12,12,10,10,new vt(7,new wt(1,5))),new ut(3,14,14,12,12,new vt(10,new wt(1,8))),new ut(4,16,16,14,14,new vt(12,new wt(1,12))),new ut(5,18,18,16,16,new vt(14,new wt(1,18))),new ut(6,20,20,18,18,new vt(18,new wt(1,22))),new ut(7,22,22,20,20,new vt(20,new wt(1,30))),new ut(8,24,24,22,22,new vt(24,new wt(1,36))),new ut(9,26,26,24,24,new vt(28,new wt(1,44))),new ut(10,32,32,14,14,new vt(36,new wt(1,62))),new ut(11,36,36,16,16,new vt(42,new wt(1,86))),new ut(12,40,40,18,18,new vt(48,new wt(1,114))),new ut(13,44,44,20,20,new vt(56,new wt(1,144))),new ut(14,48,48,22,22,new vt(68,new wt(1,174))),new ut(15,52,52,24,24,new vt(42,new wt(2,102))),new ut(16,64,64,14,14,new vt(56,new wt(2,140))),new ut(17,72,72,16,16,new vt(36,new wt(4,92))),new ut(18,80,80,18,18,new vt(48,new wt(4,114))),new ut(19,88,88,20,20,new vt(56,new wt(4,144))),new ut(20,96,96,22,22,new vt(68,new wt(4,174))),new ut(21,104,104,24,24,new vt(56,new wt(6,136))),new ut(22,120,120,18,18,new vt(68,new wt(6,175))),new ut(23,132,132,20,20,new vt(62,new wt(8,163))),new ut(24,144,144,22,22,new vt(62,new wt(8,156),new wt(2,155))),new ut(25,8,18,6,16,new vt(7,new wt(1,5))),new ut(26,8,32,6,14,new vt(11,new wt(1,10))),new ut(27,12,26,10,24,new vt(14,new wt(1,16))),new ut(28,12,36,10,16,new vt(18,new wt(1,22))),new ut(29,16,36,14,16,new vt(24,new wt(1,32))),new ut(30,16,48,14,22,new vt(28,new wt(1,49)))]}}ut.VERSIONS=ut.buildVersions();class fm{constructor(o){const a=o.getHeight();if(a<8||a>144||a&1)throw new B;this.version=fm.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const a=o.getHeight(),c=o.getWidth();return ut.getVersionForDimensions(a,c)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let a=0,c=4,h=0;const p=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let w=!1,C=!1,T=!1,j=!1;do if(c===p&&h===0&&!w)o[a++]=this.readCorner1(p,g)&255,c-=2,h+=2,w=!0;else if(c===p-2&&h===0&&g&3&&!C)o[a++]=this.readCorner2(p,g)&255,c-=2,h+=2,C=!0;else if(c===p+4&&h===2&&!(g&7)&&!T)o[a++]=this.readCorner3(p,g)&255,c-=2,h+=2,T=!0;else if(c===p-2&&h===0&&(g&7)===4&&!j)o[a++]=this.readCorner4(p,g)&255,c-=2,h+=2,j=!0;else{do c<p&&h>=0&&!this.readMappingMatrix.get(h,c)&&(o[a++]=this.readUtah(c,h,p,g)&255),c-=2,h+=2;while(c>=0&&h<g);c+=1,h+=3;do c>=0&&h<g&&!this.readMappingMatrix.get(h,c)&&(o[a++]=this.readUtah(c,h,p,g)&255),c+=2,h-=2;while(c<p&&h>=0);c+=3,h+=1}while(c<p||h<g);if(a!==this.version.getTotalCodewords())throw new B;return o}readModule(o,a,c,h){return o<0&&(o+=c,a+=4-(c+4&7)),a<0&&(a+=h,o+=4-(h+4&7)),this.readMappingMatrix.set(a,o),this.mappingBitMatrix.get(a,o)}readUtah(o,a,c,h){let p=0;return this.readModule(o-2,a-2,c,h)&&(p|=1),p<<=1,this.readModule(o-2,a-1,c,h)&&(p|=1),p<<=1,this.readModule(o-1,a-2,c,h)&&(p|=1),p<<=1,this.readModule(o-1,a-1,c,h)&&(p|=1),p<<=1,this.readModule(o-1,a,c,h)&&(p|=1),p<<=1,this.readModule(o,a-2,c,h)&&(p|=1),p<<=1,this.readModule(o,a-1,c,h)&&(p|=1),p<<=1,this.readModule(o,a,c,h)&&(p|=1),p}readCorner1(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,1,o,a)&&(c|=1),c<<=1,this.readModule(o-1,2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}readCorner2(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-4,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner3(o,a){let c=0;return this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(0,a-3,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-3,o,a)&&(c|=1),c<<=1,this.readModule(1,a-2,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c}readCorner4(o,a){let c=0;return this.readModule(o-3,0,o,a)&&(c|=1),c<<=1,this.readModule(o-2,0,o,a)&&(c|=1),c<<=1,this.readModule(o-1,0,o,a)&&(c|=1),c<<=1,this.readModule(0,a-2,o,a)&&(c|=1),c<<=1,this.readModule(0,a-1,o,a)&&(c|=1),c<<=1,this.readModule(1,a-1,o,a)&&(c|=1),c<<=1,this.readModule(2,a-1,o,a)&&(c|=1),c<<=1,this.readModule(3,a-1,o,a)&&(c|=1),c}extractDataRegion(o){const a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(o.getHeight()!==a)throw new y("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),g=a/h|0,w=c/p|0,C=g*h,T=w*p,j=new z(T,C);for(let L=0;L<g;++L){const U=L*h;for(let W=0;W<w;++W){const X=W*p;for(let Z=0;Z<h;++Z){const te=L*(h+2)+1+Z,se=U+Z;for(let we=0;we<p;++we){const _e=W*(p+2)+1+we;if(o.get(_e,te)){const ge=X+we;j.set(ge,se)}}}}}return j}}class mm{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a){const c=a.getECBlocks();let h=0;const p=c.getECBlocks();for(let Z of p)h+=Z.getCount();const g=new Array(h);let w=0;for(let Z of p)for(let te=0;te<Z.getCount();te++){const se=Z.getDataCodewords(),we=c.getECCodewords()+se;g[w++]=new mm(se,new Uint8Array(we))}const T=g[0].codewords.length-c.getECCodewords(),j=T-1;let L=0;for(let Z=0;Z<j;Z++)for(let te=0;te<w;te++)g[te].codewords[Z]=o[L++];const U=a.getVersionNumber()===24,W=U?8:w;for(let Z=0;Z<W;Z++)g[Z].codewords[T-1]=o[L++];const X=g[0].codewords.length;for(let Z=T;Z<X;Z++)for(let te=0;te<w;te++){const se=U?(te+8)%w:te,we=U&&se>7?Z-1:Z;g[se].codewords[we]=o[L++]}if(L!==o.length)throw new y;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pm{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new y(""+o);let a=0,c=this.bitOffset,h=this.byteOffset;const p=this.bytes;if(c>0){const g=8-c,w=o<g?o:g,C=g-w,T=255>>8-w<<C;a=(p[h]&T)>>C,o-=w,c+=w,c===8&&(c=0,h++)}if(o>0){for(;o>=8;)a=a<<8|p[h]&255,h++,o-=8;if(o>0){const g=8-o,w=255>>g<<g;a=a<<o|(p[h]&w)>>g,c+=o}}return this.bitOffset=c,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Er;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Er||(Er={}));class Qi{static decode(o){const a=new pm(o),c=new ee,h=new ee,p=new Array;let g=Er.ASCII_ENCODE;do if(g===Er.ASCII_ENCODE)g=this.decodeAsciiSegment(a,c,h);else{switch(g){case Er.C40_ENCODE:this.decodeC40Segment(a,c);break;case Er.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case Er.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case Er.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case Er.BASE256_ENCODE:this.decodeBase256Segment(a,c,p);break;default:throw new B}g=Er.ASCII_ENCODE}while(g!==Er.PAD_ENCODE&&a.available()>0);return h.length()>0&&c.append(h.toString()),new Xe(o,c.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(o,a,c){let h=!1;do{let p=o.readBits(8);if(p===0)throw new B;if(p<=128)return h&&(p+=128),a.append(String.fromCharCode(p-1)),Er.ASCII_ENCODE;if(p===129)return Er.PAD_ENCODE;if(p<=229){const g=p-130;g<10&&a.append("0"),a.append(""+g)}else switch(p){case 230:return Er.C40_ENCODE;case 231:return Er.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return Er.ANSIX12_ENCODE;case 239:return Er.TEXT_ENCODE;case 240:return Er.EDIFACT_ENCODE;case 241:break;default:if(p!==254||o.available()!==0)throw new B;break}}while(o.available()>0);return Er.ASCII_ENCODE}static decodeC40Segment(o,a){let c=!1;const h=[];let p=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),h);for(let w=0;w<3;w++){const C=h[w];switch(p){case 0:if(C<3)p=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[C];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(C+128)),c=!1):a.append(String.fromCharCode(C)),p=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[C];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(C){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}p=0;break;case 3:c?(a.append(String.fromCharCode(C+224)),c=!1):a.append(String.fromCharCode(C+96)),p=0;break;default:throw new B}}}while(o.available()>0)}static decodeTextSegment(o,a){let c=!1,h=[],p=0;do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),h);for(let w=0;w<3;w++){const C=h[w];switch(p){case 0:if(C<3)p=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[C];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new B;break;case 1:c?(a.append(String.fromCharCode(C+128)),c=!1):a.append(String.fromCharCode(C)),p=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[C];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(C){case 27:a.append("");break;case 30:c=!0;break;default:throw new B}p=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[C];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T),p=0}else throw new B;break;default:throw new B}}}while(o.available()>0)}static decodeAnsiX12Segment(o,a){const c=[];do{if(o.available()===8)return;const h=o.readBits(8);if(h===254)return;this.parseTwoBytes(h,o.readBits(8),c);for(let p=0;p<3;p++){const g=c[p];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new B;break}}}while(o.available()>0)}static parseTwoBytes(o,a,c){let h=(o<<8)+a-1,p=Math.floor(h/1600);c[0]=p,h-=p*1600,p=Math.floor(h/40),c[1]=p,c[2]=h-p*40}static decodeEdifactSegment(o,a){do{if(o.available()<=16)return;for(let c=0;c<4;c++){let h=o.readBits(6);if(h===31){const p=8-o.getBitOffset();p!==8&&o.readBits(p);return}h&32||(h|=64),a.append(String.fromCharCode(h))}}while(o.available()>0)}static decodeBase256Segment(o,a,c){let h=1+o.getByteOffset();const p=this.unrandomize255State(o.readBits(8),h++);let g;if(p===0?g=o.available()/8|0:p<250?g=p:g=250*(p-249)+this.unrandomize255State(o.readBits(8),h++),g<0)throw new B;const w=new Uint8Array(g);for(let C=0;C<g;C++){if(o.available()<8)throw new B;w[C]=this.unrandomize255State(o.readBits(8),h++)}c.push(w);try{a.append(G.decode(w,K.ISO88591))}catch(C){throw new St("Platform does not support required encoding: "+C.message)}}static unrandomize255State(o,a){const c=149*a%255+1,h=o-c;return h>=0?h:h+256}}Qi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Qi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Qi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Qi.TEXT_SHIFT2_SET_CHARS=Qi.C40_SHIFT2_SET_CHARS,Qi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class nR{constructor(){this.rsDecoder=new er(Me.DATA_MATRIX_FIELD_256)}decode(o){const a=new fm(o),c=a.getVersion(),h=a.readCodewords(),p=mm.getDataBlocks(h,c);let g=0;for(let T of p)g+=T.getNumDataCodewords();const w=new Uint8Array(g),C=p.length;for(let T=0;T<C;T++){const j=p[T],L=j.getCodewords(),U=j.getNumDataCodewords();this.correctErrors(L,U);for(let W=0;W<U;W++)w[W*C+T]=L[W]}return Qi.decode(w)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new b}for(let h=0;h<a;h++)o[h]=c[h]}}class hr{constructor(o){this.image=o,this.rectangleDetector=new tr(this.image)}detect(){const o=this.rectangleDetector.detect();let a=this.detectSolid1(o);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new V;a=this.shiftToModuleCenter(a);const c=a[0],h=a[1],p=a[2],g=a[3];let w=this.transitionsBetween(c,g)+1,C=this.transitionsBetween(p,g)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let T=hr.sampleGrid(this.image,c,h,p,g,w,C);return new Dr(T,[c,h,p,g])}static shiftPoint(o,a,c){let h=(a.getX()-o.getX())/(c+1),p=(a.getY()-o.getY())/(c+1);return new Ce(o.getX()+h,o.getY()+p)}static moveAway(o,a,c){let h=o.getX(),p=o.getY();return h<a?h-=1:h+=1,p<c?p-=1:p+=1,new Ce(h,p)}detectSolid1(o){let a=o[0],c=o[1],h=o[3],p=o[2],g=this.transitionsBetween(a,c),w=this.transitionsBetween(c,h),C=this.transitionsBetween(h,p),T=this.transitionsBetween(p,a),j=g,L=[p,a,c,h];return j>w&&(j=w,L[0]=a,L[1]=c,L[2]=h,L[3]=p),j>C&&(j=C,L[0]=c,L[1]=h,L[2]=p,L[3]=a),j>T&&(L[0]=h,L[1]=p,L[2]=a,L[3]=c),L}detectSolid2(o){let a=o[0],c=o[1],h=o[2],p=o[3],g=this.transitionsBetween(a,p),w=hr.shiftPoint(c,h,(g+1)*4),C=hr.shiftPoint(h,c,(g+1)*4),T=this.transitionsBetween(w,a),j=this.transitionsBetween(C,p);return T<j?(o[0]=a,o[1]=c,o[2]=h,o[3]=p):(o[0]=c,o[1]=h,o[2]=p,o[3]=a),o}correctTopRight(o){let a=o[0],c=o[1],h=o[2],p=o[3],g=this.transitionsBetween(a,p),w=this.transitionsBetween(c,p),C=hr.shiftPoint(a,c,(w+1)*4),T=hr.shiftPoint(h,c,(g+1)*4);g=this.transitionsBetween(C,p),w=this.transitionsBetween(T,p);let j=new Ce(p.getX()+(h.getX()-c.getX())/(g+1),p.getY()+(h.getY()-c.getY())/(g+1)),L=new Ce(p.getX()+(a.getX()-c.getX())/(w+1),p.getY()+(a.getY()-c.getY())/(w+1));if(!this.isValid(j))return this.isValid(L)?L:null;if(!this.isValid(L))return j;let U=this.transitionsBetween(C,j)+this.transitionsBetween(T,j),W=this.transitionsBetween(C,L)+this.transitionsBetween(T,L);return U>W?j:L}shiftToModuleCenter(o){let a=o[0],c=o[1],h=o[2],p=o[3],g=this.transitionsBetween(a,p)+1,w=this.transitionsBetween(h,p)+1,C=hr.shiftPoint(a,c,w*4),T=hr.shiftPoint(h,c,g*4);g=this.transitionsBetween(C,p)+1,w=this.transitionsBetween(T,p)+1,(g&1)===1&&(g+=1),(w&1)===1&&(w+=1);let j=(a.getX()+c.getX()+h.getX()+p.getX())/4,L=(a.getY()+c.getY()+h.getY()+p.getY())/4;a=hr.moveAway(a,j,L),c=hr.moveAway(c,j,L),h=hr.moveAway(h,j,L),p=hr.moveAway(p,j,L);let U,W;return C=hr.shiftPoint(a,c,w*4),C=hr.shiftPoint(C,p,g*4),U=hr.shiftPoint(c,a,w*4),U=hr.shiftPoint(U,h,g*4),T=hr.shiftPoint(h,p,w*4),T=hr.shiftPoint(T,c,g*4),W=hr.shiftPoint(p,h,w*4),W=hr.shiftPoint(W,a,g*4),[C,U,T,W]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,a,c,h,p,g,w){return Qs.getInstance().sampleGrid(o,g,w,.5,.5,g-.5,.5,g-.5,w-.5,.5,w-.5,a.getX(),a.getY(),p.getX(),p.getY(),h.getX(),h.getY(),c.getX(),c.getY())}transitionsBetween(o,a){let c=Math.trunc(o.getX()),h=Math.trunc(o.getY()),p=Math.trunc(a.getX()),g=Math.trunc(a.getY()),w=Math.abs(g-h)>Math.abs(p-c);if(w){let Z=c;c=h,h=Z,Z=p,p=g,g=Z}let C=Math.abs(p-c),T=Math.abs(g-h),j=-C/2,L=h<g?1:-1,U=c<p?1:-1,W=0,X=this.image.get(w?h:c,w?c:h);for(let Z=c,te=h;Z!==p;Z+=U){let se=this.image.get(w?te:Z,w?Z:te);if(se!==X&&(W++,X=se),j+=T,j>0){if(te===g)break;te+=L,j-=C}}return W}}class Zi{constructor(){this.decoder=new nR}decode(o,a=null){let c,h;if(a!=null&&a.has(F.PURE_BARCODE)){const T=Zi.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(T),h=Zi.NO_POINTS}else{const T=new hr(o.getBlackMatrix()).detect();c=this.decoder.decode(T.getBits()),h=T.getPoints()}const p=c.getRawBytes(),g=new ce(c.getText(),p,8*p.length,h,xe.DATA_MATRIX,_.currentTimeMillis()),w=c.getByteSegments();w!=null&&g.putMetadata(Pe.BYTE_SEGMENTS,w);const C=c.getECLevel();return C!=null&&g.putMetadata(Pe.ERROR_CORRECTION_LEVEL,C),g}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a==null||c==null)throw new V;const h=this.moduleSize(a,o);let p=a[1];const g=c[1];let w=a[0];const T=(c[0]-w+1)/h,j=(g-p+1)/h;if(T<=0||j<=0)throw new V;const L=h/2;p+=L,w+=L;const U=new z(T,j);for(let W=0;W<j;W++){const X=p+W*h;for(let Z=0;Z<T;Z++)o.get(w+Z*h,X)&&U.set(Z,W)}return U}static moduleSize(o,a){const c=a.getWidth();let h=o[0];const p=o[1];for(;h<c&&a.get(h,p);)h++;if(h===c)throw new V;const g=h-o[0];if(g===0)throw new V;return g}}Zi.NO_POINTS=[];class sR extends le{constructor(o=500){super(new Zi,o)}}var dl;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(dl||(dl={}));class jt{constructor(o,a,c){this.value=o,this.stringValue=a,this.bits=c,jt.FOR_BITS.set(c,this),jt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return jt.L;case"M":return jt.M;case"Q":return jt.Q;case"H":return jt.H;default:throw new x(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof jt))return!1;const a=o;return this.value===a.value}static forBits(o){if(o<0||o>=jt.FOR_BITS.size)throw new y;return jt.FOR_BITS.get(o)}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.L=new jt(dl.L,"L",1),jt.M=new jt(dl.M,"M",0),jt.Q=new jt(dl.Q,"Q",3),jt.H=new jt(dl.H,"H",2);class qr{constructor(o){this.errorCorrectionLevel=jt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,a){return A.bitCount(o^a)}static decodeFormatInformation(o,a){const c=qr.doDecodeFormatInformation(o,a);return c!==null?c:qr.doDecodeFormatInformation(o^qr.FORMAT_INFO_MASK_QR,a^qr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,a){let c=Number.MAX_SAFE_INTEGER,h=0;for(const p of qr.FORMAT_INFO_DECODE_LOOKUP){const g=p[0];if(g===o||g===a)return new qr(p[1]);let w=qr.numBitsDiffering(o,g);w<c&&(h=p[1],c=w),o!==a&&(w=qr.numBitsDiffering(a,g),w<c&&(h=p[1],c=w))}return c<=3?new qr(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof qr))return!1;const a=o;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}qr.FORMAT_INFO_MASK_QR=21522,qr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(o,...a){this.ecCodewordsPerBlock=o,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const a=this.ecBlocks;for(const c of a)o+=c.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(o,a){this.count=o,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ue{constructor(o,a,...c){this.versionNumber=o,this.alignmentPatternCenters=a,this.ecBlocks=c;let h=0;const p=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const w of g)h+=w.getCount()*(w.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new B;try{return this.getVersionForNumber((o-17)/4)}catch{throw new B}}static getVersionForNumber(o){if(o<1||o>40)throw new y;return Ue.VERSIONS[o-1]}static decodeVersionInformation(o){let a=Number.MAX_SAFE_INTEGER,c=0;for(let h=0;h<Ue.VERSION_DECODE_INFO.length;h++){const p=Ue.VERSION_DECODE_INFO[h];if(p===o)return Ue.getVersionForNumber(h+7);const g=qr.numBitsDiffering(o,p);g<a&&(c=h+7,a=g)}return a<=3?Ue.getVersionForNumber(c):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),a=new z(o);a.setRegion(0,0,9,9),a.setRegion(o-8,0,8,9),a.setRegion(0,o-8,9,8);const c=this.alignmentPatternCenters.length;for(let h=0;h<c;h++){const p=this.alignmentPatternCenters[h]-2;for(let g=0;g<c;g++)h===0&&(g===0||g===c-1)||h===c-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,p,5,5)}return a.setRegion(6,9,1,o-17),a.setRegion(9,6,o-17,1),this.versionNumber>6&&(a.setRegion(o-11,0,3,6),a.setRegion(0,o-11,6,3)),a}toString(){return""+this.versionNumber}}Ue.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ue.VERSIONS=[new Ue(1,new Int32Array(0),new re(7,new H(1,19)),new re(10,new H(1,16)),new re(13,new H(1,13)),new re(17,new H(1,9))),new Ue(2,Int32Array.from([6,18]),new re(10,new H(1,34)),new re(16,new H(1,28)),new re(22,new H(1,22)),new re(28,new H(1,16))),new Ue(3,Int32Array.from([6,22]),new re(15,new H(1,55)),new re(26,new H(1,44)),new re(18,new H(2,17)),new re(22,new H(2,13))),new Ue(4,Int32Array.from([6,26]),new re(20,new H(1,80)),new re(18,new H(2,32)),new re(26,new H(2,24)),new re(16,new H(4,9))),new Ue(5,Int32Array.from([6,30]),new re(26,new H(1,108)),new re(24,new H(2,43)),new re(18,new H(2,15),new H(2,16)),new re(22,new H(2,11),new H(2,12))),new Ue(6,Int32Array.from([6,34]),new re(18,new H(2,68)),new re(16,new H(4,27)),new re(24,new H(4,19)),new re(28,new H(4,15))),new Ue(7,Int32Array.from([6,22,38]),new re(20,new H(2,78)),new re(18,new H(4,31)),new re(18,new H(2,14),new H(4,15)),new re(26,new H(4,13),new H(1,14))),new Ue(8,Int32Array.from([6,24,42]),new re(24,new H(2,97)),new re(22,new H(2,38),new H(2,39)),new re(22,new H(4,18),new H(2,19)),new re(26,new H(4,14),new H(2,15))),new Ue(9,Int32Array.from([6,26,46]),new re(30,new H(2,116)),new re(22,new H(3,36),new H(2,37)),new re(20,new H(4,16),new H(4,17)),new re(24,new H(4,12),new H(4,13))),new Ue(10,Int32Array.from([6,28,50]),new re(18,new H(2,68),new H(2,69)),new re(26,new H(4,43),new H(1,44)),new re(24,new H(6,19),new H(2,20)),new re(28,new H(6,15),new H(2,16))),new Ue(11,Int32Array.from([6,30,54]),new re(20,new H(4,81)),new re(30,new H(1,50),new H(4,51)),new re(28,new H(4,22),new H(4,23)),new re(24,new H(3,12),new H(8,13))),new Ue(12,Int32Array.from([6,32,58]),new re(24,new H(2,92),new H(2,93)),new re(22,new H(6,36),new H(2,37)),new re(26,new H(4,20),new H(6,21)),new re(28,new H(7,14),new H(4,15))),new Ue(13,Int32Array.from([6,34,62]),new re(26,new H(4,107)),new re(22,new H(8,37),new H(1,38)),new re(24,new H(8,20),new H(4,21)),new re(22,new H(12,11),new H(4,12))),new Ue(14,Int32Array.from([6,26,46,66]),new re(30,new H(3,115),new H(1,116)),new re(24,new H(4,40),new H(5,41)),new re(20,new H(11,16),new H(5,17)),new re(24,new H(11,12),new H(5,13))),new Ue(15,Int32Array.from([6,26,48,70]),new re(22,new H(5,87),new H(1,88)),new re(24,new H(5,41),new H(5,42)),new re(30,new H(5,24),new H(7,25)),new re(24,new H(11,12),new H(7,13))),new Ue(16,Int32Array.from([6,26,50,74]),new re(24,new H(5,98),new H(1,99)),new re(28,new H(7,45),new H(3,46)),new re(24,new H(15,19),new H(2,20)),new re(30,new H(3,15),new H(13,16))),new Ue(17,Int32Array.from([6,30,54,78]),new re(28,new H(1,107),new H(5,108)),new re(28,new H(10,46),new H(1,47)),new re(28,new H(1,22),new H(15,23)),new re(28,new H(2,14),new H(17,15))),new Ue(18,Int32Array.from([6,30,56,82]),new re(30,new H(5,120),new H(1,121)),new re(26,new H(9,43),new H(4,44)),new re(28,new H(17,22),new H(1,23)),new re(28,new H(2,14),new H(19,15))),new Ue(19,Int32Array.from([6,30,58,86]),new re(28,new H(3,113),new H(4,114)),new re(26,new H(3,44),new H(11,45)),new re(26,new H(17,21),new H(4,22)),new re(26,new H(9,13),new H(16,14))),new Ue(20,Int32Array.from([6,34,62,90]),new re(28,new H(3,107),new H(5,108)),new re(26,new H(3,41),new H(13,42)),new re(30,new H(15,24),new H(5,25)),new re(28,new H(15,15),new H(10,16))),new Ue(21,Int32Array.from([6,28,50,72,94]),new re(28,new H(4,116),new H(4,117)),new re(26,new H(17,42)),new re(28,new H(17,22),new H(6,23)),new re(30,new H(19,16),new H(6,17))),new Ue(22,Int32Array.from([6,26,50,74,98]),new re(28,new H(2,111),new H(7,112)),new re(28,new H(17,46)),new re(30,new H(7,24),new H(16,25)),new re(24,new H(34,13))),new Ue(23,Int32Array.from([6,30,54,78,102]),new re(30,new H(4,121),new H(5,122)),new re(28,new H(4,47),new H(14,48)),new re(30,new H(11,24),new H(14,25)),new re(30,new H(16,15),new H(14,16))),new Ue(24,Int32Array.from([6,28,54,80,106]),new re(30,new H(6,117),new H(4,118)),new re(28,new H(6,45),new H(14,46)),new re(30,new H(11,24),new H(16,25)),new re(30,new H(30,16),new H(2,17))),new Ue(25,Int32Array.from([6,32,58,84,110]),new re(26,new H(8,106),new H(4,107)),new re(28,new H(8,47),new H(13,48)),new re(30,new H(7,24),new H(22,25)),new re(30,new H(22,15),new H(13,16))),new Ue(26,Int32Array.from([6,30,58,86,114]),new re(28,new H(10,114),new H(2,115)),new re(28,new H(19,46),new H(4,47)),new re(28,new H(28,22),new H(6,23)),new re(30,new H(33,16),new H(4,17))),new Ue(27,Int32Array.from([6,34,62,90,118]),new re(30,new H(8,122),new H(4,123)),new re(28,new H(22,45),new H(3,46)),new re(30,new H(8,23),new H(26,24)),new re(30,new H(12,15),new H(28,16))),new Ue(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new H(3,117),new H(10,118)),new re(28,new H(3,45),new H(23,46)),new re(30,new H(4,24),new H(31,25)),new re(30,new H(11,15),new H(31,16))),new Ue(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new H(7,116),new H(7,117)),new re(28,new H(21,45),new H(7,46)),new re(30,new H(1,23),new H(37,24)),new re(30,new H(19,15),new H(26,16))),new Ue(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new H(5,115),new H(10,116)),new re(28,new H(19,47),new H(10,48)),new re(30,new H(15,24),new H(25,25)),new re(30,new H(23,15),new H(25,16))),new Ue(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new H(13,115),new H(3,116)),new re(28,new H(2,46),new H(29,47)),new re(30,new H(42,24),new H(1,25)),new re(30,new H(23,15),new H(28,16))),new Ue(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new H(17,115)),new re(28,new H(10,46),new H(23,47)),new re(30,new H(10,24),new H(35,25)),new re(30,new H(19,15),new H(35,16))),new Ue(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new H(17,115),new H(1,116)),new re(28,new H(14,46),new H(21,47)),new re(30,new H(29,24),new H(19,25)),new re(30,new H(11,15),new H(46,16))),new Ue(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new H(13,115),new H(6,116)),new re(28,new H(14,46),new H(23,47)),new re(30,new H(44,24),new H(7,25)),new re(30,new H(59,16),new H(1,17))),new Ue(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new H(12,121),new H(7,122)),new re(28,new H(12,47),new H(26,48)),new re(30,new H(39,24),new H(14,25)),new re(30,new H(22,15),new H(41,16))),new Ue(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new H(6,121),new H(14,122)),new re(28,new H(6,47),new H(34,48)),new re(30,new H(46,24),new H(10,25)),new re(30,new H(2,15),new H(64,16))),new Ue(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new H(17,122),new H(4,123)),new re(28,new H(29,46),new H(14,47)),new re(30,new H(49,24),new H(10,25)),new re(30,new H(24,15),new H(46,16))),new Ue(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new H(4,122),new H(18,123)),new re(28,new H(13,46),new H(32,47)),new re(30,new H(48,24),new H(14,25)),new re(30,new H(42,15),new H(32,16))),new Ue(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new H(20,117),new H(4,118)),new re(28,new H(40,47),new H(7,48)),new re(30,new H(43,24),new H(22,25)),new re(30,new H(10,15),new H(67,16))),new Ue(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new H(19,118),new H(6,119)),new re(28,new H(18,47),new H(31,48)),new re(30,new H(34,24),new H(34,25)),new re(30,new H(20,15),new H(61,16)))];var Rr;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Rr||(Rr={}));class ss{constructor(o,a){this.value=o,this.isMasked=a}unmaskBitMatrix(o,a){for(let c=0;c<a;c++)for(let h=0;h<a;h++)this.isMasked(c,h)&&o.flip(h,c)}}ss.values=new Map([[Rr.DATA_MASK_000,new ss(Rr.DATA_MASK_000,(D,o)=>(D+o&1)===0)],[Rr.DATA_MASK_001,new ss(Rr.DATA_MASK_001,(D,o)=>(D&1)===0)],[Rr.DATA_MASK_010,new ss(Rr.DATA_MASK_010,(D,o)=>o%3===0)],[Rr.DATA_MASK_011,new ss(Rr.DATA_MASK_011,(D,o)=>(D+o)%3===0)],[Rr.DATA_MASK_100,new ss(Rr.DATA_MASK_100,(D,o)=>(Math.floor(D/2)+Math.floor(o/3)&1)===0)],[Rr.DATA_MASK_101,new ss(Rr.DATA_MASK_101,(D,o)=>D*o%6===0)],[Rr.DATA_MASK_110,new ss(Rr.DATA_MASK_110,(D,o)=>D*o%6<3)],[Rr.DATA_MASK_111,new ss(Rr.DATA_MASK_111,(D,o)=>(D+o+D*o%3&1)===0)]]);class iR{constructor(o){const a=o.getHeight();if(a<21||(a&3)!==1)throw new B;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let p=0;p<6;p++)o=this.copyBit(p,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let p=5;p>=0;p--)o=this.copyBit(8,p,o);const a=this.bitMatrix.getHeight();let c=0;const h=a-7;for(let p=a-1;p>=h;p--)c=this.copyBit(8,p,c);for(let p=a-8;p<a;p++)c=this.copyBit(p,8,c);if(this.parsedFormatInfo=qr.decodeFormatInformation(o,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),a=Math.floor((o-17)/4);if(a<=6)return Ue.getVersionForNumber(a);let c=0;const h=o-11;for(let g=5;g>=0;g--)for(let w=o-9;w>=h;w--)c=this.copyBit(w,g,c);let p=Ue.decodeVersionInformation(c);if(p!==null&&p.getDimensionForVersion()===o)return this.parsedVersion=p,p;c=0;for(let g=5;g>=0;g--)for(let w=o-9;w>=h;w--)c=this.copyBit(g,w,c);if(p=Ue.decodeVersionInformation(c),p!==null&&p.getDimensionForVersion()===o)return this.parsedVersion=p,p;throw new B}copyBit(o,a,c){return(this.isMirror?this.bitMatrix.get(a,o):this.bitMatrix.get(o,a))?c<<1|1:c<<1}readCodewords(){const o=this.readFormatInformation(),a=this.readVersion(),c=ss.values.get(o.getDataMask()),h=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,h);const p=a.buildFunctionPattern();let g=!0;const w=new Uint8Array(a.getTotalCodewords());let C=0,T=0,j=0;for(let L=h-1;L>0;L-=2){L===6&&L--;for(let U=0;U<h;U++){const W=g?h-1-U:U;for(let X=0;X<2;X++)p.get(L-X,W)||(j++,T<<=1,this.bitMatrix.get(L-X,W)&&(T|=1),j===8&&(w[C++]=T,j=0,T=0))}g=!g}if(C!==a.getTotalCodewords())throw new B;return w}remask(){if(this.parsedFormatInfo===null)return;const o=ss.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let a=0,c=o.getWidth();a<c;a++)for(let h=a+1,p=o.getHeight();h<p;h++)o.get(a,h)!==o.get(h,a)&&(o.flip(h,a),o.flip(a,h))}}class gm{constructor(o,a){this.numDataCodewords=o,this.codewords=a}static getDataBlocks(o,a,c){if(o.length!==a.getTotalCodewords())throw new y;const h=a.getECBlocksForLevel(c);let p=0;const g=h.getECBlocks();for(const X of g)p+=X.getCount();const w=new Array(p);let C=0;for(const X of g)for(let Z=0;Z<X.getCount();Z++){const te=X.getDataCodewords(),se=h.getECCodewordsPerBlock()+te;w[C++]=new gm(te,new Uint8Array(se))}const T=w[0].codewords.length;let j=w.length-1;for(;j>=0&&w[j].codewords.length!==T;)j--;j++;const L=T-h.getECCodewordsPerBlock();let U=0;for(let X=0;X<L;X++)for(let Z=0;Z<C;Z++)w[Z].codewords[X]=o[U++];for(let X=j;X<C;X++)w[X].codewords[L]=o[U++];const W=w[0].codewords.length;for(let X=L;X<W;X++)for(let Z=0;Z<C;Z++){const te=Z<j?X:X+1;w[Z].codewords[te]=o[U++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var is;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(is||(is={}));class We{constructor(o,a,c,h){this.value=o,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=h,We.FOR_BITS.set(h,this),We.FOR_VALUE.set(o,this)}static forBits(o){const a=We.FOR_BITS.get(o);if(a===void 0)throw new y;return a}getCharacterCountBits(o){const a=o.getVersionNumber();let c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof We))return!1;const a=o;return this.value===a.value}toString(){return this.stringValue}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.TERMINATOR=new We(is.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),We.NUMERIC=new We(is.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),We.ALPHANUMERIC=new We(is.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),We.STRUCTURED_APPEND=new We(is.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),We.BYTE=new We(is.BYTE,"BYTE",Int32Array.from([8,16,16]),4),We.ECI=new We(is.ECI,"ECI",Int32Array.from([0,0,0]),7),We.KANJI=new We(is.KANJI,"KANJI",Int32Array.from([8,10,12]),8),We.FNC1_FIRST_POSITION=new We(is.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),We.FNC1_SECOND_POSITION=new We(is.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),We.HANZI=new We(is.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gt{static decode(o,a,c,h){const p=new pm(o);let g=new ee;const w=new Array;let C=-1,T=-1;try{let j=null,L=!1,U;do{if(p.available()<4)U=We.TERMINATOR;else{const W=p.readBits(4);U=We.forBits(W)}switch(U){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:L=!0;break;case We.STRUCTURED_APPEND:if(p.available()<16)throw new B;C=p.readBits(8),T=p.readBits(8);break;case We.ECI:const W=Gt.parseECIValue(p);if(j=M.getCharacterSetECIByValue(W),j===null)throw new B;break;case We.HANZI:const X=p.readBits(4),Z=p.readBits(U.getCharacterCountBits(a));X===Gt.GB2312_SUBSET&&Gt.decodeHanziSegment(p,g,Z);break;default:const te=p.readBits(U.getCharacterCountBits(a));switch(U){case We.NUMERIC:Gt.decodeNumericSegment(p,g,te);break;case We.ALPHANUMERIC:Gt.decodeAlphanumericSegment(p,g,te,L);break;case We.BYTE:Gt.decodeByteSegment(p,g,te,j,w,h);break;case We.KANJI:Gt.decodeKanjiSegment(p,g,te);break;default:throw new B}break}}while(U!==We.TERMINATOR)}catch{throw new B}return new Xe(o,g.toString(),w.length===0?null:w,c===null?null:c.toString(),C,T)}static decodeHanziSegment(o,a,c){if(c*13>o.available())throw new B;const h=new Uint8Array(2*c);let p=0;for(;c>0;){const g=o.readBits(13);let w=g/96<<8&4294967295|g%96;w<959?w+=41377:w+=42657,h[p]=w>>8&255,h[p+1]=w&255,p+=2,c--}try{a.append(G.decode(h,K.GB2312))}catch(g){throw new B(g)}}static decodeKanjiSegment(o,a,c){if(c*13>o.available())throw new B;const h=new Uint8Array(2*c);let p=0;for(;c>0;){const g=o.readBits(13);let w=g/192<<8&4294967295|g%192;w<7936?w+=33088:w+=49472,h[p]=w>>8,h[p+1]=w,p+=2,c--}try{a.append(G.decode(h,K.SHIFT_JIS))}catch(g){throw new B(g)}}static decodeByteSegment(o,a,c,h,p,g){if(8*c>o.available())throw new B;const w=new Uint8Array(c);for(let T=0;T<c;T++)w[T]=o.readBits(8);let C;h===null?C=K.guessEncoding(w,g):C=h.getName();try{a.append(G.decode(w,C))}catch(T){throw new B(T)}p.push(w)}static toAlphaNumericChar(o){if(o>=Gt.ALPHANUMERIC_CHARS.length)throw new B;return Gt.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,a,c,h){const p=a.length();for(;c>1;){if(o.available()<11)throw new B;const g=o.readBits(11);a.append(Gt.toAlphaNumericChar(Math.floor(g/45))),a.append(Gt.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(o.available()<6)throw new B;a.append(Gt.toAlphaNumericChar(o.readBits(6)))}if(h)for(let g=p;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(o,a,c){for(;c>=3;){if(o.available()<10)throw new B;const h=o.readBits(10);if(h>=1e3)throw new B;a.append(Gt.toAlphaNumericChar(Math.floor(h/100))),a.append(Gt.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(Gt.toAlphaNumericChar(h%10)),c-=3}if(c===2){if(o.available()<7)throw new B;const h=o.readBits(7);if(h>=100)throw new B;a.append(Gt.toAlphaNumericChar(Math.floor(h/10))),a.append(Gt.toAlphaNumericChar(h%10))}else if(c===1){if(o.available()<4)throw new B;const h=o.readBits(4);if(h>=10)throw new B;a.append(Gt.toAlphaNumericChar(h))}}static parseECIValue(o){const a=o.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const c=o.readBits(8);return(a&63)<<8&4294967295|c}if((a&224)===192){const c=o.readBits(16);return(a&31)<<16&4294967295|c}throw new B}}Gt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gt.GB2312_SUBSET=1;class uw{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const a=o[0];o[0]=o[2],o[2]=a}}class oR{constructor(){this.rsDecoder=new er(Me.QR_CODE_FIELD_256)}decodeBooleanArray(o,a){return this.decodeBitMatrix(z.parseFromBooleanArray(o),a)}decodeBitMatrix(o,a){const c=new iR(o);let h=null;try{return this.decodeBitMatrixParser(c,a)}catch(p){h=p}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const p=this.decodeBitMatrixParser(c,a);return p.setOther(new uw(!0)),p}catch(p){throw h!==null?h:p}}decodeBitMatrixParser(o,a){const c=o.readVersion(),h=o.readFormatInformation().getErrorCorrectionLevel(),p=o.readCodewords(),g=gm.getDataBlocks(p,c,h);let w=0;for(const j of g)w+=j.getNumDataCodewords();const C=new Uint8Array(w);let T=0;for(const j of g){const L=j.getCodewords(),U=j.getNumDataCodewords();this.correctErrors(L,U);for(let W=0;W<U;W++)C[T++]=L[W]}return Gt.decode(C,c,h,a)}correctErrors(o,a){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-a)}catch{throw new b}for(let h=0;h<a;h++)o[h]=c[h]}}class xm extends Ce{constructor(o,a,c){super(o,a),this.estimatedModuleSize=c}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const h=Math.abs(o-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const h=(this.getX()+a)/2,p=(this.getY()+o)/2,g=(this.estimatedModuleSize+c)/2;return new xm(h,p,g)}}class qd{constructor(o,a,c,h,p,g,w){this.image=o,this.startX=a,this.startY=c,this.width=h,this.height=p,this.moduleSize=g,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,a=this.height,c=this.width,h=o+c,p=this.startY+a/2,g=new Int32Array(3),w=this.image;for(let C=0;C<a;C++){const T=p+(C&1?-Math.floor((C+1)/2):Math.floor((C+1)/2));g[0]=0,g[1]=0,g[2]=0;let j=o;for(;j<h&&!w.get(j,T);)j++;let L=0;for(;j<h;){if(w.get(j,T))if(L===1)g[1]++;else if(L===2){if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,j);if(U!==null)return U}g[0]=g[2],g[1]=1,g[2]=0,L=1}else g[++L]++;else L===1&&L++,g[L]++;j++}if(this.foundPatternCross(g)){const U=this.handlePossibleCenter(g,T,h);if(U!==null)return U}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(o,a){return a-o[2]-o[1]/2}foundPatternCross(o){const a=this.moduleSize,c=a/2;for(let h=0;h<3;h++)if(Math.abs(a-o[h])>=c)return!1;return!0}crossCheckVertical(o,a,c,h){const p=this.image,g=p.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=o;for(;C>=0&&p.get(a,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&!p.get(a,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=o+1;C<g&&p.get(a,C)&&w[1]<=c;)w[1]++,C++;if(C===g||w[1]>c)return NaN;for(;C<g&&!p.get(a,C)&&w[2]<=c;)w[2]++,C++;if(w[2]>c)return NaN;const T=w[0]+w[1]+w[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(w)?qd.centerFromEnd(w,C):NaN}handlePossibleCenter(o,a,c){const h=o[0]+o[1]+o[2],p=qd.centerFromEnd(o,c),g=this.crossCheckVertical(a,p,2*o[1],h);if(!isNaN(g)){const w=(o[0]+o[1]+o[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(w,g,p))return T.combineEstimate(g,p,w);const C=new xm(p,g,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class ym extends Ce{constructor(o,a,c,h){super(o,a),this.estimatedModuleSize=c,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,a,c){if(Math.abs(a-this.getY())<=o&&Math.abs(c-this.getX())<=o){const h=Math.abs(o-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(o,a,c){const h=this.count+1,p=(this.count*this.getX()+a)/h,g=(this.count*this.getY()+o)/h,w=(this.count*this.estimatedModuleSize+c)/h;return new ym(p,g,w,h)}}class aR{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Or{constructor(o,a){this.image=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const a=o!=null&&o.get(F.TRY_HARDER)!==void 0,c=o!=null&&o.get(F.PURE_BARCODE)!==void 0,h=this.image,p=h.getHeight(),g=h.getWidth();let w=Math.floor(3*p/(4*Or.MAX_MODULES));(w<Or.MIN_SKIP||a)&&(w=Or.MIN_SKIP);let C=!1;const T=new Int32Array(5);for(let L=w-1;L<p&&!C;L+=w){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let U=0;for(let W=0;W<g;W++)if(h.get(W,L))(U&1)===1&&U++,T[U]++;else if(U&1)T[U]++;else if(U===4)if(Or.foundPatternCross(T)){if(this.handlePossibleCenter(T,L,W,c)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>T[2]&&(L+=Z-T[2]-w,W=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;continue}U=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,U=3;else T[++U]++;Or.foundPatternCross(T)&&this.handlePossibleCenter(T,L,g,c)===!0&&(w=T[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const j=this.selectBestPatterns();return Ce.orderBestPatterns(j),new aR(j)}static centerFromEnd(o,a){return a-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let a=0;for(let p=0;p<5;p++){const g=o[p];if(g===0)return!1;a+=g}if(a<7)return!1;const c=a/7,h=c/2;return Math.abs(c-o[0])<h&&Math.abs(c-o[1])<h&&Math.abs(3*c-o[2])<3*h&&Math.abs(c-o[3])<h&&Math.abs(c-o[4])<h}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,a,c,h){const p=this.getCrossCheckStateCount();let g=0;const w=this.image;for(;o>=g&&a>=g&&w.get(a-g,o-g);)p[2]++,g++;if(o<g||a<g)return!1;for(;o>=g&&a>=g&&!w.get(a-g,o-g)&&p[1]<=c;)p[1]++,g++;if(o<g||a<g||p[1]>c)return!1;for(;o>=g&&a>=g&&w.get(a-g,o-g)&&p[0]<=c;)p[0]++,g++;if(p[0]>c)return!1;const C=w.getHeight(),T=w.getWidth();for(g=1;o+g<C&&a+g<T&&w.get(a+g,o+g);)p[2]++,g++;if(o+g>=C||a+g>=T)return!1;for(;o+g<C&&a+g<T&&!w.get(a+g,o+g)&&p[3]<c;)p[3]++,g++;if(o+g>=C||a+g>=T||p[3]>=c)return!1;for(;o+g<C&&a+g<T&&w.get(a+g,o+g)&&p[4]<c;)p[4]++,g++;if(p[4]>=c)return!1;const j=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(j-h)<2*h&&Or.foundPatternCross(p)}crossCheckVertical(o,a,c,h){const p=this.image,g=p.getHeight(),w=this.getCrossCheckStateCount();let C=o;for(;C>=0&&p.get(a,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!p.get(a,C)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&p.get(a,C)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=o+1;C<g&&p.get(a,C);)w[2]++,C++;if(C===g)return NaN;for(;C<g&&!p.get(a,C)&&w[3]<c;)w[3]++,C++;if(C===g||w[3]>=c)return NaN;for(;C<g&&p.get(a,C)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-h)>=2*h?NaN:Or.foundPatternCross(w)?Or.centerFromEnd(w,C):NaN}crossCheckHorizontal(o,a,c,h){const p=this.image,g=p.getWidth(),w=this.getCrossCheckStateCount();let C=o;for(;C>=0&&p.get(C,a);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!p.get(C,a)&&w[1]<=c;)w[1]++,C--;if(C<0||w[1]>c)return NaN;for(;C>=0&&p.get(C,a)&&w[0]<=c;)w[0]++,C--;if(w[0]>c)return NaN;for(C=o+1;C<g&&p.get(C,a);)w[2]++,C++;if(C===g)return NaN;for(;C<g&&!p.get(C,a)&&w[3]<c;)w[3]++,C++;if(C===g||w[3]>=c)return NaN;for(;C<g&&p.get(C,a)&&w[4]<c;)w[4]++,C++;if(w[4]>=c)return NaN;const T=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(T-h)>=h?NaN:Or.foundPatternCross(w)?Or.centerFromEnd(w,C):NaN}handlePossibleCenter(o,a,c,h){const p=o[0]+o[1]+o[2]+o[3]+o[4];let g=Or.centerFromEnd(o,c),w=this.crossCheckVertical(a,Math.floor(g),o[2],p);if(!isNaN(w)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(w),o[2],p),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(w),Math.floor(g),o[2],p)))){const C=p/7;let T=!1;const j=this.possibleCenters;for(let L=0,U=j.length;L<U;L++){const W=j[L];if(W.aboutEquals(C,w,g)){j[L]=W.combineEstimate(w,g,C),T=!0;break}}if(!T){const L=new ym(g,w,C);j.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=Or.CENTER_QUORUM)if(a==null)a=c;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,a=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Or.CENTER_QUORUM&&(o++,a+=g.getEstimatedModuleSize());if(o<3)return!1;const h=a/c;let p=0;for(const g of this.possibleCenters)p+=Math.abs(g.getEstimatedModuleSize()-h);return p<=.05*a}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new V;const a=this.possibleCenters;let c;if(o>3){let h=0,p=0;for(const C of this.possibleCenters){const T=C.getEstimatedModuleSize();h+=T,p+=T*T}c=h/o;let g=Math.sqrt(p/o-c*c);a.sort((C,T)=>{const j=Math.abs(T.getEstimatedModuleSize()-c),L=Math.abs(C.getEstimatedModuleSize()-c);return j<L?-1:j>L?1:0});const w=Math.max(.2*c,g);for(let C=0;C<a.length&&a.length>3;C++){const T=a[C];Math.abs(T.getEstimatedModuleSize()-c)>w&&(a.splice(C,1),C--)}}if(a.length>3){let h=0;for(const p of a)h+=p.getEstimatedModuleSize();c=h/a.length,a.sort((p,g)=>{if(g.getCount()===p.getCount()){const w=Math.abs(g.getEstimatedModuleSize()-c),C=Math.abs(p.getEstimatedModuleSize()-c);return w<C?1:w>C?-1:0}else return g.getCount()-p.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Or.CENTER_QUORUM=2,Or.MIN_SKIP=3,Or.MAX_MODULES=57;class Yc{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(F.NEED_RESULT_POINT_CALLBACK);const c=new Or(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(c)}processFinderPatternInfo(o){const a=o.getTopLeft(),c=o.getTopRight(),h=o.getBottomLeft(),p=this.calculateModuleSize(a,c,h);if(p<1)throw new V("No pattern found in proccess finder.");const g=Yc.computeDimension(a,c,h,p),w=Ue.getProvisionalVersionForDimension(g),C=w.getDimensionForVersion()-7;let T=null;if(w.getAlignmentPatternCenters().length>0){const W=c.getX()-a.getX()+h.getX(),X=c.getY()-a.getY()+h.getY(),Z=1-3/C,te=Math.floor(a.getX()+Z*(W-a.getX())),se=Math.floor(a.getY()+Z*(X-a.getY()));for(let we=4;we<=16;we<<=1)try{T=this.findAlignmentInRegion(p,te,se,we);break}catch(_e){if(!(_e instanceof V))throw _e}}const j=Yc.createTransform(a,c,h,T,g),L=Yc.sampleGrid(this.image,j,g);let U;return T===null?U=[h,a,c]:U=[h,a,c,T],new Dr(L,U)}static createTransform(o,a,c,h,p){const g=p-3.5;let w,C,T,j;return h!==null?(w=h.getX(),C=h.getY(),T=g-3,j=T):(w=a.getX()-o.getX()+c.getX(),C=a.getY()-o.getY()+c.getY(),T=g,j=g),At.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,j,3.5,g,o.getX(),o.getY(),a.getX(),a.getY(),w,C,c.getX(),c.getY())}static sampleGrid(o,a,c){return Qs.getInstance().sampleGridWithTransform(o,c,c,a)}static computeDimension(o,a,c,h){const p=Ae.round(Ce.distance(o,a)/h),g=Ae.round(Ce.distance(o,c)/h);let w=Math.floor((p+g)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new V("Dimensions could be not found.")}return w}calculateModuleSize(o,a,c){return(this.calculateModuleSizeOneWay(o,a)+this.calculateModuleSizeOneWay(o,c))/2}calculateModuleSizeOneWay(o,a){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(c)?h/7:isNaN(h)?c/7:(c+h)/14}sizeOfBlackWhiteBlackRunBothWays(o,a,c,h){let p=this.sizeOfBlackWhiteBlackRun(o,a,c,h),g=1,w=o-(c-o);w<0?(g=o/(o-w),w=0):w>=this.image.getWidth()&&(g=(this.image.getWidth()-1-o)/(w-o),w=this.image.getWidth()-1);let C=Math.floor(a-(h-a)*g);return g=1,C<0?(g=a/(a-C),C=0):C>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(C-a),C=this.image.getHeight()-1),w=Math.floor(o+(w-o)*g),p+=this.sizeOfBlackWhiteBlackRun(o,a,w,C),p-1}sizeOfBlackWhiteBlackRun(o,a,c,h){const p=Math.abs(h-a)>Math.abs(c-o);if(p){let W=o;o=a,a=W,W=c,c=h,h=W}const g=Math.abs(c-o),w=Math.abs(h-a);let C=-g/2;const T=o<c?1:-1,j=a<h?1:-1;let L=0;const U=c+T;for(let W=o,X=a;W!==U;W+=T){const Z=p?X:W,te=p?W:X;if(L===1===this.image.get(Z,te)){if(L===2)return Ae.distance(W,X,o,a);L++}if(C+=w,C>0){if(X===h)break;X+=j,C-=g}}return L===2?Ae.distance(c+T,h,o,a):NaN}findAlignmentInRegion(o,a,c,h){const p=Math.floor(h*o),g=Math.max(0,a-p),w=Math.min(this.image.getWidth()-1,a+p);if(w-g<o*3)throw new V("Alignment top exceeds estimated module size.");const C=Math.max(0,c-p),T=Math.min(this.image.getHeight()-1,c+p);if(T-C<o*3)throw new V("Alignment bottom exceeds estimated module size.");return new qd(this.image,g,C,w-g,T-C,o,this.resultPointCallback).find()}}class Ji{constructor(){this.decoder=new oR}getDecoder(){return this.decoder}decode(o,a){let c,h;if(a!=null&&a.get(F.PURE_BARCODE)!==void 0){const C=Ji.extractPureBits(o.getBlackMatrix());c=this.decoder.decodeBitMatrix(C,a),h=Ji.NO_POINTS}else{const C=new Yc(o.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(C.getBits(),a),h=C.getPoints()}c.getOther()instanceof uw&&c.getOther().applyMirroredCorrection(h);const p=new ce(c.getText(),c.getRawBytes(),void 0,h,xe.QR_CODE,void 0),g=c.getByteSegments();g!==null&&p.putMetadata(Pe.BYTE_SEGMENTS,g);const w=c.getECLevel();return w!==null&&p.putMetadata(Pe.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(p.putMetadata(Pe.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),p.putMetadata(Pe.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),p}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(a===null||c===null)throw new V;const h=this.moduleSize(a,o);let p=a[1],g=c[1],w=a[0],C=c[0];if(w>=C||p>=g)throw new V;if(g-p!==C-w&&(C=w+(g-p),C>=o.getWidth()))throw new V;const T=Math.round((C-w+1)/h),j=Math.round((g-p+1)/h);if(T<=0||j<=0)throw new V;if(j!==T)throw new V;const L=Math.floor(h/2);p+=L,w+=L;const U=w+Math.floor((T-1)*h)-C;if(U>0){if(U>L)throw new V;w-=U}const W=p+Math.floor((j-1)*h)-g;if(W>0){if(W>L)throw new V;p-=W}const X=new z(T,j);for(let Z=0;Z<j;Z++){const te=p+Math.floor(Z*h);for(let se=0;se<T;se++)o.get(w+Math.floor(se*h),te)&&X.set(se,Z)}return X}static moduleSize(o,a){const c=a.getHeight(),h=a.getWidth();let p=o[0],g=o[1],w=!0,C=0;for(;p<h&&g<c;){if(w!==a.get(p,g)){if(++C===5)break;w=!w}p++,g++}if(p===h||g===c)throw new V;return(p-o[0])/7}}Ji.NO_POINTS=new Array;class Ye{PDF417Common(){}static getBitCountSum(o){return Ae.sum(o)}static toIntArray(o){if(o==null||!o.length)return Ye.EMPTY_INT_ARRAY;const a=new Int32Array(o.length);let c=0;for(const h of o)a[c++]=h;return a}static getCodeword(o){const a=N.binarySearch(Ye.SYMBOL_TABLE,o&262143);return a<0?-1:(Ye.CODEWORD_TABLE[a]-1)%Ye.NUMBER_OF_CODEWORDS}}Ye.NUMBER_OF_CODEWORDS=929,Ye.MAX_CODEWORDS_IN_BARCODE=Ye.NUMBER_OF_CODEWORDS-1,Ye.MIN_ROWS_IN_BARCODE=3,Ye.MAX_ROWS_IN_BARCODE=90,Ye.MODULES_IN_CODEWORD=17,Ye.MODULES_IN_STOP_PATTERN=18,Ye.BARS_IN_MODULE=8,Ye.EMPTY_INT_ARRAY=new Int32Array([]),Ye.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ye.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class lR{constructor(o,a){this.bits=o,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(o,a,c){let h=o.getBlackMatrix(),p=nt.detect(c,h);return p.length||(h=h.clone(),h.rotate180(),p=nt.detect(c,h)),new lR(h,p)}static detect(o,a){const c=new Array;let h=0,p=0,g=!1;for(;h<a.getHeight();){const w=nt.findVertices(a,h,p);if(w[0]==null&&w[3]==null){if(!g)break;g=!1,p=0;for(const C of c)C[1]!=null&&(h=Math.trunc(Math.max(h,C[1].getY()))),C[3]!=null&&(h=Math.max(h,Math.trunc(C[3].getY())));h+=nt.ROW_STEP;continue}if(g=!0,c.push(w),!o)break;w[2]!=null?(p=Math.trunc(w[2].getX()),h=Math.trunc(w[2].getY())):(p=Math.trunc(w[4].getX()),h=Math.trunc(w[4].getY()))}return c}static findVertices(o,a,c){const h=o.getHeight(),p=o.getWidth(),g=new Array(8);return nt.copyToResult(g,nt.findRowsWithPattern(o,h,p,a,c,nt.START_PATTERN),nt.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),nt.copyToResult(g,nt.findRowsWithPattern(o,h,p,a,c,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),g}static copyToResult(o,a,c){for(let h=0;h<c.length;h++)o[c[h]]=a[h]}static findRowsWithPattern(o,a,c,h,p,g){const w=new Array(4);let C=!1;const T=new Int32Array(g.length);for(;h<a;h+=nt.ROW_STEP){let L=nt.findGuardPattern(o,p,h,c,!1,g,T);if(L!=null){for(;h>0;){const U=nt.findGuardPattern(o,p,--h,c,!1,g,T);if(U!=null)L=U;else{h++;break}}w[0]=new Ce(L[0],h),w[1]=new Ce(L[1],h),C=!0;break}}let j=h+1;if(C){let L=0,U=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;j<a;j++){const W=nt.findGuardPattern(o,U[0],j,c,!1,g,T);if(W!=null&&Math.abs(U[0]-W[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(U[1]-W[1])<nt.MAX_PATTERN_DRIFT)U=W,L=0;else{if(L>nt.SKIPPED_ROW_COUNT_MAX)break;L++}}j-=L+1,w[2]=new Ce(U[0],j),w[3]=new Ce(U[1],j)}return j-h<nt.BARCODE_MIN_HEIGHT&&N.fill(w,null),w}static findGuardPattern(o,a,c,h,p,g,w){N.fillWithin(w,0,w.length,0);let C=a,T=0;for(;o.get(C,c)&&C>0&&T++<nt.MAX_PIXEL_DRIFT;)C--;let j=C,L=0,U=g.length;for(let W=p;j<h;j++)if(o.get(j,c)!==W)w[L]++;else{if(L===U-1){if(nt.patternMatchVariance(w,g,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([C,j]);C+=w[0]+w[1],_.arraycopy(w,2,w,0,L-1),w[L-1]=0,w[L]=0,L--}else L++;w[L]=1,W=!W}return L===U-1&&nt.patternMatchVariance(w,g,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([C,j-1]):null}static patternMatchVariance(o,a,c){let h=o.length,p=0,g=0;for(let T=0;T<h;T++)p+=o[T],g+=a[T];if(p<g)return 1/0;let w=p/g;c*=w;let C=0;for(let T=0;T<h;T++){let j=o[T],L=a[T]*w,U=j>L?j-L:L-j;if(U>c)return 1/0;C+=U}return C/p}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class Br{constructor(o,a){if(a.length===0)throw new y;this.field=o;let c=a.length;if(c>1&&a[0]===0){let h=1;for(;h<c&&a[h]===0;)h++;h===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-h),_.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let h=0;for(let p of this.coefficients)h=this.field.add(h,p);return h}let a=this.coefficients[0],c=this.coefficients.length;for(let h=1;h<c;h++)a=this.field.add(this.field.multiply(o,a),this.coefficients[h]);return a}add(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let a=this.coefficients,c=o.coefficients;if(a.length>c.length){let g=a;a=c,c=g}let h=new Int32Array(c.length),p=c.length-a.length;_.arraycopy(c,0,h,0,p);for(let g=p;g<c.length;g++)h[g]=this.field.add(a[g-p],c[g]);return new Br(this.field,h)}subtract(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Br?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Br(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,h=o.coefficients,p=h.length,g=new Int32Array(c+p-1);for(let w=0;w<c;w++){let C=a[w];for(let T=0;T<p;T++)g[w+T]=this.field.add(g[w+T],this.field.multiply(C,h[T]))}return new Br(this.field,g)}negative(){let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new Br(this.field,a)}multiplyScalar(o){if(o===0)return new Br(this.field,new Int32Array([0]));if(o===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],o);return new Br(this.field,c)}multiplyByMonomial(o,a){if(o<0)throw new y;if(a===0)return new Br(this.field,new Int32Array([0]));let c=this.coefficients.length,h=new Int32Array(c+o);for(let p=0;p<c;p++)h[p]=this.field.multiply(this.coefficients[p],a);return new Br(this.field,h)}toString(){let o=new ee;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(o.append(" - "),c=-c):o.length()>0&&o.append(" + "),(a===0||c!==1)&&o.append(c),a!==0&&(a===1?o.append("x"):(o.append("x^"),o.append(a))))}return o.toString()}}class cR{add(o,a){return(o+a)%this.modulus}subtract(o,a){return(this.modulus+o-a)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}inverse(o){if(o===0)throw new ke;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,a){return o===0||a===0?0:this.expTable[(this.logTable[o]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class wm extends cR{constructor(o,a){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let c=1;for(let h=0;h<o;h++)this.expTable[h]=c,c=c*a%o;for(let h=0;h<o-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Br(this,new Int32Array([0])),this.one=new Br(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,a){if(o<0)throw new y;if(a===0)return this.zero;let c=new Int32Array(o+1);return c[0]=a,new Br(this,c)}}wm.PDF417_GF=new wm(Ye.NUMBER_OF_CODEWORDS,3);class dw{constructor(){this.field=wm.PDF417_GF}decode(o,a,c){let h=new Br(this.field,o),p=new Int32Array(a),g=!1;for(let X=a;X>0;X--){let Z=h.evaluateAt(this.field.exp(X));p[a-X]=Z,Z!==0&&(g=!0)}if(!g)return 0;let w=this.field.getOne();if(c!=null)for(const X of c){let Z=this.field.exp(o.length-1-X),te=new Br(this.field,new Int32Array([this.field.subtract(0,Z),1]));w=w.multiply(te)}let C=new Br(this.field,p),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),C,a),j=T[0],L=T[1],U=this.findErrorLocations(j),W=this.findErrorMagnitudes(L,j,U);for(let X=0;X<U.length;X++){let Z=o.length-1-this.field.log(U[X]);if(Z<0)throw b.getChecksumInstance();o[Z]=this.field.subtract(o[Z],W[X])}return U.length}runEuclideanAlgorithm(o,a,c){if(o.getDegree()<a.getDegree()){let U=o;o=a,a=U}let h=o,p=a,g=this.field.getZero(),w=this.field.getOne();for(;p.getDegree()>=Math.round(c/2);){let U=h,W=g;if(h=p,g=w,h.isZero())throw b.getChecksumInstance();p=U;let X=this.field.getZero(),Z=h.getCoefficient(h.getDegree()),te=this.field.inverse(Z);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){let se=p.getDegree()-h.getDegree(),we=this.field.multiply(p.getCoefficient(p.getDegree()),te);X=X.add(this.field.buildMonomial(se,we)),p=p.subtract(h.multiplyByMonomial(se,we))}w=X.multiply(g).subtract(W).negative()}let C=w.getCoefficient(0);if(C===0)throw b.getChecksumInstance();let T=this.field.inverse(C),j=w.multiply(T),L=p.multiply(T);return[j,L]}findErrorLocations(o){let a=o.getDegree(),c=new Int32Array(a),h=0;for(let p=1;p<this.field.getSize()&&h<a;p++)o.evaluateAt(p)===0&&(c[h]=this.field.inverse(p),h++);if(h!==a)throw b.getChecksumInstance();return c}findErrorMagnitudes(o,a,c){let h=a.getDegree(),p=new Int32Array(h);for(let T=1;T<=h;T++)p[h-T]=this.field.multiply(T,a.getCoefficient(T));let g=new Br(this.field,p),w=c.length,C=new Int32Array(w);for(let T=0;T<w;T++){let j=this.field.inverse(c[T]),L=this.field.subtract(0,o.evaluateAt(j)),U=this.field.inverse(g.evaluateAt(j));C[T]=this.field.multiply(L,U)}return C}}class oa{constructor(o,a,c,h,p){o instanceof oa?this.constructor_2(o):this.constructor_1(o,a,c,h,p)}constructor_1(o,a,c,h,p){const g=a==null||c==null,w=h==null||p==null;if(g&&w)throw new V;g?(a=new Ce(0,h.getY()),c=new Ce(0,p.getY())):w&&(h=new Ce(o.getWidth()-1,a.getY()),p=new Ce(o.getWidth()-1,c.getY())),this.image=o,this.topLeft=a,this.bottomLeft=c,this.topRight=h,this.bottomRight=p,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(h.getX(),p.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(c.getY(),p.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,a){return o==null?a:a==null?o:new oa(o.image,o.topLeft,o.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(o,a,c){let h=this.topLeft,p=this.bottomLeft,g=this.topRight,w=this.bottomRight;if(o>0){let C=c?this.topLeft:this.topRight,T=Math.trunc(C.getY()-o);T<0&&(T=0);let j=new Ce(C.getX(),T);c?h=j:g=j}if(a>0){let C=c?this.bottomLeft:this.bottomRight,T=Math.trunc(C.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let j=new Ce(C.getX(),T);c?p=j:w=j}return new oa(this.image,h,p,g,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class uR{constructor(o,a,c,h){this.columnCount=o,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qc{constructor(){this.buffer=""}static form(o,a){let c=-1;function h(g,w,C,T,j,L){if(g==="%%")return"%";if(a[++c]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let U=j?parseInt(j.substr(1)):void 0,W;switch(L){case"s":W=a[c];break;case"c":W=a[c][0];break;case"f":W=parseFloat(a[c]).toFixed(g);break;case"p":W=parseFloat(a[c]).toPrecision(g);break;case"e":W=parseFloat(a[c]).toExponential(g);break;case"x":W=parseInt(a[c]).toString(U||16);break;case"d":W=parseFloat(parseInt(a[c],U||10).toPrecision(g)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(U);let X=parseInt(C),Z=C&&C[0]+""=="0"?"0":" ";for(;W.length<X;)W=w!==void 0?W+Z:Z+W;return W}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(p,h)}format(o,...a){this.buffer+=qc.form(o,a)}toString(){return this.buffer}}class Xc{constructor(o){this.boundingBox=new oa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let a=this.getCodeword(o);if(a!=null)return a;for(let c=1;c<Xc.MAX_NEARBY_DISTANCE;c++){let h=this.imageRowToCodewordIndex(o)-c;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(o)+c,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,a){this.codewords[this.imageRowToCodewordIndex(o)]=a}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new qc;let a=0;for(const c of this.codewords){if(c==null){o.format("%3d:    |   %n",a++);continue}o.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue())}return o.toString()}}Xc.MAX_NEARBY_DISTANCE=5;class Kc{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let a=this.values.get(o);a==null&&(a=0),a++,this.values.set(o,a)}getValue(){let o=-1,a=new Array;for(const[c,h]of this.values.entries()){const p={getKey:()=>c,getValue:()=>h};p.getValue()>o?(o=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===o&&a.push(p.getKey())}return Ye.toIntArray(a)}getConfidence(o){return this.values.get(o)}}class hw extends Xc{constructor(o,a){super(o),this._isLeft=a}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,o);let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),p=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.imageRowToCodewordIndex(Math.trunc(p.getY())),C=-1,T=1,j=0;for(let L=g;L<w;L++){if(a[L]==null)continue;let U=a[L],W=U.getRowNumber()-C;if(W===0)j++;else if(W===1)T=Math.max(T,j),j=1,C=U.getRowNumber();else if(W<0||U.getRowNumber()>=o.getRowCount()||W>L)a[L]=null;else{let X;T>2?X=(T-2)*W:X=W;let Z=X>=L;for(let te=1;te<=X&&!Z;te++)Z=a[L-te]!=null;Z?a[L]=null:(C=U.getRowNumber(),j=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let a=new Int32Array(o.getRowCount());for(let c of this.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(o){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.getCodewords(),C=-1;for(let T=p;T<g;T++){if(w[T]==null)continue;let j=w[T];j.setRowNumberAsRowIndicatorColumn();let L=j.getRowNumber()-C;L===0||(L===1?C=j.getRowNumber():j.getRowNumber()>=o.getRowCount()?w[T]=null:C=j.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),a=new Kc,c=new Kc,h=new Kc,p=new Kc;for(let w of o){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,T=w.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:c.setValue(C*3+1);break;case 1:p.setValue(C/3),h.setValue(C%3);break;case 2:a.setValue(C+1);break}}if(a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||p.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+h.getValue()[0]<Ye.MIN_ROWS_IN_BARCODE||c.getValue()[0]+h.getValue()[0]>Ye.MAX_ROWS_IN_BARCODE)return null;let g=new uR(a.getValue()[0],c.getValue()[0],h.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(o,g),g}removeIncorrectCodewords(o,a){for(let c=0;c<o.length;c++){let h=o[c];if(o[c]==null)continue;let p=h.getValue()%30,g=h.getRowNumber();if(g>a.getRowCount()){o[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:p*3+1!==a.getRowCountUpperPart()&&(o[c]=null);break;case 1:(Math.trunc(p/3)!==a.getErrorCorrectionLevel()||p%3!==a.getRowCountLowerPart())&&(o[c]=null);break;case 2:p+1!==a.getColumnCount()&&(o[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qc{constructor(o,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Ye.MAX_CODEWORDS_IN_BARCODE,a;do a=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let h=0;h<c.length;h++)c[h]!=null&&(c[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,c))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++)if(o[c]!=null&&a[c]!=null&&o[c].getRowNumber()===a[c].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let p=this.detectionResultColumns[h].getCodewords()[c];p!=null&&(p.setRowNumber(o[c].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let h=a[c].getRowNumber(),p=0;for(let g=this.barcodeColumnCount+1;g>0&&p<this.ADJUST_ROW_NUMBER_SKIP;g--){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=Qc.adjustRowNumberIfValid(h,p,w),w.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let h=a[c].getRowNumber(),p=0;for(let g=1;g<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;g++){let w=this.detectionResultColumns[g].getCodewords()[c];w!=null&&(p=Qc.adjustRowNumberIfValid(h,p,w),w.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(o)?(c.setRowNumber(o),a=0):++a),a}adjustRowNumbers(o,a,c){if(!this.detectionResultColumns[o-1])return;let h=c[a],p=this.detectionResultColumns[o-1].getCodewords(),g=p;this.detectionResultColumns[o+1]!=null&&(g=this.detectionResultColumns[o+1].getCodewords());let w=new Array(14);w[2]=p[a],w[3]=g[a],a>0&&(w[0]=c[a-1],w[4]=p[a-1],w[5]=g[a-1]),a>1&&(w[8]=c[a-2],w[10]=p[a-2],w[11]=g[a-2]),a<c.length-1&&(w[1]=c[a+1],w[6]=p[a+1],w[7]=g[a+1]),a<c.length-2&&(w[9]=c[a+2],w[12]=p[a+2],w[13]=g[a+2]);for(let C of w)if(Qc.adjustRowNumber(h,C))return}static adjustRowNumber(o,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===o.getBucket()?(o.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,a){this.detectionResultColumns[o]=a}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new qc;for(let c=0;c<o.getCodewords().length;c++){a.format("CW %3d:",c);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let p=this.detectionResultColumns[h].getCodewords()[c];if(p==null){a.format("    |   ");continue}a.format(" %3d|%3d",p.getRowNumber(),p.getValue())}a.format("%n")}return a.toString()}}class Zc{constructor(o,a,c,h){this.rowNumber=Zc.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Zc.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Zc.BARCODE_ROW_UNKNOWN=-1;class vn{static initialize(){for(let o=0;o<Ye.SYMBOL_TABLE.length;o++){let a=Ye.SYMBOL_TABLE[o],c=a&1;for(let h=0;h<Ye.BARS_IN_MODULE;h++){let p=0;for(;(a&1)===c;)p+=1,a>>=1;c=a&1,vn.RATIOS_TABLE[o]||(vn.RATIOS_TABLE[o]=new Array(Ye.BARS_IN_MODULE)),vn.RATIOS_TABLE[o][Ye.BARS_IN_MODULE-h-1]=Math.fround(p/Ye.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let a=vn.getDecodedCodewordValue(vn.sampleBitCounts(o));return a!==-1?a:vn.getClosestDecodedValue(o)}static sampleBitCounts(o){let a=Ae.sum(o),c=new Int32Array(Ye.BARS_IN_MODULE),h=0,p=0;for(let g=0;g<Ye.MODULES_IN_CODEWORD;g++){let w=a/(2*Ye.MODULES_IN_CODEWORD)+g*a/Ye.MODULES_IN_CODEWORD;p+o[h]<=w&&(p+=o[h],h++),c[h]++}return c}static getDecodedCodewordValue(o){let a=vn.getBitValue(o);return Ye.getCodeword(a)===-1?-1:a}static getBitValue(o){let a=0;for(let c=0;c<o.length;c++)for(let h=0;h<o[c];h++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(o){let a=Ae.sum(o),c=new Array(Ye.BARS_IN_MODULE);if(a>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(o[g]/a);let h=bt.MAX_VALUE,p=-1;this.bSymbolTableReady||vn.initialize();for(let g=0;g<vn.RATIOS_TABLE.length;g++){let w=0,C=vn.RATIOS_TABLE[g];for(let T=0;T<Ye.BARS_IN_MODULE;T++){let j=Math.fround(C[T]-c[T]);if(w+=Math.fround(j*j),w>=h)break}w<h&&(h=w,p=Ye.SYMBOL_TABLE[g])}return p}}vn.bSymbolTableReady=!1,vn.RATIOS_TABLE=new Array(Ye.SYMBOL_TABLE.length).map(D=>new Array(Ye.BARS_IN_MODULE));class fw{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class mw{static parseLong(o,a=void 0){return parseInt(o,a)}}class pw extends f{}pw.kind="NullPointerException";class dR{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,a,c){if(o==null)throw new pw;if(a<0||a>o.length||c<0||a+c>o.length||a+c<0)throw new I;if(c===0)return;for(let h=0;h<c;h++)this.write(o[a+h])}flush(){}close(){}}class hR extends f{}class fR extends dR{constructor(o=32){if(super(),this.count=0,o<0)throw new y("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let c=this.buf.length<<1;if(c-o<0&&(c=o),c<0){if(o<0)throw new hR;c=A.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,c)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,a,c){if(a<0||a>o.length||c<0||a+c-o.length>0)throw new I;this.ensureCapacity(this.count+c),_.arraycopy(o,a,this.buf,this.count,c),this.count+=c}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Nt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nt||(Nt={}));function gw(){if(typeof window<"u")return window.BigInt||null;if(typeof tu<"u")return tu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xd;function eo(D){if(typeof Xd>"u"&&(Xd=gw()),Xd===null)throw new Error("BigInt is not supported!");return Xd(D)}function mR(){let D=[];D[0]=eo(1);let o=eo(900);D[1]=o;for(let a=2;a<16;a++)D[a]=D[a-1]*o;return D}class ne{static decode(o,a){let c=new ee(""),h=M.ISO8859_1;c.enableDecoding(h);let p=1,g=o[p++],w=new fw;for(;p<o[0];){switch(g){case ne.TEXT_COMPACTION_MODE_LATCH:p=ne.textCompaction(o,p,c);break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:p=ne.byteCompaction(g,o,h,p,c);break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[p++]);break;case ne.NUMERIC_COMPACTION_MODE_LATCH:p=ne.numericCompaction(o,p,c);break;case ne.ECI_CHARSET:M.getCharacterSetECIByValue(o[p++]);break;case ne.ECI_GENERAL_PURPOSE:p+=2;break;case ne.ECI_USER_DEFINED:p++;break;case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=ne.decodeMacroBlock(o,p,w);break;case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:throw new B;default:p--,p=ne.textCompaction(o,p,c);break}if(p<o.length)g=o[p++];else throw B.getFormatInstance()}if(c.length()===0)throw B.getFormatInstance();let C=new Xe(null,c.toString(),null,a);return C.setOther(w),C}static decodeMacroBlock(o,a,c){if(a+ne.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw B.getFormatInstance();let h=new Int32Array(ne.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<ne.NUMBER_OF_SEQUENCE_CODEWORDS;w++,a++)h[w]=o[a];c.setSegmentIndex(A.parseInt(ne.decodeBase900toBase10(h,ne.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new ee;a=ne.textCompaction(o,a,p),c.setFileId(p.toString());let g=-1;for(o[a]===ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<o[0];)switch(o[a]){case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,o[a]){case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new ee;a=ne.textCompaction(o,a+1,w),c.setFileName(w.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new ee;a=ne.textCompaction(o,a+1,C),c.setSender(C.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new ee;a=ne.textCompaction(o,a+1,T),c.setAddressee(T.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let j=new ee;a=ne.numericCompaction(o,a+1,j),c.setSegmentCount(A.parseInt(j.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new ee;a=ne.numericCompaction(o,a+1,L),c.setTimestamp(mw.parseLong(L.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let U=new ee;a=ne.numericCompaction(o,a+1,U),c.setChecksum(A.parseInt(U.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new ee;a=ne.numericCompaction(o,a+1,W),c.setFileSize(mw.parseLong(W.toString()));break;default:throw B.getFormatInstance()}break;case ne.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(g!==-1){let w=a-g;c.isLastSegment()&&w--,c.setOptionalData(N.copyOfRange(o,g,g+w))}return a}static textCompaction(o,a,c){let h=new Int32Array((o[0]-a)*2),p=new Int32Array((o[0]-a)*2),g=0,w=!1;for(;a<o[0]&&!w;){let C=o[a++];if(C<ne.TEXT_COMPACTION_MODE_LATCH)h[g]=C/30,h[g+1]=C%30,g+=2;else switch(C){case ne.TEXT_COMPACTION_MODE_LATCH:h[g++]=ne.TEXT_COMPACTION_MODE_LATCH;break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,w=!0;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=o[a++],p[g]=C,g++;break}}return ne.decodeTextCompaction(h,p,g,c),a}static decodeTextCompaction(o,a,c,h){let p=Nt.ALPHA,g=Nt.ALPHA,w=0;for(;w<c;){let C=o[w],T="";switch(p){case Nt.ALPHA:if(C<26)T=String.fromCharCode(65+C);else switch(C){case 26:T=" ";break;case ne.LL:p=Nt.LOWER;break;case ne.ML:p=Nt.MIXED;break;case ne.PS:g=p,p=Nt.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break;case Nt.LOWER:if(C<26)T=String.fromCharCode(97+C);else switch(C){case 26:T=" ";break;case ne.AS:g=p,p=Nt.ALPHA_SHIFT;break;case ne.ML:p=Nt.MIXED;break;case ne.PS:g=p,p=Nt.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break;case Nt.MIXED:if(C<ne.PL)T=ne.MIXED_CHARS[C];else switch(C){case ne.PL:p=Nt.PUNCT;break;case 26:T=" ";break;case ne.LL:p=Nt.LOWER;break;case ne.AL:p=Nt.ALPHA;break;case ne.PS:g=p,p=Nt.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break;case Nt.PUNCT:if(C<ne.PAL)T=ne.PUNCT_CHARS[C];else switch(C){case ne.PAL:p=Nt.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break;case Nt.ALPHA_SHIFT:if(p=g,C<26)T=String.fromCharCode(65+C);else switch(C){case 26:T=" ";break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break;case Nt.PUNCT_SHIFT:if(p=g,C<ne.PAL)T=ne.PUNCT_CHARS[C];else switch(C){case ne.PAL:p=Nt.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case ne.TEXT_COMPACTION_MODE_LATCH:p=Nt.ALPHA;break}break}T!==""&&h.append(T),w++}}static byteCompaction(o,a,c,h,p){let g=new fR,w=0,C=0,T=!1;switch(o){case ne.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),L=a[h++];for(;h<a[0]&&!T;)switch(j[w++]=L,C=900*C+L,L=a[h++],L){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(w%5===0&&w>0){for(let U=0;U<6;++U)g.write(Number(eo(C)>>eo(8*(5-U))));C=0,w=0}break}h===a[0]&&L<ne.TEXT_COMPACTION_MODE_LATCH&&(j[w++]=L);for(let U=0;U<w;U++)g.write(j[U]);break;case ne.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!T;){let U=a[h++];if(U<ne.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+U;else switch(U){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(w%5===0&&w>0){for(let W=0;W<6;++W)g.write(Number(eo(C)>>eo(8*(5-W))));C=0,w=0}}break}return p.append(G.decode(g.toByteArray(),c)),h}static numericCompaction(o,a,c){let h=0,p=!1,g=new Int32Array(ne.MAX_NUMERIC_CODEWORDS);for(;a<o[0]&&!p;){let w=o[a++];if(a===o[0]&&(p=!0),w<ne.TEXT_COMPACTION_MODE_LATCH)g[h]=w,h++;else switch(w){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,p=!0;break}(h%ne.MAX_NUMERIC_CODEWORDS===0||w===ne.NUMERIC_COMPACTION_MODE_LATCH||p)&&h>0&&(c.append(ne.decodeBase900toBase10(g,h)),h=0)}return a}static decodeBase900toBase10(o,a){let c=eo(0);for(let p=0;p<a;p++)c+=ne.EXP900[a-p-1]*eo(o[p]);let h=c.toString();if(h.charAt(0)!=="1")throw new B;return h.substring(1)}}ne.TEXT_COMPACTION_MODE_LATCH=900,ne.BYTE_COMPACTION_MODE_LATCH=901,ne.NUMERIC_COMPACTION_MODE_LATCH=902,ne.BYTE_COMPACTION_MODE_LATCH_6=924,ne.ECI_USER_DEFINED=925,ne.ECI_GENERAL_PURPOSE=926,ne.ECI_CHARSET=927,ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ne.MACRO_PDF417_TERMINATOR=922,ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ne.MAX_NUMERIC_CODEWORDS=15,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ne.PL=25,ne.LL=27,ne.AS=27,ne.ML=28,ne.AL=28,ne.PS=29,ne.PAL=29,ne.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ne.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ne.EXP900=gw()?mR():[],ne.NUMBER_OF_SEQUENCE_CODEWORDS=2;class st{constructor(){}static decode(o,a,c,h,p,g,w){let C=new oa(o,a,c,h,p),T=null,j=null,L;for(let X=!0;;X=!1){if(a!=null&&(T=st.getRowIndicatorColumn(o,C,a,!0,g,w)),h!=null&&(j=st.getRowIndicatorColumn(o,C,h,!1,g,w)),L=st.merge(T,j),L==null)throw V.getNotFoundInstance();let Z=L.getBoundingBox();if(X&&Z!=null&&(Z.getMinY()<C.getMinY()||Z.getMaxY()>C.getMaxY()))C=Z;else break}L.setBoundingBox(C);let U=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,T),L.setDetectionResultColumn(U,j);let W=T!=null;for(let X=1;X<=U;X++){let Z=W?X:U-X;if(L.getDetectionResultColumn(Z)!==void 0)continue;let te;Z===0||Z===U?te=new hw(C,Z===0):te=new Xc(C),L.setDetectionResultColumn(Z,te);let se=-1,we=se;for(let _e=C.getMinY();_e<=C.getMaxY();_e++){if(se=st.getStartColumn(L,Z,_e,W),se<0||se>C.getMaxX()){if(we===-1)continue;se=we}let ge=st.detectCodeword(o,C.getMinX(),C.getMaxX(),W,se,_e,g,w);ge!=null&&(te.setCodeword(_e,ge),we=se,g=Math.min(g,ge.getWidth()),w=Math.max(w,ge.getWidth()))}}return st.createDecoderResult(L)}static merge(o,a){if(o==null&&a==null)return null;let c=st.getBarcodeMetadata(o,a);if(c==null)return null;let h=oa.merge(st.adjustBoundingBox(o),st.adjustBoundingBox(a));return new Qc(c,h)}static adjustBoundingBox(o){if(o==null)return null;let a=o.getRowHeights();if(a==null)return null;let c=st.getMax(a),h=0;for(let w of a)if(h+=c-w,w>0)break;let p=o.getCodewords();for(let w=0;h>0&&p[w]==null;w++)h--;let g=0;for(let w=a.length-1;w>=0&&(g+=c-a[w],!(a[w]>0));w--);for(let w=p.length-1;g>0&&p[w]==null;w--)g--;return o.getBoundingBox().addMissingRows(h,g,o.isLeft())}static getMax(o){let a=-1;for(let c of o)a=Math.max(a,c);return a}static getBarcodeMetadata(o,a){let c;if(o==null||(c=o.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==h.getColumnCount()&&c.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&c.getRowCount()!==h.getRowCount()?null:c}static getRowIndicatorColumn(o,a,c,h,p,g){let w=new hw(a,h);for(let C=0;C<2;C++){let T=C===0?1:-1,j=Math.trunc(Math.trunc(c.getX()));for(let L=Math.trunc(Math.trunc(c.getY()));L<=a.getMaxY()&&L>=a.getMinY();L+=T){let U=st.detectCodeword(o,0,o.getWidth(),h,j,L,p,g);U!=null&&(w.setCodeword(L,U),h?j=U.getStartX():j=U.getEndX())}}return w}static adjustCodewordCount(o,a){let c=a[0][1],h=c.getValue(),p=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-st.getNumberOfECCodeWords(o.getBarcodeECLevel());if(h.length===0){if(p<1||p>Ye.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();c.setValue(p)}else h[0]!==p&&c.setValue(p)}static createDecoderResult(o){let a=st.createBarcodeMatrix(o);st.adjustCodewordCount(o,a);let c=new Array,h=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),p=[],g=new Array;for(let C=0;C<o.getBarcodeRowCount();C++)for(let T=0;T<o.getBarcodeColumnCount();T++){let j=a[C][T+1].getValue(),L=C*o.getBarcodeColumnCount()+T;j.length===0?c.push(L):j.length===1?h[L]=j[0]:(g.push(L),p.push(j))}let w=new Array(p.length);for(let C=0;C<w.length;C++)w[C]=p[C];return st.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),h,Ye.toIntArray(c),Ye.toIntArray(g),w)}static createDecoderResultFromAmbiguousValues(o,a,c,h,p){let g=new Int32Array(h.length),w=100;for(;w-- >0;){for(let C=0;C<g.length;C++)a[h[C]]=p[C][g[C]];try{return st.decodeCodewords(a,o,c)}catch(C){if(!(C instanceof b))throw C}if(g.length===0)throw b.getChecksumInstance();for(let C=0;C<g.length;C++)if(g[C]<p[C].length-1){g[C]++;break}else if(g[C]=0,C===g.length-1)throw b.getChecksumInstance()}throw b.getChecksumInstance()}static createBarcodeMatrix(o){let a=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let p=0;p<a[h].length;p++)a[h][p]=new Kc;let c=0;for(let h of o.getDetectionResultColumns()){if(h!=null){for(let p of h.getCodewords())if(p!=null){let g=p.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][c].setValue(p.getValue())}}}c++}return a}static isValidBarcodeColumn(o,a){return a>=0&&a<=o.getBarcodeColumnCount()+1}static getStartColumn(o,a,c,h){let p=h?1:-1,g=null;if(st.isValidBarcodeColumn(o,a-p)&&(g=o.getDetectionResultColumn(a-p).getCodeword(c)),g!=null)return h?g.getEndX():g.getStartX();if(g=o.getDetectionResultColumn(a).getCodewordNearby(c),g!=null)return h?g.getStartX():g.getEndX();if(st.isValidBarcodeColumn(o,a-p)&&(g=o.getDetectionResultColumn(a-p).getCodewordNearby(c)),g!=null)return h?g.getEndX():g.getStartX();let w=0;for(;st.isValidBarcodeColumn(o,a-p);){a-=p;for(let C of o.getDetectionResultColumn(a).getCodewords())if(C!=null)return(h?C.getEndX():C.getStartX())+p*w*(C.getEndX()-C.getStartX());w++}return h?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,a,c,h,p,g,w,C){p=st.adjustCodewordStartColumn(o,a,c,h,p,g);let T=st.getModuleBitCount(o,a,c,h,p,g);if(T==null)return null;let j,L=Ae.sum(T);if(h)j=p+L;else{for(let X=0;X<T.length/2;X++){let Z=T[X];T[X]=T[T.length-1-X],T[T.length-1-X]=Z}j=p,p=j-L}if(!st.checkCodewordSkew(L,w,C))return null;let U=vn.getDecodedValue(T),W=Ye.getCodeword(U);return W===-1?null:new Zc(p,j,st.getCodewordBucketNumber(U),W)}static getModuleBitCount(o,a,c,h,p,g){let w=p,C=new Int32Array(8),T=0,j=h?1:-1,L=h;for(;(h?w<c:w>=a)&&T<C.length;)o.get(w,g)===L?(C[T]++,w+=j):(T++,L=!L);return T===C.length||w===(h?c:a)&&T===C.length-1?C:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,a,c,h,p,g){let w=p,C=h?-1:1;for(let T=0;T<2;T++){for(;(h?w>=a:w<c)&&h===o.get(w,g);){if(Math.abs(p-w)>st.CODEWORD_SKEW_SIZE)return p;w+=C}C=-C,h=!h}return w}static checkCodewordSkew(o,a,c){return a-st.CODEWORD_SKEW_SIZE<=o&&o<=c+st.CODEWORD_SKEW_SIZE}static decodeCodewords(o,a,c){if(o.length===0)throw B.getFormatInstance();let h=1<<a+1,p=st.correctErrors(o,c,h);st.verifyCodewordCount(o,h);let g=ne.decode(o,""+a);return g.setErrorsCorrected(p),g.setErasures(c.length),g}static correctErrors(o,a,c){if(a!=null&&a.length>c/2+st.MAX_ERRORS||c<0||c>st.MAX_EC_CODEWORDS)throw b.getChecksumInstance();return st.errorCorrection.decode(o,c,a)}static verifyCodewordCount(o,a){if(o.length<4)throw B.getFormatInstance();let c=o[0];if(c>o.length)throw B.getFormatInstance();if(c===0)if(a<o.length)o[0]=o.length-a;else throw B.getFormatInstance()}static getBitCountForCodeword(o){let a=new Int32Array(8),c=0,h=a.length-1;for(;!((o&1)!==c&&(c=o&1,h--,h<0));)a[h]++,o>>=1;return a}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return st.getCodewordBucketNumber(st.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let a=new qc;for(let c=0;c<o.length;c++){a.format("Row %2d: ",c);for(let h=0;h<o[c].length;h++){let p=o[c][h];p.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}a.format("%n")}return a.toString()}}st.CODEWORD_SKEW_SIZE=2,st.MAX_ERRORS=3,st.MAX_EC_CODEWORDS=512,st.errorCorrection=new dw;class Fr{decode(o,a=null){let c=Fr.decode(o,a,!1);if(c==null||c.length===0||c[0]==null)throw V.getNotFoundInstance();return c[0]}decodeMultiple(o,a=null){try{return Fr.decode(o,a,!0)}catch(c){throw c instanceof B||c instanceof b?V.getNotFoundInstance():c}}static decode(o,a,c){const h=new Array,p=nt.detectMultiple(o,a,c);for(const g of p.getPoints()){const w=st.decode(p.getBits(),g[4],g[5],g[6],g[7],Fr.getMinCodewordWidth(g),Fr.getMaxCodewordWidth(g)),C=new ce(w.getText(),w.getRawBytes(),void 0,g,xe.PDF_417);C.putMetadata(Pe.ERROR_CORRECTION_LEVEL,w.getECLevel());const T=w.getOther();T!=null&&C.putMetadata(Pe.PDF417_EXTRA_METADATA,T),h.push(C)}return h.map(g=>g)}static getMaxWidth(o,a){return o==null||a==null?0:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMinWidth(o,a){return o==null||a==null?A.MAX_VALUE:Math.trunc(Math.abs(o.getX()-a.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Fr.getMaxWidth(o[0],o[4]),Fr.getMaxWidth(o[6],o[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.max(Fr.getMaxWidth(o[1],o[5]),Fr.getMaxWidth(o[7],o[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Fr.getMinWidth(o[0],o[4]),Fr.getMinWidth(o[6],o[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.min(Fr.getMinWidth(o[1],o[5]),Fr.getMinWidth(o[7],o[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))}reset(){}}class Kd extends f{}Kd.kind="ReaderException";class xw{constructor(o,a){this.verbose=o===!0,a&&this.setHints(a)}decode(o,a){return a&&this.setHints(a),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const a=!n(o)&&o.get(F.TRY_HARDER)===!0,c=n(o)?null:o.get(F.POSSIBLE_FORMATS),h=new Array;if(!n(c)){const p=c.some(g=>g===xe.UPC_A||g===xe.UPC_E||g===xe.EAN_13||g===xe.EAN_8||g===xe.CODABAR||g===xe.CODE_39||g===xe.CODE_93||g===xe.CODE_128||g===xe.ITF||g===xe.RSS_14||g===xe.RSS_EXPANDED);p&&!a&&h.push(new ul(o,this.verbose)),c.includes(xe.QR_CODE)&&h.push(new Ji),c.includes(xe.DATA_MATRIX)&&h.push(new Zi),c.includes(xe.AZTEC)&&h.push(new ol),c.includes(xe.PDF_417)&&h.push(new Fr),p&&a&&h.push(new ul(o,this.verbose))}h.length===0&&(a||h.push(new ul(o,this.verbose)),h.push(new Ji),h.push(new Zi),h.push(new ol),h.push(new Fr),a&&h.push(new ul(o,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Kd("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(o,this.hints)}catch(c){if(c instanceof Kd)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class pR extends le{constructor(o=null,a=500){const c=new xw;c.setHints(o),super(c,a)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class gR extends le{constructor(o=500){super(new Fr,o)}}class xR extends le{constructor(o=500){super(new Ji,o)}}var vm;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(vm||(vm={}));var Sr=vm;class bm{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Ee(o,Int32Array.from([1])))}buildGenerator(o){const a=this.cachedGenerators;if(o>=a.length){let c=a[a.length-1];const h=this.field;for(let p=a.length;p<=o;p++){const g=c.multiply(new Ee(h,Int32Array.from([1,h.exp(p-1+h.getGeneratorBase())])));a.push(g),c=g}}return a[o]}encode(o,a){if(a===0)throw new y("No error correction bytes");const c=o.length-a;if(c<=0)throw new y("No data bytes provided");const h=this.buildGenerator(a),p=new Int32Array(c);_.arraycopy(o,0,p,0,c);let g=new Ee(this.field,p);g=g.multiplyByMonomial(a,1);const C=g.divide(h)[1].getCoefficients(),T=a-C.length;for(let j=0;j<T;j++)o[c+j]=0;_.arraycopy(C,0,o,c+T,C.length)}}class sr{constructor(){}static applyMaskPenaltyRule1(o){return sr.applyMaskPenaltyRule1Internal(o,!0)+sr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let a=0;const c=o.getArray(),h=o.getWidth(),p=o.getHeight();for(let g=0;g<p-1;g++){const w=c[g];for(let C=0;C<h-1;C++){const T=w[C];T===w[C+1]&&T===c[g+1][C]&&T===c[g+1][C+1]&&a++}}return sr.N2*a}static applyMaskPenaltyRule3(o){let a=0;const c=o.getArray(),h=o.getWidth(),p=o.getHeight();for(let g=0;g<p;g++)for(let w=0;w<h;w++){const C=c[g];w+6<h&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(sr.isWhiteHorizontal(C,w-4,w)||sr.isWhiteHorizontal(C,w+7,w+11))&&a++,g+6<p&&c[g][w]===1&&c[g+1][w]===0&&c[g+2][w]===1&&c[g+3][w]===1&&c[g+4][w]===1&&c[g+5][w]===0&&c[g+6][w]===1&&(sr.isWhiteVertical(c,w,g-4,g)||sr.isWhiteVertical(c,w,g+7,g+11))&&a++}return a*sr.N3}static isWhiteHorizontal(o,a,c){a=Math.max(a,0),c=Math.min(c,o.length);for(let h=a;h<c;h++)if(o[h]===1)return!1;return!0}static isWhiteVertical(o,a,c,h){c=Math.max(c,0),h=Math.min(h,o.length);for(let p=c;p<h;p++)if(o[p][a]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let a=0;const c=o.getArray(),h=o.getWidth(),p=o.getHeight();for(let C=0;C<p;C++){const T=c[C];for(let j=0;j<h;j++)T[j]===1&&a++}const g=o.getHeight()*o.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*sr.N4}static getDataMaskBit(o,a,c){let h,p;switch(o){case 0:h=c+a&1;break;case 1:h=c&1;break;case 2:h=a%3;break;case 3:h=(c+a)%3;break;case 4:h=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:p=c*a,h=(p&1)+p%3;break;case 6:p=c*a,h=(p&1)+p%3&1;break;case 7:p=c*a,h=p%3+(c+a&1)&1;break;default:throw new y("Invalid mask pattern: "+o)}return h===0}static applyMaskPenaltyRule1Internal(o,a){let c=0;const h=a?o.getHeight():o.getWidth(),p=a?o.getWidth():o.getHeight(),g=o.getArray();for(let w=0;w<h;w++){let C=0,T=-1;for(let j=0;j<p;j++){const L=a?g[w][j]:g[j][w];L===T?C++:(C>=5&&(c+=sr.N1+(C-5)),C=1,T=L)}C>=5&&(c+=sr.N1+(C-5))}return c}}sr.N1=3,sr.N2=3,sr.N3=40,sr.N4=10;class Qd{constructor(o,a){this.width=o,this.height=a;const c=new Array(a);for(let h=0;h!==a;h++)c[h]=new Uint8Array(o);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(o,a){return this.bytes[a][o]}getArray(){return this.bytes}setNumber(o,a,c){this.bytes[a][o]=c}setBoolean(o,a,c){this.bytes[a][o]=c?1:0}clear(o){for(const a of this.bytes)N.fill(a,o)}equals(o){if(!(o instanceof Qd))return!1;const a=o;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,h=this.height;c<h;++c){const p=this.bytes[c],g=a.bytes[c];for(let w=0,C=this.width;w<C;++w)if(p[w]!==g[w])return!1}return!0}toString(){const o=new ee;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a];for(let p=0,g=this.width;p<g;++p)switch(h[p]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class aa{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new ee;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<aa.NUM_MASK_PATTERNS}}aa.NUM_MASK_PATTERNS=8;class Tt extends f{}Tt.kind="WriterException";class Ge{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,a,c,h,p){Ge.clearMatrix(p),Ge.embedBasicPatterns(c,p),Ge.embedTypeInfo(a,h,p),Ge.maybeEmbedVersionInfo(c,p),Ge.embedDataBits(o,h,p)}static embedBasicPatterns(o,a){Ge.embedPositionDetectionPatternsAndSeparators(a),Ge.embedDarkDotAtLeftBottomCorner(a),Ge.maybeEmbedPositionAdjustmentPatterns(o,a),Ge.embedTimingPatterns(a)}static embedTypeInfo(o,a,c){const h=new O;Ge.makeTypeInfoBits(o,a,h);for(let p=0,g=h.getSize();p<g;++p){const w=h.get(h.getSize()-1-p),C=Ge.TYPE_INFO_COORDINATES[p],T=C[0],j=C[1];if(c.setBoolean(T,j,w),p<8){const L=c.getWidth()-p-1;c.setBoolean(L,8,w)}else{const U=c.getHeight()-7+(p-8);c.setBoolean(8,U,w)}}}static maybeEmbedVersionInfo(o,a){if(o.getVersionNumber()<7)return;const c=new O;Ge.makeVersionInfoBits(o,c);let h=6*3-1;for(let p=0;p<6;++p)for(let g=0;g<3;++g){const w=c.get(h);h--,a.setBoolean(p,a.getHeight()-11+g,w),a.setBoolean(a.getHeight()-11+g,p,w)}}static embedDataBits(o,a,c){let h=0,p=-1,g=c.getWidth()-1,w=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);w>=0&&w<c.getHeight();){for(let C=0;C<2;++C){const T=g-C;if(!Ge.isEmpty(c.get(T,w)))continue;let j;h<o.getSize()?(j=o.get(h),++h):j=!1,a!==255&&sr.getDataMaskBit(a,T,w)&&(j=!j),c.setBoolean(T,w,j)}w+=p}p=-p,w+=p,g-=2}if(h!==o.getSize())throw new Tt("Not all bits consumed: "+h+"/"+o.getSize())}static findMSBSet(o){return 32-A.numberOfLeadingZeros(o)}static calculateBCHCode(o,a){if(a===0)throw new y("0 polynomial");const c=Ge.findMSBSet(a);for(o<<=c-1;Ge.findMSBSet(o)>=c;)o^=a<<Ge.findMSBSet(o)-c;return o}static makeTypeInfoBits(o,a,c){if(!aa.isValidMaskPattern(a))throw new Tt("Invalid mask pattern");const h=o.getBits()<<3|a;c.appendBits(h,5);const p=Ge.calculateBCHCode(h,Ge.TYPE_INFO_POLY);c.appendBits(p,10);const g=new O;if(g.appendBits(Ge.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new Tt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(o,a){a.appendBits(o.getVersionNumber(),6);const c=Ge.calculateBCHCode(o.getVersionNumber(),Ge.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new Tt("should not happen but we got: "+a.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let a=8;a<o.getWidth()-8;++a){const c=(a+1)%2;Ge.isEmpty(o.get(a,6))&&o.setNumber(a,6,c),Ge.isEmpty(o.get(6,a))&&o.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Tt;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,a,c){for(let h=0;h<8;++h){if(!Ge.isEmpty(c.get(o+h,a)))throw new Tt;c.setNumber(o+h,a,0)}}static embedVerticalSeparationPattern(o,a,c){for(let h=0;h<7;++h){if(!Ge.isEmpty(c.get(o,a+h)))throw new Tt;c.setNumber(o,a+h,0)}}static embedPositionAdjustmentPattern(o,a,c){for(let h=0;h<5;++h){const p=Ge.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)c.setNumber(o+g,a+h,p[g])}}static embedPositionDetectionPattern(o,a,c){for(let h=0;h<7;++h){const p=Ge.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)c.setNumber(o+g,a+h,p[g])}}static embedPositionDetectionPatternsAndSeparators(o){const a=Ge.POSITION_DETECTION_PATTERN[0].length;Ge.embedPositionDetectionPattern(0,0,o),Ge.embedPositionDetectionPattern(o.getWidth()-a,0,o),Ge.embedPositionDetectionPattern(0,o.getWidth()-a,o);const c=8;Ge.embedHorizontalSeparationPattern(0,c-1,o),Ge.embedHorizontalSeparationPattern(o.getWidth()-c,c-1,o),Ge.embedHorizontalSeparationPattern(0,o.getWidth()-c,o);const h=7;Ge.embedVerticalSeparationPattern(h,0,o),Ge.embedVerticalSeparationPattern(o.getHeight()-h-1,0,o),Ge.embedVerticalSeparationPattern(h,o.getHeight()-h,o)}static maybeEmbedPositionAdjustmentPatterns(o,a){if(o.getVersionNumber()<2)return;const c=o.getVersionNumber()-1,h=Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let p=0,g=h.length;p!==g;p++){const w=h[p];if(w>=0)for(let C=0;C!==g;C++){const T=h[C];T>=0&&Ge.isEmpty(a.get(T,w))&&Ge.embedPositionAdjustmentPattern(T-2,w-2,a)}}}}Ge.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ge.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ge.VERSION_INFO_POLY=7973,Ge.TYPE_INFO_POLY=1335,Ge.TYPE_INFO_MASK_PATTERN=21522;class yR{constructor(o,a){this.dataBytes=o,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Pt{constructor(){}static calculateMaskPenalty(o){return sr.applyMaskPenaltyRule1(o)+sr.applyMaskPenaltyRule2(o)+sr.applyMaskPenaltyRule3(o)+sr.applyMaskPenaltyRule4(o)}static encode(o,a,c=null){let h=Pt.DEFAULT_BYTE_MODE_ENCODING;const p=c!==null&&c.get(Sr.CHARACTER_SET)!==void 0;p&&(h=c.get(Sr.CHARACTER_SET).toString());const g=this.chooseMode(o,h),w=new O;if(g===We.BYTE&&(p||Pt.DEFAULT_BYTE_MODE_ENCODING!==h)){const _e=M.getCharacterSetECIByName(h);_e!==void 0&&this.appendECI(_e,w)}this.appendModeInfo(g,w);const C=new O;this.appendBytes(o,g,C,h);let T;if(c!==null&&c.get(Sr.QR_VERSION)!==void 0){const _e=Number.parseInt(c.get(Sr.QR_VERSION).toString(),10);T=Ue.getVersionForNumber(_e);const ge=this.calculateBitsNeeded(g,w,C,T);if(!this.willFit(ge,T,a))throw new Tt("Data too big for requested version")}else T=this.recommendVersion(a,g,w,C);const j=new O;j.appendBitArray(w);const L=g===We.BYTE?C.getSizeInBytes():o.length;this.appendLengthInfo(L,T,g,j),j.appendBitArray(C);const U=T.getECBlocksForLevel(a),W=T.getTotalCodewords()-U.getTotalECCodewords();this.terminateBits(W,j);const X=this.interleaveWithECBytes(j,T.getTotalCodewords(),W,U.getNumBlocks()),Z=new aa;Z.setECLevel(a),Z.setMode(g),Z.setVersion(T);const te=T.getDimensionForVersion(),se=new Qd(te,te),we=this.chooseMaskPattern(X,a,T,se);return Z.setMaskPattern(we),Ge.buildMatrix(X,a,T,we,se),Z.setMatrix(se),Z}static recommendVersion(o,a,c,h){const p=this.calculateBitsNeeded(a,c,h,Ue.getVersionForNumber(1)),g=this.chooseVersion(p,o),w=this.calculateBitsNeeded(a,c,h,g);return this.chooseVersion(w,o)}static calculateBitsNeeded(o,a,c,h){return a.getSize()+o.getCharacterCountBits(h)+c.getSize()}static getAlphanumericCode(o){return o<Pt.ALPHANUMERIC_TABLE.length?Pt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,a=null){if(M.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(o))return We.KANJI;let c=!1,h=!1;for(let p=0,g=o.length;p<g;++p){const w=o.charAt(p);if(Pt.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)h=!0;else return We.BYTE}return h?We.ALPHANUMERIC:c?We.NUMERIC:We.BYTE}static isOnlyDoubleByteKanji(o){let a;try{a=G.encode(o,M.SJIS)}catch{return!1}const c=a.length;if(c%2!==0)return!1;for(let h=0;h<c;h+=2){const p=a[h]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(o,a,c,h){let p=Number.MAX_SAFE_INTEGER,g=-1;for(let w=0;w<aa.NUM_MASK_PATTERNS;w++){Ge.buildMatrix(o,a,c,w,h);let C=this.calculateMaskPenalty(h);C<p&&(p=C,g=w)}return g}static chooseVersion(o,a){for(let c=1;c<=40;c++){const h=Ue.getVersionForNumber(c);if(Pt.willFit(o,h,a))return h}throw new Tt("Data too big")}static willFit(o,a,c){const h=a.getTotalCodewords(),g=a.getECBlocksForLevel(c).getTotalECCodewords(),w=h-g,C=(o+7)/8;return w>=C}static terminateBits(o,a){const c=o*8;if(a.getSize()>c)throw new Tt("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let g=0;g<4&&a.getSize()<c;++g)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let g=h;g<8;g++)a.appendBit(!1);const p=o-a.getSizeInBytes();for(let g=0;g<p;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==c)throw new Tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,a,c,h,p,g){if(h>=c)throw new Tt("Block ID too large");const w=o%c,C=c-w,T=Math.floor(o/c),j=T+1,L=Math.floor(a/c),U=L+1,W=T-L,X=j-U;if(W!==X)throw new Tt("EC bytes mismatch");if(c!==C+w)throw new Tt("RS blocks mismatch");if(o!==(L+W)*C+(U+X)*w)throw new Tt("Total bytes mismatch");h<C?(p[0]=L,g[0]=W):(p[0]=U,g[0]=X)}static interleaveWithECBytes(o,a,c,h){if(o.getSizeInBytes()!==c)throw new Tt("Number of bits and data bytes does not match");let p=0,g=0,w=0;const C=new Array;for(let j=0;j<h;++j){const L=new Int32Array(1),U=new Int32Array(1);Pt.getNumDataBytesAndNumECBytesForBlockID(a,c,h,j,L,U);const W=L[0],X=new Uint8Array(W);o.toBytes(8*p,X,0,W);const Z=Pt.generateECBytes(X,U[0]);C.push(new yR(X,Z)),g=Math.max(g,W),w=Math.max(w,Z.length),p+=L[0]}if(c!==p)throw new Tt("Data bytes does not match offset");const T=new O;for(let j=0;j<g;++j)for(const L of C){const U=L.getDataBytes();j<U.length&&T.appendBits(U[j],8)}for(let j=0;j<w;++j)for(const L of C){const U=L.getErrorCorrectionBytes();j<U.length&&T.appendBits(U[j],8)}if(a!==T.getSizeInBytes())throw new Tt("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(o,a){const c=o.length,h=new Int32Array(c+a);for(let g=0;g<c;g++)h[g]=o[g]&255;new bm(Me.QR_CODE_FIELD_256).encode(h,a);const p=new Uint8Array(a);for(let g=0;g<a;g++)p[g]=h[c+g];return p}static appendModeInfo(o,a){a.appendBits(o.getBits(),4)}static appendLengthInfo(o,a,c,h){const p=c.getCharacterCountBits(a);if(o>=1<<p)throw new Tt(o+" is bigger than "+((1<<p)-1));h.appendBits(o,p)}static appendBytes(o,a,c,h){switch(a){case We.NUMERIC:Pt.appendNumericBytes(o,c);break;case We.ALPHANUMERIC:Pt.appendAlphanumericBytes(o,c);break;case We.BYTE:Pt.append8BitBytes(o,c,h);break;case We.KANJI:Pt.appendKanjiBytes(o,c);break;default:throw new Tt("Invalid mode: "+a)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const a=Pt.getDigit(o);return a>=0&&a<=9}static appendNumericBytes(o,a){const c=o.length;let h=0;for(;h<c;){const p=Pt.getDigit(o.charAt(h));if(h+2<c){const g=Pt.getDigit(o.charAt(h+1)),w=Pt.getDigit(o.charAt(h+2));a.appendBits(p*100+g*10+w,10),h+=3}else if(h+1<c){const g=Pt.getDigit(o.charAt(h+1));a.appendBits(p*10+g,7),h+=2}else a.appendBits(p,4),h++}}static appendAlphanumericBytes(o,a){const c=o.length;let h=0;for(;h<c;){const p=Pt.getAlphanumericCode(o.charCodeAt(h));if(p===-1)throw new Tt;if(h+1<c){const g=Pt.getAlphanumericCode(o.charCodeAt(h+1));if(g===-1)throw new Tt;a.appendBits(p*45+g,11),h+=2}else a.appendBits(p,6),h++}}static append8BitBytes(o,a,c){let h;try{h=G.encode(o,c)}catch(p){throw new Tt(p)}for(let p=0,g=h.length;p!==g;p++){const w=h[p];a.appendBits(w,8)}}static appendKanjiBytes(o,a){let c;try{c=G.encode(o,M.SJIS)}catch(p){throw new Tt(p)}const h=c.length;for(let p=0;p<h;p+=2){const g=c[p]&255,w=c[p+1]&255,C=g<<8&4294967295|w;let T=-1;if(C>=33088&&C<=40956?T=C-33088:C>=57408&&C<=60351&&(T=C-49472),T===-1)throw new Tt("Invalid byte sequence");const j=(T>>8)*192+(T&255);a.appendBits(j,13)}}static appendECI(o,a){a.appendBits(We.ECI.getBits(),4),a.appendBits(o.getValue(),8)}}Pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Pt.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class la{write(o,a,c,h=null){if(o.length===0)throw new y("Found empty contents");if(a<0||c<0)throw new y("Requested dimensions are too small: "+a+"x"+c);let p=jt.L,g=la.QUIET_ZONE_SIZE;h!==null&&(h.get(Sr.ERROR_CORRECTION)!==void 0&&(p=jt.fromString(h.get(Sr.ERROR_CORRECTION).toString())),h.get(Sr.MARGIN)!==void 0&&(g=Number.parseInt(h.get(Sr.MARGIN).toString(),10)));const w=Pt.encode(o,p,h);return this.renderResult(w,a,c,g)}writeToDom(o,a,c,h,p=null){typeof o=="string"&&(o=document.querySelector(o));const g=this.write(a,c,h,p);o&&o.appendChild(g)}renderResult(o,a,c,h){const p=o.getMatrix();if(p===null)throw new St;const g=p.getWidth(),w=p.getHeight(),C=g+h*2,T=w+h*2,j=Math.max(a,C),L=Math.max(c,T),U=Math.min(Math.floor(j/C),Math.floor(L/T)),W=Math.floor((j-g*U)/2),X=Math.floor((L-w*U)/2),Z=this.createSVGElement(j,L);for(let te=0,se=X;te<w;te++,se+=U)for(let we=0,_e=W;we<g;we++,_e+=U)if(p.get(we,te)===1){const ge=this.createSvgRectElement(_e,se,U,U);Z.appendChild(ge)}return Z}createSVGElement(o,a){const c=document.createElementNS(la.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(o,a,c,h){const p=document.createElementNS(la.SVG_NS,"rect");return p.setAttributeNS(null,"x",o.toString()),p.setAttributeNS(null,"y",a.toString()),p.setAttributeNS(null,"height",c.toString()),p.setAttributeNS(null,"width",h.toString()),p.setAttributeNS(null,"fill","#000000"),p}}la.QUIET_ZONE_SIZE=4,la.SVG_NS="http://www.w3.org/2000/svg";class hl{encode(o,a,c,h,p){if(o.length===0)throw new y("Found empty contents");if(a!==xe.QR_CODE)throw new y("Can only encode QR_CODE, but got "+a);if(c<0||h<0)throw new y(`Requested dimensions are too small: ${c}x${h}`);let g=jt.L,w=hl.QUIET_ZONE_SIZE;p!==null&&(p.get(Sr.ERROR_CORRECTION)!==void 0&&(g=jt.fromString(p.get(Sr.ERROR_CORRECTION).toString())),p.get(Sr.MARGIN)!==void 0&&(w=Number.parseInt(p.get(Sr.MARGIN).toString(),10)));const C=Pt.encode(o,g,p);return hl.renderResult(C,c,h,w)}static renderResult(o,a,c,h){const p=o.getMatrix();if(p===null)throw new St;const g=p.getWidth(),w=p.getHeight(),C=g+h*2,T=w+h*2,j=Math.max(a,C),L=Math.max(c,T),U=Math.min(Math.floor(j/C),Math.floor(L/T)),W=Math.floor((j-g*U)/2),X=Math.floor((L-w*U)/2),Z=new z(j,L);for(let te=0,se=X;te<w;te++,se+=U)for(let we=0,_e=W;we<g;we++,_e+=U)p.get(we,te)===1&&Z.setRegion(_e,se,U,U);return Z}}hl.QUIET_ZONE_SIZE=4;class wR{encode(o,a,c,h,p){let g;switch(a){case xe.QR_CODE:g=new hl;break;default:throw new y("No encoder available for format "+a)}return g.encode(o,a,c,h,p)}}class ei extends q{constructor(o,a,c,h,p,g,w,C){if(super(g,w),this.yuvData=o,this.dataWidth=a,this.dataHeight=c,this.left=h,this.top=p,h+g>a||p+w>c)throw new y("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(g,w)}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const h=(o+this.top)*this.dataWidth+this.left;return _.arraycopy(this.yuvData,h,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=o*a,h=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return _.arraycopy(this.yuvData,p,h,0,c),h;for(let g=0;g<a;g++){const w=g*o;_.arraycopy(this.yuvData,p,h,w,o),p+=this.dataWidth}return h}isCropSupported(){return!0}crop(o,a,c,h){return new ei(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+a,c,h,!1)}renderThumbnail(){const o=this.getWidth()/ei.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/ei.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*a),h=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const w=g*o;for(let C=0;C<o;C++){const T=h[p+C*ei.THUMBNAIL_SCALE_FACTOR]&255;c[w+C]=4278190080|T*65793}p+=this.dataWidth*ei.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/ei.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ei.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,a){const c=this.yuvData;for(let h=0,p=this.top*this.dataWidth+this.left;h<a;h++,p+=this.dataWidth){const g=p+o/2;for(let w=p,C=p+o-1;w<g;w++,C--){const T=c[w];c[w]=c[C],c[C]=T}}}invert(){return new Q(this)}}ei.THUMBNAIL_SCALE_FACTOR=2;class _m extends q{constructor(o,a,c,h,p,g,w){if(super(a,c),this.dataWidth=h,this.dataHeight=p,this.left=g,this.top=w,o.BYTES_PER_ELEMENT===4){const C=a*c,T=new Uint8ClampedArray(C);for(let j=0;j<C;j++){const L=o[j],U=L>>16&255,W=L>>7&510,X=L&255;T[j]=(U+W+X)/4&255}this.luminances=T}else this.luminances=o;if(h===void 0&&(this.dataWidth=a),p===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(o,a){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const h=(o+this.top)*this.dataWidth+this.left;return _.arraycopy(this.luminances,h,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.luminances;const c=o*a,h=new Uint8ClampedArray(c);let p=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return _.arraycopy(this.luminances,p,h,0,c),h;for(let g=0;g<a;g++){const w=g*o;_.arraycopy(this.luminances,p,h,w,o),p+=this.dataWidth}return h}isCropSupported(){return!0}crop(o,a,c,h){return new _m(this.luminances,c,h,this.dataWidth,this.dataHeight,this.left+o,this.top+a)}invert(){return new Q(this)}}class yw extends M{static forName(o){return this.getCharacterSetECIByName(o)}}class Cm{}Cm.ISO_8859_1=M.ISO8859_1;class ww{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class vw{static singletonList(o){return[o]}static min(o,a){return o.sort(a)[0]}}class vR{constructor(o){this.previous=o}getPrevious(){return this.previous}}class fl extends vR{constructor(o,a,c){super(o),this.value=a,this.bitCount=c}appendTo(o,a){o.appendBits(this.value,this.bitCount)}add(o,a){return new fl(this,o,a)}addBinaryShift(o,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fl(this,o,a)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+A.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Em extends fl{constructor(o,a,c){super(o,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(o,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):c===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(o,a){return new Em(this,o,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bR(D,o,a){return new Em(D,o,a)}function Jc(D,o,a){return new fl(D,o,a)}const _R=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],to=0,Zd=1,os=2,bw=3,ti=4,CR=new fl(null,0,0),Sm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ER(D){for(let o of D)N.fill(o,-1);return D[to][ti]=0,D[Zd][ti]=0,D[Zd][to]=28,D[bw][ti]=0,D[os][ti]=0,D[os][to]=15,D}const _w=ER(N.createInt32Array(6,6));class ri{constructor(o,a,c,h){this.token=o,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,a){let c=this.bitCount,h=this.token;if(o!==this.mode){let g=Sm[this.mode][o];h=Jc(h,g&65535,g>>16),c+=g>>16}let p=o===os?4:5;return h=Jc(h,a,p),new ri(h,o,0,c+p)}shiftAndAppend(o,a){let c=this.token,h=this.mode===os?4:5;return c=Jc(c,_w[this.mode][o],h),c=Jc(c,a,5),new ri(c,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(o){let a=this.token,c=this.mode,h=this.bitCount;if(this.mode===ti||this.mode===os){let w=Sm[c][to];a=Jc(a,w&65535,w>>16),h+=w>>16,c=to}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ri(a,c,this.binaryShiftByteCount+1,h+p);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(o+1)),g}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=bR(a,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new ri(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let a=this.bitCount+(Sm[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?a+=ri.calculateBinaryShiftCost(o)-ri.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(a+=10),a<=o.bitCount}toBitArray(o){let a=[];for(let h=this.endBinaryShift(o.length).token;h!==null;h=h.getPrevious())a.unshift(h);let c=new O;for(const h of a)h.appendTo(c,o);return c}toString(){return K.format("%s bits=%d bytes=%d",_R[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}ri.INITIAL_STATE=new ri(CR,to,0,0);function SR(D){const o=K.getCharCode(" "),a=K.getCharCode("."),c=K.getCharCode(",");D[to][o]=1;const h=K.getCharCode("Z"),p=K.getCharCode("A");for(let U=p;U<=h;U++)D[to][U]=U-p+2;D[Zd][o]=1;const g=K.getCharCode("z"),w=K.getCharCode("a");for(let U=w;U<=g;U++)D[Zd][U]=U-w+2;D[os][o]=1;const C=K.getCharCode("9"),T=K.getCharCode("0");for(let U=T;U<=C;U++)D[os][U]=U-T+2;D[os][c]=12,D[os][a]=13;const j=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let U=0;U<j.length;U++)D[bw][K.getCharCode(j[U])]=U;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let U=0;U<L.length;U++)K.getCharCode(L[U])>0&&(D[ti][K.getCharCode(L[U])]=U);return D}const Nm=SR(N.createInt32Array(5,256));class eu{constructor(o){this.text=o}encode(){const o=K.getCharCode(" "),a=K.getCharCode(`
`);let c=vw.singletonList(ri.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let g,w=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case K.getCharCode("\r"):g=w===a?2:0;break;case K.getCharCode("."):g=w===o?3:0;break;case K.getCharCode(","):g=w===o?4:0;break;case K.getCharCode(":"):g=w===o?5:0;break;default:g=0}g>0?(c=eu.updateStateListForPair(c,p,g),p++):c=this.updateStateListForChar(c,p)}return vw.min(c,(p,g)=>p.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,a){const c=[];for(let h of o)this.updateStateForChar(h,a,c);return eu.simplifyStates(c)}updateStateForChar(o,a,c){let h=this.text[a]&255,p=Nm[o.getMode()][h]>0,g=null;for(let w=0;w<=ti;w++){let C=Nm[w][h];if(C>0){if(g==null&&(g=o.endBinaryShift(a)),!p||w===o.getMode()||w===os){const T=g.latchAndAppend(w,C);c.push(T)}if(!p&&_w[o.getMode()][w]>=0){const T=g.shiftAndAppend(w,C);c.push(T)}}}if(o.getBinaryShiftByteCount()>0||Nm[o.getMode()][h]===0){let w=o.addBinaryShiftChar(a);c.push(w)}}static updateStateListForPair(o,a,c){const h=[];for(let p of o)this.updateStateForPair(p,a,c,h);return this.simplifyStates(h)}static updateStateForPair(o,a,c,h){let p=o.endBinaryShift(a);if(h.push(p.latchAndAppend(ti,c)),o.getMode()!==ti&&h.push(p.shiftAndAppend(ti,c)),c===3||c===4){let g=p.latchAndAppend(os,16-c).latchAndAppend(os,1);h.push(g)}if(o.getBinaryShiftByteCount()>0){let g=o.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(g)}}static simplifyStates(o){let a=[];for(const c of o){let h=!0;for(const p of a){if(p.isBetterThanOrEqualTo(c)){h=!1;break}c.isBetterThanOrEqualTo(p)&&(a=a.filter(g=>g!==p))}h&&a.push(c)}return a}}class mt{constructor(){}static encodeBytes(o){return mt.encode(o,mt.DEFAULT_EC_PERCENT,mt.DEFAULT_AZTEC_LAYERS)}static encode(o,a,c){let h=new eu(o).encode(),p=A.truncDivision(h.getSize()*a,100)+11,g=h.getSize()+p,w,C,T,j,L;if(c!==mt.DEFAULT_AZTEC_LAYERS){if(w=c<0,C=Math.abs(c),C>(w?mt.MAX_NB_BITS_COMPACT:mt.MAX_NB_BITS))throw new y(K.format("Illegal value %s for layers",c));T=mt.totalBitsInLayer(C,w),j=mt.WORD_SIZE[C];let ge=T-T%j;if(L=mt.stuffBits(h,j),L.getSize()+p>ge)throw new y("Data to large for user specified layer");if(w&&L.getSize()>j*64)throw new y("Data to large for user specified layer")}else{j=0,L=null;for(let ge=0;;ge++){if(ge>mt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(w=ge<=3,C=w?ge+1:ge,T=mt.totalBitsInLayer(C,w),g>T)continue;(L==null||j!==mt.WORD_SIZE[C])&&(j=mt.WORD_SIZE[C],L=mt.stuffBits(h,j));let ct=T-T%j;if(!(w&&L.getSize()>j*64)&&L.getSize()+p<=ct)break}}let U=mt.generateCheckWords(L,T,j),W=L.getSize()/j,X=mt.generateModeMessage(w,C,W),Z=(w?11:14)+C*4,te=new Int32Array(Z),se;if(w){se=Z;for(let ge=0;ge<te.length;ge++)te[ge]=ge}else{se=Z+1+2*A.truncDivision(A.truncDivision(Z,2)-1,15);let ge=A.truncDivision(Z,2),ct=A.truncDivision(se,2);for(let Ze=0;Ze<ge;Ze++){let bn=Ze+A.truncDivision(Ze,15);te[ge-Ze-1]=ct-bn-1,te[ge+Ze]=ct+bn+1}}let we=new z(se);for(let ge=0,ct=0;ge<C;ge++){let Ze=(C-ge)*4+(w?9:12);for(let bn=0;bn<Ze;bn++){let Ns=bn*2;for(let _n=0;_n<2;_n++)U.get(ct+Ns+_n)&&we.set(te[ge*2+_n],te[ge*2+bn]),U.get(ct+Ze*2+Ns+_n)&&we.set(te[ge*2+bn],te[Z-1-ge*2-_n]),U.get(ct+Ze*4+Ns+_n)&&we.set(te[Z-1-ge*2-_n],te[Z-1-ge*2-bn]),U.get(ct+Ze*6+Ns+_n)&&we.set(te[Z-1-ge*2-bn],te[ge*2+_n])}ct+=Ze*8}if(mt.drawModeMessage(we,w,se,X),w)mt.drawBullsEye(we,A.truncDivision(se,2),5);else{mt.drawBullsEye(we,A.truncDivision(se,2),7);for(let ge=0,ct=0;ge<A.truncDivision(Z,2)-1;ge+=15,ct+=16)for(let Ze=A.truncDivision(se,2)&1;Ze<se;Ze+=2)we.set(A.truncDivision(se,2)-ct,Ze),we.set(A.truncDivision(se,2)+ct,Ze),we.set(Ze,A.truncDivision(se,2)-ct),we.set(Ze,A.truncDivision(se,2)+ct)}let _e=new ww;return _e.setCompact(w),_e.setSize(se),_e.setLayers(C),_e.setCodeWords(W),_e.setMatrix(we),_e}static drawBullsEye(o,a,c){for(let h=0;h<c;h+=2)for(let p=a-h;p<=a+h;p++)o.set(p,a-h),o.set(p,a+h),o.set(a-h,p),o.set(a+h,p);o.set(a-c,a-c),o.set(a-c+1,a-c),o.set(a-c,a-c+1),o.set(a+c,a-c),o.set(a+c,a-c+1),o.set(a+c,a+c-1)}static generateModeMessage(o,a,c){let h=new O;return o?(h.appendBits(a-1,2),h.appendBits(c-1,6),h=mt.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(c-1,11),h=mt.generateCheckWords(h,40,4)),h}static drawModeMessage(o,a,c,h){let p=A.truncDivision(c,2);if(a)for(let g=0;g<7;g++){let w=p-3+g;h.get(g)&&o.set(w,p-5),h.get(g+7)&&o.set(p+5,w),h.get(20-g)&&o.set(w,p+5),h.get(27-g)&&o.set(p-5,w)}else for(let g=0;g<10;g++){let w=p-5+g+A.truncDivision(g,5);h.get(g)&&o.set(w,p-7),h.get(g+10)&&o.set(p+7,w),h.get(29-g)&&o.set(w,p+7),h.get(39-g)&&o.set(p-7,w)}}static generateCheckWords(o,a,c){let h=o.getSize()/c,p=new bm(mt.getGF(c)),g=A.truncDivision(a,c),w=mt.bitsToWords(o,c,g);p.encode(w,g-h);let C=a%c,T=new O;T.appendBits(0,C);for(const j of Array.from(w))T.appendBits(j,c);return T}static bitsToWords(o,a,c){let h=new Int32Array(c),p,g;for(p=0,g=o.getSize()/a;p<g;p++){let w=0;for(let C=0;C<a;C++)w|=o.get(p*a+C)?1<<a-C-1:0;h[p]=w}return h}static getGF(o){switch(o){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new y("Unsupported word size "+o)}}static stuffBits(o,a){let c=new O,h=o.getSize(),p=(1<<a)-2;for(let g=0;g<h;g+=a){let w=0;for(let C=0;C<a;C++)(g+C>=h||o.get(g+C))&&(w|=1<<a-1-C);(w&p)===p?(c.appendBits(w&p,a),g--):w&p?c.appendBits(w,a):(c.appendBits(w|1,a),g--)}return c}static totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}mt.DEFAULT_EC_PERCENT=33,mt.DEFAULT_AZTEC_LAYERS=0,mt.MAX_NB_BITS=32,mt.MAX_NB_BITS_COMPACT=4,mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Jd{encode(o,a,c,h){return this.encodeWithHints(o,a,c,h,null)}encodeWithHints(o,a,c,h,p){let g=Cm.ISO_8859_1,w=mt.DEFAULT_EC_PERCENT,C=mt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(Sr.CHARACTER_SET)&&(g=yw.forName(p.get(Sr.CHARACTER_SET).toString())),p.has(Sr.ERROR_CORRECTION)&&(w=A.parseInt(p.get(Sr.ERROR_CORRECTION).toString())),p.has(Sr.AZTEC_LAYERS)&&(C=A.parseInt(p.get(Sr.AZTEC_LAYERS).toString()))),Jd.encodeLayers(o,a,c,h,g,w,C)}static encodeLayers(o,a,c,h,p,g,w){if(a!==xe.AZTEC)throw new y("Can only encode AZTEC, but got "+a);let C=mt.encode(K.getBytes(o,p),g,w);return Jd.renderResult(C,c,h)}static renderResult(o,a,c){let h=o.getMatrix();if(h==null)throw new St;let p=h.getWidth(),g=h.getHeight(),w=Math.max(a,p),C=Math.max(c,g),T=Math.min(w/p,C/g),j=(w-p*T)/2,L=(C-g*T)/2,U=new z(w,C);for(let W=0,X=L;W<g;W++,X+=T)for(let Z=0,te=j;Z<p;Z++,te+=T)h.get(Z,W)&&U.setRegion(te,X,T,T);return U}}r.AbstractExpandedDecoder=dm,r.ArgumentException=x,r.ArithmeticException=ke,r.AztecCode=ww,r.AztecCodeReader=ol,r.AztecCodeWriter=Jd,r.AztecDecoder=Fe,r.AztecDetector=na,r.AztecDetectorResult=it,r.AztecEncoder=mt,r.AztecHighLevelEncoder=eu,r.AztecPoint=Lr,r.BarcodeFormat=xe,r.Binarizer=S,r.BinaryBitmap=v,r.BitArray=O,r.BitMatrix=z,r.BitSource=pm,r.BrowserAztecCodeReader=$d,r.BrowserBarcodeReader=rR,r.BrowserCodeReader=le,r.BrowserDatamatrixCodeReader=sR,r.BrowserMultiFormatReader=pR,r.BrowserPDF417Reader=gR,r.BrowserQRCodeReader=xR,r.BrowserQRCodeSvgWriter=la,r.CharacterSetECI=M,r.ChecksumException=b,r.Code128Reader=Se,r.Code39Reader=rr,r.DataMatrixDecodedBitStreamParser=Qi,r.DataMatrixReader=Zi,r.DecodeHintType=F,r.DecoderResult=Xe,r.DefaultGridSampler=Si,r.DetectorResult=Dr,r.EAN13Reader=Es,r.EncodeHintType=Sr,r.Exception=f,r.FormatException=B,r.GenericGF=Me,r.GenericGFPoly=Ee,r.GlobalHistogramBinarizer=J,r.GridSampler=ra,r.GridSamplerInstance=Qs,r.HTMLCanvasElementLuminanceSource=ie,r.HybridBinarizer=Y,r.ITFReader=ht,r.IllegalArgumentException=y,r.IllegalStateException=St,r.InvertedLuminanceSource=Q,r.LuminanceSource=q,r.MathUtils=Ae,r.MultiFormatOneDReader=ul,r.MultiFormatReader=xw,r.MultiFormatWriter=wR,r.NotFoundException=V,r.OneDReader=Ut,r.PDF417DecodedBitStreamParser=ne,r.PDF417DecoderErrorCorrection=dw,r.PDF417Reader=Fr,r.PDF417ResultMetadata=fw,r.PerspectiveTransform=At,r.PlanarYUVLuminanceSource=ei,r.QRCodeByteMatrix=Qd,r.QRCodeDataMask=ss,r.QRCodeDecodedBitStreamParser=Gt,r.QRCodeDecoderErrorCorrectionLevel=jt,r.QRCodeDecoderFormatInformation=qr,r.QRCodeEncoder=Pt,r.QRCodeEncoderQRCode=aa,r.QRCodeMaskUtil=sr,r.QRCodeMatrixUtil=Ge,r.QRCodeMode=We,r.QRCodeReader=Ji,r.QRCodeVersion=Ue,r.QRCodeWriter=hl,r.RGBLuminanceSource=_m,r.RSS14Reader=nr,r.RSSExpandedReader=he,r.ReaderException=Kd,r.ReedSolomonDecoder=er,r.ReedSolomonEncoder=bm,r.ReedSolomonException=gt,r.Result=ce,r.ResultMetadataType=Pe,r.ResultPoint=Ce,r.StringUtils=K,r.UnsupportedOperationException=$,r.VideoInputDevice=fe,r.WhiteRectangleDetector=tr,r.WriterException=Tt,r.ZXingArrays=N,r.ZXingCharset=yw,r.ZXingInteger=A,r.ZXingStandardCharsets=Cm,r.ZXingStringBuilder=ee,r.ZXingStringEncoding=G,r.ZXingSystem=_,r.createAbstractExpandedDecoder=cw,Object.defineProperty(r,"__esModule",{value:!0})})})(Mg,Mg.exports);var Bt=Mg.exports;const LU=Lg(Bt),BU=Dg({__proto__:null,default:LU},[Bt]);var Tb=function(){function t(e,r,n){if(this.formatMap=new Map([[Oe.QR_CODE,Bt.BarcodeFormat.QR_CODE],[Oe.AZTEC,Bt.BarcodeFormat.AZTEC],[Oe.CODABAR,Bt.BarcodeFormat.CODABAR],[Oe.CODE_39,Bt.BarcodeFormat.CODE_39],[Oe.CODE_93,Bt.BarcodeFormat.CODE_93],[Oe.CODE_128,Bt.BarcodeFormat.CODE_128],[Oe.DATA_MATRIX,Bt.BarcodeFormat.DATA_MATRIX],[Oe.MAXICODE,Bt.BarcodeFormat.MAXICODE],[Oe.ITF,Bt.BarcodeFormat.ITF],[Oe.EAN_13,Bt.BarcodeFormat.EAN_13],[Oe.EAN_8,Bt.BarcodeFormat.EAN_8],[Oe.PDF_417,Bt.BarcodeFormat.PDF_417],[Oe.RSS_14,Bt.BarcodeFormat.RSS_14],[Oe.RSS_EXPANDED,Bt.BarcodeFormat.RSS_EXPANDED],[Oe.UPC_A,Bt.BarcodeFormat.UPC_A],[Oe.UPC_E,Bt.BarcodeFormat.UPC_E],[Oe.UPC_EAN_EXTENSION,Bt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!BU)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var s=this.createZXingFormats(e),i=new Map;i.set(Bt.DecodeHintType.POSSIBLE_FORMATS,s),i.set(Bt.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,s){try{n(r.decode(e))}catch(i){s(i)}})},t.prototype.decode=function(e){var r=new Bt.MultiFormatReader(this.verbose,this.hints),n=new Bt.HTMLCanvasElementLuminanceSource(e),s=new Bt.BinaryBitmap(new Bt.HybridBinarizer(n)),i=r.decode(s);return{text:i.text,format:UI.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),FU=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},UU=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Ib=function(){function t(e,r,n){if(this.formatMap=new Map([[Oe.QR_CODE,"qr_code"],[Oe.AZTEC,"aztec"],[Oe.CODABAR,"codabar"],[Oe.CODE_39,"code_39"],[Oe.CODE_93,"code_93"],[Oe.CODE_128,"code_128"],[Oe.DATA_MATRIX,"data_matrix"],[Oe.ITF,"itf"],[Oe.EAN_13,"ean_13"],[Oe.EAN_8,"ean_8"],[Oe.PDF_417,"pdf417"],[Oe.UPC_A,"upc_a"],[Oe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return FU(this,void 0,void 0,function(){var r,n;return UU(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=s.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:UI.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,s=0,i=e;s<i.length;s++){var l=i[s],d=l.boundingBox.width*l.boundingBox.height;d>n&&(n=d,r=l)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,s=e;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,s){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Rb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},Ob=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},zU=function(){function t(e,r,n,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Ib.isSupported()?(this.primaryDecoder=new Ib(e,n,s),this.secondaryDecoder=new Tb(e,n,s)):this.primaryDecoder=new Tb(e,n,s)}return t.prototype.decodeAsync=function(e){return Rb(this,void 0,void 0,function(){var r;return Ob(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Rb(this,void 0,void 0,function(){var r,n;return Ob(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(n=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var s=n[r];e+=s}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),ew=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},a0=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$I=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),VU=function(t){ew(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var s={advanced:[n]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}($I),HU=function(t){ew(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(VU),$U=function(t){ew(e,t);function e(r){return t.call(this,"torch",r)||this}return e}($I),WU=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new HU(this.track)},t.prototype.torchFeature=function(){return new $U(this.track)},t}(),GU=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,s),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,s){return o0(this,void 0,void 0,function(){var i,l;return a0(this,function(d){switch(d.label){case 0:return i=new t(e,r,s),n.aspectRatio?(l={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:d.sent(),d.label=2;case 2:return i.setupSurface(),[2,i]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return o0(this,void 0,void 0,function(){return a0(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var s=e.mediaStream.getVideoTracks(),i=s.length,l=0;e.mediaStream.getVideoTracks().forEach(function(d){e.mediaStream.removeTrack(d),d.stop(),++l,l>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new WU(this.getFirstTrackOrFail())},t}(),YU=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return o0(this,void 0,void 0,function(){return a0(this,function(s){return[2,GU.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return o0(this,void 0,void 0,function(){var r,n;return a0(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=s.sent(),[2,new t(n)]}})})},t}(),jb=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},Mb=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},qU=function(){function t(){}return t.failIfNotSupported=function(){return jb(this,void 0,void 0,function(){return Mb(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return jb(this,void 0,void 0,function(){return Mb(this,function(r){return[2,YU.create(e)]})})},t}(),XU=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},KU=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},QU=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=$l.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=$l.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return XU(this,void 0,void 0,function(){var e,r,n,s,i,l,d;return KU(this,function(m){switch(m.label){case 0:return e=function(f){for(var x=f.getVideoTracks(),y=0,v=x;y<v.length;y++){var b=v[y];b.enabled=!1,b.stop(),f.removeTrack(b)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=m.sent(),s=[],i=0,l=n;i<l.length;i++)d=l[i],d.kind==="videoinput"&&s.push({id:d.deviceId,label:d.label});return e(r),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(i){for(var l=[],d=0,m=i;d<m.length;d++){var f=m[d];f.kind==="video"&&l.push({id:f.id,label:f.label})}e(l)},s=MediaStreamTrack;s.getSources(n)})},t}(),ar;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ar||(ar={}));var ZU=function(){function t(){this.state=ar.NOT_STARTED,this.onGoingTransactionNewState=ar.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ar.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ar.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ar.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ar.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ar.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ar.UNKNOWN:throw"Transition from unknown is not allowed";case ar.NOT_STARTED:this.failIfNewStateIs(e,[ar.PAUSED]);break;case ar.SCANNING:break;case ar.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,s=r;n<s.length;n++){var i=s[n];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),JU=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ar.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ar.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ar.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ar.PAUSED},t}(),ez=function(){function t(){}return t.create=function(){return new JU(new ZU)},t}(),tz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pn=function(t){tz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Fs),rz=function(){function t(e,r){this.logger=r,this.fps=Pn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?HI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ii(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),kb=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new VI(this.verbose),this.qrcode=new zU(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ez.create()}return t.prototype.start=function(e,r,n,s){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;s?l=s:l=this.verbose?this.logger.log:function(){};var d=rz.create(r,this.logger);this.clearElement();var m=!1;d.videoConstraints&&(d.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=m,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Pn.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var y=this,v=this.stateManagerProxy.startTransition(ar.SCANNING);return new Promise(function(b,S){var _=f?d.videoConstraints:y.createVideoConstraints(e);if(!_){v.cancel(),S("videoConstraints should be defined");return}var I={};(!f||d.aspectRatio)&&(I.aspectRatio=d.aspectRatio);var R={onRenderSurfaceReady:function(N,A){y.setupUi(N,A,d),y.isScanning=!0,y.foreverScan(d,n,l)}};qU.failIfNotSupported().then(function(N){N.create(_).then(function(A){return A.render(i.element,I,R).then(function(O){y.renderedCamera=O,v.execute(),b(null)}).catch(function(O){v.cancel(),S(O)})}).catch(function(A){v.cancel(),S($l.errorGettingUserMedia(A))})}).catch(function(N){v.cancel(),S($l.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ar.PAUSED),this.showPausedState(),(ii(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(ar.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ar.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var i=document.getElementById(Pn.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),n(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),r.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ii(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var d=l.width,m=l.height,f=document.getElementById(n.elementId),x=f.clientWidth?f.clientWidth:Pn.DEFAULT_WIDTH,y=Math.max(f.clientHeight?f.clientHeight:m,Pn.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(d,m,x,y);if(r){var b=n.createCanvasElement(x,y,"qr-canvas-visible");b.style.display="inline-block",f.appendChild(b);var S=b.getContext("2d");if(!S)throw"Unable to get 2d context from canvas";S.canvas.width=x,S.canvas.height=y,S.drawImage(l,0,0,d,m,v.x,v.y,v.width,v.height)}var _=Pn.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(l.width,v.width),R=Math.max(l.height,v.height),N=I+2*_,A=R+2*_,O=n.createCanvasElement(N,A);f.appendChild(O);var k=O.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=N,k.canvas.height=A,k.drawImage(l,0,0,d,m,_,_,I,R);try{n.qrcode.decodeRobustlyAsync(O).then(function(F){s(Nb.createFromQrcodeResult(F))}).catch(i)}catch(F){i("QR code parse error, error = ".concat(F))}},l.onerror=i,l.onabort=i,l.onstalled=i,l.onsuspend=i,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return QU.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!HI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Oe.QR_CODE,Oe.AZTEC,Oe.CODABAR,Oe.CODE_39,Oe.CODE_93,Oe.CODE_128,Oe.DATA_MATRIX,Oe.MAXICODE,Oe.ITF,Oe.EAN_13,Oe.EAN_8,Oe.PDF_417,Oe.RSS_14,Oe.RSS_EXPANDED,Oe.UPC_A,Oe.UPC_E,Oe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],s=0,i=e.formatsToSupport;s<i.length;s++){var l=i[s];PU(l)?n.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ii(e))return!0;if(!ii(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ii(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ii(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var s=this,i=n.qrbox;this.validateQrboxConfig(i);var l=this.toQrdimensions(e,r,i),d=function(f){if(f<Pn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pn.MIN_QR_BOX_SIZE,"px.")},m=function(f){return f>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=e),f};d(l.width),d(l.height),l.width=m(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var s=ii(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(e,r,s);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=n.isShadedBoxEnabled()&&i.height<=r,d={x:0,y:0,width:e,height:r},m=l?this.getShadedRegionBounds(e,r,i):d,f=this.createCanvasElement(m.width,m.height),x={willReadFrequently:!0},y=f.getContext("2d",x);y.canvas.width=m.width,y.canvas.height=m.height,this.element.append(f),l&&this.possiblyInsertShadingElement(this.element,e,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=y,this.canvasElement=f},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=$l.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,Nb.createFromQrcodeResult(s)),n.possiblyUpdateShaders(!0),!0}).catch(function(s){n.possiblyUpdateShaders(!1);var i=$l.codeParseError(s);return r(i,zI.createFrom(i)),!1})},t.prototype.foreverScan=function(e,r,n){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),l=i.videoWidth/i.clientWidth,d=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*l,f=this.qrRegion.height*d,x=this.qrRegion.x*l,y=this.qrRegion.y*d;this.context.drawImage(i,x,y,m,f,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,r,n)},s.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(b){!b&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(r,n).finally(function(){v()})):v()}).catch(function(b){s.logger.logError("Error happend while scanning context",b),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",s={user:!0,environment:!0},i="exact",l=function(S){if(S in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(S,"'")},d=Object.keys(e);if(d.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(d.length," keys");var m=Object.keys(e)[0];if(m!==r&&m!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(m===r){var f=e.facingMode;if(typeof f=="string"){if(l(f))return{facingMode:f}}else if(typeof f=="object")if(i in f){if(l(f["".concat(i)]))return{facingMode:{exact:f["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var x=typeof f;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(i in y)return{deviceId:{exact:y["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var v=typeof y;throw"Invalid type of 'deviceId' = ".concat(v)}}}var b=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(b)},t.prototype.computeCanvasDrawConfig=function(e,r,n,s){if(e<=n&&r<=s){var i=(n-e)/2,l=(s-r)/2;return{x:i,y:l,width:e,height:r}}else{var d=e,m=r;return e>n&&(r=n/e*r,e=n),r>s&&(e=s/r*e,r=s),this.logger.log("Image downsampled from "+"".concat(d,"X").concat(m)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?Pn.BORDER_SHADER_MATCH_COLOR:Pn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var s=e,i=r,l=document.createElement("canvas");return l.style.width="".concat(s,"px"),l.style.height="".concat(i,"px"),l.style.display="none",l.id=ii(n)?"qr-canvas":n,l},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,s){if(!(r-s.width<1||n-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var l=(r-s.width)/2,d=(n-s.height)/2;if(i.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Pn.SHADED_REGION_ELEMENT_ID),r-s.width<11||n-s.height<11)this.hasBorderShaders=!1;else{var m=5,f=40;this.insertShaderBorders(i,f,m,-m,null,0,!0),this.insertShaderBorders(i,f,m,-m,null,0,!1),this.insertShaderBorders(i,f,m,null,-m,0,!0),this.insertShaderBorders(i,f,m,null,-m,0,!1),this.insertShaderBorders(i,m,f+m,-m,null,-m,!0),this.insertShaderBorders(i,m,f+m,null,-m,-m,!0),this.insertShaderBorders(i,m,f+m,-m,null,-m,!1),this.insertShaderBorders(i,m,f+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(i)}},t.prototype.insertShaderBorders=function(e,r,n,s,i,l,d){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Pn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(r,"px"),m.style.height="".concat(n,"px"),s!==null&&(m.style.top="".concat(s,"px")),i!==null&&(m.style.bottom="".concat(i,"px")),d?m.style.left="".concat(l,"px"):m.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),tw="data:image/svg+xml;base64,",nz=tw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",sz=tw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Pb=tw+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",iz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Db=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),oz=function(){function t(){this.data=Db.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Db.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),az=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Ab.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(s);var i=document.createElement("a");i.innerText=Ab.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),lz=function(){function t(e,r){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Pb,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=iz,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Pb,this.infoIcon.style.opacity="0.6")},t}(),cz=function(){function t(){var e=this;this.infoDiv=new az,this.infoIcon=new lz(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),uz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},dz=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Lb=function(){function t(){}return t.hasPermissions=function(){return uz(this,void 0,void 0,function(){var e,r,n,s;return dz(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),r=0,n=e;r<n.length;r++)if(s=n[r],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},t}(),oo=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(e){return e===Ws.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Ws.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Fs.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Fs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,s=e;n<s.length;n++){var i=s[n];if(!Fs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},t}(),Hn=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Fi=function(){function t(){}return t.createElement=function(e,r){var n=document.createElement(e);return n.id=r,n.classList.add(Hn.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},t}(),WI=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(x){try{f(n.next(x))}catch(y){l(y)}}function m(x){try{f(n.throw(x))}catch(y){l(y)}}function f(x){x.done?i(x.value):s(x.value).then(d,m)}f((n=n.apply(t,e||[])).next())})},GI=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(f){return function(x){return m([f,x])}}function m(f){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,f[0]&&(r=0)),r;)try{if(n=1,s&&(i=f[0]&2?s.return:f[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,f[1])).done)return i;switch(s=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,s=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(x){f=[6,x],s=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Bb=function(){function t(e,r,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return WI(this,void 0,void 0,function(){var e,r;return GI(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return r=n.sent(),this.propagateFailure(e,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,r){e===r?(this.buttonController.setText(r?_t.torchOffButton():_t.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(e,r){var n=e?_t.torchOnFailedMessage():_t.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),hz=function(){function t(e,r){this.onTorchActionFailureCallback=r,this.torchButton=Fi.createElement("button",Hn.TORCH_BUTTON_ID),this.torchController=new Bb(e,this,r)}return t.prototype.render=function(e,r){var n=this;this.torchButton.innerText=_t.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var s=this;this.torchButton.addEventListener("click",function(i){return WI(n,void 0,void 0,function(){return GI(this,function(l){switch(l.label){case 0:return[4,s.torchController.flipState()];case 1:return l.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Hn.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Hn.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Hn.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Hn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new Bb(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=_t.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,s){var i=new t(r,s);return i.render(e,n),i},t}(),fz=function(){function t(e,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",e.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Fi.createElement("button",Hn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(d){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Fi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(d){if(!(d==null||d.target==null)){var m=d.target;if(!(m.files&&m.files.length===0)){var f=m.files,x=f[0],y=x.name;i.setImageNameToButton(y),n(x)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(d){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(d){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(d){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),d.stopPropagation(),d.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(d){d.stopPropagation(),d.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var m=d.dataTransfer;if(m){var f=m.files;if(!f||f.length===0)return;for(var x=!1,y=0;y<f.length;++y){var v=f.item(y);if(v){var b=/image.*/;if(v.type.match(b)){x=!0;var S=v.name;i.setImageNameToButton(S),n(v),l.innerText=_t.dragAndDropMessage();break}}}x||(l.innerText=_t.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=_t.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var r=20;if(e.length>r){var n=e.substring(0,8),s=e.length,i=e.substring(s-8,s);e="".concat(n,"....").concat(i)}var l=_t.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=l},t.prototype.setInitialValueToButton=function(){var e=_t.fileSelectionChooseImage()+" - "+_t.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){var s=new t(e,r,n);return s},t}(),mz=function(){function t(e){this.selectElement=Fi.createElement("select",Hn.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var s=_t.selectCamera();r.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var i=1,l=0,d=this.cameras;l<d.length;l++){var m=d[l],f=m.id,x=m.label==null?f:m.label;(!x||x==="")&&(x=[_t.anonymousCameraPrefix(),i++].join(" "));var y=document.createElement("option");y.value=f,y.innerText=x,this.options.push(y),this.selectElement.appendChild(y)}r.appendChild(this.selectElement),e.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var r=0,n=this.options;r<n.length;r++){var s=n[r];if(s.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),pz=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fi.createElement("input",Hn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=_t.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,r,n,s){this.rangeInput.min=e.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}(),Dn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Dn||(Dn={}));function gz(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function xz(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var yz=function(){function t(e,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new oo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new VI(this.verbose),this.persistedDataManager=new oz,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(i,l){if(e)e(i,l);else{if(n.lastMatchFound===i)return;n.lastMatchFound=i,n.setHeaderMessage(_t.lastMatch(i),Dn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(i,l){r&&r(i,l)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new kb(this.getScanRegionId(),xz(this.config,this.verbose))},t.prototype.pause=function(e){(ii(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,r=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,s){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(i){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),r(),n()}).catch(function(i){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",i),s(i)}):(e.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Fs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Fs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Fs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Fs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Fs.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",e.appendChild(r),oo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),i=this.getDashboardId();s.id=i,s.style.width="100%",e.appendChild(s),this.setupInitialDashboard(s)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",e.appendChild(r);var n=new cz;n.renderInto(r);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",r.appendChild(s)},t.prototype.createSection=function(e){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",e.appendChild(r)},t.prototype.createCameraListUi=function(e,r,n){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(_t.cameraPermissionRequesting());var i=function(){n||s.createPermissionButton(e,r)};kb.getCameras().then(function(l){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),l&&l.length>0?(e.removeChild(r),s.renderCameraSelection(l)):(s.setHeaderMessage(_t.noCameraFound(),Dn.STATUS_WARNING),i())}).catch(function(l){s.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),s.setHeaderMessage(l,Dn.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,r){var n=this,s=Fi.createElement("button",this.getCameraPermissionButtonId());s.innerText=_t.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,n.createCameraListUi(e,r,s)}),r.appendChild(s)},t.prototype.createPermissionsUi=function(e,r){var n=this;if(oo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Lb.hasPermissions().then(function(s){s?n.createCameraListUi(e,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r))}).catch(function(s){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r)});return}this.createPermissionButton(e,r)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");e.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=oo.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var s=document.createElement("div");s.style.textAlign="center",n.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,s),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(e){var r=oo.isFileScanType(this.currentScanType),n=this,s=function(i){if(!n.html5Qrcode)throw"html5Qrcode not defined";oo.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(_t.loadingImage()),n.html5Qrcode.scanFileV2(i,!0).then(function(l){n.resetHeaderMessage(),n.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){n.setHeaderMessage(l,Dn.STATUS_WARNING),n.qrCodeErrorCallback(l,zI.createFrom(l))}))};this.fileSelectionUi=fz.create(e,r,s)},t.prototype.renderCameraSelection=function(e){var r=this,n=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var i=pz.create(s,!1),l=function(_){var I=_.zoomFeature();if(I.isSupported()){i.setOnCameraZoomValueChangeCallback(function(N){I.apply(N)});var R=1;r.config.defaultZoomValueIfSupported&&(R=r.config.defaultZoomValueIfSupported),R=DU(R,I.min(),I.max()),i.setValues(I.min(),I.max(),R,I.step()),i.show()}},d=mz.create(s,e),m=document.createElement("span"),f=Fi.createElement("button",Hn.CAMERA_START_BUTTON_ID);f.innerText=_t.scanButtonStartScanningText(),m.appendChild(f);var x=Fi.createElement("button",Hn.CAMERA_STOP_BUTTON_ID);x.innerText=_t.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,m.appendChild(x);var y,v=function(_){if(!_.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(_.torchFeature()):y=hz.create(m,_.torchFeature(),{display:"none",marginLeft:"5px"},function(I){n.setHeaderMessage(I,Dn.STATUS_WARNING)}),y.show()};s.appendChild(m);var b=function(_){_||(f.style.display="none"),f.innerText=_t.scanButtonStartScanningText(),f.style.opacity="1",f.disabled=!1,_&&(f.style.display="inline-block")};if(f.addEventListener("click",function(_){f.innerText=_t.scanButtonScanningStarting(),d.disable(),f.disabled=!0,f.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var I=d.getValue();n.persistedDataManager.setLastUsedCameraId(I),n.html5Qrcode.start(I,gz(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(R){x.disabled=!1,x.style.display="inline-block",b(!1);var N=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&v(N),r.config.showZoomSliderIfSupported===!0&&l(N)}).catch(function(R){n.showHideScanTypeSwapLink(!0),d.enable(),b(!0),n.setHeaderMessage(R,Dn.STATUS_WARNING)})}),d.hasSingleItem()&&f.click(),x.addEventListener("click",function(_){if(!n.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,n.html5Qrcode.stop().then(function(I){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),d.enable(),f.disabled=!1,x.style.display="none",f.style.display="inline-block",y&&(y.reset(),y.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(I){x.disabled=!1,n.setHeaderMessage(I,Dn.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var S=n.persistedDataManager.getLastUsedCameraId();d.hasValue(S)?(d.setValue(S),f.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,r=_t.textIfCameraScanSelected(),n=_t.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var l=Fi.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=oo.isCameraScanType(this.currentScanType)?r:n,l.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,oo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),l.innerText=n,e.currentScanType=Ws.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),l.innerText=r,e.currentScanType=Ws.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),i.appendChild(l),s.appendChild(i)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){Lb.hasPermissions().then(function(n){if(n){var s=document.getElementById(r.getCameraPermissionButtonId());if(!s)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,r){r||(r=Dn.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",r){case Dn.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Dn.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Dn.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=nz,this.cameraScanImage.alt=_t.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=sz,this.fileScanImage.alt=_t.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Hn.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Hn.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const wz=()=>{var y,v;const[t,e]=E.useState(!1),[r,n]=E.useState(null),s=E.useRef(null),[i,l]=E.useState(!1),d=typeof window<"u"&&(window.isSecureContext||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),m=()=>{if(s.current){try{s.current.clear()}catch{}s.current=null}e(!0),setTimeout(()=>{if(!document.getElementById("qr-reader")){console.error("qr-reader container not found at init time"),ve.error("Unable to start scanner. Please try again."),e(!1);return}const S={fps:10,qrbox:{width:250,height:250},rememberLastUsedCamera:!0,aspectRatio:1,showTorchButtonIfSupported:!0,supportedScanTypes:d?[Ws.SCAN_TYPE_CAMERA,Ws.SCAN_TYPE_FILE]:[Ws.SCAN_TYPE_FILE]},_=new yz("qr-reader",S,!1);_.render(async I=>{l(!0);try{let R=I;try{const O=JSON.parse(I);R=O.qr_code||O.qrCode||O.orderId||O.id||I}catch{}const{data:N,error:A}=await ue.from("orders").select(`
                *,
                profiles (full_name),
                restaurants (name)
              `).eq("qr_code",R).single();if(A||!N){console.error("Order fetch error:",A),ve.error("Order not found for this QR code");return}n(N),ve.success("Order verified successfully!"),f()}catch(R){console.error("Error verifying order:",R),ve.error("Failed to verify order")}finally{l(!1)}},I=>{typeof I=="string"&&!I.toLowerCase().includes("not found")&&!I.toLowerCase().includes("no qr code")&&!I.toLowerCase().includes("inactive")&&console.debug("QR scan error:",I)}),s.current=_},0)},f=()=>{s.current&&(s.current.clear(),s.current=null),e(!1)};E.useEffect(()=>()=>{s.current&&(s.current.clear(),s.current=null)},[]);const x=async()=>{if(r)try{const{error:b}=await ue.from("orders").update({status:"completed"}).eq("id",r.id);if(b)throw b;ve.success("Order marked as served!"),n(null)}catch(b){console.error("Error updating order:",b),ve.error("Failed to update order status")}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Scanner"}),u.jsx("p",{className:"text-muted-foreground",children:"Scan customer booking QR codes"})]}),!t&&!r&&u.jsx(He,{className:"border-border/50 luxury-shadow",children:u.jsxs(Ct,{className:"py-12 text-center space-y-4",children:[u.jsx(zv,{className:"h-16 w-16 mx-auto text-primary"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Scan"}),u.jsx("p",{className:"text-muted-foreground mb-2",children:"Start the scanner to use your camera or upload a QR code image."}),!d&&u.jsx("p",{className:"text-sm text-yellow-600 mb-2",children:"Live camera requires HTTPS or localhost. On this origin, only image upload will be available."}),u.jsxs(Te,{onClick:m,className:"luxury-gradient",size:"lg",children:[u.jsx(zv,{className:"w-5 h-5 mr-2"}),"Start Scanner"]})]})]})}),t&&u.jsxs(He,{className:"border-border/50 luxury-shadow",children:[u.jsxs(ur,{className:"pb-2",children:[u.jsxs(pr,{className:"flex items-center justify-between gap-3",children:[u.jsx("span",{children:"Scan QR Code"}),u.jsx("span",{className:"text-[0.65rem] font-normal text-muted-foreground",children:"Align customer QR within the frame"})]}),u.jsx(Bi,{className:"mt-1 text-xs text-muted-foreground",children:d?"Choose your camera if available, or upload a QR screenshot. Use landscape for best view.":"On this connection only image upload is available. Use a screenshot/photo of the QR code."})]}),u.jsxs(Ct,{className:"space-y-4 pt-2",children:[u.jsxs("div",{id:"qr-reader",className:`\r
                w-full rounded-2xl border border-border/40 bg-muted/40\r
                px-3 py-4 md:px-5 md:py-6\r
                flex flex-col items-stretch\r
                gap-4\r
              `,children:[u.jsx("style",{children:`
                /* 1. Center content in scan region (including default icon/video) */
                #qr-reader__scan_region {
                  display: flex !important;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  text-align: center;
                  gap: 8px;
                }

                #qr-reader__scan_region img,
                #qr-reader__scan_region svg {
                  margin: 0 auto;
                }

                /* 2. Make camera select large, touch-friendly, and separated */
                #html5-qrcode-select-camera {
                  width: 100% !important;
                  padding: 10px 14px !important;
                  margin: 8px 0 4px 0 !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* 3. Lay out dashboard controls vertically with spacing */
                #qr-reader__dashboard {
                  display: flex;
                  flex-direction: column;
                  align-items: stretch;
                  gap: 8px;
                  padding-top: 4px;
                }

                /* 4. Ensure each button is on its own line, full-width, with space */
                #qr-reader__dashboard .html5-qrcode-element,
                #qr-reader__dashboard button {
                  display: block !important;
                  width: 100% !important;
                  margin: 2px 0 !important;
                  text-align: center !important;
                }

                #qr-reader__dashboard button {
                  padding: 9px 14px !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* Specifically separate the camera stop button from others */
                #html5-qrcode-button-camera-stop {
                  margin-top: 10px !important;
                }

                /* Video aesthetics */
                #qr-reader__scan_region video {
                  border-radius: 18px;
                  max-height: 260px;
                  object-fit: cover;
                }

                @media (min-width: 640px) {
                  #qr-reader__dashboard {
                    max-width: 420px;
                    align-self: center;
                  }
                }
              `}),u.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[u.jsx("div",{className:"text-[0.7rem] font-semibold text-muted-foreground tracking-wide uppercase",children:"Select Camera"}),u.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Choose front or back camera from the dropdown below."})]}),u.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[u.jsx("div",{className:"text-[0.7rem] font-semibold text-foreground",children:"Scan Options"}),u.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Use Start Scanning for live camera or Scan an Image File to upload a QR screenshot."})]})]}),u.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center px-3",children:"If camera buttons or options are hidden, scroll inside the scanner box or rotate your phone."}),u.jsxs(Te,{onClick:f,variant:"outline",className:"w-full mt-1 md:mt-2",children:[u.jsx(zE,{className:"w-4 h-4 mr-2"}),"Stop Scanning"]})]})]}),r&&u.jsxs(He,{className:"border-border/50 luxury-shadow",children:[u.jsxs(ur,{children:[u.jsx(pr,{className:"text-xl",children:"Order Details"}),u.jsxs(Bi,{children:["Order ID: ",r.id]})]}),u.jsxs(Ct,{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),u.jsx("span",{className:"font-medium",children:((y=r.profiles)==null?void 0:y.full_name)||"Customer"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Restaurant:"}),u.jsx("span",{className:"font-medium",children:(v=r.restaurants)==null?void 0:v.name})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Order Type:"}),u.jsx("span",{className:"font-medium capitalize",children:r.order_type.replace("_"," ")})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted-foreground",children:"Status:"}),u.jsx("span",{className:"font-medium capitalize",children:r.status})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-semibold",children:"Items:"}),u.jsx("ul",{className:"space-y-1",children:r.order_items.map((b,S)=>u.jsxs("li",{className:"flex justify-between text-sm",children:[u.jsxs("span",{children:[b.quantity,"x ",b.name]}),u.jsxs("span",{children:[(b.price*b.quantity).toLocaleString()," MMK"]})]},S))})]}),u.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[u.jsx("span",{className:"font-semibold",children:"Total:"}),u.jsxs("span",{className:"font-bold text-lg",children:[r.total_amount.toLocaleString()," MMK"]})]}),u.jsxs("div",{className:"flex gap-2 pt-4",children:[u.jsxs(Te,{onClick:x,className:"flex-1 luxury-gradient",size:"lg",children:[u.jsx(O0,{className:"w-5 h-5 mr-2"}),"Mark as Served"]}),u.jsx(Te,{onClick:()=>n(null),variant:"outline",className:"flex-1",size:"lg",children:"Scan Another"})]})]})]})]})};var am="Switch",[vz,SH]=gn(am),[bz,_z]=vz(am),YI=E.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:l,disabled:d,value:m="on",onCheckedChange:f,form:x,...y}=t,[v,b]=E.useState(null),S=Je(e,A=>b(A)),_=E.useRef(!1),I=v?x||!!v.closest("form"):!0,[R,N]=yi({prop:s,defaultProp:i??!1,onChange:f,caller:am});return u.jsxs(bz,{scope:r,checked:R,disabled:d,children:[u.jsx(Le.button,{type:"button",role:"switch","aria-checked":R,"aria-required":l,"data-state":QI(R),"data-disabled":d?"":void 0,disabled:d,value:m,...y,ref:S,onClick:Ne(t.onClick,A=>{N(O=>!O),I&&(_.current=A.isPropagationStopped(),_.current||A.stopPropagation())})}),I&&u.jsx(KI,{control:v,bubbles:!_.current,name:n,value:m,checked:R,required:l,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});YI.displayName=am;var qI="SwitchThumb",XI=E.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=_z(qI,r);return u.jsx(Le.span,{"data-state":QI(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});XI.displayName=qI;var Cz="SwitchBubbleInput",KI=E.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},i)=>{const l=E.useRef(null),d=Je(l,i),m=Gy(r),f=qx(e);return E.useEffect(()=>{const x=l.current;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(m!==r&&b){const S=new Event("click",{bubbles:n});b.call(x,r),x.dispatchEvent(S)}},[m,r,n]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:d,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});KI.displayName=Cz;function QI(t){return t?"checked":"unchecked"}var ZI=YI,Ez=XI;const JI=E.forwardRef(({className:t,...e},r)=>u.jsx(ZI,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:u.jsx(Ez,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));JI.displayName=ZI.displayName;const Sz=()=>{const{user:t}=Gr(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[i,l]=E.useState(null),[d,m]=E.useState(!1),[f,x]=E.useState(null),[y,v]=E.useState({name:"",description:"",price:"",image_url:""});E.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const{data:A,error:O}=await ue.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(O)throw O;l(A.id);const{data:k,error:F}=await ue.from("menu_items").select("*").eq("restaurant_id",A.id).order("created_at",{ascending:!1});if(F)throw F;r(k||[])}catch(A){console.error("Error fetching menu:",A),ve.error("Failed to load menu items")}finally{s(!1)}},S=()=>{x(null),v({name:"",description:"",price:"",image_url:""}),m(!0)},_=A=>{x(A.id),v({name:A.name,description:A.description||"",price:A.price.toString(),image_url:A.image_url||""}),m(!0)},I=async A=>{try{const{error:O}=await ue.from("menu_items").delete().eq("id",A);if(O)throw O;r(e.filter(k=>k.id!==A)),ve.success("Menu item deleted")}catch(O){console.error("Error deleting item:",O),ve.error("Failed to delete menu item")}},R=async()=>{if(!y.name||!y.price||!i){ve.error("Please fill in all required fields");return}try{const A={name:y.name,description:y.description||null,price:parseFloat(y.price),image_url:y.image_url||null,restaurant_id:i};if(f){const{error:O}=await ue.from("menu_items").update(A).eq("id",f);if(O)throw O;r(e.map(k=>k.id===f?{...k,...A}:k)),ve.success("Menu item updated")}else{const{data:O,error:k}=await ue.from("menu_items").insert([{...A,available:!0}]).select().single();if(k)throw k;r([O,...e]),ve.success("Menu item added")}m(!1),v({name:"",description:"",price:"",image_url:""})}catch(A){console.error("Error saving menu item:",A),ve.error("Failed to save menu item")}},N=async A=>{const O=e.find(k=>k.id===A);if(O)try{const{error:k}=await ue.from("menu_items").update({available:!O.available}).eq("id",A);if(k)throw k;r(e.map(F=>F.id===A?{...F,available:!F.available}:F)),ve.success("Availability updated")}catch(k){console.error("Error updating availability:",k),ve.error("Failed to update availability")}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Menu"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage your menu items"})]}),u.jsxs(Te,{onClick:S,className:"luxury-gradient",children:[u.jsx(ko,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),n?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?u.jsx(He,{children:u.jsx(Ct,{className:"py-12 text-center text-muted-foreground",children:"No menu items yet. Add your first item to get started!"})}):u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(A=>u.jsxs(He,{children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:A.image_url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400",alt:A.name,className:"w-full h-48 object-cover"}),u.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[u.jsx(Te,{size:"icon",variant:"secondary",onClick:()=>_(A),children:u.jsx(M0,{className:"h-4 w-4"})}),u.jsx(Te,{size:"icon",variant:"destructive",onClick:()=>I(A.id),children:u.jsx(Ma,{className:"h-4 w-4"})})]})]}),u.jsxs(Ct,{className:"p-4 space-y-2",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold",children:A.name}),A.description&&u.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:A.description})]}),u.jsxs("p",{className:"font-semibold text-primary ml-2",children:[A.price.toLocaleString()," MMK"]})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2",children:[u.jsx("span",{className:"text-sm text-muted-foreground",children:"Available"}),u.jsx(JI,{checked:A.available,onCheckedChange:()=>N(A.id)})]})]})]},A.id))}),u.jsx(Xs,{open:d,onOpenChange:m,children:u.jsxs(_s,{children:[u.jsx(bi,{children:u.jsxs(_i,{children:[f?"Edit":"Add"," Menu Item"]})}),u.jsxs("div",{className:"space-y-4 py-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"name",children:"Name *"}),u.jsx(ot,{id:"name",value:y.name,onChange:A=>v({...y,name:A.target.value}),placeholder:"e.g., Traditional Mohinga"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"price",children:"Price (MMK) *"}),u.jsx(ot,{id:"price",type:"number",value:y.price,onChange:A=>v({...y,price:A.target.value}),placeholder:"5000"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"description",children:"Description"}),u.jsx(ot,{id:"description",value:y.description,onChange:A=>v({...y,description:A.target.value}),placeholder:"Describe the dish..."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"image_url",children:"Image URL"}),u.jsx(ot,{id:"image_url",value:y.image_url,onChange:A=>v({...y,image_url:A.target.value}),placeholder:"https://..."})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[u.jsx(Te,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),u.jsxs(Te,{onClick:R,className:"luxury-gradient",children:[f?"Update":"Add"," Item"]})]})]})]})})]})},Nz=()=>{const{user:t}=Gr(),[e,r]=E.useState(!0),[n,s]=E.useState(!1),[i,l]=E.useState(null),[d,m]=E.useState({name:"",address:"",phone:"",description:"",image_url:"",open_hours:""});E.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{const{data:y,error:v}=await ue.from("restaurants").select("*").eq("owner_id",t==null?void 0:t.id).single();if(v)throw v;l(y.id),m({name:y.name,address:y.address,phone:y.phone||"",description:y.description||"",image_url:y.image_url||"",open_hours:y.open_hours||""})}catch(y){console.error("Error fetching restaurant:",y),ve.error("Failed to load restaurant data")}finally{r(!1)}},x=async()=>{if(i){s(!0);try{const{error:y}=await ue.from("restaurants").update({name:d.name,address:d.address,phone:d.phone,description:d.description,image_url:d.image_url,open_hours:d.open_hours}).eq("id",i);if(y)throw y;ve.success("Restaurant information updated successfully!")}catch(y){console.error("Error updating restaurant:",y),ve.error("Failed to update restaurant information")}finally{s(!1)}}};return e?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx(Uo,{className:"h-8 w-8 animate-spin text-primary"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Restaurant Settings"}),u.jsx("p",{className:"text-muted-foreground",children:"Update your restaurant information"})]}),u.jsxs(He,{className:"border-border/50 luxury-shadow",children:[u.jsxs(ur,{children:[u.jsx(pr,{children:"Restaurant Information"}),u.jsx(Bi,{children:"Update your restaurant details and settings"})]}),u.jsxs(Ct,{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"image_url",children:"Cover Photo URL"}),u.jsxs("div",{className:"space-y-2",children:[d.image_url&&u.jsx("div",{className:"relative h-48 bg-muted rounded-lg overflow-hidden",children:u.jsx("img",{src:d.image_url,alt:"Restaurant cover",className:"w-full h-full object-cover"})}),u.jsx(ot,{id:"image_url",value:d.image_url,onChange:y=>m({...d,image_url:y.target.value}),placeholder:"https://..."})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"name",children:"Restaurant Name *"}),u.jsx(ot,{id:"name",value:d.name,onChange:y=>m({...d,name:y.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"address",children:"Address *"}),u.jsx(ot,{id:"address",value:d.address,onChange:y=>m({...d,address:y.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"phone",children:"Phone Number *"}),u.jsx(ot,{id:"phone",type:"tel",value:d.phone,onChange:y=>m({...d,phone:y.target.value})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"open_hours",children:"Open Hours"}),u.jsx(ot,{id:"open_hours",value:d.open_hours,onChange:y=>m({...d,open_hours:y.target.value}),placeholder:"9:00 AM - 10:00 PM"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Qe,{htmlFor:"description",children:"Description"}),u.jsx($c,{id:"description",value:d.description,onChange:y=>m({...d,description:y.target.value}),rows:4,placeholder:"Tell customers about your restaurant..."})]}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsxs(Te,{onClick:x,className:"luxury-gradient",children:[u.jsx(aM,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})};var Az="Separator",Fb="horizontal",Tz=["horizontal","vertical"],e4=E.forwardRef((t,e)=>{const{decorative:r,orientation:n=Fb,...s}=t,i=Iz(n)?n:Fb,d=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return u.jsx(Le.div,{"data-orientation":i,...d,...s,ref:e})});e4.displayName=Az;function Iz(t){return Tz.includes(t)}var t4=e4;const kg=E.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>u.jsx(t4,{ref:s,decorative:r,orientation:e,className:Ie("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));kg.displayName=t4.displayName;const Rz=({post:t,onBack:e,onEdit:r,onDelete:n,onTogglePin:s})=>{const{user:i}=Gr(),[l,d]=E.useState([]),[m,f]=E.useState(!0),[x,y]=E.useState(null),[v,b]=E.useState(null),[S,_]=E.useState({});E.useEffect(()=>{I()},[]);const I=async()=>{try{f(!0);let{data:O,error:k}=await ue.from("blog_comments_with_profiles").select("*").eq("blog_post_id",t.id).order("created_at",{ascending:!1});if(k){console.warn("View query failed, trying original approach:",k);const F=await ue.from("blog_comments").select(`
            *,
            profiles:customer_id (
              full_name
            )
          `).eq("blog_post_id",t.id).eq("is_deleted",!1).order("created_at",{ascending:!1});O=F.data,k=F.error}if(k){console.error("Error loading comments",k);return}d(O||[])}catch(O){console.error("Unexpected error loading comments",O)}finally{f(!1)}},R=async O=>{y(O);try{const{error:k}=await ue.from("blog_comments").update({is_deleted:!0}).eq("id",O);if(k)throw k;d(F=>F.filter(B=>B.id!==O))}catch(k){console.error("Failed to delete comment",k)}finally{y(null)}},N=async O=>{var F;const k=(F=S[O])==null?void 0:F.trim();if(!(!k||!i))try{const{data:B,error:P}=await ue.from("blog_comments").insert({blog_post_id:t.id,customer_id:i.id,content:k,parent_comment_id:O}).select(`
          *,
          profiles:customer_id (
            full_name
          )
        `).single();if(P)throw P;setTimeout(()=>{I()},100),_(M=>({...M,[O]:""})),b(null)}catch(B){console.error("Failed to reply to comment",B)}},A=O=>O.split(" ").map(k=>k[0]).join("").slice(0,2).toUpperCase();return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10",children:[u.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:u.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(Te,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-foreground",onClick:e,children:[u.jsx(Ja,{className:"w-4 h-4"}),"Back to Posts"]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Post Details"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Full view with customer feedback"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Te,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>r(t),children:[u.jsx(M0,{className:"w-4 h-4"}),u.jsx("span",{className:"text-[10px]",children:"Edit"})]}),u.jsxs(Te,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive/80 border-destructive/20 hover:border-destructive/40",onClick:()=>n(t.id),children:[u.jsx(Ma,{className:"w-4 h-4"}),u.jsx("span",{className:"text-[10px]",children:"Delete"})]})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6 space-y-6",children:[u.jsxs(He,{className:"bg-card/90 backdrop-blur-md border-border/40 overflow-hidden",children:[t.is_pinned&&u.jsx("div",{className:"absolute inset-x-0 top-0 h-[3px] bg-gradient-to-r from-primary via-amber-400 to-primary/70 z-10"}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"space-y-2 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[u.jsx("h2",{className:"text-2xl font-bold text-foreground",children:t.title}),u.jsxs("div",{className:"flex items-center gap-2",children:[t.is_published?u.jsxs(kr,{className:"h-6 px-3 text-[9px] bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[u.jsx(O0,{className:"w-3 h-3"}),"Live"]}):u.jsx(kr,{variant:"outline",className:"h-6 px-3 text-[9px] border-muted-foreground/40 text-muted-foreground",children:"Draft"}),t.is_pinned&&u.jsxs(kr,{variant:"outline",className:"h-6 px-3 text-[9px] border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[u.jsx(Mf,{className:"w-3 h-3"}),"Highlight"]})]})]}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(BE,{className:"w-4 h-4"}),u.jsxs("span",{children:["Created: ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),t.created_at!==t.updated_at&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(ja,{className:"w-4 h-4"}),u.jsxs("span",{children:["Updated: ",new Date(t.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]}),u.jsx(Te,{variant:t.is_pinned?"default":"outline",size:"sm",className:Ie("gap-2 rounded-full",t.is_pinned?"bg-amber-400/10 border-amber-400/60 text-amber-400 hover:bg-amber-400/15":"border-border/40 hover:border-primary/40 text-muted-foreground hover:text-primary"),onClick:()=>s(t),children:t.is_pinned?u.jsxs(u.Fragment,{children:[u.jsx(qE,{className:"w-4 h-4"}),"Unpin"]}):u.jsxs(u.Fragment,{children:[u.jsx(Mf,{className:"w-4 h-4"}),"Pin as Highlight"]})})]}),t.hero_image_url&&u.jsx("div",{className:"mt-4 overflow-hidden rounded-xl border border-border/40 bg-muted/40",children:u.jsx("img",{src:t.hero_image_url,alt:t.title,className:"w-full h-48 object-cover"})}),u.jsx("div",{className:"prose prose-sm max-w-none",children:u.jsx("div",{className:"text-[15px] text-foreground leading-relaxed whitespace-pre-line",children:t.content})}),t.linked_menu_items&&t.linked_menu_items.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(kg,{}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(GE,{className:"w-4 h-4 text-primary"}),u.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Featured Menu Items"}),u.jsxs("span",{className:"text-[11px] text-muted-foreground",children:["(",t.linked_menu_items.length,")"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:t.linked_menu_items.map(O=>u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/5 border border-primary/15 text-sm text-primary/80",children:[u.jsx(j1,{className:"w-4 h-4"}),u.jsx("span",{className:"font-medium",children:O.name}),O.price&&u.jsxs("span",{className:"text-primary/60",children:["- ",O.price.toLocaleString()," MMK"]})]},O.id))})]})]}),u.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Zh,{className:"w-4 h-4"}),u.jsxs("span",{children:[l.length," customer ",l.length===1?"comment":"comments"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Jh,{className:"w-4 h-4"}),u.jsx("span",{children:"Visible to all customers"})]})]})]})]}),u.jsx(He,{className:"bg-card/90 backdrop-blur-md border-border/40",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Zh,{className:"w-5 h-5 text-primary"}),u.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Customer Feedback"}),u.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",l.length,")"]})]}),u.jsx(kg,{className:"mb-4"}),m?u.jsx("div",{className:"space-y-3",children:[...Array(3)].map((O,k)=>u.jsxs("div",{className:"flex items-start gap-3 p-4 bg-background/50 rounded-lg animate-pulse",children:[u.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),u.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),u.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},k))}):l.length===0?u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(Zh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No customer feedback yet"}),u.jsx("p",{className:"text-xs mt-1",children:"Comments will appear here once customers start engaging with your post"})]}):u.jsx(nm,{className:"h-[400px] pr-2",children:u.jsx("div",{className:"space-y-4",children:l.filter(O=>O.parent_comment_id===null||O.parent_comment_id===void 0).map(O=>{var P;const k=O.display_name||`Guest ${O.customer_id.slice(0,6).toUpperCase()}`,F=A(k),B=l.filter(M=>M.parent_comment_id===O.id);return u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("div",{className:"mt-0.5 w-6 h-6 rounded-full bg-gradient-to-br from-amber-400 via-yellow-300 to-amber-500 text-[8px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-amber-300/70",children:F}),u.jsxs("div",{className:"flex-1 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[9px] text-foreground font-medium truncate max-w-[120px]",children:k}),u.jsxs("span",{className:"text-[8px] text-muted-foreground whitespace-nowrap",children:[new Date(O.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(O.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),u.jsx("p",{className:"text-[9px] text-foreground leading-snug",children:O.content}),B.length>0&&u.jsx("div",{className:"space-y-2 mt-2 border-l-2 border-border/40 pl-3",children:B.map(M=>{const $=M.display_name||`Guest ${M.customer_id.slice(0,6).toUpperCase()}`,G=A($);return u.jsxs("div",{className:"flex items-start gap-2 opacity-80",children:[u.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full bg-gradient-to-br from-emerald-400 via-emerald-300 to-emerald-500 text-[7px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-emerald-300/70",children:G}),u.jsxs("div",{className:"flex-1 space-y-1",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-[8px] text-foreground font-medium truncate max-w-[100px]",children:[$," (Reply)"]}),u.jsxs("span",{className:"text-[7px] text-muted-foreground whitespace-nowrap",children:[new Date(M.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(M.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),u.jsx("p",{className:"text-[8px] text-foreground leading-snug",children:M.content})]}),u.jsx(Te,{variant:"ghost",size:"sm",className:"h-5 w-5 p-1 text-[6px] text-destructive hover:text-destructive/80 hover:bg-destructive/5",onClick:()=>R(M.id),disabled:x===M.id,title:"Delete reply",children:x===M.id?u.jsx(ja,{className:"w-2 h-2 animate-spin"}):u.jsx(Ma,{className:"w-2 h-2"})})]},M.id)})})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-1 text-[7px] text-muted-foreground hover:text-primary hover:bg-primary/5",onClick:()=>b(O.id),title:"Reply to comment",children:u.jsx(oM,{className:"w-3 h-3"})}),u.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-1 text-[7px] text-destructive hover:text-destructive/80 hover:bg-destructive/5",onClick:()=>R(O.id),disabled:x===O.id,title:"Delete comment",children:x===O.id?u.jsx(ja,{className:"w-3 h-3 animate-spin"}):u.jsx(Ma,{className:"w-3 h-3"})})]})]}),v===O.id&&u.jsxs("div",{className:"ml-8 flex gap-2",children:[u.jsx($c,{placeholder:"Write a reply...",value:S[O.id]||"",onChange:M=>_($=>({...$,[O.id]:M.target.value})),className:"text-[9px] resize-none border-border/40 bg-background/80 focus-visible:ring-primary/40 h-16",rows:2}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx(Te,{size:"sm",className:"h-6 px-2 text-[8px] rounded-full bg-primary/90 hover:bg-primary shadow-sm",onClick:()=>N(O.id),disabled:!((P=S[O.id])!=null&&P.trim()),children:"Send"}),u.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[8px] text-muted-foreground",onClick:()=>{b(null),_(M=>({...M,[O.id]:""}))},children:"Cancel"})]})]})]},O.id)})})})]})})]})]})},mu={title:"",content:"",excerpt:"",is_published:!0,is_pinned:!1,hero_image_url:"",linked_menu_item_ids:[]},Oz=()=>{const{user:t}=Gr(),[e,r]=E.useState(null),[n,s]=E.useState([]),[i,l]=E.useState([]),[d,m]=E.useState(!0),[f,x]=E.useState(!1),[y,v]=E.useState(null),[b,S]=E.useState(null),[_,I]=E.useState(mu),[R,N]=E.useState(!1),A=E.useMemo(()=>i.filter(z=>z.image_url),[i]);E.useEffect(()=>{(async()=>{if(!t){m(!1);return}let V=null;try{const{data:Y,error:q}=await ue.from("profiles").select("restaurant_id").eq("id",t.id).maybeSingle();!q&&Y&&Y.restaurant_id&&(V=Y.restaurant_id)}catch(Y){console.warn("profiles.restaurant_id lookup skipped or failed",Y)}let J=V;if(!J)try{const{data:Y,error:q}=await ue.from("restaurants").select("id").eq("owner_id",t.id).maybeSingle();!q&&(Y!=null&&Y.id)&&(J=Y.id)}catch(Y){console.warn("restaurants.owner_id lookup failed",Y)}if(!J){console.warn("No restaurant associated with this owner. Ensure either profiles.restaurant_id or restaurants.owner_id is set."),m(!1);return}r(J),await Promise.all([O(J),k(J)]),m(!1)})()},[t]);const O=async z=>{const{data:V,error:J}=await ue.from("menu_items").select("id, name, image_url, price").eq("restaurant_id",z).order("name",{ascending:!0});if(J){console.error("Error loading menu items",J);return}l(V||[])},k=async z=>{const{data:V,error:J}=await ue.from("blog_posts").select("*").eq("restaurant_id",z).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if(J){console.error("Error loading blog posts",J);return}const Y=V||[];if(Y.length>0){const q=Y.map(ce=>ce.id),{data:Q,error:ie}=await ue.from("blog_post_menu_items").select("blog_post_id, menu_item_id").in("blog_post_id",q);if(ie){console.error("Error loading blog_post_menu_items",ie),s(Y);return}const fe={};(Q||[]).forEach(ce=>{fe[ce.blog_post_id]||(fe[ce.blog_post_id]=[]),fe[ce.blog_post_id].push(ce.menu_item_id)});const oe={};i.forEach(ce=>{oe[ce.id]=ce});const le=Y.map(ce=>{const Be=fe[ce.id]||[];return{...ce,linked_menu_items:Be.map(xe=>oe[xe]).filter(Boolean)}});s(le)}else s([])},F=()=>{I(mu),N(!0)},B=z=>{var V;I({id:z.id,title:z.title,content:z.content,excerpt:z.excerpt||"",is_published:z.is_published,is_pinned:z.is_pinned,hero_image_url:z.hero_image_url||"",linked_menu_item_ids:((V=z.linked_menu_items)==null?void 0:V.map(J=>J.id))||[]}),N(!0)},P=async z=>{if(e)try{const{error:V}=await ue.from("blog_posts").update({is_pinned:!z.is_pinned}).eq("id",z.id).eq("restaurant_id",e);if(V)throw V;s(J=>J.map(Y=>Y.id===z.id?{...Y,is_pinned:!Y.is_pinned}:Y))}catch(V){console.error("Failed to toggle pin",V)}},M=async z=>{if(e){v(z);try{const{error:V}=await ue.from("blog_posts").delete().eq("id",z).eq("restaurant_id",e);if(V)throw V;s(J=>J.filter(Y=>Y.id!==z))}catch(V){console.error("Failed to delete blog post",V)}finally{v(null)}}},$=async()=>{if(!(!e||!t)&&!(!_.title.trim()||!_.content.trim())){x(!0);try{const z={restaurant_id:e,author_id:t.id,title:_.title.trim(),content:_.content.trim(),excerpt:_.excerpt.trim()?_.excerpt.trim():_.content.trim().slice(0,140),hero_image_url:_.hero_image_url||null,is_published:_.is_published,is_pinned:_.is_pinned};let V=_.id;if(_.id){const{data:J,error:Y}=await ue.from("blog_posts").update(z).eq("id",_.id).eq("restaurant_id",e).select("*").single();if(Y)throw Y;V=J.id,s(q=>q.map(Q=>Q.id===J.id?{...Q,...J}:Q))}else{const{data:J,error:Y}=await ue.from("blog_posts").insert(z).select("*").single();if(Y)throw Y;V=J.id,s(q=>[{...J,linked_menu_items:[]},...q])}V&&await G(V,_.linked_menu_item_ids),await k(e),N(!1),I(mu)}catch(z){console.error("Failed to save blog post",z)}finally{x(!1)}}},G=async(z,V)=>{const{data:J,error:Y}=await ue.from("blog_post_menu_items").select("menu_item_id").eq("blog_post_id",z);Y&&console.error("Failed to load existing blog_post_menu_items",Y);const q=new Set((J||[]).map(oe=>oe.menu_item_id)),Q=new Set(V),ie=V.filter(oe=>!q.has(oe)),fe=Array.from(q).filter(oe=>!Q.has(oe));if(ie.length>0){const oe=ie.map(ce=>({blog_post_id:z,menu_item_id:ce})),{error:le}=await ue.from("blog_post_menu_items").insert(oe);le&&console.error("Failed to insert blog_post_menu_items",le)}if(fe.length>0){const{error:oe}=await ue.from("blog_post_menu_items").delete().eq("blog_post_id",z).in("menu_item_id",fe);oe&&console.error("Failed to delete blog_post_menu_items",oe)}},K=z=>{I(V=>({...V,hero_image_url:z.image_url||V.hero_image_url}))},ee=z=>{I(V=>{const J=V.linked_menu_item_ids.includes(z);return{...V,linked_menu_item_ids:J?V.linked_menu_item_ids.filter(Y=>Y!==z):[...V.linked_menu_item_ids,z]}})};return d?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nd,{className:"w-4 h-4 text-primary"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading your blog studio..."})]}),u.jsxs(He,{className:"p-4 bg-card/80 border-border/40 animate-pulse",children:[u.jsx("div",{className:"h-3 w-24 bg-muted/70 rounded mb-2"}),u.jsx("div",{className:"h-3 w-40 bg-muted/60 rounded mb-1"}),u.jsx("div",{className:"h-3 w-32 bg-muted/50 rounded"})]})]}):e?u.jsxs("div",{className:"space-y-5",children:[b?u.jsx(Rz,{post:b,onBack:()=>S(null),onEdit:z=>{S(null),B(z)},onDelete:z=>{S(null),M(z)},onTogglePin:z=>{P(z),b&&b.id===z.id&&S(z)}}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"inline-flex items-center gap-2",children:[u.jsx(Lx,{className:"w-4 h-4 text-primary"}),u.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-primary/80",children:"Blog & Promotions Studio"})]}),u.jsx("h2",{className:"text-xl font-semibold text-foreground leading-tight",children:"Tell your food story"}),u.jsx("p",{className:"text-[11px] text-muted-foreground max-w-md",children:"Create minimalist, elegant posts to highlight your signature dishes, seasonal menus, and special offers. Customers read these on the Blog tab."})]}),u.jsxs(Te,{size:"sm",className:"gap-2 rounded-full bg-primary/90 hover:bg-primary shadow-sm",onClick:F,children:[u.jsx(ko,{className:"w-3 h-3"}),u.jsx("span",{className:"text-[10px] font-medium",children:"New Post"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.length===0&&u.jsx(He,{className:"p-4 bg-card/80 border-dashed border-border/60",children:u.jsx("p",{className:"text-[11px] text-muted-foreground",children:"You haven't published any stories yet. Create your first post to showcase your restaurant's personality and promotions."})}),n.map(z=>u.jsxs(He,{className:Ie("relative overflow-hidden bg-card/90 border-border/40 group cursor-pointer","transition-all duration-300 hover:-translate-y-0.5 hover:shadow-[0_16px_40px_rgba(15,23,42,0.16)]"),onClick:()=>S(z),children:[z.is_pinned&&u.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-amber-400 to-primary/70"}),u.jsxs("div",{className:"p-3.5 space-y-2.5",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{className:"space-y-1.5 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("h3",{className:"text-sm font-semibold text-foreground",children:z.title}),z.is_published?u.jsxs(kr,{className:"h-5 px-2 text-[8px] bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[u.jsx(O0,{className:"w-3 h-3"}),"Live"]}):u.jsx(kr,{variant:"outline",className:"h-5 px-2 text-[8px] border-muted-foreground/40 text-muted-foreground",children:"Draft"}),z.is_pinned&&u.jsxs(kr,{variant:"outline",className:"h-5 px-2 text-[8px] border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[u.jsx(Mf,{className:"w-3 h-3"}),"Highlight"]})]}),u.jsx("p",{className:"text-[9px] text-muted-foreground line-clamp-2",children:z.excerpt||z.content.slice(0,120)}),u.jsxs("div",{className:"flex items-center gap-2 text-[8px] text-muted-foreground/80",children:[u.jsx(BE,{className:"w-3 h-3"}),u.jsx("span",{children:new Date(z.created_at).toLocaleDateString()}),u.jsx("span",{className:"mx-1",children:""}),u.jsx("span",{children:z.is_published?"Visible in customer Blog":"Not visible to customers"})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsxs(op,{children:[u.jsx(ap,{asChild:!0,children:u.jsx("button",{onClick:()=>P(z),className:Ie("w-7 h-7 rounded-full border flex items-center justify-center transition-colors",z.is_pinned?"bg-amber-400/10 border-amber-400/60 text-amber-400":"bg-card/80 border-border/60 text-muted-foreground hover:text-primary hover:border-primary/40"),children:z.is_pinned?u.jsx(Mf,{className:"w-3 h-3"}):u.jsx(qE,{className:"w-3 h-3"})})}),u.jsx(tf,{className:"text-[9px]",children:z.is_pinned?"Unpin from top of customer blog":"Pin as highlight on customer blog"})]}),u.jsxs(op,{children:[u.jsx(ap,{asChild:!0,children:u.jsx("button",{onClick:()=>B(z),className:"w-7 h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-muted-foreground hover:text-primary hover:border-primary/40 transition-colors",children:u.jsx(M0,{className:"w-3 h-3"})})}),u.jsx(tf,{className:"text-[9px]",children:"Edit post"})]}),u.jsxs(op,{children:[u.jsx(ap,{asChild:!0,children:u.jsx("button",{onClick:()=>M(z.id),disabled:y===z.id,className:"w-7 h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-destructive/80 hover:bg-destructive/5 hover:border-destructive/40 transition-colors disabled:opacity-60",children:y===z.id?u.jsx(Uo,{className:"w-3 h-3 animate-spin"}):u.jsx(Ma,{className:"w-3 h-3"})})}),u.jsx(tf,{className:"text-[9px]",children:"Delete post"})]})]})]}),z.linked_menu_items&&z.linked_menu_items.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:z.linked_menu_items.map(V=>u.jsxs("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-primary/5 border border-primary/15 text-[7px] text-primary/80",children:[u.jsx(j1,{className:"w-2.5 h-2.5"}),u.jsx("span",{className:"truncate max-w-[80px]",children:V.name})]},V.id))}),z.hero_image_url&&u.jsx("div",{className:"mt-1 overflow-hidden rounded-lg border border-border/40 bg-muted/40",children:u.jsx("img",{src:z.hero_image_url,alt:z.title,className:"w-full h-20 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})})]})]},z.id))]})]}),u.jsx(Xs,{open:R,onOpenChange:z=>{N(z),z||I(mu)},children:u.jsxs(_s,{className:"max-w-lg w-full bg-card/95 backdrop-blur-xl border-border/60",children:[u.jsx(bi,{children:u.jsxs(_i,{className:"flex items-center gap-2 text-sm",children:[u.jsx(nd,{className:"w-4 h-4 text-primary"}),_.id?"Edit Blog Post":"Create New Blog Post"]})}),u.jsxs("div",{className:"mt-2 space-y-3 max-h-[70vh] overflow-y-auto pr-1",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Title"}),u.jsx(ot,{value:_.title,onChange:z=>I(V=>({...V,title:z.target.value})),placeholder:"E.g. Weekend Tasting Menu  Limited Seats",className:"h-8 text-[10px] bg-background/70 border-border/50"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Short preview (optional)"}),u.jsx(ot,{value:_.excerpt,onChange:z=>I(V=>({...V,excerpt:z.target.value})),placeholder:"A one-line teaser that appears in the customer blog listing.",className:"h-8 text-[9px] bg-background/70 border-border/40"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-[9px] text-muted-foreground",children:"Story & details"}),u.jsx($c,{value:_.content,onChange:z=>I(V=>({...V,content:z.target.value})),placeholder:"Describe your promotion, new menu, chefs story, or dining experience in a clean, friendly tone...",className:"min-h-[90px] text-[9px] leading-relaxed bg-background/70 border-border/40 resize-y"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("label",{className:"text-[9px] text-muted-foreground flex items-center gap-1.5",children:[u.jsx(j1,{className:"w-3 h-3 text-primary/80"}),"Hero image (from your menu)"]}),_.hero_image_url&&u.jsx("button",{onClick:()=>I(z=>({...z,hero_image_url:""})),className:"text-[8px] text-muted-foreground hover:text-destructive transition-colors",children:"Clear"})]}),_.hero_image_url&&u.jsx("div",{className:"overflow-hidden rounded-lg border border-primary/25 bg-muted/40 mb-1.5",children:u.jsx("img",{src:_.hero_image_url,alt:"Selected hero",className:"w-full h-20 object-cover"})}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-20 overflow-y-auto",children:[A.length===0&&u.jsx("p",{className:"text-[8px] text-muted-foreground",children:"Add images to your menu items to see quick hero suggestions here."}),A.map(z=>u.jsxs("button",{type:"button",onClick:()=>K(z),className:Ie("relative border rounded-md overflow-hidden","border-border/40 hover:border-primary/50 transition-colors","w-16 h-10 bg-muted/40"),children:[z.image_url?u.jsx("img",{src:z.image_url,alt:z.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-[7px] text-muted-foreground px-1",children:z.name}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/50 to-transparent",children:u.jsx("span",{className:"block text-[6px] text-white px-1 truncate",children:z.name})})]},z.id))]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-[9px] text-muted-foreground flex items-center gap-1.5",children:[u.jsx(GE,{className:"w-3 h-3 text-primary/80"}),"Attach featured menu items (optional)"]}),u.jsxs("div",{className:"flex flex-wrap gap-1 max-h-16 overflow-y-auto",children:[i.length===0&&u.jsx("p",{className:"text-[8px] text-muted-foreground",children:"No menu items found. Create menu items first to link them here."}),i.map(z=>{const V=_.linked_menu_item_ids.includes(z.id);return u.jsxs("button",{type:"button",onClick:()=>ee(z.id),className:Ie("px-1.5 py-0.5 rounded-full border text-[7px] flex items-center gap-1",V?"bg-primary/10 border-primary/50 text-primary":"bg-background/60 border-border/40 text-muted-foreground hover:text-primary hover:border-primary/40"),children:[z.image_url&&u.jsx("span",{className:"w-3 h-3 rounded-full bg-cover bg-center",style:{backgroundImage:`url(${z.image_url})`}}),u.jsx("span",{className:"truncate max-w-[80px]",children:z.name})]},z.id)})]})]}),u.jsxs("div",{className:"flex items-center justify-between gap-4 pt-1",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("label",{className:"flex items-center gap-1.5 text-[8px] text-muted-foreground",children:[u.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:_.is_published,onChange:z=>I(V=>({...V,is_published:z.target.checked}))}),u.jsx("span",{children:"Publish to customer Blog"})]})}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("label",{className:"flex items-center gap-1.5 text-[8px] text-muted-foreground",children:[u.jsx("input",{type:"checkbox",className:"w-3 h-3 accent-primary",checked:_.is_pinned,onChange:z=>I(V=>({...V,is_pinned:z.target.checked}))}),u.jsx("span",{children:"Mark as highlight"})]})})]}),u.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[u.jsx(Te,{type:"button",variant:"outline",size:"sm",className:"h-7 px-3 text-[9px]",onClick:()=>{N(!1),I(mu)},disabled:f,children:"Cancel"}),u.jsxs(Te,{type:"button",size:"sm",className:"h-7 px-3 text-[9px] rounded-full bg-primary/90 hover:bg-primary shadow-sm inline-flex items-center gap-1.5",onClick:$,disabled:f||!_.title.trim()||!_.content.trim(),children:[f&&u.jsx(Uo,{className:"w-3 h-3 animate-spin"}),_.id?"Save changes":"Publish post"]})]})]})]})})]}):u.jsx(He,{className:"p-4 bg-card/80 border-dashed border-border/50",children:u.jsx("p",{className:"text-xs text-muted-foreground",children:"No restaurant is associated with this account yet. Once your restaurant profile is connected, you'll be able to publish elegant blog posts and promotions here."})})},jz=()=>{const t=new Audio("/sound/notification.mp3");return t.preload="auto",t};function Mz(t={}){const{user:e}=Gr(),[r,n]=E.useState(null),[s,i]=E.useState([]),[l,d]=E.useState(!0),[m,f]=E.useState(!1),x=t.limit??50,y=t.enableSound??!0,v=E.useCallback(()=>{if(y)try{const I=jz();(()=>{I.currentTime=0,I.play().catch(()=>{})})()}catch{}},[y]);E.useEffect(()=>{(async()=>{if(!e){n(null),i([]),d(!1);return}d(!0);const{data:R,error:N}=await ue.from("restaurants").select("id").eq("owner_id",e.id).single();if(N||!R){console.error("Failed to resolve restaurant for owner:",N),n(null),i([]),d(!1);return}n(R.id),d(!1)})()},[e]),E.useEffect(()=>{(async()=>{if(!r||m)return;d(!0);const{data:R,error:N}=await ue.from("order_notifications").select(`
          id,
          order_id,
          restaurant_id,
          customer_id,
          title,
          message,
          status,
          created_at,
          orders!inner (
            total_amount,
            status,
            customer_id
          ),
          profiles!left (
            full_name
          )
        `).eq("restaurant_id",r).order("created_at",{ascending:!1}).limit(x);if(N)console.error("Error fetching order_notifications:",N),i([]);else{const A=(R||[]).map(O=>{const k=Array.isArray(O.orders)?O.orders[0]:O.orders||{},F=Array.isArray(O.profiles)?O.profiles[0]:O.profiles||{};return{id:O.id,order_id:O.order_id,restaurant_id:O.restaurant_id,customer_id:O.customer_id,title:O.title,message:O.message,status:O.status,created_at:O.created_at,customer_name:(F==null?void 0:F.full_name)??null,total_amount:(k==null?void 0:k.total_amount)??null,order_status:(k==null?void 0:k.status)??null}});i(A)}f(!0),d(!1)})()},[r,m,x]),E.useEffect(()=>{if(!r)return;const I=ue.channel(`order-notifications-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"order_notifications",filter:`restaurant_id=eq.${r}`},async R=>{const N=R.new,{data:A}=await ue.from("orders").select("total_amount, status, customer_id").eq("id",N.order_id).single();let O=null;if(A!=null&&A.customer_id){const{data:F}=await ue.from("profiles").select("full_name").eq("id",A.customer_id).single();O=(F==null?void 0:F.full_name)??null}const k={id:N.id,order_id:N.order_id,restaurant_id:N.restaurant_id,customer_id:N.customer_id,title:N.title,message:N.message,status:N.status,created_at:N.created_at,customer_name:O,total_amount:(A==null?void 0:A.total_amount)??null,order_status:(A==null?void 0:A.status)??null};i(F=>F.some(B=>B.id===k.id)?F:[k,...F].slice(0,x)),v()}).subscribe(R=>{R==="SUBSCRIBED"&&console.log(` Subscribed to realtime order_notifications for restaurant ${r}`)});return()=>{ue.removeChannel(I)}},[r,x,v]);const b=s.filter(I=>I.status==="unread").length,S=E.useCallback(async()=>{if(!r||s.length===0)return;const I=s.filter(N=>N.status==="unread").map(N=>N.id);if(I.length===0)return;const{error:R}=await ue.from("order_notifications").update({status:"read"}).in("id",I);if(R){console.error("Failed to mark notifications as read:",R);return}i(N=>N.map(A=>I.includes(A.id)?{...A,status:"read"}:A))},[r,s]),_=E.useCallback(async I=>{if(!I)return;const{error:R}=await ue.from("order_notifications").update({status:"read"}).eq("id",I);if(R){console.error("Failed to mark notification as read:",R);return}i(N=>N.map(A=>A.id===I?{...A,status:"read"}:A))},[]);return{restaurantId:r,notifications:s,unreadCount:b,loading:l,markAllAsRead:S,markAsRead:_}}var Pg=["Enter"," "],kz=["ArrowDown","PageUp","Home"],r4=["ArrowUp","PageDown","End"],Pz=[...kz,...r4],Dz={ltr:[...Pg,"ArrowRight"],rtl:[...Pg,"ArrowLeft"]},Lz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fd="Menu",[_d,Bz,Fz]=A0(Fd),[sl,n4]=gn(Fd,[Fz,Fc,Hc]),lm=Fc(),s4=Hc(),[Uz,il]=sl(Fd),[zz,Ud]=sl(Fd),i4=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:l=!0}=t,d=lm(e),[m,f]=E.useState(null),x=E.useRef(!1),y=cr(i),v=Vc(s);return E.useEffect(()=>{const b=()=>{x.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>x.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),u.jsx(Qx,{...d,children:u.jsx(Uz,{scope:e,open:r,onOpenChange:y,content:m,onContentChange:f,children:u.jsx(zz,{scope:e,onClose:E.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:x,dir:v,modal:l,children:n})})})};i4.displayName=Fd;var Vz="MenuAnchor",rw=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lm(r);return u.jsx(Zx,{...s,...n,ref:e})});rw.displayName=Vz;var nw="MenuPortal",[Hz,o4]=sl(nw,{forceMount:void 0}),a4=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=il(nw,e);return u.jsx(Hz,{scope:e,forceMount:r,children:u.jsx(nn,{present:r||i.open,children:u.jsx(Od,{asChild:!0,container:s,children:n})})})};a4.displayName=nw;var ws="MenuContent",[$z,sw]=sl(ws),l4=E.forwardRef((t,e)=>{const r=o4(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=il(ws,t.__scopeMenu),l=Ud(ws,t.__scopeMenu);return u.jsx(_d.Provider,{scope:t.__scopeMenu,children:u.jsx(nn,{present:n||i.open,children:u.jsx(_d.Slot,{scope:t.__scopeMenu,children:l.modal?u.jsx(Wz,{...s,ref:e}):u.jsx(Gz,{...s,ref:e})})})})}),Wz=E.forwardRef((t,e)=>{const r=il(ws,t.__scopeMenu),n=E.useRef(null),s=Je(e,n);return E.useEffect(()=>{const i=n.current;if(i)return Vy(i)},[]),u.jsx(iw,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ne(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Gz=E.forwardRef((t,e)=>{const r=il(ws,t.__scopeMenu);return u.jsx(iw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Yz=Ha("MenuContent.ScrollLock"),iw=E.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:m,onEscapeKeyDown:f,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,disableOutsideScroll:S,..._}=t,I=il(ws,r),R=Ud(ws,r),N=lm(r),A=s4(r),O=Bz(r),[k,F]=E.useState(null),B=E.useRef(null),P=Je(e,B,I.onContentChange),M=E.useRef(0),$=E.useRef(""),G=E.useRef(0),K=E.useRef(null),ee=E.useRef("right"),z=E.useRef(0),V=S?Z0:E.Fragment,J=S?{as:Yz,allowPinchZoom:!0}:void 0,Y=Q=>{var be,Pe;const ie=$.current+Q,fe=O().filter(Xe=>!Xe.disabled),oe=document.activeElement,le=(be=fe.find(Xe=>Xe.ref.current===oe))==null?void 0:be.textValue,ce=fe.map(Xe=>Xe.textValue),Be=iV(ce,ie,le),xe=(Pe=fe.find(Xe=>Xe.textValue===Be))==null?void 0:Pe.ref.current;(function Xe(ae){$.current=ae,window.clearTimeout(M.current),ae!==""&&(M.current=window.setTimeout(()=>Xe(""),1e3))})(ie),xe&&setTimeout(()=>xe.focus())};E.useEffect(()=>()=>window.clearTimeout(M.current),[]),zy();const q=E.useCallback(Q=>{var fe,oe;return ee.current===((fe=K.current)==null?void 0:fe.side)&&aV(Q,(oe=K.current)==null?void 0:oe.area)},[]);return u.jsx($z,{scope:r,searchRef:$,onItemEnter:E.useCallback(Q=>{q(Q)&&Q.preventDefault()},[q]),onItemLeave:E.useCallback(Q=>{var ie;q(Q)||((ie=B.current)==null||ie.focus(),F(null))},[q]),onTriggerLeave:E.useCallback(Q=>{q(Q)&&Q.preventDefault()},[q]),pointerGraceTimerRef:G,onPointerGraceIntentChange:E.useCallback(Q=>{K.current=Q},[]),children:u.jsx(V,{...J,children:u.jsx(K0,{asChild:!0,trapped:s,onMountAutoFocus:Ne(i,Q=>{var ie;Q.preventDefault(),(ie=B.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:u.jsx(Pc,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:x,onFocusOutside:y,onInteractOutside:v,onDismiss:b,children:u.jsx(Dy,{asChild:!0,...A,dir:R.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:F,onEntryFocus:Ne(m,Q=>{R.isUsingKeyboardRef.current||Q.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(Jx,{role:"menu","aria-orientation":"vertical","data-state":E4(I.open),"data-radix-menu-content":"",dir:R.dir,...N,..._,ref:P,style:{outline:"none",..._.style},onKeyDown:Ne(_.onKeyDown,Q=>{const fe=Q.target.closest("[data-radix-menu-content]")===Q.currentTarget,oe=Q.ctrlKey||Q.altKey||Q.metaKey,le=Q.key.length===1;fe&&(Q.key==="Tab"&&Q.preventDefault(),!oe&&le&&Y(Q.key));const ce=B.current;if(Q.target!==ce||!Pz.includes(Q.key))return;Q.preventDefault();const xe=O().filter(be=>!be.disabled).map(be=>be.ref.current);r4.includes(Q.key)&&xe.reverse(),nV(xe)}),onBlur:Ne(t.onBlur,Q=>{Q.currentTarget.contains(Q.target)||(window.clearTimeout(M.current),$.current="")}),onPointerMove:Ne(t.onPointerMove,Cd(Q=>{const ie=Q.target,fe=z.current!==Q.clientX;if(Q.currentTarget.contains(ie)&&fe){const oe=Q.clientX>z.current?"right":"left";ee.current=oe,z.current=Q.clientX}}))})})})})})})});l4.displayName=ws;var qz="MenuGroup",ow=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Le.div,{role:"group",...n,ref:e})});ow.displayName=qz;var Xz="MenuLabel",c4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Le.div,{...n,ref:e})});c4.displayName=Xz;var l0="MenuItem",Ub="menu.itemSelect",cm=E.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=E.useRef(null),l=Ud(l0,t.__scopeMenu),d=sw(l0,t.__scopeMenu),m=Je(e,i),f=E.useRef(!1),x=()=>{const y=i.current;if(!r&&y){const v=new CustomEvent(Ub,{bubbles:!0,cancelable:!0});y.addEventListener(Ub,b=>n==null?void 0:n(b),{once:!0}),Mx(y,v),v.defaultPrevented?f.current=!1:l.onClose()}};return u.jsx(u4,{...s,ref:m,disabled:r,onClick:Ne(t.onClick,x),onPointerDown:y=>{var v;(v=t.onPointerDown)==null||v.call(t,y),f.current=!0},onPointerUp:Ne(t.onPointerUp,y=>{var v;f.current||(v=y.currentTarget)==null||v.click()}),onKeyDown:Ne(t.onKeyDown,y=>{const v=d.searchRef.current!=="";r||v&&y.key===" "||Pg.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});cm.displayName=l0;var u4=E.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,l=sw(l0,r),d=s4(r),m=E.useRef(null),f=Je(e,m),[x,y]=E.useState(!1),[v,b]=E.useState("");return E.useEffect(()=>{const S=m.current;S&&b((S.textContent??"").trim())},[i.children]),u.jsx(_d.ItemSlot,{scope:r,disabled:n,textValue:s??v,children:u.jsx(Ly,{asChild:!0,...d,focusable:!n,children:u.jsx(Le.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:f,onPointerMove:Ne(t.onPointerMove,Cd(S=>{n?l.onItemLeave(S):(l.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ne(t.onPointerLeave,Cd(S=>l.onItemLeave(S))),onFocus:Ne(t.onFocus,()=>y(!0)),onBlur:Ne(t.onBlur,()=>y(!1))})})})}),Kz="MenuCheckboxItem",d4=E.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return u.jsx(g4,{scope:t.__scopeMenu,checked:r,children:u.jsx(cm,{role:"menuitemcheckbox","aria-checked":c0(r)?"mixed":r,...s,ref:e,"data-state":lw(r),onSelect:Ne(s.onSelect,()=>n==null?void 0:n(c0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});d4.displayName=Kz;var h4="MenuRadioGroup",[Qz,Zz]=sl(h4,{value:void 0,onValueChange:()=>{}}),f4=E.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=cr(n);return u.jsx(Qz,{scope:t.__scopeMenu,value:r,onValueChange:i,children:u.jsx(ow,{...s,ref:e})})});f4.displayName=h4;var m4="MenuRadioItem",p4=E.forwardRef((t,e)=>{const{value:r,...n}=t,s=Zz(m4,t.__scopeMenu),i=r===s.value;return u.jsx(g4,{scope:t.__scopeMenu,checked:i,children:u.jsx(cm,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":lw(i),onSelect:Ne(n.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,r)},{checkForDefaultPrevented:!1})})})});p4.displayName=m4;var aw="MenuItemIndicator",[g4,Jz]=sl(aw,{checked:!1}),x4=E.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=Jz(aw,r);return u.jsx(nn,{present:n||c0(i.checked)||i.checked===!0,children:u.jsx(Le.span,{...s,ref:e,"data-state":lw(i.checked)})})});x4.displayName=aw;var eV="MenuSeparator",y4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});y4.displayName=eV;var tV="MenuArrow",w4=E.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=lm(r);return u.jsx(ey,{...s,...n,ref:e})});w4.displayName=tV;var rV="MenuSub",[NH,v4]=sl(rV),Cu="MenuSubTrigger",b4=E.forwardRef((t,e)=>{const r=il(Cu,t.__scopeMenu),n=Ud(Cu,t.__scopeMenu),s=v4(Cu,t.__scopeMenu),i=sw(Cu,t.__scopeMenu),l=E.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:m}=i,f={__scopeMenu:t.__scopeMenu},x=E.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return E.useEffect(()=>x,[x]),E.useEffect(()=>{const y=d.current;return()=>{window.clearTimeout(y),m(null)}},[d,m]),u.jsx(rw,{asChild:!0,...f,children:u.jsx(u4,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":E4(r.open),...t,ref:N0(e,s.onTriggerChange),onClick:y=>{var v;(v=t.onClick)==null||v.call(t,y),!(t.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ne(t.onPointerMove,Cd(y=>{i.onItemEnter(y),!y.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:Ne(t.onPointerLeave,Cd(y=>{var b,S;x();const v=(b=r.content)==null?void 0:b.getBoundingClientRect();if(v){const _=(S=r.content)==null?void 0:S.dataset.side,I=_==="right",R=I?-5:5,N=v[I?"left":"right"],A=v[I?"right":"left"];i.onPointerGraceIntentChange({area:[{x:y.clientX+R,y:y.clientY},{x:N,y:v.top},{x:A,y:v.top},{x:A,y:v.bottom},{x:N,y:v.bottom}],side:_}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(y),y.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ne(t.onKeyDown,y=>{var b;const v=i.searchRef.current!=="";t.disabled||v&&y.key===" "||Dz[n.dir].includes(y.key)&&(r.onOpenChange(!0),(b=r.content)==null||b.focus(),y.preventDefault())})})})});b4.displayName=Cu;var _4="MenuSubContent",C4=E.forwardRef((t,e)=>{const r=o4(ws,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=il(ws,t.__scopeMenu),l=Ud(ws,t.__scopeMenu),d=v4(_4,t.__scopeMenu),m=E.useRef(null),f=Je(e,m);return u.jsx(_d.Provider,{scope:t.__scopeMenu,children:u.jsx(nn,{present:n||i.open,children:u.jsx(_d.Slot,{scope:t.__scopeMenu,children:u.jsx(iw,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var y;l.isUsingKeyboardRef.current&&((y=m.current)==null||y.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Ne(t.onFocusOutside,x=>{x.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ne(t.onEscapeKeyDown,x=>{l.onClose(),x.preventDefault()}),onKeyDown:Ne(t.onKeyDown,x=>{var b;const y=x.currentTarget.contains(x.target),v=Lz[l.dir].includes(x.key);y&&v&&(i.onOpenChange(!1),(b=d.trigger)==null||b.focus(),x.preventDefault())})})})})})});C4.displayName=_4;function E4(t){return t?"open":"closed"}function c0(t){return t==="indeterminate"}function lw(t){return c0(t)?"indeterminate":t?"checked":"unchecked"}function nV(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function sV(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function iV(t,e,r){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let l=sV(t,Math.max(i,0));s.length===1&&(l=l.filter(f=>f!==r));const m=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return m!==r?m:void 0}function oV(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){const d=e[i],m=e[l],f=d.x,x=d.y,y=m.x,v=m.y;x>n!=v>n&&r<(y-f)*(n-x)/(v-x)+f&&(s=!s)}return s}function aV(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return oV(r,e)}function Cd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var lV=i4,cV=rw,uV=a4,dV=l4,hV=ow,fV=c4,mV=cm,pV=d4,gV=f4,xV=p4,yV=x4,wV=y4,vV=w4,bV=b4,_V=C4,um="DropdownMenu",[CV,AH]=gn(um,[n4]),xn=n4(),[EV,S4]=CV(um),N4=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:l,modal:d=!0}=t,m=xn(e),f=E.useRef(null),[x,y]=yi({prop:s,defaultProp:i??!1,onChange:l,caller:um});return u.jsx(EV,{scope:e,triggerId:$s(),triggerRef:f,contentId:$s(),open:x,onOpenChange:y,onOpenToggle:E.useCallback(()=>y(v=>!v),[y]),modal:d,children:u.jsx(lV,{...m,open:x,onOpenChange:y,dir:n,modal:d,children:r})})};N4.displayName=um;var A4="DropdownMenuTrigger",T4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=S4(A4,r),l=xn(r);return u.jsx(cV,{asChild:!0,...l,children:u.jsx(Le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:N0(e,i.triggerRef),onPointerDown:Ne(t.onPointerDown,d=>{!n&&d.button===0&&d.ctrlKey===!1&&(i.onOpenToggle(),i.open||d.preventDefault())}),onKeyDown:Ne(t.onKeyDown,d=>{n||(["Enter"," "].includes(d.key)&&i.onOpenToggle(),d.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});T4.displayName=A4;var SV="DropdownMenuPortal",I4=t=>{const{__scopeDropdownMenu:e,...r}=t,n=xn(e);return u.jsx(uV,{...n,...r})};I4.displayName=SV;var R4="DropdownMenuContent",O4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=S4(R4,r),i=xn(r),l=E.useRef(!1);return u.jsx(dV,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:Ne(t.onCloseAutoFocus,d=>{var m;l.current||(m=s.triggerRef.current)==null||m.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:Ne(t.onInteractOutside,d=>{const m=d.detail.originalEvent,f=m.button===0&&m.ctrlKey===!0,x=m.button===2||f;(!s.modal||x)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O4.displayName=R4;var NV="DropdownMenuGroup",AV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(hV,{...s,...n,ref:e})});AV.displayName=NV;var TV="DropdownMenuLabel",j4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(fV,{...s,...n,ref:e})});j4.displayName=TV;var IV="DropdownMenuItem",M4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(mV,{...s,...n,ref:e})});M4.displayName=IV;var RV="DropdownMenuCheckboxItem",k4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(pV,{...s,...n,ref:e})});k4.displayName=RV;var OV="DropdownMenuRadioGroup",jV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(gV,{...s,...n,ref:e})});jV.displayName=OV;var MV="DropdownMenuRadioItem",P4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(xV,{...s,...n,ref:e})});P4.displayName=MV;var kV="DropdownMenuItemIndicator",D4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(yV,{...s,...n,ref:e})});D4.displayName=kV;var PV="DropdownMenuSeparator",L4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(wV,{...s,...n,ref:e})});L4.displayName=PV;var DV="DropdownMenuArrow",LV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(vV,{...s,...n,ref:e})});LV.displayName=DV;var BV="DropdownMenuSubTrigger",B4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(bV,{...s,...n,ref:e})});B4.displayName=BV;var FV="DropdownMenuSubContent",F4=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=xn(r);return u.jsx(_V,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F4.displayName=FV;var UV=N4,zV=T4,VV=I4,U4=O4,z4=j4,V4=M4,H4=k4,$4=P4,W4=D4,G4=L4,Y4=B4,q4=F4;const HV=UV,$V=zV,WV=E.forwardRef(({className:t,inset:e,children:r,...n},s)=>u.jsxs(Y4,{ref:s,className:Ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,u.jsx(UE,{className:"ml-auto h-4 w-4"})]}));WV.displayName=Y4.displayName;const GV=E.forwardRef(({className:t,...e},r)=>u.jsx(q4,{ref:r,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));GV.displayName=q4.displayName;const X4=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>u.jsx(VV,{children:u.jsx(U4,{ref:n,sideOffset:e,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));X4.displayName=U4.displayName;const K4=E.forwardRef(({className:t,inset:e,...r},n)=>u.jsx(V4,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));K4.displayName=V4.displayName;const YV=E.forwardRef(({className:t,children:e,checked:r,...n},s)=>u.jsxs(H4,{ref:s,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(W4,{children:u.jsx(FE,{className:"h-4 w-4"})})}),e]}));YV.displayName=H4.displayName;const qV=E.forwardRef(({className:t,children:e,...r},n)=>u.jsxs($4,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(W4,{children:u.jsx(VE,{className:"h-2 w-2 fill-current"})})}),e]}));qV.displayName=$4.displayName;const Q4=E.forwardRef(({className:t,inset:e,...r},n)=>u.jsx(z4,{ref:n,className:Ie("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));Q4.displayName=z4.displayName;const Z4=E.forwardRef(({className:t,...e},r)=>u.jsx(G4,{ref:r,className:Ie("-mx-1 my-1 h-px bg-muted",t),...e}));Z4.displayName=G4.displayName;const XV=()=>{const{signOut:t}=Gr(),e=sn(),[r,n]=E.useState("orders"),{restaurantId:s,notifications:i,unreadCount:l,loading:d,markAllAsRead:m,markAsRead:f}=Mz({limit:50,enableSound:!0}),[x,y]=E.useState(null),[v,b]=E.useState(null),[S,_]=E.useState(!1),I=async()=>{await t(),e("/auth")},R=async N=>{if(N!=null&&N.order_id){y(N.order_id),b(null),_(!0),N.id&&f(N.id);try{const{supabase:A}=await Ho(async()=>{const{supabase:P}=await Promise.resolve().then(()=>G2);return{supabase:P}},void 0),{data:O,error:k}=await A.from("orders").select(`
          id,
          order_items,
          total_amount,
          status,
          created_at,
          order_type,
          customer_id
        `).eq("id",N.order_id).single();if(k||!O){console.error("Failed to load order detail for notification:",k);return}let F=null,B=null;if(O.customer_id){const{data:P,error:M}=await A.rpc("get_order_customers",{customer_ids:[O.customer_id]});if(M)console.error("Failed to load customer details for modal:",M);else if(P&&P.length>0){const $=P[0];F=$.full_name&&String($.full_name).trim()||null,B=$.phone&&String($.phone).trim()||null}}!F&&N.customer_name&&typeof N.customer_name=="string"&&N.customer_name.trim()&&(F=N.customer_name.trim()),b({...O,customer_display_name:F,customer_display_phone:B})}catch(A){console.error("Error loading order detail module:",A)}}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background pb-20",children:[u.jsx("header",{className:"border-b border-border/50 bg-card/80 backdrop-blur-xl sticky top-0 z-40",children:u.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full luxury-gradient flex items-center justify-center",children:u.jsx(Fx,{className:"w-5 h-5 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Restaurant Dashboard"}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage your restaurant",s?"  Live order notifications enabled":""]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(HV,{children:[u.jsx($V,{asChild:!0,children:u.jsxs("button",{type:"button",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-border bg-card/70 hover:bg-primary/5 transition-colors",children:[u.jsx(LE,{className:"w-5 h-5 text-foreground"}),l>0&&u.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 rounded-full bg-red-500 text-[10px] font-semibold text-white flex items-center justify-center",children:l>99?"99+":l})]})}),u.jsxs(X4,{align:"end",className:"w-[320px] max-h-[420px] p-0 overflow-hidden",children:[u.jsxs(Q4,{className:"flex items-center justify-between px-3 py-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-sm font-semibold",children:"Order Notifications"}),u.jsx("span",{className:"text-[10px] text-muted-foreground",children:d?"Loading...":i.length===0?"No notifications yet":`${l} unread  ${i.length} total`})]}),l>0&&u.jsx("button",{onClick:N=>{N.stopPropagation(),m()},className:"text-[10px] text-primary hover:underline",children:"Mark all read"})]}),u.jsx(Z4,{}),u.jsx(nm,{className:"max-h-[340px]",children:u.jsx("div",{className:"max-h-[340px] overflow-y-auto no-scrollbar",children:i.length===0?u.jsx("div",{className:"px-3 py-6 text-center text-[10px] text-muted-foreground",children:"You will see new orders here in real time."}):i.map(N=>{const A=N.message&&N.message.trim().length>0?N.message:N.customer_name&&N.total_amount?`${N.customer_name} placed an order of ${Number(N.total_amount).toLocaleString()} MMK`:"New order received";return u.jsxs(K4,{onClick:()=>R(N),className:`
                              w-full px-3 py-2.5 flex items-start gap-2
                              cursor-pointer transition-colors
                              ${N.status==="unread"?"bg-primary/5 hover:bg-primary/10":"hover:bg-accent/40"}
                            `,children:[u.jsx("div",{className:"mt-1 w-2 h-2 flex-shrink-0",children:N.status==="unread"?u.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):u.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:u.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[u.jsx("div",{className:`
                                  text-[9px] text-left
                                  ${N.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}
                                `,children:A}),u.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const O=new Date(N.created_at),k=String(O.getDate()).padStart(2,"0"),F=String(O.getMonth()+1).padStart(2,"0"),B=O.getFullYear();let P=O.getHours();const M=String(O.getMinutes()).padStart(2,"0"),$=P>=12?"PM":"AM";return P=P%12||12,`${k}/${F}/${B} ${P}:${M} ${$}`})()})]})]},N.id)})})})]})]}),u.jsxs(Te,{variant:"outline",size:"sm",onClick:I,className:"gap-2",children:[u.jsx(j0,{className:"w-4 h-4"}),"Logout"]})]})]})}),u.jsxs("main",{className:"container mx-auto px-4 py-6",children:[r==="orders"&&u.jsx(kU,{}),r==="scanner"&&u.jsx(wz,{}),r==="menu"&&u.jsx(Sz,{}),r==="blog"&&u.jsx(Oz,{}),r==="settings"&&u.jsx(Nz,{}),u.jsx(Xs,{open:S,onOpenChange:_,children:u.jsxs(_s,{className:"max-w-md",children:[u.jsxs(bi,{children:[u.jsx(_i,{children:"Order Details"}),u.jsx(t3,{children:"View details for this order from your notifications."})]}),v?u.jsxs("div",{className:"space-y-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:"Order ID"}),u.jsx("span",{className:"font-mono text-xs",children:String(v.id).substring(0,8)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:"Customer"}),u.jsx("span",{children:(()=>{const N=v.customer_display_name&&String(v.customer_display_name).trim()||null,A=v.customer_display_phone&&String(v.customer_display_phone).trim()||null;return N&&A?`${N}  ${A}`:N||A||"Customer"})()})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:"Total Amount"}),u.jsxs("span",{className:"font-semibold",children:[Number(v.total_amount||0).toLocaleString()," MMK"]})]}),u.jsxs("div",{className:"flex justify-between items-center gap-3",children:[u.jsx("span",{className:"font-medium",children:"Status"}),u.jsxs("select",{className:"text-xs px-2 py-1 border border-border rounded-md bg-background capitalize",value:v.status||"paid",onChange:async N=>{const A=N.target.value;try{const{supabase:O}=await Ho(async()=>{const{supabase:F}=await Promise.resolve().then(()=>G2);return{supabase:F}},void 0),{error:k}=await O.from("orders").update({status:A}).eq("id",v.id);if(k){console.error("Failed to update order status from modal:",k);return}b(F=>F&&{...F,status:A}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:v.id,status:A}}))}catch(O){console.error("Error updating order status from modal:",O)}},children:[u.jsx("option",{value:"paid",children:"Paid"}),u.jsx("option",{value:"preparing",children:"Preparing"}),u.jsx("option",{value:"ready",children:"Ready"}),u.jsx("option",{value:"served",children:"Served"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:"Type"}),u.jsx("span",{className:"capitalize",children:v.order_type||"dine_in"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Placed At"}),u.jsx("div",{className:"text-xs text-muted-foreground",children:v.created_at?(()=>{const N=new Date(v.created_at),A=String(N.getDate()).padStart(2,"0"),O=String(N.getMonth()+1).padStart(2,"0"),k=N.getFullYear();let F=N.getHours();const B=String(N.getMinutes()).padStart(2,"0"),P=F>=12?"PM":"AM";return F=F%12||12,`${A}/${O}/${k} - ${F}:${B} ${P}`})():""})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Items"}),u.jsx("ul",{className:"mt-1 space-y-0.5",children:(v.order_items||[]).map((N,A)=>u.jsxs("li",{className:"flex justify-between text-xs text-muted-foreground",children:[u.jsxs("span",{children:[N.quantity,"x ",N.name]}),N.price&&u.jsxs("span",{children:[Number(N.price*N.quantity).toLocaleString()," ","MMK"]})]},A))})]})]}):u.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Loading order details..."})]})})]}),u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border glass-effect z-50",children:u.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[u.jsxs("button",{onClick:()=>n("orders"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="orders"?"text-primary":"text-muted-foreground"}`,children:[u.jsx(XE,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),u.jsxs("button",{onClick:()=>n("scanner"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="scanner"?"text-primary":"text-muted-foreground"}`,children:[u.jsx(lM,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"QR Scanner"})]}),u.jsxs("button",{onClick:()=>n("menu"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="menu"?"text-primary":"text-muted-foreground"}`,children:[u.jsx(rM,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Menu"})]}),u.jsxs("button",{onClick:()=>n("blog"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="blog"?"text-primary":"text-muted-foreground"}`,children:[u.jsx(Lx,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),u.jsxs("button",{onClick:()=>n("settings"),className:`flex flex-col items-center justify-center flex-1 transition-colors ${r==="settings"?"text-primary":"text-muted-foreground"}`,children:[u.jsx(cM,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-xs font-medium",children:"Settings"})]})]})})]})},KV=()=>{const{user:t,userRole:e,loading:r,signOut:n}=Gr(),s=sn(),[i,l]=E.useState({totalRestaurants:0,totalOrders:0,totalCustomers:0,totalRevenue:0}),[d,m]=E.useState(!0);E.useEffect(()=>{!r&&(!t||e!=="admin")&&(ve.error("Admin access required"),s("/auth"))},[t,e,r,s]);const f=async()=>{try{await n(),ve.success("Logged out successfully"),s("/auth")}catch{ve.error("Failed to logout")}};E.useEffect(()=>{t&&e==="admin"&&x()},[t,e]);const x=async()=>{try{m(!0);const{count:v}=await ue.from("restaurants").select("*",{count:"exact",head:!0}),{data:b,count:S}=await ue.from("orders").select("total_amount",{count:"exact"}),_=(b==null?void 0:b.reduce((R,N)=>R+Number(N.total_amount),0))||0,{count:I}=await ue.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","customer");l({totalRestaurants:v||0,totalOrders:S||0,totalCustomers:I||0,totalRevenue:_})}catch(v){console.error("Error fetching stats:",v),ve.error("Failed to load statistics")}finally{m(!1)}};if(r||d)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),u.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading admin dashboard..."})]})});if(!t||e!=="admin")return null;const y=[{title:"Total Restaurants",value:i.totalRestaurants,icon:jf,description:"Active restaurants",color:"text-blue-600"},{title:"Total Orders",value:i.totalOrders,icon:Pf,description:"All time orders",color:"text-green-600"},{title:"Total Customers",value:i.totalCustomers,icon:Jh,description:"Registered customers",color:"text-purple-600"},{title:"Total Revenue",value:`${i.totalRevenue.toLocaleString()} MMK`,icon:tM,description:"All time revenue",color:"text-yellow-600"}];return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage your ALAN platform"})]}),u.jsxs(Te,{variant:"outline",onClick:f,className:"flex items-center gap-2 hover:bg-destructive hover:text-destructive-foreground",children:[u.jsx(j0,{className:"h-4 w-4"}),"Logout"]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:y.map(v=>{const b=v.icon;return u.jsxs(He,{className:"hover:shadow-lg transition-shadow",children:[u.jsxs(ur,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(pr,{className:"text-sm font-medium",children:v.title}),u.jsx(b,{className:`h-5 w-5 ${v.color}`})]}),u.jsxs(Ct,{children:[u.jsx("div",{className:"text-2xl font-bold",children:v.value}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description})]})]},v.title)})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(He,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/restaurants"),children:u.jsxs(ur,{children:[u.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[u.jsx(jf,{className:"h-5 w-5"}),"Restaurants"]}),u.jsx(Bi,{children:"Manage all restaurants"})]})}),u.jsx(He,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/owners"),children:u.jsxs(ur,{children:[u.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[u.jsx(Jh,{className:"h-5 w-5"}),"Restaurant Owners"]}),u.jsx(Bi,{children:"Manage owner accounts"})]})}),u.jsx(He,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/orders"),children:u.jsxs(ur,{children:[u.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[u.jsx(Pf,{className:"h-5 w-5"}),"Orders Report"]}),u.jsx(Bi,{children:"View all orders"})]})}),u.jsx(He,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>s("/admin/users"),children:u.jsxs(ur,{children:[u.jsxs(pr,{className:"text-lg flex items-center gap-2",children:[u.jsx(Jh,{className:"h-5 w-5"}),"Users"]}),u.jsx(Bi,{children:"Manage all users"})]})})]})]})})},zd=E.forwardRef(({className:t,...e},r)=>u.jsx("div",{className:"relative w-full overflow-auto",children:u.jsx("table",{ref:r,className:Ie("w-full caption-bottom text-sm",t),...e})}));zd.displayName="Table";const Vd=E.forwardRef(({className:t,...e},r)=>u.jsx("thead",{ref:r,className:Ie("[&_tr]:border-b",t),...e}));Vd.displayName="TableHeader";const Hd=E.forwardRef(({className:t,...e},r)=>u.jsx("tbody",{ref:r,className:Ie("[&_tr:last-child]:border-0",t),...e}));Hd.displayName="TableBody";const QV=E.forwardRef(({className:t,...e},r)=>u.jsx("tfoot",{ref:r,className:Ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QV.displayName="TableFooter";const xi=E.forwardRef(({className:t,...e},r)=>u.jsx("tr",{ref:r,className:Ie("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));xi.displayName="TableRow";const Kt=E.forwardRef(({className:t,...e},r)=>u.jsx("th",{ref:r,className:Ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Kt.displayName="TableHead";const Ht=E.forwardRef(({className:t,...e},r)=>u.jsx("td",{ref:r,className:Ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Ht.displayName="TableCell";const ZV=E.forwardRef(({className:t,...e},r)=>u.jsx("caption",{ref:r,className:Ie("mt-4 text-sm text-muted-foreground",t),...e}));ZV.displayName="TableCaption";const JV=()=>{const{user:t,userRole:e,loading:r}=Gr(),n=sn(),[s,i]=E.useState([]),[l,d]=E.useState([]),[m,f]=E.useState(""),[x,y]=E.useState(!1),[v,b]=E.useState(null),[S,_]=E.useState({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""}),I=["7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM"],R=["1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM"],N=P=>{if(!P||!P.includes(" - "))return{start:"",end:""};const[M,$]=P.split(" - ").map(G=>G.trim());return{start:I.includes(M)?M:"",end:R.includes($)?$:""}};E.useEffect(()=>{!r&&(!t||e!=="admin")&&(ve.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&A()},[t,e]),E.useEffect(()=>{const P=s.filter(M=>M.name.toLowerCase().includes(m.toLowerCase())||M.address.toLowerCase().includes(m.toLowerCase()));d(P)},[m,s]);const A=async()=>{const{data:P,error:M}=await ue.from("restaurants").select("*").order("created_at",{ascending:!1});if(M){ve.error("Failed to load restaurants");return}i(P||[]),d(P||[])},O=async()=>{if(!S.name||!S.address){ve.error("Name and address are required");return}const P=S.open_hours&&S.open_hours.includes(" - ")?S.open_hours:null;if(v){const{error:M}=await ue.from("restaurants").update({...S,open_hours:P,rating:S.rating?Number(S.rating):null}).eq("id",v.id);if(M){ve.error("Failed to update restaurant");return}ve.success("Restaurant updated successfully")}else{const{error:M}=await ue.from("restaurants").insert([{...S,open_hours:P,rating:S.rating?Number(S.rating):null}]);if(M){ve.error("Failed to create restaurant");return}ve.success("Restaurant created successfully")}y(!1),B(),A()},k=async P=>{if(!confirm("Are you sure you want to delete this restaurant?"))return;const{error:M}=await ue.from("restaurants").delete().eq("id",P);if(M){ve.error("Failed to delete restaurant");return}ve.success("Restaurant deleted successfully"),A()},F=P=>{b(P);const M=N(P.open_hours);_({name:P.name,address:P.address,description:P.description||"",phone:P.phone||"",cuisine_type:P.cuisine_type||"",image_url:P.image_url||"",open_hours:M.start&&M.end?`${M.start} - ${M.end}`:P.open_hours||"",rating:P.rating!==null&&P.rating!==void 0?String(P.rating):""}),y(!0)},B=()=>{b(null),_({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""})};return r||!t||e!=="admin"?null:u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Management"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurants on the platform"})]}),u.jsxs(Xs,{open:x,onOpenChange:P=>{y(P),P||B()},children:[u.jsx(JT,{asChild:!0,children:u.jsxs(Te,{children:[u.jsx(ko,{className:"h-4 w-4 mr-2"}),"Add Restaurant"]})}),u.jsxs(_s,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsx(bi,{children:u.jsx(_i,{children:v?"Edit Restaurant":"Add New Restaurant"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"name",children:"Restaurant Name *"}),u.jsx(ot,{id:"name",value:S.name,onChange:P=>_({...S,name:P.target.value}),placeholder:"Enter restaurant name"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"address",children:"Address *"}),u.jsx(ot,{id:"address",value:S.address,onChange:P=>_({...S,address:P.target.value}),placeholder:"Enter address"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"phone",children:"Phone"}),u.jsx(ot,{id:"phone",value:S.phone,onChange:P=>_({...S,phone:P.target.value}),placeholder:"Enter phone number"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"cuisine_type",children:"Cuisine Type"}),u.jsx(ot,{id:"cuisine_type",value:S.cuisine_type,onChange:P=>_({...S,cuisine_type:P.target.value}),placeholder:"e.g., Italian, Chinese"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"description",children:"Description"}),u.jsx($c,{id:"description",value:S.description,onChange:P=>_({...S,description:P.target.value}),placeholder:"Enter restaurant description",rows:3})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"image_url",children:"Image URL"}),u.jsx(ot,{id:"image_url",value:S.image_url,onChange:P=>_({...S,image_url:P.target.value}),placeholder:"Enter image URL"})]}),u.jsxs("div",{children:[u.jsx(Qe,{children:"Opening Hours"}),u.jsxs("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"Start"}),u.jsxs("select",{value:N(S.open_hours).start,onChange:P=>{const M=N(S.open_hours),$=P.target.value,G=M.end,K=$&&G?`${$} - ${G}`:$||G?`${$}${G?` - ${G}`:""}`:"";_({...S,open_hours:K})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[u.jsx("option",{value:"",children:"Select start time"}),I.map(P=>u.jsx("option",{value:P,children:P},P))]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:"End"}),u.jsxs("select",{value:N(S.open_hours).end,onChange:P=>{const M=N(S.open_hours),$=P.target.value,G=M.start,K=G&&$?`${G} - ${$}`:$&&G?`${G} - ${$}`:$||G?`${G}${$?` - ${$}`:""}`:"";_({...S,open_hours:K})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[u.jsx("option",{value:"",children:"Select end time"}),R.map(P=>u.jsx("option",{value:P,children:P},P))]})]})]}),u.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:'Stored as a single value like "11:00 AM - 11:00 PM" in the database.'})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"rating",children:"Rating"}),u.jsx(ot,{id:"rating",type:"number",step:"0.1",min:"0",max:"5",value:S.rating,onChange:P=>_({...S,rating:P.target.value}),placeholder:"Enter rating (e.g., 4.5)"})]}),u.jsx(Te,{onClick:O,className:"w-full",children:v?"Update Restaurant":"Create Restaurant"})]})]})]})]}),u.jsx(He,{className:"mb-6",children:u.jsx(Ct,{className:"pt-6",children:u.jsxs("div",{className:"relative",children:[u.jsx(Md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),u.jsx(ot,{placeholder:"Search restaurants...",value:m,onChange:P=>f(P.target.value),className:"pl-10"})]})})}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{children:["All Restaurants (",l.length,")"]})}),u.jsx(Ct,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs(zd,{children:[u.jsx(Vd,{children:u.jsxs(xi,{children:[u.jsx(Kt,{children:"Name"}),u.jsx(Kt,{children:"Address"}),u.jsx(Kt,{children:"Phone"}),u.jsx(Kt,{children:"Cuisine"}),u.jsx(Kt,{className:"text-right",children:"Actions"})]})}),u.jsx(Hd,{children:l.map(P=>u.jsxs(xi,{children:[u.jsx(Ht,{className:"font-medium",children:P.name}),u.jsx(Ht,{children:P.address}),u.jsx(Ht,{children:P.phone||"N/A"}),u.jsx(Ht,{children:P.cuisine_type||"N/A"}),u.jsxs(Ht,{className:"text-right",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>F(P),children:u.jsx(KE,{className:"h-4 w-4"})}),u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>k(P.id),children:u.jsx(Ma,{className:"h-4 w-4 text-destructive"})})]})]},P.id))})]})})})]})]})})},eH=()=>{const{user:t,userRole:e,loading:r}=Gr(),n=sn(),[s,i]=E.useState([]),[l,d]=E.useState([]),[m,f]=E.useState([]),[x,y]=E.useState(""),[v,b]=E.useState(!1),[S,_]=E.useState({ownerId:"",restaurantId:""});E.useEffect(()=>{!r&&(!t||e!=="admin")&&(ve.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&(I(),R())},[t,e]),E.useEffect(()=>{const O=s.filter(k=>k.email.toLowerCase().includes(x.toLowerCase())||k.restaurant_name&&k.restaurant_name.toLowerCase().includes(x.toLowerCase()));f(O)},[x,s]);const I=async()=>{try{const{data:O,error:k}=await ue.rpc("get_restaurant_owners");if(!k&&O&&O.length>0){const Y=O||[],q=Array.from(new Set(Y.map(le=>le.restaurant_id).filter(Boolean))),{data:Q,error:ie}=await ue.from("restaurants").select("id, address").in("id",q);ie&&console.error("Failed to fetch restaurant addresses:",ie);const fe=new Map((Q||[]).map(le=>[le.id,le.address??null])),oe=Y.map(le=>({user_id:le.user_id,full_name:le.full_name??"Unnamed Owner",email:le.email??"Email not available",phone:le.phone??null,restaurant_id:le.restaurant_id??null,restaurant_name:le.restaurant_name??null,restaurant_address:le.restaurant_id?fe.get(le.restaurant_id)??null:null}));i(oe),f(oe);return}console.warn("RPC get_restaurant_owners unavailable or empty; falling back. Error:",k);const{data:F,error:B}=await ue.from("user_roles").select("user_id").eq("role","restaurant_owner");if(B){console.error("Failed to load owner roles:",B),ve.error("Failed to load owners");return}const P=Array.from(new Set((F??[]).map(Y=>Y.user_id).filter(Y=>!!Y)));if(P.length===0){i([]),f([]);return}const{data:M,error:$}=await ue.from("profiles").select("id, full_name, phone").in("id",P);$&&console.error("Failed to load owner profiles:",$);let G=new Map;try{const{data:Y,error:q}=await ue.rpc("get_user_emails",{user_ids:P});if(!q&&Y)G=new Map((Y??[]).filter(Q=>Q.email).map(Q=>[Q.user_id,Q.email]));else{console.warn("RPC get_user_emails failed, attempting direct fallback:",q);const{data:Q,error:ie}=await ue.from("user_emails").select("user_id, email").in("user_id",P);!ie&&Q&&(G=new Map((Q??[]).map(fe=>[fe.user_id,fe.email])))}}catch(Y){console.warn("Error getting emails via RPC/fallback:",Y)}const{data:K,error:ee}=await ue.from("restaurants").select("id, name, address, owner_id").in("owner_id",P);if(ee){console.error("Failed to load restaurants for owners:",ee),ve.error("Failed to load owners");return}const z=new Map((M??[]).map(Y=>[Y.id,{fullName:Y.full_name??"Unnamed Owner",phone:Y.phone??null}])),V=new Map;(K??[]).forEach(Y=>{Y.owner_id&&V.set(Y.owner_id,{id:Y.id,name:Y.name??"Unnamed Restaurant",address:Y.address??null})});const J=P.map(Y=>{const q=z.get(Y),Q=G.get(Y)??"Email not available",ie=V.get(Y);return{user_id:Y,full_name:(q==null?void 0:q.fullName)??"Unnamed Owner",email:Q,phone:(q==null?void 0:q.phone)??null,restaurant_id:(ie==null?void 0:ie.id)??null,restaurant_name:(ie==null?void 0:ie.name)??null,restaurant_address:(ie==null?void 0:ie.address)??null}});i(J),f(J)}catch(O){console.error("Unexpected error fetching owners:",O),ve.error("Failed to load owners")}},R=async()=>{const{data:O,error:k}=await ue.from("restaurants").select("id, name").is("owner_id",null).order("name");if(k){console.error("Failed to load restaurants:",k);return}d(O||[])},N=async()=>{if(!S.ownerId||!S.restaurantId){ve.error("Please select both an owner and a restaurant");return}try{const{data:O,error:k}=await ue.from("user_roles").select("user_id").eq("user_id",S.ownerId).eq("role","restaurant_owner").maybeSingle();if(k){console.error("Error checking owner role:",k),ve.error("Failed to verify owner role");return}if(!O){const{error:B}=await ue.from("user_roles").insert([{user_id:S.ownerId,role:"restaurant_owner"}]);if(B){ve.error("Failed to assign owner role");return}}const{error:F}=await ue.from("restaurants").update({owner_id:S.ownerId}).eq("id",S.restaurantId);if(F){ve.error("Failed to link restaurant to owner");return}ve.success("Owner linked to restaurant successfully"),b(!1),A(),I(),R()}catch(O){console.error("Error linking owner:",O),ve.error("Failed to link owner")}},A=()=>{_({ownerId:"",restaurantId:""})};return r||!t||e!=="admin"?null:u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Owner Management"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurant owner accounts"})]}),u.jsxs(Xs,{open:v,onOpenChange:O=>{b(O),O||A()},children:[u.jsx(JT,{asChild:!0,children:u.jsxs(Te,{disabled:l.length===0||s.filter(O=>!O.restaurant_id).length===0,children:[u.jsx(ko,{className:"h-4 w-4 mr-2"}),"Add Owner"]})}),u.jsxs(_s,{className:"max-w-md",children:[u.jsx(bi,{children:u.jsx(_i,{children:"Link Existing Owner to Restaurant"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"owner",children:"Owner *"}),u.jsxs(gs,{value:S.ownerId,onValueChange:O=>_({...S,ownerId:O}),children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Select owner without restaurant"})}),u.jsx(Yn,{children:s.filter(O=>!O.restaurant_id).map(O=>u.jsxs(rt,{value:O.user_id,children:[O.full_name||"Unnamed Owner","  ",O.email]},O.user_id))})]})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"restaurant",children:"Restaurant *"}),u.jsxs(gs,{value:S.restaurantId,onValueChange:O=>_({...S,restaurantId:O}),children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Select restaurant without owner"})}),u.jsx(Yn,{children:l.map(O=>u.jsx(rt,{value:O.id,children:O.name},O.id))})]})]}),u.jsx(Te,{onClick:N,className:"w-full",disabled:!S.ownerId||!S.restaurantId,children:"Link Owner"})]})]})]})]}),l.length===0&&u.jsx(He,{className:"mb-6 border-amber-200 bg-amber-50",children:u.jsx(Ct,{className:"pt-6",children:u.jsx("p",{className:"text-amber-800",children:"No restaurants available without owners. Please create restaurants first before adding owners."})})}),u.jsx(He,{className:"mb-6",children:u.jsx(Ct,{className:"pt-6",children:u.jsxs("div",{className:"relative",children:[u.jsx(Md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),u.jsx(ot,{placeholder:"Search owners...",value:x,onChange:O=>y(O.target.value),className:"pl-10"})]})})}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{children:["All Restaurant Owners (",m.length,")"]})}),u.jsx(Ct,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs(zd,{children:[u.jsx(Vd,{children:u.jsxs(xi,{children:[u.jsx(Kt,{children:"Restaurant"}),u.jsx(Kt,{children:"Address"}),u.jsx(Kt,{children:"Owner"}),u.jsx(Kt,{children:"Email"}),u.jsx(Kt,{children:"Phone"})]})}),u.jsx(Hd,{children:m.map(O=>u.jsxs(xi,{children:[u.jsx(Ht,{children:O.restaurant_name?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(jf,{className:"h-4 w-4 text-muted-foreground"}),O.restaurant_name]}):u.jsx("span",{className:"text-muted-foreground",children:"No restaurant"})}),u.jsx(Ht,{children:O.restaurant_address||u.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),u.jsx(Ht,{children:O.full_name||u.jsx("span",{className:"text-muted-foreground",children:"Unnamed Owner"})}),u.jsx(Ht,{className:"text-muted-foreground",children:O.email}),u.jsx(Ht,{children:O.phone||"N/A"})]},O.user_id))})]})})})]})]})})};function tH(t){const e=typeof t=="string"?new Date(t):t,r=e.getMonth()+1,n=e.getDate(),s=e.getFullYear();let i=e.getHours();const l=e.getMinutes(),d=i>=12?"PM":"AM";i=i%12,i=i||12;const m=l<10?`0${l}`:`${l}`;return`${r}/${n}/${s} - ${i}:${m} ${d}`}const rH=()=>{var $,G,K,ee;const{user:t,userRole:e,loading:r}=Gr(),n=sn(),[s,i]=E.useState([]),[l,d]=E.useState([]),[m,f]=E.useState([]),[x,y]=E.useState([]),[v,b]=E.useState(""),[S,_]=E.useState("all"),[I,R]=E.useState("all"),[N,A]=E.useState("all");E.useEffect(()=>{!r&&(!t||e!=="admin")&&(ve.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&O()},[t,e]),E.useEffect(()=>{F()},[v,S,I,N,s]);const O=async()=>{console.log(" Fetching orders data...");const{data:z,error:V}=await ue.from("orders").select("*").order("created_at",{ascending:!1});if(V){console.error(" Error fetching orders:",V),ve.error("Failed to load orders");return}if(console.log(" Orders fetched:",(z==null?void 0:z.length)||0,"orders"),!z||z.length===0){console.log(" No orders found in database"),i([]),d([]);const{data:le}=await ue.from("restaurants").select("id, name").order("name");f(le||[]),ve.info("No orders found in the database");return}console.log(" Found existing orders in database:",z.length);const J=[...new Set(z.map(le=>le.customer_id).filter(le=>!!le))];console.log(" Looking up customer details for IDs:",J.map(le=>le.substring(0,8)));let Y=[];if(J.length>0){try{let le=await ue.rpc("get_order_customers_fallback",{customer_ids:J});le.error&&(console.warn(" get_order_customers_fallback not available or failed, trying get_order_customers:",le.error.message),le=await ue.rpc("get_order_customers",{customer_ids:J})),le.error?(console.error(" Error fetching customer details via RPC:",le.error),ve.error("Failed to load customer details")):(Y=le.data||[],console.log(" Customer details fetched via RPC:",Y.length))}catch(le){console.error(" Unexpected error fetching customer details:",le),ve.error("Failed to load customer details")}if(Y.length===0)try{const{data:le,error:ce}=await ue.from("profiles").select("id, full_name, phone").in("id",J);!ce&&le&&(Y=le.map(Be=>({user_id:Be.id,full_name:Be.full_name,email:null,phone:Be.phone})),console.log(" Fallback to profiles fetched:",Y.length))}catch(le){console.error(" Unexpected error fetching profiles as fallback:",le)}}const q=new Map(Y.map(le=>{var ce,Be,xe;return[le.user_id,{name:((ce=le.full_name)==null?void 0:ce.trim())||"",email:((Be=le.email)==null?void 0:Be.trim())||"Email not available",phone:((xe=le.phone)==null?void 0:xe.trim())||""}]}));console.log(" Customer mapping (via RPC):",{totalCustomers:Y.length,customerIds:J.map(le=>le.substring(0,8)),foundCustomers:Y.map(le=>({id:le.user_id.substring(0,8),name:le.full_name,email:le.email,phone:le.phone}))});const{data:Q}=await ue.from("restaurants").select("id, name").order("name"),ie=[...new Set(z.map(le=>le.restaurant_id))],{data:fe}=await ue.from("restaurants").select("id, name").in("id",ie),oe=z.map(le=>{var Xe;const ce=q.get(le.customer_id),Be=le.customer_id?le.customer_id.substring(0,8):"UNKNOWN",xe=ce!=null&&ce.name&&ce.name.length>0?ce.name:`Customer ${Be}`,be=ce!=null&&ce.email&&ce.email.length>0?ce.email:"Email not available",Pe=ce!=null&&ce.phone&&ce.phone.length>0?ce.phone:"Phone not available";return{...le,customer_name:xe,customer_email:be,customer_phone:Pe,restaurant_name:((Xe=fe==null?void 0:fe.find(ae=>ae.id===le.restaurant_id))==null?void 0:Xe.name)||"Unknown Restaurant"}});console.log(" Orders enriched with customer data:",{totalOrders:oe.length,ordersWithCustomerNames:oe.filter(le=>!le.customer_name.startsWith("Customer ")).length,sampleOrder:oe[0]?{id:oe[0].id.substring(0,8),customerName:oe[0].customer_name,customerEmail:oe[0].customer_email,customerPhone:oe[0].customer_phone}:null}),i(oe),d(oe),f(Q||[]),k(oe)},k=z=>{const V=new Map;z.forEach(Y=>{const q=Y.restaurant_id,Q=Y.restaurant_name,ie=Number(Y.total_amount);if(V.has(q)){const fe=V.get(q);fe.total_orders+=1,fe.total_revenue+=ie,fe.avg_order_value=fe.total_revenue/fe.total_orders}else V.set(q,{restaurant_id:q,restaurant_name:Q,total_orders:1,total_revenue:ie,avg_order_value:ie})});const J=Array.from(V.values()).sort((Y,q)=>q.total_revenue-Y.total_revenue);y(J)},F=()=>{let z=[...s];if(v&&(z=z.filter(V=>V.customer_name.toLowerCase().includes(v.toLowerCase())||V.customer_phone.toLowerCase().includes(v.toLowerCase())||V.restaurant_name.toLowerCase().includes(v.toLowerCase())||V.id.toLowerCase().includes(v.toLowerCase()))),N!=="all"&&(z=z.filter(V=>V.restaurant_id===N)),S!=="all"&&(z=z.filter(V=>V.status===S)),I!=="all"){const V=new Date,J=new Date;I==="today"?J.setHours(0,0,0,0):I==="week"?J.setDate(V.getDate()-7):I==="month"&&J.setMonth(V.getMonth()-1),z=z.filter(Y=>new Date(Y.created_at)>=J)}d(z),k(z)},B=()=>{window.print()},P=l.reduce((z,V)=>z+Number(V.total_amount),0),M=z=>{const V={paid:"default",preparing:"secondary",ready:"outline",completed:"default"};return u.jsx(kr,{variant:V[z]||"default",children:z.toUpperCase()})};return r||!t||e!=="admin"?null:u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl print:p-0",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8 print:hidden",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Orders Report"}),u.jsx("p",{className:"text-muted-foreground",children:"View and manage all orders"})]}),u.jsxs(Te,{onClick:B,children:[u.jsx(iM,{className:"h-4 w-4 mr-2"}),"Print Report"]})]}),u.jsx("div",{className:"hidden print:block mb-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ALAN - Orders Report"}),u.jsxs("p",{className:"text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]}),N!=="all"&&u.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:["Restaurant: ",(($=m.find(z=>z.id===N))==null?void 0:$.name)||"Selected Restaurant"]}),S!=="all"&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Status Filter: ",S.toUpperCase()]}),I!=="all"&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date Filter: ",I==="today"?"Today":I==="week"?"Last 7 Days":I==="month"?"Last 30 Days":I]})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs(He,{children:[u.jsx(ur,{children:u.jsx(pr,{className:"text-sm",children:"Total Orders"})}),u.jsx(Ct,{children:u.jsx("p",{className:"text-3xl font-bold",children:l.length})})]}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsx(pr,{className:"text-sm",children:"Total Revenue"})}),u.jsx(Ct,{children:u.jsxs("p",{className:"text-3xl font-bold",children:[P.toLocaleString()," MMK"]})})]}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsx(pr,{className:"text-sm",children:"Average Order"})}),u.jsx(Ct,{children:u.jsxs("p",{className:"text-3xl font-bold",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]})})]})]}),u.jsx(He,{className:"mb-6 print:hidden",children:u.jsx(Ct,{className:"pt-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),u.jsx(ot,{placeholder:"Search orders...",value:v,onChange:z=>b(z.target.value),className:"pl-10"})]}),u.jsxs(gs,{value:N,onValueChange:A,children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Filter by restaurant"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All Restaurants"}),m.map(z=>u.jsx(rt,{value:z.id,children:z.name},z.id))]})]}),u.jsxs(gs,{value:S,onValueChange:_,children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Filter by status"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All Statuses"}),u.jsx(rt,{value:"paid",children:"Paid"}),u.jsx(rt,{value:"preparing",children:"Preparing"}),u.jsx(rt,{value:"ready",children:"Ready"}),u.jsx(rt,{value:"completed",children:"Completed"})]})]}),u.jsxs(gs,{value:I,onValueChange:R,children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Filter by date"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All Time"}),u.jsx(rt,{value:"today",children:"Today"}),u.jsx(rt,{value:"week",children:"Last 7 Days"}),u.jsx(rt,{value:"month",children:"Last 30 Days"})]})]}),u.jsxs(Te,{variant:"outline",onClick:()=>{b(""),A("all"),_("all"),R("all")},children:[u.jsx(Vv,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})})}),N==="all"&&x.length>0&&u.jsxs(He,{className:"mb-6",children:[u.jsx(ur,{children:u.jsxs(pr,{className:"flex items-center gap-2",children:[u.jsx(Vv,{className:"h-5 w-5"}),"Restaurant Performance Summary"]})}),u.jsx(Ct,{children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(z=>u.jsx(He,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:u.jsxs(Ct,{className:"p-4",children:[u.jsx("h3",{className:"font-semibold text-lg mb-2 text-blue-900",children:z.restaurant_name}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Total Orders:"}),u.jsx("span",{className:"font-medium",children:z.total_orders})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),u.jsxs("span",{className:"font-bold text-green-600",children:[z.total_revenue.toLocaleString()," MMK"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),u.jsxs("span",{className:"font-medium",children:[Math.round(z.avg_order_value).toLocaleString()," MMK"]})]})]}),u.jsx(Te,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>A(z.restaurant_id),children:"View Orders"})]})},z.restaurant_id))})})]}),N!=="all"&&u.jsx(He,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:u.jsx(Ct,{className:"pt-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:[((G=m.find(z=>z.id===N))==null?void 0:G.name)||"Selected Restaurant"," Performance"]}),u.jsx("p",{className:"text-sm text-green-700",children:"Filtered results for selected restaurant"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-2xl font-bold text-green-800",children:l.length}),u.jsx("p",{className:"text-xs text-green-600",children:"Orders"})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[P.toLocaleString()," MMK"]}),u.jsx("p",{className:"text-xs text-green-600",children:"Revenue"})]}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[l.length>0?Math.round(P/l.length).toLocaleString():0," MMK"]}),u.jsx("p",{className:"text-xs text-green-600",children:"Avg Order"})]})]})]})})}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Order Details"}),u.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:N!=="all"?`Showing ${l.length} orders for ${(K=m.find(z=>z.id===N))==null?void 0:K.name}`:`Showing ${l.length} of ${s.length} orders`})]})}),u.jsx(Ct,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs(zd,{children:[u.jsx(Vd,{children:u.jsxs(xi,{children:[u.jsx(Kt,{children:"Order ID"}),u.jsx(Kt,{children:"Customer"}),u.jsx(Kt,{children:"Restaurant"}),u.jsx(Kt,{children:"Type"}),u.jsx(Kt,{children:"Amount"}),u.jsx(Kt,{children:"Status"}),u.jsx(Kt,{children:"Date"})]})}),u.jsx(Hd,{children:l.length>0?l.map(z=>u.jsxs(xi,{children:[u.jsx(Ht,{className:"font-mono text-xs",children:z.id.substring(0,8)}),u.jsx(Ht,{children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"font-medium",children:z.customer_name}),z.customer_email!=="Email not available"&&u.jsx("div",{className:"text-xs text-muted-foreground",children:z.customer_email}),z.customer_phone!=="Phone not available"&&u.jsx("div",{className:"text-xs text-muted-foreground",children:z.customer_phone})]})}),u.jsx(Ht,{children:z.restaurant_name}),u.jsx(Ht,{className:"capitalize",children:z.order_type}),u.jsxs(Ht,{className:"font-semibold",children:[Number(z.total_amount).toLocaleString()," MMK"]}),u.jsx(Ht,{children:M(z.status)}),u.jsx(Ht,{children:tH(z.created_at)})]},z.id)):u.jsx(xi,{children:u.jsx(Ht,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:N!=="all"?`No orders found for ${((ee=m.find(z=>z.id===N))==null?void 0:ee.name)||"selected restaurant"}`:"No orders found matching the current filters"})})})]})})})]})]})})},nH=()=>{const{user:t,userRole:e,loading:r}=Gr(),n=sn(),[s,i]=E.useState([]),[l,d]=E.useState([]),[m,f]=E.useState(""),[x,y]=E.useState("all"),[v,b]=E.useState(!1),[S,_]=E.useState(null),[I,R]=E.useState(""),[N,A]=E.useState(null),[O,k]=E.useState(null),[F,B]=E.useState(""),[P,M]=E.useState(""),[$,G]=E.useState("customer"),[K,ee]=E.useState([]),[z,V]=E.useState(!1),[J,Y]=E.useState("customer"),[q,Q]=E.useState(""),[ie,fe]=E.useState(""),[oe,le]=E.useState(""),[ce,Be]=E.useState(""),[xe,be]=E.useState(null);E.useEffect(()=>{!r&&(!t||e!=="admin")&&(ve.error("Admin access required"),n("/auth"))},[t,e,r,n]),E.useEffect(()=>{t&&e==="admin"&&(Pe(),Xe())},[t,e]),E.useEffect(()=>{const me=m.toLowerCase(),Fe=s.filter(Ae=>{const bt=Ae.full_name.toLowerCase().includes(me)||Ae.role.toLowerCase().includes(me)||Ae.phone&&Ae.phone.toLowerCase().includes(me)||Ae.user_id.toLowerCase().includes(me),Ce=x==="all"?!0:Ae.role===x;return bt&&Ce});d(Fe)},[m,x,s]);const Pe=async()=>{console.log(" Fetching users and details via RPC...");try{const{data:me,error:Fe}=await ue.from("user_roles").select("user_id, role, created_at").order("created_at",{ascending:!1});if(Fe){console.error(" Error fetching user roles:",Fe),ve.error("Failed to load users");return}if(!me||me.length===0){console.log(" No users found in user_roles table"),i([]),d([]);return}const Ae=me.map(it=>it.user_id);let bt=[];try{let it=await ue.rpc("get_order_customers_fallback",{customer_ids:Ae});it.error&&(console.warn(" get_order_customers_fallback not available, trying get_order_customers:",it.error.message),it=await ue.rpc("get_order_customers",{customer_ids:Ae})),it.error?(console.error(" Error fetching user details via RPC:",it.error),ve.error("Failed to load some user details")):bt=it.data||[]}catch(it){console.error(" Unexpected RPC error:",it)}const Ce=new Map(bt.map(it=>[it.user_id,it])),Dr=me.map(it=>{var At;const tr=Ce.get(it.user_id),ra=(At=tr==null?void 0:tr.full_name)!=null&&At.trim()?tr.full_name.trim():`User ${it.user_id.substring(0,8)}`;return{user_id:it.user_id,full_name:ra,phone:(tr==null?void 0:tr.phone)||null,role:it.role,created_at:it.created_at}});console.log(" Final users data (via RPC):",{total:Dr.length,withRealNames:Dr.filter(it=>!it.full_name.startsWith("User ")).length,withPhones:Dr.filter(it=>it.phone).length}),i(Dr),d(Dr)}catch(me){console.error(" Unexpected error in fetchUsers:",me),ve.error("An unexpected error occurred while loading users")}},Xe=async()=>{try{const{data:me,error:Fe}=await ue.from("restaurants").select("id, name").order("name");if(Fe){console.error(" Error fetching restaurants:",Fe);return}ee(me||[])}catch(me){console.error(" Unexpected error fetching restaurants:",me)}},ae=async me=>{var Fe;console.log(" Opening user details for:",me.user_id.substring(0,8)),_(me),B(me.full_name),M(me.phone||""),G(me.role);try{let Ae=await ue.rpc("get_order_customers_fallback",{customer_ids:[me.user_id]});Ae.error&&(Ae=await ue.rpc("get_order_customers",{customer_ids:[me.user_id]})),!Ae.error&&Ae.data&&Ae.data.length>0?R(Ae.data[0].email||"Email not available"):R("Email not available")}catch{R("Email not available")}if(A(null),k(null),me.role==="restaurant_owner")try{const{data:Ae,error:bt}=await ue.from("restaurants").select("id, name").eq("owner_id",me.user_id).limit(1).maybeSingle();if(!bt&&Ae)A(Ae.id),k(Ae.name||"Linked Restaurant");else{const{data:Ce,error:Dr}=await ue.from("restaurant_owners").select("restaurant_id, restaurants(name)").eq("user_id",me.user_id).maybeSingle();!Dr&&Ce&&(A(Ce.restaurant_id),k(((Fe=Ce.restaurants)==null?void 0:Fe.name)||"Linked Restaurant"))}}catch(Ae){console.error(" Error fetching restaurant for owner:",Ae)}b(!0)},Ee=async()=>{if(S)try{const{error:me}=await ue.from("profiles").update({full_name:F.trim(),phone:P.trim()||null,updated_at:new Date().toISOString()}).eq("id",S.user_id);if(me){console.error(" Error updating profile:",me),ve.error("Failed to update user profile");return}if($!==S.role){const{error:Fe}=await ue.from("user_roles").update({role:$}).eq("user_id",S.user_id);if(Fe){console.error(" Error updating role:",Fe),ve.error("Failed to update user role");return}if($==="restaurant_owner"&&N){const{error:Ae}=await ue.from("restaurant_owners").upsert({user_id:S.user_id,restaurant_id:N,created_at:new Date().toISOString()});if(Ae){console.error(" Error linking restaurant:",Ae),ve.error("Failed to link restaurant");return}}else S.role==="restaurant_owner"&&$!=="restaurant_owner"&&await ue.from("restaurant_owners").delete().eq("user_id",S.user_id)}ve.success("User updated successfully"),b(!1),Pe()}catch(me){console.error(" Unexpected error updating user:",me),ve.error("An unexpected error occurred")}},ke=async()=>{if(S&&confirm("Are you sure you want to delete this user? This action cannot be undone."))try{console.log(" Deleting user:",S.user_id.substring(0,8),"with role:",S.role),console.log(" Checking for restaurant ownership...");const{data:me,error:Fe}=await ue.from("restaurant_owners").select("restaurant_id").eq("user_id",S.user_id);if(!Fe&&me&&me.length>0){console.log(" Removing restaurant ownership links...");const{error:Ce}=await ue.from("restaurant_owners").delete().eq("user_id",S.user_id);if(Ce){console.error(" Error deleting restaurant ownership:",Ce),ve.error(`Failed to remove restaurant links: ${Ce.message}`);return}console.log(" Restaurant ownership removed")}console.log(" Deleting user role...");const{error:Ae}=await ue.from("user_roles").delete().eq("user_id",S.user_id);if(Ae){console.error(" Error deleting user role:",Ae),ve.error(`Failed to delete user role: ${Ae.message}`);return}console.log(" User role deleted"),console.log(" Deleting user profile...");const{error:bt}=await ue.from("profiles").delete().eq("id",S.user_id);if(bt){console.error(" Error deleting profile:",bt),ve.error(`Failed to delete user profile: ${bt.message}`);return}console.log(" User profile deleted");try{console.log(" Attempting to delete auth user...");const{error:Ce}=await ue.auth.admin.deleteUser(S.user_id);Ce?console.warn(" Could not delete auth user (service role required):",Ce.message):console.log(" Auth user deleted")}catch(Ce){console.warn(" Auth user deletion not available:",Ce)}console.log(" User deletion complete"),ve.success("User deleted successfully"),b(!1),setTimeout(()=>{Pe()},500)}catch(me){console.error(" Unexpected error deleting user:",me),ve.error("An unexpected error occurred")}},Me=async()=>{var me,Fe,Ae;if(!q.trim()||!ie.trim()||!oe.trim()){ve.error("Please fill in all required fields");return}try{console.log(" Creating user without auth signup to prevent session interference..."),console.log(" Selected role for new user:",J);const Ce=(me=(await ue.auth.getSession()).data.session)==null?void 0:me.user;if(!Ce){ve.error("Admin session not found");return}console.log(" Current admin:",Ce.email,"ID:",Ce.id.substring(0,8)),console.log(" Creating user via edge function...");const{data:Dr,error:it}=await ue.functions.invoke("admin-create-user",{body:{email:ie.trim(),password:oe.trim(),full_name:q.trim(),phone:ce.trim()||null,role:J,restaurant_id:xe}});if(it){console.error(" Edge function error:",it),ve.error(it.message||"Failed to create user");return}console.log(" Edge function result:",Dr);const tr=await ue.auth.getSession();((Ae=(Fe=tr.data.session)==null?void 0:Fe.user)==null?void 0:Ae.id)===Ce.id?console.log(" Admin session remained intact:",tr.data.session.user.email):console.error(" Admin session was somehow changed!"),console.log(" User creation complete without session interference"),ve.success(`${J.charAt(0).toUpperCase()+J.slice(1)} user created successfully`),V(!1),Y("customer"),Q(""),fe(""),le(""),Be(""),be(null),Pe()}catch(bt){console.error(" Unexpected error creating user:",bt),ve.error("An unexpected error occurred")}},gt=me=>{const Fe={admin:{variant:"destructive",icon:kf},restaurant_owner:{variant:"default",icon:zs},customer:{variant:"secondary",icon:zs}},Ae=Fe[me]||Fe.customer,bt=Ae.icon;return u.jsxs(kr,{variant:Ae.variant,className:"flex items-center gap-1 w-fit",children:[u.jsx(bt,{className:"h-3 w-3"}),me.replace("_"," ").toUpperCase()]})},er=(()=>{const me=s.filter(bt=>bt.role==="admin").length,Fe=s.filter(bt=>bt.role==="restaurant_owner").length,Ae=s.filter(bt=>bt.role==="customer").length;return{admins:me,owners:Fe,customers:Ae}})();return r||!t||e!=="admin"?null:u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:u.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[u.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:u.jsx(Ja,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"User Management"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage all registered users"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[u.jsx(kf,{className:"h-4 w-4 text-destructive"}),"Admins"]})}),u.jsx(Ct,{children:u.jsx("p",{className:"text-3xl font-bold",children:er.admins})})]}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[u.jsx(zs,{className:"h-4 w-4 text-primary"}),"Restaurant Owners"]})}),u.jsx(Ct,{children:u.jsx("p",{className:"text-3xl font-bold",children:er.owners})})]}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[u.jsx(zs,{className:"h-4 w-4 text-secondary"}),"Customers"]})}),u.jsx(Ct,{children:u.jsx("p",{className:"text-3xl font-bold",children:er.customers})})]})]}),u.jsx(He,{className:"mb-6",children:u.jsx(Ct,{className:"pt-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[u.jsxs("div",{className:"relative md:flex-1",children:[u.jsx(Md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),u.jsx(ot,{placeholder:"Search users...",value:m,onChange:me=>f(me.target.value),className:"pl-10"})]}),u.jsx("div",{className:"md:w-64",children:u.jsxs(gs,{value:x,onValueChange:me=>y(me),children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Filter by role"})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"all",children:"All"}),u.jsx(rt,{value:"admin",children:"Admin"}),u.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),u.jsx(rt,{value:"customer",children:"Customer"})]})]})})]})})}),u.jsxs(He,{children:[u.jsx(ur,{children:u.jsxs(pr,{children:["All Users (",l.length,")"]})}),u.jsx(Ct,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs(zd,{children:[u.jsx(Vd,{children:u.jsxs(xi,{children:[u.jsx(Kt,{children:"Name"}),u.jsx(Kt,{children:"Phone"}),u.jsx(Kt,{children:"Role"}),u.jsx(Kt,{children:"Registered"}),u.jsx(Kt,{className:"text-right",children:"Actions"})]})}),u.jsx(Hd,{children:l.map(me=>u.jsxs(xi,{children:[u.jsx(Ht,{className:"font-medium",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{children:me.full_name}),u.jsx("span",{className:"text-xs text-muted-foreground",children:me.phone?me.phone:`ID: ${me.user_id.substring(0,8)}...`})]})}),u.jsx(Ht,{children:u.jsx("span",{className:"text-sm",children:me.phone||"N/A"})}),u.jsx(Ht,{children:gt(me.role)}),u.jsx(Ht,{children:new Date(me.created_at).toLocaleDateString()}),u.jsx(Ht,{className:"text-right",children:u.jsx(Te,{variant:"ghost",size:"sm",onClick:()=>ae(me),children:"View Details"})})]},me.user_id))})]})})})]}),u.jsx(Xs,{open:v,onOpenChange:b,children:u.jsxs(_s,{className:"max-w-2xl",children:[u.jsx(bi,{children:u.jsx(_i,{children:"User Details"})}),S&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"detail-name",children:"Full Name"}),u.jsx(ot,{id:"detail-name",value:F,onChange:me=>B(me.target.value)})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"detail-phone",children:"Phone"}),u.jsx(ot,{id:"detail-phone",value:P,onChange:me=>M(me.target.value)})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"detail-email",children:"Email"}),u.jsx(ot,{id:"detail-email",value:I,disabled:!0,className:"bg-muted"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"detail-role",children:"Role"}),u.jsxs(gs,{value:$,onValueChange:G,children:[u.jsx(Gn,{children:u.jsx(xs,{})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"customer",children:"Customer"}),u.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),u.jsx(rt,{value:"admin",children:"Admin"})]})]})]})]}),$==="restaurant_owner"&&N&&O&&u.jsxs("div",{children:[u.jsx(Qe,{children:"Linked Restaurant"}),u.jsx("p",{className:"mt-1 text-sm font-medium",children:O})]}),u.jsx("div",{className:"border-t pt-4",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx(Qe,{className:"text-muted-foreground",children:"User ID"}),u.jsx("p",{className:"font-mono",children:S.user_id})]}),u.jsxs("div",{children:[u.jsx(Qe,{className:"text-muted-foreground",children:"Registration Date"}),u.jsx("p",{children:new Date(S.created_at).toLocaleDateString()})]})]})})]}),u.jsxs(Cg,{className:"flex justify-between",children:[u.jsxs(Te,{variant:"destructive",onClick:ke,className:"flex items-center gap-2",children:[u.jsx(Ma,{className:"h-4 w-4"}),"Delete User"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Te,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),u.jsxs(Te,{onClick:Ee,className:"flex items-center gap-2",children:[u.jsx(KE,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),u.jsx(Xs,{open:z,onOpenChange:V,children:u.jsxs(_s,{className:"max-w-2xl",children:[u.jsx(bi,{children:u.jsx(_i,{children:"Create New User"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-name",children:"Full Name *"}),u.jsx(ot,{id:"create-name",value:q,onChange:me=>Q(me.target.value),placeholder:"Enter full name"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-phone",children:"Phone"}),u.jsx(ot,{id:"create-phone",value:ce,onChange:me=>Be(me.target.value),placeholder:"Enter phone number"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-email",children:"Email *"}),u.jsx(ot,{id:"create-email",type:"email",value:ie,onChange:me=>fe(me.target.value),placeholder:"Enter email address"})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-password",children:"Password *"}),u.jsx(ot,{id:"create-password",type:"password",value:oe,onChange:me=>le(me.target.value),placeholder:"Enter password"})]})]}),u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-role",children:"Role *"}),u.jsxs(gs,{value:J,onValueChange:me=>Y(me),children:[u.jsx(Gn,{children:u.jsx(xs,{})}),u.jsxs(Yn,{children:[u.jsx(rt,{value:"customer",children:"Customer"}),u.jsx(rt,{value:"restaurant_owner",children:"Restaurant Owner"}),u.jsx(rt,{value:"admin",children:"Admin"})]})]})]}),J==="restaurant_owner"&&u.jsxs("div",{children:[u.jsx(Qe,{htmlFor:"create-restaurant",children:"Link to Restaurant"}),u.jsxs(gs,{value:xe||"",onValueChange:be,children:[u.jsx(Gn,{children:u.jsx(xs,{placeholder:"Select a restaurant (optional)"})}),u.jsx(Yn,{children:K.map(me=>u.jsx(rt,{value:me.id,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(jf,{className:"h-4 w-4"}),me.name]})},me.id))})]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"You can link the user to a restaurant later if needed"})]}),u.jsx("div",{className:"bg-muted p-3 rounded-md",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"* Required fields. The user will receive an email confirmation to activate their account."})})]}),u.jsxs(Cg,{children:[u.jsx(Te,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),u.jsxs(Te,{onClick:Me,className:"flex items-center gap-2",children:[u.jsx(ko,{className:"h-4 w-4"}),"Create User"]})]})]})})]})})},sH=()=>{const t=Ko();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),u.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),u.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),u.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},iH=new k6,oH=()=>u.jsx(D6,{client:iH,children:u.jsx(u7,{children:u.jsxs(d6,{children:[u.jsx(YM,{}),u.jsx(Sk,{}),u.jsx(M5,{children:u.jsxs(N5,{children:[u.jsx(zr,{path:"/",element:u.jsx(I9,{})}),u.jsx(zr,{path:"/auth",element:u.jsx(Y9,{})}),u.jsx(zr,{path:"/home",element:u.jsx(Q9,{})}),u.jsx(zr,{path:"/orders",element:u.jsx(AF,{})}),u.jsx(zr,{path:"/blog",element:u.jsx(nU,{})}),u.jsx(zr,{path:"/profile",element:u.jsx(zF,{})}),u.jsx(zr,{path:"/restaurant/:id",element:u.jsx(sF,{})}),u.jsx(zr,{path:"/payment",element:u.jsx(gF,{})}),u.jsx(zr,{path:"/confirmation",element:u.jsx(NF,{})}),u.jsx(zr,{path:"/dashboard",element:u.jsx(XV,{})}),u.jsx(zr,{path:"/admin",element:u.jsx(KV,{})}),u.jsx(zr,{path:"/admin/restaurants",element:u.jsx(JV,{})}),u.jsx(zr,{path:"/admin/owners",element:u.jsx(eH,{})}),u.jsx(zr,{path:"/admin/orders",element:u.jsx(rH,{})}),u.jsx(zr,{path:"/admin/users",element:u.jsx(nH,{})}),u.jsx(zr,{path:"*",element:u.jsx(sH,{})})]})})]})})});cE(document.getElementById("root")).render(u.jsx(oH,{}));
