var sw=t=>{throw TypeError(t)};var Jp=(t,e,r)=>e.has(t)||sw("Cannot "+r);var _e=(t,e,r)=>(Jp(t,e,"read from private field"),r?r.call(t):e.get(t)),At=(t,e,r)=>e.has(t)?sw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),nt=(t,e,r,n)=>(Jp(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),rn=(t,e,r)=>(Jp(t,e,"access private method"),r);var gf=(t,e,r,n)=>({set _(i){nt(t,e,i,r)},get _(){return _e(t,e,n)}});function mv(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var cE={exports:{}},R0={},uE={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=Symbol.for("react.element"),rk=Symbol.for("react.portal"),nk=Symbol.for("react.fragment"),ik=Symbol.for("react.strict_mode"),sk=Symbol.for("react.profiler"),ok=Symbol.for("react.provider"),ak=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),ck=Symbol.for("react.suspense"),uk=Symbol.for("react.memo"),dk=Symbol.for("react.lazy"),ow=Symbol.iterator;function fk(t){return t===null||typeof t!="object"?null:(t=ow&&t[ow]||t["@@iterator"],typeof t=="function"?t:null)}var dE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fE=Object.assign,hE={};function Bc(t,e,r){this.props=t,this.context=e,this.refs=hE,this.updater=r||dE}Bc.prototype.isReactComponent={};Bc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pE(){}pE.prototype=Bc.prototype;function gv(t,e,r){this.props=t,this.context=e,this.refs=hE,this.updater=r||dE}var vv=gv.prototype=new pE;vv.constructor=gv;fE(vv,Bc.prototype);vv.isPureReactComponent=!0;var aw=Array.isArray,mE=Object.prototype.hasOwnProperty,yv={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function vE(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)mE.call(e,n)&&!gE.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var h=Array(c),d=0;d<c;d++)h[d]=arguments[d+2];i.children=h}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:Fd,type:t,key:s,ref:a,props:i,_owner:yv.current}}function hk(t,e){return{$$typeof:Fd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fd}function pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lw=/\/+/g;function em(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pk(""+t.key):e.toString(36)}function th(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fd:case rk:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+em(a,0):n,aw(i)?(r="",t!=null&&(r=t.replace(lw,"$&/")+"/"),th(i,e,r,"",function(d){return d})):i!=null&&(xv(i)&&(i=hk(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lw,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",aw(t))for(var c=0;c<t.length;c++){s=t[c];var h=n+em(s,c);a+=th(s,e,r,h,i)}else if(h=fk(t),typeof h=="function")for(t=h.call(t),c=0;!(s=t.next()).done;)s=s.value,h=n+em(s,c++),a+=th(s,e,r,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vf(t,e,r){if(t==null)return t;var n=[],i=0;return th(t,n,"","",function(s){return e.call(r,s,i++)}),n}function mk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},rh={transition:null},gk={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:rh,ReactCurrentOwner:yv};function yE(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:vf,forEach:function(t,e,r){vf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vf(t,function(){e++}),e},toArray:function(t){return vf(t,function(e){return e})||[]},only:function(t){if(!xv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};gt.Component=Bc;gt.Fragment=nk;gt.Profiler=sk;gt.PureComponent=gv;gt.StrictMode=ik;gt.Suspense=ck;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;gt.act=yE;gt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=fE({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=yv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)mE.call(e,h)&&!gE.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){c=Array(h);for(var d=0;d<h;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:Fd,type:t.type,key:i,ref:s,props:n,_owner:a}};gt.createContext=function(t){return t={$$typeof:ak,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ok,_context:t},t.Consumer=t};gt.createElement=vE;gt.createFactory=function(t){var e=vE.bind(null,t);return e.type=t,e};gt.createRef=function(){return{current:null}};gt.forwardRef=function(t){return{$$typeof:lk,render:t}};gt.isValidElement=xv;gt.lazy=function(t){return{$$typeof:dk,_payload:{_status:-1,_result:t},_init:mk}};gt.memo=function(t,e){return{$$typeof:uk,type:t,compare:e===void 0?null:e}};gt.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};gt.unstable_act=yE;gt.useCallback=function(t,e){return bn.current.useCallback(t,e)};gt.useContext=function(t){return bn.current.useContext(t)};gt.useDebugValue=function(){};gt.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};gt.useEffect=function(t,e){return bn.current.useEffect(t,e)};gt.useId=function(){return bn.current.useId()};gt.useImperativeHandle=function(t,e,r){return bn.current.useImperativeHandle(t,e,r)};gt.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};gt.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};gt.useMemo=function(t,e){return bn.current.useMemo(t,e)};gt.useReducer=function(t,e,r){return bn.current.useReducer(t,e,r)};gt.useRef=function(t){return bn.current.useRef(t)};gt.useState=function(t){return bn.current.useState(t)};gt.useSyncExternalStore=function(t,e,r){return bn.current.useSyncExternalStore(t,e,r)};gt.useTransition=function(){return bn.current.useTransition()};gt.version="18.3.1";uE.exports=gt;var j=uE.exports;const Te=I0(j),wv=mv({__proto__:null,default:Te},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=j,yk=Symbol.for("react.element"),xk=Symbol.for("react.fragment"),wk=Object.prototype.hasOwnProperty,bk=vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_k={key:!0,ref:!0,__self:!0,__source:!0};function xE(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)wk.call(e,n)&&!_k.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:yk,type:t,key:s,ref:a,props:i,_owner:bk.current}}R0.Fragment=xk;R0.jsx=xE;R0.jsxs=xE;cE.exports=R0;var f=cE.exports,wE={exports:{}},ai={},bE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,Y){var K=te.length;te.push(Y);e:for(;0<K;){var V=K-1>>>1,G=te[V];if(0<i(G,Y))te[V]=Y,te[K]=G,K=V;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var Y=te[0],K=te.pop();if(K!==Y){te[0]=K;e:for(var V=0,G=te.length,Z=G>>>1;V<Z;){var se=2*(V+1)-1,ae=te[se],X=se+1,ne=te[X];if(0>i(ae,K))X<G&&0>i(ne,ae)?(te[V]=ne,te[X]=K,V=X):(te[V]=ae,te[se]=K,V=se);else if(X<G&&0>i(ne,K))te[V]=ne,te[X]=K,V=X;else break e}}return Y}function i(te,Y){var K=te.sortIndex-Y.sortIndex;return K!==0?K:te.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],d=[],p=1,m=null,v=3,x=!1,E=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(te){for(var Y=r(d);Y!==null;){if(Y.callback===null)n(d);else if(Y.startTime<=te)n(d),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=r(d)}}function S(te){if(w=!1,C(te),!E)if(r(h)!==null)E=!0,ee(O);else{var Y=r(d);Y!==null&&J(S,Y.startTime-te)}}function O(te,Y){E=!1,w&&(w=!1,N(R),R=-1),x=!0;var K=v;try{for(C(Y),m=r(h);m!==null&&(!(m.expirationTime>Y)||te&&!B());){var V=m.callback;if(typeof V=="function"){m.callback=null,v=m.priorityLevel;var G=V(m.expirationTime<=Y);Y=t.unstable_now(),typeof G=="function"?m.callback=G:m===r(h)&&n(h),C(Y)}else n(h);m=r(h)}if(m!==null)var Z=!0;else{var se=r(d);se!==null&&J(S,se.startTime-Y),Z=!1}return Z}finally{m=null,v=K,x=!1}}var D=!1,M=null,R=-1,k=5,L=-1;function B(){return!(t.unstable_now()-L<k)}function F(){if(M!==null){var te=t.unstable_now();L=te;var Y=!0;try{Y=M(!0,te)}finally{Y?H():(D=!1,M=null)}}else D=!1}var H;if(typeof _=="function")H=function(){_(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=F,H=function(){$.postMessage(null)}}else H=function(){A(F,0)};function ee(te){M=te,D||(D=!0,H())}function J(te,Y){R=A(function(){te(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){E||x||(E=!0,ee(O))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(te){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var K=v;v=Y;try{return te()}finally{v=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,Y){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var K=v;v=te;try{return Y()}finally{v=K}},t.unstable_scheduleCallback=function(te,Y,K){var V=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?V+K:V):K=V,te){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,te={id:p++,callback:Y,priorityLevel:te,startTime:K,expirationTime:G,sortIndex:-1},K>V?(te.sortIndex=K,e(d,te),r(h)===null&&te===r(d)&&(w?(N(R),R=-1):w=!0,J(S,K-V))):(te.sortIndex=G,e(h,te),E||x||(E=!0,ee(O))),te},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(te){var Y=v;return function(){var K=v;v=Y;try{return te.apply(this,arguments)}finally{v=K}}}})(_E);bE.exports=_E;var Ek=bE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=j,ii=Ek;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EE=new Set,Zu={};function il(t,e){vc(t,e),vc(t+"Capture",e)}function vc(t,e){for(Zu[t]=e,t=0;t<e.length;t++)EE.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d1=Object.prototype.hasOwnProperty,Ck=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cw={},uw={};function Ak(t){return d1.call(uw,t)?!0:d1.call(cw,t)?!1:Ck.test(t)?uw[t]=!0:(cw[t]=!0,!1)}function Nk(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tk(t,e,r,n){if(e===null||typeof e>"u"||Nk(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var bv=/[\-:]([a-z])/g;function _v(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bv,_v);Jr[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bv,_v);Jr[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bv,_v);Jr[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ev(t,e,r,n){var i=Jr.hasOwnProperty(e)?Jr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tk(e,r,i,n)&&(r=null),n||i===null?Ak(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var io=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yf=Symbol.for("react.element"),Ml=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),p1=Symbol.for("react.suspense_list"),Av=Symbol.for("react.memo"),wo=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),dw=Symbol.iterator;function fu(t){return t===null||typeof t!="object"?null:(t=dw&&t[dw]||t["@@iterator"],typeof t=="function"?t:null)}var or=Object.assign,tm;function Au(t){if(tm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);tm=e&&e[1]||""}return`
`+tm+t}var rm=!1;function nm(t,e){if(!t||rm)return"";rm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{rm=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Au(t):""}function Ok(t){switch(t.tag){case 5:return Au(t.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return t=nm(t.type,!1),t;case 11:return t=nm(t.type.render,!1),t;case 1:return t=nm(t.type,!0),t;default:return""}}function m1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pl:return"Fragment";case Ml:return"Portal";case f1:return"Profiler";case Sv:return"StrictMode";case h1:return"Suspense";case p1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CE:return(t.displayName||"Context")+".Consumer";case SE:return(t._context.displayName||"Context")+".Provider";case Cv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Av:return e=t.displayName||null,e!==null?e:m1(t.type)||"Memo";case wo:e=t._payload,t=t._init;try{return m1(t(e))}catch{}}return null}function Ik(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m1(e);case 8:return e===Sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ko(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rk(t){var e=NE(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xf(t){t._valueTracker||(t._valueTracker=Rk(t))}function TE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=NE(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function g1(t,e){var r=e.checked;return or({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function fw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ko(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OE(t,e){e=e.checked,e!=null&&Ev(t,"checked",e,!1)}function v1(t,e){OE(t,e);var r=Ko(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?y1(t,e.type,r):e.hasOwnProperty("defaultValue")&&y1(t,e.type,Ko(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hw(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function y1(t,e,r){(e!=="number"||Ch(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Nu=Array.isArray;function Xl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ko(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function x1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return or({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ie(92));if(Nu(r)){if(1<r.length)throw Error(Ie(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ko(r)}}function IE(t,e){var r=Ko(e.value),n=Ko(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function mw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wf,kE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wf=wf||document.createElement("div"),wf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ju(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Pu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kk=["Webkit","ms","Moz","O"];Object.keys(Pu).forEach(function(t){kk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pu[e]=Pu[t]})});function jE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Pu.hasOwnProperty(t)&&Pu[t]?(""+e).trim():e+"px"}function ME(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=jE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var jk=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b1(t,e){if(e){if(jk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function _1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E1=null;function Nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var S1=null,Ql=null,Zl=null;function gw(t){if(t=$d(t)){if(typeof S1!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=D0(e),S1(t.stateNode,t.type,e))}}function PE(t){Ql?Zl?Zl.push(t):Zl=[t]:Ql=t}function DE(){if(Ql){var t=Ql,e=Zl;if(Zl=Ql=null,gw(t),e)for(t=0;t<e.length;t++)gw(e[t])}}function LE(t,e){return t(e)}function BE(){}var im=!1;function FE(t,e,r){if(im)return t(e,r);im=!0;try{return LE(t,e,r)}finally{im=!1,(Ql!==null||Zl!==null)&&(BE(),DE())}}function ed(t,e){var r=t.stateNode;if(r===null)return null;var n=D0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ie(231,e,typeof r));return r}var C1=!1;if(Gs)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){C1=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{C1=!1}function Mk(t,e,r,n,i,s,a,c,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(p){this.onError(p)}}var Du=!1,Ah=null,Nh=!1,A1=null,Pk={onError:function(t){Du=!0,Ah=t}};function Dk(t,e,r,n,i,s,a,c,h){Du=!1,Ah=null,Mk.apply(Pk,arguments)}function Lk(t,e,r,n,i,s,a,c,h){if(Dk.apply(this,arguments),Du){if(Du){var d=Ah;Du=!1,Ah=null}else throw Error(Ie(198));Nh||(Nh=!0,A1=d)}}function sl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function UE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vw(t){if(sl(t)!==t)throw Error(Ie(188))}function Bk(t){var e=t.alternate;if(!e){if(e=sl(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return vw(i),t;if(s===n)return vw(i),e;s=s.sibling}throw Error(Ie(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=s;break}if(c===n){a=!0,n=i,r=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===r){a=!0,r=s,n=i;break}if(c===n){a=!0,n=s,r=i;break}c=c.sibling}if(!a)throw Error(Ie(189))}}if(r.alternate!==n)throw Error(Ie(190))}if(r.tag!==3)throw Error(Ie(188));return r.stateNode.current===r?t:e}function zE(t){return t=Bk(t),t!==null?$E(t):null}function $E(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$E(t);if(e!==null)return e;t=t.sibling}return null}var HE=ii.unstable_scheduleCallback,yw=ii.unstable_cancelCallback,Fk=ii.unstable_shouldYield,Uk=ii.unstable_requestPaint,xr=ii.unstable_now,zk=ii.unstable_getCurrentPriorityLevel,Tv=ii.unstable_ImmediatePriority,VE=ii.unstable_UserBlockingPriority,Th=ii.unstable_NormalPriority,$k=ii.unstable_LowPriority,qE=ii.unstable_IdlePriority,k0=null,ws=null;function Hk(t){if(ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(k0,t,void 0,(t.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:Wk,Vk=Math.log,qk=Math.LN2;function Wk(t){return t>>>=0,t===0?32:31-(Vk(t)/qk|0)|0}var bf=64,_f=4194304;function Tu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var c=a&~i;c!==0?n=Tu(c):(s&=a,s!==0&&(n=Tu(s)))}else a=r&~i,a!==0?n=Tu(a):s!==0&&(n=Tu(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Yi(e),i=1<<r,n|=t[r],e&=~i;return n}function Gk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Yi(s),c=1<<a,h=i[a];h===-1?(!(c&r)||c&n)&&(i[a]=Gk(c,e)):h<=e&&(t.expiredLanes|=c),s&=~c}}function N1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WE(){var t=bf;return bf<<=1,!(bf&4194240)&&(bf=64),t}function sm(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ud(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yi(e),t[e]=r}function Kk(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Yi(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Ov(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Yi(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Rt=0;function GE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YE,Iv,KE,XE,QE,T1=!1,Ef=[],Lo=null,Bo=null,Fo=null,td=new Map,rd=new Map,_o=[],Xk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xw(t,e){switch(t){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":td.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(e.pointerId)}}function pu(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$d(e),e!==null&&Iv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Qk(t,e,r,n,i){switch(e){case"focusin":return Lo=pu(Lo,t,e,r,n,i),!0;case"dragenter":return Bo=pu(Bo,t,e,r,n,i),!0;case"mouseover":return Fo=pu(Fo,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return td.set(s,pu(td.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,rd.set(s,pu(rd.get(s)||null,t,e,r,n,i)),!0}return!1}function ZE(t){var e=Ta(t.target);if(e!==null){var r=sl(e);if(r!==null){if(e=r.tag,e===13){if(e=UE(r),e!==null){t.blockedOn=e,QE(t.priority,function(){KE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=O1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);E1=n,r.target.dispatchEvent(n),E1=null}else return e=$d(r),e!==null&&Iv(e),t.blockedOn=r,!1;e.shift()}return!0}function ww(t,e,r){nh(t)&&r.delete(e)}function Zk(){T1=!1,Lo!==null&&nh(Lo)&&(Lo=null),Bo!==null&&nh(Bo)&&(Bo=null),Fo!==null&&nh(Fo)&&(Fo=null),td.forEach(ww),rd.forEach(ww)}function mu(t,e){t.blockedOn===e&&(t.blockedOn=null,T1||(T1=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,Zk)))}function nd(t){function e(i){return mu(i,t)}if(0<Ef.length){mu(Ef[0],t);for(var r=1;r<Ef.length;r++){var n=Ef[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Lo!==null&&mu(Lo,t),Bo!==null&&mu(Bo,t),Fo!==null&&mu(Fo,t),td.forEach(e),rd.forEach(e),r=0;r<_o.length;r++)n=_o[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<_o.length&&(r=_o[0],r.blockedOn===null);)ZE(r),r.blockedOn===null&&_o.shift()}var Jl=io.ReactCurrentBatchConfig,Ih=!0;function Jk(t,e,r,n){var i=Rt,s=Jl.transition;Jl.transition=null;try{Rt=1,Rv(t,e,r,n)}finally{Rt=i,Jl.transition=s}}function ej(t,e,r,n){var i=Rt,s=Jl.transition;Jl.transition=null;try{Rt=4,Rv(t,e,r,n)}finally{Rt=i,Jl.transition=s}}function Rv(t,e,r,n){if(Ih){var i=O1(t,e,r,n);if(i===null)mm(t,e,n,Rh,r),xw(t,n);else if(Qk(i,t,e,r,n))n.stopPropagation();else if(xw(t,n),e&4&&-1<Xk.indexOf(t)){for(;i!==null;){var s=$d(i);if(s!==null&&YE(s),s=O1(t,e,r,n),s===null&&mm(t,e,n,Rh,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else mm(t,e,n,null,r)}}var Rh=null;function O1(t,e,r,n){if(Rh=null,t=Nv(n),t=Ta(t),t!==null)if(e=sl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=UE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function JE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zk()){case Tv:return 1;case VE:return 4;case Th:case $k:return 16;case qE:return 536870912;default:return 16}default:return 16}}var Io=null,kv=null,ih=null;function eS(){if(ih)return ih;var t,e=kv,r=e.length,n,i="value"in Io?Io.value:Io.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return ih=i.slice(t,1<n?1-n:void 0)}function sh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function bw(){return!1}function li(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sf:bw,this.isPropagationStopped=bw,this}return or(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jv=li(Fc),zd=or({},Fc,{view:0,detail:0}),tj=li(zd),om,am,gu,j0=or({},zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gu&&(gu&&t.type==="mousemove"?(om=t.screenX-gu.screenX,am=t.screenY-gu.screenY):am=om=0,gu=t),om)},movementY:function(t){return"movementY"in t?t.movementY:am}}),_w=li(j0),rj=or({},j0,{dataTransfer:0}),nj=li(rj),ij=or({},zd,{relatedTarget:0}),lm=li(ij),sj=or({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),oj=li(sj),aj=or({},Fc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lj=li(aj),cj=or({},Fc,{data:0}),Ew=li(cj),uj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fj[t])?!!e[t]:!1}function Mv(){return hj}var pj=or({},zd,{key:function(t){if(t.key){var e=uj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(t){return t.type==="keypress"?sh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mj=li(pj),gj=or({},j0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sw=li(gj),vj=or({},zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),yj=li(vj),xj=or({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),wj=li(xj),bj=or({},j0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_j=li(bj),Ej=[9,13,27,32],Pv=Gs&&"CompositionEvent"in window,Lu=null;Gs&&"documentMode"in document&&(Lu=document.documentMode);var Sj=Gs&&"TextEvent"in window&&!Lu,tS=Gs&&(!Pv||Lu&&8<Lu&&11>=Lu),Cw=" ",Aw=!1;function rS(t,e){switch(t){case"keyup":return Ej.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dl=!1;function Cj(t,e){switch(t){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(Aw=!0,Cw);case"textInput":return t=e.data,t===Cw&&Aw?null:t;default:return null}}function Aj(t,e){if(Dl)return t==="compositionend"||!Pv&&rS(t,e)?(t=eS(),ih=kv=Io=null,Dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tS&&e.locale!=="ko"?null:e.data;default:return null}}var Nj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nj[t.type]:e==="textarea"}function iS(t,e,r,n){PE(n),e=kh(e,"onChange"),0<e.length&&(r=new jv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Bu=null,id=null;function Tj(t){mS(t,0)}function M0(t){var e=Fl(t);if(TE(e))return t}function Oj(t,e){if(t==="change")return e}var sS=!1;if(Gs){var cm;if(Gs){var um="oninput"in document;if(!um){var Tw=document.createElement("div");Tw.setAttribute("oninput","return;"),um=typeof Tw.oninput=="function"}cm=um}else cm=!1;sS=cm&&(!document.documentMode||9<document.documentMode)}function Ow(){Bu&&(Bu.detachEvent("onpropertychange",oS),id=Bu=null)}function oS(t){if(t.propertyName==="value"&&M0(id)){var e=[];iS(e,id,t,Nv(t)),FE(Tj,e)}}function Ij(t,e,r){t==="focusin"?(Ow(),Bu=e,id=r,Bu.attachEvent("onpropertychange",oS)):t==="focusout"&&Ow()}function Rj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return M0(id)}function kj(t,e){if(t==="click")return M0(e)}function jj(t,e){if(t==="input"||t==="change")return M0(e)}function Mj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zi=typeof Object.is=="function"?Object.is:Mj;function sd(t,e){if(Zi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d1.call(e,i)||!Zi(t[i],e[i]))return!1}return!0}function Iw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rw(t,e){var r=Iw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Iw(r)}}function aS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lS(){for(var t=window,e=Ch();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ch(t.document)}return e}function Dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pj(t){var e=lS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aS(r.ownerDocument.documentElement,r)){if(n!==null&&Dv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=Rw(r,s);var a=Rw(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dj=Gs&&"documentMode"in document&&11>=document.documentMode,Ll=null,I1=null,Fu=null,R1=!1;function kw(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;R1||Ll==null||Ll!==Ch(n)||(n=Ll,"selectionStart"in n&&Dv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fu&&sd(Fu,n)||(Fu=n,n=kh(I1,"onSelect"),0<n.length&&(e=new jv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ll)))}function Cf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Bl={animationend:Cf("Animation","AnimationEnd"),animationiteration:Cf("Animation","AnimationIteration"),animationstart:Cf("Animation","AnimationStart"),transitionend:Cf("Transition","TransitionEnd")},dm={},cS={};Gs&&(cS=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function P0(t){if(dm[t])return dm[t];if(!Bl[t])return t;var e=Bl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cS)return dm[t]=e[r];return t}var uS=P0("animationend"),dS=P0("animationiteration"),fS=P0("animationstart"),hS=P0("transitionend"),pS=new Map,jw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ra(t,e){pS.set(t,e),il(e,[t])}for(var fm=0;fm<jw.length;fm++){var hm=jw[fm],Lj=hm.toLowerCase(),Bj=hm[0].toUpperCase()+hm.slice(1);ra(Lj,"on"+Bj)}ra(uS,"onAnimationEnd");ra(dS,"onAnimationIteration");ra(fS,"onAnimationStart");ra("dblclick","onDoubleClick");ra("focusin","onFocus");ra("focusout","onBlur");ra(hS,"onTransitionEnd");vc("onMouseEnter",["mouseout","mouseover"]);vc("onMouseLeave",["mouseout","mouseover"]);vc("onPointerEnter",["pointerout","pointerover"]);vc("onPointerLeave",["pointerout","pointerover"]);il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));il("onBeforeInput",["compositionend","keypress","textInput","paste"]);il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function Mw(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Lk(n,e,void 0,t),t.currentTarget=null}function mS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var c=n[a],h=c.instance,d=c.currentTarget;if(c=c.listener,h!==s&&i.isPropagationStopped())break e;Mw(i,c,d),s=h}else for(a=0;a<n.length;a++){if(c=n[a],h=c.instance,d=c.currentTarget,c=c.listener,h!==s&&i.isPropagationStopped())break e;Mw(i,c,d),s=h}}}if(Nh)throw t=A1,Nh=!1,A1=null,t}function Ht(t,e){var r=e[D1];r===void 0&&(r=e[D1]=new Set);var n=t+"__bubble";r.has(n)||(gS(e,t,2,!1),r.add(n))}function pm(t,e,r){var n=0;e&&(n|=4),gS(r,t,n,e)}var Af="_reactListening"+Math.random().toString(36).slice(2);function od(t){if(!t[Af]){t[Af]=!0,EE.forEach(function(r){r!=="selectionchange"&&(Fj.has(r)||pm(r,!1,t),pm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Af]||(e[Af]=!0,pm("selectionchange",!1,e))}}function gS(t,e,r,n){switch(JE(e)){case 1:var i=Jk;break;case 4:i=ej;break;default:i=Rv}r=i.bind(null,e,r,t),i=void 0,!C1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function mm(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Ta(c),a===null)return;if(h=a.tag,h===5||h===6){n=s=a;continue e}c=c.parentNode}}n=n.return}FE(function(){var d=s,p=Nv(r),m=[];e:{var v=pS.get(t);if(v!==void 0){var x=jv,E=t;switch(t){case"keypress":if(sh(r)===0)break e;case"keydown":case"keyup":x=mj;break;case"focusin":E="focus",x=lm;break;case"focusout":E="blur",x=lm;break;case"beforeblur":case"afterblur":x=lm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=_w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=yj;break;case uS:case dS:case fS:x=oj;break;case hS:x=wj;break;case"scroll":x=tj;break;case"wheel":x=_j;break;case"copy":case"cut":case"paste":x=lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Sw}var w=(e&4)!==0,A=!w&&t==="scroll",N=w?v!==null?v+"Capture":null:v;w=[];for(var _=d,C;_!==null;){C=_;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,N!==null&&(S=ed(_,N),S!=null&&w.push(ad(_,S,C)))),A)break;_=_.return}0<w.length&&(v=new x(v,E,null,r,p),m.push({event:v,listeners:w}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",v&&r!==E1&&(E=r.relatedTarget||r.fromElement)&&(Ta(E)||E[Ys]))break e;if((x||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,x?(E=r.relatedTarget||r.toElement,x=d,E=E?Ta(E):null,E!==null&&(A=sl(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(x=null,E=d),x!==E)){if(w=_w,S="onMouseLeave",N="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(w=Sw,S="onPointerLeave",N="onPointerEnter",_="pointer"),A=x==null?v:Fl(x),C=E==null?v:Fl(E),v=new w(S,_+"leave",x,r,p),v.target=A,v.relatedTarget=C,S=null,Ta(p)===d&&(w=new w(N,_+"enter",E,r,p),w.target=C,w.relatedTarget=A,S=w),A=S,x&&E)t:{for(w=x,N=E,_=0,C=w;C;C=bl(C))_++;for(C=0,S=N;S;S=bl(S))C++;for(;0<_-C;)w=bl(w),_--;for(;0<C-_;)N=bl(N),C--;for(;_--;){if(w===N||N!==null&&w===N.alternate)break t;w=bl(w),N=bl(N)}w=null}else w=null;x!==null&&Pw(m,v,x,w,!1),E!==null&&A!==null&&Pw(m,A,E,w,!0)}}e:{if(v=d?Fl(d):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var O=Oj;else if(Nw(v))if(sS)O=jj;else{O=Rj;var D=Ij}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=kj);if(O&&(O=O(t,d))){iS(m,O,r,p);break e}D&&D(t,v,d),t==="focusout"&&(D=v._wrapperState)&&D.controlled&&v.type==="number"&&y1(v,"number",v.value)}switch(D=d?Fl(d):window,t){case"focusin":(Nw(D)||D.contentEditable==="true")&&(Ll=D,I1=d,Fu=null);break;case"focusout":Fu=I1=Ll=null;break;case"mousedown":R1=!0;break;case"contextmenu":case"mouseup":case"dragend":R1=!1,kw(m,r,p);break;case"selectionchange":if(Dj)break;case"keydown":case"keyup":kw(m,r,p)}var M;if(Pv)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Dl?rS(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(tS&&r.locale!=="ko"&&(Dl||R!=="onCompositionStart"?R==="onCompositionEnd"&&Dl&&(M=eS()):(Io=p,kv="value"in Io?Io.value:Io.textContent,Dl=!0)),D=kh(d,R),0<D.length&&(R=new Ew(R,t,null,r,p),m.push({event:R,listeners:D}),M?R.data=M:(M=nS(r),M!==null&&(R.data=M)))),(M=Sj?Cj(t,r):Aj(t,r))&&(d=kh(d,"onBeforeInput"),0<d.length&&(p=new Ew("onBeforeInput","beforeinput",null,r,p),m.push({event:p,listeners:d}),p.data=M))}mS(m,e)})}function ad(t,e,r){return{instance:t,listener:e,currentTarget:r}}function kh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ed(t,r),s!=null&&n.unshift(ad(t,s,i)),s=ed(t,e),s!=null&&n.push(ad(t,s,i))),t=t.return}return n}function bl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pw(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var c=r,h=c.alternate,d=c.stateNode;if(h!==null&&h===n)break;c.tag===5&&d!==null&&(c=d,i?(h=ed(r,s),h!=null&&a.unshift(ad(r,h,c))):i||(h=ed(r,s),h!=null&&a.push(ad(r,h,c)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Uj=/\r\n?/g,zj=/\u0000|\uFFFD/g;function Dw(t){return(typeof t=="string"?t:""+t).replace(Uj,`
`).replace(zj,"")}function Nf(t,e,r){if(e=Dw(e),Dw(t)!==e&&r)throw Error(Ie(425))}function jh(){}var k1=null,j1=null;function M1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P1=typeof setTimeout=="function"?setTimeout:void 0,$j=typeof clearTimeout=="function"?clearTimeout:void 0,Lw=typeof Promise=="function"?Promise:void 0,Hj=typeof queueMicrotask=="function"?queueMicrotask:typeof Lw<"u"?function(t){return Lw.resolve(null).then(t).catch(Vj)}:P1;function Vj(t){setTimeout(function(){throw t})}function gm(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),nd(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);nd(e)}function Uo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Uc=Math.random().toString(36).slice(2),gs="__reactFiber$"+Uc,ld="__reactProps$"+Uc,Ys="__reactContainer$"+Uc,D1="__reactEvents$"+Uc,qj="__reactListeners$"+Uc,Wj="__reactHandles$"+Uc;function Ta(t){var e=t[gs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ys]||r[gs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Bw(t);t!==null;){if(r=t[gs])return r;t=Bw(t)}return e}t=r,r=t.parentNode}return null}function $d(t){return t=t[gs]||t[Ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function D0(t){return t[ld]||null}var L1=[],Ul=-1;function na(t){return{current:t}}function Wt(t){0>Ul||(t.current=L1[Ul],L1[Ul]=null,Ul--)}function Ut(t,e){Ul++,L1[Ul]=t.current,t.current=e}var Xo={},un=na(Xo),jn=na(!1),Wa=Xo;function yc(t,e){var r=t.type.contextTypes;if(!r)return Xo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mn(t){return t=t.childContextTypes,t!=null}function Mh(){Wt(jn),Wt(un)}function Fw(t,e,r){if(un.current!==Xo)throw Error(Ie(168));Ut(un,e),Ut(jn,r)}function vS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ie(108,Ik(t)||"Unknown",i));return or({},r,n)}function Ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xo,Wa=un.current,Ut(un,t),Ut(jn,jn.current),!0}function Uw(t,e,r){var n=t.stateNode;if(!n)throw Error(Ie(169));r?(t=vS(t,e,Wa),n.__reactInternalMemoizedMergedChildContext=t,Wt(jn),Wt(un),Ut(un,t)):Wt(jn),Ut(jn,r)}var Fs=null,L0=!1,vm=!1;function yS(t){Fs===null?Fs=[t]:Fs.push(t)}function Gj(t){L0=!0,yS(t)}function ia(){if(!vm&&Fs!==null){vm=!0;var t=0,e=Rt;try{var r=Fs;for(Rt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Fs=null,L0=!1}catch(i){throw Fs!==null&&(Fs=Fs.slice(t+1)),HE(Tv,ia),i}finally{Rt=e,vm=!1}}return null}var zl=[],$l=0,Dh=null,Lh=0,gi=[],vi=0,Ga=null,$s=1,Hs="";function ba(t,e){zl[$l++]=Lh,zl[$l++]=Dh,Dh=t,Lh=e}function xS(t,e,r){gi[vi++]=$s,gi[vi++]=Hs,gi[vi++]=Ga,Ga=t;var n=$s;t=Hs;var i=32-Yi(n)-1;n&=~(1<<i),r+=1;var s=32-Yi(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,$s=1<<32-Yi(e)+i|r<<i|n,Hs=s+t}else $s=1<<s|r<<i|n,Hs=t}function Lv(t){t.return!==null&&(ba(t,1),xS(t,1,0))}function Bv(t){for(;t===Dh;)Dh=zl[--$l],zl[$l]=null,Lh=zl[--$l],zl[$l]=null;for(;t===Ga;)Ga=gi[--vi],gi[vi]=null,Hs=gi[--vi],gi[vi]=null,$s=gi[--vi],gi[vi]=null}var ti=null,Qn=null,Qt=!1,Wi=null;function wS(t,e){var r=xi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function zw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ti=t,Qn=Uo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ti=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ga!==null?{id:$s,overflow:Hs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=xi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ti=t,Qn=null,!0):!1;default:return!1}}function B1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function F1(t){if(Qt){var e=Qn;if(e){var r=e;if(!zw(t,e)){if(B1(t))throw Error(Ie(418));e=Uo(r.nextSibling);var n=ti;e&&zw(t,e)?wS(n,r):(t.flags=t.flags&-4097|2,Qt=!1,ti=t)}}else{if(B1(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,Qt=!1,ti=t}}}function $w(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ti=t}function Tf(t){if(t!==ti)return!1;if(!Qt)return $w(t),Qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!M1(t.type,t.memoizedProps)),e&&(e=Qn)){if(B1(t))throw bS(),Error(Ie(418));for(;e;)wS(t,e),e=Uo(e.nextSibling)}if($w(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=Uo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=ti?Uo(t.stateNode.nextSibling):null;return!0}function bS(){for(var t=Qn;t;)t=Uo(t.nextSibling)}function xc(){Qn=ti=null,Qt=!1}function Fv(t){Wi===null?Wi=[t]:Wi.push(t)}var Yj=io.ReactCurrentBatchConfig;function vu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ie(309));var n=r.stateNode}if(!n)throw Error(Ie(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ie(284));if(!r._owner)throw Error(Ie(290,t))}return t}function Of(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hw(t){var e=t._init;return e(t._payload)}function _S(t){function e(N,_){if(t){var C=N.deletions;C===null?(N.deletions=[_],N.flags|=16):C.push(_)}}function r(N,_){if(!t)return null;for(;_!==null;)e(N,_),_=_.sibling;return null}function n(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function i(N,_){return N=Vo(N,_),N.index=0,N.sibling=null,N}function s(N,_,C){return N.index=C,t?(C=N.alternate,C!==null?(C=C.index,C<_?(N.flags|=2,_):C):(N.flags|=2,_)):(N.flags|=1048576,_)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,_,C,S){return _===null||_.tag!==6?(_=Sm(C,N.mode,S),_.return=N,_):(_=i(_,C),_.return=N,_)}function h(N,_,C,S){var O=C.type;return O===Pl?p(N,_,C.props.children,S,C.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wo&&Hw(O)===_.type)?(S=i(_,C.props),S.ref=vu(N,_,C),S.return=N,S):(S=fh(C.type,C.key,C.props,null,N.mode,S),S.ref=vu(N,_,C),S.return=N,S)}function d(N,_,C,S){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=Cm(C,N.mode,S),_.return=N,_):(_=i(_,C.children||[]),_.return=N,_)}function p(N,_,C,S,O){return _===null||_.tag!==7?(_=Ua(C,N.mode,S,O),_.return=N,_):(_=i(_,C),_.return=N,_)}function m(N,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Sm(""+_,N.mode,C),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case yf:return C=fh(_.type,_.key,_.props,null,N.mode,C),C.ref=vu(N,null,_),C.return=N,C;case Ml:return _=Cm(_,N.mode,C),_.return=N,_;case wo:var S=_._init;return m(N,S(_._payload),C)}if(Nu(_)||fu(_))return _=Ua(_,N.mode,C,null),_.return=N,_;Of(N,_)}return null}function v(N,_,C,S){var O=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return O!==null?null:c(N,_,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case yf:return C.key===O?h(N,_,C,S):null;case Ml:return C.key===O?d(N,_,C,S):null;case wo:return O=C._init,v(N,_,O(C._payload),S)}if(Nu(C)||fu(C))return O!==null?null:p(N,_,C,S,null);Of(N,C)}return null}function x(N,_,C,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return N=N.get(C)||null,c(_,N,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yf:return N=N.get(S.key===null?C:S.key)||null,h(_,N,S,O);case Ml:return N=N.get(S.key===null?C:S.key)||null,d(_,N,S,O);case wo:var D=S._init;return x(N,_,C,D(S._payload),O)}if(Nu(S)||fu(S))return N=N.get(C)||null,p(_,N,S,O,null);Of(_,S)}return null}function E(N,_,C,S){for(var O=null,D=null,M=_,R=_=0,k=null;M!==null&&R<C.length;R++){M.index>R?(k=M,M=null):k=M.sibling;var L=v(N,M,C[R],S);if(L===null){M===null&&(M=k);break}t&&M&&L.alternate===null&&e(N,M),_=s(L,_,R),D===null?O=L:D.sibling=L,D=L,M=k}if(R===C.length)return r(N,M),Qt&&ba(N,R),O;if(M===null){for(;R<C.length;R++)M=m(N,C[R],S),M!==null&&(_=s(M,_,R),D===null?O=M:D.sibling=M,D=M);return Qt&&ba(N,R),O}for(M=n(N,M);R<C.length;R++)k=x(M,N,R,C[R],S),k!==null&&(t&&k.alternate!==null&&M.delete(k.key===null?R:k.key),_=s(k,_,R),D===null?O=k:D.sibling=k,D=k);return t&&M.forEach(function(B){return e(N,B)}),Qt&&ba(N,R),O}function w(N,_,C,S){var O=fu(C);if(typeof O!="function")throw Error(Ie(150));if(C=O.call(C),C==null)throw Error(Ie(151));for(var D=O=null,M=_,R=_=0,k=null,L=C.next();M!==null&&!L.done;R++,L=C.next()){M.index>R?(k=M,M=null):k=M.sibling;var B=v(N,M,L.value,S);if(B===null){M===null&&(M=k);break}t&&M&&B.alternate===null&&e(N,M),_=s(B,_,R),D===null?O=B:D.sibling=B,D=B,M=k}if(L.done)return r(N,M),Qt&&ba(N,R),O;if(M===null){for(;!L.done;R++,L=C.next())L=m(N,L.value,S),L!==null&&(_=s(L,_,R),D===null?O=L:D.sibling=L,D=L);return Qt&&ba(N,R),O}for(M=n(N,M);!L.done;R++,L=C.next())L=x(M,N,R,L.value,S),L!==null&&(t&&L.alternate!==null&&M.delete(L.key===null?R:L.key),_=s(L,_,R),D===null?O=L:D.sibling=L,D=L);return t&&M.forEach(function(F){return e(N,F)}),Qt&&ba(N,R),O}function A(N,_,C,S){if(typeof C=="object"&&C!==null&&C.type===Pl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case yf:e:{for(var O=C.key,D=_;D!==null;){if(D.key===O){if(O=C.type,O===Pl){if(D.tag===7){r(N,D.sibling),_=i(D,C.props.children),_.return=N,N=_;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wo&&Hw(O)===D.type){r(N,D.sibling),_=i(D,C.props),_.ref=vu(N,D,C),_.return=N,N=_;break e}r(N,D);break}else e(N,D);D=D.sibling}C.type===Pl?(_=Ua(C.props.children,N.mode,S,C.key),_.return=N,N=_):(S=fh(C.type,C.key,C.props,null,N.mode,S),S.ref=vu(N,_,C),S.return=N,N=S)}return a(N);case Ml:e:{for(D=C.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){r(N,_.sibling),_=i(_,C.children||[]),_.return=N,N=_;break e}else{r(N,_);break}else e(N,_);_=_.sibling}_=Cm(C,N.mode,S),_.return=N,N=_}return a(N);case wo:return D=C._init,A(N,_,D(C._payload),S)}if(Nu(C))return E(N,_,C,S);if(fu(C))return w(N,_,C,S);Of(N,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(r(N,_.sibling),_=i(_,C),_.return=N,N=_):(r(N,_),_=Sm(C,N.mode,S),_.return=N,N=_),a(N)):r(N,_)}return A}var wc=_S(!0),ES=_S(!1),Bh=na(null),Fh=null,Hl=null,Uv=null;function zv(){Uv=Hl=Fh=null}function $v(t){var e=Bh.current;Wt(Bh),t._currentValue=e}function U1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ec(t,e){Fh=t,Uv=Hl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function Ni(t){var e=t._currentValue;if(Uv!==t)if(t={context:t,memoizedValue:e,next:null},Hl===null){if(Fh===null)throw Error(Ie(308));Hl=t,Fh.dependencies={lanes:0,firstContext:t}}else Hl=Hl.next=t;return e}var Oa=null;function Hv(t){Oa===null?Oa=[t]:Oa.push(t)}function SS(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Hv(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ks(t,n)}function Ks(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var bo=!1;function Vv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,St&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ks(t,r)}return i=n.interleaved,i===null?(e.next=e,Hv(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ks(t,r)}function oh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ov(t,r)}}function Vw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Uh(t,e,r,n){var i=t.updateQueue;bo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,d=h.next;h.next=null,a===null?s=d:a.next=d,a=h;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==a&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=h))}if(s!==null){var m=i.baseState;a=0,p=d=h=null,c=s;do{var v=c.lane,x=c.eventTime;if((n&v)===v){p!==null&&(p=p.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=t,w=c;switch(v=e,x=r,w.tag){case 1:if(E=w.payload,typeof E=="function"){m=E.call(x,m,v);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,v=typeof E=="function"?E.call(x,m,v):E,v==null)break e;m=or({},m,v);break e;case 2:bo=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[c]:v.push(c))}else x={eventTime:x,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=x,h=m):p=p.next=x,a|=v;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;v=c,c=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(h=m),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ka|=a,t.lanes=a,t.memoizedState=m}}function qw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ie(191,i));i.call(n)}}}var Hd={},bs=na(Hd),cd=na(Hd),ud=na(Hd);function Ia(t){if(t===Hd)throw Error(Ie(174));return t}function qv(t,e){switch(Ut(ud,e),Ut(cd,t),Ut(bs,Hd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:w1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=w1(e,t)}Wt(bs),Ut(bs,e)}function bc(){Wt(bs),Wt(cd),Wt(ud)}function AS(t){Ia(ud.current);var e=Ia(bs.current),r=w1(e,t.type);e!==r&&(Ut(cd,t),Ut(bs,r))}function Wv(t){cd.current===t&&(Wt(bs),Wt(cd))}var tr=na(0);function zh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ym=[];function Gv(){for(var t=0;t<ym.length;t++)ym[t]._workInProgressVersionPrimary=null;ym.length=0}var ah=io.ReactCurrentDispatcher,xm=io.ReactCurrentBatchConfig,Ya=0,sr=null,Dr=null,zr=null,$h=!1,Uu=!1,dd=0,Kj=0;function nn(){throw Error(Ie(321))}function Yv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Zi(t[r],e[r]))return!1;return!0}function Kv(t,e,r,n,i,s){if(Ya=s,sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ah.current=t===null||t.memoizedState===null?Jj:e8,t=r(n,i),Uu){s=0;do{if(Uu=!1,dd=0,25<=s)throw Error(Ie(301));s+=1,zr=Dr=null,e.updateQueue=null,ah.current=t8,t=r(n,i)}while(Uu)}if(ah.current=Hh,e=Dr!==null&&Dr.next!==null,Ya=0,zr=Dr=sr=null,$h=!1,e)throw Error(Ie(300));return t}function Xv(){var t=dd!==0;return dd=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?sr.memoizedState=zr=t:zr=zr.next=t,zr}function Ti(){if(Dr===null){var t=sr.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var e=zr===null?sr.memoizedState:zr.next;if(e!==null)zr=e,Dr=t;else{if(t===null)throw Error(Ie(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},zr===null?sr.memoizedState=zr=t:zr=zr.next=t}return zr}function fd(t,e){return typeof e=="function"?e(t):e}function wm(t){var e=Ti(),r=e.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=t;var n=Dr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var c=a=null,h=null,d=s;do{var p=d.lane;if((Ya&p)===p)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(c=h=m,a=n):h=h.next=m,sr.lanes|=p,Ka|=p}d=d.next}while(d!==null&&d!==s);h===null?a=n:h.next=c,Zi(n,e.memoizedState)||(kn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=h,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,sr.lanes|=s,Ka|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function bm(t){var e=Ti(),r=e.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Zi(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function NS(){}function TS(t,e){var r=sr,n=Ti(),i=e(),s=!Zi(n.memoizedState,i);if(s&&(n.memoizedState=i,kn=!0),n=n.queue,Qv(RS.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||zr!==null&&zr.memoizedState.tag&1){if(r.flags|=2048,hd(9,IS.bind(null,r,n,i,e),void 0,null),Hr===null)throw Error(Ie(349));Ya&30||OS(r,e,i)}return i}function OS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function IS(t,e,r,n){e.value=r,e.getSnapshot=n,kS(e)&&jS(t)}function RS(t,e,r){return r(function(){kS(e)&&jS(t)})}function kS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Zi(t,r)}catch{return!0}}function jS(t){var e=Ks(t,1);e!==null&&Ki(e,t,1,-1)}function Ww(t){var e=us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=Zj.bind(null,sr,t),[e.memoizedState,t]}function hd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function MS(){return Ti().memoizedState}function lh(t,e,r,n){var i=us();sr.flags|=t,i.memoizedState=hd(1|e,r,void 0,n===void 0?null:n)}function B0(t,e,r,n){var i=Ti();n=n===void 0?null:n;var s=void 0;if(Dr!==null){var a=Dr.memoizedState;if(s=a.destroy,n!==null&&Yv(n,a.deps)){i.memoizedState=hd(e,r,s,n);return}}sr.flags|=t,i.memoizedState=hd(1|e,r,s,n)}function Gw(t,e){return lh(8390656,8,t,e)}function Qv(t,e){return B0(2048,8,t,e)}function PS(t,e){return B0(4,2,t,e)}function DS(t,e){return B0(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BS(t,e,r){return r=r!=null?r.concat([t]):null,B0(4,4,LS.bind(null,e,t),r)}function Zv(){}function FS(t,e){var r=Ti();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function US(t,e){var r=Ti();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function zS(t,e,r){return Ya&21?(Zi(r,e)||(r=WE(),sr.lanes|=r,Ka|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=r)}function Xj(t,e){var r=Rt;Rt=r!==0&&4>r?r:4,t(!0);var n=xm.transition;xm.transition={};try{t(!1),e()}finally{Rt=r,xm.transition=n}}function $S(){return Ti().memoizedState}function Qj(t,e,r){var n=Ho(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HS(t))VS(e,r);else if(r=SS(t,e,r,n),r!==null){var i=wn();Ki(r,t,n,i),qS(r,e,n)}}function Zj(t,e,r){var n=Ho(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HS(t))VS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,r);if(i.hasEagerState=!0,i.eagerState=c,Zi(c,a)){var h=e.interleaved;h===null?(i.next=i,Hv(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}r=SS(t,e,i,n),r!==null&&(i=wn(),Ki(r,t,n,i),qS(r,e,n))}}function HS(t){var e=t.alternate;return t===sr||e!==null&&e===sr}function VS(t,e){Uu=$h=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function qS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ov(t,r)}}var Hh={readContext:Ni,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},Jj={readContext:Ni,useCallback:function(t,e){return us().memoizedState=[t,e===void 0?null:e],t},useContext:Ni,useEffect:Gw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lh(4194308,4,LS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lh(4194308,4,t,e)},useInsertionEffect:function(t,e){return lh(4,2,t,e)},useMemo:function(t,e){var r=us();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=us();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Qj.bind(null,sr,t),[n.memoizedState,t]},useRef:function(t){var e=us();return t={current:t},e.memoizedState=t},useState:Ww,useDebugValue:Zv,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=Ww(!1),e=t[0];return t=Xj.bind(null,t[1]),us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=sr,i=us();if(Qt){if(r===void 0)throw Error(Ie(407));r=r()}else{if(r=e(),Hr===null)throw Error(Ie(349));Ya&30||OS(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Gw(RS.bind(null,n,s,t),[t]),n.flags|=2048,hd(9,IS.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=us(),e=Hr.identifierPrefix;if(Qt){var r=Hs,n=$s;r=(n&~(1<<32-Yi(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=dd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Kj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e8={readContext:Ni,useCallback:FS,useContext:Ni,useEffect:Qv,useImperativeHandle:BS,useInsertionEffect:PS,useLayoutEffect:DS,useMemo:US,useReducer:wm,useRef:MS,useState:function(){return wm(fd)},useDebugValue:Zv,useDeferredValue:function(t){var e=Ti();return zS(e,Dr.memoizedState,t)},useTransition:function(){var t=wm(fd)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:NS,useSyncExternalStore:TS,useId:$S,unstable_isNewReconciler:!1},t8={readContext:Ni,useCallback:FS,useContext:Ni,useEffect:Qv,useImperativeHandle:BS,useInsertionEffect:PS,useLayoutEffect:DS,useMemo:US,useReducer:bm,useRef:MS,useState:function(){return bm(fd)},useDebugValue:Zv,useDeferredValue:function(t){var e=Ti();return Dr===null?e.memoizedState=t:zS(e,Dr.memoizedState,t)},useTransition:function(){var t=bm(fd)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:NS,useSyncExternalStore:TS,useId:$S,unstable_isNewReconciler:!1};function Bi(t,e){if(t&&t.defaultProps){e=or({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function z1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:or({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var F0={isMounted:function(t){return(t=t._reactInternals)?sl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=wn(),i=Ho(t),s=Ws(n,i);s.payload=e,r!=null&&(s.callback=r),e=zo(t,s,i),e!==null&&(Ki(e,t,i,n),oh(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=wn(),i=Ho(t),s=Ws(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=zo(t,s,i),e!==null&&(Ki(e,t,i,n),oh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wn(),n=Ho(t),i=Ws(r,n);i.tag=2,e!=null&&(i.callback=e),e=zo(t,i,n),e!==null&&(Ki(e,t,n,r),oh(e,t,n))}};function Yw(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!sd(r,n)||!sd(i,s):!0}function WS(t,e,r){var n=!1,i=Xo,s=e.contextType;return typeof s=="object"&&s!==null?s=Ni(s):(i=Mn(e)?Wa:un.current,n=e.contextTypes,s=(n=n!=null)?yc(t,i):Xo),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=F0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Kw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&F0.enqueueReplaceState(e,e.state,null)}function $1(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Vv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ni(s):(s=Mn(e)?Wa:un.current,i.context=yc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(z1(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&F0.enqueueReplaceState(i,i.state,null),Uh(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _c(t,e){try{var r="",n=e;do r+=Ok(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _m(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function H1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var r8=typeof WeakMap=="function"?WeakMap:Map;function GS(t,e,r){r=Ws(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qh||(qh=!0,J1=n),H1(t,e)},r}function YS(t,e,r){r=Ws(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){H1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){H1(t,e),typeof n!="function"&&($o===null?$o=new Set([this]):$o.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Xw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new r8;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=g8.bind(null,t,e,r),e.then(t,t))}function Qw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zw(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ws(-1,1),e.tag=2,zo(r,e,1))),r.lanes|=1),t)}var n8=io.ReactCurrentOwner,kn=!1;function gn(t,e,r,n){e.child=t===null?ES(e,null,r,n):wc(e,t.child,r,n)}function Jw(t,e,r,n,i){r=r.render;var s=e.ref;return ec(e,i),n=Kv(t,e,r,n,s,i),r=Xv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xs(t,e,i)):(Qt&&r&&Lv(e),e.flags|=1,gn(t,e,n,i),e.child)}function eb(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!oy(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,KS(t,e,s,n,i)):(t=fh(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:sd,r(a,n)&&t.ref===e.ref)return Xs(t,e,i)}return e.flags|=1,t=Vo(s,n),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(sd(s,n)&&t.ref===e.ref)if(kn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Xs(t,e,i)}return V1(t,e,r,n,i)}function XS(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(ql,Vn),Vn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ut(ql,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ut(ql,Vn),Vn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ut(ql,Vn),Vn|=n;return gn(t,e,i,r),e.child}function QS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function V1(t,e,r,n,i){var s=Mn(r)?Wa:un.current;return s=yc(e,s),ec(e,i),r=Kv(t,e,r,n,s,i),n=Xv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xs(t,e,i)):(Qt&&n&&Lv(e),e.flags|=1,gn(t,e,r,i),e.child)}function tb(t,e,r,n,i){if(Mn(r)){var s=!0;Ph(e)}else s=!1;if(ec(e,i),e.stateNode===null)ch(t,e),WS(e,r,n),$1(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ni(d):(d=Mn(r)?Wa:un.current,d=yc(e,d));var p=r.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||h!==d)&&Kw(e,a,n,d),bo=!1;var v=e.memoizedState;a.state=v,Uh(e,n,a,i),h=e.memoizedState,c!==n||v!==h||jn.current||bo?(typeof p=="function"&&(z1(e,r,p,n),h=e.memoizedState),(c=bo||Yw(e,r,c,n,v,h,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=d,n=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,CS(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Bi(e.type,c),a.props=d,m=e.pendingProps,v=a.context,h=r.contextType,typeof h=="object"&&h!==null?h=Ni(h):(h=Mn(r)?Wa:un.current,h=yc(e,h));var x=r.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||v!==h)&&Kw(e,a,n,h),bo=!1,v=e.memoizedState,a.state=v,Uh(e,n,a,i);var E=e.memoizedState;c!==m||v!==E||jn.current||bo?(typeof x=="function"&&(z1(e,r,x,n),E=e.memoizedState),(d=bo||Yw(e,r,d,n,v,E,h)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,E,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,E,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=E),a.props=n,a.state=E,a.context=h,n=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),n=!1)}return q1(t,e,r,n,s,i)}function q1(t,e,r,n,i,s){QS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Uw(e,r,!1),Xs(t,e,s);n=e.stateNode,n8.current=e;var c=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=wc(e,t.child,null,s),e.child=wc(e,null,c,s)):gn(t,e,c,s),e.memoizedState=n.state,i&&Uw(e,r,!0),e.child}function ZS(t){var e=t.stateNode;e.pendingContext?Fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fw(t,e.context,!1),qv(t,e.containerInfo)}function rb(t,e,r,n,i){return xc(),Fv(i),e.flags|=256,gn(t,e,r,n),e.child}var W1={dehydrated:null,treeContext:null,retryLane:0};function G1(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,r){var n=e.pendingProps,i=tr.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ut(tr,i&1),t===null)return F1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=$0(a,n,0,null),t=Ua(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=G1(r),e.memoizedState=W1,t):Jv(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return i8(t,e,a,n,c,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,c=i.sibling;var h={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=h,e.deletions=null):(n=Vo(i,h),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=Vo(c,s):(s=Ua(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?G1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=W1,n}return s=t.child,t=s.sibling,n=Vo(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Jv(t,e){return e=$0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function If(t,e,r,n){return n!==null&&Fv(n),wc(e,t.child,null,r),t=Jv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i8(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=_m(Error(Ie(422))),If(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=$0({mode:"visible",children:n.children},i,0,null),s=Ua(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&wc(e,t.child,null,a),e.child.memoizedState=G1(a),e.memoizedState=W1,s);if(!(e.mode&1))return If(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,s=Error(Ie(419)),n=_m(s,n,void 0),If(t,e,a,n)}if(c=(a&t.childLanes)!==0,kn||c){if(n=Hr,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ks(t,i),Ki(n,t,i,-1))}return sy(),n=_m(Error(Ie(421))),If(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=Uo(i.nextSibling),ti=e,Qt=!0,Wi=null,t!==null&&(gi[vi++]=$s,gi[vi++]=Hs,gi[vi++]=Ga,$s=t.id,Hs=t.overflow,Ga=e),e=Jv(e,n.children),e.flags|=4096,e)}function nb(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),U1(t.return,e,r)}function Em(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function eC(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(gn(t,e,n.children,r),n=tr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nb(t,r,e);else if(t.tag===19)nb(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ut(tr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&zh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Em(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Em(e,!0,r,null,s);break;case"together":Em(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ch(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ka|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,r=Vo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Vo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function s8(t,e,r){switch(e.tag){case 3:ZS(e),xc();break;case 5:AS(e);break;case 1:Mn(e.type)&&Ph(e);break;case 4:qv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ut(Bh,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ut(tr,tr.current&1),e.flags|=128,null):r&e.child.childLanes?JS(t,e,r):(Ut(tr,tr.current&1),t=Xs(t,e,r),t!==null?t.sibling:null);Ut(tr,tr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eC(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ut(tr,tr.current),n)break;return null;case 22:case 23:return e.lanes=0,XS(t,e,r)}return Xs(t,e,r)}var tC,Y1,rC,nC;tC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Y1=function(){};rC=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ia(bs.current);var s=null;switch(r){case"input":i=g1(t,i),n=g1(t,n),s=[];break;case"select":i=or({},i,{value:void 0}),n=or({},n,{value:void 0}),s=[];break;case"textarea":i=x1(t,i),n=x1(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=jh)}b1(r,n);var a;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var h=n[d];if(c=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&h!==c&&(h!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(r||(r={}),r[a]=h[a])}else r||(s||(s=[]),s.push(d,r)),r=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(s=s||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zu.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&Ht("scroll",t),s||c===h||(s=[])):(s=s||[]).push(d,h))}r&&(s=s||[]).push("style",r);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};nC=function(t,e,r,n){r!==n&&(e.flags|=4)};function yu(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function o8(t,e,r){var n=e.pendingProps;switch(Bv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Mn(e.type)&&Mh(),sn(e),null;case 3:return n=e.stateNode,bc(),Wt(jn),Wt(un),Gv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wi!==null&&(rg(Wi),Wi=null))),Y1(t,e),sn(e),null;case 5:Wv(e);var i=Ia(ud.current);if(r=e.type,t!==null&&e.stateNode!=null)rC(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ie(166));return sn(e),null}if(t=Ia(bs.current),Tf(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[gs]=e,n[ld]=s,t=(e.mode&1)!==0,r){case"dialog":Ht("cancel",n),Ht("close",n);break;case"iframe":case"object":case"embed":Ht("load",n);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Ht(Ou[i],n);break;case"source":Ht("error",n);break;case"img":case"image":case"link":Ht("error",n),Ht("load",n);break;case"details":Ht("toggle",n);break;case"input":fw(n,s),Ht("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ht("invalid",n);break;case"textarea":pw(n,s),Ht("invalid",n)}b1(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?n.textContent!==c&&(s.suppressHydrationWarning!==!0&&Nf(n.textContent,c,t),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Nf(n.textContent,c,t),i=["children",""+c]):Zu.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ht("scroll",n)}switch(r){case"input":xf(n),hw(n,s,!0);break;case"textarea":xf(n),mw(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=jh)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RE(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[gs]=e,t[ld]=n,tC(t,e,!1,!1),e.stateNode=t;e:{switch(a=_1(r,n),r){case"dialog":Ht("cancel",t),Ht("close",t),i=n;break;case"iframe":case"object":case"embed":Ht("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ou.length;i++)Ht(Ou[i],t);i=n;break;case"source":Ht("error",t),i=n;break;case"img":case"image":case"link":Ht("error",t),Ht("load",t),i=n;break;case"details":Ht("toggle",t),i=n;break;case"input":fw(t,n),i=g1(t,n),Ht("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=or({},n,{value:void 0}),Ht("invalid",t);break;case"textarea":pw(t,n),i=x1(t,n),Ht("invalid",t);break;default:i=n}b1(r,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];s==="style"?ME(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&kE(t,h)):s==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Ju(t,h):typeof h=="number"&&Ju(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zu.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ht("scroll",t):h!=null&&Ev(t,s,h,a))}switch(r){case"input":xf(t),hw(t,n,!1);break;case"textarea":xf(t),mw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ko(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Xl(t,!!n.multiple,s,!1):n.defaultValue!=null&&Xl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)nC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ie(166));if(r=Ia(ud.current),Ia(bs.current),Tf(e)){if(n=e.stateNode,r=e.memoizedProps,n[gs]=e,(s=n.nodeValue!==r)&&(t=ti,t!==null))switch(t.tag){case 3:Nf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nf(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gs]=e,e.stateNode=n}return sn(e),null;case 13:if(Wt(tr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qt&&Qn!==null&&e.mode&1&&!(e.flags&128))bS(),xc(),e.flags|=98560,s=!1;else if(s=Tf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ie(317));s[gs]=e}else xc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),s=!1}else Wi!==null&&(rg(Wi),Wi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?Lr===0&&(Lr=3):sy())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return bc(),Y1(t,e),t===null&&od(e.stateNode.containerInfo),sn(e),null;case 10:return $v(e.type._context),sn(e),null;case 17:return Mn(e.type)&&Mh(),sn(e),null;case 19:if(Wt(tr),s=e.memoizedState,s===null)return sn(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)yu(s,!1);else{if(Lr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zh(t),a!==null){for(e.flags|=128,yu(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ut(tr,tr.current&1|2),e.child}t=t.sibling}s.tail!==null&&xr()>Ec&&(e.flags|=128,n=!0,yu(s,!1),e.lanes=4194304)}else{if(!n)if(t=zh(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),yu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Qt)return sn(e),null}else 2*xr()-s.renderingStartTime>Ec&&r!==1073741824&&(e.flags|=128,n=!0,yu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xr(),e.sibling=null,r=tr.current,Ut(tr,n?r&1|2:r&1),e):(sn(e),null);case 22:case 23:return iy(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Vn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function a8(t,e){switch(Bv(e),e.tag){case 1:return Mn(e.type)&&Mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bc(),Wt(jn),Wt(un),Gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wv(e),null;case 13:if(Wt(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));xc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(tr),null;case 4:return bc(),null;case 10:return $v(e.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var Rf=!1,an=!1,l8=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Vl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hr(t,e,n)}else r.current=null}function K1(t,e,r){try{r()}catch(n){hr(t,e,n)}}var ib=!1;function c8(t,e){if(k1=Ih,t=lS(),Dv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,c=-1,h=-1,d=0,p=0,m=t,v=null;t:for(;;){for(var x;m!==r||i!==0&&m.nodeType!==3||(c=a+i),m!==s||n!==0&&m.nodeType!==3||(h=a+n),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)v=m,m=x;for(;;){if(m===t)break t;if(v===r&&++d===i&&(c=a),v===s&&++p===n&&(h=a),(x=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=x}r=c===-1||h===-1?null:{start:c,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(j1={focusedElem:t,selectionRange:r},Ih=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,A=E.memoizedState,N=e.stateNode,_=N.getSnapshotBeforeUpdate(e.elementType===e.type?w:Bi(e.type,w),A);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(S){hr(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return E=ib,ib=!1,E}function zu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&K1(e,r,s)}i=i.next}while(i!==n)}}function U0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function X1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function iC(t){var e=t.alternate;e!==null&&(t.alternate=null,iC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gs],delete e[ld],delete e[D1],delete e[qj],delete e[Wj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sC(t){return t.tag===5||t.tag===3||t.tag===4}function sb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Q1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=jh));else if(n!==4&&(t=t.child,t!==null))for(Q1(t,e,r),t=t.sibling;t!==null;)Q1(t,e,r),t=t.sibling}function Z1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Z1(t,e,r),t=t.sibling;t!==null;)Z1(t,e,r),t=t.sibling}var Xr=null,Hi=!1;function ho(t,e,r){for(r=r.child;r!==null;)oC(t,e,r),r=r.sibling}function oC(t,e,r){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(k0,r)}catch{}switch(r.tag){case 5:an||Vl(r,e);case 6:var n=Xr,i=Hi;Xr=null,ho(t,e,r),Xr=n,Hi=i,Xr!==null&&(Hi?(t=Xr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xr.removeChild(r.stateNode));break;case 18:Xr!==null&&(Hi?(t=Xr,r=r.stateNode,t.nodeType===8?gm(t.parentNode,r):t.nodeType===1&&gm(t,r),nd(t)):gm(Xr,r.stateNode));break;case 4:n=Xr,i=Hi,Xr=r.stateNode.containerInfo,Hi=!0,ho(t,e,r),Xr=n,Hi=i;break;case 0:case 11:case 14:case 15:if(!an&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&K1(r,e,a),i=i.next}while(i!==n)}ho(t,e,r);break;case 1:if(!an&&(Vl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){hr(r,e,c)}ho(t,e,r);break;case 21:ho(t,e,r);break;case 22:r.mode&1?(an=(n=an)||r.memoizedState!==null,ho(t,e,r),an=n):ho(t,e,r);break;default:ho(t,e,r)}}function ob(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new l8),e.forEach(function(n){var i=y8.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ji(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Xr=c.stateNode,Hi=!1;break e;case 3:Xr=c.stateNode.containerInfo,Hi=!0;break e;case 4:Xr=c.stateNode.containerInfo,Hi=!0;break e}c=c.return}if(Xr===null)throw Error(Ie(160));oC(s,a,i),Xr=null,Hi=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(d){hr(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aC(e,t),e=e.sibling}function aC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ji(e,t),ls(t),n&4){try{zu(3,t,t.return),U0(3,t)}catch(w){hr(t,t.return,w)}try{zu(5,t,t.return)}catch(w){hr(t,t.return,w)}}break;case 1:ji(e,t),ls(t),n&512&&r!==null&&Vl(r,r.return);break;case 5:if(ji(e,t),ls(t),n&512&&r!==null&&Vl(r,r.return),t.flags&32){var i=t.stateNode;try{Ju(i,"")}catch(w){hr(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&OE(i,s),_1(c,a);var d=_1(c,s);for(a=0;a<h.length;a+=2){var p=h[a],m=h[a+1];p==="style"?ME(i,m):p==="dangerouslySetInnerHTML"?kE(i,m):p==="children"?Ju(i,m):Ev(i,p,m,d)}switch(c){case"input":v1(i,s);break;case"textarea":IE(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Xl(i,!!s.multiple,x,!1):v!==!!s.multiple&&(s.defaultValue!=null?Xl(i,!!s.multiple,s.defaultValue,!0):Xl(i,!!s.multiple,s.multiple?[]:"",!1))}i[ld]=s}catch(w){hr(t,t.return,w)}}break;case 6:if(ji(e,t),ls(t),n&4){if(t.stateNode===null)throw Error(Ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){hr(t,t.return,w)}}break;case 3:if(ji(e,t),ls(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{nd(e.containerInfo)}catch(w){hr(t,t.return,w)}break;case 4:ji(e,t),ls(t);break;case 13:ji(e,t),ls(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ry=xr())),n&4&&ob(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(an=(d=an)||p,ji(e,t),an=d):ji(e,t),ls(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for($e=t,p=t.child;p!==null;){for(m=$e=p;$e!==null;){switch(v=$e,x=v.child,v.tag){case 0:case 11:case 14:case 15:zu(4,v,v.return);break;case 1:Vl(v,v.return);var E=v.stateNode;if(typeof E.componentWillUnmount=="function"){n=v,r=v.return;try{e=n,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(w){hr(n,r,w)}}break;case 5:Vl(v,v.return);break;case 22:if(v.memoizedState!==null){lb(m);continue}}x!==null?(x.return=v,$e=x):lb(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=m.stateNode,h=m.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=jE("display",a))}catch(w){hr(t,t.return,w)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(w){hr(t,t.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ji(e,t),ls(t),n&4&&ob(t);break;case 21:break;default:ji(e,t),ls(t)}}function ls(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sC(r)){var n=r;break e}r=r.return}throw Error(Ie(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ju(i,""),n.flags&=-33);var s=sb(t);Z1(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,c=sb(t);Q1(t,c,a);break;default:throw Error(Ie(161))}}catch(h){hr(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u8(t,e,r){$e=t,lC(t)}function lC(t,e,r){for(var n=(t.mode&1)!==0;$e!==null;){var i=$e,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Rf;if(!a){var c=i.alternate,h=c!==null&&c.memoizedState!==null||an;c=Rf;var d=an;if(Rf=a,(an=h)&&!d)for($e=i;$e!==null;)a=$e,h=a.child,a.tag===22&&a.memoizedState!==null?cb(i):h!==null?(h.return=a,$e=h):cb(i);for(;s!==null;)$e=s,lC(s),s=s.sibling;$e=i,Rf=c,an=d}ab(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$e=s):ab(t)}}function ab(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||U0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!an)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Bi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qw(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}qw(e,a,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&nd(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}an||e.flags&512&&X1(e)}catch(v){hr(e,e.return,v)}}if(e===t){$e=null;break}if(r=e.sibling,r!==null){r.return=e.return,$e=r;break}$e=e.return}}function lb(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$e=r;break}$e=e.return}}function cb(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{U0(4,e)}catch(h){hr(e,r,h)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(h){hr(e,i,h)}}var s=e.return;try{X1(e)}catch(h){hr(e,s,h)}break;case 5:var a=e.return;try{X1(e)}catch(h){hr(e,a,h)}}}catch(h){hr(e,e.return,h)}if(e===t){$e=null;break}var c=e.sibling;if(c!==null){c.return=e.return,$e=c;break}$e=e.return}}var d8=Math.ceil,Vh=io.ReactCurrentDispatcher,ey=io.ReactCurrentOwner,Ci=io.ReactCurrentBatchConfig,St=0,Hr=null,Ar=null,Qr=0,Vn=0,ql=na(0),Lr=0,pd=null,Ka=0,z0=0,ty=0,$u=null,Rn=null,ry=0,Ec=1/0,Ps=null,qh=!1,J1=null,$o=null,kf=!1,Ro=null,Wh=0,Hu=0,eg=null,uh=-1,dh=0;function wn(){return St&6?xr():uh!==-1?uh:uh=xr()}function Ho(t){return t.mode&1?St&2&&Qr!==0?Qr&-Qr:Yj.transition!==null?(dh===0&&(dh=WE()),dh):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:JE(t.type)),t):1}function Ki(t,e,r,n){if(50<Hu)throw Hu=0,eg=null,Error(Ie(185));Ud(t,r,n),(!(St&2)||t!==Hr)&&(t===Hr&&(!(St&2)&&(z0|=r),Lr===4&&Eo(t,Qr)),Pn(t,n),r===1&&St===0&&!(e.mode&1)&&(Ec=xr()+500,L0&&ia()))}function Pn(t,e){var r=t.callbackNode;Yk(t,e);var n=Oh(t,t===Hr?Qr:0);if(n===0)r!==null&&yw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&yw(r),e===1)t.tag===0?Gj(ub.bind(null,t)):yS(ub.bind(null,t)),Hj(function(){!(St&6)&&ia()}),r=null;else{switch(GE(n)){case 1:r=Tv;break;case 4:r=VE;break;case 16:r=Th;break;case 536870912:r=qE;break;default:r=Th}r=gC(r,cC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function cC(t,e){if(uh=-1,dh=0,St&6)throw Error(Ie(327));var r=t.callbackNode;if(tc()&&t.callbackNode!==r)return null;var n=Oh(t,t===Hr?Qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Gh(t,n);else{e=n;var i=St;St|=2;var s=dC();(Hr!==t||Qr!==e)&&(Ps=null,Ec=xr()+500,Fa(t,e));do try{p8();break}catch(c){uC(t,c)}while(!0);zv(),Vh.current=s,St=i,Ar!==null?e=0:(Hr=null,Qr=0,e=Lr)}if(e!==0){if(e===2&&(i=N1(t),i!==0&&(n=i,e=tg(t,i))),e===1)throw r=pd,Fa(t,0),Eo(t,n),Pn(t,xr()),r;if(e===6)Eo(t,n);else{if(i=t.current.alternate,!(n&30)&&!f8(i)&&(e=Gh(t,n),e===2&&(s=N1(t),s!==0&&(n=s,e=tg(t,s))),e===1))throw r=pd,Fa(t,0),Eo(t,n),Pn(t,xr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Ie(345));case 2:_a(t,Rn,Ps);break;case 3:if(Eo(t,n),(n&130023424)===n&&(e=ry+500-xr(),10<e)){if(Oh(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=P1(_a.bind(null,t,Rn,Ps),e);break}_a(t,Rn,Ps);break;case 4:if(Eo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Yi(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*d8(n/1960))-n,10<n){t.timeoutHandle=P1(_a.bind(null,t,Rn,Ps),n);break}_a(t,Rn,Ps);break;case 5:_a(t,Rn,Ps);break;default:throw Error(Ie(329))}}}return Pn(t,xr()),t.callbackNode===r?cC.bind(null,t):null}function tg(t,e){var r=$u;return t.current.memoizedState.isDehydrated&&(Fa(t,e).flags|=256),t=Gh(t,e),t!==2&&(e=Rn,Rn=r,e!==null&&rg(e)),t}function rg(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function f8(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Zi(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Eo(t,e){for(e&=~ty,e&=~z0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Yi(e),n=1<<r;t[r]=-1,e&=~n}}function ub(t){if(St&6)throw Error(Ie(327));tc();var e=Oh(t,0);if(!(e&1))return Pn(t,xr()),null;var r=Gh(t,e);if(t.tag!==0&&r===2){var n=N1(t);n!==0&&(e=n,r=tg(t,n))}if(r===1)throw r=pd,Fa(t,0),Eo(t,e),Pn(t,xr()),r;if(r===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_a(t,Rn,Ps),Pn(t,xr()),null}function ny(t,e){var r=St;St|=1;try{return t(e)}finally{St=r,St===0&&(Ec=xr()+500,L0&&ia())}}function Xa(t){Ro!==null&&Ro.tag===0&&!(St&6)&&tc();var e=St;St|=1;var r=Ci.transition,n=Rt;try{if(Ci.transition=null,Rt=1,t)return t()}finally{Rt=n,Ci.transition=r,St=e,!(St&6)&&ia()}}function iy(){Vn=ql.current,Wt(ql)}function Fa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$j(r)),Ar!==null)for(r=Ar.return;r!==null;){var n=r;switch(Bv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Mh();break;case 3:bc(),Wt(jn),Wt(un),Gv();break;case 5:Wv(n);break;case 4:bc();break;case 13:Wt(tr);break;case 19:Wt(tr);break;case 10:$v(n.type._context);break;case 22:case 23:iy()}r=r.return}if(Hr=t,Ar=t=Vo(t.current,null),Qr=Vn=e,Lr=0,pd=null,ty=z0=Ka=0,Rn=$u=null,Oa!==null){for(e=0;e<Oa.length;e++)if(r=Oa[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Oa=null}return t}function uC(t,e){do{var r=Ar;try{if(zv(),ah.current=Hh,$h){for(var n=sr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$h=!1}if(Ya=0,zr=Dr=sr=null,Uu=!1,dd=0,ey.current=null,r===null||r.return===null){Lr=1,pd=e,Ar=null;break}e:{var s=t,a=r.return,c=r,h=e;if(e=Qr,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Qw(a);if(x!==null){x.flags&=-257,Zw(x,a,c,s,e),x.mode&1&&Xw(s,d,e),e=x,h=d;var E=e.updateQueue;if(E===null){var w=new Set;w.add(h),e.updateQueue=w}else E.add(h);break e}else{if(!(e&1)){Xw(s,d,e),sy();break e}h=Error(Ie(426))}}else if(Qt&&c.mode&1){var A=Qw(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Zw(A,a,c,s,e),Fv(_c(h,c));break e}}s=h=_c(h,c),Lr!==4&&(Lr=2),$u===null?$u=[s]:$u.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var N=GS(s,h,e);Vw(s,N);break e;case 1:c=h;var _=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&($o===null||!$o.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=YS(s,c,e);Vw(s,S);break e}}s=s.return}while(s!==null)}hC(r)}catch(O){e=O,Ar===r&&r!==null&&(Ar=r=r.return);continue}break}while(!0)}function dC(){var t=Vh.current;return Vh.current=Hh,t===null?Hh:t}function sy(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Hr===null||!(Ka&268435455)&&!(z0&268435455)||Eo(Hr,Qr)}function Gh(t,e){var r=St;St|=2;var n=dC();(Hr!==t||Qr!==e)&&(Ps=null,Fa(t,e));do try{h8();break}catch(i){uC(t,i)}while(!0);if(zv(),St=r,Vh.current=n,Ar!==null)throw Error(Ie(261));return Hr=null,Qr=0,Lr}function h8(){for(;Ar!==null;)fC(Ar)}function p8(){for(;Ar!==null&&!Fk();)fC(Ar)}function fC(t){var e=mC(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?hC(t):Ar=e,ey.current=null}function hC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=a8(r,e),r!==null){r.flags&=32767,Ar=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lr=6,Ar=null;return}}else if(r=o8(r,e,Vn),r!==null){Ar=r;return}if(e=e.sibling,e!==null){Ar=e;return}Ar=e=t}while(e!==null);Lr===0&&(Lr=5)}function _a(t,e,r){var n=Rt,i=Ci.transition;try{Ci.transition=null,Rt=1,m8(t,e,r,n)}finally{Ci.transition=i,Rt=n}return null}function m8(t,e,r,n){do tc();while(Ro!==null);if(St&6)throw Error(Ie(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Kk(t,s),t===Hr&&(Ar=Hr=null,Qr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kf||(kf=!0,gC(Th,function(){return tc(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ci.transition,Ci.transition=null;var a=Rt;Rt=1;var c=St;St|=4,ey.current=null,c8(t,r),aC(r,t),Pj(j1),Ih=!!k1,j1=k1=null,t.current=r,u8(r),Uk(),St=c,Rt=a,Ci.transition=s}else t.current=r;if(kf&&(kf=!1,Ro=t,Wh=i),s=t.pendingLanes,s===0&&($o=null),Hk(r.stateNode),Pn(t,xr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(qh)throw qh=!1,t=J1,J1=null,t;return Wh&1&&t.tag!==0&&tc(),s=t.pendingLanes,s&1?t===eg?Hu++:(Hu=0,eg=t):Hu=0,ia(),null}function tc(){if(Ro!==null){var t=GE(Wh),e=Ci.transition,r=Rt;try{if(Ci.transition=null,Rt=16>t?16:t,Ro===null)var n=!1;else{if(t=Ro,Ro=null,Wh=0,St&6)throw Error(Ie(331));var i=St;for(St|=4,$e=t.current;$e!==null;){var s=$e,a=s.child;if($e.flags&16){var c=s.deletions;if(c!==null){for(var h=0;h<c.length;h++){var d=c[h];for($e=d;$e!==null;){var p=$e;switch(p.tag){case 0:case 11:case 15:zu(8,p,s)}var m=p.child;if(m!==null)m.return=p,$e=m;else for(;$e!==null;){p=$e;var v=p.sibling,x=p.return;if(iC(p),p===d){$e=null;break}if(v!==null){v.return=x,$e=v;break}$e=x}}}var E=s.alternate;if(E!==null){var w=E.child;if(w!==null){E.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}$e=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$e=a;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zu(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,$e=N;break e}$e=s.return}}var _=t.current;for($e=_;$e!==null;){a=$e;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,$e=C;else e:for(a=_;$e!==null;){if(c=$e,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:U0(9,c)}}catch(O){hr(c,c.return,O)}if(c===a){$e=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,$e=S;break e}$e=c.return}}if(St=i,ia(),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(k0,t)}catch{}n=!0}return n}finally{Rt=r,Ci.transition=e}}return!1}function db(t,e,r){e=_c(r,e),e=GS(t,e,1),t=zo(t,e,1),e=wn(),t!==null&&(Ud(t,1,e),Pn(t,e))}function hr(t,e,r){if(t.tag===3)db(t,t,r);else for(;e!==null;){if(e.tag===3){db(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($o===null||!$o.has(n))){t=_c(r,t),t=YS(e,t,1),e=zo(e,t,1),t=wn(),e!==null&&(Ud(e,1,t),Pn(e,t));break}}e=e.return}}function g8(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&r,Hr===t&&(Qr&r)===r&&(Lr===4||Lr===3&&(Qr&130023424)===Qr&&500>xr()-ry?Fa(t,0):ty|=r),Pn(t,e)}function pC(t,e){e===0&&(t.mode&1?(e=_f,_f<<=1,!(_f&130023424)&&(_f=4194304)):e=1);var r=wn();t=Ks(t,e),t!==null&&(Ud(t,e,r),Pn(t,r))}function v8(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pC(t,r)}function y8(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ie(314))}n!==null&&n.delete(e),pC(t,r)}var mC;mC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)kn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return kn=!1,s8(t,e,r);kn=!!(t.flags&131072)}else kn=!1,Qt&&e.flags&1048576&&xS(e,Lh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ch(t,e),t=e.pendingProps;var i=yc(e,un.current);ec(e,r),i=Kv(null,e,n,t,i,r);var s=Xv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(n)?(s=!0,Ph(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vv(e),i.updater=F0,e.stateNode=i,i._reactInternals=e,$1(e,n,t,r),e=q1(null,e,n,!0,s,r)):(e.tag=0,Qt&&s&&Lv(e),gn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ch(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=w8(n),t=Bi(n,t),i){case 0:e=V1(null,e,n,t,r);break e;case 1:e=tb(null,e,n,t,r);break e;case 11:e=Jw(null,e,n,t,r);break e;case 14:e=eb(null,e,n,Bi(n.type,t),r);break e}throw Error(Ie(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bi(n,i),V1(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bi(n,i),tb(t,e,n,i,r);case 3:e:{if(ZS(e),t===null)throw Error(Ie(387));n=e.pendingProps,s=e.memoizedState,i=s.element,CS(t,e),Uh(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_c(Error(Ie(423)),e),e=rb(t,e,n,r,i);break e}else if(n!==i){i=_c(Error(Ie(424)),e),e=rb(t,e,n,r,i);break e}else for(Qn=Uo(e.stateNode.containerInfo.firstChild),ti=e,Qt=!0,Wi=null,r=ES(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xc(),n===i){e=Xs(t,e,r);break e}gn(t,e,n,r)}e=e.child}return e;case 5:return AS(e),t===null&&F1(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,M1(n,i)?a=null:s!==null&&M1(n,s)&&(e.flags|=32),QS(t,e),gn(t,e,a,r),e.child;case 6:return t===null&&F1(e),null;case 13:return JS(t,e,r);case 4:return qv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=wc(e,null,n,r):gn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bi(n,i),Jw(t,e,n,i,r);case 7:return gn(t,e,e.pendingProps,r),e.child;case 8:return gn(t,e,e.pendingProps.children,r),e.child;case 12:return gn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ut(Bh,n._currentValue),n._currentValue=a,s!==null)if(Zi(s.value,a)){if(s.children===i.children&&!jn.current){e=Xs(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var h=c.firstContext;h!==null;){if(h.context===n){if(s.tag===1){h=Ws(-1,r&-r),h.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?h.next=h:(h.next=p.next,p.next=h),d.pending=h}}s.lanes|=r,h=s.alternate,h!==null&&(h.lanes|=r),U1(s.return,r,e),c.lanes|=r;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ie(341));a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),U1(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}gn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ec(e,r),i=Ni(i),n=n(i),e.flags|=1,gn(t,e,n,r),e.child;case 14:return n=e.type,i=Bi(n,e.pendingProps),i=Bi(n.type,i),eb(t,e,n,i,r);case 15:return KS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Bi(n,i),ch(t,e),e.tag=1,Mn(n)?(t=!0,Ph(e)):t=!1,ec(e,r),WS(e,n,i),$1(e,n,i,r),q1(null,e,n,!0,t,r);case 19:return eC(t,e,r);case 22:return XS(t,e,r)}throw Error(Ie(156,e.tag))};function gC(t,e){return HE(t,e)}function x8(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(t,e,r,n){return new x8(t,e,r,n)}function oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w8(t){if(typeof t=="function")return oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cv)return 11;if(t===Av)return 14}return 2}function Vo(t,e){var r=t.alternate;return r===null?(r=xi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function fh(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")oy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Pl:return Ua(r.children,i,s,e);case Sv:a=8,i|=8;break;case f1:return t=xi(12,r,e,i|2),t.elementType=f1,t.lanes=s,t;case h1:return t=xi(13,r,e,i),t.elementType=h1,t.lanes=s,t;case p1:return t=xi(19,r,e,i),t.elementType=p1,t.lanes=s,t;case AE:return $0(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SE:a=10;break e;case CE:a=9;break e;case Cv:a=11;break e;case Av:a=14;break e;case wo:a=16,n=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=xi(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Ua(t,e,r,n){return t=xi(7,t,n,e),t.lanes=r,t}function $0(t,e,r,n){return t=xi(22,t,n,e),t.elementType=AE,t.lanes=r,t.stateNode={isHidden:!1},t}function Sm(t,e,r){return t=xi(6,t,null,e),t.lanes=r,t}function Cm(t,e,r){return e=xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b8(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sm(0),this.expirationTimes=sm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ay(t,e,r,n,i,s,a,c,h){return t=new b8(t,e,r,c,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vv(s),t}function _8(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function vC(t){if(!t)return Xo;t=t._reactInternals;e:{if(sl(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var r=t.type;if(Mn(r))return vS(t,r,e)}return e}function yC(t,e,r,n,i,s,a,c,h){return t=ay(r,n,!0,t,i,s,a,c,h),t.context=vC(null),r=t.current,n=wn(),i=Ho(r),s=Ws(n,i),s.callback=e??null,zo(r,s,i),t.current.lanes=i,Ud(t,i,n),Pn(t,n),t}function H0(t,e,r,n){var i=e.current,s=wn(),a=Ho(i);return r=vC(r),e.context===null?e.context=r:e.pendingContext=r,e=Ws(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=zo(i,e,a),t!==null&&(Ki(t,i,a,s),oh(t,i,a)),a}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ly(t,e){fb(t,e),(t=t.alternate)&&fb(t,e)}function E8(){return null}var xC=typeof reportError=="function"?reportError:function(t){console.error(t)};function cy(t){this._internalRoot=t}V0.prototype.render=cy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));H0(t,e,null,null)};V0.prototype.unmount=cy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xa(function(){H0(null,t,null,null)}),e[Ys]=null}};function V0(t){this._internalRoot=t}V0.prototype.unstable_scheduleHydration=function(t){if(t){var e=XE();t={blockedOn:null,target:t,priority:e};for(var r=0;r<_o.length&&e!==0&&e<_o[r].priority;r++);_o.splice(r,0,t),r===0&&ZE(t)}};function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hb(){}function S8(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var d=Yh(a);s.call(d)}}var a=yC(e,n,t,0,null,!1,!1,"",hb);return t._reactRootContainer=a,t[Ys]=a.current,od(t.nodeType===8?t.parentNode:t),Xa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var d=Yh(h);c.call(d)}}var h=ay(t,0,!1,null,null,!1,!1,"",hb);return t._reactRootContainer=h,t[Ys]=h.current,od(t.nodeType===8?t.parentNode:t),Xa(function(){H0(e,h,r,n)}),h}function W0(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var h=Yh(a);c.call(h)}}H0(e,a,t,i)}else a=S8(r,e,t,i,n);return Yh(a)}YE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Tu(e.pendingLanes);r!==0&&(Ov(e,r|1),Pn(e,xr()),!(St&6)&&(Ec=xr()+500,ia()))}break;case 13:Xa(function(){var n=Ks(t,1);if(n!==null){var i=wn();Ki(n,t,1,i)}}),ly(t,1)}};Iv=function(t){if(t.tag===13){var e=Ks(t,134217728);if(e!==null){var r=wn();Ki(e,t,134217728,r)}ly(t,134217728)}};KE=function(t){if(t.tag===13){var e=Ho(t),r=Ks(t,e);if(r!==null){var n=wn();Ki(r,t,e,n)}ly(t,e)}};XE=function(){return Rt};QE=function(t,e){var r=Rt;try{return Rt=t,e()}finally{Rt=r}};S1=function(t,e,r){switch(e){case"input":if(v1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=D0(n);if(!i)throw Error(Ie(90));TE(n),v1(n,i)}}}break;case"textarea":IE(t,r);break;case"select":e=r.value,e!=null&&Xl(t,!!r.multiple,e,!1)}};LE=ny;BE=Xa;var C8={usingClientEntryPoint:!1,Events:[$d,Fl,D0,PE,DE,ny]},xu={findFiberByHostInstance:Ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A8={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:io.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zE(t),t===null?null:t.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||E8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{k0=jf.inject(A8),ws=jf}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C8;ai.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uy(e))throw Error(Ie(200));return _8(t,e,null,r)};ai.createRoot=function(t,e){if(!uy(t))throw Error(Ie(299));var r=!1,n="",i=xC;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ay(t,1,!1,null,null,r,!1,n,i),t[Ys]=e.current,od(t.nodeType===8?t.parentNode:t),new cy(e)};ai.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=zE(e),t=t===null?null:t.stateNode,t};ai.flushSync=function(t){return Xa(t)};ai.hydrate=function(t,e,r){if(!q0(e))throw Error(Ie(200));return W0(null,t,e,!0,r)};ai.hydrateRoot=function(t,e,r){if(!uy(t))throw Error(Ie(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=xC;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=yC(e,null,t,1,r??null,i,!1,s,a),t[Ys]=e.current,od(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new V0(e)};ai.render=function(t,e,r){if(!q0(e))throw Error(Ie(200));return W0(null,t,e,!1,r)};ai.unmountComponentAtNode=function(t){if(!q0(t))throw Error(Ie(40));return t._reactRootContainer?(Xa(function(){W0(null,null,t,!1,function(){t._reactRootContainer=null,t[Ys]=null})}),!0):!1};ai.unstable_batchedUpdates=ny;ai.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!q0(r))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return W0(t,e,r,!1,n)};ai.version="18.3.1-next-f1338f8080-20240426";function wC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wC)}catch(t){console.error(t)}}wC(),wE.exports=ai;var sa=wE.exports;const bC=I0(sa);var _C,pb=sa;_C=pb.createRoot,pb.hydrateRoot;const N8=1,T8=1e6;let Am=0;function O8(){return Am=(Am+1)%Number.MAX_SAFE_INTEGER,Am.toString()}const Nm=new Map,mb=t=>{if(Nm.has(t))return;const e=setTimeout(()=>{Nm.delete(t),Vu({type:"REMOVE_TOAST",toastId:t})},T8);Nm.set(t,e)},I8=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,N8)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?mb(r):t.toasts.forEach(n=>{mb(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},hh=[];let ph={toasts:[]};function Vu(t){ph=I8(ph,t),hh.forEach(e=>{e(ph)})}function R8({...t}){const e=O8(),r=i=>Vu({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>Vu({type:"DISMISS_TOAST",toastId:e});return Vu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function k8(){const[t,e]=j.useState(ph);return j.useEffect(()=>(hh.push(e),()=>{const r=hh.indexOf(e);r>-1&&hh.splice(r,1)}),[t]),{...t,toast:R8,dismiss:r=>Vu({type:"DISMISS_TOAST",toastId:r})}}function Pe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function gb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function G0(...t){return e=>{let r=!1;const n=t.map(i=>{const s=gb(i,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():gb(t[i],null)}}}}function ot(...t){return j.useCallback(G0(...t),t)}function j8(t,e){const r=j.createContext(e),n=s=>{const{children:a,...c}=s,h=j.useMemo(()=>c,Object.values(c));return f.jsx(r.Provider,{value:h,children:a})};n.displayName=t+"Provider";function i(s){const a=j.useContext(r);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,i]}function En(t,e=[]){let r=[];function n(s,a){const c=j.createContext(a),h=r.length;r=[...r,a];const d=m=>{var N;const{scope:v,children:x,...E}=m,w=((N=v==null?void 0:v[t])==null?void 0:N[h])||c,A=j.useMemo(()=>E,Object.values(E));return f.jsx(w.Provider,{value:A,children:x})};d.displayName=s+"Provider";function p(m,v){var w;const x=((w=v==null?void 0:v[t])==null?void 0:w[h])||c,E=j.useContext(x);if(E)return E;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[d,p]}const i=()=>{const s=r.map(a=>j.createContext(a));return function(c){const h=(c==null?void 0:c[t])||s;return j.useMemo(()=>({[`__scope${t}`]:{...c,[t]:h}}),[c,h])}};return i.scopeName=t,[n,M8(i,...e)]}function M8(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((c,{useScope:h,scopeName:d})=>{const m=h(s)[`__scope${d}`];return{...c,...m}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function Qa(t){const e=D8(t),r=j.forwardRef((n,i)=>{const{children:s,...a}=n,c=j.Children.toArray(s),h=c.find(B8);if(h){const d=h.props.children,p=c.map(m=>m===h?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:m);return f.jsx(e,{...a,ref:i,children:j.isValidElement(d)?j.cloneElement(d,void 0,p):null})}return f.jsx(e,{...a,ref:i,children:s})});return r.displayName=`${t}.Slot`,r}var P8=Qa("Slot");function D8(t){const e=j.forwardRef((r,n)=>{const{children:i,...s}=r;if(j.isValidElement(i)){const a=U8(i),c=F8(s,i.props);return i.type!==j.Fragment&&(c.ref=n?G0(n,a):a),j.cloneElement(i,c)}return j.Children.count(i)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var EC=Symbol("radix.slottable");function L8(t){const e=({children:r})=>f.jsx(f.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=EC,e}function B8(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===EC}function F8(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...c)=>{const h=s(...c);return i(...c),h}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function U8(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Y0(t){const e=t+"CollectionProvider",[r,n]=En(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=w=>{const{scope:A,children:N}=w,_=Te.useRef(null),C=Te.useRef(new Map).current;return f.jsx(i,{scope:A,itemMap:C,collectionRef:_,children:N})};a.displayName=e;const c=t+"CollectionSlot",h=Qa(c),d=Te.forwardRef((w,A)=>{const{scope:N,children:_}=w,C=s(c,N),S=ot(A,C.collectionRef);return f.jsx(h,{ref:S,children:_})});d.displayName=c;const p=t+"CollectionItemSlot",m="data-radix-collection-item",v=Qa(p),x=Te.forwardRef((w,A)=>{const{scope:N,children:_,...C}=w,S=Te.useRef(null),O=ot(A,S),D=s(p,N);return Te.useEffect(()=>(D.itemMap.set(S,{ref:S,...C}),()=>void D.itemMap.delete(S))),f.jsx(v,{[m]:"",ref:O,children:_})});x.displayName=p;function E(w){const A=s(t+"CollectionConsumer",w);return Te.useCallback(()=>{const _=A.collectionRef.current;if(!_)return[];const C=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(A.itemMap.values()).sort((D,M)=>C.indexOf(D.ref.current)-C.indexOf(M.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},E,n]}var z8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=z8.reduce((t,e)=>{const r=Qa(`Primitive.${e}`),n=j.forwardRef((i,s)=>{const{asChild:a,...c}=i,h=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(h,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function dy(t,e){t&&sa.flushSync(()=>t.dispatchEvent(e))}function pr(t){const e=j.useRef(t);return j.useEffect(()=>{e.current=t}),j.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function $8(t,e=globalThis==null?void 0:globalThis.document){const r=pr(t);j.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var H8="DismissableLayer",ng="dismissableLayer.update",V8="dismissableLayer.pointerDownOutside",q8="dismissableLayer.focusOutside",vb,SC=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zc=j.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...h}=t,d=j.useContext(SC),[p,m]=j.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=j.useState({}),E=ot(e,M=>m(M)),w=Array.from(d.layers),[A]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),N=w.indexOf(A),_=p?w.indexOf(p):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,S=_>=N,O=G8(M=>{const R=M.target,k=[...d.branches].some(L=>L.contains(R));!S||k||(i==null||i(M),a==null||a(M),M.defaultPrevented||c==null||c())},v),D=Y8(M=>{const R=M.target;[...d.branches].some(L=>L.contains(R))||(s==null||s(M),a==null||a(M),M.defaultPrevented||c==null||c())},v);return $8(M=>{_===d.layers.size-1&&(n==null||n(M),!M.defaultPrevented&&c&&(M.preventDefault(),c()))},v),j.useEffect(()=>{if(p)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(vb=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),yb(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=vb)}},[p,v,r,d]),j.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),yb())},[p,d]),j.useEffect(()=>{const M=()=>x({});return document.addEventListener(ng,M),()=>document.removeEventListener(ng,M)},[]),f.jsx(We.div,{...h,ref:E,style:{pointerEvents:C?S?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,O.onPointerDownCapture)})});zc.displayName=H8;var W8="DismissableLayerBranch",CC=j.forwardRef((t,e)=>{const r=j.useContext(SC),n=j.useRef(null),i=ot(e,n);return j.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),f.jsx(We.div,{...t,ref:i})});CC.displayName=W8;function G8(t,e=globalThis==null?void 0:globalThis.document){const r=pr(t),n=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const s=c=>{if(c.target&&!n.current){let h=function(){AC(V8,r,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function Y8(t,e=globalThis==null?void 0:globalThis.document){const r=pr(t),n=j.useRef(!1);return j.useEffect(()=>{const i=s=>{s.target&&!n.current&&AC(q8,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function yb(){const t=new CustomEvent(ng);document.dispatchEvent(t)}function AC(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?dy(i,s):i.dispatchEvent(s)}var K8=zc,X8=CC,_r=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},Q8="Portal",Vd=j.forwardRef((t,e)=>{var c;const{container:r,...n}=t,[i,s]=j.useState(!1);_r(()=>s(!0),[]);const a=r||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?bC.createPortal(f.jsx(We.div,{...n,ref:e}),a):null});Vd.displayName=Q8;function Z8(t,e){return j.useReducer((r,n)=>e[r][n]??r,t)}var dn=t=>{const{present:e,children:r}=t,n=J8(e),i=typeof r=="function"?r({present:n.isPresent}):j.Children.only(r),s=ot(n.ref,eM(i));return typeof r=="function"||n.isPresent?j.cloneElement(i,{ref:s}):null};dn.displayName="Presence";function J8(t){const[e,r]=j.useState(),n=j.useRef(null),i=j.useRef(t),s=j.useRef("none"),a=t?"mounted":"unmounted",[c,h]=Z8(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Mf(n.current);s.current=c==="mounted"?d:"none"},[c]),_r(()=>{const d=n.current,p=i.current;if(p!==t){const v=s.current,x=Mf(d);t?h("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?h("UNMOUNT"):h(p&&v!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,h]),_r(()=>{if(e){let d;const p=e.ownerDocument.defaultView??window,m=x=>{const w=Mf(n.current).includes(x.animationName);if(x.target===e&&w&&(h("ANIMATION_END"),!i.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",d=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},v=x=>{x.target===e&&(s.current=Mf(n.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{p.clearTimeout(d),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:j.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Mf(t){return(t==null?void 0:t.animationName)||"none"}function eM(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var tM=wv[" useInsertionEffect ".trim().toString()]||_r;function Ss({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,s,a]=rM({defaultProp:e,onChange:r}),c=t!==void 0,h=c?t:i;{const p=j.useRef(t!==void 0);j.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,n])}const d=j.useCallback(p=>{var m;if(c){const v=nM(p)?p(t):p;v!==t&&((m=a.current)==null||m.call(a,v))}else s(p)},[c,t,s,a]);return[h,d]}function rM({defaultProp:t,onChange:e}){const[r,n]=j.useState(t),i=j.useRef(r),s=j.useRef(e);return tM(()=>{s.current=e},[e]),j.useEffect(()=>{var a;i.current!==r&&((a=s.current)==null||a.call(s,r),i.current=r)},[r,i]),[r,n,s]}function nM(t){return typeof t=="function"}var NC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iM="VisuallyHidden",K0=j.forwardRef((t,e)=>f.jsx(We.span,{...t,ref:e,style:{...NC,...t.style}}));K0.displayName=iM;var sM=K0,fy="ToastProvider",[hy,oM,aM]=Y0("Toast"),[TC,pQ]=En("Toast",[aM]),[lM,X0]=TC(fy),OC=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[c,h]=j.useState(null),[d,p]=j.useState(0),m=j.useRef(!1),v=j.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fy}\`. Expected non-empty \`string\`.`),f.jsx(hy.Provider,{scope:e,children:f.jsx(lM,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:d,viewport:c,onViewportChange:h,onToastAdd:j.useCallback(()=>p(x=>x+1),[]),onToastRemove:j.useCallback(()=>p(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:v,children:a})})};OC.displayName=fy;var IC="ToastViewport",cM=["F8"],ig="toast.viewportPause",sg="toast.viewportResume",RC=j.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=cM,label:i="Notifications ({hotkey})",...s}=t,a=X0(IC,r),c=oM(r),h=j.useRef(null),d=j.useRef(null),p=j.useRef(null),m=j.useRef(null),v=ot(e,m,a.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=a.toastCount>0;j.useEffect(()=>{const A=N=>{var C;n.length!==0&&n.every(S=>N[S]||N.code===S)&&((C=m.current)==null||C.focus())};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[n]),j.useEffect(()=>{const A=h.current,N=m.current;if(E&&A&&N){const _=()=>{if(!a.isClosePausedRef.current){const D=new CustomEvent(ig);N.dispatchEvent(D),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const D=new CustomEvent(sg);N.dispatchEvent(D),a.isClosePausedRef.current=!1}},S=D=>{!A.contains(D.relatedTarget)&&C()},O=()=>{A.contains(document.activeElement)||C()};return A.addEventListener("focusin",_),A.addEventListener("focusout",S),A.addEventListener("pointermove",_),A.addEventListener("pointerleave",O),window.addEventListener("blur",_),window.addEventListener("focus",C),()=>{A.removeEventListener("focusin",_),A.removeEventListener("focusout",S),A.removeEventListener("pointermove",_),A.removeEventListener("pointerleave",O),window.removeEventListener("blur",_),window.removeEventListener("focus",C)}}},[E,a.isClosePausedRef]);const w=j.useCallback(({tabbingDirection:A})=>{const _=c().map(C=>{const S=C.ref.current,O=[S,..._M(S)];return A==="forwards"?O:O.reverse()});return(A==="forwards"?_.reverse():_).flat()},[c]);return j.useEffect(()=>{const A=m.current;if(A){const N=_=>{var O,D,M;const C=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!C){const R=document.activeElement,k=_.shiftKey;if(_.target===A&&k){(O=d.current)==null||O.focus();return}const F=w({tabbingDirection:k?"backwards":"forwards"}),H=F.findIndex(z=>z===R);Tm(F.slice(H+1))?_.preventDefault():k?(D=d.current)==null||D.focus():(M=p.current)==null||M.focus()}};return A.addEventListener("keydown",N),()=>A.removeEventListener("keydown",N)}},[c,w]),f.jsxs(X8,{ref:h,role:"region","aria-label":i.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&f.jsx(og,{ref:d,onFocusFromOutsideViewport:()=>{const A=w({tabbingDirection:"forwards"});Tm(A)}}),f.jsx(hy.Slot,{scope:r,children:f.jsx(We.ol,{tabIndex:-1,...s,ref:v})}),E&&f.jsx(og,{ref:p,onFocusFromOutsideViewport:()=>{const A=w({tabbingDirection:"backwards"});Tm(A)}})]})});RC.displayName=IC;var kC="ToastFocusProxy",og=j.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,s=X0(kC,r);return f.jsx(K0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const c=a.relatedTarget;!((d=s.viewport)!=null&&d.contains(c))&&n()}})});og.displayName=kC;var qd="Toast",uM="toast.swipeStart",dM="toast.swipeMove",fM="toast.swipeCancel",hM="toast.swipeEnd",jC=j.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=t,[c,h]=Ss({prop:n,defaultProp:i??!0,onChange:s,caller:qd});return f.jsx(dn,{present:r||c,children:f.jsx(gM,{open:c,...a,ref:e,onClose:()=>h(!1),onPause:pr(t.onPause),onResume:pr(t.onResume),onSwipeStart:Pe(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(t.onSwipeMove,d=>{const{x:p,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Pe(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(t.onSwipeEnd,d=>{const{x:p,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),h(!1)})})})});jC.displayName=qd;var[pM,mM]=TC(qd,{onClose(){}}),gM=j.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:c,onPause:h,onResume:d,onSwipeStart:p,onSwipeMove:m,onSwipeCancel:v,onSwipeEnd:x,...E}=t,w=X0(qd,r),[A,N]=j.useState(null),_=ot(e,z=>N(z)),C=j.useRef(null),S=j.useRef(null),O=i||w.duration,D=j.useRef(0),M=j.useRef(O),R=j.useRef(0),{onToastAdd:k,onToastRemove:L}=w,B=pr(()=>{var $;(A==null?void 0:A.contains(document.activeElement))&&(($=w.viewport)==null||$.focus()),a()}),F=j.useCallback(z=>{!z||z===1/0||(window.clearTimeout(R.current),D.current=new Date().getTime(),R.current=window.setTimeout(B,z))},[B]);j.useEffect(()=>{const z=w.viewport;if(z){const $=()=>{F(M.current),d==null||d()},ee=()=>{const J=new Date().getTime()-D.current;M.current=M.current-J,window.clearTimeout(R.current),h==null||h()};return z.addEventListener(ig,ee),z.addEventListener(sg,$),()=>{z.removeEventListener(ig,ee),z.removeEventListener(sg,$)}}},[w.viewport,O,h,d,F]),j.useEffect(()=>{s&&!w.isClosePausedRef.current&&F(O)},[s,O,w.isClosePausedRef,F]),j.useEffect(()=>(k(),()=>L()),[k,L]);const H=j.useMemo(()=>A?UC(A):null,[A]);return w.viewport?f.jsxs(f.Fragment,{children:[H&&f.jsx(vM,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),f.jsx(pM,{scope:r,onClose:B,children:sa.createPortal(f.jsx(hy.ItemSlot,{scope:r,children:f.jsx(K8,{asChild:!0,onEscapeKeyDown:Pe(c,()=>{w.isFocusedToastEscapeKeyDownRef.current||B(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(We.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,...E,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Pe(t.onKeyDown,z=>{z.key==="Escape"&&(c==null||c(z.nativeEvent),z.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:Pe(t.onPointerDown,z=>{z.button===0&&(C.current={x:z.clientX,y:z.clientY})}),onPointerMove:Pe(t.onPointerMove,z=>{if(!C.current)return;const $=z.clientX-C.current.x,ee=z.clientY-C.current.y,J=!!S.current,te=["left","right"].includes(w.swipeDirection),Y=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,K=te?Y(0,$):0,V=te?0:Y(0,ee),G=z.pointerType==="touch"?10:2,Z={x:K,y:V},se={originalEvent:z,delta:Z};J?(S.current=Z,Pf(dM,m,se,{discrete:!1})):xb(Z,w.swipeDirection,G)?(S.current=Z,Pf(uM,p,se,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs($)>G||Math.abs(ee)>G)&&(C.current=null)}),onPointerUp:Pe(t.onPointerUp,z=>{const $=S.current,ee=z.target;if(ee.hasPointerCapture(z.pointerId)&&ee.releasePointerCapture(z.pointerId),S.current=null,C.current=null,$){const J=z.currentTarget,te={originalEvent:z,delta:$};xb($,w.swipeDirection,w.swipeThreshold)?Pf(hM,x,te,{discrete:!0}):Pf(fM,v,te,{discrete:!0}),J.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),vM=t=>{const{__scopeToast:e,children:r,...n}=t,i=X0(qd,e),[s,a]=j.useState(!1),[c,h]=j.useState(!1);return wM(()=>a(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(d)},[]),c?null:f.jsx(Vd,{asChild:!0,children:f.jsx(K0,{...n,children:s&&f.jsxs(f.Fragment,{children:[i.label," ",r]})})})},yM="ToastTitle",MC=j.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return f.jsx(We.div,{...n,ref:e})});MC.displayName=yM;var xM="ToastDescription",PC=j.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return f.jsx(We.div,{...n,ref:e})});PC.displayName=xM;var DC="ToastAction",LC=j.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?f.jsx(FC,{altText:r,asChild:!0,children:f.jsx(py,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${DC}\`. Expected non-empty \`string\`.`),null)});LC.displayName=DC;var BC="ToastClose",py=j.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=mM(BC,r);return f.jsx(FC,{asChild:!0,children:f.jsx(We.button,{type:"button",...n,ref:e,onClick:Pe(t.onClick,i.onClose)})})});py.displayName=BC;var FC=j.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return f.jsx(We.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function UC(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),bM(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...UC(n))}}),e}function Pf(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?dy(i,s):i.dispatchEvent(s)}var xb=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),s=n>i;return e==="left"||e==="right"?s&&n>r:!s&&i>r};function wM(t=()=>{}){const e=pr(t);_r(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function bM(t){return t.nodeType===t.ELEMENT_NODE}function _M(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Tm(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var EM=OC,zC=RC,$C=jC,HC=MC,VC=PC,qC=LC,WC=py;function GC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=GC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function YC(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=GC(t))&&(n&&(n+=" "),n+=e);return n}const wb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bb=YC,Q0=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return bb(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(d=>{const p=r==null?void 0:r[d],m=s==null?void 0:s[d];if(p===null)return null;const v=wb(p)||wb(m);return i[d][v]}),c=r&&Object.entries(r).reduce((d,p)=>{let[m,v]=p;return v===void 0||(d[m]=v),d},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,p)=>{let{class:m,className:v,...x}=p;return Object.entries(x).every(E=>{let[w,A]=E;return Array.isArray(A)?A.includes({...s,...c}[w]):{...s,...c}[w]===A})?[...d,m,v]:d},[]);return bb(t,a,h,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KC=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...c},h)=>j.createElement("svg",{ref:h,...CM,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:KC("lucide",i),...c},[...a.map(([d,p])=>j.createElement(d,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const r=j.forwardRef(({className:n,...i},s)=>j.createElement(AM,{ref:s,iconNode:e,className:KC(`lucide-${SM(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Xe("BookOpenText",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Xe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Xe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Xe("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=Xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Xe("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Xe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=Xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Xe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Xe("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Xe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=Xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Xe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=Xe("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=Xe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=Xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Xe("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=Xe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xy="-",FM=t=>{const e=zM(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const c=a.split(xy);return c[0]===""&&c.length!==1&&c.shift(),uA(c,e)||UM(a)},getConflictingClassGroupIds:(a,c)=>{const h=r[a]||[];return c&&n[a]?[...h,...n[a]]:h}}},uA=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?uA(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(xy);return(a=e.validators.find(({validator:c})=>c(s)))==null?void 0:a.classGroupId},Nb=/^\[(.+)\]$/,UM=t=>{if(Nb.test(t)){const e=Nb.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},zM=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return HM(Object.entries(t.classGroups),r).forEach(([s,a])=>{lg(a,n,s,e)}),n},lg=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Tb(e,i);s.classGroupId=r;return}if(typeof i=="function"){if($M(i)){lg(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{lg(a,Tb(e,s),r,n)})})},Tb=(t,e)=>{let r=t;return e.split(xy).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},$M=t=>t.isThemeGetter,HM=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,c])=>[e+a,c])):s);return[r,i]}):t,VM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},dA="!",qM=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,a=c=>{const h=[];let d=0,p=0,m;for(let A=0;A<c.length;A++){let N=c[A];if(d===0){if(N===i&&(n||c.slice(A,A+s)===e)){h.push(c.slice(p,A)),p=A+s;continue}if(N==="/"){m=A;continue}}N==="["?d++:N==="]"&&d--}const v=h.length===0?c:c.substring(p),x=v.startsWith(dA),E=x?v.substring(1):v,w=m&&m>p?m-p:void 0;return{modifiers:h,hasImportantModifier:x,baseClassName:E,maybePostfixModifierPosition:w}};return r?c=>r({className:c,parseClassName:a}):a},WM=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},GM=t=>({cache:VM(t.cacheSize),parseClassName:qM(t),...FM(t)}),YM=/\s+/,KM=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(YM);let c="";for(let h=a.length-1;h>=0;h-=1){const d=a[h],{modifiers:p,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:x}=r(d);let E=!!x,w=n(E?v.substring(0,x):v);if(!w){if(!E){c=d+(c.length>0?" "+c:c);continue}if(w=n(v),!w){c=d+(c.length>0?" "+c:c);continue}E=!1}const A=WM(p).join(":"),N=m?A+dA:A,_=N+w;if(s.includes(_))continue;s.push(_);const C=i(w,E);for(let S=0;S<C.length;++S){const O=C[S];s.push(N+O)}c=d+(c.length>0?" "+c:c)}return c};function XM(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=fA(e))&&(n&&(n+=" "),n+=r);return n}const fA=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=fA(t[n]))&&(r&&(r+=" "),r+=e);return r};function QM(t,...e){let r,n,i,s=a;function a(h){const d=e.reduce((p,m)=>m(p),t());return r=GM(d),n=r.cache.get,i=r.cache.set,s=c,c(h)}function c(h){const d=n(h);if(d)return d;const p=KM(h,r);return i(h,p),p}return function(){return s(XM.apply(null,arguments))}}const $t=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},hA=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZM=/^\d+\/\d+$/,JM=new Set(["px","full","screen"]),eP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,js=t=>rc(t)||JM.has(t)||ZM.test(t),po=t=>$c(t,"length",fP),rc=t=>!!t&&!Number.isNaN(Number(t)),Om=t=>$c(t,"number",rc),wu=t=>!!t&&Number.isInteger(Number(t)),sP=t=>t.endsWith("%")&&rc(t.slice(0,-1)),lt=t=>hA.test(t),mo=t=>eP.test(t),oP=new Set(["length","size","percentage"]),aP=t=>$c(t,oP,pA),lP=t=>$c(t,"position",pA),cP=new Set(["image","url"]),uP=t=>$c(t,cP,pP),dP=t=>$c(t,"",hP),bu=()=>!0,$c=(t,e,r)=>{const n=hA.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},fP=t=>tP.test(t)&&!rP.test(t),pA=()=>!1,hP=t=>nP.test(t),pP=t=>iP.test(t),mP=()=>{const t=$t("colors"),e=$t("spacing"),r=$t("blur"),n=$t("brightness"),i=$t("borderColor"),s=$t("borderRadius"),a=$t("borderSpacing"),c=$t("borderWidth"),h=$t("contrast"),d=$t("grayscale"),p=$t("hueRotate"),m=$t("invert"),v=$t("gap"),x=$t("gradientColorStops"),E=$t("gradientColorStopPositions"),w=$t("inset"),A=$t("margin"),N=$t("opacity"),_=$t("padding"),C=$t("saturate"),S=$t("scale"),O=$t("sepia"),D=$t("skew"),M=$t("space"),R=$t("translate"),k=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",lt,e],F=()=>[lt,e],H=()=>["",js,po],z=()=>["auto",rc,lt],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",lt],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[rc,lt];return{cacheSize:500,separator:":",theme:{colors:[bu],spacing:[js,po],blur:["none","",mo,lt],brightness:V(),borderColor:[t],borderRadius:["none","","full",mo,lt],borderSpacing:F(),borderWidth:H(),contrast:V(),grayscale:Y(),hueRotate:V(),invert:Y(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[sP,po],inset:B(),margin:B(),opacity:V(),padding:F(),saturate:V(),scale:V(),sepia:Y(),skew:V(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[mo]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),lt]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wu,lt]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",wu,lt]}],"grid-cols":[{"grid-cols":[bu]}],"col-start-end":[{col:["auto",{span:["full",wu,lt]},lt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[bu]}],"row-start-end":[{row:["auto",{span:[wu,lt]},lt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",lt,e]}],"min-w":[{"min-w":[lt,e,"min","max","fit"]}],"max-w":[{"max-w":[lt,e,"none","full","min","max","fit","prose",{screen:[mo]},mo]}],h:[{h:[lt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[lt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mo,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Om]}],"font-family":[{font:[bu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",rc,Om]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",js,lt]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",js,po]}],"underline-offset":[{"underline-offset":["auto",js,lt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),lP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},uP]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[js,lt]}],"outline-w":[{outline:[js,po]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[js,po]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mo,dP]}],"shadow-color":[{shadow:[bu]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",mo,lt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[wu,lt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[js,po,Om]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gP=QM(mP);function Be(...t){return gP(YC(t))}const vP=EM,mA=j.forwardRef(({className:t,...e},r)=>f.jsx(zC,{ref:r,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));mA.displayName=zC.displayName;const yP=Q0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gA=j.forwardRef(({className:t,variant:e,...r},n)=>f.jsx($C,{ref:n,className:Be(yP({variant:e}),t),...r}));gA.displayName=$C.displayName;const xP=j.forwardRef(({className:t,...e},r)=>f.jsx(qC,{ref:r,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));xP.displayName=qC.displayName;const vA=j.forwardRef(({className:t,...e},r)=>f.jsx(WC,{ref:r,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:f.jsx(yy,{className:"h-4 w-4"})}));vA.displayName=WC.displayName;const yA=j.forwardRef(({className:t,...e},r)=>f.jsx(HC,{ref:r,className:Be("text-sm font-semibold",t),...e}));yA.displayName=HC.displayName;const xA=j.forwardRef(({className:t,...e},r)=>f.jsx(VC,{ref:r,className:Be("text-sm opacity-90",t),...e}));xA.displayName=VC.displayName;function wP(){const{toasts:t}=k8();return f.jsxs(vP,{children:[t.map(function({id:e,title:r,description:n,action:i,...s}){return f.jsxs(gA,{...s,children:[f.jsxs("div",{className:"grid gap-1",children:[r&&f.jsx(yA,{children:r}),n&&f.jsx(xA,{children:n})]}),i,f.jsx(vA,{})]},e)}),f.jsx(mA,{})]})}var Ob=["light","dark"],bP="(prefers-color-scheme: dark)",_P=j.createContext(void 0),EP={setTheme:t=>{},themes:[]},SP=()=>{var t;return(t=j.useContext(_P))!=null?t:EP};j.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,attrs:c,nonce:h})=>{let d=s==="system",p=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(E=>`'${E}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=i?Ob.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(E,w=!1,A=!0)=>{let N=a?a[E]:E,_=w?E+"|| ''":`'${N}'`,C="";return i&&A&&!w&&Ob.includes(E)&&(C+=`d.style.colorScheme = '${E}';`),r==="class"?w||N?C+=`c.add(${_})`:C+="null":N&&(C+=`d[s](n,${_})`),C},x=t?`!function(){${p}${v(t)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${bP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}${d?"":"else{"+v(s,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}else{${v(s,!1,!1)};}${m}}catch(t){}}();`;return j.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:x}})});var CP=t=>{switch(t){case"success":return TP;case"info":return IP;case"warning":return OP;case"error":return RP;default:return null}},AP=Array(12).fill(0),NP=({visible:t,className:e})=>Te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Te.createElement("div",{className:"sonner-spinner"},AP.map((r,n)=>Te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),TP=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OP=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),IP=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),RP=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kP=Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),jP=()=>{let[t,e]=Te.useState(document.hidden);return Te.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},cg=1,MP=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:cg++,s=this.toasts.find(c=>c.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:r}),{...c,...t,id:i,dismissible:a,title:r}):c):this.addToast({title:r,...n,dismissible:a,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),i=r!==void 0,s,a=n.then(async h=>{if(s=["resolve",h],Te.isValidElement(h))i=!1,this.create({id:r,type:"default",message:h});else if(DP(h)&&!h.ok){i=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${h.status}`):e.error,p=typeof e.description=="function"?await e.description(`HTTP error! status: ${h.status}`):e.description;this.create({id:r,type:"error",message:d,description:p})}else if(e.success!==void 0){i=!1;let d=typeof e.success=="function"?await e.success(h):e.success,p=typeof e.description=="function"?await e.description(h):e.description;this.create({id:r,type:"success",message:d,description:p})}}).catch(async h=>{if(s=["reject",h],e.error!==void 0){i=!1;let d=typeof e.error=="function"?await e.error(h):e.error,p=typeof e.description=="function"?await e.description(h):e.description;this.create({id:r,type:"error",message:d,description:p})}}).finally(()=>{var h;i&&(this.dismiss(r),r=void 0),(h=e.finally)==null||h.call(e)}),c=()=>new Promise((h,d)=>a.then(()=>s[0]==="reject"?d(s[1]):h(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||cg++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},In=new MP,PP=(t,e)=>{let r=(e==null?void 0:e.id)||cg++;return In.addToast({title:t,...e,id:r}),r},DP=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",LP=PP,BP=()=>In.toasts,FP=()=>In.getActiveToasts(),ke=Object.assign(LP,{success:In.success,info:In.info,warning:In.warning,error:In.error,custom:In.custom,message:In.message,promise:In.promise,dismiss:In.dismiss,loading:In.loading},{getHistory:BP,getToasts:FP});function UP(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}UP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Df(t){return t.label!==void 0}var zP=3,$P="32px",HP="16px",Ib=4e3,VP=356,qP=14,WP=20,GP=200;function Mi(...t){return t.filter(Boolean).join(" ")}function YP(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var KP=t=>{var e,r,n,i,s,a,c,h,d,p,m;let{invert:v,toast:x,unstyled:E,interacting:w,setHeights:A,visibleToasts:N,heights:_,index:C,toasts:S,expanded:O,removeToast:D,defaultRichColors:M,closeButton:R,style:k,cancelButtonStyle:L,actionButtonStyle:B,className:F="",descriptionClassName:H="",duration:z,position:$,gap:ee,loadingIcon:J,expandByDefault:te,classNames:Y,icons:K,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:G}=t,[Z,se]=Te.useState(null),[ae,X]=Te.useState(null),[ne,ue]=Te.useState(!1),[fe,oe]=Te.useState(!1),[ve,Se]=Te.useState(!1),[Ce,Fe]=Te.useState(!1),[Ge,ht]=Te.useState(!1),[we,he]=Te.useState(0),[de,Ne]=Te.useState(0),ge=Te.useRef(x.duration||z||Ib),Ee=Te.useRef(null),Le=Te.useRef(null),He=C===0,rt=C+1<=N,ut=x.type,Tr=x.dismissible!==!1,wt=x.className||"",Or=x.descriptionClassName||"",kt=Te.useMemo(()=>_.findIndex(Qe=>Qe.toastId===x.id)||0,[_,x.id]),fn=Te.useMemo(()=>{var Qe;return(Qe=x.closeButton)!=null?Qe:R},[x.closeButton,R]),of=Te.useMemo(()=>x.duration||z||Ib,[x.duration,z]),Gt=Te.useRef(0),Me=Te.useRef(0),ar=Te.useRef(0),bt=Te.useRef(null),[Yt,fa]=$.split("-"),fl=Te.useMemo(()=>_.reduce((Qe,Ct,at)=>at>=kt?Qe:Qe+Ct.height,0),[_,kt]),nu=jP(),_t=x.invert||v,Ii=ut==="loading";Me.current=Te.useMemo(()=>kt*ee+fl,[kt,fl]),Te.useEffect(()=>{ge.current=of},[of]),Te.useEffect(()=>{ue(!0)},[]),Te.useEffect(()=>{let Qe=Le.current;if(Qe){let Ct=Qe.getBoundingClientRect().height;return Ne(Ct),A(at=>[{toastId:x.id,height:Ct,position:x.position},...at]),()=>A(at=>at.filter(Br=>Br.toastId!==x.id))}},[A,x.id]),Te.useLayoutEffect(()=>{if(!ne)return;let Qe=Le.current,Ct=Qe.style.height;Qe.style.height="auto";let at=Qe.getBoundingClientRect().height;Qe.style.height=Ct,Ne(at),A(Br=>Br.find(en=>en.toastId===x.id)?Br.map(en=>en.toastId===x.id?{...en,height:at}:en):[{toastId:x.id,height:at,position:x.position},...Br])},[ne,x.title,x.description,A,x.id]);let Ri=Te.useCallback(()=>{oe(!0),he(Me.current),A(Qe=>Qe.filter(Ct=>Ct.toastId!==x.id)),setTimeout(()=>{D(x)},GP)},[x,D,A,Me]);Te.useEffect(()=>{if(x.promise&&ut==="loading"||x.duration===1/0||x.type==="loading")return;let Qe;return O||w||G&&nu?(()=>{if(ar.current<Gt.current){let Ct=new Date().getTime()-Gt.current;ge.current=ge.current-Ct}ar.current=new Date().getTime()})():ge.current!==1/0&&(Gt.current=new Date().getTime(),Qe=setTimeout(()=>{var Ct;(Ct=x.onAutoClose)==null||Ct.call(x,x),Ri()},ge.current)),()=>clearTimeout(Qe)},[O,w,x,ut,G,nu,Ri]),Te.useEffect(()=>{x.delete&&Ri()},[Ri,x.delete]);function af(){var Qe,Ct,at;return K!=null&&K.loading?Te.createElement("div",{className:Mi(Y==null?void 0:Y.loader,(Qe=x==null?void 0:x.classNames)==null?void 0:Qe.loader,"sonner-loader"),"data-visible":ut==="loading"},K.loading):J?Te.createElement("div",{className:Mi(Y==null?void 0:Y.loader,(Ct=x==null?void 0:x.classNames)==null?void 0:Ct.loader,"sonner-loader"),"data-visible":ut==="loading"},J):Te.createElement(NP,{className:Mi(Y==null?void 0:Y.loader,(at=x==null?void 0:x.classNames)==null?void 0:at.loader),visible:ut==="loading"})}return Te.createElement("li",{tabIndex:0,ref:Le,className:Mi(F,wt,Y==null?void 0:Y.toast,(e=x==null?void 0:x.classNames)==null?void 0:e.toast,Y==null?void 0:Y.default,Y==null?void 0:Y[ut],(r=x==null?void 0:x.classNames)==null?void 0:r[ut]),"data-sonner-toast":"","data-rich-colors":(n=x.richColors)!=null?n:M,"data-styled":!(x.jsx||x.unstyled||E),"data-mounted":ne,"data-promise":!!x.promise,"data-swiped":Ge,"data-removed":fe,"data-visible":rt,"data-y-position":Yt,"data-x-position":fa,"data-index":C,"data-front":He,"data-swiping":ve,"data-dismissible":Tr,"data-type":ut,"data-invert":_t,"data-swipe-out":Ce,"data-swipe-direction":ae,"data-expanded":!!(O||te&&ne),style:{"--index":C,"--toasts-before":C,"--z-index":S.length-C,"--offset":`${fe?we:Me.current}px`,"--initial-height":te?"auto":`${de}px`,...k,...x.style},onDragEnd:()=>{Se(!1),se(null),bt.current=null},onPointerDown:Qe=>{Ii||!Tr||(Ee.current=new Date,he(Me.current),Qe.target.setPointerCapture(Qe.pointerId),Qe.target.tagName!=="BUTTON"&&(Se(!0),bt.current={x:Qe.clientX,y:Qe.clientY}))},onPointerUp:()=>{var Qe,Ct,at,Br;if(Ce||!Tr)return;bt.current=null;let en=Number(((Qe=Le.current)==null?void 0:Qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ir=Number(((Ct=Le.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ks=new Date().getTime()-((at=Ee.current)==null?void 0:at.getTime()),Rr=Z==="x"?en:Ir,ci=Math.abs(Rr)/ks;if(Math.abs(Rr)>=WP||ci>.11){he(Me.current),(Br=x.onDismiss)==null||Br.call(x,x),X(Z==="x"?en>0?"right":"left":Ir>0?"down":"up"),Ri(),Fe(!0),ht(!1);return}Se(!1),se(null)},onPointerMove:Qe=>{var Ct,at,Br,en;if(!bt.current||!Tr||((Ct=window.getSelection())==null?void 0:Ct.toString().length)>0)return;let Ir=Qe.clientY-bt.current.y,ks=Qe.clientX-bt.current.x,Rr=(at=t.swipeDirections)!=null?at:YP($);!Z&&(Math.abs(ks)>1||Math.abs(Ir)>1)&&se(Math.abs(ks)>Math.abs(Ir)?"x":"y");let ci={x:0,y:0};Z==="y"?(Rr.includes("top")||Rr.includes("bottom"))&&(Rr.includes("top")&&Ir<0||Rr.includes("bottom")&&Ir>0)&&(ci.y=Ir):Z==="x"&&(Rr.includes("left")||Rr.includes("right"))&&(Rr.includes("left")&&ks<0||Rr.includes("right")&&ks>0)&&(ci.x=ks),(Math.abs(ci.x)>0||Math.abs(ci.y)>0)&&ht(!0),(Br=Le.current)==null||Br.style.setProperty("--swipe-amount-x",`${ci.x}px`),(en=Le.current)==null||en.style.setProperty("--swipe-amount-y",`${ci.y}px`)}},fn&&!x.jsx?Te.createElement("button",{"aria-label":V,"data-disabled":Ii,"data-close-button":!0,onClick:Ii||!Tr?()=>{}:()=>{var Qe;Ri(),(Qe=x.onDismiss)==null||Qe.call(x,x)},className:Mi(Y==null?void 0:Y.closeButton,(i=x==null?void 0:x.classNames)==null?void 0:i.closeButton)},(s=K==null?void 0:K.close)!=null?s:kP):null,x.jsx||j.isValidElement(x.title)?x.jsx?x.jsx:typeof x.title=="function"?x.title():x.title:Te.createElement(Te.Fragment,null,ut||x.icon||x.promise?Te.createElement("div",{"data-icon":"",className:Mi(Y==null?void 0:Y.icon,(a=x==null?void 0:x.classNames)==null?void 0:a.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||af():null,x.type!=="loading"?x.icon||(K==null?void 0:K[ut])||CP(ut):null):null,Te.createElement("div",{"data-content":"",className:Mi(Y==null?void 0:Y.content,(c=x==null?void 0:x.classNames)==null?void 0:c.content)},Te.createElement("div",{"data-title":"",className:Mi(Y==null?void 0:Y.title,(h=x==null?void 0:x.classNames)==null?void 0:h.title)},typeof x.title=="function"?x.title():x.title),x.description?Te.createElement("div",{"data-description":"",className:Mi(H,Or,Y==null?void 0:Y.description,(d=x==null?void 0:x.classNames)==null?void 0:d.description)},typeof x.description=="function"?x.description():x.description):null),j.isValidElement(x.cancel)?x.cancel:x.cancel&&Df(x.cancel)?Te.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||L,onClick:Qe=>{var Ct,at;Df(x.cancel)&&Tr&&((at=(Ct=x.cancel).onClick)==null||at.call(Ct,Qe),Ri())},className:Mi(Y==null?void 0:Y.cancelButton,(p=x==null?void 0:x.classNames)==null?void 0:p.cancelButton)},x.cancel.label):null,j.isValidElement(x.action)?x.action:x.action&&Df(x.action)?Te.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||B,onClick:Qe=>{var Ct,at;Df(x.action)&&((at=(Ct=x.action).onClick)==null||at.call(Ct,Qe),!Qe.defaultPrevented&&Ri())},className:Mi(Y==null?void 0:Y.actionButton,(m=x==null?void 0:x.classNames)==null?void 0:m.actionButton)},x.action.label):null))};function Rb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function XP(t,e){let r={};return[t,e].forEach((n,i)=>{let s=i===1,a=s?"--mobile-offset":"--offset",c=s?HP:$P;function h(d){["top","right","bottom","left"].forEach(p=>{r[`${a}-${p}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?h(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${a}-${d}`]=c:r[`${a}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):h(c)}),r}var QP=j.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:h,mobileOffset:d,theme:p="light",richColors:m,duration:v,style:x,visibleToasts:E=zP,toastOptions:w,dir:A=Rb(),gap:N=qP,loadingIcon:_,icons:C,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:O}=t,[D,M]=Te.useState([]),R=Te.useMemo(()=>Array.from(new Set([n].concat(D.filter(G=>G.position).map(G=>G.position)))),[D,n]),[k,L]=Te.useState([]),[B,F]=Te.useState(!1),[H,z]=Te.useState(!1),[$,ee]=Te.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Te.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=Te.useRef(null),K=Te.useRef(!1),V=Te.useCallback(G=>{M(Z=>{var se;return(se=Z.find(ae=>ae.id===G.id))!=null&&se.delete||In.dismiss(G.id),Z.filter(({id:ae})=>ae!==G.id)})},[]);return Te.useEffect(()=>In.subscribe(G=>{if(G.dismiss){M(Z=>Z.map(se=>se.id===G.id?{...se,delete:!0}:se));return}setTimeout(()=>{bC.flushSync(()=>{M(Z=>{let se=Z.findIndex(ae=>ae.id===G.id);return se!==-1?[...Z.slice(0,se),{...Z[se],...G},...Z.slice(se+1)]:[G,...Z]})})})}),[]),Te.useEffect(()=>{if(p!=="system"){ee(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:Z})=>{ee(Z?"dark":"light")})}catch{G.addListener(({matches:se})=>{try{ee(se?"dark":"light")}catch(ae){console.error(ae)}})}},[p]),Te.useEffect(()=>{D.length<=1&&F(!1)},[D]),Te.useEffect(()=>{let G=Z=>{var se,ae;i.every(X=>Z[X]||Z.code===X)&&(F(!0),(se=J.current)==null||se.focus()),Z.code==="Escape"&&(document.activeElement===J.current||(ae=J.current)!=null&&ae.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[i]),Te.useEffect(()=>{if(J.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,K.current=!1)}},[J.current]),Te.createElement("section",{ref:e,"aria-label":`${S} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((G,Z)=>{var se;let[ae,X]=G.split("-");return D.length?Te.createElement("ol",{key:G,dir:A==="auto"?Rb():A,tabIndex:-1,ref:J,className:c,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":ae,"data-lifted":B&&D.length>1&&!s,"data-x-position":X,style:{"--front-toast-height":`${((se=k[0])==null?void 0:se.height)||0}px`,"--width":`${VP}px`,"--gap":`${N}px`,...x,...XP(h,d)},onBlur:ne=>{K.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(K.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||K.current||(K.current=!0,Y.current=ne.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{H||F(!1)},onDragEnd:()=>F(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},D.filter(ne=>!ne.position&&Z===0||ne.position===G).map((ne,ue)=>{var fe,oe;return Te.createElement(KP,{key:ne.id,icons:C,index:ue,toast:ne,defaultRichColors:m,duration:(fe=w==null?void 0:w.duration)!=null?fe:v,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:E,closeButton:(oe=w==null?void 0:w.closeButton)!=null?oe:a,interacting:H,position:G,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:V,toasts:D.filter(ve=>ve.position==ne.position),heights:k.filter(ve=>ve.position==ne.position),setHeights:L,expandByDefault:s,gap:N,loadingIcon:_,expanded:B,pauseWhenPageIsHidden:O,swipeDirections:t.swipeDirections})})):null}))});const ZP=({...t})=>{const{theme:e="system"}=SP();return f.jsx(QP,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var JP=wv[" useId ".trim().toString()]||(()=>{}),e5=0;function Xi(t){const[e,r]=j.useState(JP());return _r(()=>{t||r(n=>n??String(e5++))},[t]),t||(e?`radix-${e}`:"")}const t5=["top","right","bottom","left"],Qo=Math.min,Wn=Math.max,Zh=Math.round,Lf=Math.floor,_s=t=>({x:t,y:t}),r5={left:"right",right:"left",bottom:"top",top:"bottom"},n5={start:"end",end:"start"};function ug(t,e,r){return Wn(t,Qo(e,r))}function Zs(t,e){return typeof t=="function"?t(e):t}function Js(t){return t.split("-")[0]}function Hc(t){return t.split("-")[1]}function wy(t){return t==="x"?"y":"x"}function by(t){return t==="y"?"height":"width"}const i5=new Set(["top","bottom"]);function ys(t){return i5.has(Js(t))?"y":"x"}function _y(t){return wy(ys(t))}function s5(t,e,r){r===void 0&&(r=!1);const n=Hc(t),i=_y(t),s=by(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Jh(a)),[a,Jh(a)]}function o5(t){const e=Jh(t);return[dg(t),e,dg(e)]}function dg(t){return t.replace(/start|end/g,e=>n5[e])}const kb=["left","right"],jb=["right","left"],a5=["top","bottom"],l5=["bottom","top"];function c5(t,e,r){switch(t){case"top":case"bottom":return r?e?jb:kb:e?kb:jb;case"left":case"right":return e?a5:l5;default:return[]}}function u5(t,e,r,n){const i=Hc(t);let s=c5(Js(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(dg)))),s}function Jh(t){return t.replace(/left|right|bottom|top/g,e=>r5[e])}function d5(t){return{top:0,right:0,bottom:0,left:0,...t}}function wA(t){return typeof t!="number"?d5(t):{top:t,right:t,bottom:t,left:t}}function e0(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function Mb(t,e,r){let{reference:n,floating:i}=t;const s=ys(e),a=_y(e),c=by(a),h=Js(e),d=s==="y",p=n.x+n.width/2-i.width/2,m=n.y+n.height/2-i.height/2,v=n[c]/2-i[c]/2;let x;switch(h){case"top":x={x:p,y:n.y-i.height};break;case"bottom":x={x:p,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-i.width,y:m};break;default:x={x:n.x,y:n.y}}switch(Hc(e)){case"start":x[a]-=v*(r&&d?-1:1);break;case"end":x[a]+=v*(r&&d?-1:1);break}return x}const f5=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,c=s.filter(Boolean),h=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:m}=Mb(d,n,h),v=n,x={},E=0;for(let w=0;w<c.length;w++){const{name:A,fn:N}=c[w],{x:_,y:C,data:S,reset:O}=await N({x:p,y:m,initialPlacement:n,placement:v,strategy:i,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});p=_??p,m=C??m,x={...x,[A]:{...x[A],...S}},O&&E<=50&&(E++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(d=O.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:p,y:m}=Mb(d,v,h)),w=-1)}return{x:p,y:m,placement:v,strategy:i,middlewareData:x}};async function vd(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:c,strategy:h}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:v=!1,padding:x=0}=Zs(e,t),E=wA(x),A=c[v?m==="floating"?"reference":"floating":m],N=e0(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(A)))==null||r?A:A.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:d,rootBoundary:p,strategy:h})),_=m==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),S=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},O=e0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:C,strategy:h}):_);return{top:(N.top-O.top+E.top)/S.y,bottom:(O.bottom-N.bottom+E.bottom)/S.y,left:(N.left-O.left+E.left)/S.x,right:(O.right-N.right+E.right)/S.x}}const h5=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:a,elements:c,middlewareData:h}=e,{element:d,padding:p=0}=Zs(t,e)||{};if(d==null)return{};const m=wA(p),v={x:r,y:n},x=_y(i),E=by(x),w=await a.getDimensions(d),A=x==="y",N=A?"top":"left",_=A?"bottom":"right",C=A?"clientHeight":"clientWidth",S=s.reference[E]+s.reference[x]-v[x]-s.floating[E],O=v[x]-s.reference[x],D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let M=D?D[C]:0;(!M||!await(a.isElement==null?void 0:a.isElement(D)))&&(M=c.floating[C]||s.floating[E]);const R=S/2-O/2,k=M/2-w[E]/2-1,L=Qo(m[N],k),B=Qo(m[_],k),F=L,H=M-w[E]-B,z=M/2-w[E]/2+R,$=ug(F,z,H),ee=!h.arrow&&Hc(i)!=null&&z!==$&&s.reference[E]/2-(z<F?L:B)-w[E]/2<0,J=ee?z<F?z-F:z-H:0;return{[x]:v[x]+J,data:{[x]:$,centerOffset:z-$-J,...ee&&{alignmentOffset:J}},reset:ee}}}),p5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:c,platform:h,elements:d}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:w=!0,...A}=Zs(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const N=Js(i),_=ys(c),C=Js(c)===c,S=await(h.isRTL==null?void 0:h.isRTL(d.floating)),O=v||(C||!w?[Jh(c)]:o5(c)),D=E!=="none";!v&&D&&O.push(...u5(c,w,E,S));const M=[c,...O],R=await vd(e,A),k=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(p&&k.push(R[N]),m){const z=s5(i,a,S);k.push(R[z[0]],R[z[1]])}if(L=[...L,{placement:i,overflows:k}],!k.every(z=>z<=0)){var B,F;const z=(((B=s.flip)==null?void 0:B.index)||0)+1,$=M[z];if($&&(!(m==="alignment"?_!==ys($):!1)||L.every(te=>te.overflows[0]>0&&ys(te.placement)===_)))return{data:{index:z,overflows:L},reset:{placement:$}};let ee=(F=L.filter(J=>J.overflows[0]<=0).sort((J,te)=>J.overflows[1]-te.overflows[1])[0])==null?void 0:F.placement;if(!ee)switch(x){case"bestFit":{var H;const J=(H=L.filter(te=>{if(D){const Y=ys(te.placement);return Y===_||Y==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(Y=>Y>0).reduce((Y,K)=>Y+K,0)]).sort((te,Y)=>te[1]-Y[1])[0])==null?void 0:H[0];J&&(ee=J);break}case"initialPlacement":ee=c;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};function Pb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Db(t){return t5.some(e=>t[e]>=0)}const m5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Zs(t,e);switch(n){case"referenceHidden":{const s=await vd(e,{...i,elementContext:"reference"}),a=Pb(s,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Db(a)}}}case"escaped":{const s=await vd(e,{...i,altBoundary:!0}),a=Pb(s,r.floating);return{data:{escapedOffsets:a,escaped:Db(a)}}}default:return{}}}}},bA=new Set(["left","top"]);async function g5(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Js(r),c=Hc(r),h=ys(r)==="y",d=bA.has(a)?-1:1,p=s&&h?-1:1,m=Zs(e,t);let{mainAxis:v,crossAxis:x,alignmentAxis:E}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof E=="number"&&(x=c==="end"?E*-1:E),h?{x:x*p,y:v*d}:{x:v*d,y:x*p}}const v5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:c}=e,h=await g5(e,t);return a===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:i+h.x,y:s+h.y,data:{...h,placement:a}}}}},y5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:A=>{let{x:N,y:_}=A;return{x:N,y:_}}},...h}=Zs(t,e),d={x:r,y:n},p=await vd(e,h),m=ys(Js(i)),v=wy(m);let x=d[v],E=d[m];if(s){const A=v==="y"?"top":"left",N=v==="y"?"bottom":"right",_=x+p[A],C=x-p[N];x=ug(_,x,C)}if(a){const A=m==="y"?"top":"left",N=m==="y"?"bottom":"right",_=E+p[A],C=E-p[N];E=ug(_,E,C)}const w=c.fn({...e,[v]:x,[m]:E});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[v]:s,[m]:a}}}}}},x5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=e,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=Zs(t,e),p={x:r,y:n},m=ys(i),v=wy(m);let x=p[v],E=p[m];const w=Zs(c,e),A=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(h){const C=v==="y"?"height":"width",S=s.reference[v]-s.floating[C]+A.mainAxis,O=s.reference[v]+s.reference[C]-A.mainAxis;x<S?x=S:x>O&&(x=O)}if(d){var N,_;const C=v==="y"?"width":"height",S=bA.has(Js(i)),O=s.reference[m]-s.floating[C]+(S&&((N=a.offset)==null?void 0:N[m])||0)+(S?0:A.crossAxis),D=s.reference[m]+s.reference[C]+(S?0:((_=a.offset)==null?void 0:_[m])||0)-(S?A.crossAxis:0);E<O?E=O:E>D&&(E=D)}return{[v]:x,[m]:E}}}},w5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:c}=e,{apply:h=()=>{},...d}=Zs(t,e),p=await vd(e,d),m=Js(i),v=Hc(i),x=ys(i)==="y",{width:E,height:w}=s.floating;let A,N;m==="top"||m==="bottom"?(A=m,N=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(N=m,A=v==="end"?"top":"bottom");const _=w-p.top-p.bottom,C=E-p.left-p.right,S=Qo(w-p[A],_),O=Qo(E-p[N],C),D=!e.middlewareData.shift;let M=S,R=O;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(R=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(M=_),D&&!v){const L=Wn(p.left,0),B=Wn(p.right,0),F=Wn(p.top,0),H=Wn(p.bottom,0);x?R=E-2*(L!==0||B!==0?L+B:Wn(p.left,p.right)):M=w-2*(F!==0||H!==0?F+H:Wn(p.top,p.bottom))}await h({...e,availableWidth:R,availableHeight:M});const k=await a.getDimensions(c.floating);return E!==k.width||w!==k.height?{reset:{rects:!0}}:{}}}};function J0(){return typeof window<"u"}function Vc(t){return _A(t)?(t.nodeName||"").toLowerCase():"#document"}function ri(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Os(t){var e;return(e=(_A(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _A(t){return J0()?t instanceof Node||t instanceof ri(t).Node:!1}function Ji(t){return J0()?t instanceof Element||t instanceof ri(t).Element:!1}function As(t){return J0()?t instanceof HTMLElement||t instanceof ri(t).HTMLElement:!1}function Lb(t){return!J0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ri(t).ShadowRoot}const b5=new Set(["inline","contents"]);function Yd(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=es(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!b5.has(i)}const _5=new Set(["table","td","th"]);function E5(t){return _5.has(Vc(t))}const S5=[":popover-open",":modal"];function ep(t){return S5.some(e=>{try{return t.matches(e)}catch{return!1}})}const C5=["transform","translate","scale","rotate","perspective"],A5=["transform","translate","scale","rotate","perspective","filter"],N5=["paint","layout","strict","content"];function Ey(t){const e=Sy(),r=Ji(t)?es(t):t;return C5.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||A5.some(n=>(r.willChange||"").includes(n))||N5.some(n=>(r.contain||"").includes(n))}function T5(t){let e=Zo(t);for(;As(e)&&!Ac(e);){if(Ey(e))return e;if(ep(e))return null;e=Zo(e)}return null}function Sy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O5=new Set(["html","body","#document"]);function Ac(t){return O5.has(Vc(t))}function es(t){return ri(t).getComputedStyle(t)}function tp(t){return Ji(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zo(t){if(Vc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Lb(t)&&t.host||Os(t);return Lb(e)?e.host:e}function EA(t){const e=Zo(t);return Ac(e)?t.ownerDocument?t.ownerDocument.body:t.body:As(e)&&Yd(e)?e:EA(e)}function yd(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=EA(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=ri(i);if(s){const c=fg(a);return e.concat(a,a.visualViewport||[],Yd(i)?i:[],c&&r?yd(c):[])}return e.concat(i,yd(i,[],r))}function fg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SA(t){const e=es(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=As(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,c=Zh(r)!==s||Zh(n)!==a;return c&&(r=s,n=a),{width:r,height:n,$:c}}function Cy(t){return Ji(t)?t:t.contextElement}function nc(t){const e=Cy(t);if(!As(e))return _s(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=SA(e);let a=(s?Zh(r.width):r.width)/n,c=(s?Zh(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const I5=_s(0);function CA(t){const e=ri(t);return!Sy()||!e.visualViewport?I5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R5(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ri(t)?!1:e}function Za(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=Cy(t);let a=_s(1);e&&(n?Ji(n)&&(a=nc(n)):a=nc(t));const c=R5(s,r,n)?CA(s):_s(0);let h=(i.left+c.x)/a.x,d=(i.top+c.y)/a.y,p=i.width/a.x,m=i.height/a.y;if(s){const v=ri(s),x=n&&Ji(n)?ri(n):n;let E=v,w=fg(E);for(;w&&n&&x!==E;){const A=nc(w),N=w.getBoundingClientRect(),_=es(w),C=N.left+(w.clientLeft+parseFloat(_.paddingLeft))*A.x,S=N.top+(w.clientTop+parseFloat(_.paddingTop))*A.y;h*=A.x,d*=A.y,p*=A.x,m*=A.y,h+=C,d+=S,E=ri(w),w=fg(E)}}return e0({width:p,height:m,x:h,y:d})}function Ay(t,e){const r=tp(t).scrollLeft;return e?e.left+r:Za(Os(t)).left+r}function AA(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:Ay(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function k5(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=Os(n),c=e?ep(e.floating):!1;if(n===a||c&&s)return r;let h={scrollLeft:0,scrollTop:0},d=_s(1);const p=_s(0),m=As(n);if((m||!m&&!s)&&((Vc(n)!=="body"||Yd(a))&&(h=tp(n)),As(n))){const x=Za(n);d=nc(n),p.x=x.x+n.clientLeft,p.y=x.y+n.clientTop}const v=a&&!m&&!s?AA(a,h,!0):_s(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-h.scrollLeft*d.x+p.x+v.x,y:r.y*d.y-h.scrollTop*d.y+p.y+v.y}}function j5(t){return Array.from(t.getClientRects())}function M5(t){const e=Os(t),r=tp(t),n=t.ownerDocument.body,i=Wn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Wn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Ay(t);const c=-r.scrollTop;return es(n).direction==="rtl"&&(a+=Wn(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:c}}function P5(t,e){const r=ri(t),n=Os(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,c=0,h=0;if(i){s=i.width,a=i.height;const d=Sy();(!d||d&&e==="fixed")&&(c=i.offsetLeft,h=i.offsetTop)}return{width:s,height:a,x:c,y:h}}const D5=new Set(["absolute","fixed"]);function L5(t,e){const r=Za(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=As(t)?nc(t):_s(1),a=t.clientWidth*s.x,c=t.clientHeight*s.y,h=i*s.x,d=n*s.y;return{width:a,height:c,x:h,y:d}}function Bb(t,e,r){let n;if(e==="viewport")n=P5(t,r);else if(e==="document")n=M5(Os(t));else if(Ji(e))n=L5(e,r);else{const i=CA(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return e0(n)}function NA(t,e){const r=Zo(t);return r===e||!Ji(r)||Ac(r)?!1:es(r).position==="fixed"||NA(r,e)}function B5(t,e){const r=e.get(t);if(r)return r;let n=yd(t,[],!1).filter(c=>Ji(c)&&Vc(c)!=="body"),i=null;const s=es(t).position==="fixed";let a=s?Zo(t):t;for(;Ji(a)&&!Ac(a);){const c=es(a),h=Ey(a);!h&&c.position==="fixed"&&(i=null),(s?!h&&!i:!h&&c.position==="static"&&!!i&&D5.has(i.position)||Yd(a)&&!h&&NA(t,a))?n=n.filter(p=>p!==a):i=c,a=Zo(a)}return e.set(t,n),n}function F5(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?ep(e)?[]:B5(e,this._c):[].concat(r),n],c=a[0],h=a.reduce((d,p)=>{const m=Bb(e,p,i);return d.top=Wn(m.top,d.top),d.right=Qo(m.right,d.right),d.bottom=Qo(m.bottom,d.bottom),d.left=Wn(m.left,d.left),d},Bb(e,c,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function U5(t){const{width:e,height:r}=SA(t);return{width:e,height:r}}function z5(t,e,r){const n=As(e),i=Os(e),s=r==="fixed",a=Za(t,!0,s,e);let c={scrollLeft:0,scrollTop:0};const h=_s(0);function d(){h.x=Ay(i)}if(n||!n&&!s)if((Vc(e)!=="body"||Yd(i))&&(c=tp(e)),n){const x=Za(e,!0,s,e);h.x=x.x+e.clientLeft,h.y=x.y+e.clientTop}else i&&d();s&&!n&&i&&d();const p=i&&!n&&!s?AA(i,c):_s(0),m=a.left+c.scrollLeft-h.x-p.x,v=a.top+c.scrollTop-h.y-p.y;return{x:m,y:v,width:a.width,height:a.height}}function Im(t){return es(t).position==="static"}function Fb(t,e){if(!As(t)||es(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Os(t)===r&&(r=r.ownerDocument.body),r}function TA(t,e){const r=ri(t);if(ep(t))return r;if(!As(t)){let i=Zo(t);for(;i&&!Ac(i);){if(Ji(i)&&!Im(i))return i;i=Zo(i)}return r}let n=Fb(t,e);for(;n&&E5(n)&&Im(n);)n=Fb(n,e);return n&&Ac(n)&&Im(n)&&!Ey(n)?r:n||T5(t)||r}const $5=async function(t){const e=this.getOffsetParent||TA,r=this.getDimensions,n=await r(t.floating);return{reference:z5(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function H5(t){return es(t).direction==="rtl"}const V5={convertOffsetParentRelativeRectToViewportRelativeRect:k5,getDocumentElement:Os,getClippingRect:F5,getOffsetParent:TA,getElementRects:$5,getClientRects:j5,getDimensions:U5,getScale:nc,isElement:Ji,isRTL:H5};function OA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q5(t,e){let r=null,n;const i=Os(t);function s(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function a(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),s();const d=t.getBoundingClientRect(),{left:p,top:m,width:v,height:x}=d;if(c||e(),!v||!x)return;const E=Lf(m),w=Lf(i.clientWidth-(p+v)),A=Lf(i.clientHeight-(m+x)),N=Lf(p),C={rootMargin:-E+"px "+-w+"px "+-A+"px "+-N+"px",threshold:Wn(0,Qo(1,h))||1};let S=!0;function O(D){const M=D[0].intersectionRatio;if(M!==h){if(!S)return a();M?a(!1,M):n=setTimeout(()=>{a(!1,1e-7)},1e3)}M===1&&!OA(d,t.getBoundingClientRect())&&a(),S=!1}try{r=new IntersectionObserver(O,{...C,root:i.ownerDocument})}catch{r=new IntersectionObserver(O,C)}r.observe(t)}return a(!0),s}function W5(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,d=Cy(t),p=i||s?[...d?yd(d):[],...yd(e)]:[];p.forEach(N=>{i&&N.addEventListener("scroll",r,{passive:!0}),s&&N.addEventListener("resize",r)});const m=d&&c?q5(d,r):null;let v=-1,x=null;a&&(x=new ResizeObserver(N=>{let[_]=N;_&&_.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),r()}),d&&!h&&x.observe(d),x.observe(e));let E,w=h?Za(t):null;h&&A();function A(){const N=Za(t);w&&!OA(w,N)&&r(),w=N,E=requestAnimationFrame(A)}return r(),()=>{var N;p.forEach(_=>{i&&_.removeEventListener("scroll",r),s&&_.removeEventListener("resize",r)}),m==null||m(),(N=x)==null||N.disconnect(),x=null,h&&cancelAnimationFrame(E)}}const G5=v5,Y5=y5,K5=p5,X5=w5,Q5=m5,Ub=h5,Z5=x5,J5=(t,e,r)=>{const n=new Map,i={platform:V5,...r},s={...i.platform,_c:n};return f5(t,e,{...i,platform:s})};var e6=typeof document<"u",t6=function(){},yh=e6?j.useLayoutEffect:t6;function t0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!t0(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!t0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function IA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function zb(t,e){const r=IA(t);return Math.round(e*r)/r}function Rm(t){const e=j.useRef(t);return yh(()=>{e.current=t}),e}function r6(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:h,open:d}=t,[p,m]=j.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[v,x]=j.useState(n);t0(v,n)||x(n);const[E,w]=j.useState(null),[A,N]=j.useState(null),_=j.useCallback(te=>{te!==D.current&&(D.current=te,w(te))},[]),C=j.useCallback(te=>{te!==M.current&&(M.current=te,N(te))},[]),S=s||E,O=a||A,D=j.useRef(null),M=j.useRef(null),R=j.useRef(p),k=h!=null,L=Rm(h),B=Rm(i),F=Rm(d),H=j.useCallback(()=>{if(!D.current||!M.current)return;const te={placement:e,strategy:r,middleware:v};B.current&&(te.platform=B.current),J5(D.current,M.current,te).then(Y=>{const K={...Y,isPositioned:F.current!==!1};z.current&&!t0(R.current,K)&&(R.current=K,sa.flushSync(()=>{m(K)}))})},[v,e,r,B,F]);yh(()=>{d===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,m(te=>({...te,isPositioned:!1})))},[d]);const z=j.useRef(!1);yh(()=>(z.current=!0,()=>{z.current=!1}),[]),yh(()=>{if(S&&(D.current=S),O&&(M.current=O),S&&O){if(L.current)return L.current(S,O,H);H()}},[S,O,H,L,k]);const $=j.useMemo(()=>({reference:D,floating:M,setReference:_,setFloating:C}),[_,C]),ee=j.useMemo(()=>({reference:S,floating:O}),[S,O]),J=j.useMemo(()=>{const te={position:r,left:0,top:0};if(!ee.floating)return te;const Y=zb(ee.floating,p.x),K=zb(ee.floating,p.y);return c?{...te,transform:"translate("+Y+"px, "+K+"px)",...IA(ee.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:K}},[r,c,ee.floating,p.x,p.y]);return j.useMemo(()=>({...p,update:H,refs:$,elements:ee,floatingStyles:J}),[p,H,$,ee,J])}const n6=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Ub({element:n.current,padding:i}).fn(r):{}:n?Ub({element:n,padding:i}).fn(r):{}}}},i6=(t,e)=>({...G5(t),options:[t,e]}),s6=(t,e)=>({...Y5(t),options:[t,e]}),o6=(t,e)=>({...Z5(t),options:[t,e]}),a6=(t,e)=>({...K5(t),options:[t,e]}),l6=(t,e)=>({...X5(t),options:[t,e]}),c6=(t,e)=>({...Q5(t),options:[t,e]}),u6=(t,e)=>({...n6(t),options:[t,e]});var d6="Arrow",RA=j.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return f.jsx(We.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});RA.displayName=d6;var f6=RA;function Ny(t){const[e,r]=j.useState(void 0);return _r(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,c;if("borderBoxSize"in s){const h=s.borderBoxSize,d=Array.isArray(h)?h[0]:h;a=d.inlineSize,c=d.blockSize}else a=t.offsetWidth,c=t.offsetHeight;r({width:a,height:c})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Ty="Popper",[kA,qc]=En(Ty),[h6,jA]=kA(Ty),MA=t=>{const{__scopePopper:e,children:r}=t,[n,i]=j.useState(null);return f.jsx(h6,{scope:e,anchor:n,onAnchorChange:i,children:r})};MA.displayName=Ty;var PA="PopperAnchor",DA=j.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=jA(PA,r),a=j.useRef(null),c=ot(e,a);return j.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:f.jsx(We.div,{...i,ref:c})});DA.displayName=PA;var Oy="PopperContent",[p6,m6]=kA(Oy),LA=j.forwardRef((t,e)=>{var ne,ue,fe,oe,ve,Se;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:x="optimized",onPlaced:E,...w}=t,A=jA(Oy,r),[N,_]=j.useState(null),C=ot(e,Ce=>_(Ce)),[S,O]=j.useState(null),D=Ny(S),M=(D==null?void 0:D.width)??0,R=(D==null?void 0:D.height)??0,k=n+(s!=="center"?"-"+s:""),L=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},B=Array.isArray(d)?d:[d],F=B.length>0,H={padding:L,boundary:B.filter(v6),altBoundary:F},{refs:z,floatingStyles:$,placement:ee,isPositioned:J,middlewareData:te}=r6({strategy:"fixed",placement:k,whileElementsMounted:(...Ce)=>W5(...Ce,{animationFrame:x==="always"}),elements:{reference:A.anchor},middleware:[i6({mainAxis:i+R,alignmentAxis:a}),h&&s6({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?o6():void 0,...H}),h&&a6({...H}),l6({...H,apply:({elements:Ce,rects:Fe,availableWidth:Ge,availableHeight:ht})=>{const{width:we,height:he}=Fe.reference,de=Ce.floating.style;de.setProperty("--radix-popper-available-width",`${Ge}px`),de.setProperty("--radix-popper-available-height",`${ht}px`),de.setProperty("--radix-popper-anchor-width",`${we}px`),de.setProperty("--radix-popper-anchor-height",`${he}px`)}}),S&&u6({element:S,padding:c}),y6({arrowWidth:M,arrowHeight:R}),v&&c6({strategy:"referenceHidden",...H})]}),[Y,K]=UA(ee),V=pr(E);_r(()=>{J&&(V==null||V())},[J,V]);const G=(ne=te.arrow)==null?void 0:ne.x,Z=(ue=te.arrow)==null?void 0:ue.y,se=((fe=te.arrow)==null?void 0:fe.centerOffset)!==0,[ae,X]=j.useState();return _r(()=>{N&&X(window.getComputedStyle(N).zIndex)},[N]),f.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:J?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(oe=te.transformOrigin)==null?void 0:oe.x,(ve=te.transformOrigin)==null?void 0:ve.y].join(" "),...((Se=te.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(p6,{scope:r,placedSide:Y,onArrowChange:O,arrowX:G,arrowY:Z,shouldHideArrow:se,children:f.jsx(We.div,{"data-side":Y,"data-align":K,...w,ref:C,style:{...w.style,animation:J?void 0:"none"}})})})});LA.displayName=Oy;var BA="PopperArrow",g6={top:"bottom",right:"left",bottom:"top",left:"right"},FA=j.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=m6(BA,n),a=g6[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(f6,{...i,ref:r,style:{...i.style,display:"block"}})})});FA.displayName=BA;function v6(t){return t!==null}var y6=t=>({name:"transformOrigin",options:t,fn(e){var A,N,_;const{placement:r,rects:n,middlewareData:i}=e,a=((A=i.arrow)==null?void 0:A.centerOffset)!==0,c=a?0:t.arrowWidth,h=a?0:t.arrowHeight,[d,p]=UA(r),m={start:"0%",center:"50%",end:"100%"}[p],v=(((N=i.arrow)==null?void 0:N.x)??0)+c/2,x=(((_=i.arrow)==null?void 0:_.y)??0)+h/2;let E="",w="";return d==="bottom"?(E=a?m:`${v}px`,w=`${-h}px`):d==="top"?(E=a?m:`${v}px`,w=`${n.floating.height+h}px`):d==="right"?(E=`${-h}px`,w=a?m:`${x}px`):d==="left"&&(E=`${n.floating.width+h}px`,w=a?m:`${x}px`),{data:{x:E,y:w}}}});function UA(t){const[e,r="center"]=t.split("-");return[e,r]}var Iy=MA,Ry=DA,ky=LA,jy=FA,[rp,mQ]=En("Tooltip",[qc]),np=qc(),zA="TooltipProvider",x6=700,hg="tooltip.open",[w6,My]=rp(zA),$A=t=>{const{__scopeTooltip:e,delayDuration:r=x6,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=t,a=j.useRef(!0),c=j.useRef(!1),h=j.useRef(0);return j.useEffect(()=>{const d=h.current;return()=>window.clearTimeout(d)},[]),f.jsx(w6,{scope:e,isOpenDelayedRef:a,delayDuration:r,onOpen:j.useCallback(()=>{window.clearTimeout(h.current),a.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:j.useCallback(d=>{c.current=d},[]),disableHoverableContent:i,children:s})};$A.displayName=zA;var xd="Tooltip",[b6,ip]=rp(xd),HA=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:a,delayDuration:c}=t,h=My(xd,t.__scopeTooltip),d=np(e),[p,m]=j.useState(null),v=Xi(),x=j.useRef(0),E=a??h.disableHoverableContent,w=c??h.delayDuration,A=j.useRef(!1),[N,_]=Ss({prop:n,defaultProp:i??!1,onChange:M=>{M?(h.onOpen(),document.dispatchEvent(new CustomEvent(hg))):h.onClose(),s==null||s(M)},caller:xd}),C=j.useMemo(()=>N?A.current?"delayed-open":"instant-open":"closed",[N]),S=j.useCallback(()=>{window.clearTimeout(x.current),x.current=0,A.current=!1,_(!0)},[_]),O=j.useCallback(()=>{window.clearTimeout(x.current),x.current=0,_(!1)},[_]),D=j.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{A.current=!0,_(!0),x.current=0},w)},[w,_]);return j.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),f.jsx(Iy,{...d,children:f.jsx(b6,{scope:e,contentId:v,open:N,stateAttribute:C,trigger:p,onTriggerChange:m,onTriggerEnter:j.useCallback(()=>{h.isOpenDelayedRef.current?D():S()},[h.isOpenDelayedRef,D,S]),onTriggerLeave:j.useCallback(()=>{E?O():(window.clearTimeout(x.current),x.current=0)},[O,E]),onOpen:S,onClose:O,disableHoverableContent:E,children:r})})};HA.displayName=xd;var pg="TooltipTrigger",VA=j.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=ip(pg,r),s=My(pg,r),a=np(r),c=j.useRef(null),h=ot(e,c,i.onTriggerChange),d=j.useRef(!1),p=j.useRef(!1),m=j.useCallback(()=>d.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),f.jsx(Ry,{asChild:!0,...a,children:f.jsx(We.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:h,onPointerMove:Pe(t.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),p.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{i.onTriggerLeave(),p.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Pe(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:Pe(t.onBlur,i.onClose),onClick:Pe(t.onClick,i.onClose)})})});VA.displayName=pg;var _6="TooltipPortal",[gQ,E6]=rp(_6,{forceMount:void 0}),Nc="TooltipContent",qA=j.forwardRef((t,e)=>{const r=E6(Nc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=t,a=ip(Nc,t.__scopeTooltip);return f.jsx(dn,{present:n||a.open,children:a.disableHoverableContent?f.jsx(WA,{side:i,...s,ref:e}):f.jsx(S6,{side:i,...s,ref:e})})}),S6=j.forwardRef((t,e)=>{const r=ip(Nc,t.__scopeTooltip),n=My(Nc,t.__scopeTooltip),i=j.useRef(null),s=ot(e,i),[a,c]=j.useState(null),{trigger:h,onClose:d}=r,p=i.current,{onPointerInTransitChange:m}=n,v=j.useCallback(()=>{c(null),m(!1)},[m]),x=j.useCallback((E,w)=>{const A=E.currentTarget,N={x:E.clientX,y:E.clientY},_=O6(N,A.getBoundingClientRect()),C=I6(N,_),S=R6(w.getBoundingClientRect()),O=j6([...C,...S]);c(O),m(!0)},[m]);return j.useEffect(()=>()=>v(),[v]),j.useEffect(()=>{if(h&&p){const E=A=>x(A,p),w=A=>x(A,h);return h.addEventListener("pointerleave",E),p.addEventListener("pointerleave",w),()=>{h.removeEventListener("pointerleave",E),p.removeEventListener("pointerleave",w)}}},[h,p,x,v]),j.useEffect(()=>{if(a){const E=w=>{const A=w.target,N={x:w.clientX,y:w.clientY},_=(h==null?void 0:h.contains(A))||(p==null?void 0:p.contains(A)),C=!k6(N,a);_?v():C&&(v(),d())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[h,p,a,d,v]),f.jsx(WA,{...t,ref:s})}),[C6,A6]=rp(xd,{isInside:!1}),N6=L8("TooltipContent"),WA=j.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...c}=t,h=ip(Nc,r),d=np(r),{onClose:p}=h;return j.useEffect(()=>(document.addEventListener(hg,p),()=>document.removeEventListener(hg,p)),[p]),j.useEffect(()=>{if(h.trigger){const m=v=>{const x=v.target;x!=null&&x.contains(h.trigger)&&p()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[h.trigger,p]),f.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:p,children:f.jsxs(ky,{"data-state":h.stateAttribute,...d,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(N6,{children:n}),f.jsx(C6,{scope:r,isInside:!0,children:f.jsx(sM,{id:h.contentId,role:"tooltip",children:i||n})})]})})});qA.displayName=Nc;var GA="TooltipArrow",T6=j.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=np(r);return A6(GA,r).isInside?null:f.jsx(jy,{...i,...n,ref:e})});T6.displayName=GA;function O6(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function I6(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function R6(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function k6(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const c=e[s],h=e[a],d=c.x,p=c.y,m=h.x,v=h.y;p>n!=v>n&&r<(m-d)*(n-p)/(v-p)+d&&(i=!i)}return i}function j6(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),M6(e)}function M6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var P6=$A,D6=HA,L6=VA,YA=qA;const B6=P6,km=D6,jm=L6,xh=j.forwardRef(({className:t,sideOffset:e=4,...r},n)=>f.jsx(YA,{ref:n,sideOffset:e,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));xh.displayName=YA.displayName;var sp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},op=typeof window>"u"||"Deno"in globalThis;function Fi(){}function F6(t,e){return typeof t=="function"?t(e):t}function U6(t){return typeof t=="number"&&t>=0&&t!==1/0}function z6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function mg(t,e){return typeof t=="function"?t(e):t}function $6(t,e){return typeof t=="function"?t(e):t}function $b(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:c}=t;if(a){if(n){if(e.queryHash!==Py(a,e.options))return!1}else if(!bd(e.queryKey,a))return!1}if(r!=="all"){const h=e.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||s&&!s(e))}function Hb(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(wd(e.options.mutationKey)!==wd(s))return!1}else if(!bd(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function Py(t,e){return((e==null?void 0:e.queryKeyHashFn)||wd)(t)}function wd(t){return JSON.stringify(t,(e,r)=>gg(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function bd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>bd(t[r],e[r])):!1}function KA(t,e){if(t===e)return t;const r=Vb(t)&&Vb(e);if(r||gg(t)&&gg(e)){const n=r?t:Object.keys(t),i=n.length,s=r?e:Object.keys(e),a=s.length,c=r?[]:{},h=new Set(n);let d=0;for(let p=0;p<a;p++){const m=r?p:s[p];(!r&&h.has(m)||r)&&t[m]===void 0&&e[m]===void 0?(c[m]=void 0,d++):(c[m]=KA(t[m],e[m]),c[m]===t[m]&&t[m]!==void 0&&d++)}return i===a&&d===i?t:c}return e}function Vb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gg(t){if(!qb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!qb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qb(t){return Object.prototype.toString.call(t)==="[object Object]"}function H6(t){return new Promise(e=>{setTimeout(e,t)})}function V6(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?KA(t,e):e}function q6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function W6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Dy=Symbol();function XA(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Dy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ja,Co,cc,eE,G6=(eE=class extends sp{constructor(){super();At(this,ja);At(this,Co);At(this,cc);nt(this,cc,e=>{if(!op&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){_e(this,Co)||this.setEventListener(_e(this,cc))}onUnsubscribe(){var e;this.hasListeners()||((e=_e(this,Co))==null||e.call(this),nt(this,Co,void 0))}setEventListener(e){var r;nt(this,cc,e),(r=_e(this,Co))==null||r.call(this),nt(this,Co,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){_e(this,ja)!==e&&(nt(this,ja,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof _e(this,ja)=="boolean"?_e(this,ja):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ja=new WeakMap,Co=new WeakMap,cc=new WeakMap,eE),QA=new G6,uc,Ao,dc,tE,Y6=(tE=class extends sp{constructor(){super();At(this,uc,!0);At(this,Ao);At(this,dc);nt(this,dc,e=>{if(!op&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){_e(this,Ao)||this.setEventListener(_e(this,dc))}onUnsubscribe(){var e;this.hasListeners()||((e=_e(this,Ao))==null||e.call(this),nt(this,Ao,void 0))}setEventListener(e){var r;nt(this,dc,e),(r=_e(this,Ao))==null||r.call(this),nt(this,Ao,e(this.setOnline.bind(this)))}setOnline(e){_e(this,uc)!==e&&(nt(this,uc,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return _e(this,uc)}},uc=new WeakMap,Ao=new WeakMap,dc=new WeakMap,tE),r0=new Y6;function K6(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function X6(t){return Math.min(1e3*2**t,3e4)}function ZA(t){return(t??"online")==="online"?r0.isOnline():!0}var JA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Mm(t){return t instanceof JA}function eN(t){let e=!1,r=0,n=!1,i;const s=K6(),a=w=>{var A;n||(v(new JA(w)),(A=t.abort)==null||A.call(t))},c=()=>{e=!0},h=()=>{e=!1},d=()=>QA.isFocused()&&(t.networkMode==="always"||r0.isOnline())&&t.canRun(),p=()=>ZA(t.networkMode)&&t.canRun(),m=w=>{var A;n||(n=!0,(A=t.onSuccess)==null||A.call(t,w),i==null||i(),s.resolve(w))},v=w=>{var A;n||(n=!0,(A=t.onError)==null||A.call(t,w),i==null||i(),s.reject(w))},x=()=>new Promise(w=>{var A;i=N=>{(n||d())&&w(N)},(A=t.onPause)==null||A.call(t)}).then(()=>{var w;i=void 0,n||(w=t.onContinue)==null||w.call(t)}),E=()=>{if(n)return;let w;const A=r===0?t.initialPromise:void 0;try{w=A??t.fn()}catch(N){w=Promise.reject(N)}Promise.resolve(w).then(m).catch(N=>{var D;if(n)return;const _=t.retry??(op?0:3),C=t.retryDelay??X6,S=typeof C=="function"?C(r,N):C,O=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,N);if(e||!O){v(N);return}r++,(D=t.onFail)==null||D.call(t,r,N),H6(S).then(()=>d()?void 0:x()).then(()=>{e?v(N):E()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:c,continueRetry:h,canStart:p,start:()=>(p()?E():x().then(E),s)}}var Q6=t=>setTimeout(t,0);function Z6(){let t=[],e=0,r=c=>{c()},n=c=>{c()},i=Q6;const s=c=>{e?t.push(c):i(()=>{r(c)})},a=()=>{const c=t;t=[],c.length&&i(()=>{n(()=>{c.forEach(h=>{r(h)})})})};return{batch:c=>{let h;e++;try{h=c()}finally{e--,e||a()}return h},batchCalls:c=>(...h)=>{s(()=>{c(...h)})},schedule:s,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{i=c}}}var vn=Z6(),Ma,rE,tN=(rE=class{constructor(){At(this,Ma)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),U6(this.gcTime)&&nt(this,Ma,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(op?1/0:5*60*1e3))}clearGcTimeout(){_e(this,Ma)&&(clearTimeout(_e(this,Ma)),nt(this,Ma,void 0))}},Ma=new WeakMap,rE),fc,Pa,mi,Da,on,Ld,La,zi,Ms,nE,J6=(nE=class extends tN{constructor(e){super();At(this,zi);At(this,fc);At(this,Pa);At(this,mi);At(this,Da);At(this,on);At(this,Ld);At(this,La);nt(this,La,!1),nt(this,Ld,e.defaultOptions),this.setOptions(e.options),this.observers=[],nt(this,Da,e.client),nt(this,mi,_e(this,Da).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,nt(this,fc,tD(this.options)),this.state=e.state??_e(this,fc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_e(this,on))==null?void 0:e.promise}setOptions(e){this.options={..._e(this,Ld),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_e(this,mi).remove(this)}setData(e,r){const n=V6(this.state.data,e,this.options);return rn(this,zi,Ms).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){rn(this,zi,Ms).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=_e(this,on))==null?void 0:n.promise;return(i=_e(this,on))==null||i.cancel(e),r?r.then(Fi).catch(Fi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_e(this,fc))}isActive(){return this.observers.some(e=>$6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>mg(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!z6(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=_e(this,on))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=_e(this,on))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_e(this,mi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(_e(this,on)&&(_e(this,La)?_e(this,on).cancel({revert:!0}):_e(this,on).cancelRetry()),this.scheduleGc()),_e(this,mi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||rn(this,zi,Ms).call(this,{type:"invalidate"})}fetch(e,r){var d,p,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(_e(this,on))return _e(this,on).continueRetry(),_e(this,on).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(x=>x.options.queryFn);v&&this.setOptions(v.options)}const n=new AbortController,i=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(nt(this,La,!0),n.signal)})},s=()=>{const v=XA(this.options,r),E=(()=>{const w={client:_e(this,Da),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return nt(this,La,!1),this.options.persister?this.options.persister(v,E,this):v(E)},c=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:_e(this,Da),state:this.state,fetchFn:s};return i(v),v})();(d=this.options.behavior)==null||d.onFetch(c,this),nt(this,Pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=c.fetchOptions)==null?void 0:p.meta))&&rn(this,zi,Ms).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta});const h=v=>{var x,E,w,A;Mm(v)&&v.silent||rn(this,zi,Ms).call(this,{type:"error",error:v}),Mm(v)||((E=(x=_e(this,mi).config).onError)==null||E.call(x,v,this),(A=(w=_e(this,mi).config).onSettled)==null||A.call(w,this.state.data,v,this)),this.scheduleGc()};return nt(this,on,eN({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:v=>{var x,E,w,A;if(v===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(N){h(N);return}(E=(x=_e(this,mi).config).onSuccess)==null||E.call(x,v,this),(A=(w=_e(this,mi).config).onSettled)==null||A.call(w,v,this.state.error,this),this.scheduleGc()},onError:h,onFail:(v,x)=>{rn(this,zi,Ms).call(this,{type:"failed",failureCount:v,error:x})},onPause:()=>{rn(this,zi,Ms).call(this,{type:"pause"})},onContinue:()=>{rn(this,zi,Ms).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),_e(this,on).start()}},fc=new WeakMap,Pa=new WeakMap,mi=new WeakMap,Da=new WeakMap,on=new WeakMap,Ld=new WeakMap,La=new WeakMap,zi=new WeakSet,Ms=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...eD(n.data,this.options),fetchMeta:e.meta??null};case"success":return nt(this,Pa,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Mm(i)&&i.revert&&_e(this,Pa)?{..._e(this,Pa),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),vn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),_e(this,mi).notify({query:this,type:"updated",action:e})})},nE);function eD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ZA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function tD(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var hs,iE,rD=(iE=class extends sp{constructor(e={}){super();At(this,hs);this.config=e,nt(this,hs,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??Py(i,r);let a=this.get(s);return a||(a=new J6({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){_e(this,hs).has(e.queryHash)||(_e(this,hs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=_e(this,hs).get(e.queryHash);r&&(e.destroy(),r===e&&_e(this,hs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _e(this,hs).get(e)}getAll(){return[..._e(this,hs).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>$b(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>$b(e,n)):r}notify(e){vn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hs=new WeakMap,iE),ps,mn,Ba,ms,yo,sE,nD=(sE=class extends tN{constructor(e){super();At(this,ms);At(this,ps);At(this,mn);At(this,Ba);this.mutationId=e.mutationId,nt(this,mn,e.mutationCache),nt(this,ps,[]),this.state=e.state||iD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_e(this,ps).includes(e)||(_e(this,ps).push(e),this.clearGcTimeout(),_e(this,mn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){nt(this,ps,_e(this,ps).filter(r=>r!==e)),this.scheduleGc(),_e(this,mn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_e(this,ps).length||(this.state.status==="pending"?this.scheduleGc():_e(this,mn).remove(this))}continue(){var e;return((e=_e(this,Ba))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,c,h,d,p,m,v,x,E,w,A,N,_,C,S,O,D,M,R;const r=()=>{rn(this,ms,yo).call(this,{type:"continue"})};nt(this,Ba,eN({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,L)=>{rn(this,ms,yo).call(this,{type:"failed",failureCount:k,error:L})},onPause:()=>{rn(this,ms,yo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_e(this,mn).canRun(this)}));const n=this.state.status==="pending",i=!_e(this,Ba).canStart();try{if(n)r();else{rn(this,ms,yo).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(s=_e(this,mn).config).onMutate)==null?void 0:a.call(s,e,this));const L=await((h=(c=this.options).onMutate)==null?void 0:h.call(c,e));L!==this.state.context&&rn(this,ms,yo).call(this,{type:"pending",context:L,variables:e,isPaused:i})}const k=await _e(this,Ba).start();return await((p=(d=_e(this,mn).config).onSuccess)==null?void 0:p.call(d,k,e,this.state.context,this)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,k,e,this.state.context)),await((E=(x=_e(this,mn).config).onSettled)==null?void 0:E.call(x,k,null,this.state.variables,this.state.context,this)),await((A=(w=this.options).onSettled)==null?void 0:A.call(w,k,null,e,this.state.context)),rn(this,ms,yo).call(this,{type:"success",data:k}),k}catch(k){try{throw await((_=(N=_e(this,mn).config).onError)==null?void 0:_.call(N,k,e,this.state.context,this)),await((S=(C=this.options).onError)==null?void 0:S.call(C,k,e,this.state.context)),await((D=(O=_e(this,mn).config).onSettled)==null?void 0:D.call(O,void 0,k,this.state.variables,this.state.context,this)),await((R=(M=this.options).onSettled)==null?void 0:R.call(M,void 0,k,e,this.state.context)),k}finally{rn(this,ms,yo).call(this,{type:"error",error:k})}}finally{_e(this,mn).runNext(this)}}},ps=new WeakMap,mn=new WeakMap,Ba=new WeakMap,ms=new WeakSet,yo=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),vn.batch(()=>{_e(this,ps).forEach(n=>{n.onMutationUpdate(e)}),_e(this,mn).notify({mutation:this,type:"updated",action:e})})},sE);function iD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zs,$i,Bd,oE,sD=(oE=class extends sp{constructor(e={}){super();At(this,zs);At(this,$i);At(this,Bd);this.config=e,nt(this,zs,new Set),nt(this,$i,new Map),nt(this,Bd,0)}build(e,r,n){const i=new nD({mutationCache:this,mutationId:++gf(this,Bd)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){_e(this,zs).add(e);const r=Bf(e);if(typeof r=="string"){const n=_e(this,$i).get(r);n?n.push(e):_e(this,$i).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_e(this,zs).delete(e)){const r=Bf(e);if(typeof r=="string"){const n=_e(this,$i).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&_e(this,$i).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Bf(e);if(typeof r=="string"){const n=_e(this,$i).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Bf(e);if(typeof r=="string"){const i=(n=_e(this,$i).get(r))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vn.batch(()=>{_e(this,zs).forEach(e=>{this.notify({type:"removed",mutation:e})}),_e(this,zs).clear(),_e(this,$i).clear()})}getAll(){return Array.from(_e(this,zs))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Hb(r,n))}findAll(e={}){return this.getAll().filter(r=>Hb(e,r))}notify(e){vn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return vn.batch(()=>Promise.all(e.map(r=>r.continue().catch(Fi))))}},zs=new WeakMap,$i=new WeakMap,Bd=new WeakMap,oE);function Bf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Wb(t){return{onFetch:(e,r)=>{var p,m,v,x,E;const n=e.options,i=(v=(m=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:v.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],a=((E=e.state.data)==null?void 0:E.pageParams)||[];let c={pages:[],pageParams:[]},h=0;const d=async()=>{let w=!1;const A=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},N=XA(e.options,e.fetchOptions),_=async(C,S,O)=>{if(w)return Promise.reject();if(S==null&&C.pages.length)return Promise.resolve(C);const M=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:S,direction:O?"backward":"forward",meta:e.options.meta};return A(B),B})(),R=await N(M),{maxPages:k}=e.options,L=O?W6:q6;return{pages:L(C.pages,R,k),pageParams:L(C.pageParams,S,k)}};if(i&&s.length){const C=i==="backward",S=C?oD:Gb,O={pages:s,pageParams:a},D=S(n,O);c=await _(O,D,C)}else{const C=t??s.length;do{const S=h===0?a[0]??n.initialPageParam:Gb(n,c);if(h>0&&S==null)break;c=await _(c,S),h++}while(h<C)}return c};e.options.persister?e.fetchFn=()=>{var w,A;return(A=(w=e.options).persister)==null?void 0:A.call(w,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=d}}}function Gb(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function oD(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var dr,No,To,hc,pc,Oo,mc,gc,aE,aD=(aE=class{constructor(t={}){At(this,dr);At(this,No);At(this,To);At(this,hc);At(this,pc);At(this,Oo);At(this,mc);At(this,gc);nt(this,dr,t.queryCache||new rD),nt(this,No,t.mutationCache||new sD),nt(this,To,t.defaultOptions||{}),nt(this,hc,new Map),nt(this,pc,new Map),nt(this,Oo,0)}mount(){gf(this,Oo)._++,_e(this,Oo)===1&&(nt(this,mc,QA.subscribe(async t=>{t&&(await this.resumePausedMutations(),_e(this,dr).onFocus())})),nt(this,gc,r0.subscribe(async t=>{t&&(await this.resumePausedMutations(),_e(this,dr).onOnline())})))}unmount(){var t,e;gf(this,Oo)._--,_e(this,Oo)===0&&((t=_e(this,mc))==null||t.call(this),nt(this,mc,void 0),(e=_e(this,gc))==null||e.call(this),nt(this,gc,void 0))}isFetching(t){return _e(this,dr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _e(this,No).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=_e(this,dr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=_e(this,dr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(mg(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return _e(this,dr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=_e(this,dr).get(n.queryHash),s=i==null?void 0:i.state.data,a=F6(e,s);if(a!==void 0)return _e(this,dr).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return vn.batch(()=>_e(this,dr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=_e(this,dr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=_e(this,dr);vn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=_e(this,dr);return vn.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=vn.batch(()=>_e(this,dr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Fi).catch(Fi)}invalidateQueries(t,e={}){return vn.batch(()=>(_e(this,dr).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=vn.batch(()=>_e(this,dr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Fi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Fi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=_e(this,dr).build(this,e);return r.isStaleByTime(mg(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Fi).catch(Fi)}fetchInfiniteQuery(t){return t.behavior=Wb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Fi).catch(Fi)}ensureInfiniteQueryData(t){return t.behavior=Wb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return r0.isOnline()?_e(this,No).resumePausedMutations():Promise.resolve()}getQueryCache(){return _e(this,dr)}getMutationCache(){return _e(this,No)}getDefaultOptions(){return _e(this,To)}setDefaultOptions(t){nt(this,To,t)}setQueryDefaults(t,e){_e(this,hc).set(wd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._e(this,hc).values()],r={};return e.forEach(n=>{bd(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){_e(this,pc).set(wd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._e(this,pc).values()],r={};return e.forEach(n=>{bd(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._e(this,To).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Py(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Dy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._e(this,To).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_e(this,dr).clear(),_e(this,No).clear()}},dr=new WeakMap,No=new WeakMap,To=new WeakMap,hc=new WeakMap,pc=new WeakMap,Oo=new WeakMap,mc=new WeakMap,gc=new WeakMap,aE),lD=j.createContext(void 0),cD=({client:t,children:e})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(lD.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(this,arguments)}var jo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jo||(jo={}));const Yb="popstate";function uD(t){t===void 0&&(t={});function e(i,s){let{pathname:a="/",search:c="",hash:h=""}=ol(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),vg("",{pathname:a,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){let a=i.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let h=i.location.href,d=h.indexOf("#");c=d===-1?h:h.slice(0,d)}return c+"#"+(typeof s=="string"?s:n0(s))}function n(i,s){Ly(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return fD(e,r,n,t)}function Nr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ly(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dD(){return Math.random().toString(36).substr(2,8)}function Kb(t,e){return{usr:t.state,key:t.key,idx:e}}function vg(t,e,r,n){return r===void 0&&(r=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ol(e):e,{state:r,key:e&&e.key||n||dD()})}function n0(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ol(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function fD(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,c=jo.Pop,h=null,d=p();d==null&&(d=0,a.replaceState(_d({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function m(){c=jo.Pop;let A=p(),N=A==null?null:A-d;d=A,h&&h({action:c,location:w.location,delta:N})}function v(A,N){c=jo.Push;let _=vg(w.location,A,N);r&&r(_,A),d=p()+1;let C=Kb(_,d),S=w.createHref(_);try{a.pushState(C,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(S)}s&&h&&h({action:c,location:w.location,delta:1})}function x(A,N){c=jo.Replace;let _=vg(w.location,A,N);r&&r(_,A),d=p();let C=Kb(_,d),S=w.createHref(_);a.replaceState(C,"",S),s&&h&&h({action:c,location:w.location,delta:0})}function E(A){let N=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof A=="string"?A:n0(A);return _=_.replace(/ $/,"%20"),Nr(N,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,N)}let w={get action(){return c},get location(){return t(i,a)},listen(A){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Yb,m),h=A,()=>{i.removeEventListener(Yb,m),h=null}},createHref(A){return e(i,A)},createURL:E,encodeLocation(A){let N=E(A);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:x,go(A){return a.go(A)}};return w}var Xb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xb||(Xb={}));function hD(t,e,r){return r===void 0&&(r="/"),pD(t,e,r,!1)}function pD(t,e,r,n){let i=typeof e=="string"?ol(e):e,s=By(i.pathname||"/",r);if(s==null)return null;let a=rN(t);mD(a);let c=null;for(let h=0;c==null&&h<a.length;++h){let d=AD(s);c=SD(a[h],d,n)}return c}function rN(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,c)=>{let h={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};h.relativePath.startsWith("/")&&(Nr(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let d=Wo([n,h.relativePath]),p=r.concat(h);s.children&&s.children.length>0&&(Nr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),rN(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:_D(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let h of nN(s.path))i(s,a,h)}),e}function nN(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=nN(n.join("/")),c=[];return c.push(...a.map(h=>h===""?s:[s,h].join("/"))),i&&c.push(...a),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function mD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:ED(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gD=/^:[\w-]+$/,vD=3,yD=2,xD=1,wD=10,bD=-2,Qb=t=>t==="*";function _D(t,e){let r=t.split("/"),n=r.length;return r.some(Qb)&&(n+=bD),e&&(n+=yD),r.filter(i=>!Qb(i)).reduce((i,s)=>i+(gD.test(s)?vD:s===""?xD:wD),n)}function ED(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function SD(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let c=0;c<n.length;++c){let h=n[c],d=c===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=Zb({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},p),v=h.route;if(!m&&d&&r&&!n[n.length-1].route.index&&(m=Zb({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Wo([s,m.pathname]),pathnameBase:ID(Wo([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Wo([s,m.pathnameBase]))}return a}function Zb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=CD(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,p,m)=>{let{paramName:v,isOptional:x}=p;if(v==="*"){let w=c[m]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const E=c[m];return x&&!E?d[v]=void 0:d[v]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:t}}function CD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ly(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,h)=>(n.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function AD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ly(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function By(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function ND(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?ol(t):t;return{pathname:r?r.startsWith("/")?r:TD(r,e):e,search:RD(n),hash:kD(i)}}function TD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Pm(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function iN(t,e){let r=OD(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sN(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=ol(t):(i=_d({},t),Nr(!i.pathname||!i.pathname.includes("?"),Pm("?","pathname","search",i)),Nr(!i.pathname||!i.pathname.includes("#"),Pm("#","pathname","hash",i)),Nr(!i.search||!i.search.includes("#"),Pm("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=r;else{let m=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}c=m>=0?e[m]:"/"}let h=ND(i,c),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(d||p)&&(h.pathname+="/"),h}const Wo=t=>t.join("/").replace(/\/\/+/g,"/"),ID=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oN=["post","put","patch","delete"];new Set(oN);const MD=["get",...oN];new Set(MD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ed.apply(this,arguments)}const Fy=j.createContext(null),PD=j.createContext(null),al=j.createContext(null),ap=j.createContext(null),oa=j.createContext({outlet:null,matches:[],isDataRoute:!1}),aN=j.createContext(null);function DD(t,e){let{relative:r}=e===void 0?{}:e;Kd()||Nr(!1);let{basename:n,navigator:i}=j.useContext(al),{hash:s,pathname:a,search:c}=uN(t,{relative:r}),h=a;return n!=="/"&&(h=a==="/"?n:Wo([n,a])),i.createHref({pathname:h,search:c,hash:s})}function Kd(){return j.useContext(ap)!=null}function Is(){return Kd()||Nr(!1),j.useContext(ap).location}function lN(t){j.useContext(al).static||j.useLayoutEffect(t)}function qr(){let{isDataRoute:t}=j.useContext(oa);return t?KD():LD()}function LD(){Kd()||Nr(!1);let t=j.useContext(Fy),{basename:e,future:r,navigator:n}=j.useContext(al),{matches:i}=j.useContext(oa),{pathname:s}=Is(),a=JSON.stringify(iN(i,r.v7_relativeSplatPath)),c=j.useRef(!1);return lN(()=>{c.current=!0}),j.useCallback(function(d,p){if(p===void 0&&(p={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let m=sN(d,JSON.parse(a),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Wo([e,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[e,n,a,s,t])}function cN(){let{matches:t}=j.useContext(oa),e=t[t.length-1];return e?e.params:{}}function uN(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=j.useContext(al),{matches:i}=j.useContext(oa),{pathname:s}=Is(),a=JSON.stringify(iN(i,n.v7_relativeSplatPath));return j.useMemo(()=>sN(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function BD(t,e){return FD(t,e)}function FD(t,e,r,n){Kd()||Nr(!1);let{navigator:i}=j.useContext(al),{matches:s}=j.useContext(oa),a=s[s.length-1],c=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let d=Is(),p;if(e){var m;let A=typeof e=="string"?ol(e):e;h==="/"||(m=A.pathname)!=null&&m.startsWith(h)||Nr(!1),p=A}else p=d;let v=p.pathname||"/",x=v;if(h!=="/"){let A=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=hD(t,{pathname:x}),w=VD(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:Wo([h,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Wo([h,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,r,n);return e&&w?j.createElement(ap.Provider,{value:{location:Ed({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:jo.Pop}},w):w}function UD(){let t=YD(),e=jD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),r?j.createElement("pre",{style:i},r):null,null)}const zD=j.createElement(UD,null);class $D extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?j.createElement(oa.Provider,{value:this.props.routeContext},j.createElement(aN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HD(t){let{routeContext:e,match:r,children:n}=t,i=j.useContext(Fy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(oa.Provider,{value:e},n)}function VD(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,c=(i=r)==null?void 0:i.errors;if(c!=null){let p=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);p>=0||Nr(!1),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:x}=r,E=m.route.loader&&v[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||E){h=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,m,v)=>{let x,E=!1,w=null,A=null;r&&(x=c&&m.route.id?c[m.route.id]:void 0,w=m.route.errorElement||zD,h&&(d<0&&v===0?(E=!0,A=null):d===v&&(E=!0,A=m.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,v+1)),_=()=>{let C;return x?C=w:E?C=A:m.route.Component?C=j.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=p,j.createElement(HD,{match:m,routeContext:{outlet:p,matches:N,isDataRoute:r!=null},children:C})};return r&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?j.createElement($D,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):_()},null)}var dN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dN||{}),i0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(i0||{});function qD(t){let e=j.useContext(Fy);return e||Nr(!1),e}function WD(t){let e=j.useContext(PD);return e||Nr(!1),e}function GD(t){let e=j.useContext(oa);return e||Nr(!1),e}function fN(t){let e=GD(),r=e.matches[e.matches.length-1];return r.route.id||Nr(!1),r.route.id}function YD(){var t;let e=j.useContext(aN),r=WD(i0.UseRouteError),n=fN(i0.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function KD(){let{router:t}=qD(dN.UseNavigateStable),e=fN(i0.UseNavigateStable),r=j.useRef(!1);return lN(()=>{r.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ed({fromRouteId:e},s)))},[t,e])}function XD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mr(t){Nr(!1)}function QD(t){let{basename:e="/",children:r=null,location:n,navigationType:i=jo.Pop,navigator:s,static:a=!1,future:c}=t;Kd()&&Nr(!1);let h=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:h,navigator:s,static:a,future:Ed({v7_relativeSplatPath:!1},c)}),[h,c,s,a]);typeof n=="string"&&(n=ol(n));let{pathname:p="/",search:m="",hash:v="",state:x=null,key:E="default"}=n,w=j.useMemo(()=>{let A=By(p,h);return A==null?null:{location:{pathname:A,search:m,hash:v,state:x,key:E},navigationType:i}},[h,p,m,v,x,E,i]);return w==null?null:j.createElement(al.Provider,{value:d},j.createElement(ap.Provider,{children:r,value:w}))}function ZD(t){let{children:e,location:r}=t;return BD(yg(e),r)}new Promise(()=>{});function yg(t,e){e===void 0&&(e=[]);let r=[];return j.Children.forEach(t,(n,i)=>{if(!j.isValidElement(n))return;let s=[...e,i];if(n.type===j.Fragment){r.push.apply(r,yg(n.props.children,s));return}n.type!==Mr&&Nr(!1),!n.props.index||!n.props.children||Nr(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=yg(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(this,arguments)}function JD(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function eL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tL(t,e){return t.button===0&&(!e||e==="_self")&&!eL(t)}const rL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nL="6";try{window.__reactRouterVersion=nL}catch{}const iL="startTransition",Jb=wv[iL];function sL(t){let{basename:e,children:r,future:n,window:i}=t,s=j.useRef();s.current==null&&(s.current=uD({window:i,v5Compat:!0}));let a=s.current,[c,h]=j.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},p=j.useCallback(m=>{d&&Jb?Jb(()=>h(m)):h(m)},[h,d]);return j.useLayoutEffect(()=>a.listen(p),[a,p]),j.useEffect(()=>XD(n),[n]),j.createElement(QD,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:a,future:n})}const oL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ff=j.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:c,target:h,to:d,preventScrollReset:p,viewTransition:m}=e,v=JD(e,rL),{basename:x}=j.useContext(al),E,w=!1;if(typeof d=="string"&&aL.test(d)&&(E=d,oL))try{let C=new URL(window.location.href),S=d.startsWith("//")?new URL(C.protocol+d):new URL(d),O=By(S.pathname,x);S.origin===C.origin&&O!=null?d=O+S.search+S.hash:w=!0}catch{}let A=DD(d,{relative:i}),N=lL(d,{replace:a,state:c,target:h,preventScrollReset:p,relative:i,viewTransition:m});function _(C){n&&n(C),C.defaultPrevented||N(C)}return j.createElement("a",xg({},v,{href:E||A,onClick:w||s?n:_,ref:r,target:h}))});var e2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(e2||(e2={}));var t2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t2||(t2={}));function lL(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:c}=e===void 0?{}:e,h=qr(),d=Is(),p=uN(t,{relative:a});return j.useCallback(m=>{if(tL(m,r)){m.preventDefault();let v=n!==void 0?n:n0(d)===n0(p);h(t,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[d,h,p,n,i,r,t,s,a,c])}var wg=function(t,e){return wg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},wg(t,e)};function hN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");wg(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var yi=function(){return yi=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yi.apply(this,arguments)};function aa(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function pN(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function mN(t,e){return function(r,n){e(r,n,t)}}function gN(t,e,r,n,i,s){function a(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var c=n.kind,h=c==="getter"?"get":c==="setter"?"set":"value",d=!e&&t?n.static?t:t.prototype:null,p=e||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),m,v=!1,x=r.length-1;x>=0;x--){var E={};for(var w in n)E[w]=w==="access"?{}:n[w];for(var w in n.access)E.access[w]=n.access[w];E.addInitializer=function(N){if(v)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(N||null))};var A=(0,r[x])(c==="accessor"?{get:p.get,set:p.set}:p[h],E);if(c==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(m=a(A.get))&&(p.get=m),(m=a(A.set))&&(p.set=m),(m=a(A.init))&&i.unshift(m)}else(m=a(A))&&(c==="field"?i.unshift(m):p[h]=m)}d&&Object.defineProperty(d,n.name,p),v=!0}function vN(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function yN(t){return typeof t=="symbol"?t:"".concat(t)}function xN(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function wN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ve(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})}function bN(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var lp=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function _N(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lp(e,t,r)}function s0(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uy(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function EN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Uy(arguments[e]));return t}function SN(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function zy(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Tc(t){return this instanceof Tc?(this.v=t,this):new Tc(t)}function CN(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(x){return function(E){return Promise.resolve(E).then(x,m)}}function c(x,E){n[x]&&(i[x]=function(w){return new Promise(function(A,N){s.push([x,w,A,N])>1||h(x,w)})},E&&(i[x]=E(i[x])))}function h(x,E){try{d(n[x](E))}catch(w){v(s[0][3],w)}}function d(x){x.value instanceof Tc?Promise.resolve(x.value.v).then(p,m):v(s[0][2],x)}function p(x){h("next",x)}function m(x){h("throw",x)}function v(x,E){x(E),s.shift(),s.length&&h(s[0][0],s[0][1])}}function AN(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(a){return(r=!r)?{value:Tc(t[i](a)),done:!1}:s?s(a):a}:s}}function NN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof s0=="function"?s0(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),i(c,h,a.done,a.value)})}}function i(s,a,c,h){Promise.resolve(h).then(function(d){s({value:d,done:c})},a)}}function TN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var cL=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},bg=function(t){return bg=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},bg(t)};function ON(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=bg(t),n=0;n<r.length;n++)r[n]!=="default"&&lp(e,t,r[n]);return cL(e,t),e}function IN(t){return t&&t.__esModule?t:{default:t}}function RN(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function kN(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function jN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function MN(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var uL=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function PN(t){function e(s){t.error=t.hasError?new uL(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function DN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,a){return n?e?".jsx":".js":i&&(!s||!a)?r:i+s+"."+a.toLowerCase()+"js"}):t}const dL={__extends:hN,__assign:yi,__rest:aa,__decorate:pN,__param:mN,__esDecorate:gN,__runInitializers:vN,__propKey:yN,__setFunctionName:xN,__metadata:wN,__awaiter:Ve,__generator:bN,__createBinding:lp,__exportStar:_N,__values:s0,__read:Uy,__spread:EN,__spreadArrays:SN,__spreadArray:zy,__await:Tc,__asyncGenerator:CN,__asyncDelegator:AN,__asyncValues:NN,__makeTemplateObject:TN,__importStar:ON,__importDefault:IN,__classPrivateFieldGet:RN,__classPrivateFieldSet:kN,__classPrivateFieldIn:jN,__addDisposableResource:MN,__disposeResources:PN,__rewriteRelativeImportExtension:DN},fL=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:MN,get __assign(){return yi},__asyncDelegator:AN,__asyncGenerator:CN,__asyncValues:NN,__await:Tc,__awaiter:Ve,__classPrivateFieldGet:RN,__classPrivateFieldIn:jN,__classPrivateFieldSet:kN,__createBinding:lp,__decorate:pN,__disposeResources:PN,__esDecorate:gN,__exportStar:_N,__extends:hN,__generator:bN,__importDefault:IN,__importStar:ON,__makeTemplateObject:TN,__metadata:wN,__param:mN,__propKey:yN,__read:Uy,__rest:aa,__rewriteRelativeImportExtension:DN,__runInitializers:vN,__setFunctionName:xN,__spread:EN,__spreadArray:zy,__spreadArrays:SN,__values:s0,default:dL},Symbol.toStringTag,{value:"Module"})),hL="modulepreload",pL=function(t){return"/ALAN_NEW/"+t},r2={},Jo=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(r.map(h=>{if(h=pL(h),h in r2)return;r2[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":hL,d||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((v,x)=>{m.addEventListener("load",v),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},mL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Jo(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class $y extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class n2 extends $y{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i2 extends $y{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class s2 extends $y{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _g;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(_g||(_g={}));class gL{constructor(e,{headers:r={},customFetch:n,region:i=_g.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=mL(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ve(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:s,method:a,body:c,signal:h}=n;let d={},{region:p}=n;p||(p=this.region);const m=new URL(`${this.url}/${r}`);p&&p!=="any"&&(d["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(d["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(d["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;const x=yield this.fetch(m.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:v,signal:h}).catch(N=>{throw N.name==="AbortError"?N:new n2(N)}),E=x.headers.get("x-relay-error");if(E&&E==="true")throw new i2(x);if(!x.ok)throw new s2(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return w==="application/json"?A=yield x.json():w==="application/octet-stream"||w==="application/pdf"?A=yield x.blob():w==="text/event-stream"?A=x:w==="multipart/form-data"?A=yield x.formData():A=yield x.text(),{data:A,error:null,response:x}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new n2(s)}:{data:null,error:s,response:s instanceof s2||s instanceof i2?s.context:void 0}}})}}var yn={};const Wc=lE(fL);var Uf={},zf={},$f={},Hf={},Vf={},vL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oc=vL();const yL=Oc.fetch,LN=Oc.fetch.bind(Oc),BN=Oc.Headers,xL=Oc.Request,wL=Oc.Response,ll=Object.freeze(Object.defineProperty({__proto__:null,Headers:BN,Request:xL,Response:wL,default:LN,fetch:yL},Symbol.toStringTag,{value:"Module"})),bL=lE(ll);var qf={},o2;function FN(){if(o2)return qf;o2=1,Object.defineProperty(qf,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return qf.default=t,qf}var a2;function UN(){if(a2)return Vf;a2=1,Object.defineProperty(Vf,"__esModule",{value:!0});const t=Wc,e=t.__importDefault(bL),r=t.__importDefault(FN());class n{constructor(s){var a,c;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(c=s.isMaybeSingle)!==null&&c!==void 0?c:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,m,v,x;let E=null,w=null,A=null,N=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const D=await d.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?w=D:w=JSON.parse(D))}const S=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),O=(v=d.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");S&&O&&O.length>1&&(A=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(E={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,A=null,N=406,_="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const S=await d.text();try{E=JSON.parse(S),Array.isArray(E)&&d.status===404&&(w=[],E=null,N=200,_="OK")}catch{d.status===404&&S===""?(N=204,_="No Content"):E={message:S}}if(E&&this.isMaybeSingle&&(!((x=E==null?void 0:E.details)===null||x===void 0)&&x.includes("0 rows"))&&(E=null,N=200,_="OK"),E&&this.shouldThrowOnError)throw new r.default(E)}return{error:E,data:w,count:A,status:N,statusText:_}});return this.shouldThrowOnError||(h=h.catch(d=>{var p,m,v;return{error:{message:`${(p=d==null?void 0:d.name)!==null&&p!==void 0?p:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(m=d==null?void 0:d.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=d==null?void 0:d.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),h.then(s,a)}returns(){return this}overrideTypes(){return this}}return Vf.default=n,Vf}var l2;function zN(){if(l2)return Hf;l2=1,Object.defineProperty(Hf,"__esModule",{value:!0});const e=Wc.__importDefault(UN());class r extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:c,referencedTable:h=c}={}){const d=h?`${h}.order`:"order",p=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${p?`${p},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:c=a}={}){const h=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(d,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:c=!1,wal:h=!1,format:d="text"}={}){var p;const m=[i?"analyze":null,s?"verbose":null,a?"settings":null,c?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${v}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Hf.default=r,Hf}var c2;function Hy(){if(c2)return $f;c2=1,Object.defineProperty($f,"__esModule",{value:!0});const e=Wc.__importDefault(zN()),r=new RegExp("[,()]");class n extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const c=Array.from(new Set(a)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(s,`in.(${c})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:c,type:h}={}){let d="";h==="plain"?d="pl":h==="phrase"?d="ph":h==="websearch"&&(d="w");const p=c===void 0?"":`(${c})`;return this.url.searchParams.append(s,`${d}fts${p}.${a}`),this}match(s){return Object.entries(s).forEach(([a,c])=>{this.url.searchParams.append(a,`eq.${c}`)}),this}not(s,a,c){return this.url.searchParams.append(s,`not.${a}.${c}`),this}or(s,{foreignTable:a,referencedTable:c=a}={}){const h=c?`${c}.or`:"or";return this.url.searchParams.append(h,`(${s})`),this}filter(s,a,c){return this.url.searchParams.append(s,`${a}.${c}`),this}}return $f.default=n,$f}var u2;function $N(){if(u2)return zf;u2=1,Object.defineProperty(zf,"__esModule",{value:!0});const e=Wc.__importDefault(Hy());class r{constructor(i,{headers:s={},schema:a,fetch:c}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=c}select(i,s){const{head:a=!1,count:c}=s??{},h=a?"HEAD":"GET";let d=!1;const p=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",p),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var c;const h="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(d.length>0){const p=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:c,defaultToNull:h=!0}={}){var d;const p="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(m.length>0){const v=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:s}={}){var a;const c="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return zf.default=r,zf}var d2;function _L(){if(d2)return Uf;d2=1,Object.defineProperty(Uf,"__esModule",{value:!0});const t=Wc,e=t.__importDefault($N()),r=t.__importDefault(Hy());class n{constructor(s,{headers:a={},schema:c,fetch:h}={}){this.url=s,this.headers=new Headers(a),this.schemaName=c,this.fetch=h}from(s){const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:c=!1,get:h=!1,count:d}={}){var p;let m;const v=new URL(`${this.url}/rpc/${s}`);let x;c||h?(m=c?"HEAD":"GET",Object.entries(a).filter(([w,A])=>A!==void 0).map(([w,A])=>[w,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([w,A])=>{v.searchParams.append(w,A)})):(m="POST",x=a);const E=new Headers(this.headers);return d&&E.set("Prefer",`count=${d}`),new r.default({method:m,url:v,headers:E,schema:this.schemaName,body:x,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Uf.default=n,Uf}Object.defineProperty(yn,"__esModule",{value:!0});var HN=yn.PostgrestError=JN=yn.PostgrestBuilder=QN=yn.PostgrestTransformBuilder=KN=yn.PostgrestFilterBuilder=GN=yn.PostgrestQueryBuilder=qN=yn.PostgrestClient=void 0;const Gc=Wc,VN=Gc.__importDefault(_L());var qN=yn.PostgrestClient=VN.default;const WN=Gc.__importDefault($N());var GN=yn.PostgrestQueryBuilder=WN.default;const YN=Gc.__importDefault(Hy());var KN=yn.PostgrestFilterBuilder=YN.default;const XN=Gc.__importDefault(zN());var QN=yn.PostgrestTransformBuilder=XN.default;const ZN=Gc.__importDefault(UN());var JN=yn.PostgrestBuilder=ZN.default;const eT=Gc.__importDefault(FN());HN=yn.PostgrestError=eT.default;var tT=yn.default={PostgrestClient:VN.default,PostgrestQueryBuilder:WN.default,PostgrestFilterBuilder:YN.default,PostgrestTransformBuilder:XN.default,PostgrestBuilder:ZN.default,PostgrestError:eT.default};const EL=mv({__proto__:null,get PostgrestBuilder(){return JN},get PostgrestClient(){return qN},get PostgrestError(){return HN},get PostgrestFilterBuilder(){return KN},get PostgrestQueryBuilder(){return GN},get PostgrestTransformBuilder(){return QN},default:tT},[yn]),{PostgrestClient:SL,PostgrestQueryBuilder:vQ,PostgrestFilterBuilder:yQ,PostgrestTransformBuilder:xQ,PostgrestBuilder:wQ,PostgrestError:bQ}=tT||EL;class CL{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const AL="2.78.0",NL=`realtime-js/${AL}`,TL="1.0.0",Eg=1e4,OL=1e3,IL=100;var Wu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wu||(Wu={}));var Pr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pr||(Pr={}));var Vi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vi||(Vi={}));var Sg;(function(t){t.websocket="websocket"})(Sg||(Sg={}));var Aa;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Aa||(Aa={}));class RL{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let a=this.HEADER_LENGTH+2;const c=n.decode(e.slice(a,a+i));a=a+i;const h=n.decode(e.slice(a,a+s));a=a+s;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:h,payload:d}}}class rT{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ft;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ft||(Ft={}));const f2=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=kL(a,t,e,i),s),{}):{}},kL=(t,e,r,n)=>{const i=e.find(c=>c.name===t),s=i==null?void 0:i.type,a=r[t];return s&&!n.includes(s)?nT(s,a):Cg(a)},nT=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return DL(e,r)}switch(t){case Ft.bool:return jL(e);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return ML(e);case Ft.json:case Ft.jsonb:return PL(e);case Ft.timestamp:return LL(e);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return Cg(e);default:return Cg(e)}},Cg=t=>t,jL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ML=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},PL=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},DL=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const a=t.slice(1,r);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(c=>nT(e,c))}return t},LL=t=>typeof t=="string"?t.replace(" ","T"):t,iT=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dm{constructor(e,r,n={},i=Eg){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var h2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(h2||(h2={}));class Gu{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gu.syncState(this.state,i,s,a),this.pendingDiffs.forEach(h=>{this.state=Gu.syncDiff(this.state,h,s,a)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gu.syncDiff(this.state,i,s,a),c())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),a=this.transformState(r),c={},h={};return this.map(s,(d,p)=>{a[d]||(h[d]=p)}),this.map(a,(d,p)=>{const m=s[d];if(m){const v=p.map(A=>A.presence_ref),x=m.map(A=>A.presence_ref),E=p.filter(A=>x.indexOf(A.presence_ref)<0),w=m.filter(A=>v.indexOf(A.presence_ref)<0);E.length>0&&(c[d]=E),w.length>0&&(h[d]=w)}else c[d]=p}),this.syncDiff(s,{joins:c,leaves:h},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(c,h)=>{var d;const p=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(h),p.length>0){const m=e[c].map(x=>x.presence_ref),v=p.filter(x=>m.indexOf(x.presence_ref)<0);e[c].unshift(...v)}n(c,p,h)}),this.map(a,(c,h)=>{let d=e[c];if(!d)return;const p=h.map(m=>m.presence_ref);d=d.filter(m=>p.indexOf(m.presence_ref)<0),e[c]=d,i(c,d,h),d.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var p2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(p2||(p2={}));var Yu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Yu||(Yu={}));var Ds;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ds||(Ds={}));class Vy{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Pr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Dm(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new rT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new Gu(this),this.broadcastEndpointURL=iT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Pr.closed){const{config:{broadcast:a,presence:c,private:h}}=this.params,d=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[Yu.PRESENCE]&&this.bindings[Yu.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},v={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:d,private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(Ds.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(Ds.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var E;if(this.socket.setAuth(),x===void 0){e==null||e(Ds.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,A=(E=w==null?void 0:w.length)!==null&&E!==void 0?E:0,N=[];for(let _=0;_<A;_++){const C=w[_],{filter:{event:S,schema:O,table:D,filter:M}}=C,R=x&&x[_];if(R&&R.event===S&&R.schema===O&&R.table===D&&R.filter===M)N.push(Object.assign(Object.assign({},C),{id:R.id}));else{this.unsubscribe(),this.state=Pr.errored,e==null||e(Ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Ds.SUBSCRIBED);return}}).receive("error",x=>{this.state=Pr.errored,e==null||e(Ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Pr.joined&&e===Yu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const d=await c.json();h=d.error||d.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,h;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Dm(this,Vi.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pr.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Dm(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>IL){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const a=e.toLocaleLowerCase(),{close:c,error:h,leave:d,join:p}=Vi;if(n&&[c,h,d,p].indexOf(a)>=0&&n!==this._joinRef())return;let v=this._onMessage(a,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var E,w,A;return((E=x.filter)===null||E===void 0?void 0:E.event)==="*"||((A=(w=x.filter)===null||w===void 0?void 0:w.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===a}).map(x=>x.callback(v,n)):(s=this.bindings[a])===null||s===void 0||s.filter(x=>{var E,w,A,N,_,C;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const S=x.id,O=(E=x.filter)===null||E===void 0?void 0:E.event;return S&&((w=r.ids)===null||w===void 0?void 0:w.includes(S))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const S=(_=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return S==="*"||S===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof v=="object"&&"ids"in v){const E=v.data,{schema:w,table:A,commit_timestamp:N,type:_,errors:C}=E;v=Object.assign(Object.assign({},{schema:w,table:A,commit_timestamp:N,eventType:_,new:{},old:{},errors:C}),this._getPayloadRecords(E))}x.callback(v,n)})}_isClosed(){return this.state===Pr.closed}_isJoined(){return this.state===Pr.joined}_isJoining(){return this.state===Pr.joining}_isLeaving(){return this.state===Pr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&Vy.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vi.close,{},e)}_onError(e){this._on(Vi.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=f2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=f2(e.columns,e.old_record)),r}}const Lm=()=>{},Wf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BL=[1e3,2e3,5e3,1e4],FL=1e4,UL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zL{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eg,this.transport=null,this.heartbeatIntervalMs=Wf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lm,this.ref=0,this.reconnectTimer=null,this.logger=Lm,this.conn=null,this.sendBuffer=[],this.serializer=new RL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Jo(async()=>{const{default:c}=await Promise.resolve().then(()=>ll);return{default:c}},void 0).then(({default:c})=>c(...a)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Sg.websocket}`,this.httpEndpoint=iT(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CL.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:TL}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wu.connecting:return Aa.Connecting;case Wu.open:return Aa.Open;case Wu.closing:return Aa.Closing;default:return Aa.Closed}}isConnected(){return this.connectionState()===Aa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new Vy(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,a=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(OL,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Wf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:a}=r,c=a?`(${a})`:"",h=s.status||"";this.log("receive",`${h} ${n} ${i} ${c}`.trim(),s),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(i,s,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vi.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([UL],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:NL};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Vi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new rT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,a,c,h,d,p;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Eg,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Wf.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Lm,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:m=>BL[m-1]||FL,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,v)=>v(JSON.stringify(m)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class qy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function er(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class $L extends qy{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ag extends qy{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Wy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Jo(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},HL=()=>Ve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jo(()=>Promise.resolve().then(()=>ll),void 0)).Response:Response}),Ng=t=>{if(Array.isArray(t))return t.map(r=>Ng(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ng(n)}),e},VL=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},qL=(t,e,r)=>Ve(void 0,void 0,void 0,function*(){const n=yield HL();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new $L(Bm(i),s,a))}).catch(i=>{e(new Ag(Bm(i),i))}):e(new Ag(Bm(t),t))}),WL=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(VL(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function Xd(t,e,r,n,i,s){return Ve(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(r,WL(e,n,i,s)).then(h=>{if(!h.ok)throw h;return n!=null&&n.noResolveJson?h:h.json()}).then(h=>a(h)).catch(h=>qL(h,c,n))})})}function Sd(t,e,r,n){return Ve(this,void 0,void 0,function*(){return Xd(t,"GET",e,r,n)})}function Ui(t,e,r,n,i){return Ve(this,void 0,void 0,function*(){return Xd(t,"POST",e,n,i,r)})}function Tg(t,e,r,n,i){return Ve(this,void 0,void 0,function*(){return Xd(t,"PUT",e,n,i,r)})}function GL(t,e,r,n){return Ve(this,void 0,void 0,function*(){return Xd(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Gy(t,e,r,n,i){return Ve(this,void 0,void 0,function*(){return Xd(t,"DELETE",e,n,i,r)})}class YL{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Ve(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(er(e))return{data:null,error:e};throw e}})}}var sT;class KL{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[sT]="BlobDownloadBuilder",this.promise=null}asStream(){return new YL(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ve(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(er(e))return{data:null,error:e};throw e}})}}sT=Symbol.toStringTag;const XL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QL{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Wy(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return Ve(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},m2),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const h=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),h&&s.append("metadata",this.encodeMetadata(h)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),h&&s.append("metadata",this.encodeMetadata(h))):(s=n,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,h&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(r),p=this._getFinalPath(d),m=yield(e=="PUT"?Tg:Ui)(this.fetch,`${this.url}/object/${p}`,s,Object.assign({headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(er(s))return{data:null,error:s};throw s}})}upload(e,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Ve(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",r);try{let h;const d=Object.assign({upsert:m2.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",d.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",d.cacheControl)):(h=n,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType);const m=yield Tg(this.fetch,c.toString(),h,{headers:p});return{data:{path:s,fullPath:m.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(er(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return Ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Ui(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+s.url),c=a.searchParams.get("token");if(!c)throw new qy("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:{path:(yield Ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Ve(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ui(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Ve(this,void 0,void 0,function*(){try{const i=yield Ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=s?`?${s}`:"",c=this._getFinalPath(e),h=()=>Sd(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new KL(h,this.shouldThrowOnError)}info(e){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Sd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ng(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}exists(e){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield GL(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n)&&n instanceof Ag){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&i.push(h);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${d}`)}}}remove(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Gy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ve(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},XL),r),{prefix:e||""});return{data:yield Ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}listV2(e,r){return Ve(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ui(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const oT="2.78.0",aT={"X-Client-Info":`storage-js/${oT}`};class ZL{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aT),r),this.fetch=Wy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ve(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Sd(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}getBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}createBucket(e){return Ve(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return Ve(this,void 0,void 0,function*(){try{return{data:yield Tg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Gy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class JL{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aT),r),this.fetch=Wy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}listBuckets(e){return Ve(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Sd(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Gy(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(er(r))return{data:null,error:r};throw r}})}}const Yy={"X-Client-Info":`storage-js/${oT}`,"Content-Type":"application/json"};class lT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Fm extends lT{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e7 extends lT{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var g2;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(g2||(g2={}));const Ky=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Jo(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},t7=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},v2=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),r7=(t,e,r)=>Ve(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const c=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Fm(v2(a),i,c))}).catch(()=>{const a=i+"",c=s.statusText||`HTTP ${i} error`;e(new Fm(c,i,a))});else{const a=i+"",c=s.statusText||`HTTP ${i} error`;e(new Fm(c,i,a))}}else e(new e7(v2(t),t))}),n7=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(t7(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function i7(t,e,r,n,i,s){return Ve(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(r,n7(e,n,i,s)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;const d=h.headers.get("content-type");return!d||!d.includes("application/json")?{}:h.json()}).then(h=>a(h)).catch(h=>r7(h,c,n))})})}function Yn(t,e,r,n,i){return Ve(this,void 0,void 0,function*(){return i7(t,"POST",e,n,i,r)})}class s7{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Yn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Ve(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}listIndexes(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Yn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gn(n))return{data:null,error:n};throw n}})}}class o7{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ve(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Yn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getVectors(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listVectors(e){return Ve(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Yn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}queryVectors(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Ve(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Yn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class a7{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Yn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}getBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}listBuckets(){return Ve(this,arguments,void 0,function*(e={}){try{return{data:yield Yn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Yn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gn(r))return{data:null,error:r};throw r}})}}class l7 extends a7{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new c7(this.url,this.headers,e,this.fetch)}}class c7 extends s7{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ve(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ve(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ve(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ve(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new u7(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class u7 extends o7{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ve(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ve(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ve(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ve(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ve(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class d7 extends ZL{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new QL(this.url,this.headers,e,this.fetch)}get vectors(){return new l7(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new JL(this.url+"/iceberg",this.headers,this.fetch)}}const f7="2.78.0";let Iu="";typeof Deno<"u"?Iu="deno":typeof document<"u"?Iu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Iu="react-native":Iu="node";const h7={"X-Client-Info":`supabase-js-${Iu}/${f7}`},p7={headers:h7},m7={schema:"public"},g7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v7={},y7=t=>{let e;return t?e=t:typeof fetch>"u"?e=LN:e=fetch,(...r)=>e(...r)},x7=()=>typeof Headers>"u"?BN:Headers,w7=(t,e,r)=>{const n=y7(r),i=x7();return async(s,a)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:t;let d=new i(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${h}`),n(s,Object.assign(Object.assign({},a),{headers:d}))}};function b7(t){return t.endsWith("/")?t:t+"/"}function _7(t,e){var r,n;const{db:i,auth:s,realtime:a,global:c}=t,{db:h,auth:d,realtime:p,global:m}=e,v={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function E7(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b7(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cT="2.78.0",kl=30*1e3,Og=3,Um=Og*kl,S7="http://localhost:9999",C7="supabase.auth.token",A7={"X-Client-Info":`gotrue-js/${cT}`},Ig="X-Supabase-Api-Version",uT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},N7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,T7=10*60*1e3;class Cd extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class O7 extends Cd{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function I7(t){return Ke(t)&&t.name==="AuthApiError"}class Na extends Cd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class la extends Cd{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Pi extends la{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function R7(t){return Ke(t)&&t.name==="AuthSessionMissingError"}class _l extends la{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gf extends la{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yf extends la{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k7(t){return Ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class y2 extends la{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rg extends la{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function zm(t){return Ke(t)&&t.name==="AuthRetryableFetchError"}class x2 extends la{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class kg extends la{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const o0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),w2=` 	
\r=`.split(""),j7=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<w2.length;e+=1)t[w2[e].charCodeAt(0)]=-2;for(let e=0;e<o0.length;e+=1)t[o0[e].charCodeAt(0)]=e;return t})();function b2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(o0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(o0[n]),e.queuedBits-=6}}function dT(t,e,r){const n=j7[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _2(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{D7(a,n,r)};for(let a=0;a<t.length;a+=1)dT(t.charCodeAt(a),i,s);return e.join("")}function M7(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function P7(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}M7(n,e)}}function D7(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ic(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)dT(t.charCodeAt(i),r,n);return new Uint8Array(e)}function L7(t){const e=[];return P7(t,r=>e.push(r)),new Uint8Array(e)}function Ra(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>b2(i,r,n)),b2(null,r,n),e.join("")}function B7(t){return Math.round(Date.now()/1e3)+t}function F7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const pn=()=>typeof window<"u"&&typeof document<"u",va={tested:!1,writable:!1},fT=()=>{if(!pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(va.tested)return va.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),va.tested=!0,va.writable=!0}catch{va.tested=!0,va.writable=!1}return va.writable};function U7(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const hT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Jo(async()=>{const{default:n}=await Promise.resolve().then(()=>ll);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},z7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ya=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},go=async(t,e)=>{await t.removeItem(e)};class cp{constructor(){this.promise=new cp.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}cp.promiseConstructor=Promise;function $m(t){const e=t.split(".");if(e.length!==3)throw new kg("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!N7.test(e[n]))throw new kg("JWT not in base64url format");return{header:JSON.parse(_2(e[0])),payload:JSON.parse(_2(e[1])),signature:ic(e[2]),raw:{header:e[0],payload:e[1]}}}async function $7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function H7(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){n(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function V7(t){return("0"+t.toString(16)).substr(-2)}function q7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,V7).join("")}async function W7(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function G7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await W7(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function El(t,e,r=!1){const n=q7();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await jl(t,`${e}-code-verifier`,i);const s=await G7(n);return[s,n===s?"plain":"s256"]}const Y7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K7(t){const e=t.headers.get(Ig);if(!e||!e.match(Y7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function X7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Q7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sl(t){if(!Z7.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J7(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function E2(t){return JSON.parse(JSON.stringify(t))}const Ea=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e9=[502,503,504];async function S2(t){var e;if(!z7(t))throw new Rg(Ea(t),0);if(e9.includes(t.status))throw new Rg(Ea(t),t.status);let r;try{r=await t.json()}catch(s){throw new Na(Ea(s),s)}let n;const i=K7(t);if(i&&i.getTime()>=uT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new x2(Ea(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new x2(Ea(r),t.status,r.weak_password.reasons);throw new O7(Ea(r),t.status||500,n)}const t9=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function tt(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[Ig]||(s[Ig]=uT["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",h=await r9(t,e,r+c,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function r9(t,e,r,n,i,s){const a=t9(e,n,i,s);let c;try{c=await t(r,Object.assign({},a))}catch(h){throw console.error(h),new Rg(Ea(h),0)}if(c.ok||await S2(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(h){await S2(h)}}function Di(t){var e;let r=null;s9(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=B7(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function C2(t){const e=Di(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function So(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function n9(t){return{data:t,error:null}}function i9(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,a=aa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},h=Object.assign({},a);return{data:{properties:c,user:h},error:null}}function A2(t){return t}function s9(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vm=["global","local","others"];class o9{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=hT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Vm[0]){if(Vm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vm.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:So})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=aa(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:i9,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:So})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,a,c,h;try{const d={nextPage:null,lastPage:0,total:0},p=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:A2});if(p.error)throw p.error;const m=await p.json(),v=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(h=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(E=>{const w=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(E.split(";")[1].split("=")[1]);d[`${A}Page`]=w}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Sl(e);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:So})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Sl(e);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:So})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Sl(e);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:So})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Sl(e.userId);try{const{data:r,error:n}=await tt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Sl(e.userId),Sl(e.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,a,c,h;try{const d={nextPage:null,lastPage:0,total:0},p=await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:A2});if(p.error)throw p.error;const m=await p.json(),v=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(h=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(E=>{const w=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(E.split(";")[1].split("=")[1]);d[`${A}Page`]=w}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Ke(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await tt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await tt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}function N2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Cl={debug:!!(globalThis&&fT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class a9 extends pT{}async function l9(t,e,r){Cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Cl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Cl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new a9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Cl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function c9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function u9(t){return parseInt(t,16)}function d9(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function f9(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:c,requestId:h,resources:d,scheme:p,uri:m,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=mT(t.address),E=p?`${p}://${n}`:n,w=t.statement?`${t.statement}
`:"",A=`${E} wants you to sign in with your Ethereum account:
${x}

${w}`;let N=`URI: ${m}
Version: ${v}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(N+=`
Expiration Time: ${i.toISOString()}`),c&&(N+=`
Not Before: ${c.toISOString()}`),h&&(N+=`
Request ID: ${h}`),d){let _=`
Resources:`;for(const C of d){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);_+=`
- ${C}`}N+=_}return`${A}
${N}`}class Er extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class a0 extends Er{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function h9({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Er({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Er({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Er({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Er({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Er({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Er({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Er({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Er({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(gT(a)){if(s.rp.id!==a)return new Er({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Er({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Er({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Er({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Er({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function p9({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Er({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Er({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(gT(n)){if(r.rpId!==n)return new Er({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Er({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Er({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Er({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class m9{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const g9=new m9;function v9(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=aa(t,["challenge","user","excludeCredentials"]),s=ic(e).buffer,a=Object.assign(Object.assign({},r),{id:ic(r.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:s,user:a});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const d=n[h];c.excludeCredentials[h]=Object.assign(Object.assign({},d),{id:ic(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function y9(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=aa(t,["challenge","allowCredentials"]),i=ic(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const c=r[a];s.allowCredentials[a]=Object.assign(Object.assign({},c),{id:ic(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function x9(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ra(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ra(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function w9(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ra(new Uint8Array(i.authenticatorData)),clientDataJSON:Ra(new Uint8Array(i.clientDataJSON)),signature:Ra(new Uint8Array(i.signature)),userHandle:i.userHandle?Ra(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function T2(){var t,e;return!!(pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function b9(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a0("Browser returned unexpected credential type",e)}:{data:null,error:new a0("Empty credential response",e)}}catch(e){return{data:null,error:h9({error:e,options:t})}}}async function _9(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a0("Browser returned unexpected credential type",e)}:{data:null,error:new a0("Empty credential response",e)}}catch(e){return{data:null,error:p9({error:e,options:t})}}}const E9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},S9={userVerification:"preferred",hints:["security-key"]};function l0(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))n[s]=a;else if(r(a))n[s]=a;else if(e(a)){const c=n[s];e(c)?n[s]=l0(c,a):n[s]=l0(a)}else n[s]=a}return n}function C9(t,e){return l0(E9,t,e||{})}function A9(t,e){return l0(S9,t,e||{})}class N9{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:c};const h=i??g9.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=C9(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:p,error:m}=await b9({publicKey:d,signal:h});return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const d=A9(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:p,error:m}=await _9(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:h}));return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(a){return Ke(a)?{data:null,error:a}:{data:null,error:new Na("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!r)return{data:null,error:new Cd("rpId is required for WebAuthn authentication")};try{if(!T2())return{data:null,error:new Na("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!a)return{data:null,error:c};const{webauthn:h}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(a){return Ke(a)?{data:null,error:a}:{data:null,error:new Na("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!r)return{data:null,error:new Cd("rpId is required for WebAuthn registration")};try{if(!T2())return{data:null,error:new Na("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:c};const{data:h,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return h?this._verify({factorId:a.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Ke(a)?{data:null,error:a}:{data:null,error:new Na("Unexpected error in register",a)}}}}c9();const T9={url:S7,storageKey:C7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function O2(t,e,r){return await r()}const Al={};class Ad{get jwks(){var e,r;return(r=(e=Al[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Al[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Al[this.storageKey]=Object.assign(Object.assign({},Al[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ad.nextInstanceID,Ad.nextInstanceID+=1,this.instanceID>0&&pn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},T9),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new o9({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=hT(i.fetch),this.lock=i.lock||O2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:pn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=l9:this.lock=O2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new N9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:fT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=N2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=N2(this.memoryStorage)),pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=U7(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),pn()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),k7(s)){const h=(e=s.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ke(r)?{error:r}:{error:new Na("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Di}),{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const h=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:d,session:h},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:p,password:m,options:v}=e;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await El(this.storage,this.storageKey)),s=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:E},xform:Di})}else if("phone"in e){const{phone:p,password:m,options:v}=e;s=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Di})}else throw new Gf("You must provide either an email or phone number and a password");const{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const h=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:d,session:h},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:a,options:c}=e;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:C2})}else if("phone"in e){const{phone:s,password:a,options:c}=e;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:C2})}else throw new Gf("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new _l}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,a,c,h,d,p,m,v;let x,E;if("message"in e)x=e.message,E=e.signature;else{const{chain:w,wallet:A,statement:N,options:_}=e;let C;if(pn())if(typeof A=="object")C=A;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")C=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const S=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),O=await C.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=mT(O[0]);let M=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const k=await C.request({method:"eth_chainId"});M=u9(k)}const R={domain:S.host,address:D,statement:N,uri:S.href,version:"1",chainId:M,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(p=_==null?void 0:_.signInWithEthereum)===null||p===void 0?void 0:p.resources};x=f9(R),E=await C.request({method:"personal_sign",params:[d9(x),D]})}try{const{data:w,error:A}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:E},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Di});if(A)throw A;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new _l}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:A})}catch(w){if(Ke(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(e){var r,n,i,s,a,c,h,d,p,m,v,x;let E,w;if("message"in e)E=e.message,w=e.signature;else{const{chain:A,wallet:N,statement:_,options:C}=e;let S;if(pn())if(typeof N=="object")S=N;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))S=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=N}const O=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const D=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),_?{statement:_}:null));let M;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")M=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)M=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)E=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),w=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${O.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=C==null?void 0:C.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(p=C==null?void 0:C.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const D=await S.signMessage(new TextEncoder().encode(E),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:A,error:N}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Ra(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Di});if(N)throw N;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new _l}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:N})}catch(A){if(Ke(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(e){const r=await ya(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:a}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Di});if(await go(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new _l}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(Ke(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:a}=e,c=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Di}),{data:h,error:d}=c;return d?{data:{user:null,session:null},error:d}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new _l}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:d})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,s,a;try{if("email"in e){const{email:c,options:h}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await El(this.storage,this.storageKey));const{error:m}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:h}=e,{data:d,error:p}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p}}throw new Gf("You must provide either an email or phone number.")}catch(c){if(Ke(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:c}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Di});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const h=a.session,d=a.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:d,session:h},error:null}}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await El(this.storage,this.storageKey)),await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:n9})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pi;const{error:i}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:a}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:a,error:c}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new Gf("You must provide either an email or phone number and a type")}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ya(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Um:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await ya(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Hm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=J7(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:So}):await this._useSession(async r=>{var n,i,s;const{data:a,error:c}=r;if(c)throw c;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pi}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:So})})}catch(r){if(Ke(r))return R7(r)&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new Pi;const a=i.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await El(this.storage,this.storageKey));const{data:d,error:p}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:a.access_token,xform:So});if(p)throw p;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pi;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:a}=$m(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)throw h;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(Ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:c}=r;if(c)throw c;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pi;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!pn())throw new Yf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new y2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new y2("No code detected.");const{data:_,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:h,token_type:d}=e;if(!s||!c||!a||!d)throw new Yf("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let v=p+m;h&&(v=parseInt(h));const x=v-p;x*1e3<=kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const E=v-m;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,v,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,v,p);const{data:w,error:A}=await this._getUser(s);if(A)throw A;const N={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:v,refresh_token:a,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(n){if(Ke(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ya(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(I7(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=F7(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await El(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var a,c,h,d,p;const{data:m,error:v}=s;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return pn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ke(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:a,provider:c,token:h,access_token:d,nonce:p}=e,m=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:h,access_token:d,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Di}),{data:v,error:x}=m;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new _l}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(i){if(Ke(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)throw a;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await H7(async i=>(i>0&&await $7(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Di})),(i,s)=>{const a=200*Math.pow(2,i);return s&&zm(s)&&Date.now()+a-n<kl})}catch(n){if(this._debug(r,"error",n),Ke(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),pn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await ya(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ya(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await jl(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Hm()}else if(i&&!i.user&&!i.user){const a=await ya(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await go(this.storage,this.storageKey+"-user"),await jl(this.storage,this.storageKey,i)):i.user=Hm()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Um;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Um}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),zm(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new cp;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Pi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),Ke(s)){const a={data:null,error:s};return zm(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(h){s.push(h)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await jl(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=E2(i);await jl(this.storage,this.storageKey,s)}else{const i=E2(r);await jl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await go(this.storage,this.storageKey),await go(this.storage,this.storageKey+"-code-verifier"),await go(this.storage,this.storageKey+"-user"),this.userStorage&&await go(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kl}ms, refresh threshold is ${Og} ticks`),i<=Og&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,a]=await El(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await tt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:a}=r;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:d}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&h.type==="totp"&&(!((i=h==null?void 0:h.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?x9(e.webauthn.credential_response):w9(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const a=await tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:v9(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:y9(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=$m(n.access_token);let a=null;s.aal&&(a=s.aal);let c=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?{data:null,error:i}:n?await tt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new Pi}})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Pi};const a=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Pi};const a=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+T7>i)return n;const{data:s,error:a}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:x,error:E}=await this.getSession();if(E||!x.session)return{data:null,error:E};n=x.session.access_token}const{header:i,payload:s,signature:a,raw:{header:c,payload:h}}=$m(n);r!=null&&r.allowExpired||X7(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:s,header:i,signature:a},error:null}}const p=Q7(i.alg),m=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,a,L7(`${c}.${h}`)))throw new kg("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}Ad.nextInstanceID=0;const O9=Ad;class I9 extends O9{constructor(e){super(e)}}class R9{constructor(e,r,n){var i,s,a;this.supabaseUrl=e,this.supabaseKey=r;const c=E7(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:m7,realtime:v7,auth:Object.assign(Object.assign({},g7),{storageKey:h}),global:p7},p=_7(n??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=w7(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new SL(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new d7(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new gL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:a,flowType:c,lock:h,debug:d},p,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I9({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:c,lock:h,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new zL(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const k9=(t,e,r)=>new R9(t,e,r);function j9(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}j9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const M9="https://mtwburwdescvdngmzcmu.supabase.co",P9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10d2J1cndkZXNjdmRuZ216Y211Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM2MzMsImV4cCI6MjA3NzY4OTYzM30.9Ez2Dg9DdMaqNJy960B5V4U8H8uvz5RS5KyVsSHIZ2c",be=k9(M9,P9,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),I2=Object.freeze(Object.defineProperty({__proto__:null,supabase:be},Symbol.toStringTag,{value:"Module"})),vT=j.createContext(void 0),D9=({children:t})=>{const[e,r]=j.useState(null),[n,i]=j.useState(null),[s,a]=j.useState(null),[c,h]=j.useState(!0);j.useEffect(()=>{const{data:{subscription:x}}=be.auth.onAuthStateChange((E,w)=>{i(w),r((w==null?void 0:w.user)??null),w!=null&&w.user?setTimeout(()=>{d(w.user.id)},0):a(null)});return be.auth.getSession().then(({data:{session:E}})=>{i(E),r((E==null?void 0:E.user)??null),E!=null&&E.user?d(E.user.id).then(()=>h(!1)):h(!1)}),()=>x.unsubscribe()},[]);const d=async x=>{const{data:E,error:w}=await be.from("user_roles").select("role").eq("user_id",x).single();a(!w&&E?E.role:"customer")},p=async(x,E,w,A)=>{const N=`${window.location.origin}/home`,{error:_}=await be.auth.signUp({email:x,password:E,options:{emailRedirectTo:N,data:{full_name:w,phone:A}}});return{error:_}},m=async(x,E)=>{const{error:w}=await be.auth.signInWithPassword({email:x,password:E});return{error:w}},v=async()=>{await be.auth.signOut()};return f.jsx(vT.Provider,{value:{user:e,session:n,userRole:s,signUp:p,signIn:m,signOut:v,loading:c},children:t})},Wr=()=>{const t=j.useContext(vT);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},L9=Q0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),De=j.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},s)=>{const a=n?P8:"button";return f.jsx(a,{className:Be(L9({variant:e,size:r,className:t})),ref:s,...i})});De.displayName="Button";function Ls(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yT(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ni={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ic={duration:.5,overwrite:!1,delay:0},Xy,Zr,Zt,wi=1e8,Lt=1/wi,jg=Math.PI*2,B9=jg/4,F9=0,xT=Math.sqrt,U9=Math.cos,z9=Math.sin,Vr=function(e){return typeof e=="string"},gr=function(e){return typeof e=="function"},eo=function(e){return typeof e=="number"},Qy=function(e){return typeof e>"u"},Ns=function(e){return typeof e=="object"},Dn=function(e){return e!==!1},Zy=function(){return typeof window<"u"},Kf=function(e){return gr(e)||Vr(e)},wT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},cn=Array.isArray,Mg=/(?:-?\.?\d|\.)+/gi,bT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,qm=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_T=/[+-]=-?[.\d]+/,ET=/[^,'"\[\]\s]+/gi,$9=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rr,fs,Pg,Jy,si={},c0={},ST,CT=function(e){return(c0=Rc(e,si))&&Un},ex=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},Nd=function(e,r){return!r&&console.warn(e)},AT=function(e,r){return e&&(si[e]=r)&&c0&&(c0[e]=r)||si},Td=function(){return 0},H9={suppressEvents:!0,isStart:!0,kill:!1},wh={suppressEvents:!0,kill:!1},V9={suppressEvents:!0},tx={},Go=[],Dg={},NT,qn={},Wm={},R2=30,bh=[],rx="",nx=function(e){var r=e[0],n,i;if(Ns(r)||gr(r)||(e=[e]),!(n=(r._gsap||{}).harness)){for(i=bh.length;i--&&!bh[i].targetTest(r););n=bh[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new QT(e[i],n)))||e.splice(i,1);return e},$a=function(e){return e._gsap||nx(bi(e))[0]._gsap},TT=function(e,r,n){return(n=e[r])&&gr(n)?e[r]():Qy(n)&&e.getAttribute&&e.getAttribute(r)||n},Ln=function(e,r){return(e=e.split(",")).forEach(r)||e},yr=function(e){return Math.round(e*1e5)/1e5||0},Cr=function(e){return Math.round(e*1e7)/1e7||0},sc=function(e,r){var n=r.charAt(0),i=parseFloat(r.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},q9=function(e,r){for(var n=r.length,i=0;e.indexOf(r[i])<0&&++i<n;);return i<n},u0=function(){var e=Go.length,r=Go.slice(0),n,i;for(Dg={},Go.length=0,n=0;n<e;n++)i=r[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},ix=function(e){return!!(e._initted||e._startAt||e.add)},OT=function(e,r,n,i){Go.length&&!Zr&&u0(),e.render(r,n,!!(Zr&&r<0&&ix(e))),Go.length&&!Zr&&u0()},IT=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(ET).length<2?r:Vr(e)?e.trim():e},RT=function(e){return e},oi=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e},W9=function(e){return function(r,n){for(var i in n)i in r||i==="duration"&&e||i==="ease"||(r[i]=n[i])}},Rc=function(e,r){for(var n in r)e[n]=r[n];return e},k2=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Ns(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},d0=function(e,r){var n={},i;for(i in e)i in r||(n[i]=e[i]);return n},Ku=function(e){var r=e.parent||rr,n=e.keyframes?W9(cn(e.keyframes)):oi;if(Dn(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},G9=function(e,r){for(var n=e.length,i=n===r.length;i&&n--&&e[n]===r[n];);return n<0},kT=function(e,r,n,i,s){var a=e[i],c;if(s)for(c=r[s];a&&a[s]>c;)a=a._prev;return a?(r._next=a._next,a._next=r):(r._next=e[n],e[n]=r),r._next?r._next._prev=r:e[i]=r,r._prev=a,r.parent=r._dp=e,r},up=function(e,r,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=r._prev,a=r._next;s?s._next=a:e[n]===r&&(e[n]=a),a?a._prev=s:e[i]===r&&(e[i]=s),r._next=r._prev=r.parent=null},ea=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ha=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Y9=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},Lg=function(e,r,n,i){return e._startAt&&(Zr?e._startAt.revert(wh):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(r,!0,i))},K9=function t(e){return!e||e._ts&&t(e.parent)},j2=function(e){return e._repeat?kc(e._tTime,e=e.duration()+e._rDelay)*e:0},kc=function(e,r){var n=Math.floor(e=Cr(e/r));return e&&n===e?n-1:n},f0=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},dp=function(e){return e._end=Cr(e._start+(e._tDur/Math.abs(e._ts||e._rts||Lt)||0))},fp=function(e,r){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Cr(n._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),dp(e),n._dirty||Ha(n,e)),e},jT=function(e,r){var n;if((r._time||!r._dur&&r._initted||r._start<e._time&&(r._dur||!r.add))&&(n=f0(e.rawTime(),r),(!r._dur||Qd(0,r.totalDuration(),n)-r._tTime>Lt)&&r.render(n,!0)),Ha(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Lt}},vs=function(e,r,n,i){return r.parent&&ea(r),r._start=Cr((eo(n)?n:n||e!==rr?pi(e,n,r):e._time)+r._delay),r._end=Cr(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),kT(e,r,"_first","_last",e._sort?"_start":0),Bg(r)||(e._recent=r),i||jT(e,r),e._ts<0&&fp(e,e._tTime),e},MT=function(e,r){return(si.ScrollTrigger||ex("scrollTrigger",r))&&si.ScrollTrigger.create(r,e)},PT=function(e,r,n,i,s){if(ox(e,r,s),!e._initted)return 1;if(!n&&e._pt&&!Zr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&NT!==Kn.frame)return Go.push(e),e._lazy=[s,i],1},X9=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Bg=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},Q9=function(e,r,n,i){var s=e.ratio,a=r<0||!r&&(!e._start&&X9(e)&&!(!e._initted&&Bg(e))||(e._ts<0||e._dp._ts<0)&&!Bg(e))?0:1,c=e._rDelay,h=0,d,p,m;if(c&&e._repeat&&(h=Qd(0,e._tDur,r),p=kc(h,c),e._yoyo&&p&1&&(a=1-a),p!==kc(e._tTime,c)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||Zr||i||e._zTime===Lt||!r&&e._zTime){if(!e._initted&&PT(e,r,i,n,h))return;for(m=e._zTime,e._zTime=r||(n?Lt:0),n||(n=r&&!m),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=h,d=e._pt;d;)d.r(a,d.d),d=d._next;r<0&&Lg(e,r,n,!0),e._onUpdate&&!n&&Zn(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&Zn(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===a&&(a&&ea(e,1),!n&&!Zr&&(Zn(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},Z9=function(e,r,n){var i;if(n>r)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>r)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<r)return i;i=i._prev}},jc=function(e,r,n,i){var s=e._repeat,a=Cr(r)||0,c=e._tTime/e._tDur;return c&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Cr(a*(s+1)+e._rDelay*s):a,c>0&&!i&&fp(e,e._tTime=e._tDur*c),e.parent&&dp(e),n||Ha(e.parent,e),e},M2=function(e){return e instanceof xn?Ha(e):jc(e,e._dur)},J9={_start:0,endTime:Td,totalDuration:Td},pi=function t(e,r,n){var i=e.labels,s=e._recent||J9,a=e.duration()>=wi?s.endTime(!1):e._dur,c,h,d;return Vr(r)&&(isNaN(r)||r in i)?(h=r.charAt(0),d=r.substr(-1)==="%",c=r.indexOf("="),h==="<"||h===">"?(c>=0&&(r=r.replace(/=/,"")),(h==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(r.substr(1))||0)*(d?(c<0?s:n).totalDuration()/100:1)):c<0?(r in i||(i[r]=a),i[r]):(h=parseFloat(r.charAt(c-1)+r.substr(c+1)),d&&n&&(h=h/100*(cn(n)?n[0]:n).totalDuration()),c>1?t(e,r.substr(0,c-1),n)+h:a+h)):r==null?a:+r},Xu=function(e,r,n){var i=eo(r[1]),s=(i?2:1)+(e<2?0:1),a=r[s],c,h;if(i&&(a.duration=r[1]),a.parent=n,e){for(c=a,h=n;h&&!("immediateRender"in c);)c=h.vars.defaults||{},h=Dn(h.vars.inherit)&&h.parent;a.immediateRender=Dn(c.immediateRender),e<2?a.runBackwards=1:a.startAt=r[s-1]}return new Sr(r[0],a,r[s+1])},ca=function(e,r){return e||e===0?r(e):r},Qd=function(e,r,n){return n<e?e:n>r?r:n},ln=function(e,r){return!Vr(e)||!(r=$9.exec(e))?"":r[1]},eB=function(e,r,n){return ca(n,function(i){return Qd(e,r,i)})},Fg=[].slice,DT=function(e,r){return e&&Ns(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&Ns(e[0]))&&!e.nodeType&&e!==fs},tB=function(e,r,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return Vr(i)&&!r||DT(i,1)?(s=n).push.apply(s,bi(i)):n.push(i)})||n},bi=function(e,r,n){return Zt&&!r&&Zt.selector?Zt.selector(e):Vr(e)&&!n&&(Pg||!Mc())?Fg.call((r||Jy).querySelectorAll(e),0):cn(e)?tB(e,n):DT(e)?Fg.call(e,0):e?[e]:[]},Ug=function(e){return e=bi(e)[0]||Nd("Invalid scope")||{},function(r){var n=e.current||e.nativeElement||e;return bi(r,n.querySelectorAll?n:n===e?Nd("Invalid scope")||Jy.createElement("div"):e)}},LT=function(e){return e.sort(function(){return .5-Math.random()})},BT=function(e){if(gr(e))return e;var r=Ns(e)?e:{each:e},n=Va(r.ease),i=r.from||0,s=parseFloat(r.base)||0,a={},c=i>0&&i<1,h=isNaN(i)||c,d=r.axis,p=i,m=i;return Vr(i)?p=m={center:.5,edges:.5,end:1}[i]||0:!c&&h&&(p=i[0],m=i[1]),function(v,x,E){var w=(E||r).length,A=a[w],N,_,C,S,O,D,M,R,k;if(!A){if(k=r.grid==="auto"?0:(r.grid||[1,wi])[1],!k){for(M=-wi;M<(M=E[k++].getBoundingClientRect().left)&&k<w;);k<w&&k--}for(A=a[w]=[],N=h?Math.min(k,w)*p-.5:i%k,_=k===wi?0:h?w*m/k-.5:i/k|0,M=0,R=wi,D=0;D<w;D++)C=D%k-N,S=_-(D/k|0),A[D]=O=d?Math.abs(d==="y"?S:C):xT(C*C+S*S),O>M&&(M=O),O<R&&(R=O);i==="random"&&LT(A),A.max=M-R,A.min=R,A.v=w=(parseFloat(r.amount)||parseFloat(r.each)*(k>w?w-1:d?d==="y"?w/k:k:Math.max(k,w/k))||0)*(i==="edges"?-1:1),A.b=w<0?s-w:s,A.u=ln(r.amount||r.each)||0,n=n&&w<0?YT(n):n}return w=(A[v]-A.min)/A.max||0,Cr(A.b+(n?n(w):w)*A.v)+A.u}},zg=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Cr(Math.round(parseFloat(n)/e)*e*r);return(i-i%1)/r+(eo(n)?0:ln(n))}},FT=function(e,r){var n=cn(e),i,s;return!n&&Ns(e)&&(i=n=e.radius||wi,e.values?(e=bi(e.values),(s=!eo(e[0]))&&(i*=i)):e=zg(e.increment)),ca(r,n?gr(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var c=parseFloat(s?a.x:a),h=parseFloat(s?a.y:0),d=wi,p=0,m=e.length,v,x;m--;)s?(v=e[m].x-c,x=e[m].y-h,v=v*v+x*x):v=Math.abs(e[m]-c),v<d&&(d=v,p=m);return p=!i||d<=i?e[p]:a,s||p===a||eo(a)?p:p+ln(a)}:zg(e))},UT=function(e,r,n,i){return ca(cn(e)?!r:n===!0?!!(n=0):!i,function(){return cn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(r-e+n*.99))/n)*n*i)/i})},rB=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(i){return r.reduce(function(s,a){return a(s)},i)}},nB=function(e,r){return function(n){return e(parseFloat(n))+(r||ln(n))}},iB=function(e,r,n){return $T(e,r,0,1,n)},zT=function(e,r,n){return ca(n,function(i){return e[~~r(i)]})},sB=function t(e,r,n){var i=r-e;return cn(e)?zT(e,t(0,e.length),r):ca(n,function(s){return(i+(s-e)%i)%i+e})},oB=function t(e,r,n){var i=r-e,s=i*2;return cn(e)?zT(e,t(0,e.length-1),r):ca(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},Od=function(e){for(var r=0,n="",i,s,a,c;~(i=e.indexOf("random(",r));)a=e.indexOf(")",i),c=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(c?ET:Mg),n+=e.substr(r,i-r)+UT(c?s:+s[0],c?0:+s[1],+s[2]||1e-5),r=a+1;return n+e.substr(r,e.length-r)},$T=function(e,r,n,i,s){var a=r-e,c=i-n;return ca(s,function(h){return n+((h-e)/a*c||0)})},aB=function t(e,r,n,i){var s=isNaN(e+r)?0:function(x){return(1-x)*e+x*r};if(!s){var a=Vr(e),c={},h,d,p,m,v;if(n===!0&&(i=1)&&(n=null),a)e={p:e},r={p:r};else if(cn(e)&&!cn(r)){for(p=[],m=e.length,v=m-2,d=1;d<m;d++)p.push(t(e[d-1],e[d]));m--,s=function(E){E*=m;var w=Math.min(v,~~E);return p[w](E-w)},n=r}else i||(e=Rc(cn(e)?[]:{},e));if(!p){for(h in r)sx.call(c,e,h,"get",r[h]);s=function(E){return cx(E,c)||(a?e.p:e)}}}return ca(n,s)},P2=function(e,r,n){var i=e.labels,s=wi,a,c,h;for(a in i)c=i[a]-r,c<0==!!n&&c&&s>(c=Math.abs(c))&&(h=a,s=c);return h},Zn=function(e,r,n){var i=e.vars,s=i[r],a=Zt,c=e._ctx,h,d,p;if(s)return h=i[r+"Params"],d=i.callbackScope||e,n&&Go.length&&u0(),c&&(Zt=c),p=h?s.apply(d,h):s.call(d),Zt=a,p},Ru=function(e){return ea(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Zr),e.progress()<1&&Zn(e,"onInterrupt"),e},Gl,HT=[],VT=function(e){if(e)if(e=!e.name&&e.default||e,Zy()||e.headless){var r=e.name,n=gr(e),i=r&&!n&&e.init?function(){this._props=[]}:e,s={init:Td,render:cx,add:sx,kill:EB,modifier:_B,rawVars:0},a={targetTest:0,get:0,getSetter:lx,aliases:{},register:0};if(Mc(),e!==i){if(qn[r])return;oi(i,oi(d0(e,s),a)),Rc(i.prototype,Rc(s,d0(e,a))),qn[i.prop=r]=i,e.targetTest&&(bh.push(i),tx[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}AT(r,i),e.register&&e.register(Un,i,Bn)}else HT.push(e)},Dt=255,ku={aqua:[0,Dt,Dt],lime:[0,Dt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Dt],navy:[0,0,128],white:[Dt,Dt,Dt],olive:[128,128,0],yellow:[Dt,Dt,0],orange:[Dt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Dt,0,0],pink:[Dt,192,203],cyan:[0,Dt,Dt],transparent:[Dt,Dt,Dt,0]},Gm=function(e,r,n){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(n-r)*e*6:e<.5?n:e*3<2?r+(n-r)*(2/3-e)*6:r)*Dt+.5|0},qT=function(e,r,n){var i=e?eo(e)?[e>>16,e>>8&Dt,e&Dt]:0:ku.black,s,a,c,h,d,p,m,v,x,E;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ku[e])i=ku[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),c=e.charAt(3),e="#"+s+s+a+a+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Dt,i&Dt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Dt,e&Dt]}else if(e.substr(0,3)==="hsl"){if(i=E=e.match(Mg),!r)h=+i[0]%360/360,d=+i[1]/100,p=+i[2]/100,a=p<=.5?p*(d+1):p+d-p*d,s=p*2-a,i.length>3&&(i[3]*=1),i[0]=Gm(h+1/3,s,a),i[1]=Gm(h,s,a),i[2]=Gm(h-1/3,s,a);else if(~e.indexOf("="))return i=e.match(bT),n&&i.length<4&&(i[3]=1),i}else i=e.match(Mg)||ku.transparent;i=i.map(Number)}return r&&!E&&(s=i[0]/Dt,a=i[1]/Dt,c=i[2]/Dt,m=Math.max(s,a,c),v=Math.min(s,a,c),p=(m+v)/2,m===v?h=d=0:(x=m-v,d=p>.5?x/(2-m-v):x/(m+v),h=m===s?(a-c)/x+(a<c?6:0):m===a?(c-s)/x+2:(s-a)/x+4,h*=60),i[0]=~~(h+.5),i[1]=~~(d*100+.5),i[2]=~~(p*100+.5)),n&&i.length<4&&(i[3]=1),i},WT=function(e){var r=[],n=[],i=-1;return e.split(Yo).forEach(function(s){var a=s.match(Wl)||[];r.push.apply(r,a),n.push(i+=a.length+1)}),r.c=n,r},D2=function(e,r,n){var i="",s=(e+i).match(Yo),a=r?"hsla(":"rgba(",c=0,h,d,p,m;if(!s)return e;if(s=s.map(function(v){return(v=qT(v,r,1))&&a+(r?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(p=WT(e),h=n.c,h.join(i)!==p.c.join(i)))for(d=e.replace(Yo,"1").split(Wl),m=d.length-1;c<m;c++)i+=d[c]+(~h.indexOf(c)?s.shift()||a+"0,0,0,0)":(p.length?p:s.length?s:n).shift());if(!d)for(d=e.split(Yo),m=d.length-1;c<m;c++)i+=d[c]+s[c];return i+d[m]},Yo=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ku)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),lB=/hsl[a]?\(/,GT=function(e){var r=e.join(" "),n;if(Yo.lastIndex=0,Yo.test(r))return n=lB.test(r),e[1]=D2(e[1],n),e[0]=D2(e[0],n,WT(e[1])),!0},Id,Kn=function(){var t=Date.now,e=500,r=33,n=t(),i=n,s=1e3/240,a=s,c=[],h,d,p,m,v,x,E=function w(A){var N=t()-i,_=A===!0,C,S,O,D;if((N>e||N<0)&&(n+=N-r),i+=N,O=i-n,C=O-a,(C>0||_)&&(D=++m.frame,v=O-m.time*1e3,m.time=O=O/1e3,a+=C+(C>=s?4:s-C),S=1),_||(h=d(w)),S)for(x=0;x<c.length;x++)c[x](O,v,D,A)};return m={time:0,frame:0,tick:function(){E(!0)},deltaRatio:function(A){return v/(1e3/(A||60))},wake:function(){ST&&(!Pg&&Zy()&&(fs=Pg=window,Jy=fs.document||{},si.gsap=Un,(fs.gsapVersions||(fs.gsapVersions=[])).push(Un.version),CT(c0||fs.GreenSockGlobals||!fs.gsap&&fs||{}),HT.forEach(VT)),p=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&m.sleep(),d=p||function(A){return setTimeout(A,a-m.time*1e3+1|0)},Id=1,E(2))},sleep:function(){(p?cancelAnimationFrame:clearTimeout)(h),Id=0,d=Td},lagSmoothing:function(A,N){e=A||1/0,r=Math.min(N||33,e)},fps:function(A){s=1e3/(A||240),a=m.time*1e3+s},add:function(A,N,_){var C=N?function(S,O,D,M){A(S,O,D,M),m.remove(C)}:A;return m.remove(A),c[_?"unshift":"push"](C),Mc(),C},remove:function(A,N){~(N=c.indexOf(A))&&c.splice(N,1)&&x>=N&&x--},_listeners:c},m}(),Mc=function(){return!Id&&Kn.wake()},xt={},cB=/^[\d.\-M][\d.\-,\s]/,uB=/["']/g,dB=function(e){for(var r={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,a=n.length,c,h,d;s<a;s++)h=n[s],c=s!==a-1?h.lastIndexOf(","):h.length,d=h.substr(0,c),r[i]=isNaN(d)?d.replace(uB,"").trim():+d,i=h.substr(c+1).trim();return r},fB=function(e){var r=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",r);return e.substring(r,~i&&i<n?e.indexOf(")",n+1):n)},hB=function(e){var r=(e+"").split("("),n=xt[r[0]];return n&&r.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[dB(r[1])]:fB(e).split(",").map(IT)):xt._CE&&cB.test(e)?xt._CE("",e):n},YT=function(e){return function(r){return 1-e(1-r)}},KT=function t(e,r){for(var n=e._first,i;n;)n instanceof xn?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},Va=function(e,r){return e&&(gr(e)?e:xt[e]||hB(e))||r},cl=function(e,r,n,i){n===void 0&&(n=function(h){return 1-r(1-h)}),i===void 0&&(i=function(h){return h<.5?r(h*2)/2:1-r((1-h)*2)/2});var s={easeIn:r,easeOut:n,easeInOut:i},a;return Ln(e,function(c){xt[c]=si[c]=s,xt[a=c.toLowerCase()]=n;for(var h in s)xt[a+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=xt[c+"."+h]=s[h]}),s},XT=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},Ym=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),a=s/jg*(Math.asin(1/i)||0),c=function(p){return p===1?1:i*Math.pow(2,-10*p)*z9((p-a)*s)+1},h=e==="out"?c:e==="in"?function(d){return 1-c(1-d)}:XT(c);return s=jg/s,h.config=function(d,p){return t(e,d,p)},h},Km=function t(e,r){r===void 0&&(r=1.70158);var n=function(a){return a?--a*a*((r+1)*a+r)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:XT(n);return i.config=function(s){return t(e,s)},i};Ln("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;cl(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});xt.Linear.easeNone=xt.none=xt.Linear.easeIn;cl("Elastic",Ym("in"),Ym("out"),Ym());(function(t,e){var r=1/e,n=2*r,i=2.5*r,s=function(c){return c<r?t*c*c:c<n?t*Math.pow(c-1.5/e,2)+.75:c<i?t*(c-=2.25/e)*c+.9375:t*Math.pow(c-2.625/e,2)+.984375};cl("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);cl("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});cl("Circ",function(t){return-(xT(1-t*t)-1)});cl("Sine",function(t){return t===1?1:-U9(t*B9)+1});cl("Back",Km("in"),Km("out"),Km());xt.SteppedEase=xt.steps=si.SteppedEase={config:function(e,r){e===void 0&&(e=1);var n=1/e,i=e+(r?0:1),s=r?1:0,a=1-Lt;return function(c){return((i*Qd(0,a,c)|0)+s)*n}}};Ic.ease=xt["quad.out"];Ln("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return rx+=t+","+t+"Params,"});var QT=function(e,r){this.id=F9++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:TT,this.set=r?r.getSetter:lx},Rd=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,jc(this,+r.duration,1,1),this.data=r.data,Zt&&(this._ctx=Zt,Zt.data.push(this)),Id||Kn.wake()}var e=t.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,jc(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Mc(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(fp(this,n),!s._dp||s.parent||jT(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&vs(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Lt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),OT(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+j2(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+j2(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?kc(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-Lt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?f0(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Lt?0:this._rts,this.totalTime(Qd(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),dp(this),Y9(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Lt&&(this._tTime-=Lt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&vs(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Dn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?f0(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=V9);var i=Zr;return Zr=n,ix(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Zr=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,M2(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,M2(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(pi(this,n),Dn(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Dn(i)),this._dur||(this._zTime=-Lt),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Lt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Lt,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-Lt)},e.eventCallback=function(n,i,s){var a=this.vars;return arguments.length>1?(i?(a[n]=i,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},e.then=function(n){var i=this;return new Promise(function(s){var a=gr(n)?n:RT,c=function(){var d=i.then;i.then=null,gr(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=d),s(a),i.then=d};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?c():i._prom=c})},e.kill=function(){Ru(this)},t}();oi(Rd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Lt,_prom:0,_ps:!1,_rts:1});var xn=function(t){yT(e,t);function e(n,i){var s;return n===void 0&&(n={}),s=t.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Dn(n.sortChildren),rr&&vs(n.parent||rr,Ls(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&MT(Ls(s),n.scrollTrigger),s}var r=e.prototype;return r.to=function(i,s,a){return Xu(0,arguments,this),this},r.from=function(i,s,a){return Xu(1,arguments,this),this},r.fromTo=function(i,s,a,c){return Xu(2,arguments,this),this},r.set=function(i,s,a){return s.duration=0,s.parent=this,Ku(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Sr(i,s,pi(this,a),1),this},r.call=function(i,s,a){return vs(this,Sr.delayedCall(0,i,s),a)},r.staggerTo=function(i,s,a,c,h,d,p){return a.duration=s,a.stagger=a.stagger||c,a.onComplete=d,a.onCompleteParams=p,a.parent=this,new Sr(i,a,pi(this,h)),this},r.staggerFrom=function(i,s,a,c,h,d,p){return a.runBackwards=1,Ku(a).immediateRender=Dn(a.immediateRender),this.staggerTo(i,s,a,c,h,d,p)},r.staggerFromTo=function(i,s,a,c,h,d,p,m){return c.startAt=a,Ku(c).immediateRender=Dn(c.immediateRender),this.staggerTo(i,s,c,h,d,p,m)},r.render=function(i,s,a){var c=this._time,h=this._dirty?this.totalDuration():this._tDur,d=this._dur,p=i<=0?0:Cr(i),m=this._zTime<0!=i<0&&(this._initted||!d),v,x,E,w,A,N,_,C,S,O,D,M;if(this!==rr&&p>h&&i>=0&&(p=h),p!==this._tTime||a||m){if(c!==this._time&&d&&(p+=this._time-c,i+=this._time-c),v=p,S=this._start,C=this._ts,N=!C,m&&(d||(c=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(D=this._yoyo,A=d+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(A*100+i,s,a);if(v=Cr(p%A),p===h?(w=this._repeat,v=d):(O=Cr(p/A),w=~~O,w&&w===O&&(v=d,w--),v>d&&(v=d)),O=kc(this._tTime,A),!c&&this._tTime&&O!==w&&this._tTime-O*A-this._dur<=0&&(O=w),D&&w&1&&(v=d-v,M=1),w!==O&&!this._lock){var R=D&&O&1,k=R===(D&&w&1);if(w<O&&(R=!R),c=R?0:p%d?d:p,this._lock=1,this.render(c||(M?0:Cr(w*A)),s,!d)._lock=0,this._tTime=p,!s&&this.parent&&Zn(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),c&&c!==this._time||N!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,h=this._tDur,k&&(this._lock=2,c=R?d:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!N)return this;KT(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=Z9(this,Cr(c),Cr(v)),_&&(p-=v-(v=_._start))),this._tTime=p,this._time=v,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,c=0),!c&&p&&!s&&!O&&(Zn(this,"onStart"),this._tTime!==p))return this;if(v>=c&&i>=0)for(x=this._first;x;){if(E=x._next,(x._act||v>=x._start)&&x._ts&&_!==x){if(x.parent!==this)return this.render(i,s,a);if(x.render(x._ts>0?(v-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(v-x._start)*x._ts,s,a),v!==this._time||!this._ts&&!N){_=0,E&&(p+=this._zTime=-Lt);break}}x=E}else{x=this._last;for(var L=i<0?i:v;x;){if(E=x._prev,(x._act||L<=x._end)&&x._ts&&_!==x){if(x.parent!==this)return this.render(i,s,a);if(x.render(x._ts>0?(L-x._start)*x._ts:(x._dirty?x.totalDuration():x._tDur)+(L-x._start)*x._ts,s,a||Zr&&ix(x)),v!==this._time||!this._ts&&!N){_=0,E&&(p+=this._zTime=L?-Lt:Lt);break}}x=E}}if(_&&!s&&(this.pause(),_.render(v>=c?0:-Lt)._zTime=v>=c?1:-1,this._ts))return this._start=S,dp(this),this.render(i,s,a);this._onUpdate&&!s&&Zn(this,"onUpdate",!0),(p===h&&this._tTime>=this.totalDuration()||!p&&c)&&(S===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((i||!d)&&(p===h&&this._ts>0||!p&&this._ts<0)&&ea(this,1),!s&&!(i<0&&!c)&&(p||c||!h)&&(Zn(this,p===h&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(p<h&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(i,s){var a=this;if(eo(s)||(s=pi(this,s,i)),!(i instanceof Rd)){if(cn(i))return i.forEach(function(c){return a.add(c,s)}),this;if(Vr(i))return this.addLabel(i,s);if(gr(i))i=Sr.delayedCall(0,i);else return this}return this!==i?vs(this,i,s):this},r.getChildren=function(i,s,a,c){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),c===void 0&&(c=-wi);for(var h=[],d=this._first;d;)d._start>=c&&(d instanceof Sr?s&&h.push(d):(a&&h.push(d),i&&h.push.apply(h,d.getChildren(!0,s,a)))),d=d._next;return h},r.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},r.remove=function(i){return Vr(i)?this.removeLabel(i):gr(i)?this.killTweensOf(i):(i.parent===this&&up(this,i),i===this._recent&&(this._recent=this._last),Ha(this))},r.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Cr(Kn.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},r.addLabel=function(i,s){return this.labels[i]=pi(this,s),this},r.removeLabel=function(i){return delete this.labels[i],this},r.addPause=function(i,s,a){var c=Sr.delayedCall(0,s||Td,a);return c.data="isPause",this._hasPause=1,vs(this,c,pi(this,i))},r.removePause=function(i){var s=this._first;for(i=pi(this,i);s;)s._start===i&&s.data==="isPause"&&ea(s),s=s._next},r.killTweensOf=function(i,s,a){for(var c=this.getTweensOf(i,a),h=c.length;h--;)Mo!==c[h]&&c[h].kill(i,s);return this},r.getTweensOf=function(i,s){for(var a=[],c=bi(i),h=this._first,d=eo(s),p;h;)h instanceof Sr?q9(h._targets,c)&&(d?(!Mo||h._initted&&h._ts)&&h.globalTime(0)<=s&&h.globalTime(h.totalDuration())>s:!s||h.isActive())&&a.push(h):(p=h.getTweensOf(c,s)).length&&a.push.apply(a,p),h=h._next;return a},r.tweenTo=function(i,s){s=s||{};var a=this,c=pi(a,i),h=s,d=h.startAt,p=h.onStart,m=h.onStartParams,v=h.immediateRender,x,E=Sr.to(a,oi({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:s.duration||Math.abs((c-(d&&"time"in d?d.time:a._time))/a.timeScale())||Lt,onStart:function(){if(a.pause(),!x){var A=s.duration||Math.abs((c-(d&&"time"in d?d.time:a._time))/a.timeScale());E._dur!==A&&jc(E,A,0,1).render(E._time,!0,!0),x=1}p&&p.apply(E,m||[])}},s));return v?E.render(0):E},r.tweenFromTo=function(i,s,a){return this.tweenTo(s,oi({startAt:{time:pi(this,i)}},a))},r.recent=function(){return this._recent},r.nextLabel=function(i){return i===void 0&&(i=this._time),P2(this,pi(this,i))},r.previousLabel=function(i){return i===void 0&&(i=this._time),P2(this,pi(this,i),1)},r.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Lt)},r.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var c=this._first,h=this.labels,d;c;)c._start>=a&&(c._start+=i,c._end+=i),c=c._next;if(s)for(d in h)h[d]>=a&&(h[d]+=i);return Ha(this)},r.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},r.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Ha(this)},r.totalDuration=function(i){var s=0,a=this,c=a._last,h=wi,d,p,m;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(m=a.parent;c;)d=c._prev,c._dirty&&c.totalDuration(),p=c._start,p>h&&a._sort&&c._ts&&!a._lock?(a._lock=1,vs(a,c,p-c._delay,1)._lock=0):h=p,p<0&&c._ts&&(s-=p,(!m&&!a._dp||m&&m.smoothChildTiming)&&(a._start+=p/a._ts,a._time-=p,a._tTime-=p),a.shiftChildren(-p,!1,-1/0),h=0),c._end>s&&c._ts&&(s=c._end),c=d;jc(a,a===rr&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(rr._ts&&(OT(rr,f0(i,rr)),NT=Kn.frame),Kn.frame>=R2){R2+=ni.autoSleep||120;var s=rr._first;if((!s||!s._ts)&&ni.autoSleep&&Kn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Kn.sleep()}}},e}(Rd);oi(xn.prototype,{_lock:0,_hasPause:0,_forcing:0});var pB=function(e,r,n,i,s,a,c){var h=new Bn(this._pt,e,r,0,1,n3,null,s),d=0,p=0,m,v,x,E,w,A,N,_;for(h.b=n,h.e=i,n+="",i+="",(N=~i.indexOf("random("))&&(i=Od(i)),a&&(_=[n,i],a(_,e,r),n=_[0],i=_[1]),v=n.match(qm)||[];m=qm.exec(i);)E=m[0],w=i.substring(d,m.index),x?x=(x+1)%5:w.substr(-5)==="rgba("&&(x=1),E!==v[p++]&&(A=parseFloat(v[p-1])||0,h._pt={_next:h._pt,p:w||p===1?w:",",s:A,c:E.charAt(1)==="="?sc(A,E)-A:parseFloat(E)-A,m:x&&x<4?Math.round:0},d=qm.lastIndex);return h.c=d<i.length?i.substring(d,i.length):"",h.fp=c,(_T.test(i)||N)&&(h.e=0),this._pt=h,h},sx=function(e,r,n,i,s,a,c,h,d,p){gr(i)&&(i=i(s||0,e,a));var m=e[r],v=n!=="get"?n:gr(m)?d?e[r.indexOf("set")||!gr(e["get"+r.substr(3)])?r:"get"+r.substr(3)](d):e[r]():m,x=gr(m)?d?xB:t3:ax,E;if(Vr(i)&&(~i.indexOf("random(")&&(i=Od(i)),i.charAt(1)==="="&&(E=sc(v,i)+(ln(v)||0),(E||E===0)&&(i=E))),!p||v!==i||$g)return!isNaN(v*i)&&i!==""?(E=new Bn(this._pt,e,r,+v||0,i-(v||0),typeof m=="boolean"?bB:r3,0,x),d&&(E.fp=d),c&&E.modifier(c,this,e),this._pt=E):(!m&&!(r in e)&&ex(r,i),pB.call(this,e,r,v,i,x,h||ni.stringFilter,d))},mB=function(e,r,n,i,s){if(gr(e)&&(e=Qu(e,s,r,n,i)),!Ns(e)||e.style&&e.nodeType||cn(e)||wT(e))return Vr(e)?Qu(e,s,r,n,i):e;var a={},c;for(c in e)a[c]=Qu(e[c],s,r,n,i);return a},ZT=function(e,r,n,i,s,a){var c,h,d,p;if(qn[e]&&(c=new qn[e]).init(s,c.rawVars?r[e]:mB(r[e],i,s,a,n),n,i,a)!==!1&&(n._pt=h=new Bn(n._pt,s,e,0,1,c.render,c,0,c.priority),n!==Gl))for(d=n._ptLookup[n._targets.indexOf(s)],p=c._props.length;p--;)d[c._props[p]]=h;return c},Mo,$g,ox=function t(e,r,n){var i=e.vars,s=i.ease,a=i.startAt,c=i.immediateRender,h=i.lazy,d=i.onUpdate,p=i.runBackwards,m=i.yoyoEase,v=i.keyframes,x=i.autoRevert,E=e._dur,w=e._startAt,A=e._targets,N=e.parent,_=N&&N.data==="nested"?N.vars.targets:A,C=e._overwrite==="auto"&&!Xy,S=e.timeline,O,D,M,R,k,L,B,F,H,z,$,ee,J;if(S&&(!v||!s)&&(s="none"),e._ease=Va(s,Ic.ease),e._yEase=m?YT(Va(m===!0?s:m,Ic.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!S&&!!i.runBackwards,!S||v&&!i.stagger){if(F=A[0]?$a(A[0]).harness:0,ee=F&&i[F.prop],O=d0(i,tx),w&&(w._zTime<0&&w.progress(1),r<0&&p&&c&&!x?w.render(-1,!0):w.revert(p&&E?wh:H9),w._lazy=0),a){if(ea(e._startAt=Sr.set(A,oi({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:!w&&Dn(h),startAt:null,delay:0,onUpdate:d&&function(){return Zn(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Zr||!c&&!x)&&e._startAt.revert(wh),c&&E&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(p&&E&&!w){if(r&&(c=!1),M=oi({overwrite:!1,data:"isFromStart",lazy:c&&!w&&Dn(h),immediateRender:c,stagger:0,parent:N},O),ee&&(M[F.prop]=ee),ea(e._startAt=Sr.set(A,M)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(Zr?e._startAt.revert(wh):e._startAt.render(-1,!0)),e._zTime=r,!c)t(e._startAt,Lt,Lt);else if(!r)return}for(e._pt=e._ptCache=0,h=E&&Dn(h)||h&&!E,D=0;D<A.length;D++){if(k=A[D],B=k._gsap||nx(A)[D]._gsap,e._ptLookup[D]=z={},Dg[B.id]&&Go.length&&u0(),$=_===A?D:_.indexOf(k),F&&(H=new F).init(k,ee||O,e,$,_)!==!1&&(e._pt=R=new Bn(e._pt,k,H.name,0,1,H.render,H,0,H.priority),H._props.forEach(function(te){z[te]=R}),H.priority&&(L=1)),!F||ee)for(M in O)qn[M]&&(H=ZT(M,O,e,$,k,_))?H.priority&&(L=1):z[M]=R=sx.call(e,k,M,"get",O[M],$,_,0,i.stringFilter);e._op&&e._op[D]&&e.kill(k,e._op[D]),C&&e._pt&&(Mo=e,rr.killTweensOf(k,z,e.globalTime(r)),J=!e.parent,Mo=0),e._pt&&h&&(Dg[B.id]=1)}L&&i3(e),e._onInit&&e._onInit(e)}e._onUpdate=d,e._initted=(!e._op||e._pt)&&!J,v&&r<=0&&S.render(wi,!0,!0)},gB=function(e,r,n,i,s,a,c,h){var d=(e._pt&&e._ptCache||(e._ptCache={}))[r],p,m,v,x;if(!d)for(d=e._ptCache[r]=[],v=e._ptLookup,x=e._targets.length;x--;){if(p=v[x][r],p&&p.d&&p.d._pt)for(p=p.d._pt;p&&p.p!==r&&p.fp!==r;)p=p._next;if(!p)return $g=1,e.vars[r]="+=0",ox(e,c),$g=0,h?Nd(r+" not eligible for reset"):1;d.push(p)}for(x=d.length;x--;)m=d[x],p=m._pt||m,p.s=(i||i===0)&&!s?i:p.s+(i||0)+a*p.c,p.c=n-p.s,m.e&&(m.e=yr(n)+ln(m.e)),m.b&&(m.b=p.s+ln(m.b))},vB=function(e,r){var n=e[0]?$a(e[0]).harness:0,i=n&&n.aliases,s,a,c,h;if(!i)return r;s=Rc({},r);for(a in i)if(a in s)for(h=i[a].split(","),c=h.length;c--;)s[h[c]]=s[a];return s},yB=function(e,r,n,i){var s=r.ease||i||"power1.inOut",a,c;if(cn(r))c=n[e]||(n[e]=[]),r.forEach(function(h,d){return c.push({t:d/(r.length-1)*100,v:h,e:s})});else for(a in r)c=n[a]||(n[a]=[]),a==="ease"||c.push({t:parseFloat(e),v:r[a],e:s})},Qu=function(e,r,n,i,s){return gr(e)?e.call(r,n,i,s):Vr(e)&&~e.indexOf("random(")?Od(e):e},JT=rx+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",e3={};Ln(JT+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return e3[t]=1});var Sr=function(t){yT(e,t);function e(n,i,s,a){var c;typeof i=="number"&&(s.duration=i,i=s,s=null),c=t.call(this,a?i:Ku(i))||this;var h=c.vars,d=h.duration,p=h.delay,m=h.immediateRender,v=h.stagger,x=h.overwrite,E=h.keyframes,w=h.defaults,A=h.scrollTrigger,N=h.yoyoEase,_=i.parent||rr,C=(cn(n)||wT(n)?eo(n[0]):"length"in i)?[n]:bi(n),S,O,D,M,R,k,L,B;if(c._targets=C.length?nx(C):Nd("GSAP target "+n+" not found. https://gsap.com",!ni.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=x,E||v||Kf(d)||Kf(p)){if(i=c.vars,S=c.timeline=new xn({data:"nested",defaults:w||{},targets:_&&_.data==="nested"?_.vars.targets:C}),S.kill(),S.parent=S._dp=Ls(c),S._start=0,v||Kf(d)||Kf(p)){if(M=C.length,L=v&&BT(v),Ns(v))for(R in v)~JT.indexOf(R)&&(B||(B={}),B[R]=v[R]);for(O=0;O<M;O++)D=d0(i,e3),D.stagger=0,N&&(D.yoyoEase=N),B&&Rc(D,B),k=C[O],D.duration=+Qu(d,Ls(c),O,k,C),D.delay=(+Qu(p,Ls(c),O,k,C)||0)-c._delay,!v&&M===1&&D.delay&&(c._delay=p=D.delay,c._start+=p,D.delay=0),S.to(k,D,L?L(O,k,C):0),S._ease=xt.none;S.duration()?d=p=0:c.timeline=0}else if(E){Ku(oi(S.vars.defaults,{ease:"none"})),S._ease=Va(E.ease||i.ease||"none");var F=0,H,z,$;if(cn(E))E.forEach(function(ee){return S.to(C,ee,">")}),S.duration();else{D={};for(R in E)R==="ease"||R==="easeEach"||yB(R,E[R],D,E.easeEach);for(R in D)for(H=D[R].sort(function(ee,J){return ee.t-J.t}),F=0,O=0;O<H.length;O++)z=H[O],$={ease:z.e,duration:(z.t-(O?H[O-1].t:0))/100*d},$[R]=z.v,S.to(C,$,F),F+=$.duration;S.duration()<d&&S.to({},{duration:d-S.duration()})}}d||c.duration(d=S.duration())}else c.timeline=0;return x===!0&&!Xy&&(Mo=Ls(c),rr.killTweensOf(C),Mo=0),vs(_,Ls(c),s),i.reversed&&c.reverse(),i.paused&&c.paused(!0),(m||!d&&!E&&c._start===Cr(_._time)&&Dn(m)&&K9(Ls(c))&&_.data!=="nested")&&(c._tTime=-Lt,c.render(Math.max(0,-p)||0)),A&&MT(Ls(c),A),c}var r=e.prototype;return r.render=function(i,s,a){var c=this._time,h=this._tDur,d=this._dur,p=i<0,m=i>h-Lt&&!p?h:i<Lt?0:i,v,x,E,w,A,N,_,C,S;if(!d)Q9(this,i,s,a);else if(m!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(v=m,C=this.timeline,this._repeat){if(w=d+this._rDelay,this._repeat<-1&&p)return this.totalTime(w*100+i,s,a);if(v=Cr(m%w),m===h?(E=this._repeat,v=d):(A=Cr(m/w),E=~~A,E&&E===A?(v=d,E--):v>d&&(v=d)),N=this._yoyo&&E&1,N&&(S=this._yEase,v=d-v),A=kc(this._tTime,w),v===c&&!a&&this._initted&&E===A)return this._tTime=m,this;E!==A&&(C&&this._yEase&&KT(C,N),this.vars.repeatRefresh&&!N&&!this._lock&&v!==w&&this._initted&&(this._lock=a=1,this.render(Cr(w*E),!0).invalidate()._lock=0))}if(!this._initted){if(PT(this,p?i:v,a,s,m))return this._tTime=0,this;if(c!==this._time&&!(a&&this.vars.repeatRefresh&&E!==A))return this;if(d!==this._dur)return this.render(i,s,a)}if(this._tTime=m,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(S||this._ease)(v/d),this._from&&(this.ratio=_=1-_),!c&&m&&!s&&!A&&(Zn(this,"onStart"),this._tTime!==m))return this;for(x=this._pt;x;)x.r(_,x.d),x=x._next;C&&C.render(i<0?i:C._dur*C._ease(v/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(p&&Lg(this,i,s,a),Zn(this,"onUpdate")),this._repeat&&E!==A&&this.vars.onRepeat&&!s&&this.parent&&Zn(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(p&&!this._onUpdate&&Lg(this,i,!0,!0),(i||!d)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&ea(this,1),!s&&!(p&&!c)&&(m||c||N)&&(Zn(this,m===h?"onComplete":"onReverseComplete",!0),this._prom&&!(m<h&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},r.resetTo=function(i,s,a,c,h){Id||Kn.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),p;return this._initted||ox(this,d),p=this._ease(d/this._dur),gB(this,i,s,a,c,p,d,h)?this.resetTo(i,s,a,c,1):(fp(this,0),this.parent||kT(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ru(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Zr),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Mo&&Mo.vars.overwrite!==!0)._first||Ru(this),this.parent&&a!==this.timeline.totalDuration()&&jc(this,this._dur*this.timeline._tDur/a,0,1),this}var c=this._targets,h=i?bi(i):c,d=this._ptLookup,p=this._pt,m,v,x,E,w,A,N;if((!s||s==="all")&&G9(c,h))return s==="all"&&(this._pt=0),Ru(this);for(m=this._op=this._op||[],s!=="all"&&(Vr(s)&&(w={},Ln(s,function(_){return w[_]=1}),s=w),s=vB(c,s)),N=c.length;N--;)if(~h.indexOf(c[N])){v=d[N],s==="all"?(m[N]=s,E=v,x={}):(x=m[N]=m[N]||{},E=s);for(w in E)A=v&&v[w],A&&((!("kill"in A.d)||A.d.kill(w)===!0)&&up(this,A,"_pt"),delete v[w]),x!=="all"&&(x[w]=1)}return this._initted&&!this._pt&&p&&Ru(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Xu(1,arguments)},e.delayedCall=function(i,s,a,c){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:c})},e.fromTo=function(i,s,a){return Xu(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return rr.killTweensOf(i,s,a)},e}(Rd);oi(Sr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ln("staggerTo,staggerFrom,staggerFromTo",function(t){Sr[t]=function(){var e=new xn,r=Fg.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var ax=function(e,r,n){return e[r]=n},t3=function(e,r,n){return e[r](n)},xB=function(e,r,n,i){return e[r](i.fp,n)},wB=function(e,r,n){return e.setAttribute(r,n)},lx=function(e,r){return gr(e[r])?t3:Qy(e[r])&&e.setAttribute?wB:ax},r3=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},bB=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},n3=function(e,r){var n=r._pt,i="";if(!e&&r.b)i=r.b;else if(e===1&&r.e)i=r.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=r.c}r.set(r.t,r.p,i,r)},cx=function(e,r){for(var n=r._pt;n;)n.r(e,n.d),n=n._next},_B=function(e,r,n,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,r,n),s=a},EB=function(e){for(var r=this._pt,n,i;r;)i=r._next,r.p===e&&!r.op||r.op===e?up(this,r,"_pt"):r.dep||(n=1),r=i;return!n},SB=function(e,r,n,i){i.mSet(e,r,i.m.call(i.tween,n,i.mt),i)},i3=function(e){for(var r=e._pt,n,i,s,a;r;){for(n=r._next,i=s;i&&i.pr>r.pr;)i=i._next;(r._prev=i?i._prev:a)?r._prev._next=r:s=r,(r._next=i)?i._prev=r:a=r,r=n}e._pt=s},Bn=function(){function t(r,n,i,s,a,c,h,d,p){this.t=n,this.s=s,this.c=a,this.p=i,this.r=c||r3,this.d=h||this,this.set=d||ax,this.pr=p||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=SB,this.m=n,this.mt=s,this.tween=i},t}();Ln(rx+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return tx[t]=1});si.TweenMax=si.TweenLite=Sr;si.TimelineLite=si.TimelineMax=xn;rr=new xn({sortChildren:!1,defaults:Ic,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ni.stringFilter=GT;var qa=[],_h={},CB=[],L2=0,AB=0,Xm=function(e){return(_h[e]||CB).map(function(r){return r()})},Hg=function(){var e=Date.now(),r=[];e-L2>2&&(Xm("matchMediaInit"),qa.forEach(function(n){var i=n.queries,s=n.conditions,a,c,h,d;for(c in i)a=fs.matchMedia(i[c]).matches,a&&(h=1),a!==s[c]&&(s[c]=a,d=1);d&&(n.revert(),h&&r.push(n))}),Xm("matchMediaRevert"),r.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),L2=e,Xm("matchMedia"))},s3=function(){function t(r,n){this.selector=n&&Ug(n),this.data=[],this._r=[],this.isReverted=!1,this.id=AB++,r&&this.add(r)}var e=t.prototype;return e.add=function(n,i,s){gr(n)&&(s=i,i=n,n=gr);var a=this,c=function(){var d=Zt,p=a.selector,m;return d&&d!==a&&d.data.push(a),s&&(a.selector=Ug(s)),Zt=a,m=i.apply(a,arguments),gr(m)&&a._r.push(m),Zt=d,a.selector=p,a.isReverted=!1,m};return a.last=c,n===gr?c(a,function(h){return a.add(null,h)}):n?a[n]=c:c},e.ignore=function(n){var i=Zt;Zt=null,n(this),Zt=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof t?n.push.apply(n,i.getTweens()):i instanceof Sr&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var c=s.getTweens(),h=s.data.length,d;h--;)d=s.data[h],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(p){return c.splice(c.indexOf(p),1)}));for(c.map(function(p){return{g:p._dur||p._delay||p._sat&&!p._sat.vars.immediateRender?p.globalTime(0):-1/0,t:p}}).sort(function(p,m){return m.g-p.g||-1/0}).forEach(function(p){return p.t.revert(n)}),h=s.data.length;h--;)d=s.data[h],d instanceof xn?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof Sr)&&d.revert&&d.revert(n);s._r.forEach(function(p){return p(n,s)}),s.isReverted=!0}():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),i)for(var a=qa.length;a--;)qa[a].id===this.id&&qa.splice(a,1)},e.revert=function(n){this.kill(n||{})},t}(),NB=function(){function t(r){this.contexts=[],this.scope=r,Zt&&Zt.data.push(this)}var e=t.prototype;return e.add=function(n,i,s){Ns(n)||(n={matches:n});var a=new s3(0,s||this.scope),c=a.conditions={},h,d,p;Zt&&!a.selector&&(a.selector=Zt.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(d in n)d==="all"?p=1:(h=fs.matchMedia(n[d]),h&&(qa.indexOf(a)<0&&qa.push(a),(c[d]=h.matches)&&(p=1),h.addListener?h.addListener(Hg):h.addEventListener("change",Hg)));return p&&i(a,function(m){return a.add(null,m)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},t}(),h0={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(i){return VT(i)})},timeline:function(e){return new xn(e)},getTweensOf:function(e,r){return rr.getTweensOf(e,r)},getProperty:function(e,r,n,i){Vr(e)&&(e=bi(e)[0]);var s=$a(e||{}).get,a=n?RT:IT;return n==="native"&&(n=""),e&&(r?a((qn[r]&&qn[r].get||s)(e,r,n,i)):function(c,h,d){return a((qn[c]&&qn[c].get||s)(e,c,h,d))})},quickSetter:function(e,r,n){if(e=bi(e),e.length>1){var i=e.map(function(p){return Un.quickSetter(p,r,n)}),s=i.length;return function(p){for(var m=s;m--;)i[m](p)}}e=e[0]||{};var a=qn[r],c=$a(e),h=c.harness&&(c.harness.aliases||{})[r]||r,d=a?function(p){var m=new a;Gl._pt=0,m.init(e,n?p+n:p,Gl,0,[e]),m.render(1,m),Gl._pt&&cx(1,Gl)}:c.set(e,h);return a?d:function(p){return d(e,h,n?p+n:p,c,1)}},quickTo:function(e,r,n){var i,s=Un.to(e,oi((i={},i[r]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),a=function(h,d,p){return s.resetTo(r,h,d,p)};return a.tween=s,a},isTweening:function(e){return rr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Va(e.ease,Ic.ease)),k2(Ic,e||{})},config:function(e){return k2(ni,e||{})},registerEffect:function(e){var r=e.name,n=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(c){return c&&!qn[c]&&!si[c]&&Nd(r+" effect requires "+c+" plugin.")}),Wm[r]=function(c,h,d){return n(bi(c),oi(h||{},s),d)},a&&(xn.prototype[r]=function(c,h,d){return this.add(Wm[r](c,Ns(h)?h:(d=h)&&{},this),d)})},registerEase:function(e,r){xt[e]=Va(r)},parseEase:function(e,r){return arguments.length?Va(e,r):xt},getById:function(e){return rr.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var n=new xn(e),i,s;for(n.smoothChildTiming=Dn(e.smoothChildTiming),rr.remove(n),n._dp=0,n._time=n._tTime=rr._time,i=rr._first;i;)s=i._next,(r||!(!i._dur&&i instanceof Sr&&i.vars.onComplete===i._targets[0]))&&vs(n,i,i._start-i._delay),i=s;return vs(rr,n,0),n},context:function(e,r){return e?new s3(e,r):Zt},matchMedia:function(e){return new NB(e)},matchMediaRefresh:function(){return qa.forEach(function(e){var r=e.conditions,n,i;for(i in r)r[i]&&(r[i]=!1,n=1);n&&e.revert()})||Hg()},addEventListener:function(e,r){var n=_h[e]||(_h[e]=[]);~n.indexOf(r)||n.push(r)},removeEventListener:function(e,r){var n=_h[e],i=n&&n.indexOf(r);i>=0&&n.splice(i,1)},utils:{wrap:sB,wrapYoyo:oB,distribute:BT,random:UT,snap:FT,normalize:iB,getUnit:ln,clamp:eB,splitColor:qT,toArray:bi,selector:Ug,mapRange:$T,pipe:rB,unitize:nB,interpolate:aB,shuffle:LT},install:CT,effects:Wm,ticker:Kn,updateRoot:xn.updateRoot,plugins:qn,globalTimeline:rr,core:{PropTween:Bn,globals:AT,Tween:Sr,Timeline:xn,Animation:Rd,getCache:$a,_removeLinkedListItem:up,reverting:function(){return Zr},context:function(e){return e&&Zt&&(Zt.data.push(e),e._ctx=Zt),Zt},suppressOverwrites:function(e){return Xy=e}}};Ln("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return h0[t]=Sr[t]});Kn.add(xn.updateRoot);Gl=h0.to({},{duration:0});var TB=function(e,r){for(var n=e._pt;n&&n.p!==r&&n.op!==r&&n.fp!==r;)n=n._next;return n},OB=function(e,r){var n=e._targets,i,s,a;for(i in r)for(s=n.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=TB(a,i)),a&&a.modifier&&a.modifier(r[i],e,n[s],i))},Qm=function(e,r){return{name:e,headless:1,rawVars:1,init:function(i,s,a){a._onInit=function(c){var h,d;if(Vr(s)&&(h={},Ln(s,function(p){return h[p]=1}),s=h),r){h={};for(d in s)h[d]=r(s[d]);s=h}OB(c,s)}}}},Un=h0.registerPlugin({name:"attr",init:function(e,r,n,i,s){var a,c,h;this.tween=n;for(a in r)h=e.getAttribute(a)||"",c=this.add(e,"setAttribute",(h||0)+"",r[a],i,s,0,0,a),c.op=a,c.b=h,this._props.push(a)},render:function(e,r){for(var n=r._pt;n;)Zr?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,r){for(var n=r.length;n--;)this.add(e,n,e[n]||0,r[n],0,0,0,0,0,1)}},Qm("roundProps",zg),Qm("modifiers"),Qm("snap",FT))||h0;Sr.version=xn.version=Un.version="3.13.0";ST=1;Zy()&&Mc();xt.Power0;xt.Power1;xt.Power2;xt.Power3;xt.Power4;xt.Linear;xt.Quad;xt.Cubic;xt.Quart;xt.Quint;xt.Strong;xt.Elastic;xt.Back;xt.SteppedEase;xt.Bounce;xt.Sine;xt.Expo;xt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var B2,Po,oc,ux,ka,F2,dx,IB=function(){return typeof window<"u"},to={},Sa=180/Math.PI,ac=Math.PI/180,Nl=Math.atan2,U2=1e8,fx=/([A-Z])/g,RB=/(left|right|width|margin|padding|x)/i,kB=/[\s,\(]\S/,xs={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Vg=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},jB=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},MB=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},PB=function(e,r){var n=r.s+r.c*e;r.set(r.t,r.p,~~(n+(n<0?-.5:.5))+r.u,r)},o3=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},a3=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},DB=function(e,r,n){return e.style[r]=n},LB=function(e,r,n){return e.style.setProperty(r,n)},BB=function(e,r,n){return e._gsap[r]=n},FB=function(e,r,n){return e._gsap.scaleX=e._gsap.scaleY=n},UB=function(e,r,n,i,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},zB=function(e,r,n,i,s){var a=e._gsap;a[r]=n,a.renderTransform(s,a)},ir="transform",Fn=ir+"Origin",$B=function t(e,r){var n=this,i=this.target,s=i.style,a=i._gsap;if(e in to&&s){if(this.tfm=this.tfm||{},e!=="transform")e=xs[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return n.tfm[c]=Us(i,c)}):this.tfm[e]=a.x?a[e]:Us(i,e),e===Fn&&(this.tfm.zOrigin=a.zOrigin);else return xs.transform.split(",").forEach(function(c){return t.call(n,c,r)});if(this.props.indexOf(ir)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Fn,r,"")),e=ir}(s||r)&&this.props.push(e,r,s[e])},l3=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},HB=function(){var e=this.props,r=this.target,n=r.style,i=r._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?r[e[s]](e[s+2]):r[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(fx,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),s=dx(),(!s||!s.isStart)&&!n[ir]&&(l3(n),i.zOrigin&&n[Fn]&&(n[Fn]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},c3=function(e,r){var n={target:e,props:[],revert:HB,save:$B};return e._gsap||Un.core.getCache(e),r&&e.style&&e.nodeType&&r.split(",").forEach(function(i){return n.save(i)}),n},u3,qg=function(e,r){var n=Po.createElementNS?Po.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Po.createElement(e);return n&&n.style?n:Po.createElement(e)},_i=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(fx,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,Pc(r)||r,1)||""},z2="O,Moz,ms,Ms,Webkit".split(","),Pc=function(e,r,n){var i=r||ka,s=i.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(z2[a]+e in s););return a<0?null:(a===3?"ms":a>=0?z2[a]:"")+e},Wg=function(){IB()&&window.document&&(B2=window,Po=B2.document,oc=Po.documentElement,ka=qg("div")||{style:{}},qg("div"),ir=Pc(ir),Fn=ir+"Origin",ka.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u3=!!Pc("perspective"),dx=Un.core.reverting,ux=1)},$2=function(e){var r=e.ownerSVGElement,n=qg("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),oc.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),oc.removeChild(n),s},H2=function(e,r){for(var n=r.length;n--;)if(e.hasAttribute(r[n]))return e.getAttribute(r[n])},d3=function(e){var r,n;try{r=e.getBBox()}catch{r=$2(e),n=1}return r&&(r.width||r.height)||n||(r=$2(e)),r&&!r.width&&!r.x&&!r.y?{x:+H2(e,["x","cx","x1"])||0,y:+H2(e,["y","cy","y1"])||0,width:0,height:0}:r},f3=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&d3(e))},Ja=function(e,r){if(r){var n=e.style,i;r in to&&r!==Fn&&(r=ir),n.removeProperty?(i=r.substr(0,2),(i==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),n.removeProperty(i==="--"?r:r.replace(fx,"-$1").toLowerCase())):n.removeAttribute(r)}},Do=function(e,r,n,i,s,a){var c=new Bn(e._pt,r,n,0,1,a?a3:o3);return e._pt=c,c.b=i,c.e=s,e._props.push(n),c},V2={deg:1,rad:1,turn:1},VB={grid:1,flex:1},ta=function t(e,r,n,i){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",c=ka.style,h=RB.test(r),d=e.tagName.toLowerCase()==="svg",p=(d?"client":"offset")+(h?"Width":"Height"),m=100,v=i==="px",x=i==="%",E,w,A,N;if(i===a||!s||V2[i]||V2[a])return s;if(a!=="px"&&!v&&(s=t(e,r,n,"px")),N=e.getCTM&&f3(e),(x||a==="%")&&(to[r]||~r.indexOf("adius")))return E=N?e.getBBox()[h?"width":"height"]:e[p],yr(x?s/E*m:s/100*E);if(c[h?"width":"height"]=m+(v?a:i),w=i!=="rem"&&~r.indexOf("adius")||i==="em"&&e.appendChild&&!d?e:e.parentNode,N&&(w=(e.ownerSVGElement||{}).parentNode),(!w||w===Po||!w.appendChild)&&(w=Po.body),A=w._gsap,A&&x&&A.width&&h&&A.time===Kn.time&&!A.uncache)return yr(s/A.width*m);if(x&&(r==="height"||r==="width")){var _=e.style[r];e.style[r]=m+i,E=e[p],_?e.style[r]=_:Ja(e,r)}else(x||a==="%")&&!VB[_i(w,"display")]&&(c.position=_i(e,"position")),w===e&&(c.position="static"),w.appendChild(ka),E=ka[p],w.removeChild(ka),c.position="absolute";return h&&x&&(A=$a(w),A.time=Kn.time,A.width=w[p]),yr(v?E*s/m:E&&s?m/E*s:0)},Us=function(e,r,n,i){var s;return ux||Wg(),r in xs&&r!=="transform"&&(r=xs[r],~r.indexOf(",")&&(r=r.split(",")[0])),to[r]&&r!=="transform"?(s=jd(e,i),s=r!=="transformOrigin"?s[r]:s.svg?s.origin:m0(_i(e,Fn))+" "+s.zOrigin+"px"):(s=e.style[r],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=p0[r]&&p0[r](e,r,n)||_i(e,r)||TT(e,r)||(r==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ta(e,r,s,n)+n:s},qB=function(e,r,n,i){if(!n||n==="none"){var s=Pc(r,e,1),a=s&&_i(e,s,1);a&&a!==n?(r=s,n=a):r==="borderColor"&&(n=_i(e,"borderTopColor"))}var c=new Bn(this._pt,e.style,r,0,1,n3),h=0,d=0,p,m,v,x,E,w,A,N,_,C,S,O;if(c.b=n,c.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=_i(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(w=e.style[r],e.style[r]=i,i=_i(e,r)||i,w?e.style[r]=w:Ja(e,r)),p=[n,i],GT(p),n=p[0],i=p[1],v=n.match(Wl)||[],O=i.match(Wl)||[],O.length){for(;m=Wl.exec(i);)A=m[0],_=i.substring(h,m.index),E?E=(E+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(E=1),A!==(w=v[d++]||"")&&(x=parseFloat(w)||0,S=w.substr((x+"").length),A.charAt(1)==="="&&(A=sc(x,A)+S),N=parseFloat(A),C=A.substr((N+"").length),h=Wl.lastIndex-C.length,C||(C=C||ni.units[r]||S,h===i.length&&(i+=C,c.e+=C)),S!==C&&(x=ta(e,r,w,C)||0),c._pt={_next:c._pt,p:_||d===1?_:",",s:x,c:N-x,m:E&&E<4||r==="zIndex"?Math.round:0});c.c=h<i.length?i.substring(h,i.length):""}else c.r=r==="display"&&i==="none"?a3:o3;return _T.test(i)&&(c.e=0),this._pt=c,c},q2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},WB=function(e){var r=e.split(" "),n=r[0],i=r[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),r[0]=q2[n]||n,r[1]=q2[i]||i,r.join(" ")},GB=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var n=r.t,i=n.style,s=r.u,a=n._gsap,c,h,d;if(s==="all"||s===!0)i.cssText="",h=1;else for(s=s.split(","),d=s.length;--d>-1;)c=s[d],to[c]&&(h=1,c=c==="transformOrigin"?Fn:ir),Ja(n,c);h&&(Ja(n,ir),a&&(a.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",jd(n,1),a.uncache=1,l3(i)))}},p0={clearProps:function(e,r,n,i,s){if(s.data!=="isFromStart"){var a=e._pt=new Bn(e._pt,r,n,0,0,GB);return a.u=i,a.pr=-10,a.tween=s,e._props.push(n),1}}},kd=[1,0,0,1,0,0],h3={},p3=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},W2=function(e){var r=_i(e,ir);return p3(r)?kd:r.substr(7).match(bT).map(yr)},hx=function(e,r){var n=e._gsap||$a(e),i=e.style,s=W2(e),a,c,h,d;return n.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,s=[h.a,h.b,h.c,h.d,h.e,h.f],s.join(",")==="1,0,0,1,0,0"?kd:s):(s===kd&&!e.offsetParent&&e!==oc&&!n.svg&&(h=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(d=1,c=e.nextElementSibling,oc.appendChild(e)),s=W2(e),h?i.display=h:Ja(e,"display"),d&&(c?a.insertBefore(e,c):a?a.appendChild(e):oc.removeChild(e))),r&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Gg=function(e,r,n,i,s,a){var c=e._gsap,h=s||hx(e,!0),d=c.xOrigin||0,p=c.yOrigin||0,m=c.xOffset||0,v=c.yOffset||0,x=h[0],E=h[1],w=h[2],A=h[3],N=h[4],_=h[5],C=r.split(" "),S=parseFloat(C[0])||0,O=parseFloat(C[1])||0,D,M,R,k;n?h!==kd&&(M=x*A-E*w)&&(R=S*(A/M)+O*(-w/M)+(w*_-A*N)/M,k=S*(-E/M)+O*(x/M)-(x*_-E*N)/M,S=R,O=k):(D=d3(e),S=D.x+(~C[0].indexOf("%")?S/100*D.width:S),O=D.y+(~(C[1]||C[0]).indexOf("%")?O/100*D.height:O)),i||i!==!1&&c.smooth?(N=S-d,_=O-p,c.xOffset=m+(N*x+_*w)-N,c.yOffset=v+(N*E+_*A)-_):c.xOffset=c.yOffset=0,c.xOrigin=S,c.yOrigin=O,c.smooth=!!i,c.origin=r,c.originIsAbsolute=!!n,e.style[Fn]="0px 0px",a&&(Do(a,c,"xOrigin",d,S),Do(a,c,"yOrigin",p,O),Do(a,c,"xOffset",m,c.xOffset),Do(a,c,"yOffset",v,c.yOffset)),e.setAttribute("data-svg-origin",S+" "+O)},jd=function(e,r){var n=e._gsap||new QT(e);if("x"in n&&!r&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,a="px",c="deg",h=getComputedStyle(e),d=_i(e,Fn)||"0",p,m,v,x,E,w,A,N,_,C,S,O,D,M,R,k,L,B,F,H,z,$,ee,J,te,Y,K,V,G,Z,se,ae;return p=m=v=w=A=N=_=C=S=0,x=E=1,n.svg=!!(e.getCTM&&f3(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(i[ir]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[ir]!=="none"?h[ir]:"")),i.scale=i.rotate=i.translate="none"),M=hx(e,n.svg),n.svg&&(n.uncache?(te=e.getBBox(),d=n.xOrigin-te.x+"px "+(n.yOrigin-te.y)+"px",J=""):J=!r&&e.getAttribute("data-svg-origin"),Gg(e,J||d,!!J||n.originIsAbsolute,n.smooth!==!1,M)),O=n.xOrigin||0,D=n.yOrigin||0,M!==kd&&(B=M[0],F=M[1],H=M[2],z=M[3],p=$=M[4],m=ee=M[5],M.length===6?(x=Math.sqrt(B*B+F*F),E=Math.sqrt(z*z+H*H),w=B||F?Nl(F,B)*Sa:0,_=H||z?Nl(H,z)*Sa+w:0,_&&(E*=Math.abs(Math.cos(_*ac))),n.svg&&(p-=O-(O*B+D*H),m-=D-(O*F+D*z))):(ae=M[6],Z=M[7],K=M[8],V=M[9],G=M[10],se=M[11],p=M[12],m=M[13],v=M[14],R=Nl(ae,G),A=R*Sa,R&&(k=Math.cos(-R),L=Math.sin(-R),J=$*k+K*L,te=ee*k+V*L,Y=ae*k+G*L,K=$*-L+K*k,V=ee*-L+V*k,G=ae*-L+G*k,se=Z*-L+se*k,$=J,ee=te,ae=Y),R=Nl(-H,G),N=R*Sa,R&&(k=Math.cos(-R),L=Math.sin(-R),J=B*k-K*L,te=F*k-V*L,Y=H*k-G*L,se=z*L+se*k,B=J,F=te,H=Y),R=Nl(F,B),w=R*Sa,R&&(k=Math.cos(R),L=Math.sin(R),J=B*k+F*L,te=$*k+ee*L,F=F*k-B*L,ee=ee*k-$*L,B=J,$=te),A&&Math.abs(A)+Math.abs(w)>359.9&&(A=w=0,N=180-N),x=yr(Math.sqrt(B*B+F*F+H*H)),E=yr(Math.sqrt(ee*ee+ae*ae)),R=Nl($,ee),_=Math.abs(R)>2e-4?R*Sa:0,S=se?1/(se<0?-se:se):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!p3(_i(e,ir)),J&&e.setAttribute("transform",J))),Math.abs(_)>90&&Math.abs(_)<270&&(s?(x*=-1,_+=w<=0?180:-180,w+=w<=0?180:-180):(E*=-1,_+=_<=0?180:-180)),r=r||n.uncache,n.x=p-((n.xPercent=p&&(!r&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-p)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=m-((n.yPercent=m&&(!r&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=v+a,n.scaleX=yr(x),n.scaleY=yr(E),n.rotation=yr(w)+c,n.rotationX=yr(A)+c,n.rotationY=yr(N)+c,n.skewX=_+c,n.skewY=C+c,n.transformPerspective=S+a,(n.zOrigin=parseFloat(d.split(" ")[2])||!r&&n.zOrigin||0)&&(i[Fn]=m0(d)),n.xOffset=n.yOffset=0,n.force3D=ni.force3D,n.renderTransform=n.svg?KB:u3?m3:YB,n.uncache=0,n},m0=function(e){return(e=e.split(" "))[0]+" "+e[1]},Zm=function(e,r,n){var i=ln(r);return yr(parseFloat(r)+parseFloat(ta(e,"x",n+"px",i)))+i},YB=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,m3(e,r)},xa="0deg",_u="0px",wa=") ",m3=function(e,r){var n=r||this,i=n.xPercent,s=n.yPercent,a=n.x,c=n.y,h=n.z,d=n.rotation,p=n.rotationY,m=n.rotationX,v=n.skewX,x=n.skewY,E=n.scaleX,w=n.scaleY,A=n.transformPerspective,N=n.force3D,_=n.target,C=n.zOrigin,S="",O=N==="auto"&&e&&e!==1||N===!0;if(C&&(m!==xa||p!==xa)){var D=parseFloat(p)*ac,M=Math.sin(D),R=Math.cos(D),k;D=parseFloat(m)*ac,k=Math.cos(D),a=Zm(_,a,M*k*-C),c=Zm(_,c,-Math.sin(D)*-C),h=Zm(_,h,R*k*-C+C)}A!==_u&&(S+="perspective("+A+wa),(i||s)&&(S+="translate("+i+"%, "+s+"%) "),(O||a!==_u||c!==_u||h!==_u)&&(S+=h!==_u||O?"translate3d("+a+", "+c+", "+h+") ":"translate("+a+", "+c+wa),d!==xa&&(S+="rotate("+d+wa),p!==xa&&(S+="rotateY("+p+wa),m!==xa&&(S+="rotateX("+m+wa),(v!==xa||x!==xa)&&(S+="skew("+v+", "+x+wa),(E!==1||w!==1)&&(S+="scale("+E+", "+w+wa),_.style[ir]=S||"translate(0, 0)"},KB=function(e,r){var n=r||this,i=n.xPercent,s=n.yPercent,a=n.x,c=n.y,h=n.rotation,d=n.skewX,p=n.skewY,m=n.scaleX,v=n.scaleY,x=n.target,E=n.xOrigin,w=n.yOrigin,A=n.xOffset,N=n.yOffset,_=n.forceCSS,C=parseFloat(a),S=parseFloat(c),O,D,M,R,k;h=parseFloat(h),d=parseFloat(d),p=parseFloat(p),p&&(p=parseFloat(p),d+=p,h+=p),h||d?(h*=ac,d*=ac,O=Math.cos(h)*m,D=Math.sin(h)*m,M=Math.sin(h-d)*-v,R=Math.cos(h-d)*v,d&&(p*=ac,k=Math.tan(d-p),k=Math.sqrt(1+k*k),M*=k,R*=k,p&&(k=Math.tan(p),k=Math.sqrt(1+k*k),O*=k,D*=k)),O=yr(O),D=yr(D),M=yr(M),R=yr(R)):(O=m,R=v,D=M=0),(C&&!~(a+"").indexOf("px")||S&&!~(c+"").indexOf("px"))&&(C=ta(x,"x",a,"px"),S=ta(x,"y",c,"px")),(E||w||A||N)&&(C=yr(C+E-(E*O+w*M)+A),S=yr(S+w-(E*D+w*R)+N)),(i||s)&&(k=x.getBBox(),C=yr(C+i/100*k.width),S=yr(S+s/100*k.height)),k="matrix("+O+","+D+","+M+","+R+","+C+","+S+")",x.setAttribute("transform",k),_&&(x.style[ir]=k)},XB=function(e,r,n,i,s){var a=360,c=Vr(s),h=parseFloat(s)*(c&&~s.indexOf("rad")?Sa:1),d=h-i,p=i+d+"deg",m,v;return c&&(m=s.split("_")[1],m==="short"&&(d%=a,d!==d%(a/2)&&(d+=d<0?a:-a)),m==="cw"&&d<0?d=(d+a*U2)%a-~~(d/a)*a:m==="ccw"&&d>0&&(d=(d-a*U2)%a-~~(d/a)*a)),e._pt=v=new Bn(e._pt,r,n,i,d,jB),v.e=p,v.u="deg",e._props.push(n),v},G2=function(e,r){for(var n in r)e[n]=r[n];return e},QB=function(e,r,n){var i=G2({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,c,h,d,p,m,v,x,E;i.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),a[ir]=r,c=jd(n,1),Ja(n,ir),n.setAttribute("transform",d)):(d=getComputedStyle(n)[ir],a[ir]=r,c=jd(n,1),a[ir]=d);for(h in to)d=i[h],p=c[h],d!==p&&s.indexOf(h)<0&&(x=ln(d),E=ln(p),m=x!==E?ta(n,h,d,E):parseFloat(d),v=parseFloat(p),e._pt=new Bn(e._pt,c,h,m,v-m,Vg),e._pt.u=E||0,e._props.push(h));G2(c,i)};Ln("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map(function(c){return e<2?t+c:"border"+c+t});p0[e>1?"border"+t:t]=function(c,h,d,p,m){var v,x;if(arguments.length<4)return v=a.map(function(E){return Us(c,E,d)}),x=v.join(" "),x.split(v[0]).length===5?v[0]:x;v=(p+"").split(" "),x={},a.forEach(function(E,w){return x[E]=v[w]=v[w]||v[(w-1)/2|0]}),c.init(h,x,m)}});var g3={name:"css",register:Wg,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,n,i,s){var a=this._props,c=e.style,h=n.vars.startAt,d,p,m,v,x,E,w,A,N,_,C,S,O,D,M,R;ux||Wg(),this.styles=this.styles||c3(e),R=this.styles.props,this.tween=n;for(w in r)if(w!=="autoRound"&&(p=r[w],!(qn[w]&&ZT(w,r,n,i,e,s)))){if(x=typeof p,E=p0[w],x==="function"&&(p=p.call(n,i,e,s),x=typeof p),x==="string"&&~p.indexOf("random(")&&(p=Od(p)),E)E(this,e,w,p,n)&&(M=1);else if(w.substr(0,2)==="--")d=(getComputedStyle(e).getPropertyValue(w)+"").trim(),p+="",Yo.lastIndex=0,Yo.test(d)||(A=ln(d),N=ln(p)),N?A!==N&&(d=ta(e,w,d,N)+N):A&&(p+=A),this.add(c,"setProperty",d,p,i,s,0,0,w),a.push(w),R.push(w,0,c[w]);else if(x!=="undefined"){if(h&&w in h?(d=typeof h[w]=="function"?h[w].call(n,i,e,s):h[w],Vr(d)&&~d.indexOf("random(")&&(d=Od(d)),ln(d+"")||d==="auto"||(d+=ni.units[w]||ln(Us(e,w))||""),(d+"").charAt(1)==="="&&(d=Us(e,w))):d=Us(e,w),v=parseFloat(d),_=x==="string"&&p.charAt(1)==="="&&p.substr(0,2),_&&(p=p.substr(2)),m=parseFloat(p),w in xs&&(w==="autoAlpha"&&(v===1&&Us(e,"visibility")==="hidden"&&m&&(v=0),R.push("visibility",0,c.visibility),Do(this,c,"visibility",v?"inherit":"hidden",m?"inherit":"hidden",!m)),w!=="scale"&&w!=="transform"&&(w=xs[w],~w.indexOf(",")&&(w=w.split(",")[0]))),C=w in to,C){if(this.styles.save(w),x==="string"&&p.substring(0,6)==="var(--"&&(p=_i(e,p.substring(4,p.indexOf(")"))),m=parseFloat(p)),S||(O=e._gsap,O.renderTransform&&!r.parseTransform||jd(e,r.parseTransform),D=r.smoothOrigin!==!1&&O.smooth,S=this._pt=new Bn(this._pt,c,ir,0,1,O.renderTransform,O,0,-1),S.dep=1),w==="scale")this._pt=new Bn(this._pt,O,"scaleY",O.scaleY,(_?sc(O.scaleY,_+m):m)-O.scaleY||0,Vg),this._pt.u=0,a.push("scaleY",w),w+="X";else if(w==="transformOrigin"){R.push(Fn,0,c[Fn]),p=WB(p),O.svg?Gg(e,p,0,D,0,this):(N=parseFloat(p.split(" ")[2])||0,N!==O.zOrigin&&Do(this,O,"zOrigin",O.zOrigin,N),Do(this,c,w,m0(d),m0(p)));continue}else if(w==="svgOrigin"){Gg(e,p,1,D,0,this);continue}else if(w in h3){XB(this,O,w,v,_?sc(v,_+p):p);continue}else if(w==="smoothOrigin"){Do(this,O,"smooth",O.smooth,p);continue}else if(w==="force3D"){O[w]=p;continue}else if(w==="transform"){QB(this,p,e);continue}}else w in c||(w=Pc(w)||w);if(C||(m||m===0)&&(v||v===0)&&!kB.test(p)&&w in c)A=(d+"").substr((v+"").length),m||(m=0),N=ln(p)||(w in ni.units?ni.units[w]:A),A!==N&&(v=ta(e,w,d,N)),this._pt=new Bn(this._pt,C?O:c,w,v,(_?sc(v,_+m):m)-v,!C&&(N==="px"||w==="zIndex")&&r.autoRound!==!1?PB:Vg),this._pt.u=N||0,A!==N&&N!=="%"&&(this._pt.b=d,this._pt.r=MB);else if(w in c)qB.call(this,e,w,d,_?_+p:p);else if(w in e)this.add(e,w,d||e[w],_?_+p:p,i,s);else if(w!=="parseTransform"){ex(w,p);continue}C||(w in c?R.push(w,0,c[w]):typeof e[w]=="function"?R.push(w,2,e[w]()):R.push(w,1,d||e[w])),a.push(w)}}M&&i3(this)},render:function(e,r){if(r.tween._time||!dx())for(var n=r._pt;n;)n.r(e,n.d),n=n._next;else r.styles.revert()},get:Us,aliases:xs,getSetter:function(e,r,n){var i=xs[r];return i&&i.indexOf(",")<0&&(r=i),r in to&&r!==Fn&&(e._gsap.x||Us(e,"x"))?n&&F2===n?r==="scale"?FB:BB:(F2=n||{})&&(r==="scale"?UB:zB):e.style&&!Qy(e.style[r])?DB:~r.indexOf("-")?LB:lx(e,r)},core:{_removeProperty:Ja,_getMatrix:hx}};Un.utils.checkPrefix=Pc;Un.core.getStyleSaver=c3;(function(t,e,r,n){var i=Ln(t+","+e+","+r,function(s){to[s]=1});Ln(e,function(s){ni.units[s]="deg",h3[s]=1}),xs[i[13]]=t+","+e,Ln(n,function(s){var a=s.split(":");xs[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ln("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){ni.units[t]="px"});Un.registerPlugin(g3);var Bs=Un.registerPlugin(g3)||Un;Bs.core.Tween;const px="/ALAN_NEW/assets/ALANLOGO-CiZZgqjV.png",ZB="/ALAN_NEW/assets/onbarding1-DYox49Gq.png",JB="/ALAN_NEW/assets/onbarding2-vDKFdda2.png",eF="/ALAN_NEW/assets/onbarding3-D_6Pmr_M.png",Eu=[{title:"Discover Premium Dining",description:"Browse the finest restaurants in Yangon with detailed menus and exclusive offerings",image:ZB},{title:"Prepay with Ease",description:"Secure your table and meals in advance with convenient payment options",image:JB},{title:"Skip the Wait",description:"Show your QR code and enjoy your meal immediately upon arrival",image:eF}],tF=()=>{const[t,e]=j.useState(0),r=qr(),n=j.useRef(null),i=j.useRef(null),s=j.useRef(null),a=j.useRef(null);j.useEffect(()=>{if(!n.current)return;const p=Bs.timeline();return p.fromTo(i.current,{opacity:0,y:10,scale:.98},{opacity:1,y:0,scale:1,duration:.4,ease:"power2.out"}).fromTo(s.current,{opacity:0,y:12},{opacity:1,y:0,duration:.45,ease:"power2.out"},"-=0.15").fromTo(a.current,{opacity:0,y:16,rotate:-2},{opacity:1,y:0,rotate:0,duration:.5,ease:"power2.out"},"-=0.2"),()=>{p.kill()}},[t]);const c=()=>{t<Eu.length-1?e(t+1):r("/auth")},h=()=>{r("/auth")},d=Eu[t];return f.jsxs("div",{ref:n,className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col",children:[f.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12",children:f.jsxs("div",{className:"w-full max-w-md space-y-8",children:[f.jsx("div",{className:"flex justify-center",ref:i,children:f.jsx("div",{className:"w-28 h-28 sm:w-32 sm:h-32 rounded-full luxury-gradient flex items-center justify-center luxury-shadow overflow-hidden",children:f.jsx("img",{src:px,alt:"ALAN Logo",className:"w-16 h-16 object-contain drop-shadow"})})}),f.jsxs("div",{className:"text-center space-y-4",ref:s,children:[f.jsx("h1",{className:"text-3xl font-bold text-foreground",children:d.title}),f.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:d.description})]}),f.jsx("div",{className:"flex justify-center",ref:a,children:f.jsx("div",{className:"w-full flex items-center justify-center",children:f.jsx("img",{src:d.image,alt:"Onboarding illustration",className:"max-h-56 sm:max-h-64 object-contain"})})}),f.jsx("div",{className:"flex justify-center gap-2",children:Eu.map((p,m)=>f.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m===t?"w-8 bg-primary":"w-2 bg-muted"}`},m))})]})}),f.jsxs("div",{className:"p-6 space-y-3 max-w-md mx-auto w-full",children:[f.jsxs(De,{onClick:c,className:"w-full h-12 text-base font-medium luxury-gradient",size:"lg",children:[t<Eu.length-1?"Next":"Get Started",f.jsx(JC,{className:"ml-2 h-5 w-5"})]}),t<Eu.length-1&&f.jsx(De,{onClick:h,variant:"ghost",className:"w-full h-12 text-base font-medium",size:"lg",children:"Skip"})]})]})},mt=j.forwardRef(({className:t,type:e,...r},n)=>f.jsx("input",{type:e,className:Be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));mt.displayName="Input";var rF="Label",v3=j.forwardRef((t,e)=>f.jsx(We.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));v3.displayName=rF;var y3=v3;const nF=Q0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),it=j.forwardRef(({className:t,...e},r)=>f.jsx(y3,{ref:r,className:Be(nF(),t),...e}));it.displayName=y3.displayName;const qe=j.forwardRef(({className:t,...e},r)=>f.jsx("div",{ref:r,className:Be("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));qe.displayName="Card";const mr=j.forwardRef(({className:t,...e},r)=>f.jsx("div",{ref:r,className:Be("flex flex-col space-y-1.5 p-6",t),...e}));mr.displayName="CardHeader";const wr=j.forwardRef(({className:t,...e},r)=>f.jsx("h3",{ref:r,className:Be("text-2xl font-semibold leading-none tracking-tight",t),...e}));wr.displayName="CardTitle";const Vs=j.forwardRef(({className:t,...e},r)=>f.jsx("p",{ref:r,className:Be("text-sm text-muted-foreground",t),...e}));Vs.displayName="CardDescription";const It=j.forwardRef(({className:t,...e},r)=>f.jsx("div",{ref:r,className:Be("p-6 pt-0",t),...e}));It.displayName="CardContent";const iF=j.forwardRef(({className:t,...e},r)=>f.jsx("div",{ref:r,className:Be("flex items-center p-6 pt-0",t),...e}));iF.displayName="CardFooter";var sF=j.createContext(void 0);function Yc(t){const e=j.useContext(sF);return t||e||"ltr"}var Jm="rovingFocusGroup.onEntryFocus",oF={bubbles:!1,cancelable:!0},Zd="RovingFocusGroup",[Yg,x3,aF]=Y0(Zd),[lF,Kc]=En(Zd,[aF]),[cF,uF]=lF(Zd),w3=j.forwardRef((t,e)=>f.jsx(Yg.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Yg.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(dF,{...t,ref:e})})}));w3.displayName=Zd;var dF=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:h,onEntryFocus:d,preventScrollOnEntryFocus:p=!1,...m}=t,v=j.useRef(null),x=ot(e,v),E=Yc(s),[w,A]=Ss({prop:a,defaultProp:c??null,onChange:h,caller:Zd}),[N,_]=j.useState(!1),C=pr(d),S=x3(r),O=j.useRef(!1),[D,M]=j.useState(0);return j.useEffect(()=>{const R=v.current;if(R)return R.addEventListener(Jm,C),()=>R.removeEventListener(Jm,C)},[C]),f.jsx(cF,{scope:r,orientation:n,dir:E,loop:i,currentTabStopId:w,onItemFocus:j.useCallback(R=>A(R),[A]),onItemShiftTab:j.useCallback(()=>_(!0),[]),onFocusableItemAdd:j.useCallback(()=>M(R=>R+1),[]),onFocusableItemRemove:j.useCallback(()=>M(R=>R-1),[]),children:f.jsx(We.div,{tabIndex:N||D===0?-1:0,"data-orientation":n,...m,ref:x,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{O.current=!0}),onFocus:Pe(t.onFocus,R=>{const k=!O.current;if(R.target===R.currentTarget&&k&&!N){const L=new CustomEvent(Jm,oF);if(R.currentTarget.dispatchEvent(L),!L.defaultPrevented){const B=S().filter(ee=>ee.focusable),F=B.find(ee=>ee.active),H=B.find(ee=>ee.id===w),$=[F,H,...B].filter(Boolean).map(ee=>ee.ref.current);E3($,p)}}O.current=!1}),onBlur:Pe(t.onBlur,()=>_(!1))})})}),b3="RovingFocusGroupItem",_3=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:a,...c}=t,h=Xi(),d=s||h,p=uF(b3,r),m=p.currentTabStopId===d,v=x3(r),{onFocusableItemAdd:x,onFocusableItemRemove:E,currentTabStopId:w}=p;return j.useEffect(()=>{if(n)return x(),()=>E()},[n,x,E]),f.jsx(Yg.ItemSlot,{scope:r,id:d,focusable:n,active:i,children:f.jsx(We.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:Pe(t.onMouseDown,A=>{n?p.onItemFocus(d):A.preventDefault()}),onFocus:Pe(t.onFocus,()=>p.onItemFocus(d)),onKeyDown:Pe(t.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){p.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const N=pF(A,p.orientation,p.dir);if(N!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let C=v().filter(S=>S.focusable).map(S=>S.ref.current);if(N==="last")C.reverse();else if(N==="prev"||N==="next"){N==="prev"&&C.reverse();const S=C.indexOf(A.currentTarget);C=p.loop?mF(C,S+1):C.slice(S+1)}setTimeout(()=>E3(C))}}),children:typeof a=="function"?a({isCurrentTabStop:m,hasTabStop:w!=null}):a})})});_3.displayName=b3;var fF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pF(t,e,r){const n=hF(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return fF[n]}function E3(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function mF(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var mx=w3,gx=_3,hp="Tabs",[gF,_Q]=En(hp,[Kc]),S3=Kc(),[vF,vx]=gF(hp),C3=j.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:h="automatic",...d}=t,p=Yc(c),[m,v]=Ss({prop:n,onChange:i,defaultProp:s??"",caller:hp});return f.jsx(vF,{scope:r,baseId:Xi(),value:m,onValueChange:v,orientation:a,dir:p,activationMode:h,children:f.jsx(We.div,{dir:p,"data-orientation":a,...d,ref:e})})});C3.displayName=hp;var A3="TabsList",N3=j.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,s=vx(A3,r),a=S3(r);return f.jsx(mx,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:f.jsx(We.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});N3.displayName=A3;var T3="TabsTrigger",O3=j.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=t,a=vx(T3,r),c=S3(r),h=k3(a.baseId,n),d=j3(a.baseId,n),p=n===a.value;return f.jsx(gx,{asChild:!0,...c,focusable:!i,active:p,children:f.jsx(We.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...s,ref:e,onMouseDown:Pe(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?a.onValueChange(n):m.preventDefault()}),onKeyDown:Pe(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(n)}),onFocus:Pe(t.onFocus,()=>{const m=a.activationMode!=="manual";!p&&!i&&m&&a.onValueChange(n)})})})});O3.displayName=T3;var I3="TabsContent",R3=j.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=t,c=vx(I3,r),h=k3(c.baseId,n),d=j3(c.baseId,n),p=n===c.value,m=j.useRef(p);return j.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),f.jsx(dn,{present:i||p,children:({present:v})=>f.jsx(We.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:v&&s})})});R3.displayName=I3;function k3(t,e){return`${t}-trigger-${e}`}function j3(t,e){return`${t}-content-${e}`}var yF=C3,M3=N3,P3=O3,D3=R3;const L3=yF,yx=j.forwardRef(({className:t,...e},r)=>f.jsx(M3,{ref:r,className:Be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));yx.displayName=M3.displayName;const Md=j.forwardRef(({className:t,...e},r)=>f.jsx(P3,{ref:r,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=inactive]:text-muted-foreground/70 data-[state=inactive]:hover:text-muted-foreground",t),...e}));Md.displayName=P3.displayName;const Kg=j.forwardRef(({className:t,...e},r)=>f.jsx(D3,{ref:r,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=inactive]:hidden",t),...e}));Kg.displayName=D3.displayName;const xF=()=>{const[t,e]=j.useState(!1),{signUp:r,signIn:n,user:i,userRole:s}=Wr(),a=qr(),[c,h]=j.useState("signin"),d=j.useRef(null),p=j.useRef(null),m=j.useRef(null);j.useRef(null),j.useEffect(()=>{Bs.timeline({defaults:{ease:"power2.out"}}).fromTo(d.current,{opacity:0,y:-12,scale:.92},{opacity:1,y:0,scale:1,duration:.5}).fromTo(p.current,{opacity:0,y:16},{opacity:1,y:0,duration:.5},"-=0.25")},[]),j.useEffect(()=>{const _=m.current;if(!_)return;const C=_.querySelector('[data-state="active"]');if(!C)return;const S=C.scrollHeight,O=_.offsetHeight;Bs.set(_,{height:O}),Bs.to(_,{height:S,duration:.45,ease:"power2.out",onComplete:()=>Bs.set(_,{height:"auto"})}),Bs.fromTo(C,{opacity:0,y:8},{opacity:1,y:0,duration:.35,ease:"power2.out"})},[c]),j.useEffect(()=>{const _=m.current;if(!_)return;const C=_.querySelector('[data-state="active"]');C&&(Bs.set(_,{height:C.scrollHeight}),Bs.set(_,{height:"auto"}))},[]),j.useEffect(()=>{i&&s&&a(s==="admin"?"/admin":s==="restaurant_owner"?"/dashboard":"/home")},[i,s,a]);const[v,x]=j.useState({email:"",password:"",fullName:"",phone:""}),[E,w]=j.useState({email:"",password:""}),A=async _=>{_.preventDefault(),e(!0);const{error:C}=await r(v.email,v.password,v.fullName,v.phone);C?ke.error(C.message||"Failed to sign up"):(ke.success("Account created! Welcome to ALAN"),a("/home")),e(!1)},N=async _=>{_.preventDefault(),e(!0);const{error:C}=await n(E.email,E.password);C?ke.error(C.message||"Failed to sign in"):ke.success("Signing in..."),e(!1)};return f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:f.jsxs("div",{className:"w-full max-w-md space-y-6",children:[f.jsxs("div",{className:"text-center space-y-2",ref:d,children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center overflow-hidden",children:f.jsx("img",{src:px,alt:"ALAN Logo",className:"w-10 h-10 object-contain drop-shadow"})})}),f.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ALAN"}),f.jsx("p",{className:"text-muted-foreground",children:"Luxury dining made simple"})]}),f.jsxs(qe,{className:"border-border/50 luxury-shadow",ref:p,children:[f.jsxs(mr,{children:[f.jsx(wr,{children:"Welcome"}),f.jsx(Vs,{children:"Sign in or create an account to continue"})]}),f.jsx(It,{className:"px-6 pt-2 pb-6",children:f.jsxs(L3,{value:c,onValueChange:_=>h(_),className:"w-full",children:[f.jsxs(yx,{className:"grid w-full grid-cols-2",children:[f.jsx(Md,{value:"signin",children:"Sign In"}),f.jsx(Md,{value:"signup",children:"Sign Up"})]}),f.jsxs("div",{ref:m,className:"relative overflow-visible box-border px-3 sm:px-4 pb-5",children:[f.jsx(Kg,{value:"signin",forceMount:!0,children:f.jsxs("form",{onSubmit:N,className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signin-email",children:"Email"}),f.jsx(mt,{id:"signin-email",type:"email",placeholder:"your@email.com",value:E.email,onChange:_=>w({...E,email:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signin-password",children:"Password"}),f.jsx(mt,{id:"signin-password",type:"password",placeholder:"",value:E.password,onChange:_=>w({...E,password:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsx(De,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Signing in...":"Sign In"})]})}),f.jsx(Kg,{value:"signup",forceMount:!0,children:f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signup-name",children:"Full Name"}),f.jsx(mt,{id:"signup-name",type:"text",placeholder:"John Doe",value:v.fullName,onChange:_=>x({...v,fullName:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signup-phone",children:"Phone"}),f.jsx(mt,{id:"signup-phone",type:"tel",placeholder:"+95 9 XXX XXX XXX",value:v.phone,onChange:_=>x({...v,phone:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signup-email",children:"Email"}),f.jsx(mt,{id:"signup-email",type:"email",placeholder:"your@email.com",value:v.email,onChange:_=>x({...v,email:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"signup-password",children:"Password"}),f.jsx(mt,{id:"signup-password",type:"password",placeholder:"",value:v.password,onChange:_=>x({...v,password:_.target.value}),required:!0,className:"h-12 px-4"})]}),f.jsx(De,{type:"submit",className:"w-full luxury-gradient",disabled:t,children:t?"Creating account...":"Create Account"})]})})]})]})})]})]})})},wF=Q0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function br({className:t,variant:e,...r}){return f.jsx("div",{className:Be(wF({variant:e}),t),...r})}const pp=()=>{const t=Is(),e=r=>t.pathname===r;return f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card/95 border-t border-border glass-effect z-50 backdrop-blur-xl",children:f.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[f.jsxs(Ff,{to:"/home",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/home")?"text-primary":"text-muted-foreground"}`,children:[f.jsx(iA,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),f.jsxs(Ff,{to:"/orders",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/orders")?"text-primary":"text-muted-foreground"}`,children:[f.jsx(aA,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),f.jsxs(Ff,{to:"/blog",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/blog")?"text-primary":"text-muted-foreground"}`,children:[f.jsx(my,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),f.jsxs(Ff,{to:"/profile",className:`flex flex-col items-center justify-center flex-1 transition-colors ${e("/profile")?"text-primary":"text-muted-foreground"}`,children:[f.jsx(Gi,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})},bF=(t,e)=>{if(!t||e<=0)return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"};switch(t){case"Explorer":return{label:"Explorer",description:"You are discovering new places. Keep exploring.",icon:"compass"};case"Preferred":return{label:"Preferred",description:"A valued guest with consistent fine dining choices.",icon:"star"};case"Loyal Customer":return{label:"Loyal Customer",description:"One of our most loyal guests. Thank you for dining with us.",icon:"shield"};case"Super Customer":return{label:"Super Customer",description:"Elite status. Enjoy priority perks and curated experiences.",icon:"crown"};default:return{label:"Newbie",description:"Start your journey and unlock exclusive dining perks.",icon:"sparkles"}}};function xx(){const{user:t}=Wr(),[e,r]=j.useState(null),[n,i]=j.useState(!0);j.useEffect(()=>{(async()=>{if(!t){r(null),i(!1);return}i(!0);const{data:c,error:h}=await be.from("customer_loyalty_summary").select("*").eq("customer_id",t.id).maybeSingle();if(!h&&c){r({customer_id:c.customer_id,total_points:Number(c.total_points)||0,total_completed_orders:Number(c.total_completed_orders)||0,total_spent:Number(c.total_spent)||0,current_badge:c.current_badge||"Newbie",updated_at:c.updated_at}),i(!1);return}const{data:d,error:p}=await be.from("orders").select("total_amount, status").eq("customer_id",t.id).eq("status","completed");if(p){console.error("Failed to load loyalty summary:",p),r(null),i(!1);return}const m=(d||[]).reduce((A,N)=>A+(Number(N.total_amount)||0),0),v=(d==null?void 0:d.length)||0,x=Math.floor(m/1e5);let E;v<=0?E="Newbie":v<=4?E="Explorer":v<=9?E="Preferred":v<=29?E="Loyal Customer":E="Super Customer";const w=new Date().toISOString();r({customer_id:t.id,total_points:x,total_completed_orders:v,total_spent:m,current_badge:E,updated_at:w}),i(!1)})()},[t]);const s=bF(e==null?void 0:e.current_badge,(e==null?void 0:e.total_completed_orders)||0);return{loading:n,summary:e,badgeLabel:s.label,badgeDescription:s.description,badgeIcon:s.icon}}function _F({restaurants:t}){const e=qr(),r=j.useRef(null),n=j.useRef(0),i=j.useRef(null),s=(t||[]).filter(a=>a.image).slice(0,20);return j.useEffect(()=>{const a=r.current;if(!a||s.length===0)return;let c=!1,h=0,d=0,p=0,m=0,v=1,x=performance.now();const E=()=>a.scrollWidth-a.clientWidth,w=()=>{const k=E();a.scrollLeft<0&&(a.scrollLeft=0),a.scrollLeft>k&&(a.scrollLeft=k)},A=()=>{i.current!==null&&(cancelAnimationFrame(i.current),i.current=null)},N=()=>{const k=r.current;if(!k){i.current=null;return}const L=performance.now(),B=L-x;x=L;let F=n.current;if(Math.abs(F)>=.02)k.scrollLeft+=F,w(),F*=.95,n.current=F;else if(n.current=0,!c){const H=E();if(H>0){const $=.02*B*v;k.scrollLeft+=$,k.scrollLeft<=0?(k.scrollLeft=0,v=1):k.scrollLeft>=H&&(k.scrollLeft=H,v=-1)}}i.current=requestAnimationFrame(N)};A(),x=performance.now(),i.current=requestAnimationFrame(N);const _=k=>{c=!0,A(),h=k.pageX,p=k.pageX,d=a.scrollLeft,m=performance.now(),a.classList.add("cursor-grabbing")},C=k=>{if(c&&(c=!1,a.classList.remove("cursor-grabbing"),w(),k!==null)){const L=performance.now(),B=k-p,F=L-m||1;let H=-(B/F)*12;H>40&&(H=40),H<-40&&(H=-40),n.current=H}},S=k=>{C(k.pageX)},O=k=>{if(!c)return;k.preventDefault();const L=k.pageX-h;a.scrollLeft=d-L;const B=performance.now();p=k.pageX,m=B},D=k=>{if(!k.touches[0])return;c=!0,A();const L=k.touches[0].pageX;h=L,p=L,d=a.scrollLeft,m=performance.now()},M=k=>{const L=k.changedTouches&&k.changedTouches[0]?k.changedTouches[0].pageX:null;C(L)},R=k=>{if(!c||!k.touches[0])return;const L=k.touches[0].pageX,B=L-h;a.scrollLeft=d-B;const F=performance.now();p=L,m=F};return a.addEventListener("mousedown",_),window.addEventListener("mouseup",S),a.addEventListener("mouseleave",S),a.addEventListener("mousemove",O),a.addEventListener("touchstart",D,{passive:!0}),a.addEventListener("touchend",M),a.addEventListener("touchcancel",M),a.addEventListener("touchmove",R,{passive:!1}),()=>{a.removeEventListener("mousedown",_),window.removeEventListener("mouseup",S),a.removeEventListener("mouseleave",S),a.removeEventListener("mousemove",O),a.removeEventListener("touchstart",D),a.removeEventListener("touchend",M),a.removeEventListener("touchcancel",M),a.removeEventListener("touchmove",R),A()}},[s.length]),s.length===0?null:f.jsxs("div",{className:"w-full mt-3 mb-4",children:[f.jsx("div",{ref:r,className:`\r
          mx-auto max-w-md px-4 flex gap-5 overflow-x-auto select-none\r
          snap-x snap-mandatory cursor-grab no-scrollbar\r
        `,style:{WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:s.map(a=>f.jsxs("button",{onClick:()=>e(`/restaurant/${a.id}`),className:"relative flex-shrink-0 snap-start group",style:{scrollSnapAlign:"start"},children:[f.jsx("div",{className:`\r
                w-20 h-20 rounded-full overflow-hidden\r
                bg-black/70 border border-yellow-500/40\r
                transition-transform duration-300 ease-out\r
                group-active:scale-95 group-hover:scale-[1.03]\r
              `,children:f.jsx("img",{src:a.image||void 0,alt:a.title,className:"w-full h-full object-cover",loading:"lazy"})}),f.jsx("div",{className:"mt-1.5 w-20 text-center",children:f.jsx("span",{className:"text-[9px] font-semibold text-black block truncate",children:a.title})})]},a.id))}),f.jsx("style",{children:`
          .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
          .no-scrollbar::-webkit-scrollbar {
            display: none;
          }
        `})]})}const EF=()=>{var G,Z,se,ae,X,ne,ue,fe;const[t,e]=j.useState(""),[r,n]=j.useState([]),[i,s]=j.useState(!0),[a,c]=j.useState(!1),[h,d]=j.useState(!1),[p,m]=j.useState([]),[v,x]=j.useState(null),[E,w]=j.useState(null),[A,N]=j.useState(null),[_,C]=j.useState(null),S=qr(),{user:O,signOut:D}=Wr(),{loading:M,summary:R,badgeLabel:k,badgeIcon:L}=xx(),B=((G=O==null?void 0:O.user_metadata)==null?void 0:G.full_name)||(O==null?void 0:O.email)||"Guest",F=()=>{const oe=new Date().getHours();return oe<12?"Good morning":oe<18?"Good afternoon":"Good evening"},H=async()=>{await D(),c(!1),S("/auth")},z=()=>{const oe="w-3.5 h-3.5 text-yellow-300 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]";switch(L){case"compass":return f.jsx(rA,{className:oe});case"star":return f.jsx(Cc,{className:oe});case"shield":return f.jsx(Xh,{className:oe});case"crown":return f.jsx(nA,{className:oe});case"sparkles":default:return f.jsx(Gd,{className:oe})}},$=async()=>{if(!O)return;const{data:oe,error:ve}=await be.from("customer_notifications").select("id, order_id, title, message, status, created_at").eq("customer_id",O.id).order("created_at",{ascending:!1}).limit(15);if(ve){console.error("Failed to load notifications",ve);return}m(oe||[])},ee=()=>{const oe=new Audio("/sound/notification.mp3");return oe.preload="auto",oe},J=()=>{try{ee().play().catch(()=>{})}catch{}};j.useEffect(()=>{if(!O){m([]);return}$();const oe=be.channel(`customer-notifications-${O.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"customer_notifications",filter:`customer_id=eq.${O.id}`},async ve=>{const Se=ve.new,Ce={id:Se.id,order_id:Se.order_id,title:Se.title,message:Se.message,status:Se.status,created_at:Se.created_at};m(Fe=>Fe.some(Ge=>Ge.id===Ce.id)?Fe:[Ce,...Fe].slice(0,20)),J()}).subscribe();return()=>{be.removeChannel(oe)}},[O==null?void 0:O.id]);const te=p.filter(oe=>oe.status==="unread").length;j.useEffect(()=>{if(!a&&!h)return;const oe=ve=>{const Se=ve.target;a&&A&&!A.contains(Se)&&c(!1),h&&_&&!_.contains(Se)&&d(!1)};return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[a,h,A,_]);const Y=async oe=>{if(typeof window<"u"&&(window.__alan_activeRatingNotificationId=oe.id,window.__alan_activeRatingNotificationOrderId=oe.order_id||null),x(oe),w(null),d(!1),oe.order_id)try{const{data:ve,error:Se}=await be.from("orders").select(`
            id,
            status,
            order_type,
            total_amount,
            created_at,
            order_items,
            restaurants (
              name,
              image_url,
              address
            )
          `).eq("id",oe.order_id).single();!Se&&ve&&w(ve)}catch(ve){console.error("Failed to load order summary for notification",ve)}if(oe.status==="unread"){m(Se=>Se.map(Ce=>Ce.id===oe.id?{...Ce,status:"read"}:Ce));const{error:ve}=await be.from("customer_notifications").update({status:"read"}).eq("id",oe.id);ve&&console.error("Failed to mark notification read",ve)}};j.useEffect(()=>{K()},[]);const K=async()=>{try{const{data:oe,error:ve}=await be.from("restaurants").select("*").order("rating",{ascending:!1});if(ve)throw ve;n(oe||[])}catch(oe){console.error("Error fetching restaurants:",oe),ke.error("Failed to load restaurants")}finally{s(!1)}},V=r.filter(oe=>{var ve;return oe.name.toLowerCase().includes(t.toLowerCase())||(((ve=oe.cuisine_type)==null?void 0:ve.toLowerCase())||"").includes(t.toLowerCase())});return f.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[f.jsx("div",{className:"sticky top-0 z-40 py-2 bg-background/60 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:f.jsxs("div",{className:"mx-auto max-w-md px-4",children:[f.jsx("div",{className:"luxury-gradient text-white rounded-xl shadow-md",children:f.jsxs("div",{className:"px-4 py-2 flex items-center justify-between gap-3",children:[f.jsx("img",{src:px,alt:"ALAN Logo",className:"h-7 w-auto object-contain drop-shadow"}),f.jsxs("div",{className:"flex items-center gap-2 relative",children:[O&&f.jsxs("div",{className:"relative",ref:oe=>C(oe),children:[f.jsxs("button",{onClick:()=>{d(oe=>!oe),c(!1)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-white/10 transition-all","aria-label":"Notifications",children:[f.jsx(XC,{className:"h-4 w-4 text-white"}),te>0&&f.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[14px] h-[14px] px-[3px] rounded-full bg-red-500 text-[9px] leading-[14px] text-white flex items-center justify-center",children:te>9?"9+":te})]}),h&&f.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[f.jsxs("div",{className:"px-3 py-2 border-b border-border/40 flex items-center justify-between gap-2",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[11px] font-semibold text-foreground",children:"Activity"}),f.jsx("span",{className:"text-[9px] text-muted-foreground",children:"Loyalty & orders"})]}),p.length>0&&f.jsx("button",{onClick:async()=>{const oe=p.filter(Se=>Se.status==="unread").map(Se=>Se.id);if(oe.length===0)return;const{error:ve}=await be.from("customer_notifications").update({status:"read"}).in("id",oe);ve?console.error("Failed to mark all read",ve):m(Se=>Se.map(Ce=>oe.includes(Ce.id)?{...Ce,status:"read"}:Ce))},className:"text-[8px] px-2 py-1 rounded-full bg-primary/5 text-primary hover:bg-primary/10",children:"Mark all as read"})]}),f.jsx("div",{className:"max-h-72 overflow-y-auto",children:p.length===0?f.jsx("div",{className:"px-3 py-4 text-[10px] text-muted-foreground",children:"No notifications yet. You will see your order and loyalty updates here."}):p.map(oe=>f.jsxs("button",{onClick:()=>Y(oe),className:`w-full px-3 py-2.5 flex items-start gap-2 hover:bg-accent/40 transition-colors ${oe.status==="unread"?"bg-primary/5":""}`,children:[f.jsx("div",{className:"mt-1 w-2 h-2",children:oe.status==="unread"?f.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):f.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:f.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[f.jsx("div",{className:`text-[9px] text-left ${oe.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}`,children:oe.message}),f.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const ve=new Date(oe.created_at),Se=String(ve.getDate()).padStart(2,"0"),Ce=String(ve.getMonth()+1).padStart(2,"0"),Fe=ve.getFullYear();let Ge=ve.getHours();const ht=String(ve.getMinutes()).padStart(2,"0"),we=Ge>=12?"PM":"AM";return Ge=Ge%12||12,`${Se}/${Ce}/${Fe} ${Ge}:${ht} ${we}`})()})]})]},oe.id))})]})]}),f.jsxs("div",{className:"relative",ref:oe=>N(oe),children:[f.jsxs("button",{onClick:()=>{c(oe=>!oe),d(!1)},className:"relative w-9 h-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/15 transition-all border border-white/20 shadow-sm","aria-label":"Profile & loyalty menu",children:[f.jsx(Gi,{className:"h-4 w-4 text-white"}),f.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 rounded-full bg-black/70 flex items-center justify-center border border-yellow-300/80 shadow-md",children:z()})]}),a&&f.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-background/95 backdrop-blur border border-border/60 rounded-2xl shadow-lg overflow-hidden z-50",children:[f.jsxs("div",{className:"px-3 py-2.5 border-b border-border/40 flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-full luxury-gradient flex items-center justify-center",children:f.jsx(Gi,{className:"w-4 h-4 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-[10px] font-semibold text-foreground truncate",children:B}),f.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:f.jsx(br,{className:"px-1.5 py-0 text-[8px] rounded-full bg-primary/10 text-primary border-primary/20",children:M?"Calculating badge...":k||"Newbie"})})]}),R&&f.jsxs("div",{className:"w-14 h-14 rounded-full bg-primary flex flex-col items-center justify-center leading-tight shadow-sm",children:[f.jsx("span",{className:"text-[14px] font-semibold text-white",children:R.total_points}),f.jsx("span",{className:"text-[8px] uppercase tracking-wide text-white/85",children:"pts"})]})]}),f.jsxs("div",{className:"py-1",children:[f.jsxs("button",{onClick:()=>{c(!1),S("/profile")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[f.jsx(Gi,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:"View profile & history"})]}),f.jsxs("button",{onClick:()=>{c(!1),S("/orders")},className:"w-full px-3 py-2 text-[10px] text-left hover:bg-accent/40 flex items-center gap-2 text-foreground",children:[f.jsx(ag,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:"My current orders"})]})]}),f.jsxs("button",{onClick:H,className:"w-full px-3 py-2.5 text-[10px] text-left text-red-500 hover:bg-red-500/5 border-t border-border/40 flex items-center gap-2",children:[f.jsx(Z0,{className:"w-3.5 h-3.5"}),f.jsx("span",{children:"Logout"})]})]})]})]})]})}),f.jsx("p",{className:"text-xs opacity-80 mt-2 text-center",children:"Discover Fine Dining with Ease and Comfort"})]})}),v&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>{x(null),w(null)},children:f.jsxs("div",{className:"w-[90%] max-w-sm bg-background rounded-2xl shadow-xl border border-border/60 p-4 space-y-3",onClick:oe=>oe.stopPropagation(),children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 border border-primary/40 flex items-center justify-center",children:v.message.includes("Please give us rating for our service.")?f.jsx("span",{className:"text-emerald-400 text-lg",children:""}):v.title.toLowerCase().includes("order placed")||v.message.toLowerCase().includes("order has been placed")?f.jsx("span",{className:"text-primary text-lg",children:""}):f.jsx("span",{className:"text-primary text-lg",children:""})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("h2",{className:"text-sm font-semibold text-foreground",children:v.title}),f.jsx("div",{className:"text-[9px] text-muted-foreground",children:(()=>{const oe=new Date(v.created_at),ve=String(oe.getDate()).padStart(2,"0"),Se=String(oe.getMonth()+1).padStart(2,"0"),Ce=oe.getFullYear();let Fe=oe.getHours();const Ge=String(oe.getMinutes()).padStart(2,"0"),ht=Fe>=12?"PM":"AM";return Fe=Fe%12||12,`${ve}/${Se}/${Ce} - ${Fe}:${Ge} ${ht}`})()})]})]}),f.jsx("button",{onClick:()=>{x(null),w(null)},className:"text-[9px] px-2 py-0.5 rounded-full bg-muted text-muted-foreground hover:bg-accent/60",children:"Close"})]}),f.jsx("div",{className:"mt-1 text-[10px] leading-relaxed text-foreground whitespace-pre-line",children:v.message}),v.order_id&&!v.message.includes("Please give us rating for our service.")&&f.jsxs("div",{className:"mt-2 pt-2 border-t border-border/40 space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:"Order Summary"}),f.jsx("div",{className:"text-[8px] text-primary",children:"Live booking confirmed"})]}),E?f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted overflow-hidden",children:(Z=E.restaurants)!=null&&Z.image_url?f.jsx("img",{src:E.restaurants.image_url,alt:E.restaurants.name,className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] text-muted-foreground",children:((X=(ae=(se=E.restaurants)==null?void 0:se.name)==null?void 0:ae.charAt(0))==null?void 0:X.toUpperCase())||"R"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-[10px] font-semibold text-foreground",children:((ne=E.restaurants)==null?void 0:ne.name)||"Your Restaurant"}),f.jsx("div",{className:"text-[8px] text-muted-foreground line-clamp-2",children:(ue=E.restaurants)==null?void 0:ue.address}),f.jsxs("div",{className:"mt-0.5 inline-flex items-center gap-1 px-2 py-[2px] rounded-full bg-primary/5 text-[8px] text-primary border border-primary/20",children:[f.jsx("span",{className:"text-[9px]",children:""}),f.jsx("span",{className:"capitalize",children:((fe=E.order_type)==null?void 0:fe.replace("_"," "))||"dine in"}),f.jsx("span",{className:"mx-1 text-[7px] text-muted-foreground",children:""}),f.jsx("span",{className:"capitalize text-[8px]",children:E.status||"paid"})]})]})]}),Array.isArray(E.order_items)&&E.order_items.length>0&&f.jsxs("div",{className:"bg-muted/40 rounded-xl px-2 py-2 space-y-1",children:[E.order_items.slice(0,3).map((oe,ve)=>f.jsxs("div",{className:"flex justify-between items-center text-[8px] text-muted-foreground",children:[f.jsxs("span",{children:[oe.quantity," ",oe.name]}),oe.price&&f.jsxs("span",{className:"text-[8px]",children:[(oe.price*oe.quantity).toLocaleString()," MMK"]})]},ve)),E.order_items.length>3&&f.jsxs("div",{className:"text-[7px] text-muted-foreground/80",children:["+ ",E.order_items.length-3," more item(s)"]})]}),f.jsxs("div",{className:"flex justify-between items-center pt-1 border-t border-border/40 mt-1",children:[f.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Total Paid"}),f.jsxs("div",{className:"text-[11px] font-semibold text-primary",children:[Number(E.total_amount||0).toLocaleString()," ","MMK"]})]})]}):f.jsx("div",{className:"text-[8px] text-muted-foreground",children:"Loading your order summary..."})]}),v.message.includes("Please give us rating for our service.")&&f.jsxs("div",{className:"mt-3 pt-3 border-t border-border/40",children:[f.jsxs("div",{className:"flex flex-col items-center gap-1 mb-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 border border-emerald-400/40 flex items-center justify-center shadow-sm",children:f.jsx("span",{className:"text-emerald-400 text-xl",children:""})}),f.jsx("div",{className:"text-[11px] font-semibold text-foreground",children:"Thank you for dining with us"}),f.jsx("div",{className:"text-[9px] text-muted-foreground text-center",children:"Rate your experience to help us refine our luxury service."})]}),f.jsx(SF,{}),f.jsx("div",{className:"mt-2 text-[8px] text-center text-muted-foreground",children:"Your feedback updates this restaurant's rating in real time for all customers."})]})]})}),f.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h2",{className:"text-xl font-semibold",children:[F(),","," ",f.jsx("span",{className:"font-bold text-yellow-500",children:B})]}),f.jsxs("div",{className:"relative",children:[f.jsx(Wd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),f.jsx(mt,{placeholder:"Search restaurants or cuisine...",value:t,onChange:oe=>e(oe.target.value),className:"pl-10"})]})]}),!i&&V.length>0&&f.jsx(_F,{restaurants:[...V].sort((oe,ve)=>(ve.rating||0)-(oe.rating||0)).slice(0,10).map(oe=>({id:oe.id,image:oe.image_url,title:oe.name}))}),i?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(Qs,{className:"h-8 w-8 animate-spin text-primary"})}):V.length===0?f.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No restaurants found"}):V.map(oe=>f.jsxs(qe,{className:"overflow-hidden cursor-pointer transition-all hover:scale-[1.02] hover:shadow-lg",onClick:()=>S(`/restaurant/${oe.id}`),children:[f.jsxs("div",{className:"relative h-48",children:[f.jsx("img",{src:oe.image_url,alt:oe.name,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-3 right-3",children:f.jsxs(br,{className:"bg-primary text-primary-foreground border-0",children:[f.jsx(Cc,{className:"h-3 w-3 mr-1 fill-current"}),oe.rating]})})]}),f.jsxs("div",{className:"p-4 space-y-2",children:[f.jsx("div",{className:"flex items-start justify-between",children:f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-lg text-foreground",children:oe.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:oe.description})]})}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[f.jsx(br,{variant:"secondary",className:"font-normal",children:oe.cuisine_type}),f.jsxs("div",{className:"flex items-center gap-1 text-[0.625rem]",children:[f.jsx(ag,{className:"h-3 w-3"}),oe.address]})]})]})]},oe.id))]}),f.jsx(pp,{})]})},SF=()=>{const[t,e]=j.useState(null),[r,n]=j.useState(null),[i,s]=j.useState(!1),a=p=>p?p<=1.5?"Very Bad":p<=2.5?"Needs Improvement":p<=3.5?"Good":p<=4.5?"Very Good":"Excellent":"Tap or hover to rate",c=async p=>{if(!(i||p<=0)){s(!0);try{const{data:{user:m}}=await be.auth.getUser();if(!m){ke.error("Please sign in to rate");return}const v=window.__alan_activeRatingNotificationId;let E=window.__alan_activeRatingNotificationOrderId||null;if(!v&&!E){ke.error("Unable to link rating to order");return}if(!E&&v){const{data:_,error:C}=await be.from("customer_notifications").select("order_id").eq("id",v).single();if(C||!(_!=null&&_.order_id)){ke.error("Unable to link rating to order");return}E=_.order_id}const{data:w,error:A}=await be.from("orders").select("id, restaurant_id").eq("id",E).single();if(A||!(w!=null&&w.restaurant_id)){ke.error("Unable to resolve restaurant for rating");return}const{error:N}=await be.from("restaurant_ratings").upsert({restaurant_id:w.restaurant_id,customer_id:m.id,order_id:w.id,rating:p},{onConflict:"restaurant_id,customer_id,order_id"});if(N){console.error("Failed to save rating",N),ke.error("Failed to submit rating");return}v&&await be.from("customer_notifications").update({status:"read"}).eq("id",v),ke.success("Thank you for your rating!"),n(p),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alanRefreshRestaurants"))}catch(m){console.error("Error while submitting rating",m),ke.error("Something went wrong while submitting rating")}finally{s(!1)}}},h=t??r??0,d=p=>{const m=p+1,v=m-.5,x=h>=m,E=!x&&h>=v;return f.jsxs("div",{className:"relative w-7 h-7 cursor-pointer",onMouseMove:w=>{const A=w.currentTarget.getBoundingClientRect(),_=w.clientX-A.left<A.width/2?.5:1;e(m-(_===.5?.5:0))},onMouseLeave:()=>e(null),onClick:()=>c(h||m),onTouchStart:()=>{const w=m;e(w),c(w)},children:[f.jsx(Cc,{className:"w-7 h-7 text-yellow-500/40"}),(x||E)&&f.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{width:x?"100%":"50%"},children:f.jsx(Cc,{className:"w-7 h-7 text-yellow-400 fill-yellow-400 drop-shadow-[0_0_6px_rgba(250,250,210,0.9)]"})})]},m)};return f.jsxs("div",{className:"flex flex-col items-center gap-1",children:[f.jsx("div",{className:"flex items-center gap-1.5",children:[0,1,2,3,4].map(d)}),f.jsx("div",{className:"text-[8px] text-emerald-400 font-medium mt-0.5",children:a(h)}),i&&f.jsx("div",{className:"text-[7px] text-muted-foreground mt-0.5",children:"Submitting your rating..."})]})};var e1="focusScope.autoFocusOnMount",t1="focusScope.autoFocusOnUnmount",Y2={bubbles:!1,cancelable:!0},CF="FocusScope",mp=j.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[c,h]=j.useState(null),d=pr(i),p=pr(s),m=j.useRef(null),v=ot(e,w=>h(w)),x=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let w=function(C){if(x.paused||!c)return;const S=C.target;c.contains(S)?m.current=S:xo(m.current,{select:!0})},A=function(C){if(x.paused||!c)return;const S=C.relatedTarget;S!==null&&(c.contains(S)||xo(m.current,{select:!0}))},N=function(C){if(document.activeElement===document.body)for(const O of C)O.removedNodes.length>0&&xo(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",A);const _=new MutationObserver(N);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",A),_.disconnect()}}},[n,c,x.paused]),j.useEffect(()=>{if(c){X2.add(x);const w=document.activeElement;if(!c.contains(w)){const N=new CustomEvent(e1,Y2);c.addEventListener(e1,d),c.dispatchEvent(N),N.defaultPrevented||(AF(RF(B3(c)),{select:!0}),document.activeElement===w&&xo(c))}return()=>{c.removeEventListener(e1,d),setTimeout(()=>{const N=new CustomEvent(t1,Y2);c.addEventListener(t1,p),c.dispatchEvent(N),N.defaultPrevented||xo(w??document.body,{select:!0}),c.removeEventListener(t1,p),X2.remove(x)},0)}}},[c,d,p,x]);const E=j.useCallback(w=>{if(!r&&!n||x.paused)return;const A=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,N=document.activeElement;if(A&&N){const _=w.currentTarget,[C,S]=NF(_);C&&S?!w.shiftKey&&N===S?(w.preventDefault(),r&&xo(C,{select:!0})):w.shiftKey&&N===C&&(w.preventDefault(),r&&xo(S,{select:!0})):N===_&&w.preventDefault()}},[r,n,x.paused]);return f.jsx(We.div,{tabIndex:-1,...a,ref:v,onKeyDown:E})});mp.displayName=CF;function AF(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(xo(n,{select:e}),document.activeElement!==r)return}function NF(t){const e=B3(t),r=K2(e,t),n=K2(e.reverse(),t);return[r,n]}function B3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function K2(t,e){for(const r of t)if(!TF(r,{upTo:e}))return r}function TF(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OF(t){return t instanceof HTMLInputElement&&"select"in t}function xo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&OF(t)&&e&&t.select()}}var X2=IF();function IF(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Q2(t,e),t.unshift(e)},remove(e){var r;t=Q2(t,e),(r=t[0])==null||r.resume()}}}function Q2(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function RF(t){return t.filter(e=>e.tagName!=="A")}var r1=0;function wx(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Z2()),document.body.insertAdjacentElement("beforeend",t[1]??Z2()),r1++,()=>{r1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),r1--}},[])}function Z2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Eh="right-scroll-bar-position",Sh="width-before-scroll-bar",kF="with-scroll-bars-hidden",jF="--removed-body-scroll-bar-size";function n1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function MF(t,e){var r=j.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var PF=typeof window<"u"?j.useLayoutEffect:j.useEffect,J2=new WeakMap;function DF(t,e){var r=MF(null,function(n){return t.forEach(function(i){return n1(i,n)})});return PF(function(){var n=J2.get(r);if(n){var i=new Set(n),s=new Set(t),a=r.current;i.forEach(function(c){s.has(c)||n1(c,null)}),s.forEach(function(c){i.has(c)||n1(c,a)})}J2.set(r,t)},[t]),r}function LF(t){return t}function BF(t,e){e===void 0&&(e=LF);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var a=e(s,n);return r.push(a),function(){r=r.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(c){return s(c)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var c=r;r=[],c.forEach(s),a=r}var h=function(){var p=a;a=[],p.forEach(s)},d=function(){return Promise.resolve().then(h)};d(),r={push:function(p){a.push(p),d()},filter:function(p){return a=a.filter(p),r}}}};return i}function FF(t){t===void 0&&(t={});var e=BF(null);return e.options=yi({async:!0,ssr:!1},t),e}var F3=function(t){var e=t.sideCar,r=aa(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,yi({},r))};F3.isSideCarExport=!0;function UF(t,e){return t.useMedium(e),F3}var U3=FF(),i1=function(){},gp=j.forwardRef(function(t,e){var r=j.useRef(null),n=j.useState({onScrollCapture:i1,onWheelCapture:i1,onTouchMoveCapture:i1}),i=n[0],s=n[1],a=t.forwardProps,c=t.children,h=t.className,d=t.removeScrollBar,p=t.enabled,m=t.shards,v=t.sideCar,x=t.noRelative,E=t.noIsolation,w=t.inert,A=t.allowPinchZoom,N=t.as,_=N===void 0?"div":N,C=t.gapMode,S=aa(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=v,D=DF([r,e]),M=yi(yi({},S),i);return j.createElement(j.Fragment,null,p&&j.createElement(O,{sideCar:U3,removeScrollBar:d,shards:m,noRelative:x,noIsolation:E,inert:w,setCallbacks:s,allowPinchZoom:!!A,lockRef:r,gapMode:C}),a?j.cloneElement(j.Children.only(c),yi(yi({},M),{ref:D})):j.createElement(_,yi({},M,{className:h,ref:D}),c))});gp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gp.classNames={fullWidth:Sh,zeroRight:Eh};var zF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $F(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zF();return e&&t.setAttribute("nonce",e),t}function HF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function VF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qF=function(){var t=0,e=null;return{add:function(r){t==0&&(e=$F())&&(HF(e,r),VF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WF=function(){var t=qF();return function(e,r){j.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},z3=function(){var t=WF(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},GF={left:0,top:0,right:0,gap:0},s1=function(t){return parseInt(t||"",10)||0},YF=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[s1(r),s1(n),s1(i)]},KF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return GF;var e=YF(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},XF=z3(),lc="data-scroll-locked",QF=function(t,e,r,n){var i=t.left,s=t.top,a=t.right,c=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(kF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(lc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eh,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Sh,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Eh," .").concat(Eh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Sh," .").concat(Sh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(lc,`] {
    `).concat(jF,": ").concat(c,`px;
  }
`)},e_=function(){var t=parseInt(document.body.getAttribute(lc)||"0",10);return isFinite(t)?t:0},ZF=function(){j.useEffect(function(){return document.body.setAttribute(lc,(e_()+1).toString()),function(){var t=e_()-1;t<=0?document.body.removeAttribute(lc):document.body.setAttribute(lc,t.toString())}},[])},JF=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;ZF();var s=j.useMemo(function(){return KF(i)},[i]);return j.createElement(XF,{styles:QF(s,!e,i,r?"":"!important")})},Xg=!1;if(typeof window<"u")try{var Xf=Object.defineProperty({},"passive",{get:function(){return Xg=!0,!0}});window.addEventListener("test",Xf,Xf),window.removeEventListener("test",Xf,Xf)}catch{Xg=!1}var Tl=Xg?{passive:!1}:!1,eU=function(t){return t.tagName==="TEXTAREA"},$3=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!eU(t)&&r[e]==="visible")},tU=function(t){return $3(t,"overflowY")},rU=function(t){return $3(t,"overflowX")},t_=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=H3(t,n);if(i){var s=V3(t,n),a=s[1],c=s[2];if(a>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},nU=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},iU=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},H3=function(t,e){return t==="v"?tU(e):rU(e)},V3=function(t,e){return t==="v"?nU(e):iU(e)},sU=function(t,e){return t==="h"&&e==="rtl"?-1:1},oU=function(t,e,r,n,i){var s=sU(t,window.getComputedStyle(e).direction),a=s*n,c=r.target,h=e.contains(c),d=!1,p=a>0,m=0,v=0;do{if(!c)break;var x=V3(t,c),E=x[0],w=x[1],A=x[2],N=w-A-s*E;(E||N)&&H3(t,c)&&(m+=N,v+=E);var _=c.parentNode;c=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(p&&(Math.abs(m)<1||!i)||!p&&(Math.abs(v)<1||!i))&&(d=!0),d},Qf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},r_=function(t){return[t.deltaX,t.deltaY]},n_=function(t){return t&&"current"in t?t.current:t},aU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cU=0,Ol=[];function uU(t){var e=j.useRef([]),r=j.useRef([0,0]),n=j.useRef(),i=j.useState(cU++)[0],s=j.useState(z3)[0],a=j.useRef(t);j.useEffect(function(){a.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=zy([t.lockRef.current],(t.shards||[]).map(n_),!0).filter(Boolean);return w.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=j.useCallback(function(w,A){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!a.current.allowPinchZoom;var N=Qf(w),_=r.current,C="deltaX"in w?w.deltaX:_[0]-N[0],S="deltaY"in w?w.deltaY:_[1]-N[1],O,D=w.target,M=Math.abs(C)>Math.abs(S)?"h":"v";if("touches"in w&&M==="h"&&D.type==="range")return!1;var R=t_(M,D);if(!R)return!0;if(R?O=M:(O=M==="v"?"h":"v",R=t_(M,D)),!R)return!1;if(!n.current&&"changedTouches"in w&&(C||S)&&(n.current=O),!O)return!0;var k=n.current||O;return oU(k,A,w,k==="h"?C:S,!0)},[]),h=j.useCallback(function(w){var A=w;if(!(!Ol.length||Ol[Ol.length-1]!==s)){var N="deltaY"in A?r_(A):Qf(A),_=e.current.filter(function(O){return O.name===A.type&&(O.target===A.target||A.target===O.shadowParent)&&aU(O.delta,N)})[0];if(_&&_.should){A.cancelable&&A.preventDefault();return}if(!_){var C=(a.current.shards||[]).map(n_).filter(Boolean).filter(function(O){return O.contains(A.target)}),S=C.length>0?c(A,C[0]):!a.current.noIsolation;S&&A.cancelable&&A.preventDefault()}}},[]),d=j.useCallback(function(w,A,N,_){var C={name:w,delta:A,target:N,should:_,shadowParent:dU(N)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(S){return S!==C})},1)},[]),p=j.useCallback(function(w){r.current=Qf(w),n.current=void 0},[]),m=j.useCallback(function(w){d(w.type,r_(w),w.target,c(w,t.lockRef.current))},[]),v=j.useCallback(function(w){d(w.type,Qf(w),w.target,c(w,t.lockRef.current))},[]);j.useEffect(function(){return Ol.push(s),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Tl),document.addEventListener("touchmove",h,Tl),document.addEventListener("touchstart",p,Tl),function(){Ol=Ol.filter(function(w){return w!==s}),document.removeEventListener("wheel",h,Tl),document.removeEventListener("touchmove",h,Tl),document.removeEventListener("touchstart",p,Tl)}},[]);var x=t.removeScrollBar,E=t.inert;return j.createElement(j.Fragment,null,E?j.createElement(s,{styles:lU(i)}):null,x?j.createElement(JF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const fU=UF(U3,uU);var vp=j.forwardRef(function(t,e){return j.createElement(gp,yi({},t,{ref:e,sideCar:fU}))});vp.classNames=gp.classNames;var hU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Il=new WeakMap,Zf=new WeakMap,Jf={},o1=0,q3=function(t){return t&&(t.host||q3(t.parentNode))},pU=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=q3(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},mU=function(t,e,r,n){var i=pU(e,Array.isArray(t)?t:[t]);Jf[r]||(Jf[r]=new WeakMap);var s=Jf[r],a=[],c=new Set,h=new Set(i),d=function(m){!m||c.has(m)||(c.add(m),d(m.parentNode))};i.forEach(d);var p=function(m){!m||h.has(m)||Array.prototype.forEach.call(m.children,function(v){if(c.has(v))p(v);else try{var x=v.getAttribute(n),E=x!==null&&x!=="false",w=(Il.get(v)||0)+1,A=(s.get(v)||0)+1;Il.set(v,w),s.set(v,A),a.push(v),w===1&&E&&Zf.set(v,!0),A===1&&v.setAttribute(r,"true"),E||v.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",v,N)}})};return p(e),c.clear(),o1++,function(){a.forEach(function(m){var v=Il.get(m)-1,x=s.get(m)-1;Il.set(m,v),s.set(m,x),v||(Zf.has(m)||m.removeAttribute(n),Zf.delete(m)),x||m.removeAttribute(r)}),o1--,o1||(Il=new WeakMap,Il=new WeakMap,Zf=new WeakMap,Jf={})}},bx=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=hU(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),mU(n,i,r,"aria-hidden")):function(){return null}},yp="Dialog",[W3,EQ]=En(yp),[gU,rs]=W3(yp),G3=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,c=j.useRef(null),h=j.useRef(null),[d,p]=Ss({prop:n,defaultProp:i??!1,onChange:s,caller:yp});return f.jsx(gU,{scope:e,triggerRef:c,contentRef:h,contentId:Xi(),titleId:Xi(),descriptionId:Xi(),open:d,onOpenChange:p,onOpenToggle:j.useCallback(()=>p(m=>!m),[p]),modal:a,children:r})};G3.displayName=yp;var Y3="DialogTrigger",K3=j.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=rs(Y3,r),s=ot(e,i.triggerRef);return f.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Sx(i.open),...n,ref:s,onClick:Pe(t.onClick,i.onOpenToggle)})});K3.displayName=Y3;var _x="DialogPortal",[vU,X3]=W3(_x,{forceMount:void 0}),Q3=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,s=rs(_x,e);return f.jsx(vU,{scope:e,forceMount:r,children:j.Children.map(n,a=>f.jsx(dn,{present:r||s.open,children:f.jsx(Vd,{asChild:!0,container:i,children:a})}))})};Q3.displayName=_x;var g0="DialogOverlay",Z3=j.forwardRef((t,e)=>{const r=X3(g0,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=rs(g0,t.__scopeDialog);return s.modal?f.jsx(dn,{present:n||s.open,children:f.jsx(xU,{...i,ref:e})}):null});Z3.displayName=g0;var yU=Qa("DialogOverlay.RemoveScroll"),xU=j.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=rs(g0,r);return f.jsx(vp,{as:yU,allowPinchZoom:!0,shards:[i.contentRef],children:f.jsx(We.div,{"data-state":Sx(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),el="DialogContent",J3=j.forwardRef((t,e)=>{const r=X3(el,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=rs(el,t.__scopeDialog);return f.jsx(dn,{present:n||s.open,children:s.modal?f.jsx(wU,{...i,ref:e}):f.jsx(bU,{...i,ref:e})})});J3.displayName=el;var wU=j.forwardRef((t,e)=>{const r=rs(el,t.__scopeDialog),n=j.useRef(null),i=ot(e,r.contentRef,n);return j.useEffect(()=>{const s=n.current;if(s)return bx(s)},[]),f.jsx(eO,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Pe(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:Pe(t.onFocusOutside,s=>s.preventDefault())})}),bU=j.forwardRef((t,e)=>{const r=rs(el,t.__scopeDialog),n=j.useRef(!1),i=j.useRef(!1);return f.jsx(eO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,c;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(n.current||(c=r.triggerRef.current)==null||c.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var h,d;(h=t.onInteractOutside)==null||h.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((d=r.triggerRef.current)==null?void 0:d.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),eO=j.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,c=rs(el,r),h=j.useRef(null),d=ot(e,h);return wx(),f.jsxs(f.Fragment,{children:[f.jsx(mp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:f.jsx(zc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Sx(c.open),...a,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(_U,{titleId:c.titleId}),f.jsx(SU,{contentRef:h,descriptionId:c.descriptionId})]})]})}),Ex="DialogTitle",tO=j.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=rs(Ex,r);return f.jsx(We.h2,{id:i.titleId,...n,ref:e})});tO.displayName=Ex;var rO="DialogDescription",nO=j.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=rs(rO,r);return f.jsx(We.p,{id:i.descriptionId,...n,ref:e})});nO.displayName=rO;var iO="DialogClose",sO=j.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=rs(iO,r);return f.jsx(We.button,{type:"button",...n,ref:e,onClick:Pe(t.onClick,()=>i.onOpenChange(!1))})});sO.displayName=iO;function Sx(t){return t?"open":"closed"}var oO="DialogTitleWarning",[SQ,aO]=j8(oO,{contentName:el,titleName:Ex,docsSlug:"dialog"}),_U=({titleId:t})=>{const e=aO(oO),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},EU="DialogDescriptionWarning",SU=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aO(EU).contentName}}.`;return j.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},CU=G3,AU=K3,NU=Q3,lO=Z3,cO=J3,uO=tO,dO=nO,TU=sO;const Ts=CU,fO=AU,OU=NU,hO=j.forwardRef(({className:t,...e},r)=>f.jsx(lO,{ref:r,className:Be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));hO.displayName=lO.displayName;const ts=j.forwardRef(({className:t,children:e,...r},n)=>f.jsxs(OU,{children:[f.jsx(hO,{}),f.jsxs(cO,{ref:n,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,f.jsxs(TU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[f.jsx(yy,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ts.displayName=cO.displayName;const ro=({className:t,...e})=>f.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ro.displayName="DialogHeader";const Qg=({className:t,...e})=>f.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Qg.displayName="DialogFooter";const no=j.forwardRef(({className:t,...e},r)=>f.jsx(uO,{ref:r,className:Be("text-lg font-semibold leading-none tracking-tight",t),...e}));no.displayName=uO.displayName;const pO=j.forwardRef(({className:t,...e},r)=>f.jsx(dO,{ref:r,className:Be("text-sm text-muted-foreground",t),...e}));pO.displayName=dO.displayName;const IU=()=>{const{id:t}=cN(),e=qr(),[r,n]=j.useState(null),[i,s]=j.useState([]),[a,c]=j.useState(""),[h,d]=j.useState(!0),[p,m]=j.useState([]),[v,x]=j.useState("dine_in"),[E,w]=j.useState(null),[A,N]=j.useState(!1);j.useEffect(()=>{t&&_()},[t]);const _=async()=>{try{const[R,k]=await Promise.all([be.from("restaurants").select("*").eq("id",t).single(),be.from("menu_items").select("*").eq("restaurant_id",t).eq("available",!0)]);if(R.error)throw R.error;if(k.error)throw k.error;n(R.data),s(k.data||[])}catch(R){console.error("Error fetching data:",R),ke.error("Failed to load restaurant details")}finally{d(!1)}};if(h)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsx(Qs,{className:"h-8 w-8 animate-spin text-primary"})});if(!r)return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Restaurant not found"}),f.jsx(De,{onClick:()=>e("/home"),children:"Back to Home"})]})});const C=R=>{m(k=>k.find(B=>B.id===R.id)?k.map(B=>B.id===R.id?{...B,quantity:B.quantity+1}:B):[...k,{id:R.id,name:R.name,price:R.price,quantity:1}])},S=R=>{m(k=>{const L=k.find(B=>B.id===R);return L&&L.quantity>1?k.map(B=>B.id===R?{...B,quantity:B.quantity-1}:B):k.filter(B=>B.id!==R)})},O=p.reduce((R,k)=>R+k.price*k.quantity,0),D=p.reduce((R,k)=>R+k.quantity,0),M=()=>{if(p.length===0){ke.error("Please add items to your cart");return}e("/payment",{state:{cart:p,restaurant:r,orderType:v,totalAmount:O}})};return f.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[f.jsxs("div",{className:"relative h-64",children:[f.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}),f.jsx(De,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-black/50 text-white hover:bg-black/70",onClick:()=>e(-1),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsx(De,{variant:"secondary",size:"sm",className:"absolute bottom-4 right-4 bg-black/65 text-white hover:bg-black/80 border-none px-3 py-1 text-xs rounded-full",onClick:()=>{const k=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.address||r.name)}`;window.open(k,"_blank","noopener,noreferrer")},children:"View on Map"})]}),f.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r.name}),f.jsx("p",{className:"text-muted-foreground",children:r.description})]}),f.jsxs(br,{className:"bg-primary text-primary-foreground border-0",children:[f.jsx(Cc,{className:"h-3 w-3 mr-1 fill-current"}),r.rating]})]}),f.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(ag,{className:"h-4 w-4"}),r.address]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(za,{className:"h-4 w-4"}),r.open_hours]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(sA,{className:"h-4 w-4"}),r.phone]})]})]}),f.jsxs(qe,{className:"p-4",children:[f.jsx("h3",{className:"font-semibold mb-3",children:"Order Type"}),f.jsx(L3,{value:v,onValueChange:R=>x(R),children:f.jsxs(yx,{className:"grid w-full grid-cols-2",children:[f.jsxs(Md,{value:"dine_in",children:[f.jsx(vy,{className:"h-4 w-4 mr-2"}),"Dine In"]}),f.jsxs(Md,{value:"takeaway",children:[f.jsx(Qh,{className:"h-4 w-4 mr-2"}),"Takeaway"]})]})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-2xl font-bold",children:"Menu"}),f.jsx("div",{className:"mt-2",children:f.jsx("input",{type:"text",value:a,onChange:R=>c(R.target.value),placeholder:"Search menu items...",className:"w-full px-3 py-2 rounded-md border bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary"})}),i.filter(R=>{const k=a.toLowerCase().trim();return k?R.name.toLowerCase().includes(k)||(R.description||"").toLowerCase().includes(k):!0}).map(R=>{const k=p.find(L=>L.id===R.id);return f.jsx(qe,{className:"overflow-hidden",children:f.jsxs("div",{className:"flex gap-4 p-4",children:[f.jsx("button",{type:"button",className:"focus:outline-none",onClick:()=>w(R),children:f.jsx("img",{src:R.image_url,alt:R.name,className:"w-24 h-24 rounded-lg object-cover transition-transform duration-200 hover:scale-105"})}),f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:R.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"font-semibold text-primary",children:[R.price.toLocaleString()," MMK"]}),k?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(De,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>S(R.id),children:f.jsx(kM,{className:"h-4 w-4"})}),f.jsx("span",{className:"w-8 text-center font-medium",children:k.quantity}),f.jsx(De,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>C(R),children:f.jsx(qo,{className:"h-4 w-4"})})]}):f.jsxs(De,{size:"sm",variant:"outline",onClick:()=>C(R),children:[f.jsx(qo,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})]})},R.id)})]})]}),f.jsx(Ts,{open:!!E,onOpenChange:R=>!R&&w(null),children:f.jsx(ts,{className:"max-w-sm p-0 border-0 bg-transparent shadow-none",children:E&&f.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[f.jsx("img",{src:E.image_url,alt:E.name,className:"w-full h-[360px] object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/85 via-black/40 to-transparent"}),f.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4 flex flex-col gap-2 text-white",children:[f.jsxs("div",{className:"flex items-baseline justify-between gap-3",children:[f.jsx("h3",{className:"text-lg font-semibold leading-tight",children:E.name}),f.jsxs("span",{className:"text-sm font-semibold px-2 py-1 rounded-full bg-white/12 backdrop-blur",children:[E.price.toLocaleString()," MMK"]})]}),E.description&&f.jsx("p",{className:"text-xs text-white/80 line-clamp-2",children:E.description}),f.jsx("div",{className:"mt-2 flex justify-end",children:f.jsxs(De,{size:"sm",className:"luxury-gradient px-5 py-2 text-sm font-medium shadow-md hover:shadow-lg transition-all",onClick:()=>{C(E),w(null)},children:[f.jsx(qo,{className:"h-4 w-4 mr-1"}),"Add to Cart"]})})]})]})})}),p.length>0&&f.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-4",children:f.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-sm text-muted-foreground",children:[D," items"]}),f.jsxs("div",{className:"text-lg font-bold",children:[O.toLocaleString()," MMK"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(De,{variant:"outline",size:"lg",onClick:()=>N(!0),children:"View Orders"}),f.jsx(De,{onClick:M,className:"luxury-gradient",size:"lg",children:"Pay"})]})]})}),f.jsx(Ts,{open:A,onOpenChange:N,children:f.jsxs(ts,{className:"max-w-md",children:[f.jsx(ro,{children:f.jsx(no,{children:"Your Order Summary"})}),p.length===0?f.jsx("div",{className:"text-sm text-muted-foreground",children:"No items in your cart."}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"space-y-1",children:p.map(R=>f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"font-medium",children:R.name}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:[R.quantity," x ",R.price.toLocaleString()," MMK"]})]}),f.jsxs("span",{className:"font-semibold",children:[(R.price*R.quantity).toLocaleString()," MMK"]})]},R.id))}),f.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[f.jsxs("span",{className:"text-sm text-muted-foreground",children:["Total (",D," items)"]}),f.jsxs("span",{className:"text-lg font-bold text-primary",children:[O.toLocaleString()," MMK"]})]})]})]})})]})};function Cx(t){const e=j.useRef({value:t,previous:t});return j.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Ax="Radio",[RU,mO]=En(Ax),[kU,jU]=RU(Ax),gO=j.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:i=!1,required:s,disabled:a,value:c="on",onCheck:h,form:d,...p}=t,[m,v]=j.useState(null),x=ot(e,A=>v(A)),E=j.useRef(!1),w=m?d||!!m.closest("form"):!0;return f.jsxs(kU,{scope:r,checked:i,disabled:a,children:[f.jsx(We.button,{type:"button",role:"radio","aria-checked":i,"data-state":wO(i),"data-disabled":a?"":void 0,disabled:a,value:c,...p,ref:x,onClick:Pe(t.onClick,A=>{i||h==null||h(),w&&(E.current=A.isPropagationStopped(),E.current||A.stopPropagation())})}),w&&f.jsx(xO,{control:m,bubbles:!E.current,name:n,value:c,checked:i,required:s,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});gO.displayName=Ax;var vO="RadioIndicator",yO=j.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...i}=t,s=jU(vO,r);return f.jsx(dn,{present:n||s.checked,children:f.jsx(We.span,{"data-state":wO(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});yO.displayName=vO;var MU="RadioBubbleInput",xO=j.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const a=j.useRef(null),c=ot(a,s),h=Cx(r),d=Ny(e);return j.useEffect(()=>{const p=a.current;if(!p)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==r&&x){const E=new Event("click",{bubbles:n});x.call(p,r),p.dispatchEvent(E)}},[h,r,n]),f.jsx(We.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xO.displayName=MU;function wO(t){return t?"checked":"unchecked"}var PU=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xp="RadioGroup",[DU,CQ]=En(xp,[Kc,mO]),bO=Kc(),_O=mO(),[LU,BU]=DU(xp),EO=j.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:i,value:s,required:a=!1,disabled:c=!1,orientation:h,dir:d,loop:p=!0,onValueChange:m,...v}=t,x=bO(r),E=Yc(d),[w,A]=Ss({prop:s,defaultProp:i??null,onChange:m,caller:xp});return f.jsx(LU,{scope:r,name:n,required:a,disabled:c,value:w,onValueChange:A,children:f.jsx(mx,{asChild:!0,...x,orientation:h,dir:E,loop:p,children:f.jsx(We.div,{role:"radiogroup","aria-required":a,"aria-orientation":h,"data-disabled":c?"":void 0,dir:E,...v,ref:e})})})});EO.displayName=xp;var SO="RadioGroupItem",CO=j.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...i}=t,s=BU(SO,r),a=s.disabled||n,c=bO(r),h=_O(r),d=j.useRef(null),p=ot(e,d),m=s.value===i.value,v=j.useRef(!1);return j.useEffect(()=>{const x=w=>{PU.includes(w.key)&&(v.current=!0)},E=()=>v.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",E),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",E)}},[]),f.jsx(gx,{asChild:!0,...c,focusable:!a,active:m,children:f.jsx(gO,{disabled:a,required:s.required,checked:m,...h,...i,name:s.name,ref:p,onCheck:()=>s.onValueChange(i.value),onKeyDown:Pe(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Pe(i.onFocus,()=>{var x;v.current&&((x=d.current)==null||x.click())})})})});CO.displayName=SO;var FU="RadioGroupIndicator",AO=j.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,i=_O(r);return f.jsx(yO,{...i,...n,ref:e})});AO.displayName=FU;var NO=EO,TO=CO,UU=AO;const OO=j.forwardRef(({className:t,...e},r)=>f.jsx(NO,{className:Be("grid gap-2",t),...e,ref:r}));OO.displayName=NO.displayName;const IO=j.forwardRef(({className:t,...e},r)=>f.jsx(TO,{ref:r,className:Be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:f.jsx(UU,{className:"flex items-center justify-center",children:f.jsx(tA,{className:"h-2.5 w-2.5 fill-current text-current"})})}));IO.displayName=TO.displayName;const zU=[{id:"mpu",name:"MPU Card",icon:TM},{id:"kbzpay",name:"KBZPay",icon:LM},{id:"wavepay",name:"WavePay",icon:BM}],$U=()=>{const t=Is(),e=qr(),{cart:r,restaurant:n,orderType:i,totalAmount:s}=t.state||{},[a,c]=j.useState("kbzpay"),[h,d]=j.useState(!1);if(!r||!n)return e("/home"),null;const p=async()=>{d(!0),await new Promise(m=>setTimeout(m,2e3));try{const{data:{user:m}}=await be.auth.getUser();if(!m){ke.error("Please sign in to complete your order"),e("/auth");return}const v=`ALAN-${Date.now()}-${n.id}-${m.id.substring(0,8)}`,{data:x,error:E}=await be.from("orders").insert({customer_id:m.id,restaurant_id:n.id,order_type:i,payment_method:a,total_amount:s,status:"paid",qr_code:v,order_items:r}).select().single();if(E){console.error("Order creation error:",E),ke.error("Failed to create order. Please try again.");return}ke.success("Payment successful!"),e("/confirmation",{state:{order:x,restaurant:n,orderType:i}})}catch(m){console.error("Payment error:",m),ke.error("Failed to process payment. Please try again.")}finally{d(!1)}};return f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:f.jsxs("div",{className:"max-w-md mx-auto flex items-center gap-4",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsx("h1",{className:"text-2xl font-bold",children:"Payment"})]})}),f.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[f.jsxs(qe,{className:"p-4 space-y-3",children:[f.jsx("h2",{className:"font-semibold text-lg",children:"Order Summary"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),f.jsx("span",{className:"font-medium",children:n.name})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),f.jsx("span",{className:"font-medium capitalize",children:i.replace("_"," ")})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Items"}),f.jsxs("span",{className:"font-medium",children:[r.length," item(s)"]})]}),f.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[f.jsx("span",{className:"font-semibold",children:"Total Amount"}),f.jsxs("span",{className:"font-bold text-primary text-lg",children:[s.toLocaleString()," MMK"]})]})]})]}),f.jsxs(qe,{className:"p-4 space-y-4",children:[f.jsx("h2",{className:"font-semibold text-lg",children:"Payment Method"}),f.jsx(OO,{value:a,onValueChange:m=>c(m),children:zU.map(m=>{const v=m.icon;return f.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>c(m.id),children:[f.jsx(IO,{value:m.id,id:m.id}),f.jsxs(it,{htmlFor:m.id,className:"flex items-center gap-3 cursor-pointer flex-1",children:[f.jsx(v,{className:"h-5 w-5 text-primary"}),f.jsx("span",{className:"font-medium",children:m.name})]})]},m.id)})})]}),f.jsxs(qe,{className:"p-4 space-y-3",children:[f.jsx("h2",{className:"font-semibold text-lg",children:"Items"}),r.map(m=>f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsxs("span",{children:[m.name," x ",m.quantity]}),f.jsxs("span",{className:"font-medium",children:[(m.price*m.quantity).toLocaleString()," MMK"]})]},m.id))]}),f.jsx(De,{onClick:p,disabled:h,className:"w-full luxury-gradient h-12 text-base",size:"lg",children:h?f.jsxs(f.Fragment,{children:[f.jsx(Qs,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing Payment..."]}):`Pay ${s.toLocaleString()} MMK`}),f.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"This is a mock payment. No actual transaction will occur."})]})]})};var HU=Object.defineProperty,v0=Object.getOwnPropertySymbols,RO=Object.prototype.hasOwnProperty,kO=Object.prototype.propertyIsEnumerable,i_=(t,e,r)=>e in t?HU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zg=(t,e)=>{for(var r in e||(e={}))RO.call(e,r)&&i_(t,r,e[r]);if(v0)for(var r of v0(e))kO.call(e,r)&&i_(t,r,e[r]);return t},Jg=(t,e)=>{var r={};for(var n in t)RO.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&v0)for(var n of v0(t))e.indexOf(n)<0&&kO.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var tl;(t=>{const e=class pt{constructor(h,d,p,m){if(this.version=h,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],h<pt.MIN_VERSION||h>pt.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let v=[];for(let E=0;E<this.size;E++)v.push(!1);for(let E=0;E<this.size;E++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(p);if(this.drawCodewords(x),m==-1){let E=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const A=this.getPenaltyScore();A<E&&(m=w,E=A),this.applyMask(w)}}i(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(h,d){const p=t.QrSegment.makeSegments(h);return pt.encodeSegments(p,d)}static encodeBinary(h,d){const p=t.QrSegment.makeBytes(h);return pt.encodeSegments([p],d)}static encodeSegments(h,d,p=1,m=40,v=-1,x=!0){if(!(pt.MIN_VERSION<=p&&p<=m&&m<=pt.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let E,w;for(E=p;;E++){const C=pt.getNumDataCodewords(E,d)*8,S=a.getTotalBits(h,E);if(S<=C){w=S;break}if(E>=m)throw new RangeError("Data too long")}for(const C of[pt.Ecc.MEDIUM,pt.Ecc.QUARTILE,pt.Ecc.HIGH])x&&w<=pt.getNumDataCodewords(E,C)*8&&(d=C);let A=[];for(const C of h){r(C.mode.modeBits,4,A),r(C.numChars,C.mode.numCharCountBits(E),A);for(const S of C.getData())A.push(S)}i(A.length==w);const N=pt.getNumDataCodewords(E,d)*8;i(A.length<=N),r(0,Math.min(4,N-A.length),A),r(0,(8-A.length%8)%8,A),i(A.length%8==0);for(let C=236;A.length<N;C^=253)r(C,8,A);let _=[];for(;_.length*8<A.length;)_.push(0);return A.forEach((C,S)=>_[S>>>3]|=C<<7-(S&7)),new pt(E,d,_,v)}getModule(h,d){return 0<=h&&h<this.size&&0<=d&&d<this.size&&this.modules[d][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),d=h.length;for(let p=0;p<d;p++)for(let m=0;m<d;m++)p==0&&m==0||p==0&&m==d-1||p==d-1&&m==0||this.drawAlignmentPattern(h[p],h[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const d=this.errorCorrectionLevel.formatBits<<3|h;let p=d;for(let v=0;v<10;v++)p=p<<1^(p>>>9)*1335;const m=(d<<10|p)^21522;i(m>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,n(m,v));this.setFunctionModule(8,7,n(m,6)),this.setFunctionModule(8,8,n(m,7)),this.setFunctionModule(7,8,n(m,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,n(m,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,n(m,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,n(m,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let p=0;p<12;p++)h=h<<1^(h>>>11)*7973;const d=this.version<<12|h;i(d>>>18==0);for(let p=0;p<18;p++){const m=n(d,p),v=this.size-11+p%3,x=Math.floor(p/3);this.setFunctionModule(v,x,m),this.setFunctionModule(x,v,m)}}drawFinderPattern(h,d){for(let p=-4;p<=4;p++)for(let m=-4;m<=4;m++){const v=Math.max(Math.abs(m),Math.abs(p)),x=h+m,E=d+p;0<=x&&x<this.size&&0<=E&&E<this.size&&this.setFunctionModule(x,E,v!=2&&v!=4)}}drawAlignmentPattern(h,d){for(let p=-2;p<=2;p++)for(let m=-2;m<=2;m++)this.setFunctionModule(h+m,d+p,Math.max(Math.abs(m),Math.abs(p))!=1)}setFunctionModule(h,d,p){this.modules[d][h]=p,this.isFunction[d][h]=!0}addEccAndInterleave(h){const d=this.version,p=this.errorCorrectionLevel;if(h.length!=pt.getNumDataCodewords(d,p))throw new RangeError("Invalid argument");const m=pt.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][d],v=pt.ECC_CODEWORDS_PER_BLOCK[p.ordinal][d],x=Math.floor(pt.getNumRawDataModules(d)/8),E=m-x%m,w=Math.floor(x/m);let A=[];const N=pt.reedSolomonComputeDivisor(v);for(let C=0,S=0;C<m;C++){let O=h.slice(S,S+w-v+(C<E?0:1));S+=O.length;const D=pt.reedSolomonComputeRemainder(O,N);C<E&&O.push(0),A.push(O.concat(D))}let _=[];for(let C=0;C<A[0].length;C++)A.forEach((S,O)=>{(C!=w-v||O>=E)&&_.push(S[C])});return i(_.length==x),_}drawCodewords(h){if(h.length!=Math.floor(pt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let m=0;m<this.size;m++)for(let v=0;v<2;v++){const x=p-v,w=(p+1&2)==0?this.size-1-m:m;!this.isFunction[w][x]&&d<h.length*8&&(this.modules[w][x]=n(h[d>>>3],7-(d&7)),d++)}}i(d==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let p=0;p<this.size;p++){let m;switch(h){case 0:m=(p+d)%2==0;break;case 1:m=d%2==0;break;case 2:m=p%3==0;break;case 3:m=(p+d)%3==0;break;case 4:m=(Math.floor(p/3)+Math.floor(d/2))%2==0;break;case 5:m=p*d%2+p*d%3==0;break;case 6:m=(p*d%2+p*d%3)%2==0;break;case 7:m=((p+d)%2+p*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][p]&&m&&(this.modules[d][p]=!this.modules[d][p])}}getPenaltyScore(){let h=0;for(let v=0;v<this.size;v++){let x=!1,E=0,w=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[v][A]==x?(E++,E==5?h+=pt.PENALTY_N1:E>5&&h++):(this.finderPenaltyAddHistory(E,w),x||(h+=this.finderPenaltyCountPatterns(w)*pt.PENALTY_N3),x=this.modules[v][A],E=1);h+=this.finderPenaltyTerminateAndCount(x,E,w)*pt.PENALTY_N3}for(let v=0;v<this.size;v++){let x=!1,E=0,w=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[A][v]==x?(E++,E==5?h+=pt.PENALTY_N1:E>5&&h++):(this.finderPenaltyAddHistory(E,w),x||(h+=this.finderPenaltyCountPatterns(w)*pt.PENALTY_N3),x=this.modules[A][v],E=1);h+=this.finderPenaltyTerminateAndCount(x,E,w)*pt.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let x=0;x<this.size-1;x++){const E=this.modules[v][x];E==this.modules[v][x+1]&&E==this.modules[v+1][x]&&E==this.modules[v+1][x+1]&&(h+=pt.PENALTY_N2)}let d=0;for(const v of this.modules)d=v.reduce((x,E)=>x+(E?1:0),d);const p=this.size*this.size,m=Math.ceil(Math.abs(d*20-p*10)/p)-1;return i(0<=m&&m<=9),h+=m*pt.PENALTY_N4,i(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let p=[6];for(let m=this.size-7;p.length<h;m-=d)p.splice(1,0,m);return p}}static getNumRawDataModules(h){if(h<pt.MIN_VERSION||h>pt.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*h+128)*h+64;if(h>=2){const p=Math.floor(h/7)+2;d-=(25*p-10)*p-55,h>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(h,d){return Math.floor(pt.getNumRawDataModules(h)/8)-pt.ECC_CODEWORDS_PER_BLOCK[d.ordinal][h]*pt.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let d=[];for(let m=0;m<h-1;m++)d.push(0);d.push(1);let p=1;for(let m=0;m<h;m++){for(let v=0;v<d.length;v++)d[v]=pt.reedSolomonMultiply(d[v],p),v+1<d.length&&(d[v]^=d[v+1]);p=pt.reedSolomonMultiply(p,2)}return d}static reedSolomonComputeRemainder(h,d){let p=d.map(m=>0);for(const m of h){const v=m^p.shift();p.push(0),d.forEach((x,E)=>p[E]^=pt.reedSolomonMultiply(x,v))}return p}static reedSolomonMultiply(h,d){if(h>>>8||d>>>8)throw new RangeError("Byte out of range");let p=0;for(let m=7;m>=0;m--)p=p<<1^(p>>>7)*285,p^=(d>>>m&1)*h;return i(p>>>8==0),p}finderPenaltyCountPatterns(h){const d=h[1];i(d<=this.size*3);const p=d>0&&h[2]==d&&h[3]==d*3&&h[4]==d&&h[5]==d;return(p&&h[0]>=d*4&&h[6]>=d?1:0)+(p&&h[6]>=d*4&&h[0]>=d?1:0)}finderPenaltyTerminateAndCount(h,d,p){return h&&(this.finderPenaltyAddHistory(d,p),d=0),d+=this.size,this.finderPenaltyAddHistory(d,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(h,d){d[0]==0&&(h+=this.size),d.pop(),d.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(c,h,d){if(h<0||h>31||c>>>h)throw new RangeError("Value out of range");for(let p=h-1;p>=0;p--)d.push(c>>>p&1)}function n(c,h){return(c>>>h&1)!=0}function i(c){if(!c)throw new Error("Assertion error")}const s=class ur{constructor(h,d,p){if(this.mode=h,this.numChars=d,this.bitData=p,d<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(h){let d=[];for(const p of h)r(p,8,d);return new ur(ur.Mode.BYTE,h.length,d)}static makeNumeric(h){if(!ur.isNumeric(h))throw new RangeError("String contains non-numeric characters");let d=[];for(let p=0;p<h.length;){const m=Math.min(h.length-p,3);r(parseInt(h.substring(p,p+m),10),m*3+1,d),p+=m}return new ur(ur.Mode.NUMERIC,h.length,d)}static makeAlphanumeric(h){if(!ur.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],p;for(p=0;p+2<=h.length;p+=2){let m=ur.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p))*45;m+=ur.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p+1)),r(m,11,d)}return p<h.length&&r(ur.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p)),6,d),new ur(ur.Mode.ALPHANUMERIC,h.length,d)}static makeSegments(h){return h==""?[]:ur.isNumeric(h)?[ur.makeNumeric(h)]:ur.isAlphanumeric(h)?[ur.makeAlphanumeric(h)]:[ur.makeBytes(ur.toUtf8ByteArray(h))]}static makeEci(h){let d=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)r(h,8,d);else if(h<16384)r(2,2,d),r(h,14,d);else if(h<1e6)r(6,3,d),r(h,21,d);else throw new RangeError("ECI assignment value out of range");return new ur(ur.Mode.ECI,0,d)}static isNumeric(h){return ur.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return ur.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,d){let p=0;for(const m of h){const v=m.mode.numCharCountBits(d);if(m.numChars>=1<<v)return 1/0;p+=4+v+m.bitData.length}return p}static toUtf8ByteArray(h){h=encodeURI(h);let d=[];for(let p=0;p<h.length;p++)h.charAt(p)!="%"?d.push(h.charCodeAt(p)):(d.push(parseInt(h.substring(p+1,p+3),16)),p+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=s;t.QrSegment=s})(tl||(tl={}));(t=>{(e=>{const r=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(tl||(tl={}));(t=>{(e=>{const r=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(tl||(tl={}));var Yl=tl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var VU={L:Yl.QrCode.Ecc.LOW,M:Yl.QrCode.Ecc.MEDIUM,Q:Yl.QrCode.Ecc.QUARTILE,H:Yl.QrCode.Ecc.HIGH},jO=128,MO="L",PO="#FFFFFF",DO="#000000",LO=!1,BO=1,qU=4,WU=0,GU=.1;function FO(t,e=0){const r=[];return t.forEach(function(n,i){let s=null;n.forEach(function(a,c){if(!a&&s!==null){r.push(`M${s+e} ${i+e}h${c-s}v1H${s+e}z`),s=null;return}if(c===n.length-1){if(!a)return;s===null?r.push(`M${c+e},${i+e} h1v1H${c+e}z`):r.push(`M${s+e},${i+e} h${c+1-s}v1H${s+e}z`);return}a&&s===null&&(s=c)})}),r.join("")}function UO(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function YU(t,e,r,n){if(n==null)return null;const i=t.length+r*2,s=Math.floor(e*GU),a=i/e,c=(n.width||s)*a,h=(n.height||s)*a,d=n.x==null?t.length/2-c/2:n.x*a,p=n.y==null?t.length/2-h/2:n.y*a,m=n.opacity==null?1:n.opacity;let v=null;if(n.excavate){let E=Math.floor(d),w=Math.floor(p),A=Math.ceil(c+d-E),N=Math.ceil(h+p-w);v={x:E,y:w,w:A,h:N}}const x=n.crossOrigin;return{x:d,y:p,h,w:c,excavation:v,opacity:m,crossOrigin:x}}function KU(t,e){return e!=null?Math.max(Math.floor(e),0):t?qU:WU}function zO({value:t,level:e,minVersion:r,includeMargin:n,marginSize:i,imageSettings:s,size:a,boostLevel:c}){let h=Te.useMemo(()=>{const E=(Array.isArray(t)?t:[t]).reduce((w,A)=>(w.push(...Yl.QrSegment.makeSegments(A)),w),[]);return Yl.QrCode.encodeSegments(E,VU[e],r,void 0,void 0,c)},[t,e,r,c]);const{cells:d,margin:p,numCells:m,calculatedImageSettings:v}=Te.useMemo(()=>{let x=h.getModules();const E=KU(n,i),w=x.length+E*2,A=YU(x,a,E,s);return{cells:x,margin:E,numCells:w,calculatedImageSettings:A}},[h,a,s,n,i]);return{qrcode:h,margin:p,cells:d,numCells:m,calculatedImageSettings:v}}var XU=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),QU=Te.forwardRef(function(e,r){const n=e,{value:i,size:s=jO,level:a=MO,bgColor:c=PO,fgColor:h=DO,includeMargin:d=LO,minVersion:p=BO,boostLevel:m,marginSize:v,imageSettings:x}=n,w=Jg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:A}=w,N=Jg(w,["style"]),_=x==null?void 0:x.src,C=Te.useRef(null),S=Te.useRef(null),O=Te.useCallback(z=>{C.current=z,typeof r=="function"?r(z):r&&(r.current=z)},[r]),[D,M]=Te.useState(!1),{margin:R,cells:k,numCells:L,calculatedImageSettings:B}=zO({value:i,level:a,minVersion:p,boostLevel:m,includeMargin:d,marginSize:v,imageSettings:x,size:s});Te.useEffect(()=>{if(C.current!=null){const z=C.current,$=z.getContext("2d");if(!$)return;let ee=k;const J=S.current,te=B!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;te&&B.excavation!=null&&(ee=UO(k,B.excavation));const Y=window.devicePixelRatio||1;z.height=z.width=s*Y;const K=s/L*Y;$.scale(K,K),$.fillStyle=c,$.fillRect(0,0,L,L),$.fillStyle=h,XU?$.fill(new Path2D(FO(ee,R))):k.forEach(function(V,G){V.forEach(function(Z,se){Z&&$.fillRect(se+R,G+R,1,1)})}),B&&($.globalAlpha=B.opacity),te&&$.drawImage(J,B.x+R,B.y+R,B.w,B.h)}}),Te.useEffect(()=>{M(!1)},[_]);const F=Zg({height:s,width:s},A);let H=null;return _!=null&&(H=Te.createElement("img",{src:_,key:_,style:{display:"none"},onLoad:()=>{M(!0)},ref:S,crossOrigin:B==null?void 0:B.crossOrigin})),Te.createElement(Te.Fragment,null,Te.createElement("canvas",Zg({style:F,height:s,width:s,ref:O,role:"img"},N)),H)});QU.displayName="QRCodeCanvas";var y0=Te.forwardRef(function(e,r){const n=e,{value:i,size:s=jO,level:a=MO,bgColor:c=PO,fgColor:h=DO,includeMargin:d=LO,minVersion:p=BO,boostLevel:m,title:v,marginSize:x,imageSettings:E}=n,w=Jg(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:A,cells:N,numCells:_,calculatedImageSettings:C}=zO({value:i,level:a,minVersion:p,boostLevel:m,includeMargin:d,marginSize:x,imageSettings:E,size:s});let S=N,O=null;E!=null&&C!=null&&(C.excavation!=null&&(S=UO(N,C.excavation)),O=Te.createElement("image",{href:E.src,height:C.h,width:C.w,x:C.x+A,y:C.y+A,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const D=FO(S,A);return Te.createElement("svg",Zg({height:s,width:s,viewBox:`0 0 ${_} ${_}`,ref:r,role:"img"},w),!!v&&Te.createElement("title",null,v),Te.createElement("path",{fill:c,d:`M0,0 h${_}v${_}H0z`,shapeRendering:"crispEdges"}),Te.createElement("path",{fill:h,d:D,shapeRendering:"crispEdges"}),O)});y0.displayName="QRCodeSVG";const ZU=()=>{const t=Is(),e=qr(),{order:r,restaurant:n,orderType:i}=t.state||{};return!r||!n?(e("/home"),null):f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex flex-col items-center justify-center p-6",children:f.jsxs("div",{className:"max-w-md w-full space-y-6",children:[f.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[f.jsx("div",{className:"w-20 h-20 rounded-full luxury-gradient flex items-center justify-center",children:f.jsx(Sc,{className:"w-12 h-12 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-center",children:"Payment Successful!"}),f.jsx("p",{className:"text-muted-foreground text-center",children:i==="dine_in"?"Your table is ready":"Your order is confirmed"})]}),f.jsxs(qe,{className:"p-6 space-y-4 luxury-shadow",children:[f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx("h2",{className:"font-semibold text-lg",children:"Your QR Code"}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:["Show this code at ",n.name," to confirm your booking"]})]}),f.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:f.jsx(y0,{value:r.qr_code,size:200,level:"H",includeMargin:!0})}),f.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),f.jsx("span",{className:"font-medium",children:r.id.slice(0,8)})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),f.jsx("span",{className:"font-medium",children:n.name})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Type"}),f.jsx("span",{className:"font-medium capitalize",children:i.replace("_"," ")})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Amount"}),f.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(De,{onClick:()=>e("/orders"),className:"w-full luxury-gradient",size:"lg",children:"View My Orders"}),f.jsxs(De,{onClick:()=>e("/home"),variant:"outline",className:"w-full",size:"lg",children:[f.jsx(iA,{className:"mr-2 h-5 w-5"}),"Back to Home"]})]}),f.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"A confirmation has been sent to your registered email"})]})})},s_={paid:"bg-blue-500",preparing:"bg-yellow-500",ready:"bg-green-500",served:"bg-purple-500",completed:"bg-gray-500",cancelled:"bg-red-500"},JU=()=>{var d,p,m;const[t,e]=j.useState([]),[r,n]=j.useState(null),[i,s]=j.useState(!1),[a,c]=j.useState(!0);j.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:{user:v}}=await be.auth.getUser();if(!v){ke.error("Please sign in to view your orders"),c(!1);return}const{data:x,error:E}=await be.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          )
        `).eq("customer_id",v.id).order("created_at",{ascending:!1});E&&(console.error("Error fetching orders:",E),ke.error("Failed to load orders")),e(x||[])}catch(v){console.error("Error fetching orders:",v),ke.error("Failed to load orders")}finally{c(!1)}};return a?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):f.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[f.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:f.jsxs("div",{className:"max-w-md mx-auto",children:[f.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Orders"}),f.jsx("p",{className:"text-muted-foreground",children:"Track your bookings and orders"})]})}),f.jsx("div",{className:"max-w-md mx-auto px-6 py-6 space-y-4",children:t.filter(v=>v.status!=="completed").length===0?f.jsxs(qe,{className:"p-8 text-center space-y-2",children:[f.jsx("p",{className:"text-muted-foreground",children:"No active orders"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Your completed orders are now available in your profile under Order History."})]}):t.filter(v=>v.status!=="completed").map(v=>{var x,E,w,A;return f.jsx(qe,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>n(v),children:f.jsxs("div",{className:"flex gap-4 p-4",children:[f.jsx("img",{src:(x=v.restaurants)==null?void 0:x.image_url,alt:(E=v.restaurants)==null?void 0:E.name,className:"w-20 h-20 rounded-lg object-cover"}),f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:(w=v.restaurants)==null?void 0:w.name}),f.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(A=v.order_type)==null?void 0:A.replace("_"," ")})]}),f.jsx(br,{className:`${s_[v.status]} text-white border-0`,children:v.status})]}),f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[f.jsx(za,{className:"h-3 w-3"}),(()=>{const N=new Date(v.created_at),_=String(N.getDate()).padStart(2,"0"),C=String(N.getMonth()+1).padStart(2,"0"),S=N.getFullYear();let O=N.getHours();const D=String(N.getMinutes()).padStart(2,"0"),M=O>=12?"PM":"AM";return O=O%12||12,`${_}/${C}/${S} - ${O}:${D} ${M}`})()]}),f.jsxs("span",{className:"font-semibold text-primary",children:[v.total_amount.toLocaleString()," MMK"]})]})]})]})},v.id)})}),f.jsx(Ts,{open:!!r&&!i,onOpenChange:v=>{v||(n(null),s(!1))},children:f.jsxs(ts,{className:"w-full max-w-md",children:[f.jsx(ro,{children:f.jsx(no,{children:"Order Details"})}),r&&f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-white rounded-xl shadow-sm",children:[f.jsx("div",{className:"text-xs font-medium text-muted-foreground tracking-wide uppercase text-center",children:"Present this QR code at the restaurant"}),f.jsx("button",{type:"button",className:"mt-1",onClick:()=>s(!0),children:f.jsx(y0,{value:r.qr_code,size:220,level:"H",includeMargin:!0})}),f.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center",children:"Tap the QR code to enlarge for easier scanning."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Restaurant"}),f.jsx("span",{className:"font-medium",children:(d=r.restaurants)==null?void 0:d.name})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Order Type"}),f.jsx("span",{className:"font-medium capitalize",children:(p=r.order_type)==null?void 0:p.replace("_"," ")})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Payment Method"}),f.jsx("span",{className:"font-medium uppercase",children:r.payment_method})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Status"}),f.jsx(br,{className:`${s_[r.status]} text-white border-0`,children:r.status})]}),f.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t",children:[f.jsx("span",{className:"font-semibold",children:"Total Amount"}),f.jsxs("span",{className:"font-bold text-primary",children:[r.total_amount.toLocaleString()," MMK"]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-semibold text-sm",children:"Items"}),(m=r.order_items)==null?void 0:m.map((v,x)=>f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsxs("span",{children:[v.name," x ",v.quantity]}),f.jsxs("span",{children:[(v.price*v.quantity).toLocaleString()," MMK"]})]},x))]})]})]})}),f.jsx(Ts,{open:!!r&&i,onOpenChange:v=>{v||s(!1)},children:f.jsx(ts,{className:"max-w-sm w-full bg-background border-none shadow-none p-0 flex flex-col items-center justify-center",children:r&&f.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[f.jsx("div",{className:"text-[0.65rem] font-medium text-muted-foreground text-center mt-2",children:"Show this QR code to the restaurant for scanning"}),f.jsx("div",{className:"w-full flex justify-center",children:f.jsx(y0,{value:r.qr_code,size:360,level:"H",includeMargin:!1})}),f.jsx(De,{variant:"outline",size:"sm",className:"mt-1 mb-2 w-32",onClick:()=>s(!1),children:"Close"})]})})}),f.jsx(pp,{})]})};function ev(t,[e,r]){return Math.min(r,Math.max(e,t))}function ez(t,e){return j.useReducer((r,n)=>e[r][n]??r,t)}var Nx="ScrollArea",[$O,TQ]=En(Nx),[tz,Oi]=$O(Nx),HO=j.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:s=600,...a}=t,[c,h]=j.useState(null),[d,p]=j.useState(null),[m,v]=j.useState(null),[x,E]=j.useState(null),[w,A]=j.useState(null),[N,_]=j.useState(0),[C,S]=j.useState(0),[O,D]=j.useState(!1),[M,R]=j.useState(!1),k=ot(e,B=>h(B)),L=Yc(i);return f.jsx(tz,{scope:r,type:n,dir:L,scrollHideDelay:s,scrollArea:c,viewport:d,onViewportChange:p,content:m,onContentChange:v,scrollbarX:x,onScrollbarXChange:E,scrollbarXEnabled:O,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:A,scrollbarYEnabled:M,onScrollbarYEnabledChange:R,onCornerWidthChange:_,onCornerHeightChange:S,children:f.jsx(We.div,{dir:L,...a,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});HO.displayName=Nx;var VO="ScrollAreaViewport",qO=j.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,nonce:i,...s}=t,a=Oi(VO,r),c=j.useRef(null),h=ot(e,c,a.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),f.jsx(We.div,{"data-radix-scroll-area-viewport":"",...s,ref:h,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:f.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});qO.displayName=VO;var Rs="ScrollAreaScrollbar",Tx=j.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Oi(Rs,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,c=t.orientation==="horizontal";return j.useEffect(()=>(c?s(!0):a(!0),()=>{c?s(!1):a(!1)}),[c,s,a]),i.type==="hover"?f.jsx(rz,{...n,ref:e,forceMount:r}):i.type==="scroll"?f.jsx(nz,{...n,ref:e,forceMount:r}):i.type==="auto"?f.jsx(WO,{...n,ref:e,forceMount:r}):i.type==="always"?f.jsx(Ox,{...n,ref:e}):null});Tx.displayName=Rs;var rz=j.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Oi(Rs,t.__scopeScrollArea),[s,a]=j.useState(!1);return j.useEffect(()=>{const c=i.scrollArea;let h=0;if(c){const d=()=>{window.clearTimeout(h),a(!0)},p=()=>{h=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(h),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",p)}}},[i.scrollArea,i.scrollHideDelay]),f.jsx(dn,{present:r||s,children:f.jsx(WO,{"data-state":s?"visible":"hidden",...n,ref:e})})}),nz=j.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=Oi(Rs,t.__scopeScrollArea),s=t.orientation==="horizontal",a=bp(()=>h("SCROLL_END"),100),[c,h]=ez("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>h("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,i.scrollHideDelay,h]),j.useEffect(()=>{const d=i.viewport,p=s?"scrollLeft":"scrollTop";if(d){let m=d[p];const v=()=>{const x=d[p];m!==x&&(h("SCROLL"),a()),m=x};return d.addEventListener("scroll",v),()=>d.removeEventListener("scroll",v)}},[i.viewport,s,h,a]),f.jsx(dn,{present:r||c!=="hidden",children:f.jsx(Ox,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Pe(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Pe(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),WO=j.forwardRef((t,e)=>{const r=Oi(Rs,t.__scopeScrollArea),{forceMount:n,...i}=t,[s,a]=j.useState(!1),c=t.orientation==="horizontal",h=bp(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;a(c?d:p)}},10);return Dc(r.viewport,h),Dc(r.content,h),f.jsx(dn,{present:n||s,children:f.jsx(Ox,{"data-state":s?"visible":"hidden",...i,ref:e})})}),Ox=j.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,i=Oi(Rs,t.__scopeScrollArea),s=j.useRef(null),a=j.useRef(0),[c,h]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=QO(c.viewport,c.content),p={...n,sizes:c,onSizesChange:h,hasThumb:d>0&&d<1,onThumbChange:v=>s.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function m(v,x){return cz(v,a.current,c,x)}return r==="horizontal"?f.jsx(iz,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollLeft,x=o_(v,c,i.dir);s.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=m(v,i.dir))}}):r==="vertical"?f.jsx(sz,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollTop,x=o_(v,c);s.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=m(v))}}):null}),iz=j.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=Oi(Rs,t.__scopeScrollArea),[a,c]=j.useState(),h=j.useRef(null),d=ot(e,h,s.onScrollbarXChange);return j.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),f.jsx(YO,{"data-orientation":"horizontal",...i,ref:d,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wp(r)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(s.viewport){const v=s.viewport.scrollLeft+p.deltaX;t.onWheelScroll(v),JO(v,m)&&p.preventDefault()}},onResize:()=>{h.current&&s.viewport&&a&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:w0(a.paddingLeft),paddingEnd:w0(a.paddingRight)}})}})}),sz=j.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...i}=t,s=Oi(Rs,t.__scopeScrollArea),[a,c]=j.useState(),h=j.useRef(null),d=ot(e,h,s.onScrollbarYChange);return j.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),f.jsx(YO,{"data-orientation":"vertical",...i,ref:d,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wp(r)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(s.viewport){const v=s.viewport.scrollTop+p.deltaY;t.onWheelScroll(v),JO(v,m)&&p.preventDefault()}},onResize:()=>{h.current&&s.viewport&&a&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:w0(a.paddingTop),paddingEnd:w0(a.paddingBottom)}})}})}),[oz,GO]=$O(Rs),YO=j.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:c,onThumbPositionChange:h,onDragScroll:d,onWheelScroll:p,onResize:m,...v}=t,x=Oi(Rs,r),[E,w]=j.useState(null),A=ot(e,k=>w(k)),N=j.useRef(null),_=j.useRef(""),C=x.viewport,S=n.content-n.viewport,O=pr(p),D=pr(h),M=bp(m,10);function R(k){if(N.current){const L=k.clientX-N.current.left,B=k.clientY-N.current.top;d({x:L,y:B})}}return j.useEffect(()=>{const k=L=>{const B=L.target;(E==null?void 0:E.contains(B))&&O(L,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[C,E,S,O]),j.useEffect(D,[n,D]),Dc(E,M),Dc(x.content,M),f.jsx(oz,{scope:r,scrollbar:E,hasThumb:i,onThumbChange:pr(s),onThumbPointerUp:pr(a),onThumbPositionChange:D,onThumbPointerDown:pr(c),children:f.jsx(We.div,{...v,ref:A,style:{position:"absolute",...v.style},onPointerDown:Pe(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),N.current=E.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),R(k))}),onPointerMove:Pe(t.onPointerMove,R),onPointerUp:Pe(t.onPointerUp,k=>{const L=k.target;L.hasPointerCapture(k.pointerId)&&L.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=_.current,x.viewport&&(x.viewport.style.scrollBehavior=""),N.current=null})})})}),x0="ScrollAreaThumb",KO=j.forwardRef((t,e)=>{const{forceMount:r,...n}=t,i=GO(x0,t.__scopeScrollArea);return f.jsx(dn,{present:r||i.hasThumb,children:f.jsx(az,{ref:e,...n})})}),az=j.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...i}=t,s=Oi(x0,r),a=GO(x0,r),{onThumbPositionChange:c}=a,h=ot(e,m=>a.onThumbChange(m)),d=j.useRef(void 0),p=bp(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const m=s.viewport;if(m){const v=()=>{if(p(),!d.current){const x=uz(m,c);d.current=x,c()}};return c(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[s.viewport,p,c]),f.jsx(We.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Pe(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),E=m.clientX-x.left,w=m.clientY-x.top;a.onThumbPointerDown({x:E,y:w})}),onPointerUp:Pe(t.onPointerUp,a.onThumbPointerUp)})});KO.displayName=x0;var Ix="ScrollAreaCorner",XO=j.forwardRef((t,e)=>{const r=Oi(Ix,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?f.jsx(lz,{...t,ref:e}):null});XO.displayName=Ix;var lz=j.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,i=Oi(Ix,r),[s,a]=j.useState(0),[c,h]=j.useState(0),d=!!(s&&c);return Dc(i.scrollbarX,()=>{var m;const p=((m=i.scrollbarX)==null?void 0:m.offsetHeight)||0;i.onCornerHeightChange(p),h(p)}),Dc(i.scrollbarY,()=>{var m;const p=((m=i.scrollbarY)==null?void 0:m.offsetWidth)||0;i.onCornerWidthChange(p),a(p)}),d?f.jsx(We.div,{...n,ref:e,style:{width:s,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function w0(t){return t?parseInt(t,10):0}function QO(t,e){const r=t/e;return isNaN(r)?0:r}function wp(t){const e=QO(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function cz(t,e,r,n="ltr"){const i=wp(r),s=i/2,a=e||s,c=i-a,h=r.scrollbar.paddingStart+a,d=r.scrollbar.size-r.scrollbar.paddingEnd-c,p=r.content-r.viewport,m=n==="ltr"?[0,p]:[p*-1,0];return ZO([h,d],m)(t)}function o_(t,e,r="ltr"){const n=wp(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,c=s-n,h=r==="ltr"?[0,a]:[a*-1,0],d=ev(t,h);return ZO([0,a],[0,c])(d)}function ZO(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function JO(t,e){return t>0&&t<e}var uz=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},a=r.left!==s.left,c=r.top!==s.top;(a||c)&&e(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function bp(t,e){const r=pr(t),n=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),j.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Dc(t,e){const r=pr(e);_r(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var e4=HO,dz=qO,fz=XO;const _p=j.forwardRef(({className:t,children:e,...r},n)=>f.jsxs(e4,{ref:n,className:Be("relative overflow-hidden",t),...r,children:[f.jsx(dz,{className:"h-full w-full rounded-[inherit]",children:e}),f.jsx(t4,{}),f.jsx(fz,{})]}));_p.displayName=e4.displayName;const t4=j.forwardRef(({className:t,orientation:e="vertical",...r},n)=>f.jsx(Tx,{ref:n,orientation:e,className:Be("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:f.jsx(KO,{className:"relative flex-1 rounded-full bg-border"})}));t4.displayName=Tx.displayName;const hz=()=>{const{user:t,signOut:e}=Wr(),r=qr(),[n,i]=j.useState(null),[s,a]=j.useState([]),[c,h]=j.useState(!1),[d,p]=j.useState({full_name:"",phone:""}),{loading:m,summary:v,badgeLabel:x,badgeDescription:E,badgeIcon:w}=xx(),A=()=>{const O="w-4 h-4";switch(w){case"compass":return f.jsx(rA,{className:O});case"star":return f.jsx(Cc,{className:O});case"shield":return f.jsx(Xh,{className:O});case"crown":return f.jsx(nA,{className:O});case"sparkles":default:return f.jsx(Gd,{className:O})}};j.useEffect(()=>{t&&(N(),_())},[t]);const N=async()=>{try{const{data:O,error:D}=await be.from("profiles").select("*").eq("id",t==null?void 0:t.id).single();if(D)throw D;i(O),p({full_name:O.full_name||"",phone:O.phone||""})}catch(O){console.error("Error fetching profile:",O)}},_=async()=>{if(t)try{const{data:O,error:D}=await be.from("orders").select(`
          *,
          restaurants (
            name,
            image_url,
            address
          ),
          order_items
        `).eq("customer_id",t.id).eq("status","completed").order("created_at",{ascending:!1});if(D)throw D;a(O||[])}catch(O){console.error("Error fetching order history:",O)}},C=async()=>{try{const{error:O}=await be.from("profiles").update({full_name:d.full_name,phone:d.phone}).eq("id",t==null?void 0:t.id);if(O)throw O;ke.success("Profile updated successfully"),h(!1),N()}catch(O){console.error("Error updating profile:",O),ke.error("Failed to update profile")}},S=async()=>{await e(),r("/auth"),ke.success("Signed out successfully")};return f.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[f.jsx("div",{className:"bg-card border-b border-border px-6 py-6",children:f.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Profile"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings"})]}),f.jsx(De,{onClick:S,variant:"outline",size:"icon",className:"shrink-0",children:f.jsx(Z0,{className:"h-4 w-4"})})]})}),f.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[f.jsxs(qe,{className:"p-6 space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"w-16 h-16 rounded-full luxury-gradient flex items-center justify-center relative",children:[f.jsx(Gi,{className:"w-8 h-8 text-white"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-background border border-yellow-400 flex items-center justify-center shadow-sm",children:A()})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-xl font-semibold",children:(n==null?void 0:n.full_name)||"User"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email}),f.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[f.jsx(br,{className:"px-2 py-0.5 text-[9px] rounded-full bg-primary/10 text-primary border-primary/20",children:m?"Calculating badge...":x||"Newbie"}),v&&f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"inline-flex items-baseline gap-1 px-2 py-0.5 rounded-full bg-primary/10 border border-primary/30",children:[f.jsx("span",{className:"text-[11px] font-semibold text-primary",children:v.total_points}),f.jsx("span",{className:"text-[8px] uppercase tracking-wide text-primary/80",children:"pts"})]}),f.jsxs("span",{className:"text-[9px] text-muted-foreground/80",children:[v.total_completed_orders," completed orders"]})]})]})]}),f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>h(!c),children:f.jsx(md,{className:"h-4 w-4"})})]}),f.jsx("div",{className:"text-[10px] text-muted-foreground bg-muted/40 rounded-xl px-3 py-2",children:E}),c?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"full_name",children:"Full Name"}),f.jsx(mt,{id:"full_name",value:d.full_name,onChange:O=>p({...d,full_name:O.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"phone",children:"Phone"}),f.jsx(mt,{id:"phone",value:d.phone,onChange:O=>p({...d,phone:O.target.value})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(De,{onClick:C,className:"flex-1 luxury-gradient",children:"Save Changes"}),f.jsx(De,{variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[f.jsx(Gi,{className:"h-4 w-4 text-muted-foreground"}),f.jsx("span",{className:"text-muted-foreground",children:"Name:"}),f.jsx("span",{className:"font-medium",children:(n==null?void 0:n.full_name)||"Not set"})]}),f.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[f.jsx(RM,{className:"h-4 w-4 text-muted-foreground"}),f.jsx("span",{className:"text-muted-foreground",children:"Email:"}),f.jsx("span",{className:"font-medium",children:t==null?void 0:t.email})]}),f.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[f.jsx(sA,{className:"h-4 w-4 text-muted-foreground"}),f.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),f.jsx("span",{className:"font-medium",children:(n==null?void 0:n.phone)||"Not set"})]})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Orders History"}),f.jsxs(qe,{className:"p-4 luxury-gradient text-white flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-xs uppercase tracking-wide opacity-80",children:"Total Spent"}),f.jsxs("p",{className:"text-2xl font-semibold",children:[s.reduce((O,D)=>O+(D.total_amount||0),0).toLocaleString()," ","MMK"]})]}),f.jsxs("div",{className:"text-right text-[10px] opacity-80",children:[f.jsx("p",{children:"Completed orders only"}),f.jsxs("p",{children:[s.length," orders"]})]})]}),s.length===0?f.jsx(qe,{className:"p-4 text-sm text-muted-foreground",children:"No completed orders yet. Once your orders are completed, they will appear here."}):f.jsx(qe,{className:"p-0",children:f.jsx(_p,{className:"max-h-72",children:f.jsx("div",{className:"divide-y",children:s.map(O=>{var D,M,R,k,L;return f.jsxs("div",{className:"px-4 py-3 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:(D=O.restaurants)==null?void 0:D.image_url,alt:(M=O.restaurants)==null?void 0:M.name,className:"w-10 h-10 rounded-md object-cover"}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium",children:(R=O.restaurants)==null?void 0:R.name}),f.jsxs("p",{className:"text-[11px] text-muted-foreground capitalize",children:[(k=O.order_type)==null?void 0:k.replace("_"," ")," "," ",new Date(O.created_at).toLocaleDateString()]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"text-xs font-semibold text-primary",children:[(L=O.total_amount)==null?void 0:L.toLocaleString()," MMK"]}),f.jsx(br,{className:"mt-1 bg-gray-500 text-white border-0 text-[9px]",children:"Completed"})]})]})})]}),Array.isArray(O.order_items)&&O.order_items.length>0&&f.jsx("div",{className:"pl-13 text-[10px] text-muted-foreground leading-snug",children:O.order_items.map(B=>`${B.name} x${B.quantity}`).join("  ")})]},O.id)})})})})]})]}),f.jsx(pp,{})]})};var r4={exports:{}},n4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=j;function pz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mz=typeof Object.is=="function"?Object.is:pz,gz=Lc.useState,vz=Lc.useEffect,yz=Lc.useLayoutEffect,xz=Lc.useDebugValue;function wz(t,e){var r=e(),n=gz({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return yz(function(){i.value=r,i.getSnapshot=e,a1(i)&&s({inst:i})},[t,r,e]),vz(function(){return a1(i)&&s({inst:i}),t(function(){a1(i)&&s({inst:i})})},[t]),xz(r),r}function a1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!mz(t,r)}catch{return!0}}function bz(t,e){return e()}var _z=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bz:wz;n4.useSyncExternalStore=Lc.useSyncExternalStore!==void 0?Lc.useSyncExternalStore:_z;r4.exports=n4;var Ez=r4.exports;function Sz(){return Ez.useSyncExternalStore(Cz,()=>!0,()=>!1)}function Cz(){return()=>{}}var Rx="Avatar",[Az,OQ]=En(Rx),[Nz,i4]=Az(Rx),s4=j.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,s]=j.useState("idle");return f.jsx(Nz,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:f.jsx(We.span,{...n,ref:e})})});s4.displayName=Rx;var o4="AvatarImage",a4=j.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...s}=t,a=i4(o4,r),c=Tz(n,s),h=pr(d=>{i(d),a.onImageLoadingStatusChange(d)});return _r(()=>{c!=="idle"&&h(c)},[c,h]),c==="loaded"?f.jsx(We.img,{...s,ref:e,src:n}):null});a4.displayName=o4;var l4="AvatarFallback",c4=j.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,s=i4(l4,r),[a,c]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const h=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(h)}},[n]),a&&s.imageLoadingStatus!=="loaded"?f.jsx(We.span,{...i,ref:e}):null});c4.displayName=l4;function a_(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Tz(t,{referrerPolicy:e,crossOrigin:r}){const n=Sz(),i=j.useRef(null),s=n?(i.current||(i.current=new window.Image),i.current):null,[a,c]=j.useState(()=>a_(s,t));return _r(()=>{c(a_(s,t))},[s,t]),_r(()=>{const h=m=>()=>{c(m)};if(!s)return;const d=h("loaded"),p=h("error");return s.addEventListener("load",d),s.addEventListener("error",p),e&&(s.referrerPolicy=e),typeof r=="string"&&(s.crossOrigin=r),()=>{s.removeEventListener("load",d),s.removeEventListener("error",p)}},[s,r,e]),a}var u4=s4,d4=a4,f4=c4;const h4=j.forwardRef(({className:t,...e},r)=>f.jsx(u4,{ref:r,className:Be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));h4.displayName=u4.displayName;const p4=j.forwardRef(({className:t,...e},r)=>f.jsx(d4,{ref:r,className:Be("aspect-square h-full w-full",t),...e}));p4.displayName=d4.displayName;const m4=j.forwardRef(({className:t,...e},r)=>f.jsx(f4,{ref:r,className:Be("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));m4.displayName=f4.displayName;const Jd=j.forwardRef(({className:t,...e},r)=>f.jsx("textarea",{className:Be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Jd.displayName="Textarea";function Rl({className:t,...e}){return f.jsx("div",{className:Be("relative overflow-hidden rounded-md bg-muted/70","before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_1.2s_infinite]",t),...e})}const Oz=()=>{const t=qr();Wr(),xx();const[e,r]=j.useState([]),[n,i]=j.useState({}),[s,a]=j.useState(new Set),[c,h]=j.useState(new Set),[d,p]=j.useState({}),[m,v]=j.useState(!0),[x,E]=j.useState({}),[w,A]=j.useState({}),[N,_]=j.useState(null);j.useEffect(()=>{(async()=>{var F;const{data:L,error:B}=await be.auth.getUser();B&&console.error("Error getting current user for blog comments:",B),_(((F=L==null?void 0:L.user)==null?void 0:F.id)??null),await C()})()},[]);const C=async()=>{try{v(!0);const{data:k,error:L}=await be.from("blog_posts").select(`
          *,
          restaurants (
            name,
            image_url
          ),
          comments_count:blog_comments(count)
        `).eq("is_published",!0).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if(L){console.error("Error loading blog posts",L),r([]);return}const B=(k==null?void 0:k.map(F=>{var H;return{...F,comments_count:Array.isArray(F.comments_count)&&F.comments_count.length>0&&typeof((H=F.comments_count[0])==null?void 0:H.count)=="number"?F.comments_count[0].count:0}}))||[];r(B)}catch(k){console.error("Unexpected error loading blog posts",k),r([])}finally{v(!1)}},S=k=>{h(L=>{const B=new Set(L);return B.has(k)?B.delete(k):B.add(k),B})},O=async k=>{const L=new Set(s);if(L.has(k)){L.delete(k),a(L);return}L.add(k),a(L),n[k]||await D(k)},D=async k=>{try{E(H=>({...H,[k]:!0}));let{data:L,error:B}=await be.from("blog_comments_with_profiles").select("*").eq("blog_post_id",k).order("created_at",{ascending:!0});if(B){console.warn("View query failed, trying original approach:",B);const H=await be.from("blog_comments").select(`
            *,
            profiles:customer_id (
              full_name
            )
            `).eq("blog_post_id",k).eq("is_deleted",!1).order("created_at",{ascending:!0});L=H.data,B=H.error}if(B){console.error("Error loading comments",B);return}const F={...n};F[k]=L||[],i(F)}catch(L){console.error("Unexpected error loading comments",L)}finally{E(L=>({...L,[k]:!1}))}},M=async k=>{const L=(d[k]||"").trim();if(!(!L||!N))try{A(H=>({...H,[k]:!0}));const{data:B,error:F}=await be.from("blog_comments").insert({blog_post_id:k,customer_id:N,content:L}).select("*").single();if(F){console.error("Error adding comment",F);return}if(setTimeout(()=>{D(k)},100),i(H=>{const z=H[k]||[];return{...H,[k]:[...z,B]}}),p(H=>({...H,[k]:""})),r(H=>H.map(z=>z.id===k?{...z,comments_count:(z.comments_count||0)+1}:z)),!s.has(k)){const H=new Set(s);H.add(k),a(H)}}catch(B){console.error("Unexpected error adding comment",B)}finally{A(B=>({...B,[k]:!1}))}},R=()=>f.jsxs(qe,{className:"p-4 space-y-3 bg-card/60 backdrop-blur-sm border-border/40 animate-pulse",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Rl,{className:"w-10 h-10 rounded-full"}),f.jsxs("div",{className:"space-y-1 flex-1",children:[f.jsx(Rl,{className:"h-3 w-24"}),f.jsx(Rl,{className:"h-3 w-40"})]})]}),f.jsx(Rl,{className:"h-4 w-3/4"}),f.jsx(Rl,{className:"h-3 w-full"}),f.jsx(Rl,{className:"h-3 w-5/6"})]});return f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10 pb-20",children:[f.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:f.jsxs("div",{className:"max-w-md mx-auto px-5 py-4 flex items-center justify-between gap-3",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gd,{className:"w-4 h-4 text-primary"}),f.jsx("p",{className:"text-[10px] uppercase tracking-[0.18em] text-primary/80",children:"Stories from our restaurants"})]}),f.jsx("h1",{className:"text-2xl font-semibold text-foreground leading-tight",children:"Food Journal"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Discover promotions, new menus, and behind-the-scenes stories from all our partners."})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx(De,{variant:"outline",size:"icon",className:"rounded-full border-border/70 hover:bg-primary/5",onClick:C,children:f.jsx(_b,{className:"w-4 h-4 rotate-90"})})})]})}),f.jsxs("div",{className:"max-w-md mx-auto px-5 pt-4 pb-4 space-y-4",children:[m&&f.jsxs(f.Fragment,{children:[R(),R()]}),!m&&e.length===0&&f.jsx(qe,{className:"p-6 text-center bg-card/60 backdrop-blur-sm border-dashed border-border/60",children:f.jsx("p",{className:"text-sm text-muted-foreground",children:"No blog posts yet. Restaurants will share their promotions and menu highlights here."})}),!m&&e.map(k=>{var H,z,$,ee,J;const L=n[k.id]||[],B=s.has(k.id),F=(((H=k.restaurants)==null?void 0:H.name)||"R").split(" ").map(te=>te[0]).join("").slice(0,2).toUpperCase();return f.jsxs(qe,{id:`blog-post-${k.id}`,className:Be("group relative overflow-hidden border-border/40 bg-card/90 backdrop-blur-md transition-all duration-300","hover:-translate-y-0.5 hover:shadow-[0_14px_40px_rgba(15,23,42,0.12)]"),children:[k.is_pinned&&f.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-primary/60 to-amber-400"}),f.jsxs("div",{className:"p-4 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(h4,{className:"w-9 h-9 ring-1 ring-primary/15 shadow-sm",children:[((z=k.restaurants)==null?void 0:z.image_url)&&f.jsx(p4,{src:k.restaurants.image_url,alt:(($=k.restaurants)==null?void 0:$.name)||"Restaurant"}),f.jsx(m4,{className:"bg-primary/10 text-[9px] text-primary",children:F})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-[11px] font-semibold text-foreground truncate",children:((ee=k.restaurants)==null?void 0:ee.name)||"Featured Restaurant"}),f.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-muted-foreground",children:[f.jsxs("span",{className:"inline-flex items-center gap-1",children:[f.jsx(za,{className:"w-3 h-3"}),new Date(k.created_at).toLocaleDateString()]}),k.is_pinned&&f.jsx(br,{variant:"outline",className:"h-4 px-1.5 text-[8px] border-primary/40 text-primary bg-primary/5",children:"Highlight"})]})]})]}),k.hero_image_url&&f.jsx("div",{className:"mt-1 overflow-hidden rounded-xl border border-border/40 bg-muted/40 cursor-pointer",onClick:()=>S(k.id),children:f.jsx("img",{src:k.hero_image_url,alt:k.title,className:"w-full h-32 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})}),f.jsxs("div",{className:"space-y-1 cursor-pointer",onClick:()=>S(k.id),children:[f.jsx("h2",{className:"text-base font-semibold text-foreground leading-relaxed",children:k.title}),c.has(k.id)?f.jsx("p",{className:"text-[11px] text-muted-foreground font-sans whitespace-pre-line leading-loose",children:k.content}):f.jsx("p",{className:"text-[11px] text-muted-foreground font-sans line-clamp-3 leading-loose",children:k.excerpt||k.content.slice(0,180).concat(k.content.length>180?"":"")})]}),f.jsxs("div",{className:"flex items-center justify-between pt-2 gap-3",children:[f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsxs("button",{type:"button",onClick:()=>S(k.id),className:"inline-flex items-center gap-1 text-[9px] text-primary/90 hover:text-primary underline-offset-2 hover:underline transition-colors",children:[c.has(k.id)?"Show less":"Read more",f.jsx(_b,{className:Be("w-3 h-3 transition-transform",c.has(k.id)?"rotate-180":"translate-x-0")})]}),f.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-muted-foreground",children:[f.jsx(gh,{className:"w-3 h-3"}),f.jsx("span",{children:(()=>{const te=typeof k.comments_count=="number"?k.comments_count:L.length||0;return`${te} ${te===1?"comment":"comments"}`})()})]})]}),f.jsxs(De,{variant:"ghost",size:"sm",className:"h-7 px-2 text-[9px] gap-1 text-primary/90 hover:bg-primary/5",onClick:()=>O(k.id),children:[B?"Hide feedback":"View feedback",f.jsx(gy,{className:Be("w-3 h-3 transition-transform",B?"rotate-180":"rotate-0")})]})]})]}),B&&f.jsxs("div",{className:"border-t border-border/30 bg-muted/30 px-3 pb-3 pt-2 space-y-2",children:[x[k.id]&&f.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Loading comments"}),!x[k.id]&&L.length===0&&f.jsx("p",{className:"text-[9px] text-muted-foreground",children:"No comments yet. Be the first to share your thoughts."}),!x[k.id]&&L.filter(te=>te.parent_comment_id===null||te.parent_comment_id===void 0).map(te=>{const Y=te.display_name||`Guest ${te.customer_id.slice(0,6).toUpperCase()}`,K=Y.split(" ").map(V=>V[0]).join("").slice(0,2).toUpperCase();return f.jsx("div",{className:"space-y-2",children:f.jsxs("div",{className:"flex items-start gap-2 text-[9px] bg-background/60 border border-border/20 rounded-xl px-2 py-1.5",children:[f.jsx("div",{className:"mt-0.5 w-6 h-6 rounded-full bg-gradient-to-br from-amber-400 via-yellow-300 to-amber-500 text-[8px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-amber-300/70",children:K}),f.jsxs("div",{className:"flex-1 space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[9px] text-foreground font-medium truncate max-w-[120px]",children:Y}),f.jsxs("span",{className:"text-[8px] text-muted-foreground whitespace-nowrap",children:[new Date(te.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(te.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),f.jsx("p",{className:"text-[9px] text-foreground leading-snug",children:te.content}),(()=>{const V=L.filter(G=>G.parent_comment_id===te.id);return V.length===0?null:f.jsx("div",{className:"space-y-1 mt-2 border-l-2 border-border/40 pl-2",children:V.map(G=>{const Z=G.display_name||`Guest ${G.customer_id.slice(0,6).toUpperCase()}`,se=Z.split(" ").map(ae=>ae[0]).join("").slice(0,2).toUpperCase();return f.jsxs("div",{className:"flex items-start gap-1 opacity-80",children:[f.jsx("div",{className:"mt-0.5 w-5 h-5 rounded-full bg-gradient-to-br from-emerald-400 via-emerald-300 to-emerald-500 text-[7px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-emerald-300/70",children:se}),f.jsxs("div",{className:"flex-1 space-y-0.5",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-[8px] text-foreground font-medium truncate max-w-[100px]",children:[Z," (Reply)"]}),f.jsxs("span",{className:"text-[7px] text-muted-foreground whitespace-nowrap",children:[new Date(G.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(G.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),f.jsx("p",{className:"text-[8px] text-foreground leading-snug",children:G.content})]})]},G.id)})})})()]})]})},te.id)}),f.jsxs("div",{className:"pt-1.5",children:[f.jsx(Jd,{placeholder:N?"Add a thoughtful comment about this promotion or menu":"Sign in to leave a comment.",value:d[k.id]||"",onChange:te=>p(Y=>({...Y,[k.id]:te.target.value})),disabled:!N||!!w[k.id],className:"h-14 text-[9px] resize-none border-border/40 bg-background/80 focus-visible:ring-primary/40"}),f.jsxs("div",{className:"flex justify-end mt-1 gap-2",children:[!N&&f.jsx(De,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[8px] text-muted-foreground",onClick:()=>t("/auth"),children:"Sign in to comment"}),f.jsx(De,{size:"sm",className:"h-6 px-3 text-[8px] rounded-full bg-primary/90 hover:bg-primary shadow-sm",disabled:!N||!((J=d[k.id])!=null&&J.trim())||!!w[k.id],onClick:()=>M(k.id),children:w[k.id]?"Posting":"Post comment"})]})]})]})]},k.id)})]}),f.jsx(pp,{})]})};var Iz=[" ","Enter","ArrowUp","ArrowDown"],Rz=[" ","Enter"],rl="Select",[Ep,Sp,kz]=Y0(rl),[Xc,IQ]=En(rl,[kz,qc]),Cp=qc(),[jz,ua]=Xc(rl),[Mz,Pz]=Xc(rl),g4=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:c,onValueChange:h,dir:d,name:p,autoComplete:m,disabled:v,required:x,form:E}=t,w=Cp(e),[A,N]=j.useState(null),[_,C]=j.useState(null),[S,O]=j.useState(!1),D=Yc(d),[M,R]=Ss({prop:n,defaultProp:i??!1,onChange:s,caller:rl}),[k,L]=Ss({prop:a,defaultProp:c,onChange:h,caller:rl}),B=j.useRef(null),F=A?E||!!A.closest("form"):!0,[H,z]=j.useState(new Set),$=Array.from(H).map(ee=>ee.props.value).join(";");return f.jsx(Iy,{...w,children:f.jsxs(jz,{required:x,scope:e,trigger:A,onTriggerChange:N,valueNode:_,onValueNodeChange:C,valueNodeHasChildren:S,onValueNodeHasChildrenChange:O,contentId:Xi(),value:k,onValueChange:L,open:M,onOpenChange:R,dir:D,triggerPointerDownPosRef:B,disabled:v,children:[f.jsx(Ep.Provider,{scope:e,children:f.jsx(Mz,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(ee=>{z(J=>new Set(J).add(ee))},[]),onNativeOptionRemove:j.useCallback(ee=>{z(J=>{const te=new Set(J);return te.delete(ee),te})},[]),children:r})}),F?f.jsxs(U4,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:m,value:k,onChange:ee=>L(ee.target.value),disabled:v,form:E,children:[k===void 0?f.jsx("option",{value:""}):null,Array.from(H)]},$):null]})})};g4.displayName=rl;var v4="SelectTrigger",y4=j.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,s=Cp(r),a=ua(v4,r),c=a.disabled||n,h=ot(e,a.onTriggerChange),d=Sp(r),p=j.useRef("touch"),[m,v,x]=$4(w=>{const A=d().filter(C=>!C.disabled),N=A.find(C=>C.value===a.value),_=H4(A,w,N);_!==void 0&&a.onValueChange(_.value)}),E=w=>{c||(a.onOpenChange(!0),x()),w&&(a.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return f.jsx(Ry,{asChild:!0,...s,children:f.jsx(We.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":z4(a.value)?"":void 0,...i,ref:h,onClick:Pe(i.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&E(w)}),onPointerDown:Pe(i.onPointerDown,w=>{p.current=w.pointerType;const A=w.target;A.hasPointerCapture(w.pointerId)&&A.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(E(w),w.preventDefault())}),onKeyDown:Pe(i.onKeyDown,w=>{const A=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(A&&w.key===" ")&&Iz.includes(w.key)&&(E(),w.preventDefault())})})})});y4.displayName=v4;var x4="SelectValue",w4=j.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:a="",...c}=t,h=ua(x4,r),{onValueNodeHasChildrenChange:d}=h,p=s!==void 0,m=ot(e,h.onValueNodeChange);return _r(()=>{d(p)},[d,p]),f.jsx(We.span,{...c,ref:m,style:{pointerEvents:"none"},children:z4(h.value)?f.jsx(f.Fragment,{children:a}):s})});w4.displayName=x4;var Dz="SelectIcon",b4=j.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return f.jsx(We.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});b4.displayName=Dz;var Lz="SelectPortal",_4=t=>f.jsx(Vd,{asChild:!0,...t});_4.displayName=Lz;var nl="SelectContent",E4=j.forwardRef((t,e)=>{const r=ua(nl,t.__scopeSelect),[n,i]=j.useState();if(_r(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?sa.createPortal(f.jsx(S4,{scope:t.__scopeSelect,children:f.jsx(Ep.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(C4,{...t,ref:e})});E4.displayName=nl;var Li=10,[S4,da]=Xc(nl),Bz="SelectContentImpl",Fz=Qa("SelectContent.RemoveScroll"),C4=j.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:c,sideOffset:h,align:d,alignOffset:p,arrowPadding:m,collisionBoundary:v,collisionPadding:x,sticky:E,hideWhenDetached:w,avoidCollisions:A,...N}=t,_=ua(nl,r),[C,S]=j.useState(null),[O,D]=j.useState(null),M=ot(e,ne=>S(ne)),[R,k]=j.useState(null),[L,B]=j.useState(null),F=Sp(r),[H,z]=j.useState(!1),$=j.useRef(!1);j.useEffect(()=>{if(C)return bx(C)},[C]),wx();const ee=j.useCallback(ne=>{const[ue,...fe]=F().map(Se=>Se.ref.current),[oe]=fe.slice(-1),ve=document.activeElement;for(const Se of ne)if(Se===ve||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===ue&&O&&(O.scrollTop=0),Se===oe&&O&&(O.scrollTop=O.scrollHeight),Se==null||Se.focus(),document.activeElement!==ve))return},[F,O]),J=j.useCallback(()=>ee([R,C]),[ee,R,C]);j.useEffect(()=>{H&&J()},[H,J]);const{onOpenChange:te,triggerPointerDownPosRef:Y}=_;j.useEffect(()=>{if(C){let ne={x:0,y:0};const ue=oe=>{var ve,Se;ne={x:Math.abs(Math.round(oe.pageX)-(((ve=Y.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((Se=Y.current)==null?void 0:Se.y)??0))}},fe=oe=>{ne.x<=10&&ne.y<=10?oe.preventDefault():C.contains(oe.target)||te(!1),document.removeEventListener("pointermove",ue),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",fe,{capture:!0})}}},[C,te,Y]),j.useEffect(()=>{const ne=()=>te(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[te]);const[K,V]=$4(ne=>{const ue=F().filter(ve=>!ve.disabled),fe=ue.find(ve=>ve.ref.current===document.activeElement),oe=H4(ue,ne,fe);oe&&setTimeout(()=>oe.ref.current.focus())}),G=j.useCallback((ne,ue,fe)=>{const oe=!$.current&&!fe;(_.value!==void 0&&_.value===ue||oe)&&(k(ne),oe&&($.current=!0))},[_.value]),Z=j.useCallback(()=>C==null?void 0:C.focus(),[C]),se=j.useCallback((ne,ue,fe)=>{const oe=!$.current&&!fe;(_.value!==void 0&&_.value===ue||oe)&&B(ne)},[_.value]),ae=n==="popper"?tv:A4,X=ae===tv?{side:c,sideOffset:h,align:d,alignOffset:p,arrowPadding:m,collisionBoundary:v,collisionPadding:x,sticky:E,hideWhenDetached:w,avoidCollisions:A}:{};return f.jsx(S4,{scope:r,content:C,viewport:O,onViewportChange:D,itemRefCallback:G,selectedItem:R,onItemLeave:Z,itemTextRefCallback:se,focusSelectedItem:J,selectedItemText:L,position:n,isPositioned:H,searchRef:K,children:f.jsx(vp,{as:Fz,allowPinchZoom:!0,children:f.jsx(mp,{asChild:!0,trapped:_.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:Pe(i,ne=>{var ue;(ue=_.trigger)==null||ue.focus({preventScroll:!0}),ne.preventDefault()}),children:f.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:f.jsx(ae,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ne=>ne.preventDefault(),...N,...X,onPlaced:()=>z(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Pe(N.onKeyDown,ne=>{const ue=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!ue&&ne.key.length===1&&V(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let oe=F().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const ve=ne.target,Se=oe.indexOf(ve);oe=oe.slice(Se+1)}setTimeout(()=>ee(oe)),ne.preventDefault()}})})})})})})});C4.displayName=Bz;var Uz="SelectItemAlignedPosition",A4=j.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,s=ua(nl,r),a=da(nl,r),[c,h]=j.useState(null),[d,p]=j.useState(null),m=ot(e,M=>p(M)),v=Sp(r),x=j.useRef(!1),E=j.useRef(!0),{viewport:w,selectedItem:A,selectedItemText:N,focusSelectedItem:_}=a,C=j.useCallback(()=>{if(s.trigger&&s.valueNode&&c&&d&&w&&A&&N){const M=s.trigger.getBoundingClientRect(),R=d.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),L=N.getBoundingClientRect();if(s.dir!=="rtl"){const ve=L.left-R.left,Se=k.left-ve,Ce=M.left-Se,Fe=M.width+Ce,Ge=Math.max(Fe,R.width),ht=window.innerWidth-Li,we=ev(Se,[Li,Math.max(Li,ht-Ge)]);c.style.minWidth=Fe+"px",c.style.left=we+"px"}else{const ve=R.right-L.right,Se=window.innerWidth-k.right-ve,Ce=window.innerWidth-M.right-Se,Fe=M.width+Ce,Ge=Math.max(Fe,R.width),ht=window.innerWidth-Li,we=ev(Se,[Li,Math.max(Li,ht-Ge)]);c.style.minWidth=Fe+"px",c.style.right=we+"px"}const B=v(),F=window.innerHeight-Li*2,H=w.scrollHeight,z=window.getComputedStyle(d),$=parseInt(z.borderTopWidth,10),ee=parseInt(z.paddingTop,10),J=parseInt(z.borderBottomWidth,10),te=parseInt(z.paddingBottom,10),Y=$+ee+H+te+J,K=Math.min(A.offsetHeight*5,Y),V=window.getComputedStyle(w),G=parseInt(V.paddingTop,10),Z=parseInt(V.paddingBottom,10),se=M.top+M.height/2-Li,ae=F-se,X=A.offsetHeight/2,ne=A.offsetTop+X,ue=$+ee+ne,fe=Y-ue;if(ue<=se){const ve=B.length>0&&A===B[B.length-1].ref.current;c.style.bottom="0px";const Se=d.clientHeight-w.offsetTop-w.offsetHeight,Ce=Math.max(ae,X+(ve?Z:0)+Se+J),Fe=ue+Ce;c.style.height=Fe+"px"}else{const ve=B.length>0&&A===B[0].ref.current;c.style.top="0px";const Ce=Math.max(se,$+w.offsetTop+(ve?G:0)+X)+fe;c.style.height=Ce+"px",w.scrollTop=ue-se+w.offsetTop}c.style.margin=`${Li}px 0`,c.style.minHeight=K+"px",c.style.maxHeight=F+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[v,s.trigger,s.valueNode,c,d,w,A,N,s.dir,n]);_r(()=>C(),[C]);const[S,O]=j.useState();_r(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const D=j.useCallback(M=>{M&&E.current===!0&&(C(),_==null||_(),E.current=!1)},[C,_]);return f.jsx($z,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:D,children:f.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(We.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});A4.displayName=Uz;var zz="SelectPopperPosition",tv=j.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=Li,...s}=t,a=Cp(r);return f.jsx(ky,{...a,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});tv.displayName=zz;var[$z,kx]=Xc(nl,{}),rv="SelectViewport",N4=j.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,s=da(rv,r),a=kx(rv,r),c=ot(e,s.onViewportChange),h=j.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),f.jsx(Ep.Slot,{scope:r,children:f.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Pe(i.onScroll,d=>{const p=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&m){const x=Math.abs(h.current-p.scrollTop);if(x>0){const E=window.innerHeight-Li*2,w=parseFloat(m.style.minHeight),A=parseFloat(m.style.height),N=Math.max(w,A);if(N<E){const _=N+x,C=Math.min(E,_),S=_-C;m.style.height=C+"px",m.style.bottom==="0px"&&(p.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}h.current=p.scrollTop})})})]})});N4.displayName=rv;var T4="SelectGroup",[Hz,Vz]=Xc(T4),qz=j.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Xi();return f.jsx(Hz,{scope:r,id:i,children:f.jsx(We.div,{role:"group","aria-labelledby":i,...n,ref:e})})});qz.displayName=T4;var O4="SelectLabel",I4=j.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Vz(O4,r);return f.jsx(We.div,{id:i.id,...n,ref:e})});I4.displayName=O4;var b0="SelectItem",[Wz,R4]=Xc(b0),k4=j.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=t,c=ua(b0,r),h=da(b0,r),d=c.value===n,[p,m]=j.useState(s??""),[v,x]=j.useState(!1),E=ot(e,_=>{var C;return(C=h.itemRefCallback)==null?void 0:C.call(h,_,n,i)}),w=Xi(),A=j.useRef("touch"),N=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(Wz,{scope:r,value:n,disabled:i,textId:w,isSelected:d,onItemTextChange:j.useCallback(_=>{m(C=>C||((_==null?void 0:_.textContent)??"").trim())},[]),children:f.jsx(Ep.ItemSlot,{scope:r,value:n,disabled:i,textValue:p,children:f.jsx(We.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":d&&v,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:E,onFocus:Pe(a.onFocus,()=>x(!0)),onBlur:Pe(a.onBlur,()=>x(!1)),onClick:Pe(a.onClick,()=>{A.current!=="mouse"&&N()}),onPointerUp:Pe(a.onPointerUp,()=>{A.current==="mouse"&&N()}),onPointerDown:Pe(a.onPointerDown,_=>{A.current=_.pointerType}),onPointerMove:Pe(a.onPointerMove,_=>{var C;A.current=_.pointerType,i?(C=h.onItemLeave)==null||C.call(h):A.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(a.onPointerLeave,_=>{var C;_.currentTarget===document.activeElement&&((C=h.onItemLeave)==null||C.call(h))}),onKeyDown:Pe(a.onKeyDown,_=>{var S;((S=h.searchRef)==null?void 0:S.current)!==""&&_.key===" "||(Rz.includes(_.key)&&N(),_.key===" "&&_.preventDefault())})})})})});k4.displayName=b0;var ju="SelectItemText",j4=j.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...s}=t,a=ua(ju,r),c=da(ju,r),h=R4(ju,r),d=Pz(ju,r),[p,m]=j.useState(null),v=ot(e,N=>m(N),h.onItemTextChange,N=>{var _;return(_=c.itemTextRefCallback)==null?void 0:_.call(c,N,h.value,h.disabled)}),x=p==null?void 0:p.textContent,E=j.useMemo(()=>f.jsx("option",{value:h.value,disabled:h.disabled,children:x},h.value),[h.disabled,h.value,x]),{onNativeOptionAdd:w,onNativeOptionRemove:A}=d;return _r(()=>(w(E),()=>A(E)),[w,A,E]),f.jsxs(f.Fragment,{children:[f.jsx(We.span,{id:h.textId,...s,ref:v}),h.isSelected&&a.valueNode&&!a.valueNodeHasChildren?sa.createPortal(s.children,a.valueNode):null]})});j4.displayName=ju;var M4="SelectItemIndicator",P4=j.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return R4(M4,r).isSelected?f.jsx(We.span,{"aria-hidden":!0,...n,ref:e}):null});P4.displayName=M4;var nv="SelectScrollUpButton",D4=j.forwardRef((t,e)=>{const r=da(nv,t.__scopeSelect),n=kx(nv,t.__scopeSelect),[i,s]=j.useState(!1),a=ot(e,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=h.scrollTop>0;s(d)};const h=r.viewport;return c(),h.addEventListener("scroll",c),()=>h.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),i?f.jsx(B4,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:h}=r;c&&h&&(c.scrollTop=c.scrollTop-h.offsetHeight)}}):null});D4.displayName=nv;var iv="SelectScrollDownButton",L4=j.forwardRef((t,e)=>{const r=da(iv,t.__scopeSelect),n=kx(iv,t.__scopeSelect),[i,s]=j.useState(!1),a=ot(e,n.onScrollButtonChange);return _r(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=h.scrollHeight-h.clientHeight,p=Math.ceil(h.scrollTop)<d;s(p)};const h=r.viewport;return c(),h.addEventListener("scroll",c),()=>h.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),i?f.jsx(B4,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:h}=r;c&&h&&(c.scrollTop=c.scrollTop+h.offsetHeight)}}):null});L4.displayName=iv;var B4=j.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,s=da("SelectScrollButton",r),a=j.useRef(null),c=Sp(r),h=j.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return j.useEffect(()=>()=>h(),[h]),_r(()=>{var p;const d=c().find(m=>m.ref.current===document.activeElement);(p=d==null?void 0:d.ref.current)==null||p.scrollIntoView({block:"nearest"})},[c]),f.jsx(We.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Pe(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Pe(i.onPointerMove,()=>{var d;(d=s.onItemLeave)==null||d.call(s),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Pe(i.onPointerLeave,()=>{h()})})}),Gz="SelectSeparator",F4=j.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return f.jsx(We.div,{"aria-hidden":!0,...n,ref:e})});F4.displayName=Gz;var sv="SelectArrow",Yz=j.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Cp(r),s=ua(sv,r),a=da(sv,r);return s.open&&a.position==="popper"?f.jsx(jy,{...i,...n,ref:e}):null});Yz.displayName=sv;var Kz="SelectBubbleInput",U4=j.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const i=j.useRef(null),s=ot(n,i),a=Cx(e);return j.useEffect(()=>{const c=i.current;if(!c)return;const h=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(a!==e&&p){const m=new Event("change",{bubbles:!0});p.call(c,e),c.dispatchEvent(m)}},[a,e]),f.jsx(We.select,{...r,style:{...NC,...r.style},ref:s,defaultValue:e})});U4.displayName=Kz;function z4(t){return t===""||t===void 0}function $4(t){const e=pr(t),r=j.useRef(""),n=j.useRef(0),i=j.useCallback(a=>{const c=r.current+a;e(c),function h(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>h(""),1e3))}(c)},[e]),s=j.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function H4(t,e,r){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let a=Xz(t,Math.max(s,0));i.length===1&&(a=a.filter(d=>d!==r));const h=a.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==r?h:void 0}function Xz(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Qz=g4,V4=y4,Zz=w4,Jz=b4,e$=_4,q4=E4,t$=N4,W4=I4,G4=k4,r$=j4,n$=P4,Y4=D4,K4=L4,X4=F4;const Ei=Qz,Si=Zz,Jn=j.forwardRef(({className:t,children:e,...r},n)=>f.jsxs(V4,{ref:n,className:Be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,f.jsx(Jz,{asChild:!0,children:f.jsx(gy,{className:"h-4 w-4 opacity-50"})})]}));Jn.displayName=V4.displayName;const Q4=j.forwardRef(({className:t,...e},r)=>f.jsx(Y4,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(NM,{className:"h-4 w-4"})}));Q4.displayName=Y4.displayName;const Z4=j.forwardRef(({className:t,...e},r)=>f.jsx(K4,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(gy,{className:"h-4 w-4"})}));Z4.displayName=K4.displayName;const ei=j.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>f.jsx(e$,{children:f.jsxs(q4,{ref:i,className:Be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[f.jsx(Q4,{}),f.jsx(t$,{className:Be("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(Z4,{})]})}));ei.displayName=q4.displayName;const i$=j.forwardRef(({className:t,...e},r)=>f.jsx(W4,{ref:r,className:Be("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));i$.displayName=W4.displayName;const ct=j.forwardRef(({className:t,children:e,...r},n)=>f.jsxs(G4,{ref:n,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(n$,{children:f.jsx(ZC,{className:"h-4 w-4"})})}),f.jsx(r$,{children:e})]}));ct.displayName=G4.displayName;const s$=j.forwardRef(({className:t,...e},r)=>f.jsx(X4,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",t),...e}));s$.displayName=X4.displayName;const o$=()=>{const{user:t}=Wr(),[e,r]=j.useState([]),[n,i]=j.useState(!0),[s,a]=j.useState("all"),[c,h]=j.useState("all"),[d,p]=j.useState(""),[m,v]=j.useState(1),x=6;j.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{const{data:R,error:k}=await be.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(k)throw k;const{data:L,error:B}=await be.from("orders").select("*").eq("restaurant_id",R.id).order("created_at",{ascending:!1});if(B)throw B;const F=[...new Set((L||[]).map(ee=>ee.customer_id))],{data:H,error:z}=await be.rpc("get_order_customers",{customer_ids:F});z&&console.error("Failed to load customer details:",z);const $=(L||[]).map(ee=>{const J=H==null?void 0:H.find(te=>te.user_id===ee.customer_id);return{...ee,customer_name:(J==null?void 0:J.full_name)||"Customer",customer_phone:(J==null?void 0:J.phone)||null}});r($)}catch(R){console.error("Error fetching orders:",R),ke.error("Failed to load orders")}finally{i(!1)}},w=async(R,k)=>{try{const{error:L}=await be.from("orders").update({status:k}).eq("id",R);if(L)throw L;r(B=>B.map(F=>F.id===R?{...F,status:k}:F)),ke.success("Order status updated")}catch(L){console.error("Error updating order:",L),ke.error("Failed to update order status")}};j.useEffect(()=>{const R=k=>{const L=k,{orderId:B,status:F}=L.detail||{};!B||!F||r(H=>H.map(z=>z.id===B?{...z,status:F}:z))};return window.addEventListener("orderStatusUpdated",R),()=>{window.removeEventListener("orderStatusUpdated",R)}},[]);const A=()=>{a("all"),h("all"),p(""),v(1)},N=R=>{const k={paid:{label:"Paid",className:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/10"},preparing:{label:"Preparing",className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/10"},ready:{label:"Ready",className:"bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/10"},completed:{label:"Completed",className:"bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-500/10"},cancelled:{label:"Cancelled",className:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/10"},served:{label:"Served",className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/10"}};return k[R]||k.paid},_=R=>{switch(R){case"paid":return"bg-purple-50/60 dark:bg-purple-500/5";case"preparing":return"bg-blue-50/60 dark:bg-blue-500/5";case"ready":return"bg-green-50/60 dark:bg-green-500/5";case"completed":return"bg-slate-50/60 dark:bg-slate-500/5";case"served":return"bg-emerald-50/60 dark:bg-emerald-500/5";case"cancelled":return"bg-red-50/40 dark:bg-red-500/5";default:return"bg-card"}},C=R=>{const k=new Date(R),B=Math.floor((new Date().getTime()-k.getTime())/6e4);return B<60?`${B} mins ago`:B<1440?`${Math.floor(B/60)} hours ago`:`${Math.floor(B/1440)} days ago`},S=e.filter(R=>{const k=s==="all"?!0:R.order_type===s,L=c==="all"?!0:R.status===c,B=d?new Date(R.created_at).toISOString().slice(0,10)===d:!0;return k&&L&&B}),O=Math.max(1,Math.ceil(S.length/x)),D=S.slice((m-1)*x,m*x),M=R=>{R<1||R>O||v(R)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Orders"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage incoming orders and update their status"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 bg-card/60 border border-border/40 rounded-2xl p-3 glass-effect",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Order Type"}),f.jsxs(Ei,{value:s,onValueChange:R=>a(R),children:[f.jsx(Jn,{className:"h-9 text-xs",children:f.jsx(Si,{placeholder:"All Types"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All Types"}),f.jsx(ct,{value:"dine_in",children:"Dine In"}),f.jsx(ct,{value:"takeaway",children:"Take Away"})]})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Status"}),f.jsxs(Ei,{value:c,onValueChange:R=>h(R),children:[f.jsx(Jn,{className:"h-9 text-xs",children:f.jsx(Si,{placeholder:"All Status"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All Status"}),f.jsx(ct,{value:"paid",children:"Paid"}),f.jsx(ct,{value:"preparing",children:"Preparing"}),f.jsx(ct,{value:"ready",children:"Ready"}),f.jsx(ct,{value:"completed",children:"Completed"}),f.jsx(ct,{value:"served",children:"Served"}),f.jsx(ct,{value:"cancelled",children:"Cancelled"})]})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted-foreground",children:"Date"}),f.jsx("input",{type:"date",value:d,onChange:R=>p(R.target.value),className:"h-9 w-full rounded-md border border-border/40 bg-background/60 px-2 text-xs text-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary/60"})]})]}),f.jsx("div",{className:"flex justify-end -mt-1",children:f.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-1 text-[10px] text-muted-foreground hover:text-primary transition-colors",children:[f.jsx(eA,{className:"w-3 h-3"}),f.jsx("span",{children:"Clear filters"})]})}),n?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(Qs,{className:"h-8 w-8 animate-spin text-primary"})}):S.length===0?f.jsx(qe,{children:f.jsx(It,{className:"py-12 text-center text-muted-foreground",children:"No orders found for selected filters"})}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 auto-rows-fr",children:D.map(R=>{const k=N(R.status);return f.jsxs(qe,{className:`border border-border/40 rounded-2xl overflow-hidden transition-all duration-150 hover:shadow-md ${_(R.status)}`,children:[f.jsx(mr,{className:"pb-2 px-3 pt-3",children:f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex items-start gap-1.5",children:[f.jsx(Gi,{className:"h-3.5 w-3.5 mt-0.5 shrink-0 text-primary"}),f.jsxs("div",{className:"leading-tight",children:[f.jsx("div",{className:"text-xs font-semibold text-foreground",children:R.customer_name}),R.customer_phone&&f.jsx("div",{className:"text-[10px] text-muted-foreground",children:R.customer_phone})]})]}),f.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[f.jsx(br,{className:`px-2 py-0.5 text-[10px] font-medium rounded-full ${k.className}`,children:k.label}),f.jsxs("div",{className:"text-[9px] text-muted-foreground font-mono",children:["#",R.id.substring(0,8)]})]})]})}),f.jsxs(It,{className:"px-3 pb-3 pt-1 space-y-2.5",children:[f.jsx("div",{className:"space-y-1.5",children:f.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px] text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[R.order_type==="dine_in"?f.jsx(vy,{className:"h-3.5 w-3.5"}):f.jsx(Qh,{className:"h-3.5 w-3.5"}),f.jsx("span",{className:"capitalize",children:R.order_type==="dine_in"?"Dine in":"Takeaway"})]}),f.jsxs("div",{className:"flex flex-col items-end gap-0",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(za,{className:"h-3.5 w-3.5"}),f.jsx("span",{children:C(R.created_at)})]}),f.jsx("div",{className:"text-[8px] text-muted-foreground/80",children:(()=>{const L=new Date(R.created_at),B=String(L.getDate()).padStart(2,"0"),F=String(L.getMonth()+1).padStart(2,"0"),H=L.getFullYear();let z=L.getHours();const $=String(L.getMinutes()).padStart(2,"0"),ee=z>=12?"PM":"AM";return z=z%12||12,`${B}/${F}/${H} - ${z}:${$} ${ee}`})()})]})]})}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsx("h4",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:"Items"}),f.jsxs("ul",{className:"space-y-0.5",children:[R.order_items.slice(0,3).map((L,B)=>f.jsxs("li",{className:"text-[10px] text-muted-foreground truncate",children:[L.quantity,"x ",L.name]},B)),R.order_items.length>3&&f.jsxs("li",{className:"text-[9px] text-muted-foreground/80",children:["+",R.order_items.length-3," more item",R.order_items.length-3>1?"s":""]})]})]}),f.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2 border-t border-border/40",children:[f.jsxs("span",{className:"font-semibold text-xs",children:[R.total_amount.toLocaleString()," MMK"]}),f.jsxs(Ei,{value:R.status,onValueChange:L=>w(R.id,L),children:[f.jsx(Jn,{className:"h-8 w-32 text-[10px]",children:f.jsx(Si,{})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"paid",children:"Paid"}),f.jsx(ct,{value:"preparing",children:"Preparing"}),f.jsx(ct,{value:"ready",children:"Ready"}),f.jsx(ct,{value:"served",children:"Served"}),f.jsx(ct,{value:"completed",children:"Completed"}),f.jsx(ct,{value:"cancelled",children:"Cancelled"})]})]})]})]})]},R.id)})}),O>1&&f.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 pb-1",children:[f.jsx("button",{type:"button",onClick:()=>M(m-1),disabled:m===1,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${m===1?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""}),Array.from({length:O}).map((R,k)=>{const L=k+1,B=L===m;return f.jsx("button",{type:"button",onClick:()=>M(L),className:`min-w-9 h-9 px-2 rounded-full flex items-center justify-center text-xs font-semibold border transition-colors ${B?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background text-muted-foreground border-border/70 hover:bg-primary/5 hover:text-primary"}`,children:L},L)}),f.jsx("button",{type:"button",onClick:()=>M(m+1),disabled:m===O,className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-medium border transition-colors ${m===O?"border-border/40 text-muted-foreground/40 bg-background/40 cursor-default":"border-border/70 text-foreground bg-background hover:bg-primary/5"}`,children:""})]})]})]})};var ze;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var l_=new Map([[ze.QR_CODE,"QR_CODE"],[ze.AZTEC,"AZTEC"],[ze.CODABAR,"CODABAR"],[ze.CODE_39,"CODE_39"],[ze.CODE_93,"CODE_93"],[ze.CODE_128,"CODE_128"],[ze.DATA_MATRIX,"DATA_MATRIX"],[ze.MAXICODE,"MAXICODE"],[ze.ITF,"ITF"],[ze.EAN_13,"EAN_13"],[ze.EAN_8,"EAN_8"],[ze.PDF_417,"PDF_417"],[ze.RSS_14,"RSS_14"],[ze.RSS_EXPANDED,"RSS_EXPANDED"],[ze.UPC_A,"UPC_A"],[ze.UPC_E,"UPC_E"],[ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),c_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(c_||(c_={}));function a$(t){return Object.values(ze).includes(t)}var Qi;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Qi||(Qi={}));var qi=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Qi.SCAN_TYPE_CAMERA,Qi.SCAN_TYPE_FILE],t}(),J4=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!l_.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,l_.get(e))},t}(),u_=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),ov;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(ov||(ov={}));var eI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:ov.UNKWOWN_ERROR}},t}(),tI=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ds(t){return typeof t>"u"||t===null}function l$(t,e,r){return t>r?r:t<e?e:t}var Kl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Ot=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),d_=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),rI=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(i),a=Object.keys(e),c=0,h=a;c<h.length;c++){var d=h[c];if(s.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},t}(),av={exports:{}};(function(t,e){(function(r,n){n(e)})($r,function(r){function n(q){return q==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,o){q.__proto__=o}||function(q,o){for(var l in o)o.hasOwnProperty(l)&&(q[l]=o[l])};function s(q,o){i(q,o);function l(){this.constructor=q}q.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}function a(q,o){var l=Object.setPrototypeOf;l?l(q,o):q.__proto__=o}function c(q,o){o===void 0&&(o=q.constructor);var l=Error.captureStackTrace;l&&l(q,o)}var h=function(q){s(o,q);function o(l){var u=this.constructor,g=q.call(this,l)||this;return Object.defineProperty(g,"name",{value:u.name,enumerable:!1}),a(g,u.prototype),c(g),g}return o}(Error);class d extends h{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}d.kind="Exception";class p extends d{}p.kind="ArgumentException";class m extends d{}m.kind="IllegalArgumentException";class v{constructor(o){if(this.binarizer=o,o===null)throw new m("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,l){return this.binarizer.getBlackRow(o,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,l,u,g){const y=this.binarizer.getLuminanceSource().crop(o,l,u,g);return new v(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class x extends d{static getChecksumInstance(){return new x}}x.kind="ChecksumException";class E{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(o,l,u,g,y){for(;y--;)u[g++]=o[l++]}static currentTimeMillis(){return Date.now()}}class A extends d{}A.kind="IndexOutOfBoundsException";class N extends A{constructor(o=void 0,l=void 0){super(l),this.index=o,this.message=l}}N.kind="ArrayIndexOutOfBoundsException";class _{static fill(o,l){for(let u=0,g=o.length;u<g;u++)o[u]=l}static fillWithin(o,l,u,g){_.rangeCheck(o.length,l,u);for(let y=l;y<u;y++)o[y]=g}static rangeCheck(o,l,u){if(l>u)throw new m("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new N(l);if(u>o)throw new N(u)}static asList(...o){return o}static create(o,l,u){return Array.from({length:o}).map(y=>Array.from({length:l}).fill(u))}static createInt32Array(o,l,u){return Array.from({length:o}).map(y=>Int32Array.from({length:l}).fill(u))}static equals(o,l){if(!o||!l||!o.length||!l.length||o.length!==l.length)return!1;for(let u=0,g=o.length;u<g;u++)if(o[u]!==l[u])return!1;return!0}static hashCode(o){if(o===null)return 0;let l=1;for(const u of o)l=31*l+u;return l}static fillUint8Array(o,l){for(let u=0;u!==o.length;u++)o[u]=l}static copyOf(o,l){return o.slice(0,l)}static copyOfUint8Array(o,l){if(o.length<=l){const u=new Uint8Array(l);return u.set(o),u}return o.slice(0,l)}static copyOfRange(o,l,u){const g=u-l,y=new Int32Array(g);return w.arraycopy(o,l,y,0,g),y}static binarySearch(o,l,u){u===void 0&&(u=_.numberComparator);let g=0,y=o.length-1;for(;g<=y;){const b=y+g>>1,T=u(l,o[b]);if(T>0)g=b+1;else if(T<0)y=b-1;else return b}return-g-1}static numberComparator(o,l){return o-l}}class C{static numberOfTrailingZeros(o){let l;if(o===0)return 32;let u=31;return l=o<<16,l!==0&&(u-=16,o=l),l=o<<8,l!==0&&(u-=8,o=l),l=o<<4,l!==0&&(u-=4,o=l),l=o<<2,l!==0&&(u-=2,o=l),u-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let l=1;return o>>>16||(l+=16,o<<=16),o>>>24||(l+=8,o<<=8),o>>>28||(l+=4,o<<=4),o>>>30||(l+=2,o<<=2),l-=o>>>31,l}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,l){return Math.trunc(o/l)}static parseInt(o,l=void 0){return parseInt(o,l)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class S{constructor(o,l){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,l==null?this.bits=S.makeArray(o):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const l=S.makeArray(o);w.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const l=this.size;if(o>=l)return l;const u=this.bits;let g=Math.floor(o/32),y=u[g];y&=~((1<<(o&31))-1);const b=u.length;for(;y===0;){if(++g===b)return l;y=u[g]}const T=g*32+C.numberOfTrailingZeros(y);return T>l?l:T}getNextUnset(o){const l=this.size;if(o>=l)return l;const u=this.bits;let g=Math.floor(o/32),y=~u[g];y&=~((1<<(o&31))-1);const b=u.length;for(;y===0;){if(++g===b)return l;y=~u[g]}const T=g*32+C.numberOfTrailingZeros(y);return T>l?l:T}setBulk(o,l){this.bits[Math.floor(o/32)]=l}setRange(o,l){if(l<o||o<0||l>this.size)throw new m;if(l===o)return;l--;const u=Math.floor(o/32),g=Math.floor(l/32),y=this.bits;for(let b=u;b<=g;b++){const T=b>u?0:o&31,P=(2<<(b<g?31:l&31))-(1<<T);y[b]|=P}}clear(){const o=this.bits.length,l=this.bits;for(let u=0;u<o;u++)l[u]=0}isRange(o,l,u){if(l<o||o<0||l>this.size)throw new m;if(l===o)return!0;l--;const g=Math.floor(o/32),y=Math.floor(l/32),b=this.bits;for(let T=g;T<=y;T++){const I=T>g?0:o&31,U=(2<<(T<y?31:l&31))-(1<<I)&4294967295;if((b[T]&U)!==(u?U:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,l){if(l<0||l>32)throw new m("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((o>>u-1&1)===1)}appendBitArray(o){const l=o.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(o.get(u))}xor(o){if(this.size!==o.size)throw new m("Sizes don't match");const l=this.bits;for(let u=0,g=l.length;u<g;u++)l[u]^=o.bits[u]}toBytes(o,l,u,g){for(let y=0;y<g;y++){let b=0;for(let T=0;T<8;T++)this.get(o)&&(b|=1<<7-T),o++;l[u+y]=b}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,g=this.bits;for(let y=0;y<u;y++){let b=g[y];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,o[l-y]=b}if(this.size!==u*32){const y=u*32-this.size;let b=o[0]>>>y;for(let T=1;T<u;T++){const I=o[T];b|=I<<32-y,o[T-1]=b,b=I>>>y}o[u-1]=b}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof S))return!1;const l=o;return this.size===l.size&&_.equals(this.bits,l.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let o="";for(let l=0,u=this.size;l<u;l++)l&7||(o+=" "),o+=this.get(l)?"X":".";return o}clone(){return new S(this.size,this.bits.slice())}}var O;(function(q){q[q.OTHER=0]="OTHER",q[q.PURE_BARCODE=1]="PURE_BARCODE",q[q.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",q[q.TRY_HARDER=3]="TRY_HARDER",q[q.CHARACTER_SET=4]="CHARACTER_SET",q[q.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",q[q.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",q[q.ASSUME_GS1=7]="ASSUME_GS1",q[q.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",q[q.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",q[q.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(O||(O={}));var D=O;class M extends d{static getFormatInstance(){return new M}}M.kind="FormatException";var R;(function(q){q[q.Cp437=0]="Cp437",q[q.ISO8859_1=1]="ISO8859_1",q[q.ISO8859_2=2]="ISO8859_2",q[q.ISO8859_3=3]="ISO8859_3",q[q.ISO8859_4=4]="ISO8859_4",q[q.ISO8859_5=5]="ISO8859_5",q[q.ISO8859_6=6]="ISO8859_6",q[q.ISO8859_7=7]="ISO8859_7",q[q.ISO8859_8=8]="ISO8859_8",q[q.ISO8859_9=9]="ISO8859_9",q[q.ISO8859_10=10]="ISO8859_10",q[q.ISO8859_11=11]="ISO8859_11",q[q.ISO8859_13=12]="ISO8859_13",q[q.ISO8859_14=13]="ISO8859_14",q[q.ISO8859_15=14]="ISO8859_15",q[q.ISO8859_16=15]="ISO8859_16",q[q.SJIS=16]="SJIS",q[q.Cp1250=17]="Cp1250",q[q.Cp1251=18]="Cp1251",q[q.Cp1252=19]="Cp1252",q[q.Cp1256=20]="Cp1256",q[q.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",q[q.UTF8=22]="UTF8",q[q.ASCII=23]="ASCII",q[q.Big5=24]="Big5",q[q.GB18030=25]="GB18030",q[q.EUC_KR=26]="EUC_KR"})(R||(R={}));class k{constructor(o,l,u,...g){this.valueIdentifier=o,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=g,k.VALUE_IDENTIFIER_TO_ECI.set(o,this),k.NAME_TO_ECI.set(u,this);const y=this.values;for(let b=0,T=y.length;b!==T;b++){const I=y[b];k.VALUES_TO_ECI.set(I,this)}for(const b of g)k.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new M("incorect value");const l=k.VALUES_TO_ECI.get(o);if(l===void 0)throw new M("incorect value");return l}static getCharacterSetECIByName(o){const l=k.NAME_TO_ECI.get(o);if(l===void 0)throw new M("incorect value");return l}equals(o){if(!(o instanceof k))return!1;const l=o;return this.getName()===l.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(R.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(R.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(R.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(R.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(R.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(R.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(R.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(R.Big5,28,"Big5"),k.GB18030=new k(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(R.EUC_KR,30,"EUC_KR","EUC-KR");class L extends d{}L.kind="UnsupportedOperationException";class B{static decode(o,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(o,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(o,u):new TextDecoder(u).decode(o)}static shouldDecodeOnFallback(o){return!B.isBrowser()&&o==="ISO-8859-1"}static encode(o,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(o,u):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof k?o:k.getCharacterSetECIByName(o)}static decodeFallback(o,l){const u=this.encodingCharacterSet(l);if(B.isDecodeFallbackSupported(u)){let g="";for(let y=0,b=o.length;y<b;y++){let T=o[y].toString(16);T.length<2&&(T="0"+T),g+="%"+T}return decodeURIComponent(g)}if(u.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new L(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(k.UTF8)||o.equals(k.ISO8859_1)||o.equals(k.ASCII)}static encodeFallback(o){const u=btoa(unescape(encodeURIComponent(o))).split(""),g=[];for(let y=0;y<u.length;y++)g.push(u[y].charCodeAt(0));return new Uint8Array(g)}}class F{static castAsNonUtf8Char(o,l=null){const u=l?l.getName():this.ISO88591;return B.decode(new Uint8Array([o]),u)}static guessEncoding(o,l){if(l!=null&&l.get(D.CHARACTER_SET)!==void 0)return l.get(D.CHARACTER_SET).toString();const u=o.length;let g=!0,y=!0,b=!0,T=0,I=0,P=0,U=0,W=0,Q=0,ie=0,le=0,ce=0,pe=0,xe=0;const Re=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let je=0;je<u&&(g||y||b);je++){const Oe=o[je]&255;b&&(T>0?Oe&128?T--:b=!1:Oe&128&&(Oe&64?(T++,Oe&32?(T++,Oe&16?(T++,Oe&8?b=!1:U++):P++):I++):b=!1)),g&&(Oe>127&&Oe<160?g=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&xe++),y&&(W>0?Oe<64||Oe===127||Oe>252?y=!1:W--:Oe===128||Oe===160||Oe>239?y=!1:Oe>160&&Oe<224?(Q++,le=0,ie++,ie>ce&&(ce=ie)):Oe>127?(W++,ie=0,le++,le>pe&&(pe=le)):(ie=0,le=0))}return b&&T>0&&(b=!1),y&&W>0&&(y=!1),b&&(Re||I+P+U>0)?F.UTF8:y&&(F.ASSUME_SHIFT_JIS||ce>=3||pe>=3)?F.SHIFT_JIS:g&&y?ce===2&&Q===2||xe*10>=u?F.SHIFT_JIS:F.ISO88591:g?F.ISO88591:y?F.SHIFT_JIS:b?F.UTF8:F.PLATFORM_DEFAULT_ENCODING}static format(o,...l){let u=-1;function g(b,T,I,P,U,W){if(b==="%%")return"%";if(l[++u]===void 0)return;b=P?parseInt(P.substr(1)):void 0;let Q=U?parseInt(U.substr(1)):void 0,ie;switch(W){case"s":ie=l[u];break;case"c":ie=l[u][0];break;case"f":ie=parseFloat(l[u]).toFixed(b);break;case"p":ie=parseFloat(l[u]).toPrecision(b);break;case"e":ie=parseFloat(l[u]).toExponential(b);break;case"x":ie=parseInt(l[u]).toString(Q||16);break;case"d":ie=parseFloat(parseInt(l[u],Q||10).toPrecision(b)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Q);let le=parseInt(I),ce=I&&I[0]+""=="0"?"0":" ";for(;ie.length<le;)ie=T!==void 0?ie+ce:ce+ie;return ie}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(y,g)}static getBytes(o,l){return B.encode(o,l)}static getCharCode(o,l=0){return o.charCodeAt(l)}static getCharAt(o){return String.fromCharCode(o)}}F.SHIFT_JIS=k.SJIS.getName(),F.GB2312="GB2312",F.ISO88591=k.ISO8859_1.getName(),F.EUC_JP="EUC_JP",F.UTF8=k.UTF8.getName(),F.PLATFORM_DEFAULT_ENCODING=F.UTF8,F.ASSUME_SHIFT_JIS=!1;class H{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=F.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,l,u){for(let g=l;l<l+u;g++)this.append(o[g]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,l){this.value=this.value.substr(0,o)+l+this.value.substr(o+1)}substring(o,l){return this.value.substring(o,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,l){this.value=this.value.substr(0,o)+l+this.value.substr(o+l.length)}}class z{constructor(o,l,u,g){if(this.width=o,this.height=l,this.rowSize=u,this.bits=g,l==null&&(l=o),this.height=l,o<1||l<1)throw new m("Both dimensions must be greater than 0");u==null&&(u=Math.floor((o+31)/32)),this.rowSize=u,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const l=o.length,u=o[0].length,g=new z(u,l);for(let y=0;y<l;y++){const b=o[y];for(let T=0;T<u;T++)b[T]&&g.set(T,y)}return g}static parseFromString(o,l,u){if(o===null)throw new m("stringRepresentation cannot be null");const g=new Array(o.length);let y=0,b=0,T=-1,I=0,P=0;for(;P<o.length;)if(o.charAt(P)===`
`||o.charAt(P)==="\r"){if(y>b){if(T===-1)T=y-b;else if(y-b!==T)throw new m("row lengths do not match");b=y,I++}P++}else if(o.substring(P,P+l.length)===l)P+=l.length,g[y]=!0,y++;else if(o.substring(P,P+u.length)===u)P+=u.length,g[y]=!1,y++;else throw new m("illegal character encountered: "+o.substring(P));if(y>b){if(T===-1)T=y-b;else if(y-b!==T)throw new m("row lengths do not match");I++}const U=new z(T,I);for(let W=0;W<y;W++)g[W]&&U.set(Math.floor(W%T),Math.floor(W/T));return U}get(o,l){const u=l*this.rowSize+Math.floor(o/32);return(this.bits[u]>>>(o&31)&1)!==0}set(o,l){const u=l*this.rowSize+Math.floor(o/32);this.bits[u]|=1<<(o&31)&4294967295}unset(o,l){const u=l*this.rowSize+Math.floor(o/32);this.bits[u]&=~(1<<(o&31)&4294967295)}flip(o,l){const u=l*this.rowSize+Math.floor(o/32);this.bits[u]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new m("input matrix dimensions do not match");const l=new S(Math.floor(this.width/32)+1),u=this.rowSize,g=this.bits;for(let y=0,b=this.height;y<b;y++){const T=y*u,I=o.getRow(y,l).getBitArray();for(let P=0;P<u;P++)g[T+P]^=I[P]}}clear(){const o=this.bits,l=o.length;for(let u=0;u<l;u++)o[u]=0}setRegion(o,l,u,g){if(l<0||o<0)throw new m("Left and top must be nonnegative");if(g<1||u<1)throw new m("Height and width must be at least 1");const y=o+u,b=l+g;if(b>this.height||y>this.width)throw new m("The region must fit inside the matrix");const T=this.rowSize,I=this.bits;for(let P=l;P<b;P++){const U=P*T;for(let W=o;W<y;W++)I[U+Math.floor(W/32)]|=1<<(W&31)&4294967295}}getRow(o,l){l==null||l.getSize()<this.width?l=new S(this.width):l.clear();const u=this.rowSize,g=this.bits,y=o*u;for(let b=0;b<u;b++)l.setBulk(b*32,g[y+b]);return l}setRow(o,l){w.arraycopy(l.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),l=this.getHeight();let u=new S(o),g=new S(o);for(let y=0,b=Math.floor((l+1)/2);y<b;y++)u=this.getRow(y,u),g=this.getRow(l-1-y,g),u.reverse(),g.reverse(),this.setRow(y,g),this.setRow(l-1-y,u)}getEnclosingRectangle(){const o=this.width,l=this.height,u=this.rowSize,g=this.bits;let y=o,b=l,T=-1,I=-1;for(let P=0;P<l;P++)for(let U=0;U<u;U++){const W=g[P*u+U];if(W!==0){if(P<b&&(b=P),P>I&&(I=P),U*32<y){let Q=0;for(;!(W<<31-Q&4294967295);)Q++;U*32+Q<y&&(y=U*32+Q)}if(U*32+31>T){let Q=31;for(;!(W>>>Q);)Q--;U*32+Q>T&&(T=U*32+Q)}}}return T<y||I<b?null:Int32Array.from([y,b,T-y+1,I-b+1])}getTopLeftOnBit(){const o=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const g=u/o;let y=u%o*32;const b=l[u];let T=0;for(;!(b<<31-T&4294967295);)T++;return y+=T,Int32Array.from([y,g])}getBottomRightOnBit(){const o=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const g=Math.floor(u/o);let y=Math.floor(u%o)*32;const b=l[u];let T=31;for(;!(b>>>T);)T--;return y+=T,Int32Array.from([y,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof z))return!1;const l=o;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&_.equals(this.bits,l.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+_.hashCode(this.bits),o}toString(o="X ",l="  ",u=`
`){return this.buildToString(o,l,u)}buildToString(o,l,u){let g=new H;for(let y=0,b=this.height;y<b;y++){for(let T=0,I=this.width;T<I;T++)g.append(this.get(T,y)?o:l);g.append(u)}return g.toString()}clone(){return new z(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends d{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class ee extends E{constructor(o){super(o),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(o,l){const u=this.getLuminanceSource(),g=u.getWidth();l==null||l.getSize()<g?l=new S(g):l.clear(),this.initArrays(g);const y=u.getRow(o,this.luminances),b=this.buckets;for(let I=0;I<g;I++)b[(y[I]&255)>>ee.LUMINANCE_SHIFT]++;const T=ee.estimateBlackPoint(b);if(g<3)for(let I=0;I<g;I++)(y[I]&255)<T&&l.set(I);else{let I=y[0]&255,P=y[1]&255;for(let U=1;U<g-1;U++){const W=y[U+1]&255;(P*4-I-W)/2<T&&l.set(U),I=P,P=W}}return l}getBlackMatrix(){const o=this.getLuminanceSource(),l=o.getWidth(),u=o.getHeight(),g=new z(l,u);this.initArrays(l);const y=this.buckets;for(let I=1;I<5;I++){const P=Math.floor(u*I/5),U=o.getRow(P,this.luminances),W=Math.floor(l*4/5);for(let Q=Math.floor(l/5);Q<W;Q++){const ie=U[Q]&255;y[ie>>ee.LUMINANCE_SHIFT]++}}const b=ee.estimateBlackPoint(y),T=o.getMatrix();for(let I=0;I<u;I++){const P=I*l;for(let U=0;U<l;U++)(T[P+U]&255)<b&&g.set(U,I)}return g}createBinarizer(o){return new ee(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const l=this.buckets;for(let u=0;u<ee.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(o){const l=o.length;let u=0,g=0,y=0;for(let U=0;U<l;U++)o[U]>y&&(g=U,y=o[U]),o[U]>u&&(u=o[U]);let b=0,T=0;for(let U=0;U<l;U++){const W=U-g,Q=o[U]*W*W;Q>T&&(b=U,T=Q)}if(g>b){const U=g;g=b,b=U}if(b-g<=l/16)throw new $;let I=b-1,P=-1;for(let U=b-1;U>g;U--){const W=U-g,Q=W*W*(b-U)*(u-o[U]);Q>P&&(I=U,P=Q)}return I<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class J extends ee{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),l=o.getWidth(),u=o.getHeight();if(l>=J.MINIMUM_DIMENSION&&u>=J.MINIMUM_DIMENSION){const g=o.getMatrix();let y=l>>J.BLOCK_SIZE_POWER;l&J.BLOCK_SIZE_MASK&&y++;let b=u>>J.BLOCK_SIZE_POWER;u&J.BLOCK_SIZE_MASK&&b++;const T=J.calculateBlackPoints(g,y,b,l,u),I=new z(l,u);J.calculateThresholdForBlock(g,y,b,l,u,T,I),this.matrix=I}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new J(o)}static calculateThresholdForBlock(o,l,u,g,y,b,T){const I=y-J.BLOCK_SIZE,P=g-J.BLOCK_SIZE;for(let U=0;U<u;U++){let W=U<<J.BLOCK_SIZE_POWER;W>I&&(W=I);const Q=J.cap(U,2,u-3);for(let ie=0;ie<l;ie++){let le=ie<<J.BLOCK_SIZE_POWER;le>P&&(le=P);const ce=J.cap(ie,2,l-3);let pe=0;for(let Re=-2;Re<=2;Re++){const je=b[Q+Re];pe+=je[ce-2]+je[ce-1]+je[ce]+je[ce+1]+je[ce+2]}const xe=pe/25;J.thresholdBlock(o,le,W,xe,g,T)}}}static cap(o,l,u){return o<l?l:o>u?u:o}static thresholdBlock(o,l,u,g,y,b){for(let T=0,I=u*y+l;T<J.BLOCK_SIZE;T++,I+=y)for(let P=0;P<J.BLOCK_SIZE;P++)(o[I+P]&255)<=g&&b.set(l+P,u+T)}static calculateBlackPoints(o,l,u,g,y){const b=y-J.BLOCK_SIZE,T=g-J.BLOCK_SIZE,I=new Array(u);for(let P=0;P<u;P++){I[P]=new Int32Array(l);let U=P<<J.BLOCK_SIZE_POWER;U>b&&(U=b);for(let W=0;W<l;W++){let Q=W<<J.BLOCK_SIZE_POWER;Q>T&&(Q=T);let ie=0,le=255,ce=0;for(let xe=0,Re=U*g+Q;xe<J.BLOCK_SIZE;xe++,Re+=g){for(let je=0;je<J.BLOCK_SIZE;je++){const Oe=o[Re+je]&255;ie+=Oe,Oe<le&&(le=Oe),Oe>ce&&(ce=Oe)}if(ce-le>J.MIN_DYNAMIC_RANGE)for(xe++,Re+=g;xe<J.BLOCK_SIZE;xe++,Re+=g)for(let je=0;je<J.BLOCK_SIZE;je++)ie+=o[Re+je]&255}let pe=ie>>J.BLOCK_SIZE_POWER*2;if(ce-le<=J.MIN_DYNAMIC_RANGE&&(pe=le/2,P>0&&W>0)){const xe=(I[P-1][W]+2*I[P][W-1]+I[P-1][W-1])/4;le<xe&&(pe=xe)}I[P][W]=pe}}return I}}J.BLOCK_SIZE_POWER=3,J.BLOCK_SIZE=1<<J.BLOCK_SIZE_POWER,J.BLOCK_SIZE_MASK=J.BLOCK_SIZE-1,J.MINIMUM_DIMENSION=J.BLOCK_SIZE*5,J.MIN_DYNAMIC_RANGE=24;class te{constructor(o,l){this.width=o,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,l,u,g){throw new L("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new L("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new L("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let l=new H;for(let u=0;u<this.height;u++){const g=this.getRow(u,o);for(let y=0;y<this.width;y++){const b=g[y]&255;let T;b<64?T="#":b<128?T="+":b<192?T=".":T=" ",l.append(T)}l.append(`
`)}return l.toString()}}class Y extends te{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,l){const u=this.delegate.getRow(o,l),g=this.getWidth();for(let y=0;y<g;y++)u[y]=255-(u[y]&255);return u}getMatrix(){const o=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let g=0;g<l;g++)u[g]=255-(o[g]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(o,l,u,g){return new Y(this.delegate.crop(o,l,u,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class K extends te{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const l=o.getContext("2d").getImageData(0,0,o.width,o.height);return K.toGrayscaleBuffer(l.data,o.width,o.height)}static toGrayscaleBuffer(o,l,u){const g=new Uint8ClampedArray(l*u);for(let y=0,b=0,T=o.length;y<T;y+=4,b++){let I;if(o[y+3]===0)I=255;else{const U=o[y],W=o[y+1],Q=o[y+2];I=306*U+601*W+117*Q+512>>10}g[b]=I}return g}getRow(o,l){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);const u=this.getWidth(),g=o*u;return l===null?l=this.buffer.slice(g,g+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(g,g+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,l,u,g){return super.crop(o,l,u,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const l=this.getTempCanvasElement(),u=l.getContext("2d"),g=o*K.DEGREE_TO_RADIANS,y=this.canvas.width,b=this.canvas.height,T=Math.ceil(Math.abs(Math.cos(g))*y+Math.abs(Math.sin(g))*b),I=Math.ceil(Math.abs(Math.sin(g))*y+Math.abs(Math.cos(g))*b);return l.width=T,l.height=I,u.translate(T/2,I/2),u.rotate(g),u.drawImage(this.canvas,y/-2,b/-2),this.buffer=K.makeBufferFromCanvasImageData(l),this}invert(){return new Y(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class V{constructor(o,l,u){this.deviceId=o,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||$r||self||window||void 0)&&(globalThis||$r||self||window||void 0).__awaiter||function(q,o,l,u){function g(y){return y instanceof l?y:new l(function(b){b(y)})}return new(l||(l=Promise))(function(y,b){function T(U){try{P(u.next(U))}catch(W){b(W)}}function I(U){try{P(u.throw(U))}catch(W){b(W)}}function P(U){U.done?y(U.value):g(U.value).then(T,I)}P((u=u.apply(q,o||[])).next())})};class Z{constructor(o,l=500,u){this.reader=o,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of o){const g=u.kind==="video"?"videoinput":u.kind;if(g!=="videoinput")continue;const y=u.deviceId||u.id,b=u.label||`Video device ${l.length+1}`,T=u.groupId,I={deviceId:y,label:b,kind:g,groupId:T};l.push(I)}return l})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new V(l.deviceId,l.label))})}findDeviceById(o){return G(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===o):null})}decodeFromInputVideoDevice(o,l){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,l)})}decodeOnceFromVideoDevice(o,l){return G(this,void 0,void 0,function*(){this.reset();let u;o?u={deviceId:{exact:o}}:u={facingMode:"environment"};const g={video:u};return yield this.decodeOnceFromConstraints(g,l)})}decodeOnceFromConstraints(o,l){return G(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(o,l){return G(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(o,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(o,l,u){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,l,u)})}decodeFromVideoDevice(o,l,u){return G(this,void 0,void 0,function*(){let g;o?g={deviceId:{exact:o}}:g={facingMode:"environment"};const y={video:g};return yield this.decodeFromConstraints(y,l,u)})}decodeFromConstraints(o,l,u){return G(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(g,l,u)})}decodeFromStream(o,l,u){return G(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(o,l);return yield this.decodeContinuously(g,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,l){return G(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,o),this.videoElement=u,this.stream=o,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(o){return new Promise((l,u)=>this.playVideoOnLoad(o,()=>l()))}playVideoOnLoad(o,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",l),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,l){const u=document.getElementById(o);if(!u)throw new p(`element with id '${o}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new p(`element with id '${o}' must be an ${l} element`);return u}decodeFromImage(o,l){if(!o&&!l)throw new p("either imageElement with a src set or an url must be provided");return l&&!o?this.decodeFromImageUrl(l):this.decodeFromImageElement(o)}decodeFromVideo(o,l){if(!o&&!l)throw new p("Either an element with a src set or an URL must be provided");return l&&!o?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,l,u){if(o===void 0&&l===void 0)throw new p("Either an element with a src set or an URL must be provided");return l&&!o?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(o,u)}decodeFromImageElement(o){if(!o)throw new p("An image element must be provided.");this.reset();const l=this.prepareImageElement(o);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(o){const l=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(o,l){const u=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(o){if(!o)throw new p("A video element must be provided.");this.reset();const l=this.prepareVideoElement(o);return this.videoElement=l,l}decodeFromImageUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=o,u}decodeFromVideoUrl(o){if(!o)throw new p("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=o,u}decodeFromVideoUrlContinuously(o,l){if(!o)throw new p("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(u,l);return u.src=o,g}_decodeOnLoadImage(o){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(l,u),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,l){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,l)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let l;return typeof o>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof o=="string"&&(l=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(l=o),l}prepareVideoElement(o){let l;return!o&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof o=="string"&&(l=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(l=o),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(o,l=!0,u=!0){this._stopAsyncDecode=!1;const g=(y,b)=>{if(this._stopAsyncDecode){b(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const T=this.decode(o);y(T)}catch(T){const I=l&&T instanceof $,U=(T instanceof x||T instanceof M)&&u;if(I||U)return setTimeout(g,this._timeBetweenDecodingAttempts,y,b);b(T)}};return new Promise((y,b)=>g(y,b))}decodeContinuously(o,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(o);l(g,null),setTimeout(u,this.timeBetweenScansMillis)}catch(g){l(null,g);const y=g instanceof x||g instanceof M,b=g instanceof $;(y||b)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(o){const l=this.createBinaryBitmap(o);return this.decodeBitmap(l)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,l,u){l||(l={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(o,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(o,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(o,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const l=this.getCaptureCanvas(o),u=new K(l),g=new J(u);return new v(g)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const l=this.createCaptureCanvas(o);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,g;return typeof o<"u"&&(o instanceof HTMLVideoElement?(u=o.videoWidth,g=o.videoHeight):o instanceof HTMLImageElement&&(u=o.naturalWidth||o.width,g=o.naturalHeight||o.height)),l.style.width=u+"px",l.style.height=g+"px",l.width=u,l.height=g,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,l){try{o.srcObject=l}catch{o.src=URL.createObjectURL(l)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(o,l,u=l==null?0:8*l.length,g,y,b=w.currentTimeMillis()){this.text=o,this.rawBytes=l,this.numBits=u,this.resultPoints=g,this.format=y,this.timestamp=b,this.text=o,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=g,this.format=y,this.resultMetadata=null,b==null?this.timestamp=w.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,l)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const l=this.resultPoints;if(l===null)this.resultPoints=o;else if(o!==null&&o.length>0){const u=new Array(l.length+o.length);w.arraycopy(l,0,u,0,l.length),w.arraycopy(o,0,u,l.length,o.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ae;(function(q){q[q.AZTEC=0]="AZTEC",q[q.CODABAR=1]="CODABAR",q[q.CODE_39=2]="CODE_39",q[q.CODE_93=3]="CODE_93",q[q.CODE_128=4]="CODE_128",q[q.DATA_MATRIX=5]="DATA_MATRIX",q[q.EAN_8=6]="EAN_8",q[q.EAN_13=7]="EAN_13",q[q.ITF=8]="ITF",q[q.MAXICODE=9]="MAXICODE",q[q.PDF_417=10]="PDF_417",q[q.QR_CODE=11]="QR_CODE",q[q.RSS_14=12]="RSS_14",q[q.RSS_EXPANDED=13]="RSS_EXPANDED",q[q.UPC_A=14]="UPC_A",q[q.UPC_E=15]="UPC_E",q[q.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var X=ae,ne;(function(q){q[q.OTHER=0]="OTHER",q[q.ORIENTATION=1]="ORIENTATION",q[q.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",q[q.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",q[q.ISSUE_NUMBER=4]="ISSUE_NUMBER",q[q.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",q[q.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",q[q.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",q[q.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",q[q.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",q[q.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ne||(ne={}));var ue=ne;class fe{constructor(o,l,u,g,y=-1,b=-1){this.rawBytes=o,this.text=l,this.byteSegments=u,this.ecLevel=g,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=b,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class oe{exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}static addOrSubtract(o,l){return o^l}}class ve{constructor(o,l){if(l.length===0)throw new m;this.field=o;const u=l.length;if(u>1&&l[0]===0){let g=1;for(;g<u&&l[g]===0;)g++;g===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-g),w.arraycopy(l,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(o===1){u=0;for(let b=0,T=l.length;b!==T;b++){const I=l[b];u=oe.addOrSubtract(u,I)}return u}u=l[0];const g=l.length,y=this.field;for(let b=1;b<g;b++)u=oe.addOrSubtract(y.multiply(o,u),l[b]);return u}addOrSubtract(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let l=this.coefficients,u=o.coefficients;if(l.length>u.length){const b=l;l=u,u=b}let g=new Int32Array(u.length);const y=u.length-l.length;w.arraycopy(u,0,g,0,y);for(let b=y;b<u.length;b++)g[b]=oe.addOrSubtract(l[b-y],u[b]);return new ve(this.field,g)}multiply(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,g=o.coefficients,y=g.length,b=new Int32Array(u+y-1),T=this.field;for(let I=0;I<u;I++){const P=l[I];for(let U=0;U<y;U++)b[I+U]=oe.addOrSubtract(b[I+U],T.multiply(P,g[U]))}return new ve(T,b)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const l=this.coefficients.length,u=this.field,g=new Int32Array(l),y=this.coefficients;for(let b=0;b<l;b++)g[b]=u.multiply(y[b],o);return new ve(u,g)}multiplyByMonomial(o,l){if(o<0)throw new m;if(l===0)return this.field.getZero();const u=this.coefficients,g=u.length,y=new Int32Array(g+o),b=this.field;for(let T=0;T<g;T++)y[T]=b.multiply(u[T],l);return new ve(b,y)}divide(o){if(!this.field.equals(o.field))throw new m("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new m("Divide by 0");const l=this.field;let u=l.getZero(),g=this;const y=o.getCoefficient(o.getDegree()),b=l.inverse(y);for(;g.getDegree()>=o.getDegree()&&!g.isZero();){const T=g.getDegree()-o.getDegree(),I=l.multiply(g.getCoefficient(g.getDegree()),b),P=o.multiplyByMonomial(T,I),U=l.buildMonomial(T,I);u=u.addOrSubtract(U),g=g.addOrSubtract(P)}return[u,g]}toString(){let o="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(o+=" - ",u=-u):o.length>0&&(o+=" + "),l===0||u!==1){const g=this.field.log(u);g===0?o+="1":g===1?o+="a":(o+="a^",o+=g)}l!==0&&(l===1?o+="x":(o+="x^",o+=l))}}return o}}class Se extends d{}Se.kind="ArithmeticException";class Ce extends oe{constructor(o,l,u){super(),this.primitive=o,this.size=l,this.generatorBase=u;const g=new Int32Array(l);let y=1;for(let T=0;T<l;T++)g[T]=y,y*=2,y>=l&&(y^=o,y&=l-1);this.expTable=g;const b=new Int32Array(l);for(let T=0;T<l-1;T++)b[g[T]]=T;this.logTable=b,this.zero=new ve(this,Int32Array.from([0])),this.one=new ve(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,l){if(o<0)throw new m;if(l===0)return this.zero;const u=new Int32Array(o+1);return u[0]=l,new ve(this,u)}inverse(o){if(o===0)throw new Se;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,l){return o===0||l===0?0:this.expTable[(this.logTable[o]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Ce.AZTEC_DATA_12=new Ce(4201,4096,1),Ce.AZTEC_DATA_10=new Ce(1033,1024,1),Ce.AZTEC_DATA_6=new Ce(67,64,1),Ce.AZTEC_PARAM=new Ce(19,16,1),Ce.QR_CODE_FIELD_256=new Ce(285,256,0),Ce.DATA_MATRIX_FIELD_256=new Ce(301,256,1),Ce.AZTEC_DATA_8=Ce.DATA_MATRIX_FIELD_256,Ce.MAXICODE_FIELD_64=Ce.AZTEC_DATA_6;class Fe extends d{}Fe.kind="ReedSolomonException";class Ge extends d{}Ge.kind="IllegalStateException";class ht{constructor(o){this.field=o}decode(o,l){const u=this.field,g=new ve(u,o),y=new Int32Array(l);let b=!0;for(let ie=0;ie<l;ie++){const le=g.evaluateAt(u.exp(ie+u.getGeneratorBase()));y[y.length-1-ie]=le,le!==0&&(b=!1)}if(b)return;const T=new ve(u,y),I=this.runEuclideanAlgorithm(u.buildMonomial(l,1),T,l),P=I[0],U=I[1],W=this.findErrorLocations(P),Q=this.findErrorMagnitudes(U,W);for(let ie=0;ie<W.length;ie++){const le=o.length-1-u.log(W[ie]);if(le<0)throw new Fe("Bad error location");o[le]=Ce.addOrSubtract(o[le],Q[ie])}}runEuclideanAlgorithm(o,l,u){if(o.getDegree()<l.getDegree()){const ie=o;o=l,l=ie}const g=this.field;let y=o,b=l,T=g.getZero(),I=g.getOne();for(;b.getDegree()>=(u/2|0);){let ie=y,le=T;if(y=b,T=I,y.isZero())throw new Fe("r_{i-1} was zero");b=ie;let ce=g.getZero();const pe=y.getCoefficient(y.getDegree()),xe=g.inverse(pe);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){const Re=b.getDegree()-y.getDegree(),je=g.multiply(b.getCoefficient(b.getDegree()),xe);ce=ce.addOrSubtract(g.buildMonomial(Re,je)),b=b.addOrSubtract(y.multiplyByMonomial(Re,je))}if(I=ce.multiply(T).addOrSubtract(le),b.getDegree()>=y.getDegree())throw new Ge("Division algorithm failed to reduce polynomial?")}const P=I.getCoefficient(0);if(P===0)throw new Fe("sigmaTilde(0) was zero");const U=g.inverse(P),W=I.multiplyScalar(U),Q=b.multiplyScalar(U);return[W,Q]}findErrorLocations(o){const l=o.getDegree();if(l===1)return Int32Array.from([o.getCoefficient(1)]);const u=new Int32Array(l);let g=0;const y=this.field;for(let b=1;b<y.getSize()&&g<l;b++)o.evaluateAt(b)===0&&(u[g]=y.inverse(b),g++);if(g!==l)throw new Fe("Error locator degree does not match number of roots");return u}findErrorMagnitudes(o,l){const u=l.length,g=new Int32Array(u),y=this.field;for(let b=0;b<u;b++){const T=y.inverse(l[b]);let I=1;for(let P=0;P<u;P++)if(b!==P){const U=y.multiply(l[P],T),W=U&1?U&-2:U|1;I=y.multiply(I,W)}g[b]=y.multiply(o.evaluateAt(T),y.inverse(I)),y.getGeneratorBase()!==0&&(g[b]=y.multiply(g[b],T))}return g}}var we;(function(q){q[q.UPPER=0]="UPPER",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.DIGIT=3]="DIGIT",q[q.PUNCT=4]="PUNCT",q[q.BINARY=5]="BINARY"})(we||(we={}));class he{decode(o){this.ddata=o;let l=o.getBits(),u=this.extractBits(l),g=this.correctBits(u),y=he.convertBoolArrayToByteArray(g),b=he.getEncodedData(g),T=new fe(y,b,null,null);return T.setNumBits(g.length),T}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let l=o.length,u=we.UPPER,g=we.UPPER,y="",b=0;for(;b<l;)if(g===we.BINARY){if(l-b<5)break;let T=he.readCode(o,b,5);if(b+=5,T===0){if(l-b<11)break;T=he.readCode(o,b,11)+31,b+=11}for(let I=0;I<T;I++){if(l-b<8){b=l;break}const P=he.readCode(o,b,8);y+=F.castAsNonUtf8Char(P),b+=8}g=u}else{let T=g===we.DIGIT?4:5;if(l-b<T)break;let I=he.readCode(o,b,T);b+=T;let P=he.getCharacter(g,I);P.startsWith("CTRL_")?(u=g,g=he.getTable(P.charAt(5)),P.charAt(6)==="L"&&(u=g)):(y+=P,g=u)}return y}static getTable(o){switch(o){case"L":return we.LOWER;case"P":return we.PUNCT;case"M":return we.MIXED;case"D":return we.DIGIT;case"B":return we.BINARY;case"U":default:return we.UPPER}}static getCharacter(o,l){switch(o){case we.UPPER:return he.UPPER_TABLE[l];case we.LOWER:return he.LOWER_TABLE[l];case we.MIXED:return he.MIXED_TABLE[l];case we.PUNCT:return he.PUNCT_TABLE[l];case we.DIGIT:return he.DIGIT_TABLE[l];default:throw new Ge("Bad table")}}correctBits(o){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=Ce.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=Ce.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=Ce.AZTEC_DATA_10):(u=12,l=Ce.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),y=o.length/u;if(y<g)throw new M;let b=o.length%u,T=new Int32Array(y);for(let Q=0;Q<y;Q++,b+=u)T[Q]=he.readCode(o,b,u);try{new ht(l).decode(T,y-g)}catch(Q){throw new M(Q)}let I=(1<<u)-1,P=0;for(let Q=0;Q<g;Q++){let ie=T[Q];if(ie===0||ie===I)throw new M;(ie===1||ie===I-1)&&P++}let U=new Array(g*u-P),W=0;for(let Q=0;Q<g;Q++){let ie=T[Q];if(ie===1||ie===I-1)U.fill(ie>1,W,W+u-1),W+=u-1;else for(let le=u-1;le>=0;--le)U[W++]=(ie&1<<le)!==0}return U}extractBits(o){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),g=(l?11:14)+u*4,y=new Int32Array(g),b=new Array(this.totalBitsInLayer(u,l));if(l)for(let T=0;T<y.length;T++)y[T]=T;else{let T=g+1+2*C.truncDivision(C.truncDivision(g,2)-1,15),I=g/2,P=C.truncDivision(T,2);for(let U=0;U<I;U++){let W=U+C.truncDivision(U,15);y[I-U-1]=P-W-1,y[I+U]=P+W+1}}for(let T=0,I=0;T<u;T++){let P=(u-T)*4+(l?9:12),U=T*2,W=g-1-U;for(let Q=0;Q<P;Q++){let ie=Q*2;for(let le=0;le<2;le++)b[I+ie+le]=o.get(y[U+le],y[U+Q]),b[I+2*P+ie+le]=o.get(y[U+Q],y[W-le]),b[I+4*P+ie+le]=o.get(y[W-le],y[W-Q]),b[I+6*P+ie+le]=o.get(y[W-Q],y[U+le])}I+=P*8}return b}static readCode(o,l,u){let g=0;for(let y=l;y<l+u;y++)g<<=1,o[y]&&(g|=1);return g}static readByte(o,l){let u=o.length-l;return u>=8?he.readCode(o,l,8):he.readCode(o,l,u)<<8-u}static convertBoolArrayToByteArray(o){let l=new Uint8Array((o.length+7)/8);for(let u=0;u<l.length;u++)l[u]=he.readByte(o,8*u);return l}totalBitsInLayer(o,l){return((l?88:112)+16*o)*o}}he.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],he.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],he.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],he.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],he.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class de{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,l,u,g){const y=o-u,b=l-g;return Math.sqrt(y*y+b*b)}static sum(o){let l=0;for(let u=0,g=o.length;u!==g;u++){const y=o[u];l+=y}return l}}class Ne{static floatToIntBits(o){return o}}Ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(o,l){this.x=o,this.y=l}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof ge){const l=o;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Ne.floatToIntBits(this.x)+Ne.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const l=this.distance(o[0],o[1]),u=this.distance(o[1],o[2]),g=this.distance(o[0],o[2]);let y,b,T;if(u>=l&&u>=g?(b=o[0],y=o[1],T=o[2]):g>=u&&g>=l?(b=o[1],y=o[0],T=o[2]):(b=o[2],y=o[0],T=o[1]),this.crossProductZ(y,b,T)<0){const I=y;y=T,T=I}o[0]=y,o[1]=b,o[2]=T}static distance(o,l){return de.distance(o.x,o.y,l.x,l.y)}static crossProductZ(o,l,u){const g=l.x,y=l.y;return(u.x-g)*(o.y-y)-(u.y-y)*(o.x-g)}}class Ee{constructor(o,l){this.bits=o,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class Le extends Ee{constructor(o,l,u,g,y){super(o,l),this.compact=u,this.nbDatablocks=g,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class He{constructor(o,l,u,g){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),l==null&&(l=He.INIT_SIZE),u==null&&(u=o.getWidth()/2|0),g==null&&(g=o.getHeight()/2|0);const y=l/2|0;if(this.leftInit=u-y,this.rightInit=u+y,this.upInit=g-y,this.downInit=g+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let o=this.leftInit,l=this.rightInit,u=this.upInit,g=this.downInit,y=!1,b=!0,T=!1,I=!1,P=!1,U=!1,W=!1;const Q=this.width,ie=this.height;for(;b;){b=!1;let le=!0;for(;(le||!I)&&l<Q;)le=this.containsBlackPoint(u,g,l,!1),le?(l++,b=!0,I=!0):I||l++;if(l>=Q){y=!0;break}let ce=!0;for(;(ce||!P)&&g<ie;)ce=this.containsBlackPoint(o,l,g,!0),ce?(g++,b=!0,P=!0):P||g++;if(g>=ie){y=!0;break}let pe=!0;for(;(pe||!U)&&o>=0;)pe=this.containsBlackPoint(u,g,o,!1),pe?(o--,b=!0,U=!0):U||o--;if(o<0){y=!0;break}let xe=!0;for(;(xe||!W)&&u>=0;)xe=this.containsBlackPoint(o,l,u,!0),xe?(u--,b=!0,W=!0):W||u--;if(u<0){y=!0;break}b&&(T=!0)}if(!y&&T){const le=l-o;let ce=null;for(let je=1;ce===null&&je<le;je++)ce=this.getBlackPointOnSegment(o,g-je,o+je,g);if(ce==null)throw new $;let pe=null;for(let je=1;pe===null&&je<le;je++)pe=this.getBlackPointOnSegment(o,u+je,o+je,u);if(pe==null)throw new $;let xe=null;for(let je=1;xe===null&&je<le;je++)xe=this.getBlackPointOnSegment(l,u+je,l-je,u);if(xe==null)throw new $;let Re=null;for(let je=1;Re===null&&je<le;je++)Re=this.getBlackPointOnSegment(l,g-je,l-je,g);if(Re==null)throw new $;return this.centerEdges(Re,ce,xe,pe)}else throw new $}getBlackPointOnSegment(o,l,u,g){const y=de.round(de.distance(o,l,u,g)),b=(u-o)/y,T=(g-l)/y,I=this.image;for(let P=0;P<y;P++){const U=de.round(o+P*b),W=de.round(l+P*T);if(I.get(U,W))return new ge(U,W)}return null}centerEdges(o,l,u,g){const y=o.getX(),b=o.getY(),T=l.getX(),I=l.getY(),P=u.getX(),U=u.getY(),W=g.getX(),Q=g.getY(),ie=He.CORR;return y<this.width/2?[new ge(W-ie,Q+ie),new ge(T+ie,I+ie),new ge(P-ie,U-ie),new ge(y+ie,b-ie)]:[new ge(W+ie,Q+ie),new ge(T+ie,I-ie),new ge(P-ie,U+ie),new ge(y-ie,b-ie)]}containsBlackPoint(o,l,u,g){const y=this.image;if(g){for(let b=o;b<=l;b++)if(y.get(b,u))return!0}else for(let b=o;b<=l;b++)if(y.get(u,b))return!0;return!1}}He.INIT_SIZE=10,He.CORR=1;class rt{static checkAndNudgePoints(o,l){const u=o.getWidth(),g=o.getHeight();let y=!0;for(let b=0;b<l.length&&y;b+=2){const T=Math.floor(l[b]),I=Math.floor(l[b+1]);if(T<-1||T>u||I<-1||I>g)throw new $;y=!1,T===-1?(l[b]=0,y=!0):T===u&&(l[b]=u-1,y=!0),I===-1?(l[b+1]=0,y=!0):I===g&&(l[b+1]=g-1,y=!0)}y=!0;for(let b=l.length-2;b>=0&&y;b-=2){const T=Math.floor(l[b]),I=Math.floor(l[b+1]);if(T<-1||T>u||I<-1||I>g)throw new $;y=!1,T===-1?(l[b]=0,y=!0):T===u&&(l[b]=u-1,y=!0),I===-1?(l[b+1]=0,y=!0):I===g&&(l[b+1]=g-1,y=!0)}}}class ut{constructor(o,l,u,g,y,b,T,I,P){this.a11=o,this.a21=l,this.a31=u,this.a12=g,this.a22=y,this.a32=b,this.a13=T,this.a23=I,this.a33=P}static quadrilateralToQuadrilateral(o,l,u,g,y,b,T,I,P,U,W,Q,ie,le,ce,pe){const xe=ut.quadrilateralToSquare(o,l,u,g,y,b,T,I);return ut.squareToQuadrilateral(P,U,W,Q,ie,le,ce,pe).times(xe)}transformPoints(o){const l=o.length,u=this.a11,g=this.a12,y=this.a13,b=this.a21,T=this.a22,I=this.a23,P=this.a31,U=this.a32,W=this.a33;for(let Q=0;Q<l;Q+=2){const ie=o[Q],le=o[Q+1],ce=y*ie+I*le+W;o[Q]=(u*ie+b*le+P)/ce,o[Q+1]=(g*ie+T*le+U)/ce}}transformPointsWithValues(o,l){const u=this.a11,g=this.a12,y=this.a13,b=this.a21,T=this.a22,I=this.a23,P=this.a31,U=this.a32,W=this.a33,Q=o.length;for(let ie=0;ie<Q;ie++){const le=o[ie],ce=l[ie],pe=y*le+I*ce+W;o[ie]=(u*le+b*ce+P)/pe,l[ie]=(g*le+T*ce+U)/pe}}static squareToQuadrilateral(o,l,u,g,y,b,T,I){const P=o-u+y-T,U=l-g+b-I;if(P===0&&U===0)return new ut(u-o,y-u,o,g-l,b-g,l,0,0,1);{const W=u-y,Q=T-y,ie=g-b,le=I-b,ce=W*le-Q*ie,pe=(P*le-Q*U)/ce,xe=(W*U-P*ie)/ce;return new ut(u-o+pe*u,T-o+xe*T,o,g-l+pe*g,I-l+xe*I,l,pe,xe,1)}}static quadrilateralToSquare(o,l,u,g,y,b,T,I){return ut.squareToQuadrilateral(o,l,u,g,y,b,T,I).buildAdjoint()}buildAdjoint(){return new ut(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new ut(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Tr extends rt{sampleGrid(o,l,u,g,y,b,T,I,P,U,W,Q,ie,le,ce,pe,xe,Re,je){const Oe=ut.quadrilateralToQuadrilateral(g,y,b,T,I,P,U,W,Q,ie,le,ce,pe,xe,Re,je);return this.sampleGridWithTransform(o,l,u,Oe)}sampleGridWithTransform(o,l,u,g){if(l<=0||u<=0)throw new $;const y=new z(l,u),b=new Float32Array(2*l);for(let T=0;T<u;T++){const I=b.length,P=T+.5;for(let U=0;U<I;U+=2)b[U]=U/2+.5,b[U+1]=P;g.transformPoints(b),rt.checkAndNudgePoints(o,b);try{for(let U=0;U<I;U+=2)o.get(Math.floor(b[U]),Math.floor(b[U+1]))&&y.set(U/2,T)}catch{throw new $}}return y}}class wt{static setGridSampler(o){wt.gridSampler=o}static getInstance(){return wt.gridSampler}}wt.gridSampler=new Tr;class Or{constructor(o,l){this.x=o,this.y=l}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class kt{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(o){let b=u[0];u[0]=u[2],u[2]=b}this.extractParameters(u);let g=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),y=this.getMatrixCornerPoints(u);return new Le(g,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new $;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(o[0],o[1],l),this.sampleLine(o[1],o[2],l),this.sampleLine(o[2],o[3],l),this.sampleLine(o[3],o[0],l)]);this.shift=this.getRotation(u,l);let g=0;for(let b=0;b<4;b++){let T=u[(this.shift+b)%4];this.compact?(g<<=7,g+=T>>1&127):(g<<=10,g+=(T>>2&992)+(T>>1&31))}let y=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(o,l){let u=0;o.forEach((g,y,b)=>{let T=(g>>l-2<<1)+(g&1);u=(u<<3)+T}),u=((u&1)<<11)+(u>>1);for(let g=0;g<4;g++)if(C.bitCount(u^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new $}getCorrectedParameterData(o,l){let u,g;l?(u=7,g=2):(u=10,g=4);let y=u-g,b=new Int32Array(u);for(let I=u-1;I>=0;--I)b[I]=o&15,o>>=4;try{new ht(Ce.AZTEC_PARAM).decode(b,y)}catch{throw new $}let T=0;for(let I=0;I<g;I++)T=(T<<4)+b[I];return T}getBullsEyeCorners(o){let l=o,u=o,g=o,y=o,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let W=this.getFirstDifferent(l,b,1,-1),Q=this.getFirstDifferent(u,b,1,1),ie=this.getFirstDifferent(g,b,-1,1),le=this.getFirstDifferent(y,b,-1,-1);if(this.nbCenterLayers>2){let ce=this.distancePoint(le,W)*this.nbCenterLayers/(this.distancePoint(y,l)*(this.nbCenterLayers+2));if(ce<.75||ce>1.25||!this.isWhiteOrBlackRectangle(W,Q,ie,le))break}l=W,u=Q,g=ie,y=le,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let T=new ge(l.getX()+.5,l.getY()-.5),I=new ge(u.getX()+.5,u.getY()+.5),P=new ge(g.getX()-.5,g.getY()+.5),U=new ge(y.getX()-.5,y.getY()-.5);return this.expandSquare([T,I,P,U],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,l,u,g;try{let T=new He(this.image).detect();o=T[0],l=T[1],u=T[2],g=T[3]}catch{let I=this.image.getWidth()/2,P=this.image.getHeight()/2;o=this.getFirstDifferent(new Or(I+7,P-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Or(I+7,P+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Or(I-7,P+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new Or(I-7,P-7),!1,-1,-1).toResultPoint()}let y=de.round((o.getX()+g.getX()+l.getX()+u.getX())/4),b=de.round((o.getY()+g.getY()+l.getY()+u.getY())/4);try{let T=new He(this.image,15,y,b).detect();o=T[0],l=T[1],u=T[2],g=T[3]}catch{o=this.getFirstDifferent(new Or(y+7,b-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Or(y+7,b+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Or(y-7,b+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new Or(y-7,b-7),!1,-1,-1).toResultPoint()}return y=de.round((o.getX()+g.getX()+l.getX()+u.getX())/4),b=de.round((o.getY()+g.getY()+l.getY()+u.getY())/4),new Or(y,b)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,l,u,g,y){let b=wt.getInstance(),T=this.getDimension(),I=T/2-this.nbCenterLayers,P=T/2+this.nbCenterLayers;return b.sampleGrid(o,T,T,I,I,P,I,P,P,I,P,l.getX(),l.getY(),u.getX(),u.getY(),g.getX(),g.getY(),y.getX(),y.getY())}sampleLine(o,l,u){let g=0,y=this.distanceResultPoint(o,l),b=y/u,T=o.getX(),I=o.getY(),P=b*(l.getX()-o.getX())/y,U=b*(l.getY()-o.getY())/y;for(let W=0;W<u;W++)this.image.get(de.round(T+W*P),de.round(I+W*U))&&(g|=1<<u-W-1);return g}isWhiteOrBlackRectangle(o,l,u,g){let y=3;o=new Or(o.getX()-y,o.getY()+y),l=new Or(l.getX()-y,l.getY()-y),u=new Or(u.getX()+y,u.getY()-y),g=new Or(g.getX()+y,g.getY()+y);let b=this.getColor(g,o);if(b===0)return!1;let T=this.getColor(o,l);return T!==b||(T=this.getColor(l,u),T!==b)?!1:(T=this.getColor(u,g),T===b)}getColor(o,l){let u=this.distancePoint(o,l),g=(l.getX()-o.getX())/u,y=(l.getY()-o.getY())/u,b=0,T=o.getX(),I=o.getY(),P=this.image.get(o.getX(),o.getY()),U=Math.ceil(u);for(let Q=0;Q<U;Q++)T+=g,I+=y,this.image.get(de.round(T),de.round(I))!==P&&b++;let W=b/u;return W>.1&&W<.9?0:W<=.1===P?1:-1}getFirstDifferent(o,l,u,g){let y=o.getX()+u,b=o.getY()+g;for(;this.isValid(y,b)&&this.image.get(y,b)===l;)y+=u,b+=g;for(y-=u,b-=g;this.isValid(y,b)&&this.image.get(y,b)===l;)y+=u;for(y-=u;this.isValid(y,b)&&this.image.get(y,b)===l;)b+=g;return b-=g,new Or(y,b)}expandSquare(o,l,u){let g=u/(2*l),y=o[0].getX()-o[2].getX(),b=o[0].getY()-o[2].getY(),T=(o[0].getX()+o[2].getX())/2,I=(o[0].getY()+o[2].getY())/2,P=new ge(T+g*y,I+g*b),U=new ge(T-g*y,I-g*b);y=o[1].getX()-o[3].getX(),b=o[1].getY()-o[3].getY(),T=(o[1].getX()+o[3].getX())/2,I=(o[1].getY()+o[3].getY())/2;let W=new ge(T+g*y,I+g*b),Q=new ge(T-g*y,I-g*b);return[P,W,U,Q]}isValid(o,l){return o>=0&&o<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(o){let l=de.round(o.getX()),u=de.round(o.getY());return this.isValid(l,u)}distancePoint(o,l){return de.distance(o.getX(),o.getY(),l.getX(),l.getY())}distanceResultPoint(o,l){return de.distance(o.getX(),o.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class fn{decode(o,l=null){let u=null,g=new kt(o.getBlackMatrix()),y=null,b=null;try{let U=g.detectMirror(!1);y=U.getPoints(),this.reportFoundResultPoints(l,y),b=new he().decode(U)}catch(U){u=U}if(b==null)try{let U=g.detectMirror(!0);y=U.getPoints(),this.reportFoundResultPoints(l,y),b=new he().decode(U)}catch(U){throw u??U}let T=new se(b.getText(),b.getRawBytes(),b.getNumBits(),y,X.AZTEC,w.currentTimeMillis()),I=b.getByteSegments();I!=null&&T.putMetadata(ue.BYTE_SEGMENTS,I);let P=b.getECLevel();return P!=null&&T.putMetadata(ue.ERROR_CORRECTION_LEVEL,P),T}reportFoundResultPoints(o,l){if(o!=null){let u=o.get(D.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((g,y,b)=>{u.foundPossibleResultPoint(g)})}}reset(){}}class of extends Z{constructor(o=500){super(new fn,o)}}class Gt{decode(o,l){try{return this.doDecode(o,l)}catch{if(l&&l.get(D.TRY_HARDER)===!0&&o.isRotateSupported()){const y=o.rotateCounterClockwise(),b=this.doDecode(y,l),T=b.getResultMetadata();let I=270;T!==null&&T.get(ue.ORIENTATION)===!0&&(I=I+T.get(ue.ORIENTATION)%360),b.putMetadata(ue.ORIENTATION,I);const P=b.getResultPoints();if(P!==null){const U=y.getHeight();for(let W=0;W<P.length;W++)P[W]=new ge(U-P[W].getY()-1,P[W].getX())}return b}else throw new $}}reset(){}doDecode(o,l){const u=o.getWidth(),g=o.getHeight();let y=new S(u);const b=l&&l.get(D.TRY_HARDER)===!0,T=Math.max(1,g>>(b?8:5));let I;b?I=g:I=15;const P=Math.trunc(g/2);for(let U=0;U<I;U++){const W=Math.trunc((U+1)/2),Q=(U&1)===0,ie=P+T*(Q?W:-W);if(ie<0||ie>=g)break;try{y=o.getBlackRow(ie,y)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(y.reverse(),l&&l.get(D.NEED_RESULT_POINT_CALLBACK)===!0)){const ce=new Map;l.forEach((pe,xe)=>ce.set(xe,pe)),ce.delete(D.NEED_RESULT_POINT_CALLBACK),l=ce}try{const ce=this.decodeRow(ie,y,l);if(le===1){ce.putMetadata(ue.ORIENTATION,180);const pe=ce.getResultPoints();pe!==null&&(pe[0]=new ge(u-pe[0].getX()-1,pe[0].getY()),pe[1]=new ge(u-pe[1].getX()-1,pe[1].getY()))}return ce}catch{}}}throw new $}static recordPattern(o,l,u){const g=u.length;for(let P=0;P<g;P++)u[P]=0;const y=o.getSize();if(l>=y)throw new $;let b=!o.get(l),T=0,I=l;for(;I<y;){if(o.get(I)!==b)u[T]++;else{if(++T===g)break;u[T]=1,b=!b}I++}if(!(T===g||T===g-1&&I===y))throw new $}static recordPatternInReverse(o,l,u){let g=u.length,y=o.get(l);for(;l>0&&g>=0;)o.get(--l)!==y&&(g--,y=!y);if(g>=0)throw new $;Gt.recordPattern(o,l+1,u)}static patternMatchVariance(o,l,u){const g=o.length;let y=0,b=0;for(let P=0;P<g;P++)y+=o[P],b+=l[P];if(y<b)return Number.POSITIVE_INFINITY;const T=y/b;u*=T;let I=0;for(let P=0;P<g;P++){const U=o[P],W=l[P]*T,Q=U>W?U-W:W-U;if(Q>u)return Number.POSITIVE_INFINITY;I+=Q}return I/y}}class Me extends Gt{static findStartPattern(o){const l=o.getSize(),u=o.getNextSet(0);let g=0,y=Int32Array.from([0,0,0,0,0,0]),b=u,T=!1;const I=6;for(let P=u;P<l;P++)if(o.get(P)!==T)y[g]++;else{if(g===I-1){let U=Me.MAX_AVG_VARIANCE,W=-1;for(let Q=Me.CODE_START_A;Q<=Me.CODE_START_C;Q++){const ie=Gt.patternMatchVariance(y,Me.CODE_PATTERNS[Q],Me.MAX_INDIVIDUAL_VARIANCE);ie<U&&(U=ie,W=Q)}if(W>=0&&o.isRange(Math.max(0,b-(P-b)/2),b,!1))return Int32Array.from([b,P,W]);b+=y[0]+y[1],y=y.slice(2,y.length-1),y[g-1]=0,y[g]=0,g--}else g++;y[g]=1,T=!T}throw new $}static decodeCode(o,l,u){Gt.recordPattern(o,u,l);let g=Me.MAX_AVG_VARIANCE,y=-1;for(let b=0;b<Me.CODE_PATTERNS.length;b++){const T=Me.CODE_PATTERNS[b],I=this.patternMatchVariance(l,T,Me.MAX_INDIVIDUAL_VARIANCE);I<g&&(g=I,y=b)}if(y>=0)return y;throw new $}decodeRow(o,l,u){const g=u&&u.get(D.ASSUME_GS1)===!0,y=Me.findStartPattern(l),b=y[2];let T=0;const I=new Uint8Array(20);I[T++]=b;let P;switch(b){case Me.CODE_START_A:P=Me.CODE_CODE_A;break;case Me.CODE_START_B:P=Me.CODE_CODE_B;break;case Me.CODE_START_C:P=Me.CODE_CODE_C;break;default:throw new M}let U=!1,W=!1,Q="",ie=y[0],le=y[1];const ce=Int32Array.from([0,0,0,0,0,0]);let pe=0,xe=0,Re=b,je=0,Oe=!0,vt=!1,st=!1;for(;!U;){const wl=W;switch(W=!1,pe=xe,xe=Me.decodeCode(l,ce,le),I[T++]=xe,xe!==Me.CODE_STOP&&(Oe=!0),xe!==Me.CODE_STOP&&(je++,Re+=je*xe),ie=le,le+=ce.reduce((ek,tk)=>ek+tk,0),xe){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new M}switch(P){case Me.CODE_CODE_A:if(xe<64)st===vt?Q+=String.fromCharCode(32+xe):Q+=String.fromCharCode(32+xe+128),st=!1;else if(xe<96)st===vt?Q+=String.fromCharCode(xe-64):Q+=String.fromCharCode(xe+64),st=!1;else switch(xe!==Me.CODE_STOP&&(Oe=!1),xe){case Me.CODE_FNC_1:g&&(Q.length===0?Q+="]C1":Q+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!vt&&st?(vt=!0,st=!1):vt&&st?(vt=!1,st=!1):st=!0;break;case Me.CODE_SHIFT:W=!0,P=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:P=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:P=Me.CODE_CODE_C;break;case Me.CODE_STOP:U=!0;break}break;case Me.CODE_CODE_B:if(xe<96)st===vt?Q+=String.fromCharCode(32+xe):Q+=String.fromCharCode(32+xe+128),st=!1;else switch(xe!==Me.CODE_STOP&&(Oe=!1),xe){case Me.CODE_FNC_1:g&&(Q.length===0?Q+="]C1":Q+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!vt&&st?(vt=!0,st=!1):vt&&st?(vt=!1,st=!1):st=!0;break;case Me.CODE_SHIFT:W=!0,P=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:P=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:P=Me.CODE_CODE_C;break;case Me.CODE_STOP:U=!0;break}break;case Me.CODE_CODE_C:if(xe<100)xe<10&&(Q+="0"),Q+=xe;else switch(xe!==Me.CODE_STOP&&(Oe=!1),xe){case Me.CODE_FNC_1:g&&(Q.length===0?Q+="]C1":Q+="");break;case Me.CODE_CODE_A:P=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:P=Me.CODE_CODE_B;break;case Me.CODE_STOP:U=!0;break}break}wl&&(P=P===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const Tn=le-ie;if(le=l.getNextUnset(le),!l.isRange(le,Math.min(l.getSize(),le+(le-ie)/2),!1))throw new $;if(Re-=je*pe,Re%103!==pe)throw new x;const ki=Q.length;if(ki===0)throw new $;ki>0&&Oe&&(P===Me.CODE_CODE_C?Q=Q.substring(0,ki-2):Q=Q.substring(0,ki-1));const On=(y[1]+y[0])/2,Pt=ie+Tn/2,Kr=I.length,zn=new Uint8Array(Kr);for(let wl=0;wl<Kr;wl++)zn[wl]=I[wl];const xl=[new ge(On,o),new ge(Pt,o)];return new se(Q,zn,0,xl,X.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class ar extends Gt{constructor(o=!1,l=!1){super(),this.usingCheckDigit=o,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,l,u){let g=this.counters;g.fill(0),this.decodeRowResult="";let y=ar.findAsteriskPattern(l,g),b=l.getNextSet(y[1]),T=l.getSize(),I,P;do{ar.recordPattern(l,b,g);let ce=ar.toNarrowWidePattern(g);if(ce<0)throw new $;I=ar.patternToChar(ce),this.decodeRowResult+=I,P=b;for(let pe of g)b+=pe;b=l.getNextSet(b)}while(I!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let U=0;for(let ce of g)U+=ce;let W=b-P-U;if(b!==T&&W*2<U)throw new $;if(this.usingCheckDigit){let ce=this.decodeRowResult.length-1,pe=0;for(let xe=0;xe<ce;xe++)pe+=ar.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(xe));if(this.decodeRowResult.charAt(ce)!==ar.ALPHABET_STRING.charAt(pe%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,ce)}if(this.decodeRowResult.length===0)throw new $;let Q;this.extendedMode?Q=ar.decodeExtended(this.decodeRowResult):Q=this.decodeRowResult;let ie=(y[1]+y[0])/2,le=P+U/2;return new se(Q,null,0,[new ge(ie,o),new ge(le,o)],X.CODE_39,new Date().getTime())}static findAsteriskPattern(o,l){let u=o.getSize(),g=o.getNextSet(0),y=0,b=g,T=!1,I=l.length;for(let P=g;P<u;P++)if(o.get(P)!==T)l[y]++;else{if(y===I-1){if(this.toNarrowWidePattern(l)===ar.ASTERISK_ENCODING&&o.isRange(Math.max(0,b-Math.floor((P-b)/2)),b,!1))return[b,P];b+=l[0]+l[1],l.copyWithin(0,2,2+y-1),l[y-1]=0,l[y]=0,y--}else y++;l[y]=1,T=!T}throw new $}static toNarrowWidePattern(o){let l=o.length,u=0,g;do{let y=2147483647;for(let I of o)I<y&&I>u&&(y=I);u=y,g=0;let b=0,T=0;for(let I=0;I<l;I++){let P=o[I];P>u&&(T|=1<<l-1-I,g++,b+=P)}if(g===3){for(let I=0;I<l&&g>0;I++){let P=o[I];if(P>u&&(g--,P*2>=b))return-1}return T}}while(g>3);return-1}static patternToChar(o){for(let l=0;l<ar.CHARACTER_ENCODINGS.length;l++)if(ar.CHARACTER_ENCODINGS[l]===o)return ar.ALPHABET_STRING.charAt(l);if(o===ar.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(o){let l=o.length,u="";for(let g=0;g<l;g++){let y=o.charAt(g);if(y==="+"||y==="$"||y==="%"||y==="/"){let b=o.charAt(g+1),T="\0";switch(y){case"+":if(b>="A"&&b<="Z")T=String.fromCharCode(b.charCodeAt(0)+32);else throw new M;break;case"$":if(b>="A"&&b<="Z")T=String.fromCharCode(b.charCodeAt(0)-64);else throw new M;break;case"%":if(b>="A"&&b<="E")T=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")T=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")T=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")T=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")T="\0";else if(b==="V")T="@";else if(b==="W")T="`";else if(b==="X"||b==="Y"||b==="Z")T="";else throw new M;break;case"/":if(b>="A"&&b<="O")T=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")T=":";else throw new M;break}u+=T,g++}else u+=y}return u}}ar.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ar.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ar.ASTERISK_ENCODING=148;class bt extends Gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,l,u){let g=this.decodeStart(l),y=this.decodeEnd(l),b=new H;bt.decodeMiddle(l,g[1],y[0],b);let T=b.toString(),I=null;u!=null&&(I=u.get(D.ALLOWED_LENGTHS)),I==null&&(I=bt.DEFAULT_ALLOWED_LENGTHS);let P=T.length,U=!1,W=0;for(let le of I){if(P===le){U=!0;break}le>W&&(W=le)}if(!U&&P>W&&(U=!0),!U)throw new M;const Q=[new ge(g[1],o),new ge(y[0],o)];return new se(T,null,0,Q,X.ITF,new Date().getTime())}static decodeMiddle(o,l,u,g){let y=new Int32Array(10),b=new Int32Array(5),T=new Int32Array(5);for(y.fill(0),b.fill(0),T.fill(0);l<u;){Gt.recordPattern(o,l,y);for(let P=0;P<5;P++){let U=2*P;b[P]=y[U],T[P]=y[U+1]}let I=bt.decodeDigit(b);g.append(I.toString()),I=this.decodeDigit(T),g.append(I.toString()),y.forEach(function(P){l+=P})}}decodeStart(o){let l=bt.skipWhiteSpace(o),u=bt.findGuardPattern(o,l,bt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(o,u[0]),u}validateQuietZone(o,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let g=l-1;u>0&&g>=0&&!o.get(g);g--)u--;if(u!==0)throw new $}static skipWhiteSpace(o){const l=o.getSize(),u=o.getNextSet(0);if(u===l)throw new $;return u}decodeEnd(o){o.reverse();try{let l=bt.skipWhiteSpace(o),u;try{u=bt.findGuardPattern(o,l,bt.END_PATTERN_REVERSED[0])}catch(y){y instanceof $&&(u=bt.findGuardPattern(o,l,bt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,u[0]);let g=u[0];return u[0]=o.getSize()-u[1],u[1]=o.getSize()-g,u}finally{o.reverse()}}static findGuardPattern(o,l,u){let g=u.length,y=new Int32Array(g),b=o.getSize(),T=!1,I=0,P=l;y.fill(0);for(let U=l;U<b;U++)if(o.get(U)!==T)y[I]++;else{if(I===g-1){if(Gt.patternMatchVariance(y,u,bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return[P,U];P+=y[0]+y[1],w.arraycopy(y,2,y,0,I-1),y[I-1]=0,y[I]=0,I--}else I++;y[I]=1,T=!T}throw new $}static decodeDigit(o){let l=bt.MAX_AVG_VARIANCE,u=-1,g=bt.PATTERNS.length;for(let y=0;y<g;y++){let b=bt.PATTERNS[y],T=Gt.patternMatchVariance(o,b,bt.MAX_INDIVIDUAL_VARIANCE);T<l?(l=T,u=y):T===l&&(u=-1)}if(u>=0)return u%10;throw new $}}bt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],bt.MAX_AVG_VARIANCE=.38,bt.MAX_INDIVIDUAL_VARIANCE=.5,bt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],bt.START_PATTERN=Int32Array.from([1,1,1,1]),bt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Yt extends Gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let l=!1,u,g=0,y=Int32Array.from([0,0,0]);for(;!l;){y=Int32Array.from([0,0,0]),u=Yt.findGuardPattern(o,g,!1,this.START_END_PATTERN,y);let b=u[0];g=u[1];let T=b-(g-b);T>=0&&(l=o.isRange(T,b,!1))}return u}static checkChecksum(o){return Yt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let l=o.length;if(l===0)return!1;let u=parseInt(o.charAt(l-1),10);return Yt.getStandardUPCEANChecksum(o.substring(0,l-1))===u}static getStandardUPCEANChecksum(o){let l=o.length,u=0;for(let g=l-1;g>=0;g-=2){let y=o.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new M;u+=y}u*=3;for(let g=l-2;g>=0;g-=2){let y=o.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new M;u+=y}return(1e3-u)%10}static decodeEnd(o,l){return Yt.findGuardPattern(o,l,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,l,u,g){return this.findGuardPattern(o,l,u,g,new Int32Array(g.length))}static findGuardPattern(o,l,u,g,y){let b=o.getSize();l=u?o.getNextUnset(l):o.getNextSet(l);let T=0,I=l,P=g.length,U=u;for(let W=l;W<b;W++)if(o.get(W)!==U)y[T]++;else{if(T===P-1){if(Gt.patternMatchVariance(y,g,Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return Int32Array.from([I,W]);I+=y[0]+y[1];let Q=y.slice(2,y.length-1);for(let ie=0;ie<T-1;ie++)y[ie]=Q[ie];y[T-1]=0,y[T]=0,T--}else T++;y[T]=1,U=!U}throw new $}static decodeDigit(o,l,u,g){this.recordPattern(o,u,l);let y=this.MAX_AVG_VARIANCE,b=-1,T=g.length;for(let I=0;I<T;I++){let P=g[I],U=Gt.patternMatchVariance(l,P,Yt.MAX_INDIVIDUAL_VARIANCE);U<y&&(y=U,b=I)}if(b>=0)return b;throw new $}}Yt.MAX_AVG_VARIANCE=.48,Yt.MAX_INDIVIDUAL_VARIANCE=.7,Yt.START_END_PATTERN=Int32Array.from([1,1,1]),Yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fa{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,l,u){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(l,u,g),b=g.toString(),T=fa.parseExtensionString(b),I=[new ge((u[0]+u[1])/2,o),new ge(y,o)],P=new se(b,null,0,I,X.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&P.putAllMetadata(T),P}decodeMiddle(o,l,u){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=o.getSize(),b=l[1],T=0;for(let P=0;P<5&&b<y;P++){let U=Yt.decodeDigit(o,g,b,Yt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+U%10);for(let W of g)b+=W;U>=10&&(T|=1<<4-P),P!==4&&(b=o.getNextSet(b),b=o.getNextUnset(b))}if(u.length!==5)throw new $;let I=this.determineCheckDigit(T);if(fa.extensionChecksum(u.toString())!==I)throw new $;return b}static extensionChecksum(o){let l=o.length,u=0;for(let g=l-2;g>=0;g-=2)u+=o.charAt(g).charCodeAt(0)-48;u*=3;for(let g=l-1;g>=0;g-=2)u+=o.charAt(g).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(o){for(let l=0;l<10;l++)if(o===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new $}static parseExtensionString(o){if(o.length!==5)return null;let l=fa.parseExtension5String(o);return l==null?null:new Map([[ue.SUGGESTED_PRICE,l]])}static parseExtension5String(o){let l;switch(o.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(o.substring(1)),g=(u/100).toString(),y=u%100,b=y<10?"0"+y:y.toString();return l+g+"."+b}}class fl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,l,u){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(l,u,g),b=g.toString(),T=fl.parseExtensionString(b),I=[new ge((u[0]+u[1])/2,o),new ge(y,o)],P=new se(b,null,0,I,X.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&P.putAllMetadata(T),P}decodeMiddle(o,l,u){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=o.getSize(),b=l[1],T=0;for(let I=0;I<2&&b<y;I++){let P=Yt.decodeDigit(o,g,b,Yt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+P%10);for(let U of g)b+=U;P>=10&&(T|=1<<1-I),I!==1&&(b=o.getNextSet(b),b=o.getNextUnset(b))}if(u.length!==2)throw new $;if(parseInt(u.toString())%4!==T)throw new $;return b}static parseExtensionString(o){return o.length!==2?null:new Map([[ue.ISSUE_NUMBER,parseInt(o)]])}}class nu{static decodeRow(o,l,u){let g=Yt.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fa().decodeRow(o,l,g)}catch{return new fl().decodeRow(o,l,g)}}}nu.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends Yt{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let l=_t.L_PATTERNS[o-10],u=new Int32Array(l.length);for(let g=0;g<l.length;g++)u[g]=l[l.length-g-1];_t.L_AND_G_PATTERNS[o]=u}}decodeRow(o,l,u){let g=_t.findStartGuardPattern(l),y=u==null?null:u.get(D.NEED_RESULT_POINT_CALLBACK);if(y!=null){const Oe=new ge((g[0]+g[1])/2,o);y.foundPossibleResultPoint(Oe)}let b=this.decodeMiddle(l,g,this.decodeRowStringBuffer),T=b.rowOffset,I=b.resultString;if(y!=null){const Oe=new ge(T,o);y.foundPossibleResultPoint(Oe)}let P=this.decodeEnd(l,T);if(y!=null){const Oe=new ge((P[0]+P[1])/2,o);y.foundPossibleResultPoint(Oe)}let U=P[1],W=U+(U-P[0]);if(W>=l.getSize()||!l.isRange(U,W,!1))throw new $;let Q=I.toString();if(Q.length<8)throw new M;if(!_t.checkChecksum(Q))throw new x;let ie=(g[1]+g[0])/2,le=(P[1]+P[0])/2,ce=this.getBarcodeFormat(),pe=[new ge(ie,o),new ge(le,o)],xe=new se(Q,null,0,pe,ce,new Date().getTime()),Re=0;try{let Oe=nu.decodeRow(o,l,P[1]);xe.putMetadata(ue.UPC_EAN_EXTENSION,Oe.getText()),xe.putAllMetadata(Oe.getResultMetadata()),xe.addResultPoints(Oe.getResultPoints()),Re=Oe.getText().length}catch{}let je=u==null?null:u.get(D.ALLOWED_EAN_EXTENSIONS);if(je!=null){let Oe=!1;for(let vt in je)if(Re.toString()===vt){Oe=!0;break}if(!Oe)throw new $}return xe}decodeEnd(o,l){return _t.findGuardPattern(o,l,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return _t.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let l=o.length;if(l===0)return!1;let u=parseInt(o.charAt(l-1),10);return _t.getStandardUPCEANChecksum(o.substring(0,l-1))===u}static getStandardUPCEANChecksum(o){let l=o.length,u=0;for(let g=l-1;g>=0;g-=2){let y=o.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new M;u+=y}u*=3;for(let g=l-2;g>=0;g-=2){let y=o.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new M;u+=y}return(1e3-u)%10}}class Ii extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,l,u){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=o.getSize(),b=l[1],T=0;for(let P=0;P<6&&b<y;P++){let U=_t.decodeDigit(o,g,b,_t.L_AND_G_PATTERNS);u+=String.fromCharCode(48+U%10);for(let W of g)b+=W;U>=10&&(T|=1<<5-P)}u=Ii.determineFirstDigit(u,T),b=_t.findGuardPattern(o,b,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let P=0;P<6&&b<y;P++){let U=_t.decodeDigit(o,g,b,_t.L_PATTERNS);u+=String.fromCharCode(48+U);for(let W of g)b+=W}return{rowOffset:b,resultString:u}}getBarcodeFormat(){return X.EAN_13}static determineFirstDigit(o,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return o=String.fromCharCode(48+u)+o,o;throw new $}}Ii.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ri extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,l,u){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=o.getSize(),b=l[1];for(let I=0;I<4&&b<y;I++){let P=_t.decodeDigit(o,g,b,_t.L_PATTERNS);u+=String.fromCharCode(48+P);for(let U of g)b+=U}b=_t.findGuardPattern(o,b,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<4&&b<y;I++){let P=_t.decodeDigit(o,g,b,_t.L_PATTERNS);u+=String.fromCharCode(48+P);for(let U of g)b+=U}return{rowOffset:b,resultString:u}}getBarcodeFormat(){return X.EAN_8}}class af extends _t{constructor(){super(...arguments),this.ean13Reader=new Ii}getBarcodeFormat(){return X.UPC_A}decode(o,l){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,l,u))}decodeMiddle(o,l,u){return this.ean13Reader.decodeMiddle(o,l,u)}maybeReturnResult(o){let l=o.getText();if(l.charAt(0)==="0"){let u=new se(l.substring(1),null,null,o.getResultPoints(),X.UPC_A);return o.getResultMetadata()!=null&&u.putAllMetadata(o.getResultMetadata()),u}else throw new $}reset(){this.ean13Reader.reset()}}class Qe extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,l,u){const g=this.decodeMiddleCounters.map(P=>P);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const y=o.getSize();let b=l[1],T=0;for(let P=0;P<6&&b<y;P++){const U=Qe.decodeDigit(o,g,b,Qe.L_AND_G_PATTERNS);u+=String.fromCharCode(48+U%10);for(let W of g)b+=W;U>=10&&(T|=1<<5-P)}let I=Qe.determineNumSysAndCheckDigit(u,T);return{rowOffset:b,resultString:I}}decodeEnd(o,l){return Qe.findGuardPatternWithoutCounters(o,l,!0,Qe.MIDDLE_END_PATTERN)}checkChecksum(o){return _t.checkChecksum(Qe.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,l){for(let u=0;u<=1;u++)for(let g=0;g<10;g++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][g]){let y=String.fromCharCode(48+u),b=String.fromCharCode(48+g);return y+o+b}throw $.getNotFoundInstance()}getBarcodeFormat(){return X.UPC_E}static convertUPCEtoUPCA(o){const l=o.slice(1,7).split("").map(y=>y.charCodeAt(0)),u=new H;u.append(o.charAt(0));let g=l[5];switch(g){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(g),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(g);break}return o.length>=8&&u.append(o.charAt(7)),u.toString()}}Qe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ct extends Gt{constructor(o){super();let l=o==null?null:o.get(D.POSSIBLE_FORMATS),u=[];n(l)?(u.push(new Ii),u.push(new af),u.push(new Ri),u.push(new Qe)):(l.indexOf(X.EAN_13)>-1&&u.push(new Ii),l.indexOf(X.UPC_A)>-1&&u.push(new af),l.indexOf(X.EAN_8)>-1&&u.push(new Ri),l.indexOf(X.UPC_E)>-1&&u.push(new Qe)),this.readers=u}decodeRow(o,l,u){for(let g of this.readers)try{const y=g.decodeRow(o,l,u),b=y.getBarcodeFormat()===X.EAN_13&&y.getText().charAt(0)==="0",T=u==null?null:u.get(D.POSSIBLE_FORMATS),I=T==null||T.includes(X.UPC_A);if(b&&I){const P=y.getRawBytes(),U=new se(y.getText().substring(1),P,P?P.length:null,y.getResultPoints(),X.UPC_A);return U.putAllMetadata(y.getResultMetadata()),U}return y}catch{}throw new $}reset(){for(let o of this.readers)o.reset()}}class at extends Gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,l){for(let u=0;u<l.length;u++)if(Gt.patternMatchVariance(o,l[u],at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return u;throw new $}static count(o){return de.sum(new Int32Array(o))}static increment(o,l){let u=0,g=l[0];for(let y=1;y<o.length;y++)l[y]>g&&(g=l[y],u=y);o[u]++}static decrement(o,l){let u=0,g=l[0];for(let y=1;y<o.length;y++)l[y]<g&&(g=l[y],u=y);o[u]--}static isFinderPattern(o){let l=o[0]+o[1],u=l+o[2]+o[3],g=l/u;if(g>=at.MIN_FINDER_PATTERN_RATIO&&g<=at.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let T of o)T>b&&(b=T),T<y&&(y=T);return b<10*y}return!1}}at.MAX_AVG_VARIANCE=.2,at.MAX_INDIVIDUAL_VARIANCE=.45,at.MIN_FINDER_PATTERN_RATIO=9.5/12,at.MAX_FINDER_PATTERN_RATIO=12.5/14;class Br{constructor(o,l){this.value=o,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Br))return!1;const l=o;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class en{constructor(o,l,u,g,y){this.value=o,this.startEnd=l,this.value=o,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new ge(u,y)),this.resultPoints.push(new ge(g,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof en))return!1;const l=o;return this.value===l.value}hashCode(){return this.value}}class Ir{constructor(){}static getRSSvalue(o,l,u){let g=0;for(let I of o)g+=I;let y=0,b=0,T=o.length;for(let I=0;I<T-1;I++){let P;for(P=1,b|=1<<I;P<o[I];P++,b&=~(1<<I)){let U=Ir.combins(g-P-1,T-I-2);if(u&&b===0&&g-P-(T-I-1)>=T-I-1&&(U-=Ir.combins(g-P-(T-I),T-I-2)),T-I-1>1){let W=0;for(let Q=g-P-(T-I-2);Q>l;Q--)W+=Ir.combins(g-P-Q-1,T-I-3);U-=W*(T-1-I)}else g-P>l&&U--;y+=U}g-=P}return y}static combins(o,l){let u,g;o-l>l?(g=l,u=o-l):(g=o-l,u=l);let y=1,b=1;for(let T=o;T>u;T--)y*=T,b<=g&&(y/=b,b++);for(;b<=g;)y/=b,b++;return y}}class ks{static buildBitArray(o){let l=o.length*2-1;o[o.length-1].getRightChar()==null&&(l-=1);let u=12*l,g=new S(u),y=0,T=o[0].getRightChar().getValue();for(let I=11;I>=0;--I)T&1<<I&&g.set(y),y++;for(let I=1;I<o.length;++I){let P=o[I],U=P.getLeftChar().getValue();for(let W=11;W>=0;--W)U&1<<W&&g.set(y),y++;if(P.getRightChar()!=null){let W=P.getRightChar().getValue();for(let Q=11;Q>=0;--Q)W&1<<Q&&g.set(y),y++}}return g}}class Rr{constructor(o,l){l?this.decodedInformation=null:(this.finished=o,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ci{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Cn extends ci{constructor(o,l){super(o),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Cn.FNC1}}Cn.FNC1="$";class ha extends ci{constructor(o,l,u){super(o),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ui extends ci{constructor(o,l,u){if(super(o),l<0||l>10||u<0||u>10)throw new M;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ui.FNC1}isSecondDigitFNC1(){return this.secondDigit===ui.FNC1}isAnyFNC1(){return this.firstDigit===ui.FNC1||this.secondDigit===ui.FNC1}}ui.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new $;let l=o.substring(0,2);for(let y of Ue.TWO_DIGIT_DATA_LENGTH)if(y[0]===l)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,y[2],o):Ue.processFixedAI(2,y[1],o);if(o.length<3)throw new $;let u=o.substring(0,3);for(let y of Ue.THREE_DIGIT_DATA_LENGTH)if(y[0]===u)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,y[2],o):Ue.processFixedAI(3,y[1],o);for(let y of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===u)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,y[2],o):Ue.processFixedAI(4,y[1],o);if(o.length<4)throw new $;let g=o.substring(0,4);for(let y of Ue.FOUR_DIGIT_DATA_LENGTH)if(y[0]===g)return y[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,y[2],o):Ue.processFixedAI(4,y[1],o);throw new $}static processFixedAI(o,l,u){if(u.length<o)throw new $;let g=u.substring(0,o);if(u.length<o+l)throw new $;let y=u.substring(o,o+l),b=u.substring(o+l),T="("+g+")"+y,I=Ue.parseFieldsInGeneralPurpose(b);return I==null?T:T+I}static processVariableAI(o,l,u){let g=u.substring(0,o),y;u.length<o+l?y=u.length:y=o+l;let b=u.substring(o,y),T=u.substring(y),I="("+g+")"+b,P=Ue.parseFieldsInGeneralPurpose(T);return P==null?I:I+P}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class hl{constructor(o){this.buffer=new H,this.information=o}decodeAllCodes(o,l){let u=l,g=null;do{let y=this.decodeGeneralPurposeField(u,g),b=Ue.parseFieldsInGeneralPurpose(y.getNewString());if(b!=null&&o.append(b),y.isRemaining()?g=""+y.getRemainingValue():g=null,u===y.getNewPosition())break;u=y.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let l=o;l<o+3;++l)if(this.information.get(l))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(o,4);return y===0?new ui(this.information.getSize(),ui.FNC1,ui.FNC1):new ui(this.information.getSize(),y-1,ui.FNC1)}let l=this.extractNumericValueFromBitArray(o,7),u=(l-8)/11,g=(l-8)%11;return new ui(o+7,u,g)}extractNumericValueFromBitArray(o,l){return hl.extractNumericValueFromBitArray(this.information,o,l)}static extractNumericValueFromBitArray(o,l,u){let g=0;for(let y=0;y<u;++y)o.get(l+y)&&(g|=1<<u-y-1);return g}decodeGeneralPurposeField(o,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(o);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new ha(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new ha(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),o=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),o=l.isFinished()):(l=this.parseNumericBlock(),o=l.isFinished()),!(u!==this.current.getPosition())&&!o)break}while(!o);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let l;return o.isSecondDigitFNC1()?l=new ha(this.current.getPosition(),this.buffer.toString()):l=new ha(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Rr(!0,l)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let l=new ha(this.current.getPosition(),this.buffer.toString());return new Rr(!0,l)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Rr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let l=new ha(this.current.getPosition(),this.buffer.toString());return new Rr(!0,l)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Rr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let l=new ha(this.current.getPosition(),this.buffer.toString());return new Rr(!0,l)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Rr(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,5);if(l>=5&&l<16)return!0;if(o+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,7);if(u>=64&&u<116)return!0;if(o+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(o,8);return g>=232&&g<253}decodeIsoIec646(o){let l=this.extractNumericValueFromBitArray(o,5);if(l===15)return new Cn(o+5,Cn.FNC1);if(l>=5&&l<15)return new Cn(o+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(o,7);if(u>=64&&u<90)return new Cn(o+7,""+(u+1));if(u>=90&&u<116)return new Cn(o+7,""+(u+7));let g=this.extractNumericValueFromBitArray(o,8),y;switch(g){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new M}return new Cn(o+8,y)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,5);if(l>=5&&l<16)return!0;if(o+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(o,6);return u>=16&&u<63}decodeAlphanumeric(o){let l=this.extractNumericValueFromBitArray(o,5);if(l===15)return new Cn(o+5,Cn.FNC1);if(l>=5&&l<15)return new Cn(o+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(o,6);if(u>=32&&u<58)return new Cn(o+6,""+(u+33));let g;switch(u){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new Ge("Decoding invalid alphanumeric value: "+u)}return new Cn(o+6,g)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let l=0;l<5&&l+o<this.information.getSize();++l)if(l===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+l))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let l=o;l<o+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let l=0;l<4&&l+o<this.information.getSize();++l)if(this.information.get(o+l))return!1;return!0}}class Lp{constructor(o){this.information=o,this.generalDecoder=new hl(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class An extends Lp{constructor(o){super(o)}encodeCompressedGtin(o,l){o.append("(01)");let u=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,l,u)}encodeCompressedGtinWithoutAI(o,l,u){for(let g=0;g<4;++g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*g,10);y/100===0&&o.append("0"),y/10===0&&o.append("0"),o.append(y)}An.appendCheckDigit(o,u)}static appendCheckDigit(o,l){let u=0;for(let g=0;g<13;g++){let y=o.charAt(g+l).charCodeAt(0)-48;u+=g&1?y:3*y}u=10-u%10,u===10&&(u=0),o.append(u)}}An.GTIN_SIZE=40;class pl extends An{constructor(o){super(o)}parseInformation(){let o=new H;o.append("(01)");let l=o.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(pl.HEADER_SIZE,4);return o.append(u),this.encodeCompressedGtinWithoutAI(o,pl.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(o,pl.HEADER_SIZE+44)}}pl.HEADER_SIZE=4;class lf extends Lp{constructor(o){super(o)}parseInformation(){let o=new H;return this.getGeneralDecoder().decodeAllCodes(o,lf.HEADER_SIZE)}}lf.HEADER_SIZE=5;class cf extends An{constructor(o){super(o)}encodeCompressedWeight(o,l,u){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(o,g);let y=this.checkWeight(g),b=1e5;for(let T=0;T<5;++T)y/b===0&&o.append("0"),b/=10;o.append(y)}}class ns extends cf{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=ns.HEADER_SIZE+cf.GTIN_SIZE+ns.WEIGHT_SIZE)throw new $;let o=new H;return this.encodeCompressedGtin(o,ns.HEADER_SIZE),this.encodeCompressedWeight(o,ns.HEADER_SIZE+cf.GTIN_SIZE,ns.WEIGHT_SIZE),o.toString()}}ns.HEADER_SIZE=5,ns.WEIGHT_SIZE=15;class NR extends ns{constructor(o){super(o)}addWeightCode(o,l){o.append("(3103)")}checkWeight(o){return o}}class TR extends ns{constructor(o){super(o)}addWeightCode(o,l){l<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class is extends An{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<is.HEADER_SIZE+An.GTIN_SIZE)throw new $;let o=new H;this.encodeCompressedGtin(o,is.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(is.HEADER_SIZE+An.GTIN_SIZE,is.LAST_DIGIT_SIZE);o.append("(392"),o.append(l),o.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(is.HEADER_SIZE+An.GTIN_SIZE+is.LAST_DIGIT_SIZE,null);return o.append(u.getNewString()),o.toString()}}is.HEADER_SIZE=8,is.LAST_DIGIT_SIZE=2;class hn extends An{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+An.GTIN_SIZE)throw new $;let o=new H;this.encodeCompressedGtin(o,hn.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+An.GTIN_SIZE,hn.LAST_DIGIT_SIZE);o.append("(393"),o.append(l),o.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+An.GTIN_SIZE+hn.LAST_DIGIT_SIZE,hn.FIRST_THREE_DIGITS_SIZE);u/100==0&&o.append("0"),u/10==0&&o.append("0"),o.append(u);let g=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+An.GTIN_SIZE+hn.LAST_DIGIT_SIZE+hn.FIRST_THREE_DIGITS_SIZE,null);return o.append(g.getNewString()),o.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2,hn.FIRST_THREE_DIGITS_SIZE=10;class Kt extends cf{constructor(o,l,u){super(o),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=Kt.HEADER_SIZE+Kt.GTIN_SIZE+Kt.WEIGHT_SIZE+Kt.DATE_SIZE)throw new $;let o=new H;return this.encodeCompressedGtin(o,Kt.HEADER_SIZE),this.encodeCompressedWeight(o,Kt.HEADER_SIZE+Kt.GTIN_SIZE,Kt.WEIGHT_SIZE),this.encodeCompressedDate(o,Kt.HEADER_SIZE+Kt.GTIN_SIZE+Kt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,Kt.DATE_SIZE);if(u==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let g=u%32;u/=32;let y=u%12+1;u/=12;let b=u;b/10==0&&o.append("0"),o.append(b),y/10==0&&o.append("0"),o.append(y),g/10==0&&o.append("0"),o.append(g)}addWeightCode(o,l){o.append("("),o.append(this.firstAIdigits),o.append(l/1e5),o.append(")")}checkWeight(o){return o%1e5}}Kt.HEADER_SIZE=8,Kt.WEIGHT_SIZE=20,Kt.DATE_SIZE=16;function qx(q){try{if(q.get(1))return new pl(q);if(!q.get(2))return new lf(q);switch(hl.extractNumericValueFromBitArray(q,1,4)){case 4:return new NR(q);case 5:return new TR(q)}switch(hl.extractNumericValueFromBitArray(q,1,5)){case 12:return new is(q);case 13:return new hn(q)}switch(hl.extractNumericValueFromBitArray(q,1,7)){case 56:return new Kt(q,"310","11");case 57:return new Kt(q,"320","11");case 58:return new Kt(q,"310","13");case 59:return new Kt(q,"320","13");case 60:return new Kt(q,"310","15");case 61:return new Kt(q,"320","15");case 62:return new Kt(q,"310","17");case 63:return new Kt(q,"320","17")}}catch(o){throw console.log(o),new Ge("unknown decoder: "+q)}}class oo{constructor(o,l,u,g){this.leftchar=o,this.rightchar=l,this.finderpattern=u,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,l){return o instanceof oo?oo.equalsOrNull(o.leftchar,l.leftchar)&&oo.equalsOrNull(o.rightchar,l.rightchar)&&oo.equalsOrNull(o.finderpattern,l.finderpattern):!1}static equalsOrNull(o,l){return o===null?l===null:oo.equals(o,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Bp{constructor(o,l,u){this.pairs=o,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,l){return o instanceof Bp?this.checkEqualitity(o,l)&&o.wasReversed===l.wasReversed:!1}checkEqualitity(o,l){if(!o||!l)return;let u;return o.forEach((g,y)=>{l.forEach(b=>{g.getLeftChar().getValue()===b.getLeftChar().getValue()&&g.getRightChar().getValue()===b.getRightChar().getValue()&&g.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(u=!0)})}),u}}class Ae extends at{constructor(o){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,l,u){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(o,l))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(o,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,o))}catch(y){if(y instanceof $){if(!this.pairs.length)throw new $;u=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(o,!1),g){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new $}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return o&&(this.rows=this.rows.reverse()),l}checkRows(o,l){for(let u=l;u<this.rows.length;u++){let g=this.rows[u];this.pairs.length=0;for(let b of o)this.pairs.push(b.getPairs());if(this.pairs.push(g.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(o);y.push(g);try{return this.checkRows(y,u+1)}catch(b){this.verbose&&console.log(b)}}throw new $}static isValidSequence(o){for(let l of Ae.FINDER_PATTERN_SEQUENCES){if(o.length>l.length)continue;let u=!0;for(let g=0;g<o.length;g++)if(o[g].getFinderPattern().getValue()!=l[g]){u=!1;break}if(u)return!0}return!1}storeRow(o,l){let u=0,g=!1,y=!1;for(;u<this.rows.length;){let b=this.rows[u];if(b.getRowNumber()>o){y=b.isEquivalent(this.pairs);break}g=b.isEquivalent(this.pairs),u++}y||g||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Bp(this.pairs,o,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,l){for(let u of l)if(u.getPairs().length!==o.length){for(let g of u.getPairs())for(let y of o)if(oo.equals(g,y))break}}static isPartialRow(o,l){for(let u of l){let g=!0;for(let y of o){let b=!1;for(let T of u.getPairs())if(y.equals(T)){b=!0;break}if(!b){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(o){let l=ks.buildBitArray(o),g=qx(l).parseInformation(),y=o[0].getFinderPattern().getResultPoints(),b=o[o.length-1].getFinderPattern().getResultPoints(),T=[y[0],y[1],b[0],b[1]];return new se(g,null,null,T,X.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),l=o.getLeftChar(),u=o.getRightChar();if(u==null)return!1;let g=u.getChecksumPortion(),y=2;for(let T=1;T<this.pairs.size();++T){let I=this.pairs.get(T);g+=I.getLeftChar().getChecksumPortion(),y++;let P=I.getRightChar();P!=null&&(g+=P.getChecksumPortion(),y++)}return g%=211,211*(y-4)+g==l.getValue()}static getNextSecondBar(o,l){let u;return o.get(l)?(u=o.getNextUnset(l),u=o.getNextSet(u)):(u=o.getNextSet(l),u=o.getNextUnset(u)),u}retrieveNextPair(o,l,u){let g=l.length%2==0;this.startFromEven&&(g=!g);let y,b=!0,T=-1;do this.findNextPair(o,l,T),y=this.parseFoundFinderPattern(o,u,g),y==null?T=Ae.getNextSecondBar(o,this.startEnd[0]):b=!1;while(b);let I=this.decodeDataCharacter(o,y,g,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new $;let P;try{P=this.decodeDataCharacter(o,y,g,!1)}catch(U){P=null,this.verbose&&console.log(U)}return new oo(I,P,y,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,l,u){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=o.getSize(),b;u>=0?b=u:this.isEmptyPair(l)?b=0:b=l[l.length-1].getFinderPattern().getStartEnd()[1];let T=l.length%2!=0;this.startFromEven&&(T=!T);let I=!1;for(;b<y&&(I=!o.get(b),!!I);)b++;let P=0,U=b;for(let W=b;W<y;W++)if(o.get(W)!=I)g[P]++;else{if(P==3){if(T&&Ae.reverseCounters(g),Ae.isFinderPattern(g)){this.startEnd[0]=U,this.startEnd[1]=W;return}T&&Ae.reverseCounters(g),U+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,P--}else P++;g[P]=1,I=!I}throw new $}static reverseCounters(o){let l=o.length;for(let u=0;u<l/2;++u){let g=o[u];o[u]=o[l-u-1],o[l-u-1]=g}}parseFoundFinderPattern(o,l,u){let g,y,b;if(u){let P=this.startEnd[0]-1;for(;P>=0&&!o.get(P);)P--;P++,g=this.startEnd[0]-P,y=P,b=this.startEnd[1]}else y=this.startEnd[0],b=o.getNextUnset(this.startEnd[1]+1),g=b-this.startEnd[1];let T=this.getDecodeFinderCounters();w.arraycopy(T,0,T,1,T.length-1),T[0]=g;let I;try{I=this.parseFinderValue(T,Ae.FINDER_PATTERNS)}catch{return null}return new en(I,[y,b],y,b,l)}decodeDataCharacter(o,l,u,g){let y=this.getDataCharacterCounters();for(let Pt=0;Pt<y.length;Pt++)y[Pt]=0;if(g)Ae.recordPatternInReverse(o,l.getStartEnd()[0],y);else{Ae.recordPattern(o,l.getStartEnd()[1],y);for(let Pt=0,Kr=y.length-1;Pt<Kr;Pt++,Kr--){let zn=y[Pt];y[Pt]=y[Kr],y[Kr]=zn}}let b=17,T=de.sum(new Int32Array(y))/b,I=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(T-I)/I>.3)throw new $;let P=this.getOddCounts(),U=this.getEvenCounts(),W=this.getOddRoundingErrors(),Q=this.getEvenRoundingErrors();for(let Pt=0;Pt<y.length;Pt++){let Kr=1*y[Pt]/T,zn=Kr+.5;if(zn<1){if(Kr<.3)throw new $;zn=1}else if(zn>8){if(Kr>8.7)throw new $;zn=8}let xl=Pt/2;Pt&1?(U[xl]=zn,Q[xl]=Kr-zn):(P[xl]=zn,W[xl]=Kr-zn)}this.adjustOddEvenCounts(b);let ie=4*l.getValue()+(u?0:2)+(g?0:1)-1,le=0,ce=0;for(let Pt=P.length-1;Pt>=0;Pt--){if(Ae.isNotA1left(l,u,g)){let Kr=Ae.WEIGHTS[ie][2*Pt];ce+=P[Pt]*Kr}le+=P[Pt]}let pe=0;for(let Pt=U.length-1;Pt>=0;Pt--)if(Ae.isNotA1left(l,u,g)){let Kr=Ae.WEIGHTS[ie][2*Pt+1];pe+=U[Pt]*Kr}let xe=ce+pe;if(le&1||le>13||le<4)throw new $;let Re=(13-le)/2,je=Ae.SYMBOL_WIDEST[Re],Oe=9-je,vt=Ir.getRSSvalue(P,je,!0),st=Ir.getRSSvalue(U,Oe,!1),Tn=Ae.EVEN_TOTAL_SUBSET[Re],ki=Ae.GSUM[Re],On=vt*Tn+st+ki;return new Br(On,xe)}static isNotA1left(o,l,u){return!(o.getValue()==0&&l&&u)}adjustOddEvenCounts(o){let l=de.sum(new Int32Array(this.getOddCounts())),u=de.sum(new Int32Array(this.getEvenCounts())),g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let b=!1,T=!1;u>13?T=!0:u<4&&(b=!0);let I=l+u-o,P=(l&1)==1,U=(u&1)==0;if(I==1)if(P){if(U)throw new $;y=!0}else{if(!U)throw new $;T=!0}else if(I==-1)if(P){if(U)throw new $;g=!0}else{if(!U)throw new $;b=!0}else if(I==0){if(P){if(!U)throw new $;l<u?(g=!0,T=!0):(y=!0,b=!0)}else if(U)throw new $}else throw new $;if(g){if(y)throw new $;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(T)throw new $;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class OR extends Br{constructor(o,l,u){super(o,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class lr extends at{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,l,u){const g=this.decodePair(l,!1,o,u);lr.addOrTally(this.possibleLeftPairs,g),l.reverse();let y=this.decodePair(l,!0,o,u);lr.addOrTally(this.possibleRightPairs,y),l.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let T of this.possibleRightPairs)if(T.getCount()>1&&lr.checkChecksum(b,T))return lr.constructResult(b,T)}throw new $}static addOrTally(o,l){if(l==null)return;let u=!1;for(let g of o)if(g.getValue()===l.getValue()){g.incrementCount(),u=!0;break}u||o.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,l){let u=4537077*o.getValue()+l.getValue(),g=new String(u).toString(),y=new H;for(let P=13-g.length;P>0;P--)y.append("0");y.append(g);let b=0;for(let P=0;P<13;P++){let U=y.charAt(P).charCodeAt(0)-48;b+=P&1?U:3*U}b=10-b%10,b===10&&(b=0),y.append(b.toString());let T=o.getFinderPattern().getResultPoints(),I=l.getFinderPattern().getResultPoints();return new se(y.toString(),null,0,[T[0],T[1],I[0],I[1]],X.RSS_14,new Date().getTime())}static checkChecksum(o,l){let u=(o.getChecksumPortion()+16*l.getChecksumPortion())%79,g=9*o.getFinderPattern().getValue()+l.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,u===g}decodePair(o,l,u,g){try{let y=this.findFinderPattern(o,l),b=this.parseFoundFinderPattern(o,u,l,y),T=g==null?null:g.get(D.NEED_RESULT_POINT_CALLBACK);if(T!=null){let U=(y[0]+y[1])/2;l&&(U=o.getSize()-1-U),T.foundPossibleResultPoint(new ge(U,u))}let I=this.decodeDataCharacter(o,b,!0),P=this.decodeDataCharacter(o,b,!1);return new OR(1597*I.getValue()+P.getValue(),I.getChecksumPortion()+4*P.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(o,l,u){let g=this.getDataCharacterCounters();for(let pe=0;pe<g.length;pe++)g[pe]=0;if(u)Gt.recordPatternInReverse(o,l.getStartEnd()[0],g);else{Gt.recordPattern(o,l.getStartEnd()[1]+1,g);for(let pe=0,xe=g.length-1;pe<xe;pe++,xe--){let Re=g[pe];g[pe]=g[xe],g[xe]=Re}}let y=u?16:15,b=de.sum(new Int32Array(g))/y,T=this.getOddCounts(),I=this.getEvenCounts(),P=this.getOddRoundingErrors(),U=this.getEvenRoundingErrors();for(let pe=0;pe<g.length;pe++){let xe=g[pe]/b,Re=Math.floor(xe+.5);Re<1?Re=1:Re>8&&(Re=8);let je=Math.floor(pe/2);pe&1?(I[je]=Re,U[je]=xe-Re):(T[je]=Re,P[je]=xe-Re)}this.adjustOddEvenCounts(u,y);let W=0,Q=0;for(let pe=T.length-1;pe>=0;pe--)Q*=9,Q+=T[pe],W+=T[pe];let ie=0,le=0;for(let pe=I.length-1;pe>=0;pe--)ie*=9,ie+=I[pe],le+=I[pe];let ce=Q+3*ie;if(u){if(W&1||W>12||W<4)throw new $;let pe=(12-W)/2,xe=lr.OUTSIDE_ODD_WIDEST[pe],Re=9-xe,je=Ir.getRSSvalue(T,xe,!1),Oe=Ir.getRSSvalue(I,Re,!0),vt=lr.OUTSIDE_EVEN_TOTAL_SUBSET[pe],st=lr.OUTSIDE_GSUM[pe];return new Br(je*vt+Oe+st,ce)}else{if(le&1||le>10||le<4)throw new $;let pe=(10-le)/2,xe=lr.INSIDE_ODD_WIDEST[pe],Re=9-xe,je=Ir.getRSSvalue(T,xe,!0),Oe=Ir.getRSSvalue(I,Re,!1),vt=lr.INSIDE_ODD_TOTAL_SUBSET[pe],st=lr.INSIDE_GSUM[pe];return new Br(Oe*vt+je+st,ce)}}findFinderPattern(o,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let g=o.getSize(),y=!1,b=0;for(;b<g&&(y=!o.get(b),l!==y);)b++;let T=0,I=b;for(let P=b;P<g;P++)if(o.get(P)!==y)u[T]++;else{if(T===3){if(at.isFinderPattern(u))return[I,P];I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,T--}else T++;u[T]=1,y=!y}throw new $}parseFoundFinderPattern(o,l,u,g){let y=o.get(g[0]),b=g[0]-1;for(;b>=0&&y!==o.get(b);)b--;b++;const T=g[0]-b,I=this.getDecodeFinderCounters(),P=new Int32Array(I.length);w.arraycopy(I,0,P,1,I.length-1),P[0]=T;const U=this.parseFinderValue(P,lr.FINDER_PATTERNS);let W=b,Q=g[1];return u&&(W=o.getSize()-1-W,Q=o.getSize()-1-Q),new en(U,[b,g[1]],W,Q,l)}adjustOddEvenCounts(o,l){let u=de.sum(new Int32Array(this.getOddCounts())),g=de.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1,T=!1,I=!1;o?(u>12?b=!0:u<4&&(y=!0),g>12?I=!0:g<4&&(T=!0)):(u>11?b=!0:u<5&&(y=!0),g>10?I=!0:g<4&&(T=!0));let P=u+g-l,U=(u&1)===(o?1:0),W=(g&1)===1;if(P===1)if(U){if(W)throw new $;b=!0}else{if(!W)throw new $;I=!0}else if(P===-1)if(U){if(W)throw new $;y=!0}else{if(!W)throw new $;T=!0}else if(P===0){if(U){if(!W)throw new $;u<g?(y=!0,I=!0):(b=!0,T=!0)}else if(W)throw new $}else throw new $;if(y){if(b)throw new $;at.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&at.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(I)throw new $;at.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&at.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}lr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],lr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],lr.OUTSIDE_GSUM=[0,161,961,2015,2715],lr.INSIDE_GSUM=[0,336,1036,1516],lr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],lr.INSIDE_ODD_WIDEST=[2,4,6,8],lr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ml extends Gt{constructor(o,l){super(),this.readers=[],this.verbose=l===!0;const u=o?o.get(D.POSSIBLE_FORMATS):null,g=o&&o.get(D.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(X.EAN_13)||u.includes(X.UPC_A)||u.includes(X.EAN_8)||u.includes(X.UPC_E))&&this.readers.push(new Ct(o)),u.includes(X.CODE_39)&&this.readers.push(new ar(g)),u.includes(X.CODE_128)&&this.readers.push(new Me),u.includes(X.ITF)&&this.readers.push(new bt),u.includes(X.RSS_14)&&this.readers.push(new lr),u.includes(X.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new Ct(o)),this.readers.push(new ar),this.readers.push(new Ct(o)),this.readers.push(new Me),this.readers.push(new bt),this.readers.push(new lr),this.readers.push(new Ae(this.verbose)))}decodeRow(o,l,u){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(o,l,u)}catch{}throw new $}reset(){this.readers.forEach(o=>o.reset())}}class IR extends Z{constructor(o=500,l){super(new ml(l),o,l)}}class Tt{constructor(o,l,u){this.ecCodewords=o,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(o,l){this.count=o,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(o,l,u,g,y,b){this.versionNumber=o,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=y,this.ecBlocks=b;let T=0;const I=b.getECCodewords(),P=b.getECBlocks();for(let U of P)T+=U.getCount()*(U.getDataCodewords()+I);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,l){if(o&1||l&1)throw new M;for(let u of yt.VERSIONS)if(u.symbolSizeRows===o&&u.symbolSizeColumns===l)return u;throw new M}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new Tt(5,new Nt(1,3))),new yt(2,12,12,10,10,new Tt(7,new Nt(1,5))),new yt(3,14,14,12,12,new Tt(10,new Nt(1,8))),new yt(4,16,16,14,14,new Tt(12,new Nt(1,12))),new yt(5,18,18,16,16,new Tt(14,new Nt(1,18))),new yt(6,20,20,18,18,new Tt(18,new Nt(1,22))),new yt(7,22,22,20,20,new Tt(20,new Nt(1,30))),new yt(8,24,24,22,22,new Tt(24,new Nt(1,36))),new yt(9,26,26,24,24,new Tt(28,new Nt(1,44))),new yt(10,32,32,14,14,new Tt(36,new Nt(1,62))),new yt(11,36,36,16,16,new Tt(42,new Nt(1,86))),new yt(12,40,40,18,18,new Tt(48,new Nt(1,114))),new yt(13,44,44,20,20,new Tt(56,new Nt(1,144))),new yt(14,48,48,22,22,new Tt(68,new Nt(1,174))),new yt(15,52,52,24,24,new Tt(42,new Nt(2,102))),new yt(16,64,64,14,14,new Tt(56,new Nt(2,140))),new yt(17,72,72,16,16,new Tt(36,new Nt(4,92))),new yt(18,80,80,18,18,new Tt(48,new Nt(4,114))),new yt(19,88,88,20,20,new Tt(56,new Nt(4,144))),new yt(20,96,96,22,22,new Tt(68,new Nt(4,174))),new yt(21,104,104,24,24,new Tt(56,new Nt(6,136))),new yt(22,120,120,18,18,new Tt(68,new Nt(6,175))),new yt(23,132,132,20,20,new Tt(62,new Nt(8,163))),new yt(24,144,144,22,22,new Tt(62,new Nt(8,156),new Nt(2,155))),new yt(25,8,18,6,16,new Tt(7,new Nt(1,5))),new yt(26,8,32,6,14,new Tt(11,new Nt(1,10))),new yt(27,12,26,10,24,new Tt(14,new Nt(1,16))),new yt(28,12,36,10,16,new Tt(18,new Nt(1,22))),new yt(29,16,36,14,16,new Tt(24,new Nt(1,32))),new yt(30,16,48,14,22,new Tt(28,new Nt(1,49)))]}}yt.VERSIONS=yt.buildVersions();class Fp{constructor(o){const l=o.getHeight();if(l<8||l>144||l&1)throw new M;this.version=Fp.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const l=o.getHeight(),u=o.getWidth();return yt.getVersionForDimensions(l,u)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,g=0;const y=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let T=!1,I=!1,P=!1,U=!1;do if(u===y&&g===0&&!T)o[l++]=this.readCorner1(y,b)&255,u-=2,g+=2,T=!0;else if(u===y-2&&g===0&&b&3&&!I)o[l++]=this.readCorner2(y,b)&255,u-=2,g+=2,I=!0;else if(u===y+4&&g===2&&!(b&7)&&!P)o[l++]=this.readCorner3(y,b)&255,u-=2,g+=2,P=!0;else if(u===y-2&&g===0&&(b&7)===4&&!U)o[l++]=this.readCorner4(y,b)&255,u-=2,g+=2,U=!0;else{do u<y&&g>=0&&!this.readMappingMatrix.get(g,u)&&(o[l++]=this.readUtah(u,g,y,b)&255),u-=2,g+=2;while(u>=0&&g<b);u+=1,g+=3;do u>=0&&g<b&&!this.readMappingMatrix.get(g,u)&&(o[l++]=this.readUtah(u,g,y,b)&255),u+=2,g-=2;while(u<y&&g>=0);u+=3,g+=1}while(u<y||g<b);if(l!==this.version.getTotalCodewords())throw new M;return o}readModule(o,l,u,g){return o<0&&(o+=u,l+=4-(u+4&7)),l<0&&(l+=g,o+=4-(g+4&7)),this.readMappingMatrix.set(l,o),this.mappingBitMatrix.get(l,o)}readUtah(o,l,u,g){let y=0;return this.readModule(o-2,l-2,u,g)&&(y|=1),y<<=1,this.readModule(o-2,l-1,u,g)&&(y|=1),y<<=1,this.readModule(o-1,l-2,u,g)&&(y|=1),y<<=1,this.readModule(o-1,l-1,u,g)&&(y|=1),y<<=1,this.readModule(o-1,l,u,g)&&(y|=1),y<<=1,this.readModule(o,l-2,u,g)&&(y|=1),y<<=1,this.readModule(o,l-1,u,g)&&(y|=1),y<<=1,this.readModule(o,l,u,g)&&(y|=1),y}readCorner1(o,l){let u=0;return this.readModule(o-1,0,o,l)&&(u|=1),u<<=1,this.readModule(o-1,1,o,l)&&(u|=1),u<<=1,this.readModule(o-1,2,o,l)&&(u|=1),u<<=1,this.readModule(0,l-2,o,l)&&(u|=1),u<<=1,this.readModule(0,l-1,o,l)&&(u|=1),u<<=1,this.readModule(1,l-1,o,l)&&(u|=1),u<<=1,this.readModule(2,l-1,o,l)&&(u|=1),u<<=1,this.readModule(3,l-1,o,l)&&(u|=1),u}readCorner2(o,l){let u=0;return this.readModule(o-3,0,o,l)&&(u|=1),u<<=1,this.readModule(o-2,0,o,l)&&(u|=1),u<<=1,this.readModule(o-1,0,o,l)&&(u|=1),u<<=1,this.readModule(0,l-4,o,l)&&(u|=1),u<<=1,this.readModule(0,l-3,o,l)&&(u|=1),u<<=1,this.readModule(0,l-2,o,l)&&(u|=1),u<<=1,this.readModule(0,l-1,o,l)&&(u|=1),u<<=1,this.readModule(1,l-1,o,l)&&(u|=1),u}readCorner3(o,l){let u=0;return this.readModule(o-1,0,o,l)&&(u|=1),u<<=1,this.readModule(o-1,l-1,o,l)&&(u|=1),u<<=1,this.readModule(0,l-3,o,l)&&(u|=1),u<<=1,this.readModule(0,l-2,o,l)&&(u|=1),u<<=1,this.readModule(0,l-1,o,l)&&(u|=1),u<<=1,this.readModule(1,l-3,o,l)&&(u|=1),u<<=1,this.readModule(1,l-2,o,l)&&(u|=1),u<<=1,this.readModule(1,l-1,o,l)&&(u|=1),u}readCorner4(o,l){let u=0;return this.readModule(o-3,0,o,l)&&(u|=1),u<<=1,this.readModule(o-2,0,o,l)&&(u|=1),u<<=1,this.readModule(o-1,0,o,l)&&(u|=1),u<<=1,this.readModule(0,l-2,o,l)&&(u|=1),u<<=1,this.readModule(0,l-1,o,l)&&(u|=1),u<<=1,this.readModule(1,l-1,o,l)&&(u|=1),u<<=1,this.readModule(2,l-1,o,l)&&(u|=1),u<<=1,this.readModule(3,l-1,o,l)&&(u|=1),u}extractDataRegion(o){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(o.getHeight()!==l)throw new m("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),b=l/g|0,T=u/y|0,I=b*g,P=T*y,U=new z(P,I);for(let W=0;W<b;++W){const Q=W*g;for(let ie=0;ie<T;++ie){const le=ie*y;for(let ce=0;ce<g;++ce){const pe=W*(g+2)+1+ce,xe=Q+ce;for(let Re=0;Re<y;++Re){const je=ie*(y+2)+1+Re;if(o.get(je,pe)){const Oe=le+Re;U.set(Oe,xe)}}}}}return U}}class Up{constructor(o,l){this.numDataCodewords=o,this.codewords=l}static getDataBlocks(o,l){const u=l.getECBlocks();let g=0;const y=u.getECBlocks();for(let ce of y)g+=ce.getCount();const b=new Array(g);let T=0;for(let ce of y)for(let pe=0;pe<ce.getCount();pe++){const xe=ce.getDataCodewords(),Re=u.getECCodewords()+xe;b[T++]=new Up(xe,new Uint8Array(Re))}const P=b[0].codewords.length-u.getECCodewords(),U=P-1;let W=0;for(let ce=0;ce<U;ce++)for(let pe=0;pe<T;pe++)b[pe].codewords[ce]=o[W++];const Q=l.getVersionNumber()===24,ie=Q?8:T;for(let ce=0;ce<ie;ce++)b[ce].codewords[P-1]=o[W++];const le=b[0].codewords.length;for(let ce=P;ce<le;ce++)for(let pe=0;pe<T;pe++){const xe=Q?(pe+8)%T:pe,Re=Q&&xe>7?ce-1:ce;b[xe].codewords[Re]=o[W++]}if(W!==o.length)throw new m;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class zp{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new m(""+o);let l=0,u=this.bitOffset,g=this.byteOffset;const y=this.bytes;if(u>0){const b=8-u,T=o<b?o:b,I=b-T,P=255>>8-T<<I;l=(y[g]&P)>>I,o-=T,u+=T,u===8&&(u=0,g++)}if(o>0){for(;o>=8;)l=l<<8|y[g]&255,g++,o-=8;if(o>0){const b=8-o,T=255>>b<<b;l=l<<o|(y[g]&T)>>b,u+=o}}return this.bitOffset=u,this.byteOffset=g,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var kr;(function(q){q[q.PAD_ENCODE=0]="PAD_ENCODE",q[q.ASCII_ENCODE=1]="ASCII_ENCODE",q[q.C40_ENCODE=2]="C40_ENCODE",q[q.TEXT_ENCODE=3]="TEXT_ENCODE",q[q.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",q[q.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",q[q.BASE256_ENCODE=6]="BASE256_ENCODE"})(kr||(kr={}));class ao{static decode(o){const l=new zp(o),u=new H,g=new H,y=new Array;let b=kr.ASCII_ENCODE;do if(b===kr.ASCII_ENCODE)b=this.decodeAsciiSegment(l,u,g);else{switch(b){case kr.C40_ENCODE:this.decodeC40Segment(l,u);break;case kr.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case kr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case kr.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case kr.BASE256_ENCODE:this.decodeBase256Segment(l,u,y);break;default:throw new M}b=kr.ASCII_ENCODE}while(b!==kr.PAD_ENCODE&&l.available()>0);return g.length()>0&&u.append(g.toString()),new fe(o,u.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(o,l,u){let g=!1;do{let y=o.readBits(8);if(y===0)throw new M;if(y<=128)return g&&(y+=128),l.append(String.fromCharCode(y-1)),kr.ASCII_ENCODE;if(y===129)return kr.PAD_ENCODE;if(y<=229){const b=y-130;b<10&&l.append("0"),l.append(""+b)}else switch(y){case 230:return kr.C40_ENCODE;case 231:return kr.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return kr.ANSIX12_ENCODE;case 239:return kr.TEXT_ENCODE;case 240:return kr.EDIFACT_ENCODE;case 241:break;default:if(y!==254||o.available()!==0)throw new M;break}}while(o.available()>0);return kr.ASCII_ENCODE}static decodeC40Segment(o,l){let u=!1;const g=[];let y=0;do{if(o.available()===8)return;const b=o.readBits(8);if(b===254)return;this.parseTwoBytes(b,o.readBits(8),g);for(let T=0;T<3;T++){const I=g[T];switch(y){case 0:if(I<3)y=I+1;else if(I<this.C40_BASIC_SET_CHARS.length){const P=this.C40_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(P.charCodeAt(0)+128)),u=!1):l.append(P)}else throw new M;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),y=0;break;case 2:if(I<this.C40_SHIFT2_SET_CHARS.length){const P=this.C40_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(P.charCodeAt(0)+128)),u=!1):l.append(P)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new M}y=0;break;case 3:u?(l.append(String.fromCharCode(I+224)),u=!1):l.append(String.fromCharCode(I+96)),y=0;break;default:throw new M}}}while(o.available()>0)}static decodeTextSegment(o,l){let u=!1,g=[],y=0;do{if(o.available()===8)return;const b=o.readBits(8);if(b===254)return;this.parseTwoBytes(b,o.readBits(8),g);for(let T=0;T<3;T++){const I=g[T];switch(y){case 0:if(I<3)y=I+1;else if(I<this.TEXT_BASIC_SET_CHARS.length){const P=this.TEXT_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(P.charCodeAt(0)+128)),u=!1):l.append(P)}else throw new M;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),y=0;break;case 2:if(I<this.TEXT_SHIFT2_SET_CHARS.length){const P=this.TEXT_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(P.charCodeAt(0)+128)),u=!1):l.append(P)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new M}y=0;break;case 3:if(I<this.TEXT_SHIFT3_SET_CHARS.length){const P=this.TEXT_SHIFT3_SET_CHARS[I];u?(l.append(String.fromCharCode(P.charCodeAt(0)+128)),u=!1):l.append(P),y=0}else throw new M;break;default:throw new M}}}while(o.available()>0)}static decodeAnsiX12Segment(o,l){const u=[];do{if(o.available()===8)return;const g=o.readBits(8);if(g===254)return;this.parseTwoBytes(g,o.readBits(8),u);for(let y=0;y<3;y++){const b=u[y];switch(b){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(b<14)l.append(String.fromCharCode(b+44));else if(b<40)l.append(String.fromCharCode(b+51));else throw new M;break}}}while(o.available()>0)}static parseTwoBytes(o,l,u){let g=(o<<8)+l-1,y=Math.floor(g/1600);u[0]=y,g-=y*1600,y=Math.floor(g/40),u[1]=y,u[2]=g-y*40}static decodeEdifactSegment(o,l){do{if(o.available()<=16)return;for(let u=0;u<4;u++){let g=o.readBits(6);if(g===31){const y=8-o.getBitOffset();y!==8&&o.readBits(y);return}g&32||(g|=64),l.append(String.fromCharCode(g))}}while(o.available()>0)}static decodeBase256Segment(o,l,u){let g=1+o.getByteOffset();const y=this.unrandomize255State(o.readBits(8),g++);let b;if(y===0?b=o.available()/8|0:y<250?b=y:b=250*(y-249)+this.unrandomize255State(o.readBits(8),g++),b<0)throw new M;const T=new Uint8Array(b);for(let I=0;I<b;I++){if(o.available()<8)throw new M;T[I]=this.unrandomize255State(o.readBits(8),g++)}u.push(T);try{l.append(B.decode(T,F.ISO88591))}catch(I){throw new Ge("Platform does not support required encoding: "+I.message)}}static unrandomize255State(o,l){const u=149*l%255+1,g=o-u;return g>=0?g:g+256}}ao.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ao.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ao.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ao.TEXT_SHIFT2_SET_CHARS=ao.C40_SHIFT2_SET_CHARS,ao.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class RR{constructor(){this.rsDecoder=new ht(Ce.DATA_MATRIX_FIELD_256)}decode(o){const l=new Fp(o),u=l.getVersion(),g=l.readCodewords(),y=Up.getDataBlocks(g,u);let b=0;for(let P of y)b+=P.getNumDataCodewords();const T=new Uint8Array(b),I=y.length;for(let P=0;P<I;P++){const U=y[P],W=U.getCodewords(),Q=U.getNumDataCodewords();this.correctErrors(W,Q);for(let ie=0;ie<Q;ie++)T[ie*I+P]=W[ie]}return ao.decode(T)}correctErrors(o,l){const u=new Int32Array(o);try{this.rsDecoder.decode(u,o.length-l)}catch{throw new x}for(let g=0;g<l;g++)o[g]=u[g]}}class vr{constructor(o){this.image=o,this.rectangleDetector=new He(this.image)}detect(){const o=this.rectangleDetector.detect();let l=this.detectSolid1(o);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new $;l=this.shiftToModuleCenter(l);const u=l[0],g=l[1],y=l[2],b=l[3];let T=this.transitionsBetween(u,b)+1,I=this.transitionsBetween(y,b)+1;(T&1)===1&&(T+=1),(I&1)===1&&(I+=1),4*T<7*I&&4*I<7*T&&(T=I=Math.max(T,I));let P=vr.sampleGrid(this.image,u,g,y,b,T,I);return new Ee(P,[u,g,y,b])}static shiftPoint(o,l,u){let g=(l.getX()-o.getX())/(u+1),y=(l.getY()-o.getY())/(u+1);return new ge(o.getX()+g,o.getY()+y)}static moveAway(o,l,u){let g=o.getX(),y=o.getY();return g<l?g-=1:g+=1,y<u?y-=1:y+=1,new ge(g,y)}detectSolid1(o){let l=o[0],u=o[1],g=o[3],y=o[2],b=this.transitionsBetween(l,u),T=this.transitionsBetween(u,g),I=this.transitionsBetween(g,y),P=this.transitionsBetween(y,l),U=b,W=[y,l,u,g];return U>T&&(U=T,W[0]=l,W[1]=u,W[2]=g,W[3]=y),U>I&&(U=I,W[0]=u,W[1]=g,W[2]=y,W[3]=l),U>P&&(W[0]=g,W[1]=y,W[2]=l,W[3]=u),W}detectSolid2(o){let l=o[0],u=o[1],g=o[2],y=o[3],b=this.transitionsBetween(l,y),T=vr.shiftPoint(u,g,(b+1)*4),I=vr.shiftPoint(g,u,(b+1)*4),P=this.transitionsBetween(T,l),U=this.transitionsBetween(I,y);return P<U?(o[0]=l,o[1]=u,o[2]=g,o[3]=y):(o[0]=u,o[1]=g,o[2]=y,o[3]=l),o}correctTopRight(o){let l=o[0],u=o[1],g=o[2],y=o[3],b=this.transitionsBetween(l,y),T=this.transitionsBetween(u,y),I=vr.shiftPoint(l,u,(T+1)*4),P=vr.shiftPoint(g,u,(b+1)*4);b=this.transitionsBetween(I,y),T=this.transitionsBetween(P,y);let U=new ge(y.getX()+(g.getX()-u.getX())/(b+1),y.getY()+(g.getY()-u.getY())/(b+1)),W=new ge(y.getX()+(l.getX()-u.getX())/(T+1),y.getY()+(l.getY()-u.getY())/(T+1));if(!this.isValid(U))return this.isValid(W)?W:null;if(!this.isValid(W))return U;let Q=this.transitionsBetween(I,U)+this.transitionsBetween(P,U),ie=this.transitionsBetween(I,W)+this.transitionsBetween(P,W);return Q>ie?U:W}shiftToModuleCenter(o){let l=o[0],u=o[1],g=o[2],y=o[3],b=this.transitionsBetween(l,y)+1,T=this.transitionsBetween(g,y)+1,I=vr.shiftPoint(l,u,T*4),P=vr.shiftPoint(g,u,b*4);b=this.transitionsBetween(I,y)+1,T=this.transitionsBetween(P,y)+1,(b&1)===1&&(b+=1),(T&1)===1&&(T+=1);let U=(l.getX()+u.getX()+g.getX()+y.getX())/4,W=(l.getY()+u.getY()+g.getY()+y.getY())/4;l=vr.moveAway(l,U,W),u=vr.moveAway(u,U,W),g=vr.moveAway(g,U,W),y=vr.moveAway(y,U,W);let Q,ie;return I=vr.shiftPoint(l,u,T*4),I=vr.shiftPoint(I,y,b*4),Q=vr.shiftPoint(u,l,T*4),Q=vr.shiftPoint(Q,g,b*4),P=vr.shiftPoint(g,y,T*4),P=vr.shiftPoint(P,u,b*4),ie=vr.shiftPoint(y,g,T*4),ie=vr.shiftPoint(ie,l,b*4),[I,Q,P,ie]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,l,u,g,y,b,T){return wt.getInstance().sampleGrid(o,b,T,.5,.5,b-.5,.5,b-.5,T-.5,.5,T-.5,l.getX(),l.getY(),y.getX(),y.getY(),g.getX(),g.getY(),u.getX(),u.getY())}transitionsBetween(o,l){let u=Math.trunc(o.getX()),g=Math.trunc(o.getY()),y=Math.trunc(l.getX()),b=Math.trunc(l.getY()),T=Math.abs(b-g)>Math.abs(y-u);if(T){let ce=u;u=g,g=ce,ce=y,y=b,b=ce}let I=Math.abs(y-u),P=Math.abs(b-g),U=-I/2,W=g<b?1:-1,Q=u<y?1:-1,ie=0,le=this.image.get(T?g:u,T?u:g);for(let ce=u,pe=g;ce!==y;ce+=Q){let xe=this.image.get(T?pe:ce,T?ce:pe);if(xe!==le&&(ie++,le=xe),U+=P,U>0){if(pe===b)break;pe+=W,U-=I}}return ie}}class lo{constructor(){this.decoder=new RR}decode(o,l=null){let u,g;if(l!=null&&l.has(D.PURE_BARCODE)){const P=lo.extractPureBits(o.getBlackMatrix());u=this.decoder.decode(P),g=lo.NO_POINTS}else{const P=new vr(o.getBlackMatrix()).detect();u=this.decoder.decode(P.getBits()),g=P.getPoints()}const y=u.getRawBytes(),b=new se(u.getText(),y,8*y.length,g,X.DATA_MATRIX,w.currentTimeMillis()),T=u.getByteSegments();T!=null&&b.putMetadata(ue.BYTE_SEGMENTS,T);const I=u.getECLevel();return I!=null&&b.putMetadata(ue.ERROR_CORRECTION_LEVEL,I),b}reset(){}static extractPureBits(o){const l=o.getTopLeftOnBit(),u=o.getBottomRightOnBit();if(l==null||u==null)throw new $;const g=this.moduleSize(l,o);let y=l[1];const b=u[1];let T=l[0];const P=(u[0]-T+1)/g,U=(b-y+1)/g;if(P<=0||U<=0)throw new $;const W=g/2;y+=W,T+=W;const Q=new z(P,U);for(let ie=0;ie<U;ie++){const le=y+ie*g;for(let ce=0;ce<P;ce++)o.get(T+ce*g,le)&&Q.set(ce,ie)}return Q}static moduleSize(o,l){const u=l.getWidth();let g=o[0];const y=o[1];for(;g<u&&l.get(g,y);)g++;if(g===u)throw new $;const b=g-o[0];if(b===0)throw new $;return b}}lo.NO_POINTS=[];class kR extends Z{constructor(o=500){super(new lo,o)}}var gl;(function(q){q[q.L=0]="L",q[q.M=1]="M",q[q.Q=2]="Q",q[q.H=3]="H"})(gl||(gl={}));class Bt{constructor(o,l,u){this.value=o,this.stringValue=l,this.bits=u,Bt.FOR_BITS.set(u,this),Bt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Bt.L;case"M":return Bt.M;case"Q":return Bt.Q;case"H":return Bt.H;default:throw new p(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Bt))return!1;const l=o;return this.value===l.value}static forBits(o){if(o<0||o>=Bt.FOR_BITS.size)throw new m;return Bt.FOR_BITS.get(o)}}Bt.FOR_BITS=new Map,Bt.FOR_VALUE=new Map,Bt.L=new Bt(gl.L,"L",1),Bt.M=new Bt(gl.M,"M",0),Bt.Q=new Bt(gl.Q,"Q",3),Bt.H=new Bt(gl.H,"H",2);class tn{constructor(o){this.errorCorrectionLevel=Bt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,l){return C.bitCount(o^l)}static decodeFormatInformation(o,l){const u=tn.doDecodeFormatInformation(o,l);return u!==null?u:tn.doDecodeFormatInformation(o^tn.FORMAT_INFO_MASK_QR,l^tn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,l){let u=Number.MAX_SAFE_INTEGER,g=0;for(const y of tn.FORMAT_INFO_DECODE_LOOKUP){const b=y[0];if(b===o||b===l)return new tn(y[1]);let T=tn.numBitsDiffering(o,b);T<u&&(g=y[1],u=T),o!==l&&(T=tn.numBitsDiffering(l,b),T<u&&(g=y[1],u=T))}return u<=3?new tn(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof tn))return!1;const l=o;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}tn.FORMAT_INFO_MASK_QR=21522,tn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class me{constructor(o,...l){this.ecCodewordsPerBlock=o,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const l=this.ecBlocks;for(const u of l)o+=u.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class re{constructor(o,l){this.count=o,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(o,l,...u){this.versionNumber=o,this.alignmentPatternCenters=l,this.ecBlocks=u;let g=0;const y=u[0].getECCodewordsPerBlock(),b=u[0].getECBlocks();for(const T of b)g+=T.getCount()*(T.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new M;try{return this.getVersionForNumber((o-17)/4)}catch{throw new M}}static getVersionForNumber(o){if(o<1||o>40)throw new m;return Ye.VERSIONS[o-1]}static decodeVersionInformation(o){let l=Number.MAX_SAFE_INTEGER,u=0;for(let g=0;g<Ye.VERSION_DECODE_INFO.length;g++){const y=Ye.VERSION_DECODE_INFO[g];if(y===o)return Ye.getVersionForNumber(g+7);const b=tn.numBitsDiffering(o,y);b<l&&(u=g+7,l=b)}return l<=3?Ye.getVersionForNumber(u):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),l=new z(o);l.setRegion(0,0,9,9),l.setRegion(o-8,0,8,9),l.setRegion(0,o-8,9,8);const u=this.alignmentPatternCenters.length;for(let g=0;g<u;g++){const y=this.alignmentPatternCenters[g]-2;for(let b=0;b<u;b++)g===0&&(b===0||b===u-1)||g===u-1&&b===0||l.setRegion(this.alignmentPatternCenters[b]-2,y,5,5)}return l.setRegion(6,9,1,o-17),l.setRegion(9,6,o-17,1),this.versionNumber>6&&(l.setRegion(o-11,0,3,6),l.setRegion(0,o-11,6,3)),l}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new me(7,new re(1,19)),new me(10,new re(1,16)),new me(13,new re(1,13)),new me(17,new re(1,9))),new Ye(2,Int32Array.from([6,18]),new me(10,new re(1,34)),new me(16,new re(1,28)),new me(22,new re(1,22)),new me(28,new re(1,16))),new Ye(3,Int32Array.from([6,22]),new me(15,new re(1,55)),new me(26,new re(1,44)),new me(18,new re(2,17)),new me(22,new re(2,13))),new Ye(4,Int32Array.from([6,26]),new me(20,new re(1,80)),new me(18,new re(2,32)),new me(26,new re(2,24)),new me(16,new re(4,9))),new Ye(5,Int32Array.from([6,30]),new me(26,new re(1,108)),new me(24,new re(2,43)),new me(18,new re(2,15),new re(2,16)),new me(22,new re(2,11),new re(2,12))),new Ye(6,Int32Array.from([6,34]),new me(18,new re(2,68)),new me(16,new re(4,27)),new me(24,new re(4,19)),new me(28,new re(4,15))),new Ye(7,Int32Array.from([6,22,38]),new me(20,new re(2,78)),new me(18,new re(4,31)),new me(18,new re(2,14),new re(4,15)),new me(26,new re(4,13),new re(1,14))),new Ye(8,Int32Array.from([6,24,42]),new me(24,new re(2,97)),new me(22,new re(2,38),new re(2,39)),new me(22,new re(4,18),new re(2,19)),new me(26,new re(4,14),new re(2,15))),new Ye(9,Int32Array.from([6,26,46]),new me(30,new re(2,116)),new me(22,new re(3,36),new re(2,37)),new me(20,new re(4,16),new re(4,17)),new me(24,new re(4,12),new re(4,13))),new Ye(10,Int32Array.from([6,28,50]),new me(18,new re(2,68),new re(2,69)),new me(26,new re(4,43),new re(1,44)),new me(24,new re(6,19),new re(2,20)),new me(28,new re(6,15),new re(2,16))),new Ye(11,Int32Array.from([6,30,54]),new me(20,new re(4,81)),new me(30,new re(1,50),new re(4,51)),new me(28,new re(4,22),new re(4,23)),new me(24,new re(3,12),new re(8,13))),new Ye(12,Int32Array.from([6,32,58]),new me(24,new re(2,92),new re(2,93)),new me(22,new re(6,36),new re(2,37)),new me(26,new re(4,20),new re(6,21)),new me(28,new re(7,14),new re(4,15))),new Ye(13,Int32Array.from([6,34,62]),new me(26,new re(4,107)),new me(22,new re(8,37),new re(1,38)),new me(24,new re(8,20),new re(4,21)),new me(22,new re(12,11),new re(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new me(30,new re(3,115),new re(1,116)),new me(24,new re(4,40),new re(5,41)),new me(20,new re(11,16),new re(5,17)),new me(24,new re(11,12),new re(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new me(22,new re(5,87),new re(1,88)),new me(24,new re(5,41),new re(5,42)),new me(30,new re(5,24),new re(7,25)),new me(24,new re(11,12),new re(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new me(24,new re(5,98),new re(1,99)),new me(28,new re(7,45),new re(3,46)),new me(24,new re(15,19),new re(2,20)),new me(30,new re(3,15),new re(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new me(28,new re(1,107),new re(5,108)),new me(28,new re(10,46),new re(1,47)),new me(28,new re(1,22),new re(15,23)),new me(28,new re(2,14),new re(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new me(30,new re(5,120),new re(1,121)),new me(26,new re(9,43),new re(4,44)),new me(28,new re(17,22),new re(1,23)),new me(28,new re(2,14),new re(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new me(28,new re(3,113),new re(4,114)),new me(26,new re(3,44),new re(11,45)),new me(26,new re(17,21),new re(4,22)),new me(26,new re(9,13),new re(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new me(28,new re(3,107),new re(5,108)),new me(26,new re(3,41),new re(13,42)),new me(30,new re(15,24),new re(5,25)),new me(28,new re(15,15),new re(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new me(28,new re(4,116),new re(4,117)),new me(26,new re(17,42)),new me(28,new re(17,22),new re(6,23)),new me(30,new re(19,16),new re(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new me(28,new re(2,111),new re(7,112)),new me(28,new re(17,46)),new me(30,new re(7,24),new re(16,25)),new me(24,new re(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new me(30,new re(4,121),new re(5,122)),new me(28,new re(4,47),new re(14,48)),new me(30,new re(11,24),new re(14,25)),new me(30,new re(16,15),new re(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new me(30,new re(6,117),new re(4,118)),new me(28,new re(6,45),new re(14,46)),new me(30,new re(11,24),new re(16,25)),new me(30,new re(30,16),new re(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new me(26,new re(8,106),new re(4,107)),new me(28,new re(8,47),new re(13,48)),new me(30,new re(7,24),new re(22,25)),new me(30,new re(22,15),new re(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new me(28,new re(10,114),new re(2,115)),new me(28,new re(19,46),new re(4,47)),new me(28,new re(28,22),new re(6,23)),new me(30,new re(33,16),new re(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new me(30,new re(8,122),new re(4,123)),new me(28,new re(22,45),new re(3,46)),new me(30,new re(8,23),new re(26,24)),new me(30,new re(12,15),new re(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new me(30,new re(3,117),new re(10,118)),new me(28,new re(3,45),new re(23,46)),new me(30,new re(4,24),new re(31,25)),new me(30,new re(11,15),new re(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new me(30,new re(7,116),new re(7,117)),new me(28,new re(21,45),new re(7,46)),new me(30,new re(1,23),new re(37,24)),new me(30,new re(19,15),new re(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new me(30,new re(5,115),new re(10,116)),new me(28,new re(19,47),new re(10,48)),new me(30,new re(15,24),new re(25,25)),new me(30,new re(23,15),new re(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new me(30,new re(13,115),new re(3,116)),new me(28,new re(2,46),new re(29,47)),new me(30,new re(42,24),new re(1,25)),new me(30,new re(23,15),new re(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new me(30,new re(17,115)),new me(28,new re(10,46),new re(23,47)),new me(30,new re(10,24),new re(35,25)),new me(30,new re(19,15),new re(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new me(30,new re(17,115),new re(1,116)),new me(28,new re(14,46),new re(21,47)),new me(30,new re(29,24),new re(19,25)),new me(30,new re(11,15),new re(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new me(30,new re(13,115),new re(6,116)),new me(28,new re(14,46),new re(23,47)),new me(30,new re(44,24),new re(7,25)),new me(30,new re(59,16),new re(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new me(30,new re(12,121),new re(7,122)),new me(28,new re(12,47),new re(26,48)),new me(30,new re(39,24),new re(14,25)),new me(30,new re(22,15),new re(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new me(30,new re(6,121),new re(14,122)),new me(28,new re(6,47),new re(34,48)),new me(30,new re(46,24),new re(10,25)),new me(30,new re(2,15),new re(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new me(30,new re(17,122),new re(4,123)),new me(28,new re(29,46),new re(14,47)),new me(30,new re(49,24),new re(10,25)),new me(30,new re(24,15),new re(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new me(30,new re(4,122),new re(18,123)),new me(28,new re(13,46),new re(32,47)),new me(30,new re(48,24),new re(14,25)),new me(30,new re(42,15),new re(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new me(30,new re(20,117),new re(4,118)),new me(28,new re(40,47),new re(7,48)),new me(30,new re(43,24),new re(22,25)),new me(30,new re(10,15),new re(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new me(30,new re(19,118),new re(6,119)),new me(28,new re(18,47),new re(31,48)),new me(30,new re(34,24),new re(34,25)),new me(30,new re(20,15),new re(61,16)))];var Fr;(function(q){q[q.DATA_MASK_000=0]="DATA_MASK_000",q[q.DATA_MASK_001=1]="DATA_MASK_001",q[q.DATA_MASK_010=2]="DATA_MASK_010",q[q.DATA_MASK_011=3]="DATA_MASK_011",q[q.DATA_MASK_100=4]="DATA_MASK_100",q[q.DATA_MASK_101=5]="DATA_MASK_101",q[q.DATA_MASK_110=6]="DATA_MASK_110",q[q.DATA_MASK_111=7]="DATA_MASK_111"})(Fr||(Fr={}));class di{constructor(o,l){this.value=o,this.isMasked=l}unmaskBitMatrix(o,l){for(let u=0;u<l;u++)for(let g=0;g<l;g++)this.isMasked(u,g)&&o.flip(g,u)}}di.values=new Map([[Fr.DATA_MASK_000,new di(Fr.DATA_MASK_000,(q,o)=>(q+o&1)===0)],[Fr.DATA_MASK_001,new di(Fr.DATA_MASK_001,(q,o)=>(q&1)===0)],[Fr.DATA_MASK_010,new di(Fr.DATA_MASK_010,(q,o)=>o%3===0)],[Fr.DATA_MASK_011,new di(Fr.DATA_MASK_011,(q,o)=>(q+o)%3===0)],[Fr.DATA_MASK_100,new di(Fr.DATA_MASK_100,(q,o)=>(Math.floor(q/2)+Math.floor(o/3)&1)===0)],[Fr.DATA_MASK_101,new di(Fr.DATA_MASK_101,(q,o)=>q*o%6===0)],[Fr.DATA_MASK_110,new di(Fr.DATA_MASK_110,(q,o)=>q*o%6<3)],[Fr.DATA_MASK_111,new di(Fr.DATA_MASK_111,(q,o)=>(q+o+q*o%3&1)===0)]]);class jR{constructor(o){const l=o.getHeight();if(l<21||(l&3)!==1)throw new M;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let y=0;y<6;y++)o=this.copyBit(y,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let y=5;y>=0;y--)o=this.copyBit(8,y,o);const l=this.bitMatrix.getHeight();let u=0;const g=l-7;for(let y=l-1;y>=g;y--)u=this.copyBit(8,y,u);for(let y=l-8;y<l;y++)u=this.copyBit(y,8,u);if(this.parsedFormatInfo=tn.decodeFormatInformation(o,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new M}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),l=Math.floor((o-17)/4);if(l<=6)return Ye.getVersionForNumber(l);let u=0;const g=o-11;for(let b=5;b>=0;b--)for(let T=o-9;T>=g;T--)u=this.copyBit(T,b,u);let y=Ye.decodeVersionInformation(u);if(y!==null&&y.getDimensionForVersion()===o)return this.parsedVersion=y,y;u=0;for(let b=5;b>=0;b--)for(let T=o-9;T>=g;T--)u=this.copyBit(b,T,u);if(y=Ye.decodeVersionInformation(u),y!==null&&y.getDimensionForVersion()===o)return this.parsedVersion=y,y;throw new M}copyBit(o,l,u){return(this.isMirror?this.bitMatrix.get(l,o):this.bitMatrix.get(o,l))?u<<1|1:u<<1}readCodewords(){const o=this.readFormatInformation(),l=this.readVersion(),u=di.values.get(o.getDataMask()),g=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,g);const y=l.buildFunctionPattern();let b=!0;const T=new Uint8Array(l.getTotalCodewords());let I=0,P=0,U=0;for(let W=g-1;W>0;W-=2){W===6&&W--;for(let Q=0;Q<g;Q++){const ie=b?g-1-Q:Q;for(let le=0;le<2;le++)y.get(W-le,ie)||(U++,P<<=1,this.bitMatrix.get(W-le,ie)&&(P|=1),U===8&&(T[I++]=P,U=0,P=0))}b=!b}if(I!==l.getTotalCodewords())throw new M;return T}remask(){if(this.parsedFormatInfo===null)return;const o=di.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let l=0,u=o.getWidth();l<u;l++)for(let g=l+1,y=o.getHeight();g<y;g++)o.get(l,g)!==o.get(g,l)&&(o.flip(g,l),o.flip(l,g))}}class $p{constructor(o,l){this.numDataCodewords=o,this.codewords=l}static getDataBlocks(o,l,u){if(o.length!==l.getTotalCodewords())throw new m;const g=l.getECBlocksForLevel(u);let y=0;const b=g.getECBlocks();for(const le of b)y+=le.getCount();const T=new Array(y);let I=0;for(const le of b)for(let ce=0;ce<le.getCount();ce++){const pe=le.getDataCodewords(),xe=g.getECCodewordsPerBlock()+pe;T[I++]=new $p(pe,new Uint8Array(xe))}const P=T[0].codewords.length;let U=T.length-1;for(;U>=0&&T[U].codewords.length!==P;)U--;U++;const W=P-g.getECCodewordsPerBlock();let Q=0;for(let le=0;le<W;le++)for(let ce=0;ce<I;ce++)T[ce].codewords[le]=o[Q++];for(let le=U;le<I;le++)T[le].codewords[W]=o[Q++];const ie=T[0].codewords.length;for(let le=W;le<ie;le++)for(let ce=0;ce<I;ce++){const pe=ce<U?le:le+1;T[ce].codewords[pe]=o[Q++]}return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var fi;(function(q){q[q.TERMINATOR=0]="TERMINATOR",q[q.NUMERIC=1]="NUMERIC",q[q.ALPHANUMERIC=2]="ALPHANUMERIC",q[q.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",q[q.BYTE=4]="BYTE",q[q.ECI=5]="ECI",q[q.KANJI=6]="KANJI",q[q.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",q[q.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",q[q.HANZI=9]="HANZI"})(fi||(fi={}));class Ze{constructor(o,l,u,g){this.value=o,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=g,Ze.FOR_BITS.set(g,this),Ze.FOR_VALUE.set(o,this)}static forBits(o){const l=Ze.FOR_BITS.get(o);if(l===void 0)throw new m;return l}getCharacterCountBits(o){const l=o.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Ze))return!1;const l=o;return this.value===l.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(fi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(fi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(fi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(fi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(fi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(fi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(fi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(fi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(fi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(fi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Jt{static decode(o,l,u,g){const y=new zp(o);let b=new H;const T=new Array;let I=-1,P=-1;try{let U=null,W=!1,Q;do{if(y.available()<4)Q=Ze.TERMINATOR;else{const ie=y.readBits(4);Q=Ze.forBits(ie)}switch(Q){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:W=!0;break;case Ze.STRUCTURED_APPEND:if(y.available()<16)throw new M;I=y.readBits(8),P=y.readBits(8);break;case Ze.ECI:const ie=Jt.parseECIValue(y);if(U=k.getCharacterSetECIByValue(ie),U===null)throw new M;break;case Ze.HANZI:const le=y.readBits(4),ce=y.readBits(Q.getCharacterCountBits(l));le===Jt.GB2312_SUBSET&&Jt.decodeHanziSegment(y,b,ce);break;default:const pe=y.readBits(Q.getCharacterCountBits(l));switch(Q){case Ze.NUMERIC:Jt.decodeNumericSegment(y,b,pe);break;case Ze.ALPHANUMERIC:Jt.decodeAlphanumericSegment(y,b,pe,W);break;case Ze.BYTE:Jt.decodeByteSegment(y,b,pe,U,T,g);break;case Ze.KANJI:Jt.decodeKanjiSegment(y,b,pe);break;default:throw new M}break}}while(Q!==Ze.TERMINATOR)}catch{throw new M}return new fe(o,b.toString(),T.length===0?null:T,u===null?null:u.toString(),I,P)}static decodeHanziSegment(o,l,u){if(u*13>o.available())throw new M;const g=new Uint8Array(2*u);let y=0;for(;u>0;){const b=o.readBits(13);let T=b/96<<8&4294967295|b%96;T<959?T+=41377:T+=42657,g[y]=T>>8&255,g[y+1]=T&255,y+=2,u--}try{l.append(B.decode(g,F.GB2312))}catch(b){throw new M(b)}}static decodeKanjiSegment(o,l,u){if(u*13>o.available())throw new M;const g=new Uint8Array(2*u);let y=0;for(;u>0;){const b=o.readBits(13);let T=b/192<<8&4294967295|b%192;T<7936?T+=33088:T+=49472,g[y]=T>>8,g[y+1]=T,y+=2,u--}try{l.append(B.decode(g,F.SHIFT_JIS))}catch(b){throw new M(b)}}static decodeByteSegment(o,l,u,g,y,b){if(8*u>o.available())throw new M;const T=new Uint8Array(u);for(let P=0;P<u;P++)T[P]=o.readBits(8);let I;g===null?I=F.guessEncoding(T,b):I=g.getName();try{l.append(B.decode(T,I))}catch(P){throw new M(P)}y.push(T)}static toAlphaNumericChar(o){if(o>=Jt.ALPHANUMERIC_CHARS.length)throw new M;return Jt.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,l,u,g){const y=l.length();for(;u>1;){if(o.available()<11)throw new M;const b=o.readBits(11);l.append(Jt.toAlphaNumericChar(Math.floor(b/45))),l.append(Jt.toAlphaNumericChar(b%45)),u-=2}if(u===1){if(o.available()<6)throw new M;l.append(Jt.toAlphaNumericChar(o.readBits(6)))}if(g)for(let b=y;b<l.length();b++)l.charAt(b)==="%"&&(b<l.length()-1&&l.charAt(b+1)==="%"?l.deleteCharAt(b+1):l.setCharAt(b,""))}static decodeNumericSegment(o,l,u){for(;u>=3;){if(o.available()<10)throw new M;const g=o.readBits(10);if(g>=1e3)throw new M;l.append(Jt.toAlphaNumericChar(Math.floor(g/100))),l.append(Jt.toAlphaNumericChar(Math.floor(g/10)%10)),l.append(Jt.toAlphaNumericChar(g%10)),u-=3}if(u===2){if(o.available()<7)throw new M;const g=o.readBits(7);if(g>=100)throw new M;l.append(Jt.toAlphaNumericChar(Math.floor(g/10))),l.append(Jt.toAlphaNumericChar(g%10))}else if(u===1){if(o.available()<4)throw new M;const g=o.readBits(4);if(g>=10)throw new M;l.append(Jt.toAlphaNumericChar(g))}}static parseECIValue(o){const l=o.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const u=o.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=o.readBits(16);return(l&31)<<16&4294967295|u}throw new M}}Jt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Jt.GB2312_SUBSET=1;class Wx{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const l=o[0];o[0]=o[2],o[2]=l}}class MR{constructor(){this.rsDecoder=new ht(Ce.QR_CODE_FIELD_256)}decodeBooleanArray(o,l){return this.decodeBitMatrix(z.parseFromBooleanArray(o),l)}decodeBitMatrix(o,l){const u=new jR(o);let g=null;try{return this.decodeBitMatrixParser(u,l)}catch(y){g=y}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const y=this.decodeBitMatrixParser(u,l);return y.setOther(new Wx(!0)),y}catch(y){throw g!==null?g:y}}decodeBitMatrixParser(o,l){const u=o.readVersion(),g=o.readFormatInformation().getErrorCorrectionLevel(),y=o.readCodewords(),b=$p.getDataBlocks(y,u,g);let T=0;for(const U of b)T+=U.getNumDataCodewords();const I=new Uint8Array(T);let P=0;for(const U of b){const W=U.getCodewords(),Q=U.getNumDataCodewords();this.correctErrors(W,Q);for(let ie=0;ie<Q;ie++)I[P++]=W[ie]}return Jt.decode(I,u,g,l)}correctErrors(o,l){const u=new Int32Array(o);try{this.rsDecoder.decode(u,o.length-l)}catch{throw new x}for(let g=0;g<l;g++)o[g]=u[g]}}class Hp extends ge{constructor(o,l,u){super(o,l),this.estimatedModuleSize=u}aboutEquals(o,l,u){if(Math.abs(l-this.getY())<=o&&Math.abs(u-this.getX())<=o){const g=Math.abs(o-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(o,l,u){const g=(this.getX()+l)/2,y=(this.getY()+o)/2,b=(this.estimatedModuleSize+u)/2;return new Hp(g,y,b)}}class uf{constructor(o,l,u,g,y,b,T){this.image=o,this.startX=l,this.startY=u,this.width=g,this.height=y,this.moduleSize=b,this.resultPointCallback=T,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,l=this.height,u=this.width,g=o+u,y=this.startY+l/2,b=new Int32Array(3),T=this.image;for(let I=0;I<l;I++){const P=y+(I&1?-Math.floor((I+1)/2):Math.floor((I+1)/2));b[0]=0,b[1]=0,b[2]=0;let U=o;for(;U<g&&!T.get(U,P);)U++;let W=0;for(;U<g;){if(T.get(U,P))if(W===1)b[1]++;else if(W===2){if(this.foundPatternCross(b)){const Q=this.handlePossibleCenter(b,P,U);if(Q!==null)return Q}b[0]=b[2],b[1]=1,b[2]=0,W=1}else b[++W]++;else W===1&&W++,b[W]++;U++}if(this.foundPatternCross(b)){const Q=this.handlePossibleCenter(b,P,g);if(Q!==null)return Q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(o,l){return l-o[2]-o[1]/2}foundPatternCross(o){const l=this.moduleSize,u=l/2;for(let g=0;g<3;g++)if(Math.abs(l-o[g])>=u)return!1;return!0}crossCheckVertical(o,l,u,g){const y=this.image,b=y.getHeight(),T=this.crossCheckStateCount;T[0]=0,T[1]=0,T[2]=0;let I=o;for(;I>=0&&y.get(l,I)&&T[1]<=u;)T[1]++,I--;if(I<0||T[1]>u)return NaN;for(;I>=0&&!y.get(l,I)&&T[0]<=u;)T[0]++,I--;if(T[0]>u)return NaN;for(I=o+1;I<b&&y.get(l,I)&&T[1]<=u;)T[1]++,I++;if(I===b||T[1]>u)return NaN;for(;I<b&&!y.get(l,I)&&T[2]<=u;)T[2]++,I++;if(T[2]>u)return NaN;const P=T[0]+T[1]+T[2];return 5*Math.abs(P-g)>=2*g?NaN:this.foundPatternCross(T)?uf.centerFromEnd(T,I):NaN}handlePossibleCenter(o,l,u){const g=o[0]+o[1]+o[2],y=uf.centerFromEnd(o,u),b=this.crossCheckVertical(l,y,2*o[1],g);if(!isNaN(b)){const T=(o[0]+o[1]+o[2])/3;for(const P of this.possibleCenters)if(P.aboutEquals(T,b,y))return P.combineEstimate(b,y,T);const I=new Hp(y,b,T);this.possibleCenters.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return null}}class Vp extends ge{constructor(o,l,u,g){super(o,l),this.estimatedModuleSize=u,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,l,u){if(Math.abs(l-this.getY())<=o&&Math.abs(u-this.getX())<=o){const g=Math.abs(o-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(o,l,u){const g=this.count+1,y=(this.count*this.getX()+l)/g,b=(this.count*this.getY()+o)/g,T=(this.count*this.estimatedModuleSize+u)/g;return new Vp(y,b,T,g)}}class PR{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ur{constructor(o,l){this.image=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const l=o!=null&&o.get(D.TRY_HARDER)!==void 0,u=o!=null&&o.get(D.PURE_BARCODE)!==void 0,g=this.image,y=g.getHeight(),b=g.getWidth();let T=Math.floor(3*y/(4*Ur.MAX_MODULES));(T<Ur.MIN_SKIP||l)&&(T=Ur.MIN_SKIP);let I=!1;const P=new Int32Array(5);for(let W=T-1;W<y&&!I;W+=T){P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0;let Q=0;for(let ie=0;ie<b;ie++)if(g.get(ie,W))(Q&1)===1&&Q++,P[Q]++;else if(Q&1)P[Q]++;else if(Q===4)if(Ur.foundPatternCross(P)){if(this.handlePossibleCenter(P,W,ie,u)===!0)if(T=2,this.hasSkipped===!0)I=this.haveMultiplyConfirmedCenters();else{const ce=this.findRowSkip();ce>P[2]&&(W+=ce-P[2]-T,ie=b-1)}else{P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,Q=3;continue}Q=0,P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0}else P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,Q=3;else P[++Q]++;Ur.foundPatternCross(P)&&this.handlePossibleCenter(P,W,b,u)===!0&&(T=P[0],this.hasSkipped&&(I=this.haveMultiplyConfirmedCenters()))}const U=this.selectBestPatterns();return ge.orderBestPatterns(U),new PR(U)}static centerFromEnd(o,l){return l-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let l=0;for(let y=0;y<5;y++){const b=o[y];if(b===0)return!1;l+=b}if(l<7)return!1;const u=l/7,g=u/2;return Math.abs(u-o[0])<g&&Math.abs(u-o[1])<g&&Math.abs(3*u-o[2])<3*g&&Math.abs(u-o[3])<g&&Math.abs(u-o[4])<g}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,l,u,g){const y=this.getCrossCheckStateCount();let b=0;const T=this.image;for(;o>=b&&l>=b&&T.get(l-b,o-b);)y[2]++,b++;if(o<b||l<b)return!1;for(;o>=b&&l>=b&&!T.get(l-b,o-b)&&y[1]<=u;)y[1]++,b++;if(o<b||l<b||y[1]>u)return!1;for(;o>=b&&l>=b&&T.get(l-b,o-b)&&y[0]<=u;)y[0]++,b++;if(y[0]>u)return!1;const I=T.getHeight(),P=T.getWidth();for(b=1;o+b<I&&l+b<P&&T.get(l+b,o+b);)y[2]++,b++;if(o+b>=I||l+b>=P)return!1;for(;o+b<I&&l+b<P&&!T.get(l+b,o+b)&&y[3]<u;)y[3]++,b++;if(o+b>=I||l+b>=P||y[3]>=u)return!1;for(;o+b<I&&l+b<P&&T.get(l+b,o+b)&&y[4]<u;)y[4]++,b++;if(y[4]>=u)return!1;const U=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(U-g)<2*g&&Ur.foundPatternCross(y)}crossCheckVertical(o,l,u,g){const y=this.image,b=y.getHeight(),T=this.getCrossCheckStateCount();let I=o;for(;I>=0&&y.get(l,I);)T[2]++,I--;if(I<0)return NaN;for(;I>=0&&!y.get(l,I)&&T[1]<=u;)T[1]++,I--;if(I<0||T[1]>u)return NaN;for(;I>=0&&y.get(l,I)&&T[0]<=u;)T[0]++,I--;if(T[0]>u)return NaN;for(I=o+1;I<b&&y.get(l,I);)T[2]++,I++;if(I===b)return NaN;for(;I<b&&!y.get(l,I)&&T[3]<u;)T[3]++,I++;if(I===b||T[3]>=u)return NaN;for(;I<b&&y.get(l,I)&&T[4]<u;)T[4]++,I++;if(T[4]>=u)return NaN;const P=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(P-g)>=2*g?NaN:Ur.foundPatternCross(T)?Ur.centerFromEnd(T,I):NaN}crossCheckHorizontal(o,l,u,g){const y=this.image,b=y.getWidth(),T=this.getCrossCheckStateCount();let I=o;for(;I>=0&&y.get(I,l);)T[2]++,I--;if(I<0)return NaN;for(;I>=0&&!y.get(I,l)&&T[1]<=u;)T[1]++,I--;if(I<0||T[1]>u)return NaN;for(;I>=0&&y.get(I,l)&&T[0]<=u;)T[0]++,I--;if(T[0]>u)return NaN;for(I=o+1;I<b&&y.get(I,l);)T[2]++,I++;if(I===b)return NaN;for(;I<b&&!y.get(I,l)&&T[3]<u;)T[3]++,I++;if(I===b||T[3]>=u)return NaN;for(;I<b&&y.get(I,l)&&T[4]<u;)T[4]++,I++;if(T[4]>=u)return NaN;const P=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(P-g)>=g?NaN:Ur.foundPatternCross(T)?Ur.centerFromEnd(T,I):NaN}handlePossibleCenter(o,l,u,g){const y=o[0]+o[1]+o[2]+o[3]+o[4];let b=Ur.centerFromEnd(o,u),T=this.crossCheckVertical(l,Math.floor(b),o[2],y);if(!isNaN(T)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(T),o[2],y),!isNaN(b)&&(!g||this.crossCheckDiagonal(Math.floor(T),Math.floor(b),o[2],y)))){const I=y/7;let P=!1;const U=this.possibleCenters;for(let W=0,Q=U.length;W<Q;W++){const ie=U[W];if(ie.aboutEquals(I,T,b)){U[W]=ie.combineEstimate(T,b,I),P=!0;break}}if(!P){const W=new Vp(b,T,I);U.push(W),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(W)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Ur.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,l=0;const u=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=Ur.CENTER_QUORUM&&(o++,l+=b.getEstimatedModuleSize());if(o<3)return!1;const g=l/u;let y=0;for(const b of this.possibleCenters)y+=Math.abs(b.getEstimatedModuleSize()-g);return y<=.05*l}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new $;const l=this.possibleCenters;let u;if(o>3){let g=0,y=0;for(const I of this.possibleCenters){const P=I.getEstimatedModuleSize();g+=P,y+=P*P}u=g/o;let b=Math.sqrt(y/o-u*u);l.sort((I,P)=>{const U=Math.abs(P.getEstimatedModuleSize()-u),W=Math.abs(I.getEstimatedModuleSize()-u);return U<W?-1:U>W?1:0});const T=Math.max(.2*u,b);for(let I=0;I<l.length&&l.length>3;I++){const P=l[I];Math.abs(P.getEstimatedModuleSize()-u)>T&&(l.splice(I,1),I--)}}if(l.length>3){let g=0;for(const y of l)g+=y.getEstimatedModuleSize();u=g/l.length,l.sort((y,b)=>{if(b.getCount()===y.getCount()){const T=Math.abs(b.getEstimatedModuleSize()-u),I=Math.abs(y.getEstimatedModuleSize()-u);return T<I?1:T>I?-1:0}else return b.getCount()-y.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Ur.CENTER_QUORUM=2,Ur.MIN_SKIP=3,Ur.MAX_MODULES=57;class iu{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(D.NEED_RESULT_POINT_CALLBACK);const u=new Ur(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(u)}processFinderPatternInfo(o){const l=o.getTopLeft(),u=o.getTopRight(),g=o.getBottomLeft(),y=this.calculateModuleSize(l,u,g);if(y<1)throw new $("No pattern found in proccess finder.");const b=iu.computeDimension(l,u,g,y),T=Ye.getProvisionalVersionForDimension(b),I=T.getDimensionForVersion()-7;let P=null;if(T.getAlignmentPatternCenters().length>0){const ie=u.getX()-l.getX()+g.getX(),le=u.getY()-l.getY()+g.getY(),ce=1-3/I,pe=Math.floor(l.getX()+ce*(ie-l.getX())),xe=Math.floor(l.getY()+ce*(le-l.getY()));for(let Re=4;Re<=16;Re<<=1)try{P=this.findAlignmentInRegion(y,pe,xe,Re);break}catch(je){if(!(je instanceof $))throw je}}const U=iu.createTransform(l,u,g,P,b),W=iu.sampleGrid(this.image,U,b);let Q;return P===null?Q=[g,l,u]:Q=[g,l,u,P],new Ee(W,Q)}static createTransform(o,l,u,g,y){const b=y-3.5;let T,I,P,U;return g!==null?(T=g.getX(),I=g.getY(),P=b-3,U=P):(T=l.getX()-o.getX()+u.getX(),I=l.getY()-o.getY()+u.getY(),P=b,U=b),ut.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,P,U,3.5,b,o.getX(),o.getY(),l.getX(),l.getY(),T,I,u.getX(),u.getY())}static sampleGrid(o,l,u){return wt.getInstance().sampleGridWithTransform(o,u,u,l)}static computeDimension(o,l,u,g){const y=de.round(ge.distance(o,l)/g),b=de.round(ge.distance(o,u)/g);let T=Math.floor((y+b)/2)+7;switch(T&3){case 0:T++;break;case 2:T--;break;case 3:throw new $("Dimensions could be not found.")}return T}calculateModuleSize(o,l,u){return(this.calculateModuleSizeOneWay(o,l)+this.calculateModuleSizeOneWay(o,u))/2}calculateModuleSizeOneWay(o,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(l.getX()),Math.floor(l.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(u)?g/7:isNaN(g)?u/7:(u+g)/14}sizeOfBlackWhiteBlackRunBothWays(o,l,u,g){let y=this.sizeOfBlackWhiteBlackRun(o,l,u,g),b=1,T=o-(u-o);T<0?(b=o/(o-T),T=0):T>=this.image.getWidth()&&(b=(this.image.getWidth()-1-o)/(T-o),T=this.image.getWidth()-1);let I=Math.floor(l-(g-l)*b);return b=1,I<0?(b=l/(l-I),I=0):I>=this.image.getHeight()&&(b=(this.image.getHeight()-1-l)/(I-l),I=this.image.getHeight()-1),T=Math.floor(o+(T-o)*b),y+=this.sizeOfBlackWhiteBlackRun(o,l,T,I),y-1}sizeOfBlackWhiteBlackRun(o,l,u,g){const y=Math.abs(g-l)>Math.abs(u-o);if(y){let ie=o;o=l,l=ie,ie=u,u=g,g=ie}const b=Math.abs(u-o),T=Math.abs(g-l);let I=-b/2;const P=o<u?1:-1,U=l<g?1:-1;let W=0;const Q=u+P;for(let ie=o,le=l;ie!==Q;ie+=P){const ce=y?le:ie,pe=y?ie:le;if(W===1===this.image.get(ce,pe)){if(W===2)return de.distance(ie,le,o,l);W++}if(I+=T,I>0){if(le===g)break;le+=U,I-=b}}return W===2?de.distance(u+P,g,o,l):NaN}findAlignmentInRegion(o,l,u,g){const y=Math.floor(g*o),b=Math.max(0,l-y),T=Math.min(this.image.getWidth()-1,l+y);if(T-b<o*3)throw new $("Alignment top exceeds estimated module size.");const I=Math.max(0,u-y),P=Math.min(this.image.getHeight()-1,u+y);if(P-I<o*3)throw new $("Alignment bottom exceeds estimated module size.");return new uf(this.image,b,I,T-b,P-I,o,this.resultPointCallback).find()}}class co{constructor(){this.decoder=new MR}getDecoder(){return this.decoder}decode(o,l){let u,g;if(l!=null&&l.get(D.PURE_BARCODE)!==void 0){const I=co.extractPureBits(o.getBlackMatrix());u=this.decoder.decodeBitMatrix(I,l),g=co.NO_POINTS}else{const I=new iu(o.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(I.getBits(),l),g=I.getPoints()}u.getOther()instanceof Wx&&u.getOther().applyMirroredCorrection(g);const y=new se(u.getText(),u.getRawBytes(),void 0,g,X.QR_CODE,void 0),b=u.getByteSegments();b!==null&&y.putMetadata(ue.BYTE_SEGMENTS,b);const T=u.getECLevel();return T!==null&&y.putMetadata(ue.ERROR_CORRECTION_LEVEL,T),u.hasStructuredAppend()&&(y.putMetadata(ue.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),y.putMetadata(ue.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),y}reset(){}static extractPureBits(o){const l=o.getTopLeftOnBit(),u=o.getBottomRightOnBit();if(l===null||u===null)throw new $;const g=this.moduleSize(l,o);let y=l[1],b=u[1],T=l[0],I=u[0];if(T>=I||y>=b)throw new $;if(b-y!==I-T&&(I=T+(b-y),I>=o.getWidth()))throw new $;const P=Math.round((I-T+1)/g),U=Math.round((b-y+1)/g);if(P<=0||U<=0)throw new $;if(U!==P)throw new $;const W=Math.floor(g/2);y+=W,T+=W;const Q=T+Math.floor((P-1)*g)-I;if(Q>0){if(Q>W)throw new $;T-=Q}const ie=y+Math.floor((U-1)*g)-b;if(ie>0){if(ie>W)throw new $;y-=ie}const le=new z(P,U);for(let ce=0;ce<U;ce++){const pe=y+Math.floor(ce*g);for(let xe=0;xe<P;xe++)o.get(T+Math.floor(xe*g),pe)&&le.set(xe,ce)}return le}static moduleSize(o,l){const u=l.getHeight(),g=l.getWidth();let y=o[0],b=o[1],T=!0,I=0;for(;y<g&&b<u;){if(T!==l.get(y,b)){if(++I===5)break;T=!T}y++,b++}if(y===g||b===u)throw new $;return(y-o[0])/7}}co.NO_POINTS=new Array;class et{PDF417Common(){}static getBitCountSum(o){return de.sum(o)}static toIntArray(o){if(o==null||!o.length)return et.EMPTY_INT_ARRAY;const l=new Int32Array(o.length);let u=0;for(const g of o)l[u++]=g;return l}static getCodeword(o){const l=_.binarySearch(et.SYMBOL_TABLE,o&262143);return l<0?-1:(et.CODEWORD_TABLE[l]-1)%et.NUMBER_OF_CODEWORDS}}et.NUMBER_OF_CODEWORDS=929,et.MAX_CODEWORDS_IN_BARCODE=et.NUMBER_OF_CODEWORDS-1,et.MIN_ROWS_IN_BARCODE=3,et.MAX_ROWS_IN_BARCODE=90,et.MODULES_IN_CODEWORD=17,et.MODULES_IN_STOP_PATTERN=18,et.BARS_IN_MODULE=8,et.EMPTY_INT_ARRAY=new Int32Array([]),et.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),et.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class DR{constructor(o,l){this.bits=o,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class dt{static detectMultiple(o,l,u){let g=o.getBlackMatrix(),y=dt.detect(u,g);return y.length||(g=g.clone(),g.rotate180(),y=dt.detect(u,g)),new DR(g,y)}static detect(o,l){const u=new Array;let g=0,y=0,b=!1;for(;g<l.getHeight();){const T=dt.findVertices(l,g,y);if(T[0]==null&&T[3]==null){if(!b)break;b=!1,y=0;for(const I of u)I[1]!=null&&(g=Math.trunc(Math.max(g,I[1].getY()))),I[3]!=null&&(g=Math.max(g,Math.trunc(I[3].getY())));g+=dt.ROW_STEP;continue}if(b=!0,u.push(T),!o)break;T[2]!=null?(y=Math.trunc(T[2].getX()),g=Math.trunc(T[2].getY())):(y=Math.trunc(T[4].getX()),g=Math.trunc(T[4].getY()))}return u}static findVertices(o,l,u){const g=o.getHeight(),y=o.getWidth(),b=new Array(8);return dt.copyToResult(b,dt.findRowsWithPattern(o,g,y,l,u,dt.START_PATTERN),dt.INDEXES_START_PATTERN),b[4]!=null&&(u=Math.trunc(b[4].getX()),l=Math.trunc(b[4].getY())),dt.copyToResult(b,dt.findRowsWithPattern(o,g,y,l,u,dt.STOP_PATTERN),dt.INDEXES_STOP_PATTERN),b}static copyToResult(o,l,u){for(let g=0;g<u.length;g++)o[u[g]]=l[g]}static findRowsWithPattern(o,l,u,g,y,b){const T=new Array(4);let I=!1;const P=new Int32Array(b.length);for(;g<l;g+=dt.ROW_STEP){let W=dt.findGuardPattern(o,y,g,u,!1,b,P);if(W!=null){for(;g>0;){const Q=dt.findGuardPattern(o,y,--g,u,!1,b,P);if(Q!=null)W=Q;else{g++;break}}T[0]=new ge(W[0],g),T[1]=new ge(W[1],g),I=!0;break}}let U=g+1;if(I){let W=0,Q=Int32Array.from([Math.trunc(T[0].getX()),Math.trunc(T[1].getX())]);for(;U<l;U++){const ie=dt.findGuardPattern(o,Q[0],U,u,!1,b,P);if(ie!=null&&Math.abs(Q[0]-ie[0])<dt.MAX_PATTERN_DRIFT&&Math.abs(Q[1]-ie[1])<dt.MAX_PATTERN_DRIFT)Q=ie,W=0;else{if(W>dt.SKIPPED_ROW_COUNT_MAX)break;W++}}U-=W+1,T[2]=new ge(Q[0],U),T[3]=new ge(Q[1],U)}return U-g<dt.BARCODE_MIN_HEIGHT&&_.fill(T,null),T}static findGuardPattern(o,l,u,g,y,b,T){_.fillWithin(T,0,T.length,0);let I=l,P=0;for(;o.get(I,u)&&I>0&&P++<dt.MAX_PIXEL_DRIFT;)I--;let U=I,W=0,Q=b.length;for(let ie=y;U<g;U++)if(o.get(U,u)!==ie)T[W]++;else{if(W===Q-1){if(dt.patternMatchVariance(T,b,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE)return new Int32Array([I,U]);I+=T[0]+T[1],w.arraycopy(T,2,T,0,W-1),T[W-1]=0,T[W]=0,W--}else W++;T[W]=1,ie=!ie}return W===Q-1&&dt.patternMatchVariance(T,b,dt.MAX_INDIVIDUAL_VARIANCE)<dt.MAX_AVG_VARIANCE?new Int32Array([I,U-1]):null}static patternMatchVariance(o,l,u){let g=o.length,y=0,b=0;for(let P=0;P<g;P++)y+=o[P],b+=l[P];if(y<b)return 1/0;let T=y/b;u*=T;let I=0;for(let P=0;P<g;P++){let U=o[P],W=l[P]*T,Q=U>W?U-W:W-U;if(Q>u)return 1/0;I+=Q}return I/y}}dt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),dt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),dt.MAX_AVG_VARIANCE=.42,dt.MAX_INDIVIDUAL_VARIANCE=.8,dt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),dt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),dt.MAX_PIXEL_DRIFT=3,dt.MAX_PATTERN_DRIFT=5,dt.SKIPPED_ROW_COUNT_MAX=25,dt.ROW_STEP=5,dt.BARCODE_MIN_HEIGHT=10;class Gr{constructor(o,l){if(l.length===0)throw new m;this.field=o;let u=l.length;if(u>1&&l[0]===0){let g=1;for(;g<u&&l[g]===0;)g++;g===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-g),w.arraycopy(l,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let g=0;for(let y of this.coefficients)g=this.field.add(g,y);return g}let l=this.coefficients[0],u=this.coefficients.length;for(let g=1;g<u;g++)l=this.field.add(this.field.multiply(o,l),this.coefficients[g]);return l}add(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let l=this.coefficients,u=o.coefficients;if(l.length>u.length){let b=l;l=u,u=b}let g=new Int32Array(u.length),y=u.length-l.length;w.arraycopy(u,0,g,0,y);for(let b=y;b<u.length;b++)g[b]=this.field.add(l[b-y],u[b]);return new Gr(this.field,g)}subtract(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Gr?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new m("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Gr(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,g=o.coefficients,y=g.length,b=new Int32Array(u+y-1);for(let T=0;T<u;T++){let I=l[T];for(let P=0;P<y;P++)b[T+P]=this.field.add(b[T+P],this.field.multiply(I,g[P]))}return new Gr(this.field,b)}negative(){let o=this.coefficients.length,l=new Int32Array(o);for(let u=0;u<o;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Gr(this.field,l)}multiplyScalar(o){if(o===0)return new Gr(this.field,new Int32Array([0]));if(o===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let g=0;g<l;g++)u[g]=this.field.multiply(this.coefficients[g],o);return new Gr(this.field,u)}multiplyByMonomial(o,l){if(o<0)throw new m;if(l===0)return new Gr(this.field,new Int32Array([0]));let u=this.coefficients.length,g=new Int32Array(u+o);for(let y=0;y<u;y++)g[y]=this.field.multiply(this.coefficients[y],l);return new Gr(this.field,g)}toString(){let o=new H;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(o.append(" - "),u=-u):o.length()>0&&o.append(" + "),(l===0||u!==1)&&o.append(u),l!==0&&(l===1?o.append("x"):(o.append("x^"),o.append(l))))}return o.toString()}}class LR{add(o,l){return(o+l)%this.modulus}subtract(o,l){return(this.modulus+o-l)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new m;return this.logTable[o]}inverse(o){if(o===0)throw new Se;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,l){return o===0||l===0?0:this.expTable[(this.logTable[o]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class qp extends LR{constructor(o,l){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let u=1;for(let g=0;g<o;g++)this.expTable[g]=u,u=u*l%o;for(let g=0;g<o-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new Gr(this,new Int32Array([0])),this.one=new Gr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,l){if(o<0)throw new m;if(l===0)return this.zero;let u=new Int32Array(o+1);return u[0]=l,new Gr(this,u)}}qp.PDF417_GF=new qp(et.NUMBER_OF_CODEWORDS,3);class Gx{constructor(){this.field=qp.PDF417_GF}decode(o,l,u){let g=new Gr(this.field,o),y=new Int32Array(l),b=!1;for(let le=l;le>0;le--){let ce=g.evaluateAt(this.field.exp(le));y[l-le]=ce,ce!==0&&(b=!0)}if(!b)return 0;let T=this.field.getOne();if(u!=null)for(const le of u){let ce=this.field.exp(o.length-1-le),pe=new Gr(this.field,new Int32Array([this.field.subtract(0,ce),1]));T=T.multiply(pe)}let I=new Gr(this.field,y),P=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),I,l),U=P[0],W=P[1],Q=this.findErrorLocations(U),ie=this.findErrorMagnitudes(W,U,Q);for(let le=0;le<Q.length;le++){let ce=o.length-1-this.field.log(Q[le]);if(ce<0)throw x.getChecksumInstance();o[ce]=this.field.subtract(o[ce],ie[le])}return Q.length}runEuclideanAlgorithm(o,l,u){if(o.getDegree()<l.getDegree()){let Q=o;o=l,l=Q}let g=o,y=l,b=this.field.getZero(),T=this.field.getOne();for(;y.getDegree()>=Math.round(u/2);){let Q=g,ie=b;if(g=y,b=T,g.isZero())throw x.getChecksumInstance();y=Q;let le=this.field.getZero(),ce=g.getCoefficient(g.getDegree()),pe=this.field.inverse(ce);for(;y.getDegree()>=g.getDegree()&&!y.isZero();){let xe=y.getDegree()-g.getDegree(),Re=this.field.multiply(y.getCoefficient(y.getDegree()),pe);le=le.add(this.field.buildMonomial(xe,Re)),y=y.subtract(g.multiplyByMonomial(xe,Re))}T=le.multiply(b).subtract(ie).negative()}let I=T.getCoefficient(0);if(I===0)throw x.getChecksumInstance();let P=this.field.inverse(I),U=T.multiply(P),W=y.multiply(P);return[U,W]}findErrorLocations(o){let l=o.getDegree(),u=new Int32Array(l),g=0;for(let y=1;y<this.field.getSize()&&g<l;y++)o.evaluateAt(y)===0&&(u[g]=this.field.inverse(y),g++);if(g!==l)throw x.getChecksumInstance();return u}findErrorMagnitudes(o,l,u){let g=l.getDegree(),y=new Int32Array(g);for(let P=1;P<=g;P++)y[g-P]=this.field.multiply(P,l.getCoefficient(P));let b=new Gr(this.field,y),T=u.length,I=new Int32Array(T);for(let P=0;P<T;P++){let U=this.field.inverse(u[P]),W=this.field.subtract(0,o.evaluateAt(U)),Q=this.field.inverse(b.evaluateAt(U));I[P]=this.field.multiply(W,Q)}return I}}class pa{constructor(o,l,u,g,y){o instanceof pa?this.constructor_2(o):this.constructor_1(o,l,u,g,y)}constructor_1(o,l,u,g,y){const b=l==null||u==null,T=g==null||y==null;if(b&&T)throw new $;b?(l=new ge(0,g.getY()),u=new ge(0,y.getY())):T&&(g=new ge(o.getWidth()-1,l.getY()),y=new ge(o.getWidth()-1,u.getY())),this.image=o,this.topLeft=l,this.bottomLeft=u,this.topRight=g,this.bottomRight=y,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(g.getX(),y.getX())),this.minY=Math.trunc(Math.min(l.getY(),g.getY())),this.maxY=Math.trunc(Math.max(u.getY(),y.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,l){return o==null?l:l==null?o:new pa(o.image,o.topLeft,o.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(o,l,u){let g=this.topLeft,y=this.bottomLeft,b=this.topRight,T=this.bottomRight;if(o>0){let I=u?this.topLeft:this.topRight,P=Math.trunc(I.getY()-o);P<0&&(P=0);let U=new ge(I.getX(),P);u?g=U:b=U}if(l>0){let I=u?this.bottomLeft:this.bottomRight,P=Math.trunc(I.getY()+l);P>=this.image.getHeight()&&(P=this.image.getHeight()-1);let U=new ge(I.getX(),P);u?y=U:T=U}return new pa(this.image,g,y,b,T)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class BR{constructor(o,l,u,g){this.columnCount=o,this.errorCorrectionLevel=g,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class su{constructor(){this.buffer=""}static form(o,l){let u=-1;function g(b,T,I,P,U,W){if(b==="%%")return"%";if(l[++u]===void 0)return;b=P?parseInt(P.substr(1)):void 0;let Q=U?parseInt(U.substr(1)):void 0,ie;switch(W){case"s":ie=l[u];break;case"c":ie=l[u][0];break;case"f":ie=parseFloat(l[u]).toFixed(b);break;case"p":ie=parseFloat(l[u]).toPrecision(b);break;case"e":ie=parseFloat(l[u]).toExponential(b);break;case"x":ie=parseInt(l[u]).toString(Q||16);break;case"d":ie=parseFloat(parseInt(l[u],Q||10).toPrecision(b)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Q);let le=parseInt(I),ce=I&&I[0]+""=="0"?"0":" ";for(;ie.length<le;)ie=T!==void 0?ie+ce:ce+ie;return ie}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(y,g)}format(o,...l){this.buffer+=su.form(o,l)}toString(){return this.buffer}}class ou{constructor(o){this.boundingBox=new pa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let l=this.getCodeword(o);if(l!=null)return l;for(let u=1;u<ou.MAX_NEARBY_DISTANCE;u++){let g=this.imageRowToCodewordIndex(o)-u;if(g>=0&&(l=this.codewords[g],l!=null)||(g=this.imageRowToCodewordIndex(o)+u,g<this.codewords.length&&(l=this.codewords[g],l!=null)))return l}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,l){this.codewords[this.imageRowToCodewordIndex(o)]=l}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new su;let l=0;for(const u of this.codewords){if(u==null){o.format("%3d:    |   %n",l++);continue}o.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return o.toString()}}ou.MAX_NEARBY_DISTANCE=5;class au{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let l=this.values.get(o);l==null&&(l=0),l++,this.values.set(o,l)}getValue(){let o=-1,l=new Array;for(const[u,g]of this.values.entries()){const y={getKey:()=>u,getValue:()=>g};y.getValue()>o?(o=y.getValue(),l=[],l.push(y.getKey())):y.getValue()===o&&l.push(y.getKey())}return et.toIntArray(l)}getConfidence(o){return this.values.get(o)}}class Yx extends ou{constructor(o,l){super(o),this._isLeft=l}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,o);let u=this.getBoundingBox(),g=this._isLeft?u.getTopLeft():u.getTopRight(),y=this._isLeft?u.getBottomLeft():u.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),T=this.imageRowToCodewordIndex(Math.trunc(y.getY())),I=-1,P=1,U=0;for(let W=b;W<T;W++){if(l[W]==null)continue;let Q=l[W],ie=Q.getRowNumber()-I;if(ie===0)U++;else if(ie===1)P=Math.max(P,U),U=1,I=Q.getRowNumber();else if(ie<0||Q.getRowNumber()>=o.getRowCount()||ie>W)l[W]=null;else{let le;P>2?le=(P-2)*ie:le=ie;let ce=le>=W;for(let pe=1;pe<=le&&!ce;pe++)ce=l[W-pe]!=null;ce?l[W]=null:(I=Q.getRowNumber(),U=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let l=new Int32Array(o.getRowCount());for(let u of this.getCodewords())if(u!=null){let g=u.getRowNumber();if(g>=l.length)continue;l[g]++}return l}adjustIncompleteIndicatorColumnRowNumbers(o){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),g=this._isLeft?l.getBottomLeft():l.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),T=this.getCodewords(),I=-1;for(let P=y;P<b;P++){if(T[P]==null)continue;let U=T[P];U.setRowNumberAsRowIndicatorColumn();let W=U.getRowNumber()-I;W===0||(W===1?I=U.getRowNumber():U.getRowNumber()>=o.getRowCount()?T[P]=null:I=U.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),l=new au,u=new au,g=new au,y=new au;for(let T of o){if(T==null)continue;T.setRowNumberAsRowIndicatorColumn();let I=T.getValue()%30,P=T.getRowNumber();switch(this._isLeft||(P+=2),P%3){case 0:u.setValue(I*3+1);break;case 1:y.setValue(I/3),g.setValue(I%3);break;case 2:l.setValue(I+1);break}}if(l.getValue().length===0||u.getValue().length===0||g.getValue().length===0||y.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+g.getValue()[0]<et.MIN_ROWS_IN_BARCODE||u.getValue()[0]+g.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;let b=new BR(l.getValue()[0],u.getValue()[0],g.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(o,b),b}removeIncorrectCodewords(o,l){for(let u=0;u<o.length;u++){let g=o[u];if(o[u]==null)continue;let y=g.getValue()%30,b=g.getRowNumber();if(b>l.getRowCount()){o[u]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:y*3+1!==l.getRowCountUpperPart()&&(o[u]=null);break;case 1:(Math.trunc(y/3)!==l.getErrorCorrectionLevel()||y%3!==l.getRowCountLowerPart())&&(o[u]=null);break;case 2:y+1!==l.getColumnCount()&&(o[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class lu{constructor(o,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=et.MAX_CODEWORDS_IN_BARCODE,l;do l=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let g=0;g<u.length;g++)u[g]!=null&&(u[g].hasValidRowNumber()||this.adjustRowNumbers(l,g,u))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<o.length;u++)if(o[u]!=null&&l[u]!=null&&o[u].getRowNumber()===l[u].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let y=this.detectionResultColumns[g].getCodewords()[u];y!=null&&(y.setRowNumber(o[u].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let g=l[u].getRowNumber(),y=0;for(let b=this.barcodeColumnCount+1;b>0&&y<this.ADJUST_ROW_NUMBER_SKIP;b--){let T=this.detectionResultColumns[b].getCodewords()[u];T!=null&&(y=lu.adjustRowNumberIfValid(g,y,T),T.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let g=l[u].getRowNumber(),y=0;for(let b=1;b<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;b++){let T=this.detectionResultColumns[b].getCodewords()[u];T!=null&&(y=lu.adjustRowNumberIfValid(g,y,T),T.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(o)?(u.setRowNumber(o),l=0):++l),l}adjustRowNumbers(o,l,u){if(!this.detectionResultColumns[o-1])return;let g=u[l],y=this.detectionResultColumns[o-1].getCodewords(),b=y;this.detectionResultColumns[o+1]!=null&&(b=this.detectionResultColumns[o+1].getCodewords());let T=new Array(14);T[2]=y[l],T[3]=b[l],l>0&&(T[0]=u[l-1],T[4]=y[l-1],T[5]=b[l-1]),l>1&&(T[8]=u[l-2],T[10]=y[l-2],T[11]=b[l-2]),l<u.length-1&&(T[1]=u[l+1],T[6]=y[l+1],T[7]=b[l+1]),l<u.length-2&&(T[9]=u[l+2],T[12]=y[l+2],T[13]=b[l+2]);for(let I of T)if(lu.adjustRowNumber(g,I))return}static adjustRowNumber(o,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===o.getBucket()?(o.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,l){this.detectionResultColumns[o]=l}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new su;for(let u=0;u<o.getCodewords().length;u++){l.format("CW %3d:",u);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){l.format("    |   ");continue}let y=this.detectionResultColumns[g].getCodewords()[u];if(y==null){l.format("    |   ");continue}l.format(" %3d|%3d",y.getRowNumber(),y.getValue())}l.format("%n")}return l.toString()}}class cu{constructor(o,l,u,g){this.rowNumber=cu.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==cu.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}cu.BARCODE_ROW_UNKNOWN=-1;class Nn{static initialize(){for(let o=0;o<et.SYMBOL_TABLE.length;o++){let l=et.SYMBOL_TABLE[o],u=l&1;for(let g=0;g<et.BARS_IN_MODULE;g++){let y=0;for(;(l&1)===u;)y+=1,l>>=1;u=l&1,Nn.RATIOS_TABLE[o]||(Nn.RATIOS_TABLE[o]=new Array(et.BARS_IN_MODULE)),Nn.RATIOS_TABLE[o][et.BARS_IN_MODULE-g-1]=Math.fround(y/et.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let l=Nn.getDecodedCodewordValue(Nn.sampleBitCounts(o));return l!==-1?l:Nn.getClosestDecodedValue(o)}static sampleBitCounts(o){let l=de.sum(o),u=new Int32Array(et.BARS_IN_MODULE),g=0,y=0;for(let b=0;b<et.MODULES_IN_CODEWORD;b++){let T=l/(2*et.MODULES_IN_CODEWORD)+b*l/et.MODULES_IN_CODEWORD;y+o[g]<=T&&(y+=o[g],g++),u[g]++}return u}static getDecodedCodewordValue(o){let l=Nn.getBitValue(o);return et.getCodeword(l)===-1?-1:l}static getBitValue(o){let l=0;for(let u=0;u<o.length;u++)for(let g=0;g<o[u];g++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(o){let l=de.sum(o),u=new Array(et.BARS_IN_MODULE);if(l>1)for(let b=0;b<u.length;b++)u[b]=Math.fround(o[b]/l);let g=Ne.MAX_VALUE,y=-1;this.bSymbolTableReady||Nn.initialize();for(let b=0;b<Nn.RATIOS_TABLE.length;b++){let T=0,I=Nn.RATIOS_TABLE[b];for(let P=0;P<et.BARS_IN_MODULE;P++){let U=Math.fround(I[P]-u[P]);if(T+=Math.fround(U*U),T>=g)break}T<g&&(g=T,y=et.SYMBOL_TABLE[b])}return y}}Nn.bSymbolTableReady=!1,Nn.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(q=>new Array(et.BARS_IN_MODULE));class Kx{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Xx{static parseLong(o,l=void 0){return parseInt(o,l)}}class Qx extends d{}Qx.kind="NullPointerException";class FR{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,l,u){if(o==null)throw new Qx;if(l<0||l>o.length||u<0||l+u>o.length||l+u<0)throw new A;if(u===0)return;for(let g=0;g<u;g++)this.write(o[l+g])}flush(){}close(){}}class UR extends d{}class zR extends FR{constructor(o=32){if(super(),this.count=0,o<0)throw new m("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let u=this.buf.length<<1;if(u-o<0&&(u=o),u<0){if(o<0)throw new UR;u=C.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,u)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,l,u){if(l<0||l>o.length||u<0||l+u-o.length>0)throw new A;this.ensureCapacity(this.count+u),w.arraycopy(o,l,this.buf,this.count,u),this.count+=u}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var jt;(function(q){q[q.ALPHA=0]="ALPHA",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.PUNCT=3]="PUNCT",q[q.ALPHA_SHIFT=4]="ALPHA_SHIFT",q[q.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(jt||(jt={}));function Zx(){if(typeof window<"u")return window.BigInt||null;if(typeof $r<"u")return $r.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let df;function uo(q){if(typeof df>"u"&&(df=Zx()),df===null)throw new Error("BigInt is not supported!");return df(q)}function $R(){let q=[];q[0]=uo(1);let o=uo(900);q[1]=o;for(let l=2;l<16;l++)q[l]=q[l-1]*o;return q}class ye{static decode(o,l){let u=new H(""),g=k.ISO8859_1;u.enableDecoding(g);let y=1,b=o[y++],T=new Kx;for(;y<o[0];){switch(b){case ye.TEXT_COMPACTION_MODE_LATCH:y=ye.textCompaction(o,y,u);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:y=ye.byteCompaction(b,o,g,y,u);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[y++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:y=ye.numericCompaction(o,y,u);break;case ye.ECI_CHARSET:k.getCharacterSetECIByValue(o[y++]);break;case ye.ECI_GENERAL_PURPOSE:y+=2;break;case ye.ECI_USER_DEFINED:y++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=ye.decodeMacroBlock(o,y,T);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new M;default:y--,y=ye.textCompaction(o,y,u);break}if(y<o.length)b=o[y++];else throw M.getFormatInstance()}if(u.length()===0)throw M.getFormatInstance();let I=new fe(null,u.toString(),null,l);return I.setOther(T),I}static decodeMacroBlock(o,l,u){if(l+ye.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw M.getFormatInstance();let g=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let T=0;T<ye.NUMBER_OF_SEQUENCE_CODEWORDS;T++,l++)g[T]=o[l];u.setSegmentIndex(C.parseInt(ye.decodeBase900toBase10(g,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new H;l=ye.textCompaction(o,l,y),u.setFileId(y.toString());let b=-1;for(o[l]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=l+1);l<o[0];)switch(o[l]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,o[l]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let T=new H;l=ye.textCompaction(o,l+1,T),u.setFileName(T.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let I=new H;l=ye.textCompaction(o,l+1,I),u.setSender(I.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let P=new H;l=ye.textCompaction(o,l+1,P),u.setAddressee(P.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let U=new H;l=ye.numericCompaction(o,l+1,U),u.setSegmentCount(C.parseInt(U.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let W=new H;l=ye.numericCompaction(o,l+1,W),u.setTimestamp(Xx.parseLong(W.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Q=new H;l=ye.numericCompaction(o,l+1,Q),u.setChecksum(C.parseInt(Q.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ie=new H;l=ye.numericCompaction(o,l+1,ie),u.setFileSize(Xx.parseLong(ie.toString()));break;default:throw M.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw M.getFormatInstance()}if(b!==-1){let T=l-b;u.isLastSegment()&&T--,u.setOptionalData(_.copyOfRange(o,b,b+T))}return l}static textCompaction(o,l,u){let g=new Int32Array((o[0]-l)*2),y=new Int32Array((o[0]-l)*2),b=0,T=!1;for(;l<o[0]&&!T;){let I=o[l++];if(I<ye.TEXT_COMPACTION_MODE_LATCH)g[b]=I/30,g[b+1]=I%30,b+=2;else switch(I){case ye.TEXT_COMPACTION_MODE_LATCH:g[b++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:l--,T=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[b]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,I=o[l++],y[b]=I,b++;break}}return ye.decodeTextCompaction(g,y,b,u),l}static decodeTextCompaction(o,l,u,g){let y=jt.ALPHA,b=jt.ALPHA,T=0;for(;T<u;){let I=o[T],P="";switch(y){case jt.ALPHA:if(I<26)P=String.fromCharCode(65+I);else switch(I){case 26:P=" ";break;case ye.LL:y=jt.LOWER;break;case ye.ML:y=jt.MIXED;break;case ye.PS:b=y,y=jt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[T]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break;case jt.LOWER:if(I<26)P=String.fromCharCode(97+I);else switch(I){case 26:P=" ";break;case ye.AS:b=y,y=jt.ALPHA_SHIFT;break;case ye.ML:y=jt.MIXED;break;case ye.PS:b=y,y=jt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[T]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break;case jt.MIXED:if(I<ye.PL)P=ye.MIXED_CHARS[I];else switch(I){case ye.PL:y=jt.PUNCT;break;case 26:P=" ";break;case ye.LL:y=jt.LOWER;break;case ye.AL:y=jt.ALPHA;break;case ye.PS:b=y,y=jt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[T]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break;case jt.PUNCT:if(I<ye.PAL)P=ye.PUNCT_CHARS[I];else switch(I){case ye.PAL:y=jt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[T]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break;case jt.ALPHA_SHIFT:if(y=b,I<26)P=String.fromCharCode(65+I);else switch(I){case 26:P=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break;case jt.PUNCT_SHIFT:if(y=b,I<ye.PAL)P=ye.PUNCT_CHARS[I];else switch(I){case ye.PAL:y=jt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(l[T]);break;case ye.TEXT_COMPACTION_MODE_LATCH:y=jt.ALPHA;break}break}P!==""&&g.append(P),T++}}static byteCompaction(o,l,u,g,y){let b=new zR,T=0,I=0,P=!1;switch(o){case ye.BYTE_COMPACTION_MODE_LATCH:let U=new Int32Array(6),W=l[g++];for(;g<l[0]&&!P;)switch(U[T++]=W,I=900*I+W,W=l[g++],W){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:g--,P=!0;break;default:if(T%5===0&&T>0){for(let Q=0;Q<6;++Q)b.write(Number(uo(I)>>uo(8*(5-Q))));I=0,T=0}break}g===l[0]&&W<ye.TEXT_COMPACTION_MODE_LATCH&&(U[T++]=W);for(let Q=0;Q<T;Q++)b.write(U[Q]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;g<l[0]&&!P;){let Q=l[g++];if(Q<ye.TEXT_COMPACTION_MODE_LATCH)T++,I=900*I+Q;else switch(Q){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:g--,P=!0;break}if(T%5===0&&T>0){for(let ie=0;ie<6;++ie)b.write(Number(uo(I)>>uo(8*(5-ie))));I=0,T=0}}break}return y.append(B.decode(b.toByteArray(),u)),g}static numericCompaction(o,l,u){let g=0,y=!1,b=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;l<o[0]&&!y;){let T=o[l++];if(l===o[0]&&(y=!0),T<ye.TEXT_COMPACTION_MODE_LATCH)b[g]=T,g++;else switch(T){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:l--,y=!0;break}(g%ye.MAX_NUMERIC_CODEWORDS===0||T===ye.NUMERIC_COMPACTION_MODE_LATCH||y)&&g>0&&(u.append(ye.decodeBase900toBase10(b,g)),g=0)}return l}static decodeBase900toBase10(o,l){let u=uo(0);for(let y=0;y<l;y++)u+=ye.EXP900[l-y-1]*uo(o[y]);let g=u.toString();if(g.charAt(0)!=="1")throw new M;return g.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Zx()?$R():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(o,l,u,g,y,b,T){let I=new pa(o,l,u,g,y),P=null,U=null,W;for(let le=!0;;le=!1){if(l!=null&&(P=ft.getRowIndicatorColumn(o,I,l,!0,b,T)),g!=null&&(U=ft.getRowIndicatorColumn(o,I,g,!1,b,T)),W=ft.merge(P,U),W==null)throw $.getNotFoundInstance();let ce=W.getBoundingBox();if(le&&ce!=null&&(ce.getMinY()<I.getMinY()||ce.getMaxY()>I.getMaxY()))I=ce;else break}W.setBoundingBox(I);let Q=W.getBarcodeColumnCount()+1;W.setDetectionResultColumn(0,P),W.setDetectionResultColumn(Q,U);let ie=P!=null;for(let le=1;le<=Q;le++){let ce=ie?le:Q-le;if(W.getDetectionResultColumn(ce)!==void 0)continue;let pe;ce===0||ce===Q?pe=new Yx(I,ce===0):pe=new ou(I),W.setDetectionResultColumn(ce,pe);let xe=-1,Re=xe;for(let je=I.getMinY();je<=I.getMaxY();je++){if(xe=ft.getStartColumn(W,ce,je,ie),xe<0||xe>I.getMaxX()){if(Re===-1)continue;xe=Re}let Oe=ft.detectCodeword(o,I.getMinX(),I.getMaxX(),ie,xe,je,b,T);Oe!=null&&(pe.setCodeword(je,Oe),Re=xe,b=Math.min(b,Oe.getWidth()),T=Math.max(T,Oe.getWidth()))}}return ft.createDecoderResult(W)}static merge(o,l){if(o==null&&l==null)return null;let u=ft.getBarcodeMetadata(o,l);if(u==null)return null;let g=pa.merge(ft.adjustBoundingBox(o),ft.adjustBoundingBox(l));return new lu(u,g)}static adjustBoundingBox(o){if(o==null)return null;let l=o.getRowHeights();if(l==null)return null;let u=ft.getMax(l),g=0;for(let T of l)if(g+=u-T,T>0)break;let y=o.getCodewords();for(let T=0;g>0&&y[T]==null;T++)g--;let b=0;for(let T=l.length-1;T>=0&&(b+=u-l[T],!(l[T]>0));T--);for(let T=y.length-1;b>0&&y[T]==null;T--)b--;return o.getBoundingBox().addMissingRows(g,b,o.isLeft())}static getMax(o){let l=-1;for(let u of o)l=Math.max(l,u);return l}static getBarcodeMetadata(o,l){let u;if(o==null||(u=o.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let g;return l==null||(g=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==g.getColumnCount()&&u.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&u.getRowCount()!==g.getRowCount()?null:u}static getRowIndicatorColumn(o,l,u,g,y,b){let T=new Yx(l,g);for(let I=0;I<2;I++){let P=I===0?1:-1,U=Math.trunc(Math.trunc(u.getX()));for(let W=Math.trunc(Math.trunc(u.getY()));W<=l.getMaxY()&&W>=l.getMinY();W+=P){let Q=ft.detectCodeword(o,0,o.getWidth(),g,U,W,y,b);Q!=null&&(T.setCodeword(W,Q),g?U=Q.getStartX():U=Q.getEndX())}}return T}static adjustCodewordCount(o,l){let u=l[0][1],g=u.getValue(),y=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-ft.getNumberOfECCodeWords(o.getBarcodeECLevel());if(g.length===0){if(y<1||y>et.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();u.setValue(y)}else g[0]!==y&&u.setValue(y)}static createDecoderResult(o){let l=ft.createBarcodeMatrix(o);ft.adjustCodewordCount(o,l);let u=new Array,g=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),y=[],b=new Array;for(let I=0;I<o.getBarcodeRowCount();I++)for(let P=0;P<o.getBarcodeColumnCount();P++){let U=l[I][P+1].getValue(),W=I*o.getBarcodeColumnCount()+P;U.length===0?u.push(W):U.length===1?g[W]=U[0]:(b.push(W),y.push(U))}let T=new Array(y.length);for(let I=0;I<T.length;I++)T[I]=y[I];return ft.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),g,et.toIntArray(u),et.toIntArray(b),T)}static createDecoderResultFromAmbiguousValues(o,l,u,g,y){let b=new Int32Array(g.length),T=100;for(;T-- >0;){for(let I=0;I<b.length;I++)l[g[I]]=y[I][b[I]];try{return ft.decodeCodewords(l,o,u)}catch(I){if(!(I instanceof x))throw I}if(b.length===0)throw x.getChecksumInstance();for(let I=0;I<b.length;I++)if(b[I]<y[I].length-1){b[I]++;break}else if(b[I]=0,I===b.length-1)throw x.getChecksumInstance()}throw x.getChecksumInstance()}static createBarcodeMatrix(o){let l=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let g=0;g<l.length;g++)for(let y=0;y<l[g].length;y++)l[g][y]=new au;let u=0;for(let g of o.getDetectionResultColumns()){if(g!=null){for(let y of g.getCodewords())if(y!=null){let b=y.getRowNumber();if(b>=0){if(b>=l.length)continue;l[b][u].setValue(y.getValue())}}}u++}return l}static isValidBarcodeColumn(o,l){return l>=0&&l<=o.getBarcodeColumnCount()+1}static getStartColumn(o,l,u,g){let y=g?1:-1,b=null;if(ft.isValidBarcodeColumn(o,l-y)&&(b=o.getDetectionResultColumn(l-y).getCodeword(u)),b!=null)return g?b.getEndX():b.getStartX();if(b=o.getDetectionResultColumn(l).getCodewordNearby(u),b!=null)return g?b.getStartX():b.getEndX();if(ft.isValidBarcodeColumn(o,l-y)&&(b=o.getDetectionResultColumn(l-y).getCodewordNearby(u)),b!=null)return g?b.getEndX():b.getStartX();let T=0;for(;ft.isValidBarcodeColumn(o,l-y);){l-=y;for(let I of o.getDetectionResultColumn(l).getCodewords())if(I!=null)return(g?I.getEndX():I.getStartX())+y*T*(I.getEndX()-I.getStartX());T++}return g?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,l,u,g,y,b,T,I){y=ft.adjustCodewordStartColumn(o,l,u,g,y,b);let P=ft.getModuleBitCount(o,l,u,g,y,b);if(P==null)return null;let U,W=de.sum(P);if(g)U=y+W;else{for(let le=0;le<P.length/2;le++){let ce=P[le];P[le]=P[P.length-1-le],P[P.length-1-le]=ce}U=y,y=U-W}if(!ft.checkCodewordSkew(W,T,I))return null;let Q=Nn.getDecodedValue(P),ie=et.getCodeword(Q);return ie===-1?null:new cu(y,U,ft.getCodewordBucketNumber(Q),ie)}static getModuleBitCount(o,l,u,g,y,b){let T=y,I=new Int32Array(8),P=0,U=g?1:-1,W=g;for(;(g?T<u:T>=l)&&P<I.length;)o.get(T,b)===W?(I[P]++,T+=U):(P++,W=!W);return P===I.length||T===(g?u:l)&&P===I.length-1?I:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,l,u,g,y,b){let T=y,I=g?-1:1;for(let P=0;P<2;P++){for(;(g?T>=l:T<u)&&g===o.get(T,b);){if(Math.abs(y-T)>ft.CODEWORD_SKEW_SIZE)return y;T+=I}I=-I,g=!g}return T}static checkCodewordSkew(o,l,u){return l-ft.CODEWORD_SKEW_SIZE<=o&&o<=u+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(o,l,u){if(o.length===0)throw M.getFormatInstance();let g=1<<l+1,y=ft.correctErrors(o,u,g);ft.verifyCodewordCount(o,g);let b=ye.decode(o,""+l);return b.setErrorsCorrected(y),b.setErasures(u.length),b}static correctErrors(o,l,u){if(l!=null&&l.length>u/2+ft.MAX_ERRORS||u<0||u>ft.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return ft.errorCorrection.decode(o,u,l)}static verifyCodewordCount(o,l){if(o.length<4)throw M.getFormatInstance();let u=o[0];if(u>o.length)throw M.getFormatInstance();if(u===0)if(l<o.length)o[0]=o.length-l;else throw M.getFormatInstance()}static getBitCountForCodeword(o){let l=new Int32Array(8),u=0,g=l.length-1;for(;!((o&1)!==u&&(u=o&1,g--,g<0));)l[g]++,o>>=1;return l}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let l=new su;for(let u=0;u<o.length;u++){l.format("Row %2d: ",u);for(let g=0;g<o[u].length;g++){let y=o[u][g];y.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}l.format("%n")}return l.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new Gx;class Yr{decode(o,l=null){let u=Yr.decode(o,l,!1);if(u==null||u.length===0||u[0]==null)throw $.getNotFoundInstance();return u[0]}decodeMultiple(o,l=null){try{return Yr.decode(o,l,!0)}catch(u){throw u instanceof M||u instanceof x?$.getNotFoundInstance():u}}static decode(o,l,u){const g=new Array,y=dt.detectMultiple(o,l,u);for(const b of y.getPoints()){const T=ft.decode(y.getBits(),b[4],b[5],b[6],b[7],Yr.getMinCodewordWidth(b),Yr.getMaxCodewordWidth(b)),I=new se(T.getText(),T.getRawBytes(),void 0,b,X.PDF_417);I.putMetadata(ue.ERROR_CORRECTION_LEVEL,T.getECLevel());const P=T.getOther();P!=null&&I.putMetadata(ue.PDF417_EXTRA_METADATA,P),g.push(I)}return g.map(b=>b)}static getMaxWidth(o,l){return o==null||l==null?0:Math.trunc(Math.abs(o.getX()-l.getX()))}static getMinWidth(o,l){return o==null||l==null?C.MAX_VALUE:Math.trunc(Math.abs(o.getX()-l.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Yr.getMaxWidth(o[0],o[4]),Yr.getMaxWidth(o[6],o[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(Yr.getMaxWidth(o[1],o[5]),Yr.getMaxWidth(o[7],o[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Yr.getMinWidth(o[0],o[4]),Yr.getMinWidth(o[6],o[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(Yr.getMinWidth(o[1],o[5]),Yr.getMinWidth(o[7],o[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}reset(){}}class ff extends d{}ff.kind="ReaderException";class Jx{constructor(o,l){this.verbose=o===!0,l&&this.setHints(l)}decode(o,l){return l&&this.setHints(l),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const l=!n(o)&&o.get(D.TRY_HARDER)===!0,u=n(o)?null:o.get(D.POSSIBLE_FORMATS),g=new Array;if(!n(u)){const y=u.some(b=>b===X.UPC_A||b===X.UPC_E||b===X.EAN_13||b===X.EAN_8||b===X.CODABAR||b===X.CODE_39||b===X.CODE_93||b===X.CODE_128||b===X.ITF||b===X.RSS_14||b===X.RSS_EXPANDED);y&&!l&&g.push(new ml(o,this.verbose)),u.includes(X.QR_CODE)&&g.push(new co),u.includes(X.DATA_MATRIX)&&g.push(new lo),u.includes(X.AZTEC)&&g.push(new fn),u.includes(X.PDF_417)&&g.push(new Yr),y&&l&&g.push(new ml(o,this.verbose))}g.length===0&&(l||g.push(new ml(o,this.verbose)),g.push(new co),g.push(new lo),g.push(new fn),g.push(new Yr),l&&g.push(new ml(o,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new ff("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(o,this.hints)}catch(u){if(u instanceof ff)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class HR extends Z{constructor(o=null,l=500){const u=new Jx;u.setHints(o),super(u,l)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class VR extends Z{constructor(o=500){super(new Yr,o)}}class qR extends Z{constructor(o=500){super(new co,o)}}var Wp;(function(q){q[q.ERROR_CORRECTION=0]="ERROR_CORRECTION",q[q.CHARACTER_SET=1]="CHARACTER_SET",q[q.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",q[q.MIN_SIZE=3]="MIN_SIZE",q[q.MAX_SIZE=4]="MAX_SIZE",q[q.MARGIN=5]="MARGIN",q[q.PDF417_COMPACT=6]="PDF417_COMPACT",q[q.PDF417_COMPACTION=7]="PDF417_COMPACTION",q[q.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",q[q.AZTEC_LAYERS=9]="AZTEC_LAYERS",q[q.QR_VERSION=10]="QR_VERSION"})(Wp||(Wp={}));var jr=Wp;class Gp{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new ve(o,Int32Array.from([1])))}buildGenerator(o){const l=this.cachedGenerators;if(o>=l.length){let u=l[l.length-1];const g=this.field;for(let y=l.length;y<=o;y++){const b=u.multiply(new ve(g,Int32Array.from([1,g.exp(y-1+g.getGeneratorBase())])));l.push(b),u=b}}return l[o]}encode(o,l){if(l===0)throw new m("No error correction bytes");const u=o.length-l;if(u<=0)throw new m("No data bytes provided");const g=this.buildGenerator(l),y=new Int32Array(u);w.arraycopy(o,0,y,0,u);let b=new ve(this.field,y);b=b.multiplyByMonomial(l,1);const I=b.divide(g)[1].getCoefficients(),P=l-I.length;for(let U=0;U<P;U++)o[u+U]=0;w.arraycopy(I,0,o,u+P,I.length)}}class cr{constructor(){}static applyMaskPenaltyRule1(o){return cr.applyMaskPenaltyRule1Internal(o,!0)+cr.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let l=0;const u=o.getArray(),g=o.getWidth(),y=o.getHeight();for(let b=0;b<y-1;b++){const T=u[b];for(let I=0;I<g-1;I++){const P=T[I];P===T[I+1]&&P===u[b+1][I]&&P===u[b+1][I+1]&&l++}}return cr.N2*l}static applyMaskPenaltyRule3(o){let l=0;const u=o.getArray(),g=o.getWidth(),y=o.getHeight();for(let b=0;b<y;b++)for(let T=0;T<g;T++){const I=u[b];T+6<g&&I[T]===1&&I[T+1]===0&&I[T+2]===1&&I[T+3]===1&&I[T+4]===1&&I[T+5]===0&&I[T+6]===1&&(cr.isWhiteHorizontal(I,T-4,T)||cr.isWhiteHorizontal(I,T+7,T+11))&&l++,b+6<y&&u[b][T]===1&&u[b+1][T]===0&&u[b+2][T]===1&&u[b+3][T]===1&&u[b+4][T]===1&&u[b+5][T]===0&&u[b+6][T]===1&&(cr.isWhiteVertical(u,T,b-4,b)||cr.isWhiteVertical(u,T,b+7,b+11))&&l++}return l*cr.N3}static isWhiteHorizontal(o,l,u){l=Math.max(l,0),u=Math.min(u,o.length);for(let g=l;g<u;g++)if(o[g]===1)return!1;return!0}static isWhiteVertical(o,l,u,g){u=Math.max(u,0),g=Math.min(g,o.length);for(let y=u;y<g;y++)if(o[y][l]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let l=0;const u=o.getArray(),g=o.getWidth(),y=o.getHeight();for(let I=0;I<y;I++){const P=u[I];for(let U=0;U<g;U++)P[U]===1&&l++}const b=o.getHeight()*o.getWidth();return Math.floor(Math.abs(l*2-b)*10/b)*cr.N4}static getDataMaskBit(o,l,u){let g,y;switch(o){case 0:g=u+l&1;break;case 1:g=u&1;break;case 2:g=l%3;break;case 3:g=(u+l)%3;break;case 4:g=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:y=u*l,g=(y&1)+y%3;break;case 6:y=u*l,g=(y&1)+y%3&1;break;case 7:y=u*l,g=y%3+(u+l&1)&1;break;default:throw new m("Invalid mask pattern: "+o)}return g===0}static applyMaskPenaltyRule1Internal(o,l){let u=0;const g=l?o.getHeight():o.getWidth(),y=l?o.getWidth():o.getHeight(),b=o.getArray();for(let T=0;T<g;T++){let I=0,P=-1;for(let U=0;U<y;U++){const W=l?b[T][U]:b[U][T];W===P?I++:(I>=5&&(u+=cr.N1+(I-5)),I=1,P=W)}I>=5&&(u+=cr.N1+(I-5))}return u}}cr.N1=3,cr.N2=3,cr.N3=40,cr.N4=10;class hf{constructor(o,l){this.width=o,this.height=l;const u=new Array(l);for(let g=0;g!==l;g++)u[g]=new Uint8Array(o);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(o,l){return this.bytes[l][o]}getArray(){return this.bytes}setNumber(o,l,u){this.bytes[l][o]=u}setBoolean(o,l,u){this.bytes[l][o]=u?1:0}clear(o){for(const l of this.bytes)_.fill(l,o)}equals(o){if(!(o instanceof hf))return!1;const l=o;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,g=this.height;u<g;++u){const y=this.bytes[u],b=l.bytes[u];for(let T=0,I=this.width;T<I;++T)if(y[T]!==b[T])return!1}return!0}toString(){const o=new H;for(let l=0,u=this.height;l<u;++l){const g=this.bytes[l];for(let y=0,b=this.width;y<b;++y)switch(g[y]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class ma{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new H;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<ma.NUM_MASK_PATTERNS}}ma.NUM_MASK_PATTERNS=8;class Mt extends d{}Mt.kind="WriterException";class Je{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,l,u,g,y){Je.clearMatrix(y),Je.embedBasicPatterns(u,y),Je.embedTypeInfo(l,g,y),Je.maybeEmbedVersionInfo(u,y),Je.embedDataBits(o,g,y)}static embedBasicPatterns(o,l){Je.embedPositionDetectionPatternsAndSeparators(l),Je.embedDarkDotAtLeftBottomCorner(l),Je.maybeEmbedPositionAdjustmentPatterns(o,l),Je.embedTimingPatterns(l)}static embedTypeInfo(o,l,u){const g=new S;Je.makeTypeInfoBits(o,l,g);for(let y=0,b=g.getSize();y<b;++y){const T=g.get(g.getSize()-1-y),I=Je.TYPE_INFO_COORDINATES[y],P=I[0],U=I[1];if(u.setBoolean(P,U,T),y<8){const W=u.getWidth()-y-1;u.setBoolean(W,8,T)}else{const Q=u.getHeight()-7+(y-8);u.setBoolean(8,Q,T)}}}static maybeEmbedVersionInfo(o,l){if(o.getVersionNumber()<7)return;const u=new S;Je.makeVersionInfoBits(o,u);let g=6*3-1;for(let y=0;y<6;++y)for(let b=0;b<3;++b){const T=u.get(g);g--,l.setBoolean(y,l.getHeight()-11+b,T),l.setBoolean(l.getHeight()-11+b,y,T)}}static embedDataBits(o,l,u){let g=0,y=-1,b=u.getWidth()-1,T=u.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);T>=0&&T<u.getHeight();){for(let I=0;I<2;++I){const P=b-I;if(!Je.isEmpty(u.get(P,T)))continue;let U;g<o.getSize()?(U=o.get(g),++g):U=!1,l!==255&&cr.getDataMaskBit(l,P,T)&&(U=!U),u.setBoolean(P,T,U)}T+=y}y=-y,T+=y,b-=2}if(g!==o.getSize())throw new Mt("Not all bits consumed: "+g+"/"+o.getSize())}static findMSBSet(o){return 32-C.numberOfLeadingZeros(o)}static calculateBCHCode(o,l){if(l===0)throw new m("0 polynomial");const u=Je.findMSBSet(l);for(o<<=u-1;Je.findMSBSet(o)>=u;)o^=l<<Je.findMSBSet(o)-u;return o}static makeTypeInfoBits(o,l,u){if(!ma.isValidMaskPattern(l))throw new Mt("Invalid mask pattern");const g=o.getBits()<<3|l;u.appendBits(g,5);const y=Je.calculateBCHCode(g,Je.TYPE_INFO_POLY);u.appendBits(y,10);const b=new S;if(b.appendBits(Je.TYPE_INFO_MASK_PATTERN,15),u.xor(b),u.getSize()!==15)throw new Mt("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(o,l){l.appendBits(o.getVersionNumber(),6);const u=Je.calculateBCHCode(o.getVersionNumber(),Je.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new Mt("should not happen but we got: "+l.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let l=8;l<o.getWidth()-8;++l){const u=(l+1)%2;Je.isEmpty(o.get(l,6))&&o.setNumber(l,6,u),Je.isEmpty(o.get(6,l))&&o.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Mt;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,l,u){for(let g=0;g<8;++g){if(!Je.isEmpty(u.get(o+g,l)))throw new Mt;u.setNumber(o+g,l,0)}}static embedVerticalSeparationPattern(o,l,u){for(let g=0;g<7;++g){if(!Je.isEmpty(u.get(o,l+g)))throw new Mt;u.setNumber(o,l+g,0)}}static embedPositionAdjustmentPattern(o,l,u){for(let g=0;g<5;++g){const y=Je.POSITION_ADJUSTMENT_PATTERN[g];for(let b=0;b<5;++b)u.setNumber(o+b,l+g,y[b])}}static embedPositionDetectionPattern(o,l,u){for(let g=0;g<7;++g){const y=Je.POSITION_DETECTION_PATTERN[g];for(let b=0;b<7;++b)u.setNumber(o+b,l+g,y[b])}}static embedPositionDetectionPatternsAndSeparators(o){const l=Je.POSITION_DETECTION_PATTERN[0].length;Je.embedPositionDetectionPattern(0,0,o),Je.embedPositionDetectionPattern(o.getWidth()-l,0,o),Je.embedPositionDetectionPattern(0,o.getWidth()-l,o);const u=8;Je.embedHorizontalSeparationPattern(0,u-1,o),Je.embedHorizontalSeparationPattern(o.getWidth()-u,u-1,o),Je.embedHorizontalSeparationPattern(0,o.getWidth()-u,o);const g=7;Je.embedVerticalSeparationPattern(g,0,o),Je.embedVerticalSeparationPattern(o.getHeight()-g-1,0,o),Je.embedVerticalSeparationPattern(g,o.getHeight()-g,o)}static maybeEmbedPositionAdjustmentPatterns(o,l){if(o.getVersionNumber()<2)return;const u=o.getVersionNumber()-1,g=Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let y=0,b=g.length;y!==b;y++){const T=g[y];if(T>=0)for(let I=0;I!==b;I++){const P=g[I];P>=0&&Je.isEmpty(l.get(P,T))&&Je.embedPositionAdjustmentPattern(P-2,T-2,l)}}}}Je.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Je.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Je.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Je.VERSION_INFO_POLY=7973,Je.TYPE_INFO_POLY=1335,Je.TYPE_INFO_MASK_PATTERN=21522;class WR{constructor(o,l){this.dataBytes=o,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class zt{constructor(){}static calculateMaskPenalty(o){return cr.applyMaskPenaltyRule1(o)+cr.applyMaskPenaltyRule2(o)+cr.applyMaskPenaltyRule3(o)+cr.applyMaskPenaltyRule4(o)}static encode(o,l,u=null){let g=zt.DEFAULT_BYTE_MODE_ENCODING;const y=u!==null&&u.get(jr.CHARACTER_SET)!==void 0;y&&(g=u.get(jr.CHARACTER_SET).toString());const b=this.chooseMode(o,g),T=new S;if(b===Ze.BYTE&&(y||zt.DEFAULT_BYTE_MODE_ENCODING!==g)){const je=k.getCharacterSetECIByName(g);je!==void 0&&this.appendECI(je,T)}this.appendModeInfo(b,T);const I=new S;this.appendBytes(o,b,I,g);let P;if(u!==null&&u.get(jr.QR_VERSION)!==void 0){const je=Number.parseInt(u.get(jr.QR_VERSION).toString(),10);P=Ye.getVersionForNumber(je);const Oe=this.calculateBitsNeeded(b,T,I,P);if(!this.willFit(Oe,P,l))throw new Mt("Data too big for requested version")}else P=this.recommendVersion(l,b,T,I);const U=new S;U.appendBitArray(T);const W=b===Ze.BYTE?I.getSizeInBytes():o.length;this.appendLengthInfo(W,P,b,U),U.appendBitArray(I);const Q=P.getECBlocksForLevel(l),ie=P.getTotalCodewords()-Q.getTotalECCodewords();this.terminateBits(ie,U);const le=this.interleaveWithECBytes(U,P.getTotalCodewords(),ie,Q.getNumBlocks()),ce=new ma;ce.setECLevel(l),ce.setMode(b),ce.setVersion(P);const pe=P.getDimensionForVersion(),xe=new hf(pe,pe),Re=this.chooseMaskPattern(le,l,P,xe);return ce.setMaskPattern(Re),Je.buildMatrix(le,l,P,Re,xe),ce.setMatrix(xe),ce}static recommendVersion(o,l,u,g){const y=this.calculateBitsNeeded(l,u,g,Ye.getVersionForNumber(1)),b=this.chooseVersion(y,o),T=this.calculateBitsNeeded(l,u,g,b);return this.chooseVersion(T,o)}static calculateBitsNeeded(o,l,u,g){return l.getSize()+o.getCharacterCountBits(g)+u.getSize()}static getAlphanumericCode(o){return o<zt.ALPHANUMERIC_TABLE.length?zt.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,l=null){if(k.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(o))return Ze.KANJI;let u=!1,g=!1;for(let y=0,b=o.length;y<b;++y){const T=o.charAt(y);if(zt.isDigit(T))u=!0;else if(this.getAlphanumericCode(T.charCodeAt(0))!==-1)g=!0;else return Ze.BYTE}return g?Ze.ALPHANUMERIC:u?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(o){let l;try{l=B.encode(o,k.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let g=0;g<u;g+=2){const y=l[g]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(o,l,u,g){let y=Number.MAX_SAFE_INTEGER,b=-1;for(let T=0;T<ma.NUM_MASK_PATTERNS;T++){Je.buildMatrix(o,l,u,T,g);let I=this.calculateMaskPenalty(g);I<y&&(y=I,b=T)}return b}static chooseVersion(o,l){for(let u=1;u<=40;u++){const g=Ye.getVersionForNumber(u);if(zt.willFit(o,g,l))return g}throw new Mt("Data too big")}static willFit(o,l,u){const g=l.getTotalCodewords(),b=l.getECBlocksForLevel(u).getTotalECCodewords(),T=g-b,I=(o+7)/8;return T>=I}static terminateBits(o,l){const u=o*8;if(l.getSize()>u)throw new Mt("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let b=0;b<4&&l.getSize()<u;++b)l.appendBit(!1);const g=l.getSize()&7;if(g>0)for(let b=g;b<8;b++)l.appendBit(!1);const y=o-l.getSizeInBytes();for(let b=0;b<y;++b)l.appendBits(b&1?17:236,8);if(l.getSize()!==u)throw new Mt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,l,u,g,y,b){if(g>=u)throw new Mt("Block ID too large");const T=o%u,I=u-T,P=Math.floor(o/u),U=P+1,W=Math.floor(l/u),Q=W+1,ie=P-W,le=U-Q;if(ie!==le)throw new Mt("EC bytes mismatch");if(u!==I+T)throw new Mt("RS blocks mismatch");if(o!==(W+ie)*I+(Q+le)*T)throw new Mt("Total bytes mismatch");g<I?(y[0]=W,b[0]=ie):(y[0]=Q,b[0]=le)}static interleaveWithECBytes(o,l,u,g){if(o.getSizeInBytes()!==u)throw new Mt("Number of bits and data bytes does not match");let y=0,b=0,T=0;const I=new Array;for(let U=0;U<g;++U){const W=new Int32Array(1),Q=new Int32Array(1);zt.getNumDataBytesAndNumECBytesForBlockID(l,u,g,U,W,Q);const ie=W[0],le=new Uint8Array(ie);o.toBytes(8*y,le,0,ie);const ce=zt.generateECBytes(le,Q[0]);I.push(new WR(le,ce)),b=Math.max(b,ie),T=Math.max(T,ce.length),y+=W[0]}if(u!==y)throw new Mt("Data bytes does not match offset");const P=new S;for(let U=0;U<b;++U)for(const W of I){const Q=W.getDataBytes();U<Q.length&&P.appendBits(Q[U],8)}for(let U=0;U<T;++U)for(const W of I){const Q=W.getErrorCorrectionBytes();U<Q.length&&P.appendBits(Q[U],8)}if(l!==P.getSizeInBytes())throw new Mt("Interleaving error: "+l+" and "+P.getSizeInBytes()+" differ.");return P}static generateECBytes(o,l){const u=o.length,g=new Int32Array(u+l);for(let b=0;b<u;b++)g[b]=o[b]&255;new Gp(Ce.QR_CODE_FIELD_256).encode(g,l);const y=new Uint8Array(l);for(let b=0;b<l;b++)y[b]=g[u+b];return y}static appendModeInfo(o,l){l.appendBits(o.getBits(),4)}static appendLengthInfo(o,l,u,g){const y=u.getCharacterCountBits(l);if(o>=1<<y)throw new Mt(o+" is bigger than "+((1<<y)-1));g.appendBits(o,y)}static appendBytes(o,l,u,g){switch(l){case Ze.NUMERIC:zt.appendNumericBytes(o,u);break;case Ze.ALPHANUMERIC:zt.appendAlphanumericBytes(o,u);break;case Ze.BYTE:zt.append8BitBytes(o,u,g);break;case Ze.KANJI:zt.appendKanjiBytes(o,u);break;default:throw new Mt("Invalid mode: "+l)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const l=zt.getDigit(o);return l>=0&&l<=9}static appendNumericBytes(o,l){const u=o.length;let g=0;for(;g<u;){const y=zt.getDigit(o.charAt(g));if(g+2<u){const b=zt.getDigit(o.charAt(g+1)),T=zt.getDigit(o.charAt(g+2));l.appendBits(y*100+b*10+T,10),g+=3}else if(g+1<u){const b=zt.getDigit(o.charAt(g+1));l.appendBits(y*10+b,7),g+=2}else l.appendBits(y,4),g++}}static appendAlphanumericBytes(o,l){const u=o.length;let g=0;for(;g<u;){const y=zt.getAlphanumericCode(o.charCodeAt(g));if(y===-1)throw new Mt;if(g+1<u){const b=zt.getAlphanumericCode(o.charCodeAt(g+1));if(b===-1)throw new Mt;l.appendBits(y*45+b,11),g+=2}else l.appendBits(y,6),g++}}static append8BitBytes(o,l,u){let g;try{g=B.encode(o,u)}catch(y){throw new Mt(y)}for(let y=0,b=g.length;y!==b;y++){const T=g[y];l.appendBits(T,8)}}static appendKanjiBytes(o,l){let u;try{u=B.encode(o,k.SJIS)}catch(y){throw new Mt(y)}const g=u.length;for(let y=0;y<g;y+=2){const b=u[y]&255,T=u[y+1]&255,I=b<<8&4294967295|T;let P=-1;if(I>=33088&&I<=40956?P=I-33088:I>=57408&&I<=60351&&(P=I-49472),P===-1)throw new Mt("Invalid byte sequence");const U=(P>>8)*192+(P&255);l.appendBits(U,13)}}static appendECI(o,l){l.appendBits(Ze.ECI.getBits(),4),l.appendBits(o.getValue(),8)}}zt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),zt.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class ga{write(o,l,u,g=null){if(o.length===0)throw new m("Found empty contents");if(l<0||u<0)throw new m("Requested dimensions are too small: "+l+"x"+u);let y=Bt.L,b=ga.QUIET_ZONE_SIZE;g!==null&&(g.get(jr.ERROR_CORRECTION)!==void 0&&(y=Bt.fromString(g.get(jr.ERROR_CORRECTION).toString())),g.get(jr.MARGIN)!==void 0&&(b=Number.parseInt(g.get(jr.MARGIN).toString(),10)));const T=zt.encode(o,y,g);return this.renderResult(T,l,u,b)}writeToDom(o,l,u,g,y=null){typeof o=="string"&&(o=document.querySelector(o));const b=this.write(l,u,g,y);o&&o.appendChild(b)}renderResult(o,l,u,g){const y=o.getMatrix();if(y===null)throw new Ge;const b=y.getWidth(),T=y.getHeight(),I=b+g*2,P=T+g*2,U=Math.max(l,I),W=Math.max(u,P),Q=Math.min(Math.floor(U/I),Math.floor(W/P)),ie=Math.floor((U-b*Q)/2),le=Math.floor((W-T*Q)/2),ce=this.createSVGElement(U,W);for(let pe=0,xe=le;pe<T;pe++,xe+=Q)for(let Re=0,je=ie;Re<b;Re++,je+=Q)if(y.get(Re,pe)===1){const Oe=this.createSvgRectElement(je,xe,Q,Q);ce.appendChild(Oe)}return ce}createSVGElement(o,l){const u=document.createElementNS(ga.SVG_NS,"svg");return u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(o,l,u,g){const y=document.createElementNS(ga.SVG_NS,"rect");return y.setAttributeNS(null,"x",o.toString()),y.setAttributeNS(null,"y",l.toString()),y.setAttributeNS(null,"height",u.toString()),y.setAttributeNS(null,"width",g.toString()),y.setAttributeNS(null,"fill","#000000"),y}}ga.QUIET_ZONE_SIZE=4,ga.SVG_NS="http://www.w3.org/2000/svg";class vl{encode(o,l,u,g,y){if(o.length===0)throw new m("Found empty contents");if(l!==X.QR_CODE)throw new m("Can only encode QR_CODE, but got "+l);if(u<0||g<0)throw new m(`Requested dimensions are too small: ${u}x${g}`);let b=Bt.L,T=vl.QUIET_ZONE_SIZE;y!==null&&(y.get(jr.ERROR_CORRECTION)!==void 0&&(b=Bt.fromString(y.get(jr.ERROR_CORRECTION).toString())),y.get(jr.MARGIN)!==void 0&&(T=Number.parseInt(y.get(jr.MARGIN).toString(),10)));const I=zt.encode(o,b,y);return vl.renderResult(I,u,g,T)}static renderResult(o,l,u,g){const y=o.getMatrix();if(y===null)throw new Ge;const b=y.getWidth(),T=y.getHeight(),I=b+g*2,P=T+g*2,U=Math.max(l,I),W=Math.max(u,P),Q=Math.min(Math.floor(U/I),Math.floor(W/P)),ie=Math.floor((U-b*Q)/2),le=Math.floor((W-T*Q)/2),ce=new z(U,W);for(let pe=0,xe=le;pe<T;pe++,xe+=Q)for(let Re=0,je=ie;Re<b;Re++,je+=Q)y.get(Re,pe)===1&&ce.setRegion(je,xe,Q,Q);return ce}}vl.QUIET_ZONE_SIZE=4;class GR{encode(o,l,u,g,y){let b;switch(l){case X.QR_CODE:b=new vl;break;default:throw new m("No encoder available for format "+l)}return b.encode(o,l,u,g,y)}}class ss extends te{constructor(o,l,u,g,y,b,T,I){if(super(b,T),this.yuvData=o,this.dataWidth=l,this.dataHeight=u,this.left=g,this.top=y,g+b>l||y+T>u)throw new m("Crop rectangle does not fit within image data.");I&&this.reverseHorizontal(b,T)}getRow(o,l){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const g=(o+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,g,l,0,u),l}getMatrix(){const o=this.getWidth(),l=this.getHeight();if(o===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=o*l,g=new Uint8ClampedArray(u);let y=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return w.arraycopy(this.yuvData,y,g,0,u),g;for(let b=0;b<l;b++){const T=b*o;w.arraycopy(this.yuvData,y,g,T,o),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(o,l,u,g){return new ss(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+l,u,g,!1)}renderThumbnail(){const o=this.getWidth()/ss.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/ss.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(o*l),g=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let b=0;b<l;b++){const T=b*o;for(let I=0;I<o;I++){const P=g[y+I*ss.THUMBNAIL_SCALE_FACTOR]&255;u[T+I]=4278190080|P*65793}y+=this.dataWidth*ss.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/ss.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ss.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,l){const u=this.yuvData;for(let g=0,y=this.top*this.dataWidth+this.left;g<l;g++,y+=this.dataWidth){const b=y+o/2;for(let T=y,I=y+o-1;T<b;T++,I--){const P=u[T];u[T]=u[I],u[I]=P}}}invert(){return new Y(this)}}ss.THUMBNAIL_SCALE_FACTOR=2;class Yp extends te{constructor(o,l,u,g,y,b,T){if(super(l,u),this.dataWidth=g,this.dataHeight=y,this.left=b,this.top=T,o.BYTES_PER_ELEMENT===4){const I=l*u,P=new Uint8ClampedArray(I);for(let U=0;U<I;U++){const W=o[U],Q=W>>16&255,ie=W>>7&510,le=W&255;P[U]=(Q+ie+le)/4&255}this.luminances=P}else this.luminances=o;if(g===void 0&&(this.dataWidth=l),y===void 0&&(this.dataHeight=u),b===void 0&&(this.left=0),T===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new m("Crop rectangle does not fit within image data.")}getRow(o,l){if(o<0||o>=this.getHeight())throw new m("Requested row is outside the image: "+o);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const g=(o+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,g,l,0,u),l}getMatrix(){const o=this.getWidth(),l=this.getHeight();if(o===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=o*l,g=new Uint8ClampedArray(u);let y=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return w.arraycopy(this.luminances,y,g,0,u),g;for(let b=0;b<l;b++){const T=b*o;w.arraycopy(this.luminances,y,g,T,o),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(o,l,u,g){return new Yp(this.luminances,u,g,this.dataWidth,this.dataHeight,this.left+o,this.top+l)}invert(){return new Y(this)}}class ew extends k{static forName(o){return this.getCharacterSetECIByName(o)}}class Kp{}Kp.ISO_8859_1=k.ISO8859_1;class tw{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class rw{static singletonList(o){return[o]}static min(o,l){return o.sort(l)[0]}}class YR{constructor(o){this.previous=o}getPrevious(){return this.previous}}class yl extends YR{constructor(o,l,u){super(o),this.value=l,this.bitCount=u}appendTo(o,l){o.appendBits(this.value,this.bitCount)}add(o,l){return new yl(this,o,l)}addBinaryShift(o,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new yl(this,o,l)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+C.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Xp extends yl{constructor(o,l,u){super(o,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(o,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):u===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(o,l){return new Xp(this,o,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function KR(q,o,l){return new Xp(q,o,l)}function uu(q,o,l){return new yl(q,o,l)}const XR=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fo=0,pf=1,hi=2,nw=3,os=4,QR=new yl(null,0,0),Qp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ZR(q){for(let o of q)_.fill(o,-1);return q[fo][os]=0,q[pf][os]=0,q[pf][fo]=28,q[nw][os]=0,q[hi][os]=0,q[hi][fo]=15,q}const iw=ZR(_.createInt32Array(6,6));class as{constructor(o,l,u,g){this.token=o,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,l){let u=this.bitCount,g=this.token;if(o!==this.mode){let b=Qp[this.mode][o];g=uu(g,b&65535,b>>16),u+=b>>16}let y=o===hi?4:5;return g=uu(g,l,y),new as(g,o,0,u+y)}shiftAndAppend(o,l){let u=this.token,g=this.mode===hi?4:5;return u=uu(u,iw[this.mode][o],g),u=uu(u,l,5),new as(u,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(o){let l=this.token,u=this.mode,g=this.bitCount;if(this.mode===os||this.mode===hi){let T=Qp[u][fo];l=uu(l,T&65535,T>>16),g+=T>>16,u=fo}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new as(l,u,this.binaryShiftByteCount+1,g+y);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(o+1)),b}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=KR(l,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new as(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let l=this.bitCount+(Qp[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?l+=as.calculateBinaryShiftCost(o)-as.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(l+=10),l<=o.bitCount}toBitArray(o){let l=[];for(let g=this.endBinaryShift(o.length).token;g!==null;g=g.getPrevious())l.unshift(g);let u=new S;for(const g of l)g.appendTo(u,o);return u}toString(){return F.format("%s bits=%d bytes=%d",XR[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}as.INITIAL_STATE=new as(QR,fo,0,0);function JR(q){const o=F.getCharCode(" "),l=F.getCharCode("."),u=F.getCharCode(",");q[fo][o]=1;const g=F.getCharCode("Z"),y=F.getCharCode("A");for(let Q=y;Q<=g;Q++)q[fo][Q]=Q-y+2;q[pf][o]=1;const b=F.getCharCode("z"),T=F.getCharCode("a");for(let Q=T;Q<=b;Q++)q[pf][Q]=Q-T+2;q[hi][o]=1;const I=F.getCharCode("9"),P=F.getCharCode("0");for(let Q=P;Q<=I;Q++)q[hi][Q]=Q-P+2;q[hi][u]=12,q[hi][l]=13;const U=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Q=0;Q<U.length;Q++)q[nw][F.getCharCode(U[Q])]=Q;const W=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Q=0;Q<W.length;Q++)F.getCharCode(W[Q])>0&&(q[os][F.getCharCode(W[Q])]=Q);return q}const Zp=JR(_.createInt32Array(5,256));class du{constructor(o){this.text=o}encode(){const o=F.getCharCode(" "),l=F.getCharCode(`
`);let u=rw.singletonList(as.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let b,T=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case F.getCharCode("\r"):b=T===l?2:0;break;case F.getCharCode("."):b=T===o?3:0;break;case F.getCharCode(","):b=T===o?4:0;break;case F.getCharCode(":"):b=T===o?5:0;break;default:b=0}b>0?(u=du.updateStateListForPair(u,y,b),y++):u=this.updateStateListForChar(u,y)}return rw.min(u,(y,b)=>y.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,l){const u=[];for(let g of o)this.updateStateForChar(g,l,u);return du.simplifyStates(u)}updateStateForChar(o,l,u){let g=this.text[l]&255,y=Zp[o.getMode()][g]>0,b=null;for(let T=0;T<=os;T++){let I=Zp[T][g];if(I>0){if(b==null&&(b=o.endBinaryShift(l)),!y||T===o.getMode()||T===hi){const P=b.latchAndAppend(T,I);u.push(P)}if(!y&&iw[o.getMode()][T]>=0){const P=b.shiftAndAppend(T,I);u.push(P)}}}if(o.getBinaryShiftByteCount()>0||Zp[o.getMode()][g]===0){let T=o.addBinaryShiftChar(l);u.push(T)}}static updateStateListForPair(o,l,u){const g=[];for(let y of o)this.updateStateForPair(y,l,u,g);return this.simplifyStates(g)}static updateStateForPair(o,l,u,g){let y=o.endBinaryShift(l);if(g.push(y.latchAndAppend(os,u)),o.getMode()!==os&&g.push(y.shiftAndAppend(os,u)),u===3||u===4){let b=y.latchAndAppend(hi,16-u).latchAndAppend(hi,1);g.push(b)}if(o.getBinaryShiftByteCount()>0){let b=o.addBinaryShiftChar(l).addBinaryShiftChar(l+1);g.push(b)}}static simplifyStates(o){let l=[];for(const u of o){let g=!0;for(const y of l){if(y.isBetterThanOrEqualTo(u)){g=!1;break}u.isBetterThanOrEqualTo(y)&&(l=l.filter(b=>b!==y))}g&&l.push(u)}return l}}class Et{constructor(){}static encodeBytes(o){return Et.encode(o,Et.DEFAULT_EC_PERCENT,Et.DEFAULT_AZTEC_LAYERS)}static encode(o,l,u){let g=new du(o).encode(),y=C.truncDivision(g.getSize()*l,100)+11,b=g.getSize()+y,T,I,P,U,W;if(u!==Et.DEFAULT_AZTEC_LAYERS){if(T=u<0,I=Math.abs(u),I>(T?Et.MAX_NB_BITS_COMPACT:Et.MAX_NB_BITS))throw new m(F.format("Illegal value %s for layers",u));P=Et.totalBitsInLayer(I,T),U=Et.WORD_SIZE[I];let Oe=P-P%U;if(W=Et.stuffBits(g,U),W.getSize()+y>Oe)throw new m("Data to large for user specified layer");if(T&&W.getSize()>U*64)throw new m("Data to large for user specified layer")}else{U=0,W=null;for(let Oe=0;;Oe++){if(Oe>Et.MAX_NB_BITS)throw new m("Data too large for an Aztec code");if(T=Oe<=3,I=T?Oe+1:Oe,P=Et.totalBitsInLayer(I,T),b>P)continue;(W==null||U!==Et.WORD_SIZE[I])&&(U=Et.WORD_SIZE[I],W=Et.stuffBits(g,U));let vt=P-P%U;if(!(T&&W.getSize()>U*64)&&W.getSize()+y<=vt)break}}let Q=Et.generateCheckWords(W,P,U),ie=W.getSize()/U,le=Et.generateModeMessage(T,I,ie),ce=(T?11:14)+I*4,pe=new Int32Array(ce),xe;if(T){xe=ce;for(let Oe=0;Oe<pe.length;Oe++)pe[Oe]=Oe}else{xe=ce+1+2*C.truncDivision(C.truncDivision(ce,2)-1,15);let Oe=C.truncDivision(ce,2),vt=C.truncDivision(xe,2);for(let st=0;st<Oe;st++){let Tn=st+C.truncDivision(st,15);pe[Oe-st-1]=vt-Tn-1,pe[Oe+st]=vt+Tn+1}}let Re=new z(xe);for(let Oe=0,vt=0;Oe<I;Oe++){let st=(I-Oe)*4+(T?9:12);for(let Tn=0;Tn<st;Tn++){let ki=Tn*2;for(let On=0;On<2;On++)Q.get(vt+ki+On)&&Re.set(pe[Oe*2+On],pe[Oe*2+Tn]),Q.get(vt+st*2+ki+On)&&Re.set(pe[Oe*2+Tn],pe[ce-1-Oe*2-On]),Q.get(vt+st*4+ki+On)&&Re.set(pe[ce-1-Oe*2-On],pe[ce-1-Oe*2-Tn]),Q.get(vt+st*6+ki+On)&&Re.set(pe[ce-1-Oe*2-Tn],pe[Oe*2+On])}vt+=st*8}if(Et.drawModeMessage(Re,T,xe,le),T)Et.drawBullsEye(Re,C.truncDivision(xe,2),5);else{Et.drawBullsEye(Re,C.truncDivision(xe,2),7);for(let Oe=0,vt=0;Oe<C.truncDivision(ce,2)-1;Oe+=15,vt+=16)for(let st=C.truncDivision(xe,2)&1;st<xe;st+=2)Re.set(C.truncDivision(xe,2)-vt,st),Re.set(C.truncDivision(xe,2)+vt,st),Re.set(st,C.truncDivision(xe,2)-vt),Re.set(st,C.truncDivision(xe,2)+vt)}let je=new tw;return je.setCompact(T),je.setSize(xe),je.setLayers(I),je.setCodeWords(ie),je.setMatrix(Re),je}static drawBullsEye(o,l,u){for(let g=0;g<u;g+=2)for(let y=l-g;y<=l+g;y++)o.set(y,l-g),o.set(y,l+g),o.set(l-g,y),o.set(l+g,y);o.set(l-u,l-u),o.set(l-u+1,l-u),o.set(l-u,l-u+1),o.set(l+u,l-u),o.set(l+u,l-u+1),o.set(l+u,l+u-1)}static generateModeMessage(o,l,u){let g=new S;return o?(g.appendBits(l-1,2),g.appendBits(u-1,6),g=Et.generateCheckWords(g,28,4)):(g.appendBits(l-1,5),g.appendBits(u-1,11),g=Et.generateCheckWords(g,40,4)),g}static drawModeMessage(o,l,u,g){let y=C.truncDivision(u,2);if(l)for(let b=0;b<7;b++){let T=y-3+b;g.get(b)&&o.set(T,y-5),g.get(b+7)&&o.set(y+5,T),g.get(20-b)&&o.set(T,y+5),g.get(27-b)&&o.set(y-5,T)}else for(let b=0;b<10;b++){let T=y-5+b+C.truncDivision(b,5);g.get(b)&&o.set(T,y-7),g.get(b+10)&&o.set(y+7,T),g.get(29-b)&&o.set(T,y+7),g.get(39-b)&&o.set(y-7,T)}}static generateCheckWords(o,l,u){let g=o.getSize()/u,y=new Gp(Et.getGF(u)),b=C.truncDivision(l,u),T=Et.bitsToWords(o,u,b);y.encode(T,b-g);let I=l%u,P=new S;P.appendBits(0,I);for(const U of Array.from(T))P.appendBits(U,u);return P}static bitsToWords(o,l,u){let g=new Int32Array(u),y,b;for(y=0,b=o.getSize()/l;y<b;y++){let T=0;for(let I=0;I<l;I++)T|=o.get(y*l+I)?1<<l-I-1:0;g[y]=T}return g}static getGF(o){switch(o){case 4:return Ce.AZTEC_PARAM;case 6:return Ce.AZTEC_DATA_6;case 8:return Ce.AZTEC_DATA_8;case 10:return Ce.AZTEC_DATA_10;case 12:return Ce.AZTEC_DATA_12;default:throw new m("Unsupported word size "+o)}}static stuffBits(o,l){let u=new S,g=o.getSize(),y=(1<<l)-2;for(let b=0;b<g;b+=l){let T=0;for(let I=0;I<l;I++)(b+I>=g||o.get(b+I))&&(T|=1<<l-1-I);(T&y)===y?(u.appendBits(T&y,l),b--):T&y?u.appendBits(T,l):(u.appendBits(T|1,l),b--)}return u}static totalBitsInLayer(o,l){return((l?88:112)+16*o)*o}}Et.DEFAULT_EC_PERCENT=33,Et.DEFAULT_AZTEC_LAYERS=0,Et.MAX_NB_BITS=32,Et.MAX_NB_BITS_COMPACT=4,Et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class mf{encode(o,l,u,g){return this.encodeWithHints(o,l,u,g,null)}encodeWithHints(o,l,u,g,y){let b=Kp.ISO_8859_1,T=Et.DEFAULT_EC_PERCENT,I=Et.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(jr.CHARACTER_SET)&&(b=ew.forName(y.get(jr.CHARACTER_SET).toString())),y.has(jr.ERROR_CORRECTION)&&(T=C.parseInt(y.get(jr.ERROR_CORRECTION).toString())),y.has(jr.AZTEC_LAYERS)&&(I=C.parseInt(y.get(jr.AZTEC_LAYERS).toString()))),mf.encodeLayers(o,l,u,g,b,T,I)}static encodeLayers(o,l,u,g,y,b,T){if(l!==X.AZTEC)throw new m("Can only encode AZTEC, but got "+l);let I=Et.encode(F.getBytes(o,y),b,T);return mf.renderResult(I,u,g)}static renderResult(o,l,u){let g=o.getMatrix();if(g==null)throw new Ge;let y=g.getWidth(),b=g.getHeight(),T=Math.max(l,y),I=Math.max(u,b),P=Math.min(T/y,I/b),U=(T-y*P)/2,W=(I-b*P)/2,Q=new z(T,I);for(let ie=0,le=W;ie<b;ie++,le+=P)for(let ce=0,pe=U;ce<y;ce++,pe+=P)g.get(ce,ie)&&Q.setRegion(pe,le,P,P);return Q}}r.AbstractExpandedDecoder=Lp,r.ArgumentException=p,r.ArithmeticException=Se,r.AztecCode=tw,r.AztecCodeReader=fn,r.AztecCodeWriter=mf,r.AztecDecoder=he,r.AztecDetector=kt,r.AztecDetectorResult=Le,r.AztecEncoder=Et,r.AztecHighLevelEncoder=du,r.AztecPoint=Or,r.BarcodeFormat=X,r.Binarizer=E,r.BinaryBitmap=v,r.BitArray=S,r.BitMatrix=z,r.BitSource=zp,r.BrowserAztecCodeReader=of,r.BrowserBarcodeReader=IR,r.BrowserCodeReader=Z,r.BrowserDatamatrixCodeReader=kR,r.BrowserMultiFormatReader=HR,r.BrowserPDF417Reader=VR,r.BrowserQRCodeReader=qR,r.BrowserQRCodeSvgWriter=ga,r.CharacterSetECI=k,r.ChecksumException=x,r.Code128Reader=Me,r.Code39Reader=ar,r.DataMatrixDecodedBitStreamParser=ao,r.DataMatrixReader=lo,r.DecodeHintType=D,r.DecoderResult=fe,r.DefaultGridSampler=Tr,r.DetectorResult=Ee,r.EAN13Reader=Ii,r.EncodeHintType=jr,r.Exception=d,r.FormatException=M,r.GenericGF=Ce,r.GenericGFPoly=ve,r.GlobalHistogramBinarizer=ee,r.GridSampler=rt,r.GridSamplerInstance=wt,r.HTMLCanvasElementLuminanceSource=K,r.HybridBinarizer=J,r.ITFReader=bt,r.IllegalArgumentException=m,r.IllegalStateException=Ge,r.InvertedLuminanceSource=Y,r.LuminanceSource=te,r.MathUtils=de,r.MultiFormatOneDReader=ml,r.MultiFormatReader=Jx,r.MultiFormatWriter=GR,r.NotFoundException=$,r.OneDReader=Gt,r.PDF417DecodedBitStreamParser=ye,r.PDF417DecoderErrorCorrection=Gx,r.PDF417Reader=Yr,r.PDF417ResultMetadata=Kx,r.PerspectiveTransform=ut,r.PlanarYUVLuminanceSource=ss,r.QRCodeByteMatrix=hf,r.QRCodeDataMask=di,r.QRCodeDecodedBitStreamParser=Jt,r.QRCodeDecoderErrorCorrectionLevel=Bt,r.QRCodeDecoderFormatInformation=tn,r.QRCodeEncoder=zt,r.QRCodeEncoderQRCode=ma,r.QRCodeMaskUtil=cr,r.QRCodeMatrixUtil=Je,r.QRCodeMode=Ze,r.QRCodeReader=co,r.QRCodeVersion=Ye,r.QRCodeWriter=vl,r.RGBLuminanceSource=Yp,r.RSS14Reader=lr,r.RSSExpandedReader=Ae,r.ReaderException=ff,r.ReedSolomonDecoder=ht,r.ReedSolomonEncoder=Gp,r.ReedSolomonException=Fe,r.Result=se,r.ResultMetadataType=ue,r.ResultPoint=ge,r.StringUtils=F,r.UnsupportedOperationException=L,r.VideoInputDevice=V,r.WhiteRectangleDetector=He,r.WriterException=Mt,r.ZXingArrays=_,r.ZXingCharset=ew,r.ZXingInteger=C,r.ZXingStandardCharsets=Kp,r.ZXingStringBuilder=H,r.ZXingStringEncoding=B,r.ZXingSystem=w,r.createAbstractExpandedDecoder=qx,Object.defineProperty(r,"__esModule",{value:!0})})})(av,av.exports);var Vt=av.exports;const c$=I0(Vt),u$=mv({__proto__:null,default:c$},[Vt]);var f_=function(){function t(e,r,n){if(this.formatMap=new Map([[ze.QR_CODE,Vt.BarcodeFormat.QR_CODE],[ze.AZTEC,Vt.BarcodeFormat.AZTEC],[ze.CODABAR,Vt.BarcodeFormat.CODABAR],[ze.CODE_39,Vt.BarcodeFormat.CODE_39],[ze.CODE_93,Vt.BarcodeFormat.CODE_93],[ze.CODE_128,Vt.BarcodeFormat.CODE_128],[ze.DATA_MATRIX,Vt.BarcodeFormat.DATA_MATRIX],[ze.MAXICODE,Vt.BarcodeFormat.MAXICODE],[ze.ITF,Vt.BarcodeFormat.ITF],[ze.EAN_13,Vt.BarcodeFormat.EAN_13],[ze.EAN_8,Vt.BarcodeFormat.EAN_8],[ze.PDF_417,Vt.BarcodeFormat.PDF_417],[ze.RSS_14,Vt.BarcodeFormat.RSS_14],[ze.RSS_EXPANDED,Vt.BarcodeFormat.RSS_EXPANDED],[ze.UPC_A,Vt.BarcodeFormat.UPC_A],[ze.UPC_E,Vt.BarcodeFormat.UPC_E],[ze.UPC_EAN_EXTENSION,Vt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!u$)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var i=this.createZXingFormats(e),s=new Map;s.set(Vt.DecodeHintType.POSSIBLE_FORMATS,i),s.set(Vt.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,i){try{n(r.decode(e))}catch(s){i(s)}})},t.prototype.decode=function(e){var r=new Vt.MultiFormatReader(this.verbose,this.hints),n=new Vt.HTMLCanvasElementLuminanceSource(e),i=new Vt.BinaryBitmap(new Vt.HybridBinarizer(n)),s=r.decode(i);return{text:s.text,format:J4.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),d$=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},f$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},h_=function(){function t(e,r,n){if(this.formatMap=new Map([[ze.QR_CODE,"qr_code"],[ze.AZTEC,"aztec"],[ze.CODABAR,"codabar"],[ze.CODE_39,"code_39"],[ze.CODE_93,"code_93"],[ze.CODE_128,"code_128"],[ze.DATA_MATRIX,"data_matrix"],[ze.ITF,"itf"],[ze.EAN_13,"ean_13"],[ze.EAN_8,"ean_8"],[ze.PDF_417,"pdf417"],[ze.UPC_A,"upc_a"],[ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return d$(this,void 0,void 0,function(){var r,n;return f$(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=i.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:J4.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,i=0,s=e;i<s.length;i++){var a=s[i],c=a.boundingBox.width*a.boundingBox.height;c>n&&(n=c,r=a)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var s=i[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,i){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),p_=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},m_=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},h$=function(){function t(e,r,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&h_.isSupported()?(this.primaryDecoder=new h_(e,n,i),this.secondaryDecoder=new f_(e,n,i)):this.primaryDecoder=new f_(e,n,i)}return t.prototype.decodeAsync=function(e){return p_(this,void 0,void 0,function(){var r;return m_(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return p_(this,void 0,void 0,function(){var r,n;return m_(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var i=n[r];e+=i}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),jx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_0=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},E0=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},nI=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),p$=function(t){jx(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(nI),m$=function(t){jx(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(p$),g$=function(t){jx(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(nI),v$=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new m$(this.track)},t.prototype.torchFeature=function(){return new g$(this.track)},t}(),y$=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,i){return _0(this,void 0,void 0,function(){var s,a;return E0(this,function(c){switch(c.label){case 0:return s=new t(e,r,i),n.aspectRatio?(a={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:c.sent(),c.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return _0(this,void 0,void 0,function(){return E0(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var i=e.mediaStream.getVideoTracks(),s=i.length,a=0;e.mediaStream.getVideoTracks().forEach(function(c){e.mediaStream.removeTrack(c),c.stop(),++a,a>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new v$(this.getFirstTrackOrFail())},t}(),x$=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return _0(this,void 0,void 0,function(){return E0(this,function(i){return[2,y$.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return _0(this,void 0,void 0,function(){var r,n;return E0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=i.sent(),[2,new t(n)]}})})},t}(),g_=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},v_=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},w$=function(){function t(){}return t.failIfNotSupported=function(){return g_(this,void 0,void 0,function(){return v_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return g_(this,void 0,void 0,function(){return v_(this,function(r){return[2,x$.create(e)]})})},t}(),b$=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},_$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},E$=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Kl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Kl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return b$(this,void 0,void 0,function(){var e,r,n,i,s,a,c;return _$(this,function(h){switch(h.label){case 0:return e=function(d){for(var p=d.getVideoTracks(),m=0,v=p;m<v.length;m++){var x=v[m];x.enabled=!1,x.stop(),d.removeTrack(x)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=h.sent(),i=[],s=0,a=n;s<a.length;s++)c=a[s],c.kind==="videoinput"&&i.push({id:c.deviceId,label:c.label});return e(r),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(s){for(var a=[],c=0,h=s;c<h.length;c++){var d=h[c];d.kind==="video"&&a.push({id:d.id,label:d.label})}e(a)},i=MediaStreamTrack;i.getSources(n)})},t}(),fr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(fr||(fr={}));var S$=function(){function t(){this.state=fr.NOT_STARTED,this.onGoingTransactionNewState=fr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===fr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=fr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===fr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=fr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==fr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case fr.UNKNOWN:throw"Transition from unknown is not allowed";case fr.NOT_STARTED:this.failIfNewStateIs(e,[fr.PAUSED]);break;case fr.SCANNING:break;case fr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),C$=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===fr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==fr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===fr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===fr.PAUSED},t}(),A$=function(){function t(){}return t.create=function(){return new C$(new S$)},t}(),N$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=function(t){N$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(qi),T$=function(){function t(e,r){this.logger=r,this.fps=$n.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=$n.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ds(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),y_=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new tI(this.verbose),this.qrcode=new h$(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=A$.create()}return t.prototype.start=function(e,r,n,i){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var a;i?a=i:a=this.verbose?this.logger.log:function(){};var c=T$.create(r,this.logger);this.clearElement();var h=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=h,p=document.getElementById(this.elementId);p.clientWidth?p.clientWidth:$n.DEFAULT_WIDTH,p.style.position="relative",this.shouldScan=!0,this.element=p;var m=this,v=this.stateManagerProxy.startTransition(fr.SCANNING);return new Promise(function(x,E){var w=d?c.videoConstraints:m.createVideoConstraints(e);if(!w){v.cancel(),E("videoConstraints should be defined");return}var A={};(!d||c.aspectRatio)&&(A.aspectRatio=c.aspectRatio);var N={onRenderSurfaceReady:function(_,C){m.setupUi(_,C,c),m.isScanning=!0,m.foreverScan(c,n,a)}};w$.failIfNotSupported().then(function(_){_.create(w).then(function(C){return C.render(s.element,A,N).then(function(S){m.renderedCamera=S,v.execute(),x(null)}).catch(function(S){v.cancel(),E(S)})}).catch(function(C){v.cancel(),E(Kl.errorGettingUserMedia(C))})}).catch(function(_){v.cancel(),E(Kl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(fr.PAUSED),this.showPausedState(),(ds(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(fr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(fr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById($n.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),r.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ds(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var a=new Image;a.onload=function(){var c=a.width,h=a.height,d=document.getElementById(n.elementId),p=d.clientWidth?d.clientWidth:$n.DEFAULT_WIDTH,m=Math.max(d.clientHeight?d.clientHeight:h,$n.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(c,h,p,m);if(r){var x=n.createCanvasElement(p,m,"qr-canvas-visible");x.style.display="inline-block",d.appendChild(x);var E=x.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=p,E.canvas.height=m,E.drawImage(a,0,0,c,h,v.x,v.y,v.width,v.height)}var w=$n.FILE_SCAN_HIDDEN_CANVAS_PADDING,A=Math.max(a.width,v.width),N=Math.max(a.height,v.height),_=A+2*w,C=N+2*w,S=n.createCanvasElement(_,C);d.appendChild(S);var O=S.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=_,O.canvas.height=C,O.drawImage(a,0,0,c,h,w,w,A,N);try{n.qrcode.decodeRobustlyAsync(S).then(function(D){i(u_.createFromQrcodeResult(D))}).catch(s)}catch(D){s("QR code parse error, error = ".concat(D))}},a.onerror=s,a.onabort=s,a.onstalled=s,a.onsuspend=s,a.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return E$.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!rI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[ze.QR_CODE,ze.AZTEC,ze.CODABAR,ze.CODE_39,ze.CODE_93,ze.CODE_128,ze.DATA_MATRIX,ze.MAXICODE,ze.ITF,ze.EAN_13,ze.EAN_8,ze.PDF_417,ze.RSS_14,ze.RSS_EXPANDED,ze.UPC_A,ze.UPC_E,ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,s=e.formatsToSupport;i<s.length;i++){var a=s[i];a$(a)?n.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ds(e))return!0;if(!ds(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ds(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return ds(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var i=this,s=n.qrbox;this.validateQrboxConfig(s);var a=this.toQrdimensions(e,r,s),c=function(d){if(d<$n.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat($n.MIN_QR_BOX_SIZE,"px.")},h=function(d){return d>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=e),d};c(a.width),c(a.height),a.width=h(a.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var i=ds(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(e,r,i);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=n.isShadedBoxEnabled()&&s.height<=r,c={x:0,y:0,width:e,height:r},h=a?this.getShadedRegionBounds(e,r,s):c,d=this.createCanvasElement(h.width,h.height),p={willReadFrequently:!0},m=d.getContext("2d",p);m.canvas.width=h.width,m.canvas.height=h.height,this.element.append(d),a&&this.possiblyInsertShadingElement(this.element,e,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=m,this.canvasElement=d},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=Kl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,u_.createFromQrcodeResult(i)),n.possiblyUpdateShaders(!0),!0}).catch(function(i){n.possiblyUpdateShaders(!1);var s=Kl.codeParseError(i);return r(s,eI.createFrom(s)),!1})},t.prototype.foreverScan=function(e,r,n){var i=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),a=s.videoWidth/s.clientWidth,c=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*a,d=this.qrRegion.height*c,p=this.qrRegion.x*a,m=this.qrRegion.y*c;this.context.drawImage(s,p,m,h,d,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,r,n)},i.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(x){!x&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(r,n).finally(function(){v()})):v()}).catch(function(x){i.logger.logError("Error happend while scanning context",x),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",i={user:!0,environment:!0},s="exact",a=function(E){if(E in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(E,"'")},c=Object.keys(e);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var h=Object.keys(e)[0];if(h!==r&&h!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(h===r){var d=e.facingMode;if(typeof d=="string"){if(a(d))return{facingMode:d}}else if(typeof d=="object")if(s in d){if(a(d["".concat(s)]))return{facingMode:{exact:d["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var p=typeof d;throw"Invalid type of 'facingMode' = ".concat(p)}}else{var m=e.deviceId;if(typeof m=="string")return{deviceId:m};if(typeof m=="object"){if(s in m)return{deviceId:{exact:m["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var v=typeof m;throw"Invalid type of 'deviceId' = ".concat(v)}}}var x=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(x)},t.prototype.computeCanvasDrawConfig=function(e,r,n,i){if(e<=n&&r<=i){var s=(n-e)/2,a=(i-r)/2;return{x:s,y:a,width:e,height:r}}else{var c=e,h=r;return e>n&&(r=n/e*r,e=n),r>i&&(e=i/r*e,r=i),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(h)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?$n.BORDER_SHADER_MATCH_COLOR:$n.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var i=e,s=r,a=document.createElement("canvas");return a.style.width="".concat(i,"px"),a.style.height="".concat(s,"px"),a.style.display="none",a.id=ds(n)?"qr-canvas":n,a},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,i){if(!(r-i.width<1||n-i.height<1)){var s=document.createElement("div");s.style.position="absolute";var a=(r-i.width)/2,c=(n-i.height)/2;if(s.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat($n.SHADED_REGION_ELEMENT_ID),r-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var h=5,d=40;this.insertShaderBorders(s,d,h,-h,null,0,!0),this.insertShaderBorders(s,d,h,-h,null,0,!1),this.insertShaderBorders(s,d,h,null,-h,0,!0),this.insertShaderBorders(s,d,h,null,-h,0,!1),this.insertShaderBorders(s,h,d+h,-h,null,-h,!0),this.insertShaderBorders(s,h,d+h,null,-h,-h,!0),this.insertShaderBorders(s,h,d+h,-h,null,-h,!1),this.insertShaderBorders(s,h,d+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(s)}},t.prototype.insertShaderBorders=function(e,r,n,i,s,a,c){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=$n.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(r,"px"),h.style.height="".concat(n,"px"),i!==null&&(h.style.top="".concat(i,"px")),s!==null&&(h.style.bottom="".concat(s,"px")),c?h.style.left="".concat(a,"px"):h.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Mx="data:image/svg+xml;base64,",O$=Mx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",I$=Mx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",x_=Mx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",R$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",w_=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),k$=function(){function t(){this.data=w_.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=w_.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),j$=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=d_.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(i);var s=document.createElement("a");s.innerText=d_.reportIssues(),s.href="https://github.com/mebjas/html5-qrcode/issues",s.target="new",s.style.color="white",this.infoDiv.appendChild(s),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),M$=function(){function t(e,r){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=x_,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=R$,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=x_,this.infoIcon.style.opacity="0.6")},t}(),P$=function(){function t(){var e=this;this.infoDiv=new j$,this.infoIcon=new M$(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),D$=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},L$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},b_=function(){function t(){}return t.hasPermissions=function(){return D$(this,void 0,void 0,function(){var e,r,n,i;return L$(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=s.sent(),r=0,n=e;r<n.length;r++)if(i=n[r],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},t}(),vo=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(e){return e===Qi.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Qi.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return qi.DEFAULT_SUPPORTED_SCAN_TYPE;var r=qi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,i=e;n<i.length;n++){var s=i[n];if(!qi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(s))throw"Unsupported scan type ".concat(s)}return e},t}(),Xn=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),qs=function(){function t(){}return t.createElement=function(e,r){var n=document.createElement(e);return n.id=r,n.classList.add(Xn.ALL_ELEMENT_CLASS),e==="button"&&n.setAttribute("type","button"),n},t}(),iI=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(p){try{d(n.next(p))}catch(m){a(m)}}function h(p){try{d(n.throw(p))}catch(m){a(m)}}function d(p){p.done?s(p.value):i(p.value).then(c,h)}d((n=n.apply(t,e||[])).next())})},sI=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(p){return h([d,p])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(p){d=[6,p],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},__=function(){function t(e,r,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return iI(this,void 0,void 0,function(){var e,r;return sI(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return r=n.sent(),this.propagateFailure(e,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,r){e===r?(this.buttonController.setText(r?Ot.torchOffButton():Ot.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(e,r){var n=e?Ot.torchOnFailedMessage():Ot.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),B$=function(){function t(e,r){this.onTorchActionFailureCallback=r,this.torchButton=qs.createElement("button",Xn.TORCH_BUTTON_ID),this.torchController=new __(e,this,r)}return t.prototype.render=function(e,r){var n=this;this.torchButton.innerText=Ot.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var i=this;this.torchButton.addEventListener("click",function(s){return iI(n,void 0,void 0,function(){return sI(this,function(a){switch(a.label){case 0:return[4,i.torchController.flipState()];case 1:return a.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Xn.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Xn.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Xn.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Xn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new __(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=Ot.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,i){var s=new t(r,i);return s.render(e,n),s},t}(),F$=function(){function t(e,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=qs.createElement("button",Xn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(c){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=qs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var s=this;this.fileScanInput.addEventListener("change",function(c){if(!(c==null||c.target==null)){var h=c.target;if(!(h.files&&h.files.length===0)){var d=h.files,p=d[0],m=p.name;s.setImageNameToButton(m),n(p)}}});var a=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(a),this.fileBasedScanRegion.addEventListener("dragenter",function(c){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),c.stopPropagation(),c.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(c){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder(),c.stopPropagation(),c.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(c){s.fileBasedScanRegion.style.border=s.fileBasedScanRegionActiveBorder(),c.stopPropagation(),c.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(c){c.stopPropagation(),c.preventDefault(),s.fileBasedScanRegion.style.border=s.fileBasedScanRegionDefaultBorder();var h=c.dataTransfer;if(h){var d=h.files;if(!d||d.length===0)return;for(var p=!1,m=0;m<d.length;++m){var v=d.item(m);if(v){var x=/image.*/;if(v.type.match(x)){p=!0;var E=v.name;s.setImageNameToButton(E),n(v),a.innerText=Ot.dragAndDropMessage();break}}}p||(a.innerText=Ot.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Ot.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var r=20;if(e.length>r){var n=e.substring(0,8),i=e.length,s=e.substring(i-8,i);e="".concat(n,"....").concat(s)}var a=Ot.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=a},t.prototype.setInitialValueToButton=function(){var e=Ot.fileSelectionChooseImage()+" - "+Ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){var i=new t(e,r,n);return i},t}(),U$=function(){function t(e){this.selectElement=qs.createElement("select",Xn.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var i=Ot.selectCamera();r.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var s=1,a=0,c=this.cameras;a<c.length;a++){var h=c[a],d=h.id,p=h.label==null?d:h.label;(!p||p==="")&&(p=[Ot.anonymousCameraPrefix(),s++].join(" "));var m=document.createElement("option");m.value=d,m.innerText=p,this.options.push(m),this.selectElement.appendChild(m)}r.appendChild(this.selectElement),e.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var r=0,n=this.options;r<n.length;r++){var i=n[r];if(i.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),z$=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=qs.createElement("input",Xn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,r,n,i){this.rangeInput.min=e.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}(),Hn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Hn||(Hn={}));function $$(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function H$(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var V$=function(){function t(e,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new vo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new tI(this.verbose),this.persistedDataManager=new k$,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(s,a){if(e)e(s,a);else{if(n.lastMatchFound===s)return;n.lastMatchFound=s,n.setHeaderMessage(Ot.lastMatch(s),Hn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(s,a){r&&r(s,a)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new y_(this.getScanRegionId(),H$(this.config,this.verbose))},t.prototype.pause=function(e){(ds(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,r=function(){var n=document.getElementById(e.elementId);n&&(n.innerHTML="",e.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,i){if(!e.html5Qrcode){n();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(s){if(!e.html5Qrcode){n();return}e.html5Qrcode.clear(),r(),n()}).catch(function(s){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",s),i(s)}):(e.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=qi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!qi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=qi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=qi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:qi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qi.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",e.appendChild(r),vo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),s=this.getDashboardId();i.id=s,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",e.appendChild(r);var n=new P$;n.renderInto(r);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",r.appendChild(i)},t.prototype.createSection=function(e){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",e.appendChild(r)},t.prototype.createCameraListUi=function(e,r,n){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(Ot.cameraPermissionRequesting());var s=function(){n||i.createPermissionButton(e,r)};y_.getCameras().then(function(a){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),a&&a.length>0?(e.removeChild(r),i.renderCameraSelection(a)):(i.setHeaderMessage(Ot.noCameraFound(),Hn.STATUS_WARNING),s())}).catch(function(a){i.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:s(),i.setHeaderMessage(a,Hn.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,r){var n=this,i=qs.createElement("button",this.getCameraPermissionButtonId());i.innerText=Ot.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,n.createCameraListUi(e,r,i)}),r.appendChild(i)},t.prototype.createPermissionsUi=function(e,r){var n=this;if(vo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){b_.hasPermissions().then(function(i){i?n.createCameraListUi(e,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r))}).catch(function(i){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,r)});return}this.createPermissionButton(e,r)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");e.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=vo.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var i=document.createElement("div");i.style.textAlign="center",n.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,i),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(e){var r=vo.isFileScanType(this.currentScanType),n=this,i=function(s){if(!n.html5Qrcode)throw"html5Qrcode not defined";vo.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Ot.loadingImage()),n.html5Qrcode.scanFileV2(s,!0).then(function(a){n.resetHeaderMessage(),n.qrCodeSuccessCallback(a.decodedText,a)}).catch(function(a){n.setHeaderMessage(a,Hn.STATUS_WARNING),n.qrCodeErrorCallback(a,eI.createFrom(a))}))};this.fileSelectionUi=F$.create(e,r,i)},t.prototype.renderCameraSelection=function(e){var r=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=z$.create(i,!1),a=function(w){var A=w.zoomFeature();if(A.isSupported()){s.setOnCameraZoomValueChangeCallback(function(_){A.apply(_)});var N=1;r.config.defaultZoomValueIfSupported&&(N=r.config.defaultZoomValueIfSupported),N=l$(N,A.min(),A.max()),s.setValues(A.min(),A.max(),N,A.step()),s.show()}},c=U$.create(i,e),h=document.createElement("span"),d=qs.createElement("button",Xn.CAMERA_START_BUTTON_ID);d.innerText=Ot.scanButtonStartScanningText(),h.appendChild(d);var p=qs.createElement("button",Xn.CAMERA_STOP_BUTTON_ID);p.innerText=Ot.scanButtonStopScanningText(),p.style.display="none",p.disabled=!0,h.appendChild(p);var m,v=function(w){if(!w.torchFeature().isSupported()){m&&m.hide();return}m?m.updateTorchCapability(w.torchFeature()):m=B$.create(h,w.torchFeature(),{display:"none",marginLeft:"5px"},function(A){n.setHeaderMessage(A,Hn.STATUS_WARNING)}),m.show()};i.appendChild(h);var x=function(w){w||(d.style.display="none"),d.innerText=Ot.scanButtonStartScanningText(),d.style.opacity="1",d.disabled=!1,w&&(d.style.display="inline-block")};if(d.addEventListener("click",function(w){d.innerText=Ot.scanButtonScanningStarting(),c.disable(),d.disabled=!0,d.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var A=c.getValue();n.persistedDataManager.setLastUsedCameraId(A),n.html5Qrcode.start(A,$$(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(N){p.disabled=!1,p.style.display="inline-block",x(!1);var _=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&v(_),r.config.showZoomSliderIfSupported===!0&&a(_)}).catch(function(N){n.showHideScanTypeSwapLink(!0),c.enable(),x(!0),n.setHeaderMessage(N,Hn.STATUS_WARNING)})}),c.hasSingleItem()&&d.click(),p.addEventListener("click",function(w){if(!n.html5Qrcode)throw"html5Qrcode not defined";p.disabled=!0,n.html5Qrcode.stop().then(function(A){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),c.enable(),d.disabled=!1,p.style.display="none",d.style.display="inline-block",m&&(m.reset(),m.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(A){p.disabled=!1,n.setHeaderMessage(A,Hn.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var E=n.persistedDataManager.getLastUsedCameraId();c.hasValue(E)?(c.setValue(E),d.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,r=Ot.textIfCameraScanSelected(),n=Ot.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");s.style.textAlign="center";var a=qs.createElement("span",this.getDashboardSectionSwapLinkId());a.style.textDecoration="underline",a.style.cursor="pointer",a.innerText=vo.isCameraScanType(this.currentScanType)?r:n,a.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,vo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),a.innerText=n,e.currentScanType=Qi.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),a.innerText=r,e.currentScanType=Qi.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),s.appendChild(a),i.appendChild(s)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){b_.hasPermissions().then(function(n){if(n){var i=document.getElementById(r.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,r){r||(r=Hn.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",r){case Hn.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Hn.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Hn.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=O$,this.cameraScanImage.alt=Ot.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=I$,this.fileScanImage.alt=Ot.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Xn.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Xn.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const q$=()=>{var m,v;const[t,e]=j.useState(!1),[r,n]=j.useState(null),i=j.useRef(null),[s,a]=j.useState(!1),c=typeof window<"u"&&(window.isSecureContext||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),h=()=>{if(i.current){try{i.current.clear()}catch{}i.current=null}e(!0),setTimeout(()=>{if(!document.getElementById("qr-reader")){console.error("qr-reader container not found at init time"),ke.error("Unable to start scanner. Please try again."),e(!1);return}const E={fps:10,qrbox:{width:250,height:250},rememberLastUsedCamera:!0,aspectRatio:1,showTorchButtonIfSupported:!0,supportedScanTypes:c?[Qi.SCAN_TYPE_CAMERA,Qi.SCAN_TYPE_FILE]:[Qi.SCAN_TYPE_FILE]},w=new V$("qr-reader",E,!1);w.render(async A=>{a(!0);try{let N=A;try{const S=JSON.parse(A);N=S.qr_code||S.qrCode||S.orderId||S.id||A}catch{}const{data:_,error:C}=await be.from("orders").select(`
                *,
                profiles (full_name),
                restaurants (name)
              `).eq("qr_code",N).single();if(C||!_){console.error("Order fetch error:",C),ke.error("Order not found for this QR code");return}n(_),ke.success("Order verified successfully!"),d()}catch(N){console.error("Error verifying order:",N),ke.error("Failed to verify order")}finally{a(!1)}},A=>{typeof A=="string"&&!A.toLowerCase().includes("not found")&&!A.toLowerCase().includes("no qr code")&&!A.toLowerCase().includes("inactive")&&console.debug("QR scan error:",A)}),i.current=w},0)},d=()=>{i.current&&(i.current.clear(),i.current=null),e(!1)};j.useEffect(()=>()=>{i.current&&(i.current.clear(),i.current=null)},[]);const p=async()=>{if(r)try{const{error:x}=await be.from("orders").update({status:"completed"}).eq("id",r.id);if(x)throw x;ke.success("Order marked as served!"),n(null)}catch(x){console.error("Error updating order:",x),ke.error("Failed to update order status")}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"QR Scanner"}),f.jsx("p",{className:"text-muted-foreground",children:"Scan customer booking QR codes"})]}),!t&&!r&&f.jsx(qe,{className:"border-border/50 luxury-shadow",children:f.jsxs(It,{className:"py-12 text-center space-y-4",children:[f.jsx(Eb,{className:"h-16 w-16 mx-auto text-primary"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ready to Scan"}),f.jsx("p",{className:"text-muted-foreground mb-2",children:"Start the scanner to use your camera or upload a QR code image."}),!c&&f.jsx("p",{className:"text-sm text-yellow-600 mb-2",children:"Live camera requires HTTPS or localhost. On this origin, only image upload will be available."}),f.jsxs(De,{onClick:h,className:"luxury-gradient",size:"lg",children:[f.jsx(Eb,{className:"w-5 h-5 mr-2"}),"Start Scanner"]})]})]})}),t&&f.jsxs(qe,{className:"border-border/50 luxury-shadow",children:[f.jsxs(mr,{className:"pb-2",children:[f.jsxs(wr,{className:"flex items-center justify-between gap-3",children:[f.jsx("span",{children:"Scan QR Code"}),f.jsx("span",{className:"text-[0.65rem] font-normal text-muted-foreground",children:"Align customer QR within the frame"})]}),f.jsx(Vs,{className:"mt-1 text-xs text-muted-foreground",children:c?"Choose your camera if available, or upload a QR screenshot. Use landscape for best view.":"On this connection only image upload is available. Use a screenshot/photo of the QR code."})]}),f.jsxs(It,{className:"space-y-4 pt-2",children:[f.jsxs("div",{id:"qr-reader",className:`\r
                w-full rounded-2xl border border-border/40 bg-muted/40\r
                px-3 py-4 md:px-5 md:py-6\r
                flex flex-col items-stretch\r
                gap-4\r
              `,children:[f.jsx("style",{children:`
                /* 1. Center content in scan region (including default icon/video) */
                #qr-reader__scan_region {
                  display: flex !important;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  text-align: center;
                  gap: 8px;
                }

                #qr-reader__scan_region img,
                #qr-reader__scan_region svg {
                  margin: 0 auto;
                }

                /* 2. Make camera select large, touch-friendly, and separated */
                #html5-qrcode-select-camera {
                  width: 100% !important;
                  padding: 10px 14px !important;
                  margin: 8px 0 4px 0 !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* 3. Lay out dashboard controls vertically with spacing */
                #qr-reader__dashboard {
                  display: flex;
                  flex-direction: column;
                  align-items: stretch;
                  gap: 8px;
                  padding-top: 4px;
                }

                /* 4. Ensure each button is on its own line, full-width, with space */
                #qr-reader__dashboard .html5-qrcode-element,
                #qr-reader__dashboard button {
                  display: block !important;
                  width: 100% !important;
                  margin: 2px 0 !important;
                  text-align: center !important;
                }

                #qr-reader__dashboard button {
                  padding: 9px 14px !important;
                  border-radius: 9999px !important;
                  font-size: 0.8rem !important;
                }

                /* Specifically separate the camera stop button from others */
                #html5-qrcode-button-camera-stop {
                  margin-top: 10px !important;
                }

                /* Video aesthetics */
                #qr-reader__scan_region video {
                  border-radius: 18px;
                  max-height: 260px;
                  object-fit: cover;
                }

                @media (min-width: 640px) {
                  #qr-reader__dashboard {
                    max-width: 420px;
                    align-self: center;
                  }
                }
              `}),f.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[f.jsx("div",{className:"text-[0.7rem] font-semibold text-muted-foreground tracking-wide uppercase",children:"Select Camera"}),f.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Choose front or back camera from the dropdown below."})]}),f.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[f.jsx("div",{className:"text-[0.7rem] font-semibold text-foreground",children:"Scan Options"}),f.jsx("div",{className:"text-[0.65rem] text-muted-foreground",children:"Use Start Scanning for live camera or Scan an Image File to upload a QR screenshot."})]})]}),f.jsx("div",{className:"text-[0.65rem] text-muted-foreground text-center px-3",children:"If camera buttons or options are hidden, scroll inside the scanner box or rotate your phone."}),f.jsxs(De,{onClick:d,variant:"outline",className:"w-full mt-1 md:mt-2",children:[f.jsx(eA,{className:"w-4 h-4 mr-2"}),"Stop Scanning"]})]})]}),r&&f.jsxs(qe,{className:"border-border/50 luxury-shadow",children:[f.jsxs(mr,{children:[f.jsx(wr,{className:"text-xl",children:"Order Details"}),f.jsxs(Vs,{children:["Order ID: ",r.id]})]}),f.jsxs(It,{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),f.jsx("span",{className:"font-medium",children:((m=r.profiles)==null?void 0:m.full_name)||"Customer"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Restaurant:"}),f.jsx("span",{className:"font-medium",children:(v=r.restaurants)==null?void 0:v.name})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Order Type:"}),f.jsx("span",{className:"font-medium capitalize",children:r.order_type.replace("_"," ")})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Status:"}),f.jsx("span",{className:"font-medium capitalize",children:r.status})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-semibold",children:"Items:"}),f.jsx("ul",{className:"space-y-1",children:r.order_items.map((x,E)=>f.jsxs("li",{className:"flex justify-between text-sm",children:[f.jsxs("span",{children:[x.quantity,"x ",x.name]}),f.jsxs("span",{children:[(x.price*x.quantity).toLocaleString()," MMK"]})]},E))})]}),f.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[f.jsx("span",{className:"font-semibold",children:"Total:"}),f.jsxs("span",{className:"font-bold text-lg",children:[r.total_amount.toLocaleString()," MMK"]})]}),f.jsxs("div",{className:"flex gap-2 pt-4",children:[f.jsxs(De,{onClick:p,className:"flex-1 luxury-gradient",size:"lg",children:[f.jsx(Sc,{className:"w-5 h-5 mr-2"}),"Mark as Served"]}),f.jsx(De,{onClick:()=>n(null),variant:"outline",className:"flex-1",size:"lg",children:"Scan Another"})]})]})]})]})};var Ap="Switch",[W$,RQ]=En(Ap),[G$,Y$]=W$(Ap),oI=j.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:a,disabled:c,value:h="on",onCheckedChange:d,form:p,...m}=t,[v,x]=j.useState(null),E=ot(e,C=>x(C)),w=j.useRef(!1),A=v?p||!!v.closest("form"):!0,[N,_]=Ss({prop:i,defaultProp:s??!1,onChange:d,caller:Ap});return f.jsxs(G$,{scope:r,checked:N,disabled:c,children:[f.jsx(We.button,{type:"button",role:"switch","aria-checked":N,"aria-required":a,"data-state":uI(N),"data-disabled":c?"":void 0,disabled:c,value:h,...m,ref:E,onClick:Pe(t.onClick,C=>{_(S=>!S),A&&(w.current=C.isPropagationStopped(),w.current||C.stopPropagation())})}),A&&f.jsx(cI,{control:v,bubbles:!w.current,name:n,value:h,checked:N,required:a,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});oI.displayName=Ap;var aI="SwitchThumb",lI=j.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,i=Y$(aI,r);return f.jsx(We.span,{"data-state":uI(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e})});lI.displayName=aI;var K$="SwitchBubbleInput",cI=j.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...i},s)=>{const a=j.useRef(null),c=ot(a,s),h=Cx(r),d=Ny(e);return j.useEffect(()=>{const p=a.current;if(!p)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(h!==r&&x){const E=new Event("click",{bubbles:n});x.call(p,r),p.dispatchEvent(E)}},[h,r,n]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cI.displayName=K$;function uI(t){return t?"checked":"unchecked"}var dI=oI,X$=lI;const fI=j.forwardRef(({className:t,...e},r)=>f.jsx(dI,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:r,children:f.jsx(X$,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fI.displayName=dI.displayName;const Q$=()=>{const{user:t}=Wr(),[e,r]=j.useState([]),[n,i]=j.useState(!0),[s,a]=j.useState(null),[c,h]=j.useState(!1),[d,p]=j.useState(null),[m,v]=j.useState({name:"",description:"",price:"",image_url:""});j.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{const{data:C,error:S}=await be.from("restaurants").select("id").eq("owner_id",t==null?void 0:t.id).single();if(S)throw S;a(C.id);const{data:O,error:D}=await be.from("menu_items").select("*").eq("restaurant_id",C.id).order("created_at",{ascending:!1});if(D)throw D;r(O||[])}catch(C){console.error("Error fetching menu:",C),ke.error("Failed to load menu items")}finally{i(!1)}},E=()=>{p(null),v({name:"",description:"",price:"",image_url:""}),h(!0)},w=C=>{p(C.id),v({name:C.name,description:C.description||"",price:C.price.toString(),image_url:C.image_url||""}),h(!0)},A=async C=>{try{const{error:S}=await be.from("menu_items").delete().eq("id",C);if(S)throw S;r(e.filter(O=>O.id!==C)),ke.success("Menu item deleted")}catch(S){console.error("Error deleting item:",S),ke.error("Failed to delete menu item")}},N=async()=>{if(!m.name||!m.price||!s){ke.error("Please fill in all required fields");return}try{const C={name:m.name,description:m.description||null,price:parseFloat(m.price),image_url:m.image_url||null,restaurant_id:s};if(d){const{error:S}=await be.from("menu_items").update(C).eq("id",d);if(S)throw S;r(e.map(O=>O.id===d?{...O,...C}:O)),ke.success("Menu item updated")}else{const{data:S,error:O}=await be.from("menu_items").insert([{...C,available:!0}]).select().single();if(O)throw O;r([S,...e]),ke.success("Menu item added")}h(!1),v({name:"",description:"",price:"",image_url:""})}catch(C){console.error("Error saving menu item:",C),ke.error("Failed to save menu item")}},_=async C=>{const S=e.find(O=>O.id===C);if(S)try{const{error:O}=await be.from("menu_items").update({available:!S.available}).eq("id",C);if(O)throw O;r(e.map(D=>D.id===C?{...D,available:!D.available}:D)),ke.success("Availability updated")}catch(O){console.error("Error updating availability:",O),ke.error("Failed to update availability")}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Menu"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage your menu items"})]}),f.jsxs(De,{onClick:E,className:"luxury-gradient",children:[f.jsx(qo,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),n?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(Qs,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?f.jsx(qe,{children:f.jsx(It,{className:"py-12 text-center text-muted-foreground",children:"No menu items yet. Add your first item to get started!"})}):f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(C=>f.jsxs(qe,{children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:C.image_url||"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400",alt:C.name,className:"w-full h-48 object-cover"}),f.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[f.jsx(De,{size:"icon",variant:"secondary",onClick:()=>w(C),children:f.jsx(md,{className:"h-4 w-4"})}),f.jsx(De,{size:"icon",variant:"destructive",onClick:()=>A(C.id),children:f.jsx(ko,{className:"h-4 w-4"})})]})]}),f.jsxs(It,{className:"p-4 space-y-2",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold",children:C.name}),C.description&&f.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:C.description})]}),f.jsxs("p",{className:"font-semibold text-primary ml-2",children:[C.price.toLocaleString()," MMK"]})]}),f.jsxs("div",{className:"flex items-center justify-between pt-2",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"Available"}),f.jsx(fI,{checked:C.available,onCheckedChange:()=>_(C.id)})]})]})]},C.id))}),f.jsx(Ts,{open:c,onOpenChange:h,children:f.jsxs(ts,{children:[f.jsx(ro,{children:f.jsxs(no,{children:[d?"Edit":"Add"," Menu Item"]})}),f.jsxs("div",{className:"space-y-4 py-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"name",children:"Name *"}),f.jsx(mt,{id:"name",value:m.name,onChange:C=>v({...m,name:C.target.value}),placeholder:"e.g., Traditional Mohinga"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"price",children:"Price (MMK) *"}),f.jsx(mt,{id:"price",type:"number",value:m.price,onChange:C=>v({...m,price:C.target.value}),placeholder:"5000"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"description",children:"Description"}),f.jsx(mt,{id:"description",value:m.description,onChange:C=>v({...m,description:C.target.value}),placeholder:"Describe the dish..."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"image_url",children:"Image URL"}),f.jsx(mt,{id:"image_url",value:m.image_url,onChange:C=>v({...m,image_url:C.target.value}),placeholder:"https://..."})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[f.jsx(De,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),f.jsxs(De,{onClick:N,className:"luxury-gradient",children:[d?"Update":"Add"," Item"]})]})]})]})})]})},Z$=()=>{const{user:t}=Wr(),[e,r]=j.useState(!0),[n,i]=j.useState(!1),[s,a]=j.useState(null),[c,h]=j.useState({name:"",address:"",phone:"",description:"",image_url:"",open_hours:""});j.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{const{data:m,error:v}=await be.from("restaurants").select("*").eq("owner_id",t==null?void 0:t.id).single();if(v)throw v;a(m.id),h({name:m.name,address:m.address,phone:m.phone||"",description:m.description||"",image_url:m.image_url||"",open_hours:m.open_hours||""})}catch(m){console.error("Error fetching restaurant:",m),ke.error("Failed to load restaurant data")}finally{r(!1)}},p=async()=>{if(s){i(!0);try{const{error:m}=await be.from("restaurants").update({name:c.name,address:c.address,phone:c.phone,description:c.description,image_url:c.image_url,open_hours:c.open_hours}).eq("id",s);if(m)throw m;ke.success("Restaurant information updated successfully!")}catch(m){console.error("Error updating restaurant:",m),ke.error("Failed to update restaurant information")}finally{i(!1)}}};return e?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(Qs,{className:"h-8 w-8 animate-spin text-primary"})}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Restaurant Settings"}),f.jsx("p",{className:"text-muted-foreground",children:"Update your restaurant information"})]}),f.jsxs(qe,{className:"border-border/50 luxury-shadow",children:[f.jsxs(mr,{children:[f.jsx(wr,{children:"Restaurant Information"}),f.jsx(Vs,{children:"Update your restaurant details and settings"})]}),f.jsxs(It,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"image_url",children:"Cover Photo URL"}),f.jsxs("div",{className:"space-y-2",children:[c.image_url&&f.jsx("div",{className:"relative h-48 bg-muted rounded-lg overflow-hidden",children:f.jsx("img",{src:c.image_url,alt:"Restaurant cover",className:"w-full h-full object-cover"})}),f.jsx(mt,{id:"image_url",value:c.image_url,onChange:m=>h({...c,image_url:m.target.value}),placeholder:"https://..."})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"name",children:"Restaurant Name *"}),f.jsx(mt,{id:"name",value:c.name,onChange:m=>h({...c,name:m.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"address",children:"Address *"}),f.jsx(mt,{id:"address",value:c.address,onChange:m=>h({...c,address:m.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"phone",children:"Phone Number *"}),f.jsx(mt,{id:"phone",type:"tel",value:c.phone,onChange:m=>h({...c,phone:m.target.value})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"open_hours",children:"Open Hours"}),f.jsx(mt,{id:"open_hours",value:c.open_hours,onChange:m=>h({...c,open_hours:m.target.value}),placeholder:"9:00 AM - 10:00 PM"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(it,{htmlFor:"description",children:"Description"}),f.jsx(Jd,{id:"description",value:c.description,onChange:m=>h({...c,description:m.target.value}),rows:4,placeholder:"Tell customers about your restaurant..."})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs(De,{onClick:p,className:"luxury-gradient",children:[f.jsx(lA,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})};var J$="Separator",E_="horizontal",eH=["horizontal","vertical"],hI=j.forwardRef((t,e)=>{const{decorative:r,orientation:n=E_,...i}=t,s=tH(n)?n:E_,c=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return f.jsx(We.div,{"data-orientation":s,...c,...i,ref:e})});hI.displayName=J$;function tH(t){return eH.includes(t)}var pI=hI;const lv=j.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>f.jsx(pI,{ref:i,decorative:r,orientation:e,className:Be("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));lv.displayName=pI.displayName;const rH=({post:t,onBack:e,onEdit:r,onDelete:n,onTogglePin:i})=>{const{user:s}=Wr(),[a,c]=j.useState([]),[h,d]=j.useState(!0),[p,m]=j.useState(null),[v,x]=j.useState(null),[E,w]=j.useState({});j.useEffect(()=>{A()},[]);const A=async()=>{try{d(!0);let{data:S,error:O}=await be.from("blog_comments_with_profiles").select("*").eq("blog_post_id",t.id).order("created_at",{ascending:!1});if(O){console.warn("View query failed, trying original approach:",O);const D=await be.from("blog_comments").select(`
            *,
            profiles:customer_id (
              full_name
            )
          `).eq("blog_post_id",t.id).eq("is_deleted",!1).order("created_at",{ascending:!1});S=D.data,O=D.error}if(O){console.error("Error loading comments",O);return}c(S||[])}catch(S){console.error("Unexpected error loading comments",S)}finally{d(!1)}},N=async S=>{m(S);try{const{error:O}=await be.from("blog_comments").update({is_deleted:!0}).eq("id",S);if(O)throw O;c(D=>D.filter(M=>M.id!==S))}catch(O){console.error("Failed to delete comment",O)}finally{m(null)}},_=async S=>{var D;const O=(D=E[S])==null?void 0:D.trim();if(!(!O||!s))try{const{data:M,error:R}=await be.from("blog_comments").insert({blog_post_id:t.id,customer_id:s.id,content:O,parent_comment_id:S}).select(`
          *,
          profiles:customer_id (
            full_name
          )
        `).single();if(R)throw R;setTimeout(()=>{A()},100),w(k=>({...k,[S]:""})),x(null)}catch(M){console.error("Failed to reply to comment",M)}},C=S=>S.split(" ").map(O=>O[0]).join("").slice(0,2).toUpperCase();return f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10",children:[f.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:f.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-6 py-3 md:py-4",children:f.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[f.jsx(De,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-foreground md:hidden",onClick:e,children:f.jsx(Cs,{className:"w-6 h-6"})}),f.jsxs(De,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-foreground hidden md:flex",onClick:e,children:[f.jsx(Cs,{className:"w-4 h-4"}),"Back to Posts"]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h1",{className:"text-lg md:text-xl font-semibold text-foreground truncate",children:"Post Details"}),f.jsx("p",{className:"text-xs md:text-sm text-muted-foreground hidden md:block",children:"Full view with customer feedback"})]}),f.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[f.jsx(De,{variant:"outline",size:"icon",className:"md:hidden h-8 w-8 text-muted-foreground hover:text-primary hover:border-primary/40",onClick:()=>r(t),children:f.jsx(md,{className:"w-4 h-4"})}),f.jsxs(De,{variant:"outline",size:"sm",className:"hidden md:flex gap-2",onClick:()=>r(t),children:[f.jsx(md,{className:"w-4 h-4"}),f.jsx("span",{className:"text-[10px]",children:"Edit"})]}),f.jsx(De,{variant:"outline",size:"icon",className:"md:hidden h-8 w-8 text-destructive/80 hover:text-destructive hover:bg-destructive/5 hover:border-destructive/40",onClick:()=>n(t.id),children:f.jsx(ko,{className:"w-4 h-4"})}),f.jsxs(De,{variant:"outline",size:"sm",className:"hidden md:flex gap-2 text-destructive hover:text-destructive/80 border-destructive/20 hover:border-destructive/40",onClick:()=>n(t.id),children:[f.jsx(ko,{className:"w-4 h-4"}),f.jsx("span",{className:"text-[10px]",children:"Delete"})]})]})]})})}),f.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-6 py-4 md:py-6 space-y-4 md:space-y-6",children:[f.jsxs(qe,{className:"bg-card/90 backdrop-blur-md border-border/40 overflow-hidden",children:[t.is_pinned&&f.jsx("div",{className:"absolute inset-x-0 top-0 h-[3px] bg-gradient-to-r from-primary via-amber-400 to-primary/70 z-10"}),f.jsxs("div",{className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"space-y-2 flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[f.jsx("h2",{className:"text-xl md:text-2xl font-bold text-foreground",children:t.title}),f.jsxs("div",{className:"flex items-center gap-2",children:[t.is_published?f.jsxs(br,{className:"h-6 px-3 text-[9px] bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[f.jsx(Sc,{className:"w-3 h-3"}),"Live"]}):f.jsx(br,{variant:"outline",className:"h-6 px-3 text-[9px] border-muted-foreground/40 text-muted-foreground",children:"Draft"}),t.is_pinned&&f.jsxs(br,{variant:"outline",className:"h-6 px-3 text-[9px] border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[f.jsx(gd,{className:"w-3 h-3"}),"Highlight"]})]})]}),f.jsxs("div",{className:"flex items-center gap-2 md:gap-4 text-xs md:text-sm text-muted-foreground flex-wrap",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(QC,{className:"w-4 h-4"}),f.jsxs("span",{children:["Created: ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),t.created_at!==t.updated_at&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(za,{className:"w-4 h-4"}),f.jsxs("span",{children:["Updated: ",new Date(t.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]}),f.jsx(De,{variant:t.is_pinned?"default":"outline",size:"sm",className:Be("gap-2 rounded-full",t.is_pinned?"bg-amber-400/10 border-amber-400/60 text-amber-400 hover:bg-amber-400/15":"border-border/40 hover:border-primary/40 text-muted-foreground hover:text-primary"),onClick:()=>i(t),children:t.is_pinned?f.jsxs(f.Fragment,{children:[f.jsx(oA,{className:"w-4 h-4"}),"Unpin"]}):f.jsxs(f.Fragment,{children:[f.jsx(gd,{className:"w-4 h-4"}),"Pin as Highlight"]})})]}),t.hero_image_url&&f.jsx("div",{className:"mt-3 md:mt-4 overflow-hidden rounded-xl border border-border/40 bg-muted/40",children:f.jsx("img",{src:t.hero_image_url,alt:t.title,className:"w-full h-32 md:h-48 object-cover"})}),f.jsx("div",{className:"prose prose-sm max-w-none",children:f.jsx("div",{className:"text-[13px] md:text-[15px] text-foreground leading-relaxed whitespace-pre-line",children:t.content})}),t.linked_menu_items&&t.linked_menu_items.length>0&&f.jsxs(f.Fragment,{children:[f.jsx(lv,{}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"w-4 h-4 text-primary"}),f.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Featured Menu Items"}),f.jsxs("span",{className:"text-[11px] text-muted-foreground",children:["(",t.linked_menu_items.length,")"]})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:t.linked_menu_items.map(S=>f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/5 border border-primary/15 text-sm text-primary/80",children:[f.jsx(qu,{className:"w-4 h-4"}),f.jsx("span",{className:"font-medium",children:S.name}),S.price&&f.jsxs("span",{className:"text-primary/60",children:["- ",S.price.toLocaleString()," MMK"]})]},S.id))})]})]}),f.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(gh,{className:"w-4 h-4"}),f.jsxs("span",{children:[a.length," customer ",a.length===1?"comment":"comments"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(vh,{className:"w-4 h-4"}),f.jsx("span",{children:"Visible to all customers"})]})]})]})]}),f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40",children:f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 md:mb-4",children:[f.jsx(gh,{className:"w-4 h-4 md:w-5 md:h-5 text-primary"}),f.jsx("h3",{className:"text-base md:text-lg font-semibold text-foreground",children:"Customer Feedback"}),f.jsxs("span",{className:"text-xs md:text-sm text-muted-foreground",children:["(",a.length,")"]})]}),f.jsx(lv,{className:"mb-3 md:mb-4"}),h?f.jsx("div",{className:"space-y-3",children:[...Array(3)].map((S,O)=>f.jsxs("div",{className:"flex items-start gap-3 p-4 bg-background/50 rounded-lg animate-pulse",children:[f.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex-shrink-0"}),f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),f.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),f.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]},O))}):a.length===0?f.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(gh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"No customer feedback yet"}),f.jsx("p",{className:"text-xs mt-1",children:"Comments will appear here once customers start engaging with your post"})]}):f.jsx(_p,{className:"h-[300px] md:h-[400px] pr-2",children:f.jsx("div",{className:"space-y-4",children:a.filter(S=>S.parent_comment_id===null||S.parent_comment_id===void 0).map(S=>{var R;const O=S.display_name||`Guest ${S.customer_id.slice(0,6).toUpperCase()}`,D=C(O),M=a.filter(k=>k.parent_comment_id===S.id);return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-start gap-1 md:gap-2",children:[f.jsx("div",{className:"mt-0.5 w-5 h-5 md:w-6 md:h-6 rounded-full bg-gradient-to-br from-amber-400 via-yellow-300 to-amber-500 text-[7px] md:text-[8px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-amber-300/70",children:D}),f.jsxs("div",{className:"flex-1 space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[8px] md:text-[9px] text-foreground font-medium truncate max-w-[100px] md:max-w-[120px]",children:O}),f.jsxs("span",{className:"text-[7px] md:text-[8px] text-muted-foreground whitespace-nowrap",children:[new Date(S.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(S.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),f.jsx("p",{className:"text-[8px] md:text-[9px] text-foreground leading-snug",children:S.content}),M.length>0&&f.jsx("div",{className:"space-y-1 md:space-y-2 mt-2 border-l-2 border-border/40 pl-2 md:pl-3",children:M.map(k=>{const L=k.display_name||`Guest ${k.customer_id.slice(0,6).toUpperCase()}`,B=C(L);return f.jsxs("div",{className:"flex items-start gap-2 opacity-80",children:[f.jsx("div",{className:"mt-0.5 w-4 h-4 md:w-5 md:h-5 rounded-full bg-gradient-to-br from-emerald-400 via-emerald-300 to-emerald-500 text-[6px] md:text-[7px] flex items-center justify-center text-slate-900 font-semibold shadow-sm border border-emerald-300/70",children:B}),f.jsxs("div",{className:"flex-1 space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-[7px] md:text-[8px] text-foreground font-medium truncate max-w-[80px] md:max-w-[100px]",children:[L," (Reply)"]}),f.jsxs("span",{className:"text-[6px] md:text-[7px] text-muted-foreground whitespace-nowrap",children:[new Date(k.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"}),"  ",new Date(k.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),f.jsx("p",{className:"text-[7px] md:text-[8px] text-foreground leading-snug",children:k.content})]}),f.jsx(De,{variant:"ghost",size:"icon",className:"h-4 w-4 md:h-5 md:w-5 p-1 text-destructive hover:text-destructive/80 hover:bg-destructive/5",onClick:()=>N(k.id),disabled:p===k.id,title:"Delete reply",children:p===k.id?f.jsx(za,{className:"w-2 h-2 md:w-3 md:h-3 animate-spin"}):f.jsx(ko,{className:"w-2 h-2 md:w-3 md:h-3"})})]},k.id)})})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(De,{variant:"ghost",size:"icon",className:"h-5 w-5 md:h-6 md:w-6 p-1 text-muted-foreground hover:text-primary hover:bg-primary/5",onClick:()=>x(S.id),title:"Reply to comment",children:f.jsx(MM,{className:"w-2.5 h-2.5 md:w-3 md:h-3"})}),f.jsx(De,{variant:"ghost",size:"icon",className:"h-5 w-5 md:h-6 md:w-6 p-1 text-destructive hover:text-destructive/80 hover:bg-destructive/5",onClick:()=>N(S.id),disabled:p===S.id,title:"Delete comment",children:p===S.id?f.jsx(za,{className:"w-2.5 h-2.5 md:w-3 md:h-3 animate-spin"}):f.jsx(ko,{className:"w-2.5 h-2.5 md:w-3 md:h-3"})})]})]}),v===S.id&&f.jsxs("div",{className:"ml-6 md:ml-8 flex gap-2",children:[f.jsx(Jd,{placeholder:"Write a reply...",value:E[S.id]||"",onChange:k=>w(L=>({...L,[S.id]:k.target.value})),className:"text-[8px] md:text-[9px] resize-none border-border/40 bg-background/80 focus-visible:ring-primary/40 h-14 md:h-16",rows:2}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx(De,{size:"sm",className:"h-5 md:h-6 px-2 text-[7px] md:text-[8px] rounded-full bg-primary/90 hover:bg-primary shadow-sm",onClick:()=>_(S.id),disabled:!((R=E[S.id])!=null&&R.trim()),children:"Send"}),f.jsx(De,{variant:"ghost",size:"sm",className:"h-5 md:h-6 px-2 text-[7px] md:text-[8px] text-muted-foreground",onClick:()=>{x(null),w(k=>({...k,[S.id]:""}))},children:"Cancel"})]})]})]},S.id)})})})]})})]})]})},nH=()=>{const{user:t}=Wr(),e=qr(),r=Is(),[n,i]=j.useState(null),[s,a]=j.useState([]),[c,h]=j.useState([]),[d,p]=j.useState(!0),[m,v]=j.useState(null),[x,E]=j.useState(null);j.useMemo(()=>c.filter(O=>O.image_url),[c]),j.useEffect(()=>{(async()=>{if(!t){p(!1);return}let D=null;try{const{data:R,error:k}=await be.from("profiles").select("restaurant_id").eq("id",t.id).maybeSingle();!k&&R&&R.restaurant_id&&(D=R.restaurant_id)}catch(R){console.warn("profiles.restaurant_id lookup skipped or failed",R)}let M=D;if(!M)try{const{data:R,error:k}=await be.from("restaurants").select("id").eq("owner_id",t.id).maybeSingle();!k&&(R!=null&&R.id)&&(M=R.id)}catch(R){console.warn("restaurants.owner_id lookup failed",R)}if(!M){console.warn("No restaurant associated with this owner. Ensure either profiles.restaurant_id or restaurants.owner_id is set."),p(!1);return}i(M),await Promise.all([w(M),A(M)]),p(!1)})()},[t]),j.useEffect(()=>{if(s.length>0){const D=new URLSearchParams(r.search).get("view");if(D){const M=s.find(R=>R.id===D);M&&(E(M),e("/dashboard?tab=blog",{replace:!0}))}}},[s,r.search,e]);const w=async O=>{const{data:D,error:M}=await be.from("menu_items").select("id, name, image_url, price").eq("restaurant_id",O).order("name",{ascending:!0});if(M){console.error("Error loading menu items",M);return}h(D||[])},A=async O=>{const{data:D,error:M}=await be.from("blog_posts").select("*").eq("restaurant_id",O).order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1});if(M){console.error("Error loading blog posts",M);return}const R=D||[];if(R.length>0){const k=R.map($=>$.id),{data:L,error:B}=await be.from("blog_post_menu_items").select("blog_post_id, menu_item_id").in("blog_post_id",k);if(B){console.error("Error loading blog_post_menu_items",B),a(R);return}const F={};(L||[]).forEach($=>{F[$.blog_post_id]||(F[$.blog_post_id]=[]),F[$.blog_post_id].push($.menu_item_id)});const H={};c.forEach($=>{H[$.id]=$});const z=R.map($=>{const ee=F[$.id]||[];return{...$,linked_menu_items:ee.map(J=>H[J]).filter(Boolean)}});a(z)}else a([])},N=()=>{e("/dashboard/blog/new")},_=O=>{e(`/dashboard/blog/edit/${O.id}`)},C=async O=>{if(n)try{const{error:D}=await be.from("blog_posts").update({is_pinned:!O.is_pinned}).eq("id",O.id).eq("restaurant_id",n);if(D)throw D;a(M=>M.map(R=>R.id===O.id?{...R,is_pinned:!R.is_pinned}:R))}catch(D){console.error("Failed to toggle pin",D)}},S=async O=>{if(n){v(O);try{const{error:D}=await be.from("blog_posts").delete().eq("id",O).eq("restaurant_id",n);if(D)throw D;a(M=>M.filter(R=>R.id!==O))}catch(D){console.error("Failed to delete blog post",D)}finally{v(null)}}};return d?f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gd,{className:"w-4 h-4 text-primary"}),f.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading your blog studio..."})]}),f.jsxs(qe,{className:"p-4 bg-card/80 border-border/40 animate-pulse",children:[f.jsx("div",{className:"h-3 w-24 bg-muted/70 rounded mb-2"}),f.jsx("div",{className:"h-3 w-40 bg-muted/60 rounded mb-1"}),f.jsx("div",{className:"h-3 w-32 bg-muted/50 rounded"})]})]}):n?f.jsx("div",{className:"space-y-5",children:x?f.jsx(rH,{post:x,onBack:()=>E(null),onEdit:O=>{E(null),_(O)},onDelete:O=>{E(null),S(O)},onTogglePin:O=>{C(O),x&&x.id===O.id&&E(O)}}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"inline-flex items-center gap-2",children:[f.jsx(my,{className:"w-4 h-4 text-primary"}),f.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-primary/80",children:"Blog & Promotions Studio"})]}),f.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-foreground leading-tight",children:"Tell your food story"}),f.jsx("p",{className:"text-[10px] sm:text-[11px] text-muted-foreground max-w-md",children:"Create minimalist, elegant posts to highlight your signature dishes, seasonal menus, and special offers. Customers read these on the Blog tab."})]}),f.jsxs(De,{size:"sm",className:"gap-2 rounded-full bg-primary/90 hover:bg-primary shadow-sm self-start sm:self-auto",onClick:N,children:[f.jsx(qo,{className:"w-3 h-3"}),f.jsx("span",{className:"text-[10px] font-medium",children:"New Post"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[s.length===0&&f.jsx(qe,{className:"p-3 sm:p-4 bg-card/80 border-dashed border-border/60",children:f.jsx("p",{className:"text-[10px] sm:text-[11px] text-muted-foreground",children:"You haven't published any stories yet. Create your first post to showcase your restaurant's personality and promotions."})}),s.map(O=>f.jsxs(qe,{className:Be("relative overflow-hidden bg-card/90 border-border/40 group cursor-pointer","transition-all duration-300 hover:-translate-y-0.5 hover:shadow-[0_16px_40px_rgba(15,23,42,0.16)]"),onClick:()=>E(O),children:[O.is_pinned&&f.jsx("div",{className:"absolute inset-x-0 top-0 h-[2px] bg-gradient-to-r from-primary via-amber-400 to-primary/70"}),f.jsxs("div",{className:"p-3 sm:p-3.5 space-y-2 sm:space-y-2.5",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3",children:[f.jsxs("div",{className:"space-y-1.5 flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-foreground truncate",children:O.title}),O.is_published?f.jsxs(br,{className:"h-4 sm:h-5 px-1.5 sm:px-2 text-[7px] sm:text-[8px] bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[f.jsx(Sc,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),f.jsx("span",{className:"hidden sm:inline",children:"Live"})]}):f.jsx(br,{variant:"outline",className:"h-4 sm:h-5 px-1.5 sm:px-2 text-[7px] sm:text-[8px] border-muted-foreground/40 text-muted-foreground",children:"Draft"}),O.is_pinned&&f.jsxs(br,{variant:"outline",className:"h-4 sm:h-5 px-1.5 sm:px-2 text-[7px] sm:text-[8px] border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[f.jsx(gd,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),f.jsx("span",{className:"hidden sm:inline",children:"Highlight"})]})]}),f.jsx("p",{className:"text-[8px] sm:text-[9px] text-muted-foreground line-clamp-2",children:O.excerpt||O.content.slice(0,120)}),f.jsxs("div",{className:"flex items-center gap-2 text-[7px] sm:text-[8px] text-muted-foreground/80",children:[f.jsx(QC,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),f.jsx("span",{children:new Date(O.created_at).toLocaleDateString()}),f.jsx("span",{className:"mx-1",children:""}),f.jsx("span",{className:"hidden sm:inline",children:O.is_published?"Visible in customer Blog":"Not visible to customers"}),f.jsx("span",{className:"sm:hidden",children:O.is_published?"Visible":"Hidden"})]})]}),f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsxs(km,{children:[f.jsx(jm,{asChild:!0,children:f.jsx("button",{onClick:()=>C(O),className:Be("w-6 h-6 sm:w-7 sm:h-7 rounded-full border flex items-center justify-center transition-colors",O.is_pinned?"bg-amber-400/10 border-amber-400/60 text-amber-400":"bg-card/80 border-border/60 text-muted-foreground hover:text-primary hover:border-primary/40"),children:O.is_pinned?f.jsx(gd,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}):f.jsx(oA,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})}),f.jsx(xh,{className:"text-[9px]",children:O.is_pinned?"Unpin from top of customer blog":"Pin as highlight on customer blog"})]}),f.jsxs(km,{children:[f.jsx(jm,{asChild:!0,children:f.jsx("button",{onClick:()=>_(O),className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-muted-foreground hover:text-primary hover:border-primary/40 transition-colors",children:f.jsx(md,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})}),f.jsx(xh,{className:"text-[9px]",children:"Edit post"})]}),f.jsxs(km,{children:[f.jsx(jm,{asChild:!0,children:f.jsx("button",{onClick:()=>S(O.id),disabled:m===O.id,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full border border-border/60 bg-card/80 flex items-center justify-center text-destructive/80 hover:bg-destructive/5 hover:border-destructive/40 transition-colors disabled:opacity-60",children:m===O.id?f.jsx(Qs,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 animate-spin"}):f.jsx(ko,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})})}),f.jsx(xh,{className:"text-[9px]",children:"Delete post"})]})]})]}),O.linked_menu_items&&O.linked_menu_items.length>0&&f.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:O.linked_menu_items.map(D=>f.jsxs("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-primary/5 border border-primary/15 text-[6px] sm:text-[7px] text-primary/80",children:[f.jsx(qu,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5"}),f.jsx("span",{className:"truncate max-w-[60px] sm:max-w-[80px]",children:D.name})]},D.id))}),O.hero_image_url&&f.jsx("div",{className:"mt-1 overflow-hidden rounded-lg border border-border/40 bg-muted/40",children:f.jsx("img",{src:O.hero_image_url,alt:O.title,className:"w-full h-16 sm:h-20 object-cover transform transition-transform duration-500 group-hover:scale-[1.03]"})})]})]},O.id))]})]})}):f.jsx(qe,{className:"p-4 bg-card/80 border-dashed border-border/50",children:f.jsx("p",{className:"text-xs text-muted-foreground",children:"No restaurant is associated with this account yet. Once your restaurant profile is connected, you'll be able to publish elegant blog posts and promotions here."})})},iH=()=>{const t=new Audio("/sound/notification.mp3");return t.preload="auto",t};function sH(t={}){const{user:e}=Wr(),[r,n]=j.useState(null),[i,s]=j.useState([]),[a,c]=j.useState(!0),[h,d]=j.useState(!1),p=t.limit??50,m=t.enableSound??!0,v=j.useCallback(()=>{if(m)try{const A=iH();(()=>{A.currentTime=0,A.play().catch(()=>{})})()}catch{}},[m]);j.useEffect(()=>{(async()=>{if(!e){n(null),s([]),c(!1);return}c(!0);const{data:N,error:_}=await be.from("restaurants").select("id").eq("owner_id",e.id).single();if(_||!N){console.error("Failed to resolve restaurant for owner:",_),n(null),s([]),c(!1);return}n(N.id),c(!1)})()},[e]),j.useEffect(()=>{(async()=>{if(!r||h)return;c(!0);const{data:N,error:_}=await be.from("order_notifications").select(`
          id,
          order_id,
          restaurant_id,
          customer_id,
          title,
          message,
          status,
          created_at,
          orders!inner (
            total_amount,
            status,
            customer_id
          ),
          profiles!left (
            full_name
          )
        `).eq("restaurant_id",r).order("created_at",{ascending:!1}).limit(p);if(_)console.error("Error fetching order_notifications:",_),s([]);else{const C=(N||[]).map(S=>{const O=Array.isArray(S.orders)?S.orders[0]:S.orders||{},D=Array.isArray(S.profiles)?S.profiles[0]:S.profiles||{};return{id:S.id,order_id:S.order_id,restaurant_id:S.restaurant_id,customer_id:S.customer_id,title:S.title,message:S.message,status:S.status,created_at:S.created_at,customer_name:(D==null?void 0:D.full_name)??null,total_amount:(O==null?void 0:O.total_amount)??null,order_status:(O==null?void 0:O.status)??null}});s(C)}d(!0),c(!1)})()},[r,h,p]),j.useEffect(()=>{if(!r)return;const A=be.channel(`order-notifications-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"order_notifications",filter:`restaurant_id=eq.${r}`},async N=>{const _=N.new,{data:C}=await be.from("orders").select("total_amount, status, customer_id").eq("id",_.order_id).single();let S=null;if(C!=null&&C.customer_id){const{data:D}=await be.from("profiles").select("full_name").eq("id",C.customer_id).single();S=(D==null?void 0:D.full_name)??null}const O={id:_.id,order_id:_.order_id,restaurant_id:_.restaurant_id,customer_id:_.customer_id,title:_.title,message:_.message,status:_.status,created_at:_.created_at,customer_name:S,total_amount:(C==null?void 0:C.total_amount)??null,order_status:(C==null?void 0:C.status)??null};s(D=>D.some(M=>M.id===O.id)?D:[O,...D].slice(0,p)),v()}).subscribe(N=>{N==="SUBSCRIBED"&&console.log(` Subscribed to realtime order_notifications for restaurant ${r}`)});return()=>{be.removeChannel(A)}},[r,p,v]);const x=i.filter(A=>A.status==="unread").length,E=j.useCallback(async()=>{if(!r||i.length===0)return;const A=i.filter(_=>_.status==="unread").map(_=>_.id);if(A.length===0)return;const{error:N}=await be.from("order_notifications").update({status:"read"}).in("id",A);if(N){console.error("Failed to mark notifications as read:",N);return}s(_=>_.map(C=>A.includes(C.id)?{...C,status:"read"}:C))},[r,i]),w=j.useCallback(async A=>{if(!A)return;const{error:N}=await be.from("order_notifications").update({status:"read"}).eq("id",A);if(N){console.error("Failed to mark notification as read:",N);return}s(_=>_.map(C=>C.id===A?{...C,status:"read"}:C))},[]);return{restaurantId:r,notifications:i,unreadCount:x,loading:a,markAllAsRead:E,markAsRead:w}}var cv=["Enter"," "],oH=["ArrowDown","PageUp","Home"],mI=["ArrowUp","PageDown","End"],aH=[...oH,...mI],lH={ltr:[...cv,"ArrowRight"],rtl:[...cv,"ArrowLeft"]},cH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ef="Menu",[Pd,uH,dH]=Y0(ef),[ul,gI]=En(ef,[dH,qc,Kc]),Np=qc(),vI=Kc(),[fH,dl]=ul(ef),[hH,tf]=ul(ef),yI=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:s,modal:a=!0}=t,c=Np(e),[h,d]=j.useState(null),p=j.useRef(!1),m=pr(s),v=Yc(i);return j.useEffect(()=>{const x=()=>{p.current=!0,document.addEventListener("pointerdown",E,{capture:!0,once:!0}),document.addEventListener("pointermove",E,{capture:!0,once:!0})},E=()=>p.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",E,{capture:!0}),document.removeEventListener("pointermove",E,{capture:!0})}},[]),f.jsx(Iy,{...c,children:f.jsx(fH,{scope:e,open:r,onOpenChange:m,content:h,onContentChange:d,children:f.jsx(hH,{scope:e,onClose:j.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:p,dir:v,modal:a,children:n})})})};yI.displayName=ef;var pH="MenuAnchor",Px=j.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=Np(r);return f.jsx(Ry,{...i,...n,ref:e})});Px.displayName=pH;var Dx="MenuPortal",[mH,xI]=ul(Dx,{forceMount:void 0}),wI=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,s=dl(Dx,e);return f.jsx(mH,{scope:e,forceMount:r,children:f.jsx(dn,{present:r||s.open,children:f.jsx(Vd,{asChild:!0,container:i,children:n})})})};wI.displayName=Dx;var Ai="MenuContent",[gH,Lx]=ul(Ai),bI=j.forwardRef((t,e)=>{const r=xI(Ai,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=dl(Ai,t.__scopeMenu),a=tf(Ai,t.__scopeMenu);return f.jsx(Pd.Provider,{scope:t.__scopeMenu,children:f.jsx(dn,{present:n||s.open,children:f.jsx(Pd.Slot,{scope:t.__scopeMenu,children:a.modal?f.jsx(vH,{...i,ref:e}):f.jsx(yH,{...i,ref:e})})})})}),vH=j.forwardRef((t,e)=>{const r=dl(Ai,t.__scopeMenu),n=j.useRef(null),i=ot(e,n);return j.useEffect(()=>{const s=n.current;if(s)return bx(s)},[]),f.jsx(Bx,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Pe(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),yH=j.forwardRef((t,e)=>{const r=dl(Ai,t.__scopeMenu);return f.jsx(Bx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),xH=Qa("MenuContent.ScrollLock"),Bx=j.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEntryFocus:h,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:v,onDismiss:x,disableOutsideScroll:E,...w}=t,A=dl(Ai,r),N=tf(Ai,r),_=Np(r),C=vI(r),S=uH(r),[O,D]=j.useState(null),M=j.useRef(null),R=ot(e,M,A.onContentChange),k=j.useRef(0),L=j.useRef(""),B=j.useRef(0),F=j.useRef(null),H=j.useRef("right"),z=j.useRef(0),$=E?vp:j.Fragment,ee=E?{as:xH,allowPinchZoom:!0}:void 0,J=Y=>{var ne,ue;const K=L.current+Y,V=S().filter(fe=>!fe.disabled),G=document.activeElement,Z=(ne=V.find(fe=>fe.ref.current===G))==null?void 0:ne.textValue,se=V.map(fe=>fe.textValue),ae=RH(se,K,Z),X=(ue=V.find(fe=>fe.textValue===ae))==null?void 0:ue.ref.current;(function fe(oe){L.current=oe,window.clearTimeout(k.current),oe!==""&&(k.current=window.setTimeout(()=>fe(""),1e3))})(K),X&&setTimeout(()=>X.focus())};j.useEffect(()=>()=>window.clearTimeout(k.current),[]),wx();const te=j.useCallback(Y=>{var V,G;return H.current===((V=F.current)==null?void 0:V.side)&&jH(Y,(G=F.current)==null?void 0:G.area)},[]);return f.jsx(gH,{scope:r,searchRef:L,onItemEnter:j.useCallback(Y=>{te(Y)&&Y.preventDefault()},[te]),onItemLeave:j.useCallback(Y=>{var K;te(Y)||((K=M.current)==null||K.focus(),D(null))},[te]),onTriggerLeave:j.useCallback(Y=>{te(Y)&&Y.preventDefault()},[te]),pointerGraceTimerRef:B,onPointerGraceIntentChange:j.useCallback(Y=>{F.current=Y},[]),children:f.jsx($,{...ee,children:f.jsx(mp,{asChild:!0,trapped:i,onMountAutoFocus:Pe(s,Y=>{var K;Y.preventDefault(),(K=M.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:f.jsx(zc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:v,onDismiss:x,children:f.jsx(mx,{asChild:!0,...C,dir:N.dir,orientation:"vertical",loop:n,currentTabStopId:O,onCurrentTabStopIdChange:D,onEntryFocus:Pe(h,Y=>{N.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(ky,{role:"menu","aria-orientation":"vertical","data-state":LI(A.open),"data-radix-menu-content":"",dir:N.dir,..._,...w,ref:R,style:{outline:"none",...w.style},onKeyDown:Pe(w.onKeyDown,Y=>{const V=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,G=Y.ctrlKey||Y.altKey||Y.metaKey,Z=Y.key.length===1;V&&(Y.key==="Tab"&&Y.preventDefault(),!G&&Z&&J(Y.key));const se=M.current;if(Y.target!==se||!aH.includes(Y.key))return;Y.preventDefault();const X=S().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);mI.includes(Y.key)&&X.reverse(),OH(X)}),onBlur:Pe(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(k.current),L.current="")}),onPointerMove:Pe(t.onPointerMove,Dd(Y=>{const K=Y.target,V=z.current!==Y.clientX;if(Y.currentTarget.contains(K)&&V){const G=Y.clientX>z.current?"right":"left";H.current=G,z.current=Y.clientX}}))})})})})})})});bI.displayName=Ai;var wH="MenuGroup",Fx=j.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return f.jsx(We.div,{role:"group",...n,ref:e})});Fx.displayName=wH;var bH="MenuLabel",_I=j.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return f.jsx(We.div,{...n,ref:e})});_I.displayName=bH;var S0="MenuItem",S_="menu.itemSelect",Tp=j.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...i}=t,s=j.useRef(null),a=tf(S0,t.__scopeMenu),c=Lx(S0,t.__scopeMenu),h=ot(e,s),d=j.useRef(!1),p=()=>{const m=s.current;if(!r&&m){const v=new CustomEvent(S_,{bubbles:!0,cancelable:!0});m.addEventListener(S_,x=>n==null?void 0:n(x),{once:!0}),dy(m,v),v.defaultPrevented?d.current=!1:a.onClose()}};return f.jsx(EI,{...i,ref:h,disabled:r,onClick:Pe(t.onClick,p),onPointerDown:m=>{var v;(v=t.onPointerDown)==null||v.call(t,m),d.current=!0},onPointerUp:Pe(t.onPointerUp,m=>{var v;d.current||(v=m.currentTarget)==null||v.click()}),onKeyDown:Pe(t.onKeyDown,m=>{const v=c.searchRef.current!=="";r||v&&m.key===" "||cv.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Tp.displayName=S0;var EI=j.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...s}=t,a=Lx(S0,r),c=vI(r),h=j.useRef(null),d=ot(e,h),[p,m]=j.useState(!1),[v,x]=j.useState("");return j.useEffect(()=>{const E=h.current;E&&x((E.textContent??"").trim())},[s.children]),f.jsx(Pd.ItemSlot,{scope:r,disabled:n,textValue:i??v,children:f.jsx(gx,{asChild:!0,...c,focusable:!n,children:f.jsx(We.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:d,onPointerMove:Pe(t.onPointerMove,Dd(E=>{n?a.onItemLeave(E):(a.onItemEnter(E),E.defaultPrevented||E.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(t.onPointerLeave,Dd(E=>a.onItemLeave(E))),onFocus:Pe(t.onFocus,()=>m(!0)),onBlur:Pe(t.onBlur,()=>m(!1))})})})}),_H="MenuCheckboxItem",SI=j.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...i}=t;return f.jsx(OI,{scope:t.__scopeMenu,checked:r,children:f.jsx(Tp,{role:"menuitemcheckbox","aria-checked":C0(r)?"mixed":r,...i,ref:e,"data-state":zx(r),onSelect:Pe(i.onSelect,()=>n==null?void 0:n(C0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});SI.displayName=_H;var CI="MenuRadioGroup",[EH,SH]=ul(CI,{value:void 0,onValueChange:()=>{}}),AI=j.forwardRef((t,e)=>{const{value:r,onValueChange:n,...i}=t,s=pr(n);return f.jsx(EH,{scope:t.__scopeMenu,value:r,onValueChange:s,children:f.jsx(Fx,{...i,ref:e})})});AI.displayName=CI;var NI="MenuRadioItem",TI=j.forwardRef((t,e)=>{const{value:r,...n}=t,i=SH(NI,t.__scopeMenu),s=r===i.value;return f.jsx(OI,{scope:t.__scopeMenu,checked:s,children:f.jsx(Tp,{role:"menuitemradio","aria-checked":s,...n,ref:e,"data-state":zx(s),onSelect:Pe(n.onSelect,()=>{var a;return(a=i.onValueChange)==null?void 0:a.call(i,r)},{checkForDefaultPrevented:!1})})})});TI.displayName=NI;var Ux="MenuItemIndicator",[OI,CH]=ul(Ux,{checked:!1}),II=j.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...i}=t,s=CH(Ux,r);return f.jsx(dn,{present:n||C0(s.checked)||s.checked===!0,children:f.jsx(We.span,{...i,ref:e,"data-state":zx(s.checked)})})});II.displayName=Ux;var AH="MenuSeparator",RI=j.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return f.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});RI.displayName=AH;var NH="MenuArrow",kI=j.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,i=Np(r);return f.jsx(jy,{...i,...n,ref:e})});kI.displayName=NH;var TH="MenuSub",[kQ,jI]=ul(TH),Mu="MenuSubTrigger",MI=j.forwardRef((t,e)=>{const r=dl(Mu,t.__scopeMenu),n=tf(Mu,t.__scopeMenu),i=jI(Mu,t.__scopeMenu),s=Lx(Mu,t.__scopeMenu),a=j.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:h}=s,d={__scopeMenu:t.__scopeMenu},p=j.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return j.useEffect(()=>p,[p]),j.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),h(null)}},[c,h]),f.jsx(Px,{asChild:!0,...d,children:f.jsx(EI,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":LI(r.open),...t,ref:G0(e,i.onTriggerChange),onClick:m=>{var v;(v=t.onClick)==null||v.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Pe(t.onPointerMove,Dd(m=>{s.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:Pe(t.onPointerLeave,Dd(m=>{var x,E;p();const v=(x=r.content)==null?void 0:x.getBoundingClientRect();if(v){const w=(E=r.content)==null?void 0:E.dataset.side,A=w==="right",N=A?-5:5,_=v[A?"left":"right"],C=v[A?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+N,y:m.clientY},{x:_,y:v.top},{x:C,y:v.top},{x:C,y:v.bottom},{x:_,y:v.bottom}],side:w}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(t.onKeyDown,m=>{var x;const v=s.searchRef.current!=="";t.disabled||v&&m.key===" "||lH[n.dir].includes(m.key)&&(r.onOpenChange(!0),(x=r.content)==null||x.focus(),m.preventDefault())})})})});MI.displayName=Mu;var PI="MenuSubContent",DI=j.forwardRef((t,e)=>{const r=xI(Ai,t.__scopeMenu),{forceMount:n=r.forceMount,...i}=t,s=dl(Ai,t.__scopeMenu),a=tf(Ai,t.__scopeMenu),c=jI(PI,t.__scopeMenu),h=j.useRef(null),d=ot(e,h);return f.jsx(Pd.Provider,{scope:t.__scopeMenu,children:f.jsx(dn,{present:n||s.open,children:f.jsx(Pd.Slot,{scope:t.__scopeMenu,children:f.jsx(Bx,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var m;a.isUsingKeyboardRef.current&&((m=h.current)==null||m.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:Pe(t.onFocusOutside,p=>{p.target!==c.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Pe(t.onEscapeKeyDown,p=>{a.onClose(),p.preventDefault()}),onKeyDown:Pe(t.onKeyDown,p=>{var x;const m=p.currentTarget.contains(p.target),v=cH[a.dir].includes(p.key);m&&v&&(s.onOpenChange(!1),(x=c.trigger)==null||x.focus(),p.preventDefault())})})})})})});DI.displayName=PI;function LI(t){return t?"open":"closed"}function C0(t){return t==="indeterminate"}function zx(t){return C0(t)?"indeterminate":t?"checked":"unchecked"}function OH(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function IH(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function RH(t,e,r){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let a=IH(t,Math.max(s,0));i.length===1&&(a=a.filter(d=>d!==r));const h=a.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return h!==r?h:void 0}function kH(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const c=e[s],h=e[a],d=c.x,p=c.y,m=h.x,v=h.y;p>n!=v>n&&r<(m-d)*(n-p)/(v-p)+d&&(i=!i)}return i}function jH(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return kH(r,e)}function Dd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var MH=yI,PH=Px,DH=wI,LH=bI,BH=Fx,FH=_I,UH=Tp,zH=SI,$H=AI,HH=TI,VH=II,qH=RI,WH=kI,GH=MI,YH=DI,Op="DropdownMenu",[KH,jQ]=En(Op,[gI]),Sn=gI(),[XH,BI]=KH(Op),FI=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:s,onOpenChange:a,modal:c=!0}=t,h=Sn(e),d=j.useRef(null),[p,m]=Ss({prop:i,defaultProp:s??!1,onChange:a,caller:Op});return f.jsx(XH,{scope:e,triggerId:Xi(),triggerRef:d,contentId:Xi(),open:p,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(v=>!v),[m]),modal:c,children:f.jsx(MH,{...h,open:p,onOpenChange:m,dir:n,modal:c,children:r})})};FI.displayName=Op;var UI="DropdownMenuTrigger",zI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=t,s=BI(UI,r),a=Sn(r);return f.jsx(PH,{asChild:!0,...a,children:f.jsx(We.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:G0(e,s.triggerRef),onPointerDown:Pe(t.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(s.onOpenToggle(),s.open||c.preventDefault())}),onKeyDown:Pe(t.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&s.onOpenToggle(),c.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});zI.displayName=UI;var QH="DropdownMenuPortal",$I=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Sn(e);return f.jsx(DH,{...n,...r})};$I.displayName=QH;var HI="DropdownMenuContent",VI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=BI(HI,r),s=Sn(r),a=j.useRef(!1);return f.jsx(LH,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...n,ref:e,onCloseAutoFocus:Pe(t.onCloseAutoFocus,c=>{var h;a.current||(h=i.triggerRef.current)==null||h.focus(),a.current=!1,c.preventDefault()}),onInteractOutside:Pe(t.onInteractOutside,c=>{const h=c.detail.originalEvent,d=h.button===0&&h.ctrlKey===!0,p=h.button===2||d;(!i.modal||p)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VI.displayName=HI;var ZH="DropdownMenuGroup",JH=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(BH,{...i,...n,ref:e})});JH.displayName=ZH;var eV="DropdownMenuLabel",qI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(FH,{...i,...n,ref:e})});qI.displayName=eV;var tV="DropdownMenuItem",WI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(UH,{...i,...n,ref:e})});WI.displayName=tV;var rV="DropdownMenuCheckboxItem",GI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(zH,{...i,...n,ref:e})});GI.displayName=rV;var nV="DropdownMenuRadioGroup",iV=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx($H,{...i,...n,ref:e})});iV.displayName=nV;var sV="DropdownMenuRadioItem",YI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(HH,{...i,...n,ref:e})});YI.displayName=sV;var oV="DropdownMenuItemIndicator",KI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(VH,{...i,...n,ref:e})});KI.displayName=oV;var aV="DropdownMenuSeparator",XI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(qH,{...i,...n,ref:e})});XI.displayName=aV;var lV="DropdownMenuArrow",cV=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(WH,{...i,...n,ref:e})});cV.displayName=lV;var uV="DropdownMenuSubTrigger",QI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(GH,{...i,...n,ref:e})});QI.displayName=uV;var dV="DropdownMenuSubContent",ZI=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,i=Sn(r);return f.jsx(YH,{...i,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZI.displayName=dV;var fV=FI,hV=zI,pV=$I,JI=VI,eR=qI,tR=WI,rR=GI,nR=YI,iR=KI,sR=XI,oR=QI,aR=ZI;const mV=fV,gV=hV,vV=j.forwardRef(({className:t,inset:e,children:r,...n},i)=>f.jsxs(oR,{ref:i,className:Be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...n,children:[r,f.jsx(JC,{className:"ml-auto h-4 w-4"})]}));vV.displayName=oR.displayName;const yV=j.forwardRef(({className:t,...e},r)=>f.jsx(aR,{ref:r,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));yV.displayName=aR.displayName;const lR=j.forwardRef(({className:t,sideOffset:e=4,...r},n)=>f.jsx(pV,{children:f.jsx(JI,{ref:n,sideOffset:e,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));lR.displayName=JI.displayName;const cR=j.forwardRef(({className:t,inset:e,...r},n)=>f.jsx(tR,{ref:n,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...r}));cR.displayName=tR.displayName;const xV=j.forwardRef(({className:t,children:e,checked:r,...n},i)=>f.jsxs(rR,{ref:i,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(iR,{children:f.jsx(ZC,{className:"h-4 w-4"})})}),e]}));xV.displayName=rR.displayName;const wV=j.forwardRef(({className:t,children:e,...r},n)=>f.jsxs(nR,{ref:n,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(iR,{children:f.jsx(tA,{className:"h-2 w-2 fill-current"})})}),e]}));wV.displayName=nR.displayName;const uR=j.forwardRef(({className:t,inset:e,...r},n)=>f.jsx(eR,{ref:n,className:Be("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));uR.displayName=eR.displayName;const dR=j.forwardRef(({className:t,...e},r)=>f.jsx(sR,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",t),...e}));dR.displayName=sR.displayName;const bV=()=>{const{signOut:t}=Wr(),e=qr(),r=Is(),[n,i]=j.useState("blog");j.useEffect(()=>{const S=new URLSearchParams(r.search).get("tab");S&&["orders","scanner","menu","blog","settings"].includes(S)&&i(S)},[r.search]);const{restaurantId:s,notifications:a,unreadCount:c,loading:h,markAllAsRead:d,markAsRead:p}=sH({limit:50,enableSound:!0}),[m,v]=j.useState(null),[x,E]=j.useState(null),[w,A]=j.useState(!1),N=async()=>{await t(),e("/auth")},_=async C=>{if(C!=null&&C.order_id){v(C.order_id),E(null),A(!0),C.id&&p(C.id);try{const{supabase:S}=await Jo(async()=>{const{supabase:k}=await Promise.resolve().then(()=>I2);return{supabase:k}},void 0),{data:O,error:D}=await S.from("orders").select(`
          id,
          order_items,
          total_amount,
          status,
          created_at,
          order_type,
          customer_id
        `).eq("id",C.order_id).single();if(D||!O){console.error("Failed to load order detail for notification:",D);return}let M=null,R=null;if(O.customer_id){const{data:k,error:L}=await S.rpc("get_order_customers",{customer_ids:[O.customer_id]});if(L)console.error("Failed to load customer details for modal:",L);else if(k&&k.length>0){const B=k[0];M=B.full_name&&String(B.full_name).trim()||null,R=B.phone&&String(B.phone).trim()||null}}!M&&C.customer_name&&typeof C.customer_name=="string"&&C.customer_name.trim()&&(M=C.customer_name.trim()),E({...O,customer_display_name:M,customer_display_phone:R})}catch(S){console.error("Error loading order detail module:",S)}}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-secondary/10 to-background pb-20",children:[f.jsx("header",{className:"border-b border-border/50 bg-card/80 backdrop-blur-xl sticky top-0 z-40",children:f.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-full luxury-gradient flex items-center justify-center",children:f.jsx(vy,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Restaurant Dashboard"}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage your restaurant",s?"  Live order notifications enabled":""]})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(mV,{children:[f.jsx(gV,{asChild:!0,children:f.jsxs("button",{type:"button",className:"relative inline-flex items-center justify-center w-10 h-10 rounded-full border border-border bg-card/70 hover:bg-primary/5 transition-colors",children:[f.jsx(XC,{className:"w-5 h-5 text-foreground"}),c>0&&f.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 rounded-full bg-red-500 text-[10px] font-semibold text-white flex items-center justify-center",children:c>99?"99+":c})]})}),f.jsxs(lR,{align:"end",className:"w-[320px] max-h-[420px] p-0 overflow-hidden",children:[f.jsxs(uR,{className:"flex items-center justify-between px-3 py-2",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-semibold",children:"Order Notifications"}),f.jsx("span",{className:"text-[10px] text-muted-foreground",children:h?"Loading...":a.length===0?"No notifications yet":`${c} unread  ${a.length} total`})]}),c>0&&f.jsx("button",{onClick:C=>{C.stopPropagation(),d()},className:"text-[10px] text-primary hover:underline",children:"Mark all read"})]}),f.jsx(dR,{}),f.jsx(_p,{className:"max-h-[340px]",children:f.jsx("div",{className:"max-h-[340px] overflow-y-auto no-scrollbar",children:a.length===0?f.jsx("div",{className:"px-3 py-6 text-center text-[10px] text-muted-foreground",children:"You will see new orders here in real time."}):a.map(C=>{const S=C.message&&C.message.trim().length>0?C.message:C.customer_name&&C.total_amount?`${C.customer_name} placed an order of ${Number(C.total_amount).toLocaleString()} MMK`:"New order received";return f.jsxs(cR,{onClick:()=>_(C),className:`
                              w-full px-3 py-2.5 flex items-start gap-2
                              cursor-pointer transition-colors
                              ${C.status==="unread"?"bg-primary/5 hover:bg-primary/10":"hover:bg-accent/40"}
                            `,children:[f.jsx("div",{className:"mt-1 w-2 h-2 flex-shrink-0",children:C.status==="unread"?f.jsx("span",{className:"block w-2 h-2 rounded-full bg-red-500"}):f.jsx("span",{className:"block w-2 h-2 rounded-full border border-emerald-500 bg-emerald-500/0 relative",children:f.jsx("span",{className:"absolute inset-[2px] bg-emerald-500 rounded-full"})})}),f.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",children:[f.jsx("div",{className:`
                                  text-[9px] text-left
                                  ${C.status==="unread"?"font-semibold text-foreground":"font-normal text-foreground"}
                                `,children:S}),f.jsx("div",{className:"text-[8px] text-muted-foreground/70 text-right",children:(()=>{const O=new Date(C.created_at),D=String(O.getDate()).padStart(2,"0"),M=String(O.getMonth()+1).padStart(2,"0"),R=O.getFullYear();let k=O.getHours();const L=String(O.getMinutes()).padStart(2,"0"),B=k>=12?"PM":"AM";return k=k%12||12,`${D}/${M}/${R} ${k}:${L} ${B}`})()})]})]},C.id)})})})]})]}),f.jsxs(De,{variant:"outline",size:"sm",onClick:N,className:"gap-2",children:[f.jsx(Z0,{className:"w-4 h-4"}),"Logout"]})]})]})}),f.jsxs("main",{className:"container mx-auto px-4 py-6",children:[n==="orders"&&f.jsx(o$,{}),n==="scanner"&&f.jsx(q$,{}),n==="menu"&&f.jsx(Q$,{}),n==="blog"&&f.jsx(nH,{}),n==="settings"&&f.jsx(Z$,{}),f.jsx(Ts,{open:w,onOpenChange:A,children:f.jsxs(ts,{className:"max-w-md",children:[f.jsxs(ro,{children:[f.jsx(no,{children:"Order Details"}),f.jsx(pO,{children:"View details for this order from your notifications."})]}),x?f.jsxs("div",{className:"space-y-3 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Order ID"}),f.jsx("span",{className:"font-mono text-xs",children:String(x.id).substring(0,8)})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Customer"}),f.jsx("span",{children:(()=>{const C=x.customer_display_name&&String(x.customer_display_name).trim()||null,S=x.customer_display_phone&&String(x.customer_display_phone).trim()||null;return C&&S?`${C}  ${S}`:C||S||"Customer"})()})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Total Amount"}),f.jsxs("span",{className:"font-semibold",children:[Number(x.total_amount||0).toLocaleString()," MMK"]})]}),f.jsxs("div",{className:"flex justify-between items-center gap-3",children:[f.jsx("span",{className:"font-medium",children:"Status"}),f.jsxs("select",{className:"text-xs px-2 py-1 border border-border rounded-md bg-background capitalize",value:x.status||"paid",onChange:async C=>{const S=C.target.value;try{const{supabase:O}=await Jo(async()=>{const{supabase:M}=await Promise.resolve().then(()=>I2);return{supabase:M}},void 0),{error:D}=await O.from("orders").update({status:S}).eq("id",x.id);if(D){console.error("Failed to update order status from modal:",D);return}E(M=>M&&{...M,status:S}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:x.id,status:S}}))}catch(O){console.error("Error updating order status from modal:",O)}},children:[f.jsx("option",{value:"paid",children:"Paid"}),f.jsx("option",{value:"preparing",children:"Preparing"}),f.jsx("option",{value:"ready",children:"Ready"}),f.jsx("option",{value:"served",children:"Served"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:"Type"}),f.jsx("span",{className:"capitalize",children:x.order_type||"dine_in"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Placed At"}),f.jsx("div",{className:"text-xs text-muted-foreground",children:x.created_at?(()=>{const C=new Date(x.created_at),S=String(C.getDate()).padStart(2,"0"),O=String(C.getMonth()+1).padStart(2,"0"),D=C.getFullYear();let M=C.getHours();const R=String(C.getMinutes()).padStart(2,"0"),k=M>=12?"PM":"AM";return M=M%12||12,`${S}/${O}/${D} - ${M}:${R} ${k}`})():""})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Items"}),f.jsx("ul",{className:"mt-1 space-y-0.5",children:(x.order_items||[]).map((C,S)=>f.jsxs("li",{className:"flex justify-between text-xs text-muted-foreground",children:[f.jsxs("span",{children:[C.quantity,"x ",C.name]}),C.price&&f.jsxs("span",{children:[Number(C.price*C.quantity).toLocaleString()," ","MMK"]})]},S))})]})]}):f.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Loading order details..."})]})})]}),f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border glass-effect z-50",children:f.jsxs("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:[f.jsxs("button",{onClick:()=>{i("orders"),e("/dashboard?tab=orders")},className:`flex flex-col items-center justify-center flex-1 transition-colors ${n==="orders"?"text-primary":"text-muted-foreground"}`,children:[f.jsx(aA,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Orders"})]}),f.jsxs("button",{onClick:()=>{i("scanner"),e("/dashboard?tab=scanner")},className:`flex flex-col items-center justify-center flex-1 transition-colors ${n==="scanner"?"text-primary":"text-muted-foreground"}`,children:[f.jsx(PM,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"QR Scanner"})]}),f.jsxs("button",{onClick:()=>{i("menu"),e("/dashboard?tab=menu")},className:`flex flex-col items-center justify-center flex-1 transition-colors ${n==="menu"?"text-primary":"text-muted-foreground"}`,children:[f.jsx(IM,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Menu"})]}),f.jsxs("button",{onClick:()=>{i("blog"),e("/dashboard?tab=blog")},className:`flex flex-col items-center justify-center flex-1 transition-colors ${n==="blog"?"text-primary":"text-muted-foreground"}`,children:[f.jsx(my,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Blog"})]}),f.jsxs("button",{onClick:()=>{i("settings"),e("/dashboard?tab=settings")},className:`flex flex-col items-center justify-center flex-1 transition-colors ${n==="settings"?"text-primary":"text-muted-foreground"}`,children:[f.jsx(DM,{className:"h-5 w-5 mb-1"}),f.jsx("span",{className:"text-xs font-medium",children:"Settings"})]})]})})]})};function _V(){this.__data__=[],this.size=0}var EV=_V;function SV(t,e){return t===e||t!==t&&e!==e}var fR=SV,CV=fR;function AV(t,e){for(var r=t.length;r--;)if(CV(t[r][0],e))return r;return-1}var Ip=AV,NV=Ip,TV=Array.prototype,OV=TV.splice;function IV(t){var e=this.__data__,r=NV(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():OV.call(e,r,1),--this.size,!0}var RV=IV,kV=Ip;function jV(t){var e=this.__data__,r=kV(e,t);return r<0?void 0:e[r][1]}var MV=jV,PV=Ip;function DV(t){return PV(this.__data__,t)>-1}var LV=DV,BV=Ip;function FV(t,e){var r=this.__data__,n=BV(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var UV=FV,zV=EV,$V=RV,HV=MV,VV=LV,qV=UV;function Qc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qc.prototype.clear=zV;Qc.prototype.delete=$V;Qc.prototype.get=HV;Qc.prototype.has=VV;Qc.prototype.set=qV;var Rp=Qc,WV=Rp;function GV(){this.__data__=new WV,this.size=0}var YV=GV;function KV(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var XV=KV;function QV(t){return this.__data__.get(t)}var ZV=QV;function JV(t){return this.__data__.has(t)}var eq=JV,tq=typeof $r=="object"&&$r&&$r.Object===Object&&$r,hR=tq,rq=hR,nq=typeof self=="object"&&self&&self.Object===Object&&self,iq=rq||nq||Function("return this")(),so=iq,sq=so,oq=sq.Symbol,$x=oq,C_=$x,pR=Object.prototype,aq=pR.hasOwnProperty,lq=pR.toString,Su=C_?C_.toStringTag:void 0;function cq(t){var e=aq.call(t,Su),r=t[Su];try{t[Su]=void 0;var n=!0}catch{}var i=lq.call(t);return n&&(e?t[Su]=r:delete t[Su]),i}var uq=cq,dq=Object.prototype,fq=dq.toString;function hq(t){return fq.call(t)}var pq=hq,A_=$x,mq=uq,gq=pq,vq="[object Null]",yq="[object Undefined]",N_=A_?A_.toStringTag:void 0;function xq(t){return t==null?t===void 0?yq:vq:N_&&N_ in Object(t)?mq(t):gq(t)}var kp=xq;function wq(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var mR=wq,bq=kp,_q=mR,Eq="[object AsyncFunction]",Sq="[object Function]",Cq="[object GeneratorFunction]",Aq="[object Proxy]";function Nq(t){if(!_q(t))return!1;var e=bq(t);return e==Sq||e==Cq||e==Eq||e==Aq}var gR=Nq,Tq=so,Oq=Tq["__core-js_shared__"],Iq=Oq,l1=Iq,T_=function(){var t=/[^.]+$/.exec(l1&&l1.keys&&l1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Rq(t){return!!T_&&T_ in t}var kq=Rq,jq=Function.prototype,Mq=jq.toString;function Pq(t){if(t!=null){try{return Mq.call(t)}catch{}try{return t+""}catch{}}return""}var vR=Pq,Dq=gR,Lq=kq,Bq=mR,Fq=vR,Uq=/[\\^$.*+?()[\]{}|]/g,zq=/^\[object .+?Constructor\]$/,$q=Function.prototype,Hq=Object.prototype,Vq=$q.toString,qq=Hq.hasOwnProperty,Wq=RegExp("^"+Vq.call(qq).replace(Uq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gq(t){if(!Bq(t)||Lq(t))return!1;var e=Dq(t)?Wq:zq;return e.test(Fq(t))}var Yq=Gq;function Kq(t,e){return t==null?void 0:t[e]}var Xq=Kq,Qq=Yq,Zq=Xq;function Jq(t,e){var r=Zq(t,e);return Qq(r)?r:void 0}var Zc=Jq,eW=Zc,tW=so,rW=eW(tW,"Map"),Hx=rW,nW=Zc,iW=nW(Object,"create"),jp=iW,O_=jp;function sW(){this.__data__=O_?O_(null):{},this.size=0}var oW=sW;function aW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var lW=aW,cW=jp,uW="__lodash_hash_undefined__",dW=Object.prototype,fW=dW.hasOwnProperty;function hW(t){var e=this.__data__;if(cW){var r=e[t];return r===uW?void 0:r}return fW.call(e,t)?e[t]:void 0}var pW=hW,mW=jp,gW=Object.prototype,vW=gW.hasOwnProperty;function yW(t){var e=this.__data__;return mW?e[t]!==void 0:vW.call(e,t)}var xW=yW,wW=jp,bW="__lodash_hash_undefined__";function _W(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=wW&&e===void 0?bW:e,this}var EW=_W,SW=oW,CW=lW,AW=pW,NW=xW,TW=EW;function Jc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Jc.prototype.clear=SW;Jc.prototype.delete=CW;Jc.prototype.get=AW;Jc.prototype.has=NW;Jc.prototype.set=TW;var OW=Jc,I_=OW,IW=Rp,RW=Hx;function kW(){this.size=0,this.__data__={hash:new I_,map:new(RW||IW),string:new I_}}var jW=kW;function MW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var PW=MW,DW=PW;function LW(t,e){var r=t.__data__;return DW(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Mp=LW,BW=Mp;function FW(t){var e=BW(this,t).delete(t);return this.size-=e?1:0,e}var UW=FW,zW=Mp;function $W(t){return zW(this,t).get(t)}var HW=$W,VW=Mp;function qW(t){return VW(this,t).has(t)}var WW=qW,GW=Mp;function YW(t,e){var r=GW(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var KW=YW,XW=jW,QW=UW,ZW=HW,JW=WW,eG=KW;function eu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}eu.prototype.clear=XW;eu.prototype.delete=QW;eu.prototype.get=ZW;eu.prototype.has=JW;eu.prototype.set=eG;var yR=eu,tG=Rp,rG=Hx,nG=yR,iG=200;function sG(t,e){var r=this.__data__;if(r instanceof tG){var n=r.__data__;if(!rG||n.length<iG-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new nG(n)}return r.set(t,e),this.size=r.size,this}var oG=sG,aG=Rp,lG=YV,cG=XV,uG=ZV,dG=eq,fG=oG;function tu(t){var e=this.__data__=new aG(t);this.size=e.size}tu.prototype.clear=lG;tu.prototype.delete=cG;tu.prototype.get=uG;tu.prototype.has=dG;tu.prototype.set=fG;var hG=tu,pG="__lodash_hash_undefined__";function mG(t){return this.__data__.set(t,pG),this}var gG=mG;function vG(t){return this.__data__.has(t)}var yG=vG,xG=yR,wG=gG,bG=yG;function A0(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new xG;++e<r;)this.add(t[e])}A0.prototype.add=A0.prototype.push=wG;A0.prototype.has=bG;var _G=A0;function EG(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var SG=EG;function CG(t,e){return t.has(e)}var AG=CG,NG=_G,TG=SG,OG=AG,IG=1,RG=2;function kG(t,e,r,n,i,s){var a=r&IG,c=t.length,h=e.length;if(c!=h&&!(a&&h>c))return!1;var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=-1,v=!0,x=r&RG?new NG:void 0;for(s.set(t,e),s.set(e,t);++m<c;){var E=t[m],w=e[m];if(n)var A=a?n(w,E,m,e,t,s):n(E,w,m,t,e,s);if(A!==void 0){if(A)continue;v=!1;break}if(x){if(!TG(e,function(N,_){if(!OG(x,_)&&(E===N||i(E,N,r,n,s)))return x.push(_)})){v=!1;break}}else if(!(E===w||i(E,w,r,n,s))){v=!1;break}}return s.delete(t),s.delete(e),v}var xR=kG,jG=so,MG=jG.Uint8Array,PG=MG;function DG(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var LG=DG;function BG(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var FG=BG,R_=$x,k_=PG,UG=fR,zG=xR,$G=LG,HG=FG,VG=1,qG=2,WG="[object Boolean]",GG="[object Date]",YG="[object Error]",KG="[object Map]",XG="[object Number]",QG="[object RegExp]",ZG="[object Set]",JG="[object String]",eY="[object Symbol]",tY="[object ArrayBuffer]",rY="[object DataView]",j_=R_?R_.prototype:void 0,c1=j_?j_.valueOf:void 0;function nY(t,e,r,n,i,s,a){switch(r){case rY:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tY:return!(t.byteLength!=e.byteLength||!s(new k_(t),new k_(e)));case WG:case GG:case XG:return UG(+t,+e);case YG:return t.name==e.name&&t.message==e.message;case QG:case JG:return t==e+"";case KG:var c=$G;case ZG:var h=n&VG;if(c||(c=HG),t.size!=e.size&&!h)return!1;var d=a.get(t);if(d)return d==e;n|=qG,a.set(t,e);var p=zG(c(t),c(e),n,i,s,a);return a.delete(t),p;case eY:if(c1)return c1.call(t)==c1.call(e)}return!1}var iY=nY;function sY(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var oY=sY,aY=Array.isArray,Vx=aY,lY=oY,cY=Vx;function uY(t,e,r){var n=e(t);return cY(t)?n:lY(n,r(t))}var dY=uY;function fY(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var hY=fY;function pY(){return[]}var mY=pY,gY=hY,vY=mY,yY=Object.prototype,xY=yY.propertyIsEnumerable,M_=Object.getOwnPropertySymbols,wY=M_?function(t){return t==null?[]:(t=Object(t),gY(M_(t),function(e){return xY.call(t,e)}))}:vY,bY=wY;function _Y(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var EY=_Y;function SY(t){return t!=null&&typeof t=="object"}var Pp=SY,CY=kp,AY=Pp,NY="[object Arguments]";function TY(t){return AY(t)&&CY(t)==NY}var OY=TY,P_=OY,IY=Pp,wR=Object.prototype,RY=wR.hasOwnProperty,kY=wR.propertyIsEnumerable,jY=P_(function(){return arguments}())?P_:function(t){return IY(t)&&RY.call(t,"callee")&&!kY.call(t,"callee")},MY=jY,N0={exports:{}};function PY(){return!1}var DY=PY;N0.exports;(function(t,e){var r=so,n=DY,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,c=a?r.Buffer:void 0,h=c?c.isBuffer:void 0,d=h||n;t.exports=d})(N0,N0.exports);var bR=N0.exports,LY=9007199254740991,BY=/^(?:0|[1-9]\d*)$/;function FY(t,e){var r=typeof t;return e=e??LY,!!e&&(r=="number"||r!="symbol"&&BY.test(t))&&t>-1&&t%1==0&&t<e}var UY=FY,zY=9007199254740991;function $Y(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zY}var _R=$Y,HY=kp,VY=_R,qY=Pp,WY="[object Arguments]",GY="[object Array]",YY="[object Boolean]",KY="[object Date]",XY="[object Error]",QY="[object Function]",ZY="[object Map]",JY="[object Number]",eK="[object Object]",tK="[object RegExp]",rK="[object Set]",nK="[object String]",iK="[object WeakMap]",sK="[object ArrayBuffer]",oK="[object DataView]",aK="[object Float32Array]",lK="[object Float64Array]",cK="[object Int8Array]",uK="[object Int16Array]",dK="[object Int32Array]",fK="[object Uint8Array]",hK="[object Uint8ClampedArray]",pK="[object Uint16Array]",mK="[object Uint32Array]",qt={};qt[aK]=qt[lK]=qt[cK]=qt[uK]=qt[dK]=qt[fK]=qt[hK]=qt[pK]=qt[mK]=!0;qt[WY]=qt[GY]=qt[sK]=qt[YY]=qt[oK]=qt[KY]=qt[XY]=qt[QY]=qt[ZY]=qt[JY]=qt[eK]=qt[tK]=qt[rK]=qt[nK]=qt[iK]=!1;function gK(t){return qY(t)&&VY(t.length)&&!!qt[HY(t)]}var vK=gK;function yK(t){return function(e){return t(e)}}var xK=yK,T0={exports:{}};T0.exports;(function(t,e){var r=hR,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,c=function(){try{var h=i&&i.require&&i.require("util").types;return h||a&&a.binding&&a.binding("util")}catch{}}();t.exports=c})(T0,T0.exports);var wK=T0.exports,bK=vK,_K=xK,D_=wK,L_=D_&&D_.isTypedArray,EK=L_?_K(L_):bK,ER=EK,SK=EY,CK=MY,AK=Vx,NK=bR,TK=UY,OK=ER,IK=Object.prototype,RK=IK.hasOwnProperty;function kK(t,e){var r=AK(t),n=!r&&CK(t),i=!r&&!n&&NK(t),s=!r&&!n&&!i&&OK(t),a=r||n||i||s,c=a?SK(t.length,String):[],h=c.length;for(var d in t)(e||RK.call(t,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||TK(d,h)))&&c.push(d);return c}var jK=kK,MK=Object.prototype;function PK(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||MK;return t===r}var DK=PK;function LK(t,e){return function(r){return t(e(r))}}var BK=LK,FK=BK,UK=FK(Object.keys,Object),zK=UK,$K=DK,HK=zK,VK=Object.prototype,qK=VK.hasOwnProperty;function WK(t){if(!$K(t))return HK(t);var e=[];for(var r in Object(t))qK.call(t,r)&&r!="constructor"&&e.push(r);return e}var GK=WK,YK=gR,KK=_R;function XK(t){return t!=null&&KK(t.length)&&!YK(t)}var QK=XK,ZK=jK,JK=GK,eX=QK;function tX(t){return eX(t)?ZK(t):JK(t)}var rX=tX,nX=dY,iX=bY,sX=rX;function oX(t){return nX(t,sX,iX)}var aX=oX,B_=aX,lX=1,cX=Object.prototype,uX=cX.hasOwnProperty;function dX(t,e,r,n,i,s){var a=r&lX,c=B_(t),h=c.length,d=B_(e),p=d.length;if(h!=p&&!a)return!1;for(var m=h;m--;){var v=c[m];if(!(a?v in e:uX.call(e,v)))return!1}var x=s.get(t),E=s.get(e);if(x&&E)return x==e&&E==t;var w=!0;s.set(t,e),s.set(e,t);for(var A=a;++m<h;){v=c[m];var N=t[v],_=e[v];if(n)var C=a?n(_,N,v,e,t,s):n(N,_,v,t,e,s);if(!(C===void 0?N===_||i(N,_,r,n,s):C)){w=!1;break}A||(A=v=="constructor")}if(w&&!A){var S=t.constructor,O=e.constructor;S!=O&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof O=="function"&&O instanceof O)&&(w=!1)}return s.delete(t),s.delete(e),w}var fX=dX,hX=Zc,pX=so,mX=hX(pX,"DataView"),gX=mX,vX=Zc,yX=so,xX=vX(yX,"Promise"),wX=xX,bX=Zc,_X=so,EX=bX(_X,"Set"),SX=EX,CX=Zc,AX=so,NX=CX(AX,"WeakMap"),TX=NX,uv=gX,dv=Hx,fv=wX,hv=SX,pv=TX,SR=kp,ru=vR,F_="[object Map]",OX="[object Object]",U_="[object Promise]",z_="[object Set]",$_="[object WeakMap]",H_="[object DataView]",IX=ru(uv),RX=ru(dv),kX=ru(fv),jX=ru(hv),MX=ru(pv),Ca=SR;(uv&&Ca(new uv(new ArrayBuffer(1)))!=H_||dv&&Ca(new dv)!=F_||fv&&Ca(fv.resolve())!=U_||hv&&Ca(new hv)!=z_||pv&&Ca(new pv)!=$_)&&(Ca=function(t){var e=SR(t),r=e==OX?t.constructor:void 0,n=r?ru(r):"";if(n)switch(n){case IX:return H_;case RX:return F_;case kX:return U_;case jX:return z_;case MX:return $_}return e});var PX=Ca,u1=hG,DX=xR,LX=iY,BX=fX,V_=PX,q_=Vx,W_=bR,FX=ER,UX=1,G_="[object Arguments]",Y_="[object Array]",eh="[object Object]",zX=Object.prototype,K_=zX.hasOwnProperty;function $X(t,e,r,n,i,s){var a=q_(t),c=q_(e),h=a?Y_:V_(t),d=c?Y_:V_(e);h=h==G_?eh:h,d=d==G_?eh:d;var p=h==eh,m=d==eh,v=h==d;if(v&&W_(t)){if(!W_(e))return!1;a=!0,p=!1}if(v&&!p)return s||(s=new u1),a||FX(t)?DX(t,e,r,n,i,s):LX(t,e,h,r,n,i,s);if(!(r&UX)){var x=p&&K_.call(t,"__wrapped__"),E=m&&K_.call(e,"__wrapped__");if(x||E){var w=x?t.value():t,A=E?e.value():e;return s||(s=new u1),i(w,A,r,n,s)}}return v?(s||(s=new u1),BX(t,e,r,n,i,s)):!1}var HX=$X,VX=HX,X_=Pp;function CR(t,e,r,n,i){return t===e?!0:t==null||e==null||!X_(t)&&!X_(e)?t!==t&&e!==e:VX(t,e,r,n,CR,i)}var qX=CR,WX=qX;function GX(t,e){return WX(t,e)}var YX=GX,AR={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:$r,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(s,a,c){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:c})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=109)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(17),a=i(18),c=i(19),h=i(45),d=i(46),p=i(47),m=i(48),v=i(49),x=i(12),E=i(32),w=i(33),A=i(31),N=i(1),_={Scope:N.Scope,create:N.create,find:N.find,query:N.query,register:N.register,Container:s.default,Format:a.default,Leaf:c.default,Embed:m.default,Scroll:h.default,Block:p.default,Inline:d.default,Text:v.default,Attributor:{Attribute:x.default,Class:E.default,Style:w.default,Store:A.default}};n.default=_},function(r,n,i){var s=this&&this.__extends||function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,_){N.__proto__=_}||function(N,_){for(var C in _)_.hasOwnProperty(C)&&(N[C]=_[C])};return function(N,_){A(N,_);function C(){this.constructor=N}N.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(A){s(N,A);function N(_){var C=this;return _="[Parchment] "+_,C=A.call(this,_)||this,C.message=_,C.name=C.constructor.name,C}return N}(Error);n.ParchmentError=a;var c={},h={},d={},p={};n.DATA_KEY="__blot";var m;(function(A){A[A.TYPE=3]="TYPE",A[A.LEVEL=12]="LEVEL",A[A.ATTRIBUTE=13]="ATTRIBUTE",A[A.BLOT=14]="BLOT",A[A.INLINE=7]="INLINE",A[A.BLOCK=11]="BLOCK",A[A.BLOCK_BLOT=10]="BLOCK_BLOT",A[A.INLINE_BLOT=6]="INLINE_BLOT",A[A.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",A[A.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",A[A.ANY=15]="ANY"})(m=n.Scope||(n.Scope={}));function v(A,N){var _=E(A);if(_==null)throw new a("Unable to create "+A+" blot");var C=_,S=A instanceof Node||A.nodeType===Node.TEXT_NODE?A:C.create(N);return new C(S,N)}n.create=v;function x(A,N){return N===void 0&&(N=!1),A==null?null:A[n.DATA_KEY]!=null?A[n.DATA_KEY].blot:N?x(A.parentNode,N):null}n.find=x;function E(A,N){N===void 0&&(N=m.ANY);var _;if(typeof A=="string")_=p[A]||c[A];else if(A instanceof Text||A.nodeType===Node.TEXT_NODE)_=p.text;else if(typeof A=="number")A&m.LEVEL&m.BLOCK?_=p.block:A&m.LEVEL&m.INLINE&&(_=p.inline);else if(A instanceof HTMLElement){var C=(A.getAttribute("class")||"").split(/\s+/);for(var S in C)if(_=h[C[S]],_)break;_=_||d[A.tagName]}return _==null?null:N&m.LEVEL&_.scope&&N&m.TYPE&_.scope?_:null}n.query=E;function w(){for(var A=[],N=0;N<arguments.length;N++)A[N]=arguments[N];if(A.length>1)return A.map(function(S){return w(S)});var _=A[0];if(typeof _.blotName!="string"&&typeof _.attrName!="string")throw new a("Invalid definition");if(_.blotName==="abstract")throw new a("Cannot register abstract class");if(p[_.blotName||_.attrName]=_,typeof _.keyName=="string")c[_.keyName]=_;else if(_.className!=null&&(h[_.className]=_),_.tagName!=null){Array.isArray(_.tagName)?_.tagName=_.tagName.map(function(S){return S.toUpperCase()}):_.tagName=_.tagName.toUpperCase();var C=Array.isArray(_.tagName)?_.tagName:[_.tagName];C.forEach(function(S){(d[S]==null||_.className==null)&&(d[S]=_)})}return _}n.register=w},function(r,n,i){var s=i(51),a=i(11),c=i(3),h=i(20),d="\0",p=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};p.prototype.insert=function(m,v){var x={};return m.length===0?this:(x.insert=m,v!=null&&typeof v=="object"&&Object.keys(v).length>0&&(x.attributes=v),this.push(x))},p.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},p.prototype.retain=function(m,v){if(m<=0)return this;var x={retain:m};return v!=null&&typeof v=="object"&&Object.keys(v).length>0&&(x.attributes=v),this.push(x)},p.prototype.push=function(m){var v=this.ops.length,x=this.ops[v-1];if(m=c(!0,{},m),typeof x=="object"){if(typeof m.delete=="number"&&typeof x.delete=="number")return this.ops[v-1]={delete:x.delete+m.delete},this;if(typeof x.delete=="number"&&m.insert!=null&&(v-=1,x=this.ops[v-1],typeof x!="object"))return this.ops.unshift(m),this;if(a(m.attributes,x.attributes)){if(typeof m.insert=="string"&&typeof x.insert=="string")return this.ops[v-1]={insert:x.insert+m.insert},typeof m.attributes=="object"&&(this.ops[v-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof x.retain=="number")return this.ops[v-1]={retain:x.retain+m.retain},typeof m.attributes=="object"&&(this.ops[v-1].attributes=m.attributes),this}}return v===this.ops.length?this.ops.push(m):this.ops.splice(v,0,m),this},p.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},p.prototype.filter=function(m){return this.ops.filter(m)},p.prototype.forEach=function(m){this.ops.forEach(m)},p.prototype.map=function(m){return this.ops.map(m)},p.prototype.partition=function(m){var v=[],x=[];return this.forEach(function(E){var w=m(E)?v:x;w.push(E)}),[v,x]},p.prototype.reduce=function(m,v){return this.ops.reduce(m,v)},p.prototype.changeLength=function(){return this.reduce(function(m,v){return v.insert?m+h.length(v):v.delete?m-v.delete:m},0)},p.prototype.length=function(){return this.reduce(function(m,v){return m+h.length(v)},0)},p.prototype.slice=function(m,v){m=m||0,typeof v!="number"&&(v=1/0);for(var x=[],E=h.iterator(this.ops),w=0;w<v&&E.hasNext();){var A;w<m?A=E.next(m-w):(A=E.next(v-w),x.push(A)),w+=h.length(A)}return new p(x)},p.prototype.compose=function(m){var v=h.iterator(this.ops),x=h.iterator(m.ops),E=[],w=x.peek();if(w!=null&&typeof w.retain=="number"&&w.attributes==null){for(var A=w.retain;v.peekType()==="insert"&&v.peekLength()<=A;)A-=v.peekLength(),E.push(v.next());w.retain-A>0&&x.next(w.retain-A)}for(var N=new p(E);v.hasNext()||x.hasNext();)if(x.peekType()==="insert")N.push(x.next());else if(v.peekType()==="delete")N.push(v.next());else{var _=Math.min(v.peekLength(),x.peekLength()),C=v.next(_),S=x.next(_);if(typeof S.retain=="number"){var O={};typeof C.retain=="number"?O.retain=_:O.insert=C.insert;var D=h.attributes.compose(C.attributes,S.attributes,typeof C.retain=="number");if(D&&(O.attributes=D),N.push(O),!x.hasNext()&&a(N.ops[N.ops.length-1],O)){var M=new p(v.rest());return N.concat(M).chop()}}else typeof S.delete=="number"&&typeof C.retain=="number"&&N.push(S)}return N.chop()},p.prototype.concat=function(m){var v=new p(this.ops.slice());return m.ops.length>0&&(v.push(m.ops[0]),v.ops=v.ops.concat(m.ops.slice(1))),v},p.prototype.diff=function(m,v){if(this.ops===m.ops)return new p;var x=[this,m].map(function(_){return _.map(function(C){if(C.insert!=null)return typeof C.insert=="string"?C.insert:d;var S=_===m?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),E=new p,w=s(x[0],x[1],v),A=h.iterator(this.ops),N=h.iterator(m.ops);return w.forEach(function(_){for(var C=_[1].length;C>0;){var S=0;switch(_[0]){case s.INSERT:S=Math.min(N.peekLength(),C),E.push(N.next(S));break;case s.DELETE:S=Math.min(C,A.peekLength()),A.next(S),E.delete(S);break;case s.EQUAL:S=Math.min(A.peekLength(),N.peekLength(),C);var O=A.next(S),D=N.next(S);a(O.insert,D.insert)?E.retain(S,h.attributes.diff(O.attributes,D.attributes)):E.push(D).delete(S);break}C-=S}}),E.chop()},p.prototype.eachLine=function(m,v){v=v||`
`;for(var x=h.iterator(this.ops),E=new p,w=0;x.hasNext();){if(x.peekType()!=="insert")return;var A=x.peek(),N=h.length(A)-x.peekLength(),_=typeof A.insert=="string"?A.insert.indexOf(v,N)-N:-1;if(_<0)E.push(x.next());else if(_>0)E.push(x.next(_));else{if(m(E,x.next(1).attributes||{},w)===!1)return;w+=1,E=new p}}E.length()>0&&m(E,{},w)},p.prototype.transform=function(m,v){if(v=!!v,typeof m=="number")return this.transformPosition(m,v);for(var x=h.iterator(this.ops),E=h.iterator(m.ops),w=new p;x.hasNext()||E.hasNext();)if(x.peekType()==="insert"&&(v||E.peekType()!=="insert"))w.retain(h.length(x.next()));else if(E.peekType()==="insert")w.push(E.next());else{var A=Math.min(x.peekLength(),E.peekLength()),N=x.next(A),_=E.next(A);if(N.delete)continue;_.delete?w.push(_):w.retain(A,h.attributes.transform(N.attributes,_.attributes,v))}return w.chop()},p.prototype.transformPosition=function(m,v){v=!!v;for(var x=h.iterator(this.ops),E=0;x.hasNext()&&E<=m;){var w=x.peekLength(),A=x.peekType();if(x.next(),A==="delete"){m-=Math.min(w,m-E);continue}else A==="insert"&&(E<m||!v)&&(m+=w);E+=w}return m},r.exports=p},function(r,n){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h=function(x){return typeof Array.isArray=="function"?Array.isArray(x):s.call(x)==="[object Array]"},d=function(x){if(!x||s.call(x)!=="[object Object]")return!1;var E=i.call(x,"constructor"),w=x.constructor&&x.constructor.prototype&&i.call(x.constructor.prototype,"isPrototypeOf");if(x.constructor&&!E&&!w)return!1;var A;for(A in x);return typeof A>"u"||i.call(x,A)},p=function(x,E){a&&E.name==="__proto__"?a(x,E.name,{enumerable:!0,configurable:!0,value:E.newValue,writable:!0}):x[E.name]=E.newValue},m=function(x,E){if(E==="__proto__")if(i.call(x,E)){if(c)return c(x,E).value}else return;return x[E]};r.exports=function v(){var x,E,w,A,N,_,C=arguments[0],S=1,O=arguments.length,D=!1;for(typeof C=="boolean"&&(D=C,C=arguments[1]||{},S=2),(C==null||typeof C!="object"&&typeof C!="function")&&(C={});S<O;++S)if(x=arguments[S],x!=null)for(E in x)w=m(C,E),A=m(x,E),C!==A&&(D&&A&&(d(A)||(N=h(A)))?(N?(N=!1,_=w&&h(w)?w:[]):_=w&&d(w)?w:{},p(C,{name:E,newValue:v(D,_,A)})):typeof A<"u"&&p(C,{name:E,newValue:A}));return C}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function B(F,H){for(var z=0;z<H.length;z++){var $=H[z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(F,$.key,$)}}return function(F,H,z){return H&&B(F.prototype,H),z&&B(F,z),F}}(),a=function B(F,H,z){F===null&&(F=Function.prototype);var $=Object.getOwnPropertyDescriptor(F,H);if($===void 0){var ee=Object.getPrototypeOf(F);return ee===null?void 0:B(ee,H,z)}else{if("value"in $)return $.value;var J=$.get;return J===void 0?void 0:J.call(z)}},c=i(3),h=C(c),d=i(2),p=C(d),m=i(0),v=C(m),x=i(16),E=C(x),w=i(6),A=C(w),N=i(7),_=C(N);function C(B){return B&&B.__esModule?B:{default:B}}function S(B,F){if(!(B instanceof F))throw new TypeError("Cannot call a class as a function")}function O(B,F){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:B}function D(B,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);B.prototype=Object.create(F&&F.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(B,F):B.__proto__=F)}var M=1,R=function(B){D(F,B);function F(){return S(this,F),O(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return s(F,[{key:"attach",value:function(){a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"attach",this).call(this),this.attributes=new v.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(z,$){var ee=v.default.query(z,v.default.Scope.BLOCK_ATTRIBUTE);ee!=null&&this.attributes.attribute(ee,$)}},{key:"formatAt",value:function(z,$,ee,J){this.format(ee,J)}},{key:"insertAt",value:function(z,$,ee){if(typeof $=="string"&&$.endsWith(`
`)){var J=v.default.create(k.blotName);this.parent.insertBefore(J,z===0?this:this.next),J.insertAt(0,$.slice(0,-1))}else a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,z,$,ee)}}]),F}(v.default.Embed);R.scope=v.default.Scope.BLOCK_BLOT;var k=function(B){D(F,B);function F(H){S(this,F);var z=O(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,H));return z.cache={},z}return s(F,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(v.default.Leaf).reduce(function(z,$){return $.length()===0?z:z.insert($.value(),L($))},new p.default).insert(`
`,L(this))),this.cache.delta}},{key:"deleteAt",value:function(z,$){a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"deleteAt",this).call(this,z,$),this.cache={}}},{key:"formatAt",value:function(z,$,ee,J){$<=0||(v.default.query(ee,v.default.Scope.BLOCK)?z+$===this.length()&&this.format(ee,J):a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"formatAt",this).call(this,z,Math.min($,this.length()-z-1),ee,J),this.cache={})}},{key:"insertAt",value:function(z,$,ee){if(ee!=null)return a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,z,$,ee);if($.length!==0){var J=$.split(`
`),te=J.shift();te.length>0&&(z<this.length()-1||this.children.tail==null?a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertAt",this).call(this,Math.min(z,this.length()-1),te):this.children.tail.insertAt(this.children.tail.length(),te),this.cache={});var Y=this;J.reduce(function(K,V){return Y=Y.split(K,!0),Y.insertAt(0,V),V.length},z+te.length)}}},{key:"insertBefore",value:function(z,$){var ee=this.children.head;a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertBefore",this).call(this,z,$),ee instanceof E.default&&ee.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"length",this).call(this)+M),this.cache.length}},{key:"moveChildren",value:function(z,$){a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"moveChildren",this).call(this,z,$),this.cache={}}},{key:"optimize",value:function(z){a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,z),this.cache={}}},{key:"path",value:function(z){return a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"path",this).call(this,z,!0)}},{key:"removeChild",value:function(z){a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"removeChild",this).call(this,z),this.cache={}}},{key:"split",value:function(z){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($&&(z===0||z>=this.length()-M)){var ee=this.clone();return z===0?(this.parent.insertBefore(ee,this),this):(this.parent.insertBefore(ee,this.next),ee)}else{var J=a(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"split",this).call(this,z,$);return this.cache={},J}}}]),F}(v.default.Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[A.default,v.default.Embed,_.default];function L(B){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B==null||(typeof B.formats=="function"&&(F=(0,h.default)(F,B.formats())),B.parent==null||B.parent.blotName=="scroll"||B.parent.statics.scope!==B.statics.scope)?F:L(B.parent,F)}n.bubbleFormats=L,n.BlockEmbed=R,n.default=k},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},a=function(){function Y(K,V){var G=[],Z=!0,se=!1,ae=void 0;try{for(var X=K[Symbol.iterator](),ne;!(Z=(ne=X.next()).done)&&(G.push(ne.value),!(V&&G.length===V));Z=!0);}catch(ue){se=!0,ae=ue}finally{try{!Z&&X.return&&X.return()}finally{if(se)throw ae}}return G}return function(K,V){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return Y(K,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function Y(K,V){for(var G=0;G<V.length;G++){var Z=V[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(K,Z.key,Z)}}return function(K,V,G){return V&&Y(K.prototype,V),G&&Y(K,G),K}}();i(50);var h=i(2),d=L(h),p=i(14),m=L(p),v=i(8),x=L(v),E=i(9),w=L(E),A=i(0),N=L(A),_=i(15),C=L(_),S=i(3),O=L(S),D=i(10),M=L(D),R=i(34),k=L(R);function L(Y){return Y&&Y.__esModule?Y:{default:Y}}function B(Y,K,V){return K in Y?Object.defineProperty(Y,K,{value:V,enumerable:!0,configurable:!0,writable:!0}):Y[K]=V,Y}function F(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}var H=(0,M.default)("quill"),z=function(){c(Y,null,[{key:"debug",value:function(V){V===!0&&(V="log"),M.default.level(V)}},{key:"find",value:function(V){return V.__quill||N.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&H.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,G){var Z=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var ae=V.attrName||V.blotName;typeof ae=="string"?this.register("formats/"+ae,V,G):Object.keys(V).forEach(function(X){Z.register(X,V[X],G)})}else this.imports[V]!=null&&!se&&H.warn("Overwriting "+V+" with",G),this.imports[V]=G,(V.startsWith("blots/")||V.startsWith("formats/"))&&G.blotName!=="abstract"?N.default.register(G):V.startsWith("modules")&&typeof G.register=="function"&&G.register()}}]);function Y(K){var V=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(F(this,Y),this.options=$(K,G),this.container=this.options.container,this.container==null)return H.error("Invalid Quill container",K);this.options.debug&&Y.debug(this.options.debug);var Z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new x.default,this.scroll=N.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new C.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(x.default.events.EDITOR_CHANGE,function(ae){ae===x.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(x.default.events.SCROLL_UPDATE,function(ae,X){var ne=V.selection.lastRange,ue=ne&&ne.length===0?ne.index:void 0;ee.call(V,function(){return V.editor.update(null,X,ue)},ae)});var se=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+Z+"<p><br></p></div>");this.setContents(se),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(Y,[{key:"addContainer",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var Z=V;V=document.createElement("div"),V.classList.add(Z)}return this.container.insertBefore(V,G),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,G,Z){var se=this,ae=J(V,G,Z),X=a(ae,4);return V=X[0],G=X[1],Z=X[3],ee.call(this,function(){return se.editor.deleteText(V,G)},Z,V,-1*G)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,G){var Z=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;return ee.call(this,function(){var ae=Z.getSelection(!0),X=new d.default;if(ae==null)return X;if(N.default.query(V,N.default.Scope.BLOCK))X=Z.editor.formatLine(ae.index,ae.length,B({},V,G));else{if(ae.length===0)return Z.selection.format(V,G),X;X=Z.editor.formatText(ae.index,ae.length,B({},V,G))}return Z.setSelection(ae,x.default.sources.SILENT),X},se)}},{key:"formatLine",value:function(V,G,Z,se,ae){var X=this,ne=void 0,ue=J(V,G,Z,se,ae),fe=a(ue,4);return V=fe[0],G=fe[1],ne=fe[2],ae=fe[3],ee.call(this,function(){return X.editor.formatLine(V,G,ne)},ae,V,0)}},{key:"formatText",value:function(V,G,Z,se,ae){var X=this,ne=void 0,ue=J(V,G,Z,se,ae),fe=a(ue,4);return V=fe[0],G=fe[1],ne=fe[2],ae=fe[3],ee.call(this,function(){return X.editor.formatText(V,G,ne)},ae,V,0)}},{key:"getBounds",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Z=void 0;typeof V=="number"?Z=this.selection.getBounds(V,G):Z=this.selection.getBounds(V.index,V.length);var se=this.container.getBoundingClientRect();return{bottom:Z.bottom-se.top,height:Z.height,left:Z.left-se.left,right:Z.right-se.left,top:Z.top-se.top,width:Z.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,Z=J(V,G),se=a(Z,2);return V=se[0],G=se[1],this.editor.getContents(V,G)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,G):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,G)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,Z=J(V,G),se=a(Z,2);return V=se[0],G=se[1],this.editor.getText(V,G)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,G,Z){var se=this,ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Y.sources.API;return ee.call(this,function(){return se.editor.insertEmbed(V,G,Z)},ae,V)}},{key:"insertText",value:function(V,G,Z,se,ae){var X=this,ne=void 0,ue=J(V,0,Z,se,ae),fe=a(ue,4);return V=fe[0],ne=fe[2],ae=fe[3],ee.call(this,function(){return X.editor.insertText(V,G,ne)},ae,V,G.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,G,Z){this.clipboard.dangerouslyPasteHTML(V,G,Z)}},{key:"removeFormat",value:function(V,G,Z){var se=this,ae=J(V,G,Z),X=a(ae,4);return V=X[0],G=X[1],Z=X[3],ee.call(this,function(){return se.editor.removeFormat(V,G)},Z,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var G=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return ee.call(this,function(){V=new d.default(V);var se=G.getLength(),ae=G.editor.deleteText(0,se),X=G.editor.applyDelta(V),ne=X.ops[X.ops.length-1];ne!=null&&typeof ne.insert=="string"&&ne.insert[ne.insert.length-1]===`
`&&(G.editor.deleteText(G.getLength()-1,1),X.delete(1));var ue=ae.compose(X);return ue},Z)}},{key:"setSelection",value:function(V,G,Z){if(V==null)this.selection.setRange(null,G||Y.sources.API);else{var se=J(V,G,Z),ae=a(se,4);V=ae[0],G=ae[1],Z=ae[3],this.selection.setRange(new _.Range(V,G),Z),Z!==x.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API,Z=new d.default().insert(V);return this.setContents(Z,G)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,G=this.scroll.update(V);return this.selection.update(V),G}},{key:"updateContents",value:function(V){var G=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return ee.call(this,function(){return V=new d.default(V),G.editor.applyDelta(V,Z)},Z,!0)}}]),Y}();z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},z.events=x.default.events,z.sources=x.default.sources,z.version="1.3.7",z.imports={delta:d.default,parchment:N.default,"core/module":w.default,"core/theme":k.default};function $(Y,K){if(K=(0,O.default)(!0,{container:Y,modules:{clipboard:!0,keyboard:!0,history:!0}},K),!K.theme||K.theme===z.DEFAULTS.theme)K.theme=k.default;else if(K.theme=z.import("themes/"+K.theme),K.theme==null)throw new Error("Invalid theme "+K.theme+". Did you register it?");var V=(0,O.default)(!0,{},K.theme.DEFAULTS);[V,K].forEach(function(se){se.modules=se.modules||{},Object.keys(se.modules).forEach(function(ae){se.modules[ae]===!0&&(se.modules[ae]={})})});var G=Object.keys(V.modules).concat(Object.keys(K.modules)),Z=G.reduce(function(se,ae){var X=z.import("modules/"+ae);return X==null?H.error("Cannot load "+ae+" module. Are you sure you registered it?"):se[ae]=X.DEFAULTS||{},se},{});return K.modules!=null&&K.modules.toolbar&&K.modules.toolbar.constructor!==Object&&(K.modules.toolbar={container:K.modules.toolbar}),K=(0,O.default)(!0,{},z.DEFAULTS,{modules:Z},V,K),["bounds","container","scrollingContainer"].forEach(function(se){typeof K[se]=="string"&&(K[se]=document.querySelector(K[se]))}),K.modules=Object.keys(K.modules).reduce(function(se,ae){return K.modules[ae]&&(se[ae]=K.modules[ae]),se},{}),K}function ee(Y,K,V,G){if(this.options.strict&&!this.isEnabled()&&K===x.default.sources.USER)return new d.default;var Z=V==null?null:this.getSelection(),se=this.editor.delta,ae=Y();if(Z!=null&&(V===!0&&(V=Z.index),G==null?Z=te(Z,ae,K):G!==0&&(Z=te(Z,V,G,K)),this.setSelection(Z,x.default.sources.SILENT)),ae.length()>0){var X,ne=[x.default.events.TEXT_CHANGE,ae,se,K];if((X=this.emitter).emit.apply(X,[x.default.events.EDITOR_CHANGE].concat(ne)),K!==x.default.sources.SILENT){var ue;(ue=this.emitter).emit.apply(ue,ne)}}return ae}function J(Y,K,V,G,Z){var se={};return typeof Y.index=="number"&&typeof Y.length=="number"?typeof K!="number"?(Z=G,G=V,V=K,K=Y.length,Y=Y.index):(K=Y.length,Y=Y.index):typeof K!="number"&&(Z=G,G=V,V=K,K=0),(typeof V>"u"?"undefined":s(V))==="object"?(se=V,Z=G):typeof V=="string"&&(G!=null?se[V]=G:Z=V),Z=Z||x.default.sources.API,[Y,K,se,Z]}function te(Y,K,V,G){if(Y==null)return null;var Z=void 0,se=void 0;if(K instanceof d.default){var ae=[Y.index,Y.index+Y.length].map(function(fe){return K.transformPosition(fe,G!==x.default.sources.USER)}),X=a(ae,2);Z=X[0],se=X[1]}else{var ne=[Y.index,Y.index+Y.length].map(function(fe){return fe<K||fe===K&&G===x.default.sources.USER?fe:V>=0?fe+V:Math.max(K,fe+V)}),ue=a(ne,2);Z=ue[0],se=ue[1]}return new _.Range(Z,se-Z)}n.expandConfig=$,n.overload=J,n.default=z},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(N,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,_,C){return _&&A(N.prototype,_),C&&A(N,C),N}}(),a=function A(N,_,C){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,_);if(S===void 0){var O=Object.getPrototypeOf(N);return O===null?void 0:A(O,_,C)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(C)}},c=i(7),h=m(c),d=i(0),p=m(d);function m(A){return A&&A.__esModule?A:{default:A}}function v(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")}function x(A,N){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:A}function E(A,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);A.prototype=Object.create(N&&N.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(A,N):A.__proto__=N)}var w=function(A){E(N,A);function N(){return v(this,N),x(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,[{key:"formatAt",value:function(C,S,O,D){if(N.compare(this.statics.blotName,O)<0&&p.default.query(O,p.default.Scope.BLOT)){var M=this.isolate(C,S);D&&M.wrap(O,D)}else a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,C,S,O,D)}},{key:"optimize",value:function(C){if(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,C),this.parent instanceof N&&N.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(C,S){var O=N.order.indexOf(C),D=N.order.indexOf(S);return O>=0||D>=0?O-D:C===S?0:C<S?-1:1}}]),N}(p.default.Inline);w.allowedChildren=[w,p.default.Embed,h.default],w.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function d(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function p(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=function(v){p(x,v);function x(){return h(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default.Text);n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function _(C,S){for(var O=0;O<S.length;O++){var D=S[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}return function(C,S,O){return S&&_(C.prototype,S),O&&_(C,O),C}}(),a=function _(C,S,O){C===null&&(C=Function.prototype);var D=Object.getOwnPropertyDescriptor(C,S);if(D===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:_(M,S,O)}else{if("value"in D)return D.value;var R=D.get;return R===void 0?void 0:R.call(O)}},c=i(54),h=m(c),d=i(10),p=m(d);function m(_){return _&&_.__esModule?_:{default:_}}function v(_,C){if(!(_ instanceof C))throw new TypeError("Cannot call a class as a function")}function x(_,C){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:_}function E(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);_.prototype=Object.create(C&&C.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(_,C):_.__proto__=C)}var w=(0,p.default)("quill:events"),A=["selectionchange","mousedown","mouseup","click"];A.forEach(function(_){document.addEventListener(_,function(){for(var C=arguments.length,S=Array(C),O=0;O<C;O++)S[O]=arguments[O];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(D){if(D.__quill&&D.__quill.emitter){var M;(M=D.__quill.emitter).handleDOM.apply(M,S)}})})});var N=function(_){E(C,_);function C(){v(this,C);var S=x(this,(C.__proto__||Object.getPrototypeOf(C)).call(this));return S.listeners={},S.on("error",w.error),S}return s(C,[{key:"emit",value:function(){w.log.apply(w,arguments),a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(O){for(var D=arguments.length,M=Array(D>1?D-1:0),R=1;R<D;R++)M[R-1]=arguments[R];(this.listeners[O.type]||[]).forEach(function(k){var L=k.node,B=k.handler;(O.target===L||L.contains(O.target))&&B.apply(void 0,[O].concat(M))})}},{key:"listenDOM",value:function(O,D,M){this.listeners[O]||(this.listeners[O]=[]),this.listeners[O].push({node:D,handler:M})}}]),C}(h.default);N.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},N.sources={API:"api",SILENT:"silent",USER:"user"},n.default=N},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});function s(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var a=function c(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,c),this.quill=h,this.options=d};a.DEFAULTS={},n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],a="warn";function c(d){if(s.indexOf(d)<=s.indexOf(a)){for(var p,m=arguments.length,v=Array(m>1?m-1:0),x=1;x<m;x++)v[x-1]=arguments[x];(p=console)[d].apply(p,v)}}function h(d){return s.reduce(function(p,m){return p[m]=c.bind(console,m,d),p},{})}c.level=h.level=function(d){a=d},n.default=h},function(r,n,i){var s=Array.prototype.slice,a=i(52),c=i(53),h=r.exports=function(v,x,E){return E||(E={}),v===x?!0:v instanceof Date&&x instanceof Date?v.getTime()===x.getTime():!v||!x||typeof v!="object"&&typeof x!="object"?E.strict?v===x:v==x:m(v,x,E)};function d(v){return v==null}function p(v){return!(!v||typeof v!="object"||typeof v.length!="number"||typeof v.copy!="function"||typeof v.slice!="function"||v.length>0&&typeof v[0]!="number")}function m(v,x,E){var w,A;if(d(v)||d(x)||v.prototype!==x.prototype)return!1;if(c(v))return c(x)?(v=s.call(v),x=s.call(x),h(v,x,E)):!1;if(p(v)){if(!p(x)||v.length!==x.length)return!1;for(w=0;w<v.length;w++)if(v[w]!==x[w])return!1;return!0}try{var N=a(v),_=a(x)}catch{return!1}if(N.length!=_.length)return!1;for(N.sort(),_.sort(),w=N.length-1;w>=0;w--)if(N[w]!=_[w])return!1;for(w=N.length-1;w>=0;w--)if(A=N[w],!h(v[A],x[A],E))return!1;return typeof v==typeof x}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),a=function(){function c(h,d,p){p===void 0&&(p={}),this.attrName=h,this.keyName=d;var m=s.Scope.TYPE&s.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&s.Scope.LEVEL|m:this.scope=s.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return c.keys=function(h){return[].map.call(h.attributes,function(d){return d.name})},c.prototype.add=function(h,d){return this.canAdd(h,d)?(h.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(h,d){var p=s.query(h,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(h){h.removeAttribute(this.keyName)},c.prototype.value=function(h){var d=h.getAttribute(this.keyName);return this.canAdd(h,d)&&d?d:""},c}();n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function R(k,L){var B=[],F=!0,H=!1,z=void 0;try{for(var $=k[Symbol.iterator](),ee;!(F=(ee=$.next()).done)&&(B.push(ee.value),!(L&&B.length===L));F=!0);}catch(J){H=!0,z=J}finally{try{!F&&$.return&&$.return()}finally{if(H)throw z}}return B}return function(k,L){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return R(k,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function R(k,L){for(var B=0;B<L.length;B++){var F=L[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,L,B){return L&&R(k.prototype,L),B&&R(k,B),k}}(),c=function R(k,L,B){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,L);if(F===void 0){var H=Object.getPrototypeOf(k);return H===null?void 0:R(H,L,B)}else{if("value"in F)return F.value;var z=F.get;return z===void 0?void 0:z.call(B)}},h=i(2),d=_(h),p=i(0),m=_(p),v=i(4),x=_(v),E=i(6),w=_(E),A=i(7),N=_(A);function _(R){return R&&R.__esModule?R:{default:R}}function C(R,k){if(!(R instanceof k))throw new TypeError("Cannot call a class as a function")}function S(R,k){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:R}function O(R,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);R.prototype=Object.create(k&&k.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(R,k):R.__proto__=k)}var D=function(R){O(k,R);function k(){return C(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return k}(w.default);D.blotName="code",D.tagName="CODE";var M=function(R){O(k,R);function k(){return C(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return a(k,[{key:"delta",value:function(){var B=this,F=this.domNode.textContent;return F.endsWith(`
`)&&(F=F.slice(0,-1)),F.split(`
`).reduce(function(H,z){return H.insert(z).insert(`
`,B.formats())},new d.default)}},{key:"format",value:function(B,F){if(!(B===this.statics.blotName&&F)){var H=this.descendant(N.default,this.length()-1),z=s(H,1),$=z[0];$!=null&&$.deleteAt($.length()-1,1),c(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,B,F)}}},{key:"formatAt",value:function(B,F,H,z){if(F!==0&&!(m.default.query(H,m.default.Scope.BLOCK)==null||H===this.statics.blotName&&z===this.statics.formats(this.domNode))){var $=this.newlineIndex(B);if(!($<0||$>=B+F)){var ee=this.newlineIndex(B,!0)+1,J=$-ee+1,te=this.isolate(ee,J),Y=te.next;te.format(H,z),Y instanceof k&&Y.formatAt(0,B-ee+F-J,H,z)}}}},{key:"insertAt",value:function(B,F,H){if(H==null){var z=this.descendant(N.default,B),$=s(z,2),ee=$[0],J=$[1];ee.insertAt(J,F)}}},{key:"length",value:function(){var B=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?B:B+1}},{key:"newlineIndex",value:function(B){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F)return this.domNode.textContent.slice(0,B).lastIndexOf(`
`);var H=this.domNode.textContent.slice(B).indexOf(`
`);return H>-1?B+H:-1}},{key:"optimize",value:function(B){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),c(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,B);var F=this.next;F!=null&&F.prev===this&&F.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===F.statics.formats(F.domNode)&&(F.optimize(B),F.moveChildren(this),F.remove())}},{key:"replace",value:function(B){c(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,B),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(F){var H=m.default.find(F);H==null?F.parentNode.removeChild(F):H instanceof m.default.Embed?H.remove():H.unwrap()})}}],[{key:"create",value:function(B){var F=c(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,B);return F.setAttribute("spellcheck",!1),F}},{key:"formats",value:function(){return!0}}]),k}(x.default);M.blotName="code-block",M.tagName="PRE",M.TAB="  ",n.Code=D,n.default=M},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},a=function(){function Y(K,V){var G=[],Z=!0,se=!1,ae=void 0;try{for(var X=K[Symbol.iterator](),ne;!(Z=(ne=X.next()).done)&&(G.push(ne.value),!(V&&G.length===V));Z=!0);}catch(ue){se=!0,ae=ue}finally{try{!Z&&X.return&&X.return()}finally{if(se)throw ae}}return G}return function(K,V){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return Y(K,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function Y(K,V){for(var G=0;G<V.length;G++){var Z=V[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(K,Z.key,Z)}}return function(K,V,G){return V&&Y(K.prototype,V),G&&Y(K,G),K}}(),h=i(2),d=F(h),p=i(20),m=F(p),v=i(0),x=F(v),E=i(13),w=F(E),A=i(24),N=F(A),_=i(4),C=F(_),S=i(16),O=F(S),D=i(21),M=F(D),R=i(11),k=F(R),L=i(3),B=F(L);function F(Y){return Y&&Y.__esModule?Y:{default:Y}}function H(Y,K,V){return K in Y?Object.defineProperty(Y,K,{value:V,enumerable:!0,configurable:!0,writable:!0}):Y[K]=V,Y}function z(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}var $=/^[ -~]*$/,ee=function(){function Y(K){z(this,Y),this.scroll=K,this.delta=this.getDelta()}return c(Y,[{key:"applyDelta",value:function(V){var G=this,Z=!1;this.scroll.update();var se=this.scroll.length();return this.scroll.batchStart(),V=te(V),V.reduce(function(ae,X){var ne=X.retain||X.delete||X.insert.length||1,ue=X.attributes||{};if(X.insert!=null){if(typeof X.insert=="string"){var fe=X.insert;fe.endsWith(`
`)&&Z&&(Z=!1,fe=fe.slice(0,-1)),ae>=se&&!fe.endsWith(`
`)&&(Z=!0),G.scroll.insertAt(ae,fe);var oe=G.scroll.line(ae),ve=a(oe,2),Se=ve[0],Ce=ve[1],Fe=(0,B.default)({},(0,_.bubbleFormats)(Se));if(Se instanceof C.default){var Ge=Se.descendant(x.default.Leaf,Ce),ht=a(Ge,1),we=ht[0];Fe=(0,B.default)(Fe,(0,_.bubbleFormats)(we))}ue=m.default.attributes.diff(Fe,ue)||{}}else if(s(X.insert)==="object"){var he=Object.keys(X.insert)[0];if(he==null)return ae;G.scroll.insertAt(ae,he,X.insert[he])}se+=ne}return Object.keys(ue).forEach(function(de){G.scroll.formatAt(ae,ne,de,ue[de])}),ae+ne},0),V.reduce(function(ae,X){return typeof X.delete=="number"?(G.scroll.deleteAt(ae,X.delete),ae):ae+(X.retain||X.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,G){return this.scroll.deleteAt(V,G),this.update(new d.default().retain(V).delete(G))}},{key:"formatLine",value:function(V,G){var Z=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(se).forEach(function(ae){if(!(Z.scroll.whitelist!=null&&!Z.scroll.whitelist[ae])){var X=Z.scroll.lines(V,Math.max(G,1)),ne=G;X.forEach(function(ue){var fe=ue.length();if(!(ue instanceof w.default))ue.format(ae,se[ae]);else{var oe=V-ue.offset(Z.scroll),ve=ue.newlineIndex(oe+ne)-oe+1;ue.formatAt(oe,ve,ae,se[ae])}ne-=fe})}}),this.scroll.optimize(),this.update(new d.default().retain(V).retain(G,(0,M.default)(se)))}},{key:"formatText",value:function(V,G){var Z=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(se).forEach(function(ae){Z.scroll.formatAt(V,G,ae,se[ae])}),this.update(new d.default().retain(V).retain(G,(0,M.default)(se)))}},{key:"getContents",value:function(V,G){return this.delta.slice(V,V+G)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,G){return V.concat(G.delta())},new d.default)}},{key:"getFormat",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Z=[],se=[];G===0?this.scroll.path(V).forEach(function(X){var ne=a(X,1),ue=ne[0];ue instanceof C.default?Z.push(ue):ue instanceof x.default.Leaf&&se.push(ue)}):(Z=this.scroll.lines(V,G),se=this.scroll.descendants(x.default.Leaf,V,G));var ae=[Z,se].map(function(X){if(X.length===0)return{};for(var ne=(0,_.bubbleFormats)(X.shift());Object.keys(ne).length>0;){var ue=X.shift();if(ue==null)return ne;ne=J((0,_.bubbleFormats)(ue),ne)}return ne});return B.default.apply(B.default,ae)}},{key:"getText",value:function(V,G){return this.getContents(V,G).filter(function(Z){return typeof Z.insert=="string"}).map(function(Z){return Z.insert}).join("")}},{key:"insertEmbed",value:function(V,G,Z){return this.scroll.insertAt(V,G,Z),this.update(new d.default().retain(V).insert(H({},G,Z)))}},{key:"insertText",value:function(V,G){var Z=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G=G.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,G),Object.keys(se).forEach(function(ae){Z.scroll.formatAt(V,G.length,ae,se[ae])}),this.update(new d.default().retain(V).insert(G,(0,M.default)(se)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==C.default.blotName||V.children.length>1?!1:V.children.head instanceof O.default}},{key:"removeFormat",value:function(V,G){var Z=this.getText(V,G),se=this.scroll.line(V+G),ae=a(se,2),X=ae[0],ne=ae[1],ue=0,fe=new d.default;X!=null&&(X instanceof w.default?ue=X.newlineIndex(ne)-ne+1:ue=X.length()-ne,fe=X.delta().slice(ne,ne+ue-1).insert(`
`));var oe=this.getContents(V,G+ue),ve=oe.diff(new d.default().insert(Z).concat(fe)),Se=new d.default().retain(V).concat(ve);return this.applyDelta(Se)}},{key:"update",value:function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,se=this.delta;if(G.length===1&&G[0].type==="characterData"&&G[0].target.data.match($)&&x.default.find(G[0].target)){var ae=x.default.find(G[0].target),X=(0,_.bubbleFormats)(ae),ne=ae.offset(this.scroll),ue=G[0].oldValue.replace(N.default.CONTENTS,""),fe=new d.default().insert(ue),oe=new d.default().insert(ae.value()),ve=new d.default().retain(ne).concat(fe.diff(oe,Z));V=ve.reduce(function(Se,Ce){return Ce.insert?Se.insert(Ce.insert,X):Se.push(Ce)},new d.default),this.delta=se.compose(V)}else this.delta=this.getDelta(),(!V||!(0,k.default)(se.compose(V),this.delta))&&(V=se.diff(this.delta,Z));return V}}]),Y}();function J(Y,K){return Object.keys(K).reduce(function(V,G){return Y[G]==null||(K[G]===Y[G]?V[G]=K[G]:Array.isArray(K[G])?K[G].indexOf(Y[G])<0&&(V[G]=K[G].concat([Y[G]])):V[G]=[K[G],Y[G]]),V},{})}function te(Y){return Y.reduce(function(K,V){if(V.insert===1){var G=(0,M.default)(V.attributes);return delete G.image,K.insert({image:V.attributes.image},G)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,M.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var Z=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return K.insert(Z,V.attributes)}return K.push(V)},new d.default)}n.default=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function R(k,L){var B=[],F=!0,H=!1,z=void 0;try{for(var $=k[Symbol.iterator](),ee;!(F=(ee=$.next()).done)&&(B.push(ee.value),!(L&&B.length===L));F=!0);}catch(J){H=!0,z=J}finally{try{!F&&$.return&&$.return()}finally{if(H)throw z}}return B}return function(k,L){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return R(k,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function R(k,L){for(var B=0;B<L.length;B++){var F=L[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,L,B){return L&&R(k.prototype,L),B&&R(k,B),k}}(),c=i(0),h=N(c),d=i(21),p=N(d),m=i(11),v=N(m),x=i(8),E=N(x),w=i(10),A=N(w);function N(R){return R&&R.__esModule?R:{default:R}}function _(R){if(Array.isArray(R)){for(var k=0,L=Array(R.length);k<R.length;k++)L[k]=R[k];return L}else return Array.from(R)}function C(R,k){if(!(R instanceof k))throw new TypeError("Cannot call a class as a function")}var S=(0,A.default)("quill:selection"),O=function R(k){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;C(this,R),this.index=k,this.length=L},D=function(){function R(k,L){var B=this;C(this,R),this.emitter=L,this.scroll=k,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new O(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){B.mouseDown||setTimeout(B.update.bind(B,E.default.sources.USER),1)}),this.emitter.on(E.default.events.EDITOR_CHANGE,function(F,H){F===E.default.events.TEXT_CHANGE&&H.length()>0&&B.update(E.default.sources.SILENT)}),this.emitter.on(E.default.events.SCROLL_BEFORE_UPDATE,function(){if(B.hasFocus()){var F=B.getNativeRange();F!=null&&F.start.node!==B.cursor.textNode&&B.emitter.once(E.default.events.SCROLL_UPDATE,function(){try{B.setNativeRange(F.start.node,F.start.offset,F.end.node,F.end.offset)}catch{}})}}),this.emitter.on(E.default.events.SCROLL_OPTIMIZE,function(F,H){if(H.range){var z=H.range,$=z.startNode,ee=z.startOffset,J=z.endNode,te=z.endOffset;B.setNativeRange($,ee,J,te)}}),this.update(E.default.sources.SILENT)}return a(R,[{key:"handleComposition",value:function(){var L=this;this.root.addEventListener("compositionstart",function(){L.composing=!0}),this.root.addEventListener("compositionend",function(){if(L.composing=!1,L.cursor.parent){var B=L.cursor.restore();if(!B)return;setTimeout(function(){L.setNativeRange(B.startNode,B.startOffset,B.endNode,B.endOffset)},1)}})}},{key:"handleDragging",value:function(){var L=this;this.emitter.listenDOM("mousedown",document.body,function(){L.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){L.mouseDown=!1,L.update(E.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(L,B){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[L])){this.scroll.update();var F=this.getNativeRange();if(!(F==null||!F.native.collapsed||h.default.query(L,h.default.Scope.BLOCK))){if(F.start.node!==this.cursor.textNode){var H=h.default.find(F.start.node,!1);if(H==null)return;if(H instanceof h.default.Leaf){var z=H.split(F.start.offset);H.parent.insertBefore(this.cursor,z)}else H.insertBefore(this.cursor,F.start.node);this.cursor.attach()}this.cursor.format(L,B),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=this.scroll.length();L=Math.min(L,F-1),B=Math.min(L+B,F-1)-L;var H=void 0,z=this.scroll.leaf(L),$=s(z,2),ee=$[0],J=$[1];if(ee==null)return null;var te=ee.position(J,!0),Y=s(te,2);H=Y[0],J=Y[1];var K=document.createRange();if(B>0){K.setStart(H,J);var V=this.scroll.leaf(L+B),G=s(V,2);if(ee=G[0],J=G[1],ee==null)return null;var Z=ee.position(J,!0),se=s(Z,2);return H=se[0],J=se[1],K.setEnd(H,J),K.getBoundingClientRect()}else{var ae="left",X=void 0;return H instanceof Text?(J<H.data.length?(K.setStart(H,J),K.setEnd(H,J+1)):(K.setStart(H,J-1),K.setEnd(H,J),ae="right"),X=K.getBoundingClientRect()):(X=ee.domNode.getBoundingClientRect(),J>0&&(ae="right")),{bottom:X.top+X.height,height:X.height,left:X[ae],right:X[ae],top:X.top,width:0}}}},{key:"getNativeRange",value:function(){var L=document.getSelection();if(L==null||L.rangeCount<=0)return null;var B=L.getRangeAt(0);if(B==null)return null;var F=this.normalizeNative(B);return S.info("getNativeRange",F),F}},{key:"getRange",value:function(){var L=this.getNativeRange();if(L==null)return[null,null];var B=this.normalizedToRange(L);return[B,L]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(L){var B=this,F=[[L.start.node,L.start.offset]];L.native.collapsed||F.push([L.end.node,L.end.offset]);var H=F.map(function(ee){var J=s(ee,2),te=J[0],Y=J[1],K=h.default.find(te,!0),V=K.offset(B.scroll);return Y===0?V:K instanceof h.default.Container?V+K.length():V+K.index(te,Y)}),z=Math.min(Math.max.apply(Math,_(H)),this.scroll.length()-1),$=Math.min.apply(Math,[z].concat(_(H)));return new O($,z-$)}},{key:"normalizeNative",value:function(L){if(!M(this.root,L.startContainer)||!L.collapsed&&!M(this.root,L.endContainer))return null;var B={start:{node:L.startContainer,offset:L.startOffset},end:{node:L.endContainer,offset:L.endOffset},native:L};return[B.start,B.end].forEach(function(F){for(var H=F.node,z=F.offset;!(H instanceof Text)&&H.childNodes.length>0;)if(H.childNodes.length>z)H=H.childNodes[z],z=0;else if(H.childNodes.length===z)H=H.lastChild,z=H instanceof Text?H.data.length:H.childNodes.length+1;else break;F.node=H,F.offset=z}),B}},{key:"rangeToNative",value:function(L){var B=this,F=L.collapsed?[L.index]:[L.index,L.index+L.length],H=[],z=this.scroll.length();return F.forEach(function($,ee){$=Math.min(z-1,$);var J=void 0,te=B.scroll.leaf($),Y=s(te,2),K=Y[0],V=Y[1],G=K.position(V,ee!==0),Z=s(G,2);J=Z[0],V=Z[1],H.push(J,V)}),H.length<2&&(H=H.concat(H)),H}},{key:"scrollIntoView",value:function(L){var B=this.lastRange;if(B!=null){var F=this.getBounds(B.index,B.length);if(F!=null){var H=this.scroll.length()-1,z=this.scroll.line(Math.min(B.index,H)),$=s(z,1),ee=$[0],J=ee;if(B.length>0){var te=this.scroll.line(Math.min(B.index+B.length,H)),Y=s(te,1);J=Y[0]}if(!(ee==null||J==null)){var K=L.getBoundingClientRect();F.top<K.top?L.scrollTop-=K.top-F.top:F.bottom>K.bottom&&(L.scrollTop+=F.bottom-K.bottom)}}}}},{key:"setNativeRange",value:function(L,B){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:L,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B,z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",L,B,F,H),!(L!=null&&(this.root.parentNode==null||L.parentNode==null||F.parentNode==null))){var $=document.getSelection();if($!=null)if(L!=null){this.hasFocus()||this.root.focus();var ee=(this.getNativeRange()||{}).native;if(ee==null||z||L!==ee.startContainer||B!==ee.startOffset||F!==ee.endContainer||H!==ee.endOffset){L.tagName=="BR"&&(B=[].indexOf.call(L.parentNode.childNodes,L),L=L.parentNode),F.tagName=="BR"&&(H=[].indexOf.call(F.parentNode.childNodes,F),F=F.parentNode);var J=document.createRange();J.setStart(L,B),J.setEnd(F,H),$.removeAllRanges(),$.addRange(J)}}else $.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.default.sources.API;if(typeof B=="string"&&(F=B,B=!1),S.info("setRange",L),L!=null){var H=this.rangeToNative(L);this.setNativeRange.apply(this,_(H).concat([B]))}else this.setNativeRange(null);this.update(F)}},{key:"update",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E.default.sources.USER,B=this.lastRange,F=this.getRange(),H=s(F,2),z=H[0],$=H[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,v.default)(B,this.lastRange)){var ee;!this.composing&&$!=null&&$.native.collapsed&&$.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[E.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(B),L];if((ee=this.emitter).emit.apply(ee,[E.default.events.EDITOR_CHANGE].concat(J)),L!==E.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,J)}}}}]),R}();function M(R,k){try{k.parentNode}catch{return!1}return k instanceof Text&&(k=k.parentNode),R.contains(k)}n.Range=O,n.default=D},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(w,A){for(var N=0;N<A.length;N++){var _=A[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,A,N){return A&&E(w.prototype,A),N&&E(w,N),w}}(),a=function E(w,A,N){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,A);if(_===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:E(C,A,N)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(N)}},c=i(0),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"insertInto",value:function(N,_){N.children.length===0?a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertInto",this).call(this,N,_):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),w}(h.default.Embed);x.blotName="break",x.tagName="BR",n.default=x},function(r,n,i){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var E in x)x.hasOwnProperty(E)&&(v[E]=x[E])};return function(v,x){m(v,x);function E(){this.constructor=v}v.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(44),c=i(30),h=i(1),d=function(m){s(v,m);function v(x){var E=m.call(this,x)||this;return E.build(),E}return v.prototype.appendChild=function(x){this.insertBefore(x)},v.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(x){x.attach()})},v.prototype.build=function(){var x=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(E){try{var w=p(E);x.insertBefore(w,x.children.head||void 0)}catch(A){if(A instanceof h.ParchmentError)return;throw A}})},v.prototype.deleteAt=function(x,E){if(x===0&&E===this.length())return this.remove();this.children.forEachAt(x,E,function(w,A,N){w.deleteAt(A,N)})},v.prototype.descendant=function(x,E){var w=this.children.find(E),A=w[0],N=w[1];return x.blotName==null&&x(A)||x.blotName!=null&&A instanceof x?[A,N]:A instanceof v?A.descendant(x,N):[null,-1]},v.prototype.descendants=function(x,E,w){E===void 0&&(E=0),w===void 0&&(w=Number.MAX_VALUE);var A=[],N=w;return this.children.forEachAt(E,w,function(_,C,S){(x.blotName==null&&x(_)||x.blotName!=null&&_ instanceof x)&&A.push(_),_ instanceof v&&(A=A.concat(_.descendants(x,C,N))),N-=S}),A},v.prototype.detach=function(){this.children.forEach(function(x){x.detach()}),m.prototype.detach.call(this)},v.prototype.formatAt=function(x,E,w,A){this.children.forEachAt(x,E,function(N,_,C){N.formatAt(_,C,w,A)})},v.prototype.insertAt=function(x,E,w){var A=this.children.find(x),N=A[0],_=A[1];if(N)N.insertAt(_,E,w);else{var C=w==null?h.create("text",E):h.create(E,w);this.appendChild(C)}},v.prototype.insertBefore=function(x,E){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(w){return x instanceof w}))throw new h.ParchmentError("Cannot insert "+x.statics.blotName+" into "+this.statics.blotName);x.insertInto(this,E)},v.prototype.length=function(){return this.children.reduce(function(x,E){return x+E.length()},0)},v.prototype.moveChildren=function(x,E){this.children.forEach(function(w){x.insertBefore(w,E)})},v.prototype.optimize=function(x){if(m.prototype.optimize.call(this,x),this.children.length===0)if(this.statics.defaultChild!=null){var E=h.create(this.statics.defaultChild);this.appendChild(E),E.optimize(x)}else this.remove()},v.prototype.path=function(x,E){E===void 0&&(E=!1);var w=this.children.find(x,E),A=w[0],N=w[1],_=[[this,x]];return A instanceof v?_.concat(A.path(N,E)):(A!=null&&_.push([A,N]),_)},v.prototype.removeChild=function(x){this.children.remove(x)},v.prototype.replace=function(x){x instanceof v&&x.moveChildren(this),m.prototype.replace.call(this,x)},v.prototype.split=function(x,E){if(E===void 0&&(E=!1),!E){if(x===0)return this;if(x===this.length())return this.next}var w=this.clone();return this.parent.insertBefore(w,this.next),this.children.forEachAt(x,this.length(),function(A,N,_){A=A.split(N,E),w.appendChild(A)}),w},v.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},v.prototype.update=function(x,E){var w=this,A=[],N=[];x.forEach(function(_){_.target===w.domNode&&_.type==="childList"&&(A.push.apply(A,_.addedNodes),N.push.apply(N,_.removedNodes))}),N.forEach(function(_){if(!(_.parentNode!=null&&_.tagName!=="IFRAME"&&document.body.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var C=h.find(_);C!=null&&(C.domNode.parentNode==null||C.domNode.parentNode===w.domNode)&&C.detach()}}),A.filter(function(_){return _.parentNode==w.domNode}).sort(function(_,C){return _===C?0:_.compareDocumentPosition(C)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(_){var C=null;_.nextSibling!=null&&(C=h.find(_.nextSibling));var S=p(_);(S.next!=C||S.next==null)&&(S.parent!=null&&S.parent.removeChild(w),w.insertBefore(S,C||void 0))})},v}(c.default);function p(m){var v=h.find(m);if(v==null)try{v=h.create(m)}catch{v=h.create(h.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(E){v.domNode.appendChild(E)}),m.parentNode&&m.parentNode.replaceChild(v.domNode,m),v.attach()}return v}n.default=d},function(r,n,i){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var E in x)x.hasOwnProperty(E)&&(v[E]=x[E])};return function(v,x){m(v,x);function E(){this.constructor=v}v.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12),c=i(31),h=i(17),d=i(1),p=function(m){s(v,m);function v(x){var E=m.call(this,x)||this;return E.attributes=new c.default(E.domNode),E}return v.formats=function(x){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return x.tagName.toLowerCase()},v.prototype.format=function(x,E){var w=d.query(x);w instanceof a.default?this.attributes.attribute(w,E):E&&w!=null&&(x!==this.statics.blotName||this.formats()[x]!==E)&&this.replaceWith(x,E)},v.prototype.formats=function(){var x=this.attributes.values(),E=this.statics.formats(this.domNode);return E!=null&&(x[this.statics.blotName]=E),x},v.prototype.replaceWith=function(x,E){var w=m.prototype.replaceWith.call(this,x,E);return this.attributes.copy(w),w},v.prototype.update=function(x,E){var w=this;m.prototype.update.call(this,x,E),x.some(function(A){return A.target===w.domNode&&A.type==="attributes"})&&this.attributes.build()},v.prototype.wrap=function(x,E){var w=m.prototype.wrap.call(this,x,E);return w instanceof v&&w.statics.scope===this.statics.scope&&this.attributes.move(w),w},v}(h.default);n.default=p},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)m.hasOwnProperty(v)&&(p[v]=m[v])};return function(p,m){d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(30),c=i(1),h=function(d){s(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.value=function(m){return!0},p.prototype.index=function(m,v){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(v,1):-1},p.prototype.position=function(m,v){var x=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(x+=1),[this.parent.domNode,x]},p.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},p.scope=c.Scope.INLINE_BLOT,p}(a.default);n.default=h},function(r,n,i){var s=i(11),a=i(3),c={attributes:{compose:function(d,p,m){typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var v=a(!0,{},p);m||(v=Object.keys(v).reduce(function(E,w){return v[w]!=null&&(E[w]=v[w]),E},{}));for(var x in d)d[x]!==void 0&&p[x]===void 0&&(v[x]=d[x]);return Object.keys(v).length>0?v:void 0},diff:function(d,p){typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var m=Object.keys(d).concat(Object.keys(p)).reduce(function(v,x){return s(d[x],p[x])||(v[x]=p[x]===void 0?null:p[x]),v},{});return Object.keys(m).length>0?m:void 0},transform:function(d,p,m){if(typeof d!="object")return p;if(typeof p=="object"){if(!m)return p;var v=Object.keys(p).reduce(function(x,E){return d[E]===void 0&&(x[E]=p[E]),x},{});return Object.keys(v).length>0?v:void 0}}},iterator:function(d){return new h(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function h(d){this.ops=d,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(d){d||(d=1/0);var p=this.ops[this.index];if(p){var m=this.offset,v=c.length(p);if(d>=v-m?(d=v-m,this.index+=1,this.offset=0):this.offset+=d,typeof p.delete=="number")return{delete:d};var x={};return p.attributes&&(x.attributes=p.attributes),typeof p.retain=="number"?x.retain=d:typeof p.insert=="string"?x.insert=p.insert.substr(m,d):x.insert=p.insert,x}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,p=this.index,m=this.next(),v=this.ops.slice(this.index);return this.offset=d,this.index=p,[m].concat(v)}else return[]},r.exports=c},function(r,n){var i=function(){function s(w,A){return A!=null&&w instanceof A}var a;try{a=Map}catch{a=function(){}}var c;try{c=Set}catch{c=function(){}}var h;try{h=Promise}catch{h=function(){}}function d(w,A,N,_,C){typeof A=="object"&&(N=A.depth,_=A.prototype,C=A.includeNonEnumerable,A=A.circular);var S=[],O=[],D=typeof Buffer<"u";typeof A>"u"&&(A=!0),typeof N>"u"&&(N=1/0);function M(R,k){if(R===null)return null;if(k===0)return R;var L,B;if(typeof R!="object")return R;if(s(R,a))L=new a;else if(s(R,c))L=new c;else if(s(R,h))L=new h(function(K,V){R.then(function(G){K(M(G,k-1))},function(G){V(M(G,k-1))})});else if(d.__isArray(R))L=[];else if(d.__isRegExp(R))L=new RegExp(R.source,E(R)),R.lastIndex&&(L.lastIndex=R.lastIndex);else if(d.__isDate(R))L=new Date(R.getTime());else{if(D&&Buffer.isBuffer(R))return Buffer.allocUnsafe?L=Buffer.allocUnsafe(R.length):L=new Buffer(R.length),R.copy(L),L;s(R,Error)?L=Object.create(R):typeof _>"u"?(B=Object.getPrototypeOf(R),L=Object.create(B)):(L=Object.create(_),B=_)}if(A){var F=S.indexOf(R);if(F!=-1)return O[F];S.push(R),O.push(L)}s(R,a)&&R.forEach(function(K,V){var G=M(V,k-1),Z=M(K,k-1);L.set(G,Z)}),s(R,c)&&R.forEach(function(K){var V=M(K,k-1);L.add(V)});for(var H in R){var z;B&&(z=Object.getOwnPropertyDescriptor(B,H)),!(z&&z.set==null)&&(L[H]=M(R[H],k-1))}if(Object.getOwnPropertySymbols)for(var $=Object.getOwnPropertySymbols(R),H=0;H<$.length;H++){var ee=$[H],J=Object.getOwnPropertyDescriptor(R,ee);J&&!J.enumerable&&!C||(L[ee]=M(R[ee],k-1),J.enumerable||Object.defineProperty(L,ee,{enumerable:!1}))}if(C)for(var te=Object.getOwnPropertyNames(R),H=0;H<te.length;H++){var Y=te[H],J=Object.getOwnPropertyDescriptor(R,Y);J&&J.enumerable||(L[Y]=M(R[Y],k-1),Object.defineProperty(L,Y,{enumerable:!1}))}return L}return M(w,N)}d.clonePrototype=function(A){if(A===null)return null;var N=function(){};return N.prototype=A,new N};function p(w){return Object.prototype.toString.call(w)}d.__objToStr=p;function m(w){return typeof w=="object"&&p(w)==="[object Date]"}d.__isDate=m;function v(w){return typeof w=="object"&&p(w)==="[object Array]"}d.__isArray=v;function x(w){return typeof w=="object"&&p(w)==="[object RegExp]"}d.__isRegExp=x;function E(w){var A="";return w.global&&(A+="g"),w.ignoreCase&&(A+="i"),w.multiline&&(A+="m"),A}return d.__getRegExpFlags=E,d}();typeof r=="object"&&r.exports&&(r.exports=i)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function L(B,F){var H=[],z=!0,$=!1,ee=void 0;try{for(var J=B[Symbol.iterator](),te;!(z=(te=J.next()).done)&&(H.push(te.value),!(F&&H.length===F));z=!0);}catch(Y){$=!0,ee=Y}finally{try{!z&&J.return&&J.return()}finally{if($)throw ee}}return H}return function(B,F){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return L(B,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function L(B,F){for(var H=0;H<F.length;H++){var z=F[H];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,z.key,z)}}return function(B,F,H){return F&&L(B.prototype,F),H&&L(B,H),B}}(),c=function L(B,F,H){B===null&&(B=Function.prototype);var z=Object.getOwnPropertyDescriptor(B,F);if(z===void 0){var $=Object.getPrototypeOf(B);return $===null?void 0:L($,F,H)}else{if("value"in z)return z.value;var ee=z.get;return ee===void 0?void 0:ee.call(H)}},h=i(0),d=S(h),p=i(8),m=S(p),v=i(4),x=S(v),E=i(16),w=S(E),A=i(13),N=S(A),_=i(25),C=S(_);function S(L){return L&&L.__esModule?L:{default:L}}function O(L,B){if(!(L instanceof B))throw new TypeError("Cannot call a class as a function")}function D(L,B){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:L}function M(L,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);L.prototype=Object.create(B&&B.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(L,B):L.__proto__=B)}function R(L){return L instanceof x.default||L instanceof v.BlockEmbed}var k=function(L){M(B,L);function B(F,H){O(this,B);var z=D(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,F));return z.emitter=H.emitter,Array.isArray(H.whitelist)&&(z.whitelist=H.whitelist.reduce(function($,ee){return $[ee]=!0,$},{})),z.domNode.addEventListener("DOMNodeInserted",function(){}),z.optimize(),z.enable(),z}return a(B,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(H,z){var $=this.line(H),ee=s($,2),J=ee[0],te=ee[1],Y=this.line(H+z),K=s(Y,1),V=K[0];if(c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"deleteAt",this).call(this,H,z),V!=null&&J!==V&&te>0){if(J instanceof v.BlockEmbed||V instanceof v.BlockEmbed){this.optimize();return}if(J instanceof N.default){var G=J.newlineIndex(J.length(),!0);if(G>-1&&(J=J.split(G+1),J===V)){this.optimize();return}}else if(V instanceof N.default){var Z=V.newlineIndex(0);Z>-1&&V.split(Z+1)}var se=V.children.head instanceof w.default?null:V.children.head;J.moveChildren(V,se),J.remove()}this.optimize()}},{key:"enable",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",H)}},{key:"formatAt",value:function(H,z,$,ee){this.whitelist!=null&&!this.whitelist[$]||(c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"formatAt",this).call(this,H,z,$,ee),this.optimize())}},{key:"insertAt",value:function(H,z,$){if(!($!=null&&this.whitelist!=null&&!this.whitelist[z])){if(H>=this.length())if($==null||d.default.query(z,d.default.Scope.BLOCK)==null){var ee=d.default.create(this.statics.defaultChild);this.appendChild(ee),$==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),ee.insertAt(0,z,$)}else{var J=d.default.create(z,$);this.appendChild(J)}else c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"insertAt",this).call(this,H,z,$);this.optimize()}}},{key:"insertBefore",value:function(H,z){if(H.statics.scope===d.default.Scope.INLINE_BLOT){var $=d.default.create(this.statics.defaultChild);$.appendChild(H),H=$}c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"insertBefore",this).call(this,H,z)}},{key:"leaf",value:function(H){return this.path(H).pop()||[null,-1]}},{key:"line",value:function(H){return H===this.length()?this.line(H-1):this.descendant(R,H)}},{key:"lines",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,$=function ee(J,te,Y){var K=[],V=Y;return J.children.forEachAt(te,Y,function(G,Z,se){R(G)?K.push(G):G instanceof d.default.Container&&(K=K.concat(ee(G,Z,V))),V-=se}),K};return $(this,H,z)}},{key:"optimize",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"optimize",this).call(this,H,z),H.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,H,z))}},{key:"path",value:function(H){return c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"path",this).call(this,H).slice(1)}},{key:"update",value:function(H){if(this.batch!==!0){var z=m.default.sources.USER;typeof H=="string"&&(z=H),Array.isArray(H)||(H=this.observer.takeRecords()),H.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,z,H),c(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"update",this).call(this,H.concat([])),H.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,z,H)}}}]),B}(d.default.Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[x.default,v.BlockEmbed,C.default],n.default=k},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},a=function(){function X(ne,ue){var fe=[],oe=!0,ve=!1,Se=void 0;try{for(var Ce=ne[Symbol.iterator](),Fe;!(oe=(Fe=Ce.next()).done)&&(fe.push(Fe.value),!(ue&&fe.length===ue));oe=!0);}catch(Ge){ve=!0,Se=Ge}finally{try{!oe&&Ce.return&&Ce.return()}finally{if(ve)throw Se}}return fe}return function(ne,ue){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return X(ne,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function X(ne,ue){for(var fe=0;fe<ue.length;fe++){var oe=ue[fe];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ne,oe.key,oe)}}return function(ne,ue,fe){return ue&&X(ne.prototype,ue),fe&&X(ne,fe),ne}}(),h=i(21),d=L(h),p=i(11),m=L(p),v=i(3),x=L(v),E=i(2),w=L(E),A=i(20),N=L(A),_=i(0),C=L(_),S=i(5),O=L(S),D=i(10),M=L(D),R=i(9),k=L(R);function L(X){return X&&X.__esModule?X:{default:X}}function B(X,ne,ue){return ne in X?Object.defineProperty(X,ne,{value:ue,enumerable:!0,configurable:!0,writable:!0}):X[ne]=ue,X}function F(X,ne){if(!(X instanceof ne))throw new TypeError("Cannot call a class as a function")}function H(X,ne){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:X}function z(X,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);X.prototype=Object.create(ne&&ne.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ne):X.__proto__=ne)}var $=(0,M.default)("quill:keyboard"),ee=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=function(X){z(ne,X),c(ne,null,[{key:"match",value:function(fe,oe){return oe=ae(oe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ve){return!!oe[ve]!==fe[ve]&&oe[ve]!==null})?!1:oe.key===(fe.which||fe.keyCode)}}]);function ne(ue,fe){F(this,ne);var oe=H(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,ue,fe));return oe.bindings={},Object.keys(oe.options.bindings).forEach(function(ve){ve==="list autofill"&&ue.scroll.whitelist!=null&&!ue.scroll.whitelist.list||oe.options.bindings[ve]&&oe.addBinding(oe.options.bindings[ve])}),oe.addBinding({key:ne.keys.ENTER,shiftKey:null},G),oe.addBinding({key:ne.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(oe.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0},Y),oe.addBinding({key:ne.keys.DELETE},{collapsed:!0},K)):(oe.addBinding({key:ne.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Y),oe.addBinding({key:ne.keys.DELETE},{collapsed:!0,suffix:/^.?$/},K)),oe.addBinding({key:ne.keys.BACKSPACE},{collapsed:!1},V),oe.addBinding({key:ne.keys.DELETE},{collapsed:!1},V),oe.addBinding({key:ne.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Y),oe.listen(),oe}return c(ne,[{key:"addBinding",value:function(fe){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=ae(fe);if(Se==null||Se.key==null)return $.warn("Attempted to add invalid keyboard binding",Se);typeof oe=="function"&&(oe={handler:oe}),typeof ve=="function"&&(ve={handler:ve}),Se=(0,x.default)(Se,oe,ve),this.bindings[Se.key]=this.bindings[Se.key]||[],this.bindings[Se.key].push(Se)}},{key:"listen",value:function(){var fe=this;this.quill.root.addEventListener("keydown",function(oe){if(!oe.defaultPrevented){var ve=oe.which||oe.keyCode,Se=(fe.bindings[ve]||[]).filter(function(kt){return ne.match(oe,kt)});if(Se.length!==0){var Ce=fe.quill.getSelection();if(!(Ce==null||!fe.quill.hasFocus())){var Fe=fe.quill.getLine(Ce.index),Ge=a(Fe,2),ht=Ge[0],we=Ge[1],he=fe.quill.getLeaf(Ce.index),de=a(he,2),Ne=de[0],ge=de[1],Ee=Ce.length===0?[Ne,ge]:fe.quill.getLeaf(Ce.index+Ce.length),Le=a(Ee,2),He=Le[0],rt=Le[1],ut=Ne instanceof C.default.Text?Ne.value().slice(0,ge):"",Tr=He instanceof C.default.Text?He.value().slice(rt):"",wt={collapsed:Ce.length===0,empty:Ce.length===0&&ht.length()<=1,format:fe.quill.getFormat(Ce),offset:we,prefix:ut,suffix:Tr},Or=Se.some(function(kt){if(kt.collapsed!=null&&kt.collapsed!==wt.collapsed||kt.empty!=null&&kt.empty!==wt.empty||kt.offset!=null&&kt.offset!==wt.offset)return!1;if(Array.isArray(kt.format)){if(kt.format.every(function(fn){return wt.format[fn]==null}))return!1}else if(s(kt.format)==="object"&&!Object.keys(kt.format).every(function(fn){return kt.format[fn]===!0?wt.format[fn]!=null:kt.format[fn]===!1?wt.format[fn]==null:(0,m.default)(kt.format[fn],wt.format[fn])}))return!1;return kt.prefix!=null&&!kt.prefix.test(wt.prefix)||kt.suffix!=null&&!kt.suffix.test(wt.suffix)?!1:kt.handler.call(fe,Ce,wt)!==!0});Or&&oe.preventDefault()}}}})}}]),ne}(k.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:se("bold"),italic:se("italic"),underline:se("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(ne,ue){if(ue.collapsed&&ue.offset!==0)return!0;this.quill.format("indent","+1",O.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ne,ue){if(ue.collapsed&&ue.offset!==0)return!0;this.quill.format("indent","-1",O.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ne,ue){ue.format.indent!=null?this.quill.format("indent","-1",O.default.sources.USER):ue.format.list!=null&&this.quill.format("list",!1,O.default.sources.USER)}},"indent code-block":Z(!0),"outdent code-block":Z(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ne){this.quill.deleteText(ne.index-1,1,O.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(ne){this.quill.history.cutoff();var ue=new w.default().retain(ne.index).delete(ne.length).insert("	");this.quill.updateContents(ue,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index+1,O.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ne,ue){this.quill.format("list",!1,O.default.sources.USER),ue.format.indent&&this.quill.format("indent",!1,O.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ne){var ue=this.quill.getLine(ne.index),fe=a(ue,2),oe=fe[0],ve=fe[1],Se=(0,x.default)({},oe.formats(),{list:"checked"}),Ce=new w.default().retain(ne.index).insert(`
`,Se).retain(oe.length()-ve-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ce,O.default.sources.USER),this.quill.setSelection(ne.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ne,ue){var fe=this.quill.getLine(ne.index),oe=a(fe,2),ve=oe[0],Se=oe[1],Ce=new w.default().retain(ne.index).insert(`
`,ue.format).retain(ve.length()-Se-1).retain(1,{header:null});this.quill.updateContents(Ce,O.default.sources.USER),this.quill.setSelection(ne.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ne,ue){var fe=ue.prefix.length,oe=this.quill.getLine(ne.index),ve=a(oe,2),Se=ve[0],Ce=ve[1];if(Ce>fe)return!0;var Fe=void 0;switch(ue.prefix.trim()){case"[]":case"[ ]":Fe="unchecked";break;case"[x]":Fe="checked";break;case"-":case"*":Fe="bullet";break;default:Fe="ordered"}this.quill.insertText(ne.index," ",O.default.sources.USER),this.quill.history.cutoff();var Ge=new w.default().retain(ne.index-Ce).delete(fe+1).retain(Se.length()-2-Ce).retain(1,{list:Fe});this.quill.updateContents(Ge,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ne.index-fe,O.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ne){var ue=this.quill.getLine(ne.index),fe=a(ue,2),oe=fe[0],ve=fe[1],Se=new w.default().retain(ne.index+oe.length()-ve-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Se,O.default.sources.USER)}},"embed left":te(J.keys.LEFT,!1),"embed left shift":te(J.keys.LEFT,!0),"embed right":te(J.keys.RIGHT,!1),"embed right shift":te(J.keys.RIGHT,!0)}};function te(X,ne){var ue,fe=X===J.keys.LEFT?"prefix":"suffix";return ue={key:X,shiftKey:ne,altKey:null},B(ue,fe,/^$/),B(ue,"handler",function(ve){var Se=ve.index;X===J.keys.RIGHT&&(Se+=ve.length+1);var Ce=this.quill.getLeaf(Se),Fe=a(Ce,1),Ge=Fe[0];return Ge instanceof C.default.Embed?(X===J.keys.LEFT?ne?this.quill.setSelection(ve.index-1,ve.length+1,O.default.sources.USER):this.quill.setSelection(ve.index-1,O.default.sources.USER):ne?this.quill.setSelection(ve.index,ve.length+1,O.default.sources.USER):this.quill.setSelection(ve.index+ve.length+1,O.default.sources.USER),!1):!0}),ue}function Y(X,ne){if(!(X.index===0||this.quill.getLength()<=1)){var ue=this.quill.getLine(X.index),fe=a(ue,1),oe=fe[0],ve={};if(ne.offset===0){var Se=this.quill.getLine(X.index-1),Ce=a(Se,1),Fe=Ce[0];if(Fe!=null&&Fe.length()>1){var Ge=oe.formats(),ht=this.quill.getFormat(X.index-1,1);ve=N.default.attributes.diff(Ge,ht)||{}}}var we=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ne.prefix)?2:1;this.quill.deleteText(X.index-we,we,O.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(X.index-we,we,ve,O.default.sources.USER),this.quill.focus()}}function K(X,ne){var ue=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ne.suffix)?2:1;if(!(X.index>=this.quill.getLength()-ue)){var fe={},oe=0,ve=this.quill.getLine(X.index),Se=a(ve,1),Ce=Se[0];if(ne.offset>=Ce.length()-1){var Fe=this.quill.getLine(X.index+1),Ge=a(Fe,1),ht=Ge[0];if(ht){var we=Ce.formats(),he=this.quill.getFormat(X.index,1);fe=N.default.attributes.diff(we,he)||{},oe=ht.length()}}this.quill.deleteText(X.index,ue,O.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(X.index+oe-1,ue,fe,O.default.sources.USER)}}function V(X){var ne=this.quill.getLines(X),ue={};if(ne.length>1){var fe=ne[0].formats(),oe=ne[ne.length-1].formats();ue=N.default.attributes.diff(oe,fe)||{}}this.quill.deleteText(X,O.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(X.index,1,ue,O.default.sources.USER),this.quill.setSelection(X.index,O.default.sources.SILENT),this.quill.focus()}function G(X,ne){var ue=this;X.length>0&&this.quill.scroll.deleteAt(X.index,X.length);var fe=Object.keys(ne.format).reduce(function(oe,ve){return C.default.query(ve,C.default.Scope.BLOCK)&&!Array.isArray(ne.format[ve])&&(oe[ve]=ne.format[ve]),oe},{});this.quill.insertText(X.index,`
`,fe,O.default.sources.USER),this.quill.setSelection(X.index+1,O.default.sources.SILENT),this.quill.focus(),Object.keys(ne.format).forEach(function(oe){fe[oe]==null&&(Array.isArray(ne.format[oe])||oe!=="link"&&ue.quill.format(oe,ne.format[oe],O.default.sources.USER))})}function Z(X){return{key:J.keys.TAB,shiftKey:!X,format:{"code-block":!0},handler:function(ue){var fe=C.default.query("code-block"),oe=ue.index,ve=ue.length,Se=this.quill.scroll.descendant(fe,oe),Ce=a(Se,2),Fe=Ce[0],Ge=Ce[1];if(Fe!=null){var ht=this.quill.getIndex(Fe),we=Fe.newlineIndex(Ge,!0)+1,he=Fe.newlineIndex(ht+Ge+ve),de=Fe.domNode.textContent.slice(we,he).split(`
`);Ge=0,de.forEach(function(Ne,ge){X?(Fe.insertAt(we+Ge,fe.TAB),Ge+=fe.TAB.length,ge===0?oe+=fe.TAB.length:ve+=fe.TAB.length):Ne.startsWith(fe.TAB)&&(Fe.deleteAt(we+Ge,fe.TAB.length),Ge-=fe.TAB.length,ge===0?oe-=fe.TAB.length:ve-=fe.TAB.length),Ge+=Ne.length+1}),this.quill.update(O.default.sources.USER),this.quill.setSelection(oe,ve,O.default.sources.SILENT)}}}}function se(X){return{key:X[0].toUpperCase(),shortKey:!0,handler:function(ue,fe){this.quill.format(X,!fe.format[X],O.default.sources.USER)}}}function ae(X){if(typeof X=="string"||typeof X=="number")return ae({key:X});if((typeof X>"u"?"undefined":s(X))==="object"&&(X=(0,d.default)(X,!1)),typeof X.key=="string")if(J.keys[X.key.toUpperCase()]!=null)X.key=J.keys[X.key.toUpperCase()];else if(X.key.length===1)X.key=X.key.toUpperCase().charCodeAt(0);else return null;return X.shortKey&&(X[ee]=X.shortKey,delete X.shortKey),X}n.default=J,n.SHORTKEY=ee},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function N(_,C){var S=[],O=!0,D=!1,M=void 0;try{for(var R=_[Symbol.iterator](),k;!(O=(k=R.next()).done)&&(S.push(k.value),!(C&&S.length===C));O=!0);}catch(L){D=!0,M=L}finally{try{!O&&R.return&&R.return()}finally{if(D)throw M}}return S}return function(_,C){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return N(_,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function N(_,C,S){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,C);if(O===void 0){var D=Object.getPrototypeOf(_);return D===null?void 0:N(D,C,S)}else{if("value"in O)return O.value;var M=O.get;return M===void 0?void 0:M.call(S)}},c=function(){function N(_,C){for(var S=0;S<C.length;S++){var O=C[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,C,S){return C&&N(_.prototype,C),S&&N(_,S),_}}(),h=i(0),d=v(h),p=i(7),m=v(p);function v(N){return N&&N.__esModule?N:{default:N}}function x(N,_){if(!(N instanceof _))throw new TypeError("Cannot call a class as a function")}function E(N,_){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:N}function w(N,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);N.prototype=Object.create(_&&_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(N,_):N.__proto__=_)}var A=function(N){w(_,N),c(_,null,[{key:"value",value:function(){}}]);function _(C,S){x(this,_);var O=E(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,C));return O.selection=S,O.textNode=document.createTextNode(_.CONTENTS),O.domNode.appendChild(O.textNode),O._length=0,O}return c(_,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,O){if(this._length!==0)return a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,S,O);for(var D=this,M=0;D!=null&&D.statics.scope!==d.default.Scope.BLOCK_BLOT;)M+=D.offset(D.parent),D=D.parent;D!=null&&(this._length=_.CONTENTS.length,D.optimize(),D.formatAt(M,_.CONTENTS.length,S,O),this._length=0)}},{key:"index",value:function(S,O){return S===this.textNode?0:a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"index",this).call(this,S,O)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,O=this.selection.getNativeRange(),D=void 0,M=void 0,R=void 0;if(O!=null&&O.start.node===S&&O.end.node===S){var k=[S,O.start.offset,O.end.offset];D=k[0],M=k[1],R=k[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==_.CONTENTS){var L=this.textNode.data.split(_.CONTENTS).join("");this.next instanceof m.default?(D=this.next.domNode,this.next.insertAt(0,L),this.textNode.data=_.CONTENTS):(this.textNode.data=L,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(_.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),M!=null){var B=[M,R].map(function(H){return Math.max(0,Math.min(D.data.length,H-1))}),F=s(B,2);return M=F[0],R=F[1],{startNode:D,startOffset:M,endNode:D,endOffset:R}}}}},{key:"update",value:function(S,O){var D=this;if(S.some(function(R){return R.type==="characterData"&&R.target===D.textNode})){var M=this.restore();M&&(O.range=M)}}},{key:"value",value:function(){return""}}]),_}(d.default.Embed);A.blotName="cursor",A.className="ql-cursor",A.tagName="span",A.CONTENTS="\uFEFF",n.default=A},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),a=d(s),c=i(4),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return w}(a.default.Container);x.allowedChildren=[h.default,c.BlockEmbed,x],n.default=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function A(N,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,_,C){return _&&A(N.prototype,_),C&&A(N,C),N}}(),a=function A(N,_,C){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,_);if(S===void 0){var O=Object.getPrototypeOf(N);return O===null?void 0:A(O,_,C)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(C)}},c=i(0),h=d(c);function d(A){return A&&A.__esModule?A:{default:A}}function p(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")}function m(A,N){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:A}function v(A,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);A.prototype=Object.create(N&&N.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(A,N):A.__proto__=N)}var x=function(A){v(N,A);function N(){return p(this,N),m(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,[{key:"value",value:function(C){var S=a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,C);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(O){return("00"+parseInt(O).toString(16)).slice(-2)}).join("")):S}}]),N}(h.default.Attributor.Style),E=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),w=new x("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=x,n.ColorClass=E,n.ColorStyle=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function w(A,N){for(var _=0;_<N.length;_++){var C=N[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,N,_){return N&&w(A.prototype,N),_&&w(A,_),A}}(),a=function w(A,N,_){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,N);if(C===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:w(S,N,_)}else{if("value"in C)return C.value;var O=C.get;return O===void 0?void 0:O.call(_)}},c=i(6),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function m(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function v(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var x=function(w){v(A,w);function A(){return p(this,A),m(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"format",value:function(_,C){if(_!==this.statics.blotName||!C)return a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,_,C);C=this.constructor.sanitize(C),this.domNode.setAttribute("href",C)}}],[{key:"create",value:function(_){var C=a(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,_);return _=this.sanitize(_),C.setAttribute("href",_),C.setAttribute("rel","noopener noreferrer"),C.setAttribute("target","_blank"),C}},{key:"formats",value:function(_){return _.getAttribute("href")}},{key:"sanitize",value:function(_){return E(_,this.PROTOCOL_WHITELIST)?_:this.SANITIZED_URL}}]),A}(h.default);x.blotName="link",x.tagName="A",x.SANITIZED_URL="about:blank",x.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function E(w,A){var N=document.createElement("a");N.href=w;var _=N.href.slice(0,N.href.indexOf(":"));return A.indexOf(_)>-1}n.default=x,n.sanitize=E},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},a=function(){function A(N,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,_,C){return _&&A(N.prototype,_),C&&A(N,C),N}}(),c=i(23),h=m(c),d=i(107),p=m(d);function m(A){return A&&A.__esModule?A:{default:A}}function v(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")}var x=0;function E(A,N){A.setAttribute(N,A.getAttribute(N)!=="true")}var w=function(){function A(N){var _=this;v(this,A),this.select=N,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){_.togglePicker()}),this.label.addEventListener("keydown",function(C){switch(C.keyCode){case h.default.keys.ENTER:_.togglePicker();break;case h.default.keys.ESCAPE:_.escape(),C.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return a(A,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),E(this.label,"aria-expanded"),E(this.options,"aria-hidden")}},{key:"buildItem",value:function(_){var C=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),_.hasAttribute("value")&&S.setAttribute("data-value",_.getAttribute("value")),_.textContent&&S.setAttribute("data-label",_.textContent),S.addEventListener("click",function(){C.selectItem(S,!0)}),S.addEventListener("keydown",function(O){switch(O.keyCode){case h.default.keys.ENTER:C.selectItem(S,!0),O.preventDefault();break;case h.default.keys.ESCAPE:C.escape(),O.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var _=document.createElement("span");return _.classList.add("ql-picker-label"),_.innerHTML=p.default,_.tabIndex="0",_.setAttribute("role","button"),_.setAttribute("aria-expanded","false"),this.container.appendChild(_),_}},{key:"buildOptions",value:function(){var _=this,C=document.createElement("span");C.classList.add("ql-picker-options"),C.setAttribute("aria-hidden","true"),C.tabIndex="-1",C.id="ql-picker-options-"+x,x+=1,this.label.setAttribute("aria-controls",C.id),this.options=C,[].slice.call(this.select.options).forEach(function(S){var O=_.buildItem(S);C.appendChild(O),S.selected===!0&&_.selectItem(O)}),this.container.appendChild(C)}},{key:"buildPicker",value:function(){var _=this;[].slice.call(this.select.attributes).forEach(function(C){_.container.setAttribute(C.name,C.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var _=this;this.close(),setTimeout(function(){return _.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(_){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(_!==S&&(S!=null&&S.classList.remove("ql-selected"),_!=null&&(_.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(_.parentNode.children,_),_.hasAttribute("data-value")?this.label.setAttribute("data-value",_.getAttribute("data-value")):this.label.removeAttribute("data-value"),_.hasAttribute("data-label")?this.label.setAttribute("data-label",_.getAttribute("data-label")):this.label.removeAttribute("data-label"),C))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var O=document.createEvent("Event");O.initEvent("change",!0,!0),this.select.dispatchEvent(O)}this.close()}}},{key:"update",value:function(){var _=void 0;if(this.select.selectedIndex>-1){var C=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];_=this.select.options[this.select.selectedIndex],this.selectItem(C)}else this.selectItem(null);var S=_!=null&&_!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),A}();n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),a=$(s),c=i(5),h=$(c),d=i(4),p=$(d),m=i(16),v=$(m),x=i(25),E=$(x),w=i(24),A=$(w),N=i(35),_=$(N),C=i(6),S=$(C),O=i(22),D=$(O),M=i(7),R=$(M),k=i(55),L=$(k),B=i(42),F=$(B),H=i(23),z=$(H);function $(ee){return ee&&ee.__esModule?ee:{default:ee}}h.default.register({"blots/block":p.default,"blots/block/embed":d.BlockEmbed,"blots/break":v.default,"blots/container":E.default,"blots/cursor":A.default,"blots/embed":_.default,"blots/inline":S.default,"blots/scroll":D.default,"blots/text":R.default,"modules/clipboard":L.default,"modules/history":F.default,"modules/keyboard":z.default}),a.default.register(p.default,v.default,A.default,S.default,D.default,R.default),n.default=h.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),a=function(){function c(h){this.domNode=h,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(h){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?d=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?d=document.createElement(h):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return s.create(h)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},c.prototype.deleteAt=function(h,d){var p=this.isolate(h,d);p.remove()},c.prototype.formatAt=function(h,d,p,m){var v=this.isolate(h,d);if(s.query(p,s.Scope.BLOT)!=null&&m)v.wrap(p,m);else if(s.query(p,s.Scope.ATTRIBUTE)!=null){var x=s.create(this.statics.scope);v.wrap(x),x.format(p,m)}},c.prototype.insertAt=function(h,d,p){var m=p==null?s.create("text",d):s.create(d,p),v=this.split(h);this.parent.insertBefore(m,v)},c.prototype.insertInto=function(h,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var p=null;h.children.insertBefore(this,d),d!=null&&(p=d.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=p)&&h.domNode.insertBefore(this.domNode,p),this.parent=h,this.attach()},c.prototype.isolate=function(h,d){var p=this.split(h);return p.split(d),p},c.prototype.length=function(){return 1},c.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},c.prototype.optimize=function(h){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},c.prototype.replaceWith=function(h,d){var p=typeof h=="string"?s.create(h,d):h;return p.replace(this),p},c.prototype.split=function(h,d){return h===0?this:this.next},c.prototype.update=function(h,d){},c.prototype.wrap=function(h,d){var p=typeof h=="string"?s.create(h,d):h;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},c.blotName="abstract",c}();n.default=a},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(12),a=i(32),c=i(33),h=i(1),d=function(){function p(m){this.attributes={},this.domNode=m,this.build()}return p.prototype.attribute=function(m,v){v?m.add(this.domNode,v)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},p.prototype.build=function(){var m=this;this.attributes={};var v=s.default.keys(this.domNode),x=a.default.keys(this.domNode),E=c.default.keys(this.domNode);v.concat(x).concat(E).forEach(function(w){var A=h.query(w,h.Scope.ATTRIBUTE);A instanceof s.default&&(m.attributes[A.attrName]=A)})},p.prototype.copy=function(m){var v=this;Object.keys(this.attributes).forEach(function(x){var E=v.attributes[x].value(v.domNode);m.format(x,E)})},p.prototype.move=function(m){var v=this;this.copy(m),Object.keys(this.attributes).forEach(function(x){v.attributes[x].remove(v.domNode)}),this.attributes={}},p.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(v,x){return v[x]=m.attributes[x].value(m.domNode),v},{})},p}();n.default=d},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)m.hasOwnProperty(v)&&(p[v]=m[v])};return function(p,m){d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12);function c(d,p){var m=d.getAttribute("class")||"";return m.split(/\s+/).filter(function(v){return v.indexOf(p+"-")===0})}var h=function(d){s(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(v){return v.split("-").slice(0,-1).join("-")})},p.prototype.add=function(m,v){return this.canAdd(m,v)?(this.remove(m),m.classList.add(this.keyName+"-"+v),!0):!1},p.prototype.remove=function(m){var v=c(m,this.keyName);v.forEach(function(x){m.classList.remove(x)}),m.classList.length===0&&m.removeAttribute("class")},p.prototype.value=function(m){var v=c(m,this.keyName)[0]||"",x=v.slice(this.keyName.length+1);return this.canAdd(m,x)?x:""},p}(a.default);n.default=h},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)m.hasOwnProperty(v)&&(p[v]=m[v])};return function(p,m){d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(12);function c(d){var p=d.split("-"),m=p.slice(1).map(function(v){return v[0].toUpperCase()+v.slice(1)}).join("");return p[0]+m}var h=function(d){s(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(v){var x=v.split(":");return x[0].trim()})},p.prototype.add=function(m,v){return this.canAdd(m,v)?(m.style[c(this.keyName)]=v,!0):!1},p.prototype.remove=function(m){m.style[c(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},p.prototype.value=function(m){var v=m.style[c(this.keyName)];return this.canAdd(m,v)?v:""},p}(a.default);n.default=h},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function h(d,p){for(var m=0;m<p.length;m++){var v=p[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}return function(d,p,m){return p&&h(d.prototype,p),m&&h(d,m),d}}();function a(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,p){a(this,h),this.quill=d,this.options=p,this.modules={}}return s(h,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(m){p.modules[m]==null&&p.addModule(m)})}},{key:"addModule",value:function(p){var m=this.quill.constructor.import("modules/"+p);return this.modules[p]=new m(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),h}();c.DEFAULTS={modules:{}},c.themes={default:c},n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function N(_,C){for(var S=0;S<C.length;S++){var O=C[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,C,S){return C&&N(_.prototype,C),S&&N(_,S),_}}(),a=function N(_,C,S){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,C);if(O===void 0){var D=Object.getPrototypeOf(_);return D===null?void 0:N(D,C,S)}else{if("value"in O)return O.value;var M=O.get;return M===void 0?void 0:M.call(S)}},c=i(0),h=m(c),d=i(7),p=m(d);function m(N){return N&&N.__esModule?N:{default:N}}function v(N,_){if(!(N instanceof _))throw new TypeError("Cannot call a class as a function")}function x(N,_){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:N}function E(N,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);N.prototype=Object.create(_&&_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(N,_):N.__proto__=_)}var w="\uFEFF",A=function(N){E(_,N);function _(C){v(this,_);var S=x(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,C));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(O){S.contentNode.appendChild(O)}),S.leftGuard=document.createTextNode(w),S.rightGuard=document.createTextNode(w),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return s(_,[{key:"index",value:function(S,O){return S===this.leftGuard?0:S===this.rightGuard?1:a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"index",this).call(this,S,O)}},{key:"restore",value:function(S){var O=void 0,D=void 0,M=S.data.split(w).join("");if(S===this.leftGuard)if(this.prev instanceof p.default){var R=this.prev.length();this.prev.insertAt(R,M),O={startNode:this.prev.domNode,startOffset:R+M.length}}else D=document.createTextNode(M),this.parent.insertBefore(h.default.create(D),this),O={startNode:D,startOffset:M.length};else S===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,M),O={startNode:this.next.domNode,startOffset:M.length}):(D=document.createTextNode(M),this.parent.insertBefore(h.default.create(D),this.next),O={startNode:D,startOffset:M.length}));return S.data=w,O}},{key:"update",value:function(S,O){var D=this;S.forEach(function(M){if(M.type==="characterData"&&(M.target===D.leftGuard||M.target===D.rightGuard)){var R=D.restore(M.target);R&&(O.range=R)}})}}]),_}(h.default.Embed);n.default=A},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=i(0),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var h={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new a.default.Attributor.Attribute("align","align",h),p=new a.default.Attributor.Class("align","ql-align",h),m=new a.default.Attributor.Style("align","text-align",h);n.AlignAttribute=d,n.AlignClass=p,n.AlignStyle=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=i(0),a=h(s),c=i(26);function h(m){return m&&m.__esModule?m:{default:m}}var d=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),p=new c.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=p},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=i(0),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var h={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},d=new a.default.Attributor.Attribute("direction","dir",h),p=new a.default.Attributor.Class("direction","ql-direction",h),m=new a.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=d,n.DirectionClass=p,n.DirectionStyle=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function N(_,C){for(var S=0;S<C.length;S++){var O=C[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,C,S){return C&&N(_.prototype,C),S&&N(_,S),_}}(),a=function N(_,C,S){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,C);if(O===void 0){var D=Object.getPrototypeOf(_);return D===null?void 0:N(D,C,S)}else{if("value"in O)return O.value;var M=O.get;return M===void 0?void 0:M.call(S)}},c=i(0),h=d(c);function d(N){return N&&N.__esModule?N:{default:N}}function p(N,_){if(!(N instanceof _))throw new TypeError("Cannot call a class as a function")}function m(N,_){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:N}function v(N,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);N.prototype=Object.create(_&&_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(N,_):N.__proto__=_)}var x={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},E=new h.default.Attributor.Class("font","ql-font",x),w=function(N){v(_,N);function _(){return p(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"value",value:function(S){return a(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),_}(h.default.Attributor.Style),A=new w("font","font-family",x);n.FontStyle=A,n.FontClass=E},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=i(0),a=c(s);function c(p){return p&&p.__esModule?p:{default:p}}var h=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=d},function(r,n,i){r.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function C(S,O){for(var D=0;D<O.length;D++){var M=O[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,O,D){return O&&C(S.prototype,O),D&&C(S,D),S}}(),a=i(0),c=v(a),h=i(5),d=v(h),p=i(9),m=v(p);function v(C){return C&&C.__esModule?C:{default:C}}function x(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function E(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function w(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var A=function(C){w(S,C);function S(O,D){x(this,S);var M=E(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,O,D));return M.lastRecorded=0,M.ignoreChange=!1,M.clear(),M.quill.on(d.default.events.EDITOR_CHANGE,function(R,k,L,B){R!==d.default.events.TEXT_CHANGE||M.ignoreChange||(!M.options.userOnly||B===d.default.sources.USER?M.record(k,L):M.transform(k))}),M.quill.keyboard.addBinding({key:"Z",shortKey:!0},M.undo.bind(M)),M.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},M.redo.bind(M)),/Win/i.test(navigator.platform)&&M.quill.keyboard.addBinding({key:"Y",shortKey:!0},M.redo.bind(M)),M}return s(S,[{key:"change",value:function(D,M){if(this.stack[D].length!==0){var R=this.stack[D].pop();this.stack[M].push(R),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(R[D],d.default.sources.USER),this.ignoreChange=!1;var k=_(R[D]);this.quill.setSelection(k)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(D,M){if(D.ops.length!==0){this.stack.redo=[];var R=this.quill.getContents().diff(M),k=Date.now();if(this.lastRecorded+this.options.delay>k&&this.stack.undo.length>0){var L=this.stack.undo.pop();R=R.compose(L.undo),D=L.redo.compose(D)}else this.lastRecorded=k;this.stack.undo.push({redo:D,undo:R}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(D){this.stack.undo.forEach(function(M){M.undo=D.transform(M.undo,!0),M.redo=D.transform(M.redo,!0)}),this.stack.redo.forEach(function(M){M.undo=D.transform(M.undo,!0),M.redo=D.transform(M.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(m.default);A.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function N(C){var S=C.ops[C.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(O){return c.default.query(O,c.default.Scope.BLOCK)!=null}):!1}function _(C){var S=C.reduce(function(D,M){return D+=M.delete||0,D},0),O=C.length()-S;return N(C)&&(O-=1),O}n.default=A,n.getLastChangeIndex=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function G(Z,se){for(var ae=0;ae<se.length;ae++){var X=se[ae];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(Z,X.key,X)}}return function(Z,se,ae){return se&&G(Z.prototype,se),ae&&G(Z,ae),Z}}(),a=function G(Z,se,ae){Z===null&&(Z=Function.prototype);var X=Object.getOwnPropertyDescriptor(Z,se);if(X===void 0){var ne=Object.getPrototypeOf(Z);return ne===null?void 0:G(ne,se,ae)}else{if("value"in X)return X.value;var ue=X.get;return ue===void 0?void 0:ue.call(ae)}},c=i(3),h=k(c),d=i(2),p=k(d),m=i(8),v=k(m),x=i(23),E=k(x),w=i(34),A=k(w),N=i(59),_=k(N),C=i(60),S=k(C),O=i(28),D=k(O),M=i(61),R=k(M);function k(G){return G&&G.__esModule?G:{default:G}}function L(G,Z){if(!(G instanceof Z))throw new TypeError("Cannot call a class as a function")}function B(G,Z){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:G}function F(G,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);G.prototype=Object.create(Z&&Z.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(G,Z):G.__proto__=Z)}var H=[!1,"center","right","justify"],z=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$=[!1,"serif","monospace"],ee=["1","2","3",!1],J=["small",!1,"large","huge"],te=function(G){F(Z,G);function Z(se,ae){L(this,Z);var X=B(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,se,ae)),ne=function ue(fe){if(!document.body.contains(se.root))return document.body.removeEventListener("click",ue);X.tooltip!=null&&!X.tooltip.root.contains(fe.target)&&document.activeElement!==X.tooltip.textbox&&!X.quill.hasFocus()&&X.tooltip.hide(),X.pickers!=null&&X.pickers.forEach(function(oe){oe.container.contains(fe.target)||oe.close()})};return se.emitter.listenDOM("click",document.body,ne),X}return s(Z,[{key:"addModule",value:function(ae){var X=a(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"addModule",this).call(this,ae);return ae==="toolbar"&&this.extendToolbar(X),X}},{key:"buildButtons",value:function(ae,X){ae.forEach(function(ne){var ue=ne.getAttribute("class")||"";ue.split(/\s+/).forEach(function(fe){if(fe.startsWith("ql-")&&(fe=fe.slice(3),X[fe]!=null))if(fe==="direction")ne.innerHTML=X[fe][""]+X[fe].rtl;else if(typeof X[fe]=="string")ne.innerHTML=X[fe];else{var oe=ne.value||"";oe!=null&&X[fe][oe]&&(ne.innerHTML=X[fe][oe])}})})}},{key:"buildPickers",value:function(ae,X){var ne=this;this.pickers=ae.map(function(fe){if(fe.classList.contains("ql-align"))return fe.querySelector("option")==null&&V(fe,H),new S.default(fe,X.align);if(fe.classList.contains("ql-background")||fe.classList.contains("ql-color")){var oe=fe.classList.contains("ql-background")?"background":"color";return fe.querySelector("option")==null&&V(fe,z,oe==="background"?"#ffffff":"#000000"),new _.default(fe,X[oe])}else return fe.querySelector("option")==null&&(fe.classList.contains("ql-font")?V(fe,$):fe.classList.contains("ql-header")?V(fe,ee):fe.classList.contains("ql-size")&&V(fe,J)),new D.default(fe)});var ue=function(){ne.pickers.forEach(function(oe){oe.update()})};this.quill.on(v.default.events.EDITOR_CHANGE,ue)}}]),Z}(A.default);te.DEFAULTS=(0,h.default)(!0,{},A.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var Z=this,se=this.container.querySelector("input.ql-image[type=file]");se==null&&(se=document.createElement("input"),se.setAttribute("type","file"),se.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),se.classList.add("ql-image"),se.addEventListener("change",function(){if(se.files!=null&&se.files[0]!=null){var ae=new FileReader;ae.onload=function(X){var ne=Z.quill.getSelection(!0);Z.quill.updateContents(new p.default().retain(ne.index).delete(ne.length).insert({image:X.target.result}),v.default.sources.USER),Z.quill.setSelection(ne.index+1,v.default.sources.SILENT),se.value=""},ae.readAsDataURL(se.files[0])}}),this.container.appendChild(se)),se.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Y=function(G){F(Z,G);function Z(se,ae){L(this,Z);var X=B(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,se,ae));return X.textbox=X.root.querySelector('input[type="text"]'),X.listen(),X}return s(Z,[{key:"listen",value:function(){var ae=this;this.textbox.addEventListener("keydown",function(X){E.default.match(X,"enter")?(ae.save(),X.preventDefault()):E.default.match(X,"escape")&&(ae.cancel(),X.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),X!=null?this.textbox.value=X:ae!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+ae)||""),this.root.setAttribute("data-mode",ae)}},{key:"restoreFocus",value:function(){var ae=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=ae}},{key:"save",value:function(){var ae=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var X=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",ae,v.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",ae,v.default.sources.USER)),this.quill.root.scrollTop=X;break}case"video":ae=K(ae);case"formula":{if(!ae)break;var ne=this.quill.getSelection(!0);if(ne!=null){var ue=ne.index+ne.length;this.quill.insertEmbed(ue,this.root.getAttribute("data-mode"),ae,v.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ue+1," ",v.default.sources.USER),this.quill.setSelection(ue+2,v.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),Z}(R.default);function K(G){var Z=G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||G.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return Z?(Z[1]||"https")+"://www.youtube.com/embed/"+Z[2]+"?showinfo=0":(Z=G.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(Z[1]||"https")+"://player.vimeo.com/video/"+Z[2]+"/":G}function V(G,Z){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Z.forEach(function(ae){var X=document.createElement("option");ae===se?X.setAttribute("selected","selected"):X.setAttribute("value",ae),G.appendChild(X)})}n.BaseTooltip=Y,n.default=te},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function a(){this.head=this.tail=null,this.length=0}return a.prototype.append=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},a.prototype.contains=function(c){for(var h,d=this.iterator();h=d();)if(h===c)return!0;return!1},a.prototype.insertBefore=function(c,h){c&&(c.next=h,h!=null?(c.prev=h.prev,h.prev!=null&&(h.prev.next=c),h.prev=c,h===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},a.prototype.offset=function(c){for(var h=0,d=this.head;d!=null;){if(d===c)return h;h+=d.length(),d=d.next}return-1},a.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},a.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var h=c;return c!=null&&(c=c.next),h}},a.prototype.find=function(c,h){h===void 0&&(h=!1);for(var d,p=this.iterator();d=p();){var m=d.length();if(c<m||h&&c===m&&(d.next==null||d.next.length()!==0))return[d,c];c-=m}return[null,0]},a.prototype.forEach=function(c){for(var h,d=this.iterator();h=d();)c(h)},a.prototype.forEachAt=function(c,h,d){if(!(h<=0))for(var p=this.find(c),m=p[0],v=p[1],x,E=c-v,w=this.iterator(m);(x=w())&&E<c+h;){var A=x.length();c>E?d(x,c-E,Math.min(h,E+A-c)):d(x,0,Math.min(A,c+h-E)),E+=A}},a.prototype.map=function(c){return this.reduce(function(h,d){return h.push(c(d)),h},[])},a.prototype.reduce=function(c,h){for(var d,p=this.iterator();d=p();)h=c(h,d);return h},a}();n.default=s},function(r,n,i){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var E in x)x.hasOwnProperty(E)&&(v[E]=x[E])};return function(v,x){m(v,x);function E(){this.constructor=v}v.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(17),c=i(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,p=function(m){s(v,m);function v(x){var E=m.call(this,x)||this;return E.scroll=E,E.observer=new MutationObserver(function(w){E.update(w)}),E.observer.observe(E.domNode,h),E.attach(),E}return v.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},v.prototype.deleteAt=function(x,E){this.update(),x===0&&E===this.length()?this.children.forEach(function(w){w.remove()}):m.prototype.deleteAt.call(this,x,E)},v.prototype.formatAt=function(x,E,w,A){this.update(),m.prototype.formatAt.call(this,x,E,w,A)},v.prototype.insertAt=function(x,E,w){this.update(),m.prototype.insertAt.call(this,x,E,w)},v.prototype.optimize=function(x,E){var w=this;x===void 0&&(x=[]),E===void 0&&(E={}),m.prototype.optimize.call(this,E);for(var A=[].slice.call(this.observer.takeRecords());A.length>0;)x.push(A.pop());for(var N=function(O,D){D===void 0&&(D=!0),!(O==null||O===w)&&O.domNode.parentNode!=null&&(O.domNode[c.DATA_KEY].mutations==null&&(O.domNode[c.DATA_KEY].mutations=[]),D&&N(O.parent))},_=function(O){O.domNode[c.DATA_KEY]==null||O.domNode[c.DATA_KEY].mutations==null||(O instanceof a.default&&O.children.forEach(_),O.optimize(E))},C=x,S=0;C.length>0;S+=1){if(S>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(C.forEach(function(O){var D=c.find(O.target,!0);D!=null&&(D.domNode===O.target&&(O.type==="childList"?(N(c.find(O.previousSibling,!1)),[].forEach.call(O.addedNodes,function(M){var R=c.find(M,!1);N(R,!1),R instanceof a.default&&R.children.forEach(function(k){N(k,!1)})})):O.type==="attributes"&&N(D.prev)),N(D))}),this.children.forEach(_),C=[].slice.call(this.observer.takeRecords()),A=C.slice();A.length>0;)x.push(A.pop())}},v.prototype.update=function(x,E){var w=this;E===void 0&&(E={}),x=x||this.observer.takeRecords(),x.map(function(A){var N=c.find(A.target,!0);return N==null?null:N.domNode[c.DATA_KEY].mutations==null?(N.domNode[c.DATA_KEY].mutations=[A],N):(N.domNode[c.DATA_KEY].mutations.push(A),null)}).forEach(function(A){A==null||A===w||A.domNode[c.DATA_KEY]==null||A.update(A.domNode[c.DATA_KEY].mutations||[],E)}),this.domNode[c.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,E),this.optimize(x,E)},v.blotName="scroll",v.defaultChild="block",v.scope=c.Scope.BLOCK_BLOT,v.tagName="DIV",v}(a.default);n.default=p},function(r,n,i){var s=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var x in v)v.hasOwnProperty(x)&&(m[x]=v[x])};return function(m,v){p(m,v);function x(){this.constructor=m}m.prototype=v===null?Object.create(v):(x.prototype=v.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(18),c=i(1);function h(p,m){if(Object.keys(p).length!==Object.keys(m).length)return!1;for(var v in p)if(p[v]!==m[v])return!1;return!0}var d=function(p){s(m,p);function m(){return p!==null&&p.apply(this,arguments)||this}return m.formats=function(v){if(v.tagName!==m.tagName)return p.formats.call(this,v)},m.prototype.format=function(v,x){var E=this;v===this.statics.blotName&&!x?(this.children.forEach(function(w){w instanceof a.default||(w=w.wrap(m.blotName,!0)),E.attributes.copy(w)}),this.unwrap()):p.prototype.format.call(this,v,x)},m.prototype.formatAt=function(v,x,E,w){if(this.formats()[E]!=null||c.query(E,c.Scope.ATTRIBUTE)){var A=this.isolate(v,x);A.format(E,w)}else p.prototype.formatAt.call(this,v,x,E,w)},m.prototype.optimize=function(v){p.prototype.optimize.call(this,v);var x=this.formats();if(Object.keys(x).length===0)return this.unwrap();var E=this.next;E instanceof m&&E.prev===this&&h(x,E.formats())&&(E.moveChildren(this),E.remove())},m.blotName="inline",m.scope=c.Scope.INLINE_BLOT,m.tagName="SPAN",m}(a.default);n.default=d},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)m.hasOwnProperty(v)&&(p[v]=m[v])};return function(p,m){d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(18),c=i(1),h=function(d){s(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.formats=function(m){var v=c.query(p.blotName).tagName;if(m.tagName!==v)return d.formats.call(this,m)},p.prototype.format=function(m,v){c.query(m,c.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!v?this.replaceWith(p.blotName):d.prototype.format.call(this,m,v))},p.prototype.formatAt=function(m,v,x,E){c.query(x,c.Scope.BLOCK)!=null?this.format(x,E):d.prototype.formatAt.call(this,m,v,x,E)},p.prototype.insertAt=function(m,v,x){if(x==null||c.query(v,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,m,v,x);else{var E=this.split(m),w=c.create(v,x);E.parent.insertBefore(w,E)}},p.prototype.update=function(m,v){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,m,v)},p.blotName="block",p.scope=c.Scope.BLOCK_BLOT,p.tagName="P",p}(a.default);n.default=h},function(r,n,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])};return function(d,p){h(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(19),c=function(h){s(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.formats=function(p){},d.prototype.format=function(p,m){h.prototype.formatAt.call(this,0,this.length(),p,m)},d.prototype.formatAt=function(p,m,v,x){p===0&&m===this.length()?this.format(v,x):h.prototype.formatAt.call(this,p,m,v,x)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(a.default);n.default=c},function(r,n,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var v in m)m.hasOwnProperty(v)&&(p[v]=m[v])};return function(p,m){d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=i(19),c=i(1),h=function(d){s(p,d);function p(m){var v=d.call(this,m)||this;return v.text=v.statics.value(v.domNode),v}return p.create=function(m){return document.createTextNode(m)},p.value=function(m){var v=m.data;return v.normalize&&(v=v.normalize()),v},p.prototype.deleteAt=function(m,v){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+v)},p.prototype.index=function(m,v){return this.domNode===m?v:-1},p.prototype.insertAt=function(m,v,x){x==null?(this.text=this.text.slice(0,m)+v+this.text.slice(m),this.domNode.data=this.text):d.prototype.insertAt.call(this,m,v,x)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(m){d.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(m,v){return[this.domNode,m]},p.prototype.split=function(m,v){if(v===void 0&&(v=!1),!v){if(m===0)return this;if(m===this.length())return this.next}var x=c.create(this.domNode.splitText(m));return this.parent.insertBefore(x,this.next),this.text=this.statics.value(this.domNode),x},p.prototype.update=function(m,v){var x=this;m.some(function(E){return E.type==="characterData"&&E.target===x.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=c.Scope.INLINE_BLOT,p}(a.default);n.default=h},function(r,n,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,h){return arguments.length>1&&!this.contains(c)==!h?h:a.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,h){return h=h||0,this.substr(h,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,h){var d=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>d.length)&&(h=d.length),h-=c.length;var p=d.indexOf(c,h);return p!==-1&&p===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),p=d.length>>>0,m=arguments[1],v,x=0;x<p;x++)if(v=d[x],h.call(m,v,x,d))return v}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var i=-1,s=1,a=0;function c(S,O,D){if(S==O)return S?[[a,S]]:[];(D<0||S.length<D)&&(D=null);var M=m(S,O),R=S.substring(0,M);S=S.substring(M),O=O.substring(M),M=v(S,O);var k=S.substring(S.length-M);S=S.substring(0,S.length-M),O=O.substring(0,O.length-M);var L=h(S,O);return R&&L.unshift([a,R]),k&&L.push([a,k]),E(L),D!=null&&(L=N(L,D)),L=_(L),L}function h(S,O){var D;if(!S)return[[s,O]];if(!O)return[[i,S]];var M=S.length>O.length?S:O,R=S.length>O.length?O:S,k=M.indexOf(R);if(k!=-1)return D=[[s,M.substring(0,k)],[a,R],[s,M.substring(k+R.length)]],S.length>O.length&&(D[0][0]=D[2][0]=i),D;if(R.length==1)return[[i,S],[s,O]];var L=x(S,O);if(L){var B=L[0],F=L[1],H=L[2],z=L[3],$=L[4],ee=c(B,H),J=c(F,z);return ee.concat([[a,$]],J)}return d(S,O)}function d(S,O){for(var D=S.length,M=O.length,R=Math.ceil((D+M)/2),k=R,L=2*R,B=new Array(L),F=new Array(L),H=0;H<L;H++)B[H]=-1,F[H]=-1;B[k+1]=0,F[k+1]=0;for(var z=D-M,$=z%2!=0,ee=0,J=0,te=0,Y=0,K=0;K<R;K++){for(var V=-K+ee;V<=K-J;V+=2){var G=k+V,Z;V==-K||V!=K&&B[G-1]<B[G+1]?Z=B[G+1]:Z=B[G-1]+1;for(var se=Z-V;Z<D&&se<M&&S.charAt(Z)==O.charAt(se);)Z++,se++;if(B[G]=Z,Z>D)J+=2;else if(se>M)ee+=2;else if($){var ae=k+z-V;if(ae>=0&&ae<L&&F[ae]!=-1){var X=D-F[ae];if(Z>=X)return p(S,O,Z,se)}}}for(var ne=-K+te;ne<=K-Y;ne+=2){var ae=k+ne,X;ne==-K||ne!=K&&F[ae-1]<F[ae+1]?X=F[ae+1]:X=F[ae-1]+1;for(var ue=X-ne;X<D&&ue<M&&S.charAt(D-X-1)==O.charAt(M-ue-1);)X++,ue++;if(F[ae]=X,X>D)Y+=2;else if(ue>M)te+=2;else if(!$){var G=k+z-ne;if(G>=0&&G<L&&B[G]!=-1){var Z=B[G],se=k+Z-G;if(X=D-X,Z>=X)return p(S,O,Z,se)}}}}return[[i,S],[s,O]]}function p(S,O,D,M){var R=S.substring(0,D),k=O.substring(0,M),L=S.substring(D),B=O.substring(M),F=c(R,k),H=c(L,B);return F.concat(H)}function m(S,O){if(!S||!O||S.charAt(0)!=O.charAt(0))return 0;for(var D=0,M=Math.min(S.length,O.length),R=M,k=0;D<R;)S.substring(k,R)==O.substring(k,R)?(D=R,k=D):M=R,R=Math.floor((M-D)/2+D);return R}function v(S,O){if(!S||!O||S.charAt(S.length-1)!=O.charAt(O.length-1))return 0;for(var D=0,M=Math.min(S.length,O.length),R=M,k=0;D<R;)S.substring(S.length-R,S.length-k)==O.substring(O.length-R,O.length-k)?(D=R,k=D):M=R,R=Math.floor((M-D)/2+D);return R}function x(S,O){var D=S.length>O.length?S:O,M=S.length>O.length?O:S;if(D.length<4||M.length*2<D.length)return null;function R(J,te,Y){for(var K=J.substring(Y,Y+Math.floor(J.length/4)),V=-1,G="",Z,se,ae,X;(V=te.indexOf(K,V+1))!=-1;){var ne=m(J.substring(Y),te.substring(V)),ue=v(J.substring(0,Y),te.substring(0,V));G.length<ue+ne&&(G=te.substring(V-ue,V)+te.substring(V,V+ne),Z=J.substring(0,Y-ue),se=J.substring(Y+ne),ae=te.substring(0,V-ue),X=te.substring(V+ne))}return G.length*2>=J.length?[Z,se,ae,X,G]:null}var k=R(D,M,Math.ceil(D.length/4)),L=R(D,M,Math.ceil(D.length/2)),B;if(!k&&!L)return null;L?k?B=k[4].length>L[4].length?k:L:B=L:B=k;var F,H,z,$;S.length>O.length?(F=B[0],H=B[1],z=B[2],$=B[3]):(z=B[0],$=B[1],F=B[2],H=B[3]);var ee=B[4];return[F,H,z,$,ee]}function E(S){S.push([a,""]);for(var O=0,D=0,M=0,R="",k="",L;O<S.length;)switch(S[O][0]){case s:M++,k+=S[O][1],O++;break;case i:D++,R+=S[O][1],O++;break;case a:D+M>1?(D!==0&&M!==0&&(L=m(k,R),L!==0&&(O-D-M>0&&S[O-D-M-1][0]==a?S[O-D-M-1][1]+=k.substring(0,L):(S.splice(0,0,[a,k.substring(0,L)]),O++),k=k.substring(L),R=R.substring(L)),L=v(k,R),L!==0&&(S[O][1]=k.substring(k.length-L)+S[O][1],k=k.substring(0,k.length-L),R=R.substring(0,R.length-L))),D===0?S.splice(O-M,D+M,[s,k]):M===0?S.splice(O-D,D+M,[i,R]):S.splice(O-D-M,D+M,[i,R],[s,k]),O=O-D-M+(D?1:0)+(M?1:0)+1):O!==0&&S[O-1][0]==a?(S[O-1][1]+=S[O][1],S.splice(O,1)):O++,M=0,D=0,R="",k="";break}S[S.length-1][1]===""&&S.pop();var B=!1;for(O=1;O<S.length-1;)S[O-1][0]==a&&S[O+1][0]==a&&(S[O][1].substring(S[O][1].length-S[O-1][1].length)==S[O-1][1]?(S[O][1]=S[O-1][1]+S[O][1].substring(0,S[O][1].length-S[O-1][1].length),S[O+1][1]=S[O-1][1]+S[O+1][1],S.splice(O-1,1),B=!0):S[O][1].substring(0,S[O+1][1].length)==S[O+1][1]&&(S[O-1][1]+=S[O+1][1],S[O][1]=S[O][1].substring(S[O+1][1].length)+S[O+1][1],S.splice(O+1,1),B=!0)),O++;B&&E(S)}var w=c;w.INSERT=s,w.DELETE=i,w.EQUAL=a,r.exports=w;function A(S,O){if(O===0)return[a,S];for(var D=0,M=0;M<S.length;M++){var R=S[M];if(R[0]===i||R[0]===a){var k=D+R[1].length;if(O===k)return[M+1,S];if(O<k){S=S.slice();var L=O-D,B=[R[0],R[1].slice(0,L)],F=[R[0],R[1].slice(L)];return S.splice(M,1,B,F),[M+1,S]}else D=k}}throw new Error("cursor_pos is out of bounds!")}function N(S,O){var D=A(S,O),M=D[1],R=D[0],k=M[R],L=M[R+1];if(k==null)return S;if(k[0]!==a)return S;if(L!=null&&k[1]+L[1]===L[1]+k[1])return M.splice(R,2,L,k),C(M,R,2);if(L!=null&&L[1].indexOf(k[1])===0){M.splice(R,2,[L[0],k[1]],[0,k[1]]);var B=L[1].slice(k[1].length);return B.length>0&&M.splice(R+2,0,[L[0],B]),C(M,R,3)}else return S}function _(S){for(var O=!1,D=function(L){return L.charCodeAt(0)>=56320&&L.charCodeAt(0)<=57343},M=function(L){return L.charCodeAt(L.length-1)>=55296&&L.charCodeAt(L.length-1)<=56319},R=2;R<S.length;R+=1)S[R-2][0]===a&&M(S[R-2][1])&&S[R-1][0]===i&&D(S[R-1][1])&&S[R][0]===s&&D(S[R][1])&&(O=!0,S[R-1][1]=S[R-2][1].slice(-1)+S[R-1][1],S[R][1]=S[R-2][1].slice(-1)+S[R][1],S[R-2][1]=S[R-2][1].slice(0,-1));if(!O)return S;for(var k=[],R=0;R<S.length;R+=1)S[R][1].length>0&&k.push(S[R]);return k}function C(S,O,D){for(var M=O+D-1;M>=0&&M>=O-1;M--)if(M+1<S.length){var R=S[M],k=S[M+1];R[0]===k[1]&&S.splice(M,2,[R[0],R[1]+k[1]])}return S}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:i,n.shim=i;function i(s){var a=[];for(var c in s)a.push(c);return a}},function(r,n){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=i?s:a,n.supported=s;function s(c){return Object.prototype.toString.call(c)=="[object Arguments]"}n.unsupported=a;function a(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(r,n){var i=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function c(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],m,v;if(this._eventsCount===0)return p;for(v in m=this._events)i.call(m,v)&&p.push(s?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},h.prototype.listeners=function(p,m){var v=s?s+p:p,x=this._events[v];if(m)return!!x;if(!x)return[];if(x.fn)return[x.fn];for(var E=0,w=x.length,A=new Array(w);E<w;E++)A[E]=x[E].fn;return A},h.prototype.emit=function(p,m,v,x,E,w){var A=s?s+p:p;if(!this._events[A])return!1;var N=this._events[A],_=arguments.length,C,S;if(N.fn){switch(N.once&&this.removeListener(p,N.fn,void 0,!0),_){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,m),!0;case 3:return N.fn.call(N.context,m,v),!0;case 4:return N.fn.call(N.context,m,v,x),!0;case 5:return N.fn.call(N.context,m,v,x,E),!0;case 6:return N.fn.call(N.context,m,v,x,E,w),!0}for(S=1,C=new Array(_-1);S<_;S++)C[S-1]=arguments[S];N.fn.apply(N.context,C)}else{var O=N.length,D;for(S=0;S<O;S++)switch(N[S].once&&this.removeListener(p,N[S].fn,void 0,!0),_){case 1:N[S].fn.call(N[S].context);break;case 2:N[S].fn.call(N[S].context,m);break;case 3:N[S].fn.call(N[S].context,m,v);break;case 4:N[S].fn.call(N[S].context,m,v,x);break;default:if(!C)for(D=1,C=new Array(_-1);D<_;D++)C[D-1]=arguments[D];N[S].fn.apply(N[S].context,C)}}return!0},h.prototype.on=function(p,m,v){var x=new c(m,v||this),E=s?s+p:p;return this._events[E]?this._events[E].fn?this._events[E]=[this._events[E],x]:this._events[E].push(x):(this._events[E]=x,this._eventsCount++),this},h.prototype.once=function(p,m,v){var x=new c(m,v||this,!0),E=s?s+p:p;return this._events[E]?this._events[E].fn?this._events[E]=[this._events[E],x]:this._events[E].push(x):(this._events[E]=x,this._eventsCount++),this},h.prototype.removeListener=function(p,m,v,x){var E=s?s+p:p;if(!this._events[E])return this;if(!m)return--this._eventsCount===0?this._events=new a:delete this._events[E],this;var w=this._events[E];if(w.fn)w.fn===m&&(!x||w.once)&&(!v||w.context===v)&&(--this._eventsCount===0?this._events=new a:delete this._events[E]);else{for(var A=0,N=[],_=w.length;A<_;A++)(w[A].fn!==m||x&&!w[A].once||v&&w[A].context!==v)&&N.push(w[A]);N.length?this._events[E]=N.length===1?N[0]:N:--this._eventsCount===0?this._events=new a:delete this._events[E]}return this},h.prototype.removeAllListeners=function(p){var m;return p?(m=s?s+p:p,this._events[m]&&(--this._eventsCount===0?this._events=new a:delete this._events[m])):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=s,h.EventEmitter=h,typeof r<"u"&&(r.exports=h)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},a=function(){function he(de,Ne){var ge=[],Ee=!0,Le=!1,He=void 0;try{for(var rt=de[Symbol.iterator](),ut;!(Ee=(ut=rt.next()).done)&&(ge.push(ut.value),!(Ne&&ge.length===Ne));Ee=!0);}catch(Tr){Le=!0,He=Tr}finally{try{!Ee&&rt.return&&rt.return()}finally{if(Le)throw He}}return ge}return function(de,Ne){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return he(de,Ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function he(de,Ne){for(var ge=0;ge<Ne.length;ge++){var Ee=Ne[ge];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(de,Ee.key,Ee)}}return function(de,Ne,ge){return Ne&&he(de.prototype,Ne),ge&&he(de,ge),de}}(),h=i(3),d=F(h),p=i(2),m=F(p),v=i(0),x=F(v),E=i(5),w=F(E),A=i(10),N=F(A),_=i(9),C=F(_),S=i(36),O=i(37),D=i(13),M=F(D),R=i(26),k=i(38),L=i(39),B=i(40);function F(he){return he&&he.__esModule?he:{default:he}}function H(he,de,Ne){return de in he?Object.defineProperty(he,de,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):he[de]=Ne,he}function z(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")}function $(he,de){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:he}function ee(he,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);he.prototype=Object.create(de&&de.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(he,de):he.__proto__=de)}var J=(0,N.default)("quill:clipboard"),te="__ql-matcher",Y=[[Node.TEXT_NODE,we],[Node.TEXT_NODE,Fe],["br",ve],[Node.ELEMENT_NODE,Fe],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,Ge],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,ht],["li",Ce],["b",ue.bind(ue,"bold")],["i",ue.bind(ue,"italic")],["style",Se]],K=[S.AlignAttribute,k.DirectionAttribute].reduce(function(he,de){return he[de.keyName]=de,he},{}),V=[S.AlignStyle,O.BackgroundStyle,R.ColorStyle,k.DirectionStyle,L.FontStyle,B.SizeStyle].reduce(function(he,de){return he[de.keyName]=de,he},{}),G=function(he){ee(de,he);function de(Ne,ge){z(this,de);var Ee=$(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Ne,ge));return Ee.quill.root.addEventListener("paste",Ee.onPaste.bind(Ee)),Ee.container=Ee.quill.addContainer("ql-clipboard"),Ee.container.setAttribute("contenteditable",!0),Ee.container.setAttribute("tabindex",-1),Ee.matchers=[],Y.concat(Ee.options.matchers).forEach(function(Le){var He=a(Le,2),rt=He[0],ut=He[1];!ge.matchVisual&&ut===Ge||Ee.addMatcher(rt,ut)}),Ee}return c(de,[{key:"addMatcher",value:function(ge,Ee){this.matchers.push([ge,Ee])}},{key:"convert",value:function(ge){if(typeof ge=="string")return this.container.innerHTML=ge.replace(/\>\r?\n +\</g,"><"),this.convert();var Ee=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ee[M.default.blotName]){var Le=this.container.innerText;return this.container.innerHTML="",new m.default().insert(Le,H({},M.default.blotName,Ee[M.default.blotName]))}var He=this.prepareMatching(),rt=a(He,2),ut=rt[0],Tr=rt[1],wt=ne(this.container,ut,Tr);return ae(wt,`
`)&&wt.ops[wt.ops.length-1].attributes==null&&(wt=wt.compose(new m.default().retain(wt.length()-1).delete(1))),J.log("convert",this.container.innerHTML,wt),this.container.innerHTML="",wt}},{key:"dangerouslyPasteHTML",value:function(ge,Ee){var Le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof ge=="string")this.quill.setContents(this.convert(ge),Ee),this.quill.setSelection(0,w.default.sources.SILENT);else{var He=this.convert(Ee);this.quill.updateContents(new m.default().retain(ge).concat(He),Le),this.quill.setSelection(ge+He.length(),w.default.sources.SILENT)}}},{key:"onPaste",value:function(ge){var Ee=this;if(!(ge.defaultPrevented||!this.quill.isEnabled())){var Le=this.quill.getSelection(),He=new m.default().retain(Le.index),rt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(w.default.sources.SILENT),setTimeout(function(){He=He.concat(Ee.convert()).delete(Le.length),Ee.quill.updateContents(He,w.default.sources.USER),Ee.quill.setSelection(He.length()-Le.length,w.default.sources.SILENT),Ee.quill.scrollingContainer.scrollTop=rt,Ee.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ge=this,Ee=[],Le=[];return this.matchers.forEach(function(He){var rt=a(He,2),ut=rt[0],Tr=rt[1];switch(ut){case Node.TEXT_NODE:Le.push(Tr);break;case Node.ELEMENT_NODE:Ee.push(Tr);break;default:[].forEach.call(ge.container.querySelectorAll(ut),function(wt){wt[te]=wt[te]||[],wt[te].push(Tr)});break}}),[Ee,Le]}}]),de}(C.default);G.DEFAULTS={matchers:[],matchVisual:!0};function Z(he,de,Ne){return(typeof de>"u"?"undefined":s(de))==="object"?Object.keys(de).reduce(function(ge,Ee){return Z(ge,Ee,de[Ee])},he):he.reduce(function(ge,Ee){return Ee.attributes&&Ee.attributes[de]?ge.push(Ee):ge.insert(Ee.insert,(0,d.default)({},H({},de,Ne),Ee.attributes))},new m.default)}function se(he){if(he.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return he[de]||(he[de]=window.getComputedStyle(he))}function ae(he,de){for(var Ne="",ge=he.ops.length-1;ge>=0&&Ne.length<de.length;--ge){var Ee=he.ops[ge];if(typeof Ee.insert!="string")break;Ne=Ee.insert+Ne}return Ne.slice(-1*de.length)===de}function X(he){if(he.childNodes.length===0)return!1;var de=se(he);return["block","list-item"].indexOf(de.display)>-1}function ne(he,de,Ne){return he.nodeType===he.TEXT_NODE?Ne.reduce(function(ge,Ee){return Ee(he,ge)},new m.default):he.nodeType===he.ELEMENT_NODE?[].reduce.call(he.childNodes||[],function(ge,Ee){var Le=ne(Ee,de,Ne);return Ee.nodeType===he.ELEMENT_NODE&&(Le=de.reduce(function(He,rt){return rt(Ee,He)},Le),Le=(Ee[te]||[]).reduce(function(He,rt){return rt(Ee,He)},Le)),ge.concat(Le)},new m.default):new m.default}function ue(he,de,Ne){return Z(Ne,he,!0)}function fe(he,de){var Ne=x.default.Attributor.Attribute.keys(he),ge=x.default.Attributor.Class.keys(he),Ee=x.default.Attributor.Style.keys(he),Le={};return Ne.concat(ge).concat(Ee).forEach(function(He){var rt=x.default.query(He,x.default.Scope.ATTRIBUTE);rt!=null&&(Le[rt.attrName]=rt.value(he),Le[rt.attrName])||(rt=K[He],rt!=null&&(rt.attrName===He||rt.keyName===He)&&(Le[rt.attrName]=rt.value(he)||void 0),rt=V[He],rt!=null&&(rt.attrName===He||rt.keyName===He)&&(rt=V[He],Le[rt.attrName]=rt.value(he)||void 0))}),Object.keys(Le).length>0&&(de=Z(de,Le)),de}function oe(he,de){var Ne=x.default.query(he);if(Ne==null)return de;if(Ne.prototype instanceof x.default.Embed){var ge={},Ee=Ne.value(he);Ee!=null&&(ge[Ne.blotName]=Ee,de=new m.default().insert(ge,Ne.formats(he)))}else typeof Ne.formats=="function"&&(de=Z(de,Ne.blotName,Ne.formats(he)));return de}function ve(he,de){return ae(de,`
`)||de.insert(`
`),de}function Se(){return new m.default}function Ce(he,de){var Ne=x.default.query(he);if(Ne==null||Ne.blotName!=="list-item"||!ae(de,`
`))return de;for(var ge=-1,Ee=he.parentNode;!Ee.classList.contains("ql-clipboard");)(x.default.query(Ee)||{}).blotName==="list"&&(ge+=1),Ee=Ee.parentNode;return ge<=0?de:de.compose(new m.default().retain(de.length()-1).retain(1,{indent:ge}))}function Fe(he,de){return ae(de,`
`)||(X(he)||de.length()>0&&he.nextSibling&&X(he.nextSibling))&&de.insert(`
`),de}function Ge(he,de){if(X(he)&&he.nextElementSibling!=null&&!ae(de,`

`)){var Ne=he.offsetHeight+parseFloat(se(he).marginTop)+parseFloat(se(he).marginBottom);he.nextElementSibling.offsetTop>he.offsetTop+Ne*1.5&&de.insert(`
`)}return de}function ht(he,de){var Ne={},ge=he.style||{};return ge.fontStyle&&se(he).fontStyle==="italic"&&(Ne.italic=!0),ge.fontWeight&&(se(he).fontWeight.startsWith("bold")||parseInt(se(he).fontWeight)>=700)&&(Ne.bold=!0),Object.keys(Ne).length>0&&(de=Z(de,Ne)),parseFloat(ge.textIndent||0)>0&&(de=new m.default().insert("	").concat(de)),de}function we(he,de){var Ne=he.data;if(he.parentNode.tagName==="O:P")return de.insert(Ne.trim());if(Ne.trim().length===0&&he.parentNode.classList.contains("ql-clipboard"))return de;if(!se(he.parentNode).whiteSpace.startsWith("pre")){var ge=function(Le,He){return He=He.replace(/[^\u00a0]/g,""),He.length<1&&Le?" ":He};Ne=Ne.replace(/\r\n/g," ").replace(/\n/g," "),Ne=Ne.replace(/\s\s+/g,ge.bind(ge,!0)),(he.previousSibling==null&&X(he.parentNode)||he.previousSibling!=null&&X(he.previousSibling))&&(Ne=Ne.replace(/^\s+/,ge.bind(ge,!1))),(he.nextSibling==null&&X(he.parentNode)||he.nextSibling!=null&&X(he.nextSibling))&&(Ne=Ne.replace(/\s+$/,ge.bind(ge,!1)))}return de.insert(Ne)}n.default=G,n.matchAttributor=fe,n.matchBlot=oe,n.matchNewline=Fe,n.matchSpacing=Ge,n.matchText=we},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(w,A){for(var N=0;N<A.length;N++){var _=A[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,A,N){return A&&E(w.prototype,A),N&&E(w,N),w}}(),a=function E(w,A,N){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,A);if(_===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:E(C,A,N)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(N)}},c=i(6),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"optimize",value:function(N){a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,N),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),w}(h.default);x.blotName="bold",x.tagName=["STRONG","B"],n.default=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function B(F,H){var z=[],$=!0,ee=!1,J=void 0;try{for(var te=F[Symbol.iterator](),Y;!($=(Y=te.next()).done)&&(z.push(Y.value),!(H&&z.length===H));$=!0);}catch(K){ee=!0,J=K}finally{try{!$&&te.return&&te.return()}finally{if(ee)throw J}}return z}return function(F,H){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return B(F,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function B(F,H){for(var z=0;z<H.length;z++){var $=H[z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(F,$.key,$)}}return function(F,H,z){return H&&B(F.prototype,H),z&&B(F,z),F}}(),c=i(2),h=N(c),d=i(0),p=N(d),m=i(5),v=N(m),x=i(10),E=N(x),w=i(9),A=N(w);function N(B){return B&&B.__esModule?B:{default:B}}function _(B,F,H){return F in B?Object.defineProperty(B,F,{value:H,enumerable:!0,configurable:!0,writable:!0}):B[F]=H,B}function C(B,F){if(!(B instanceof F))throw new TypeError("Cannot call a class as a function")}function S(B,F){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:B}function O(B,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);B.prototype=Object.create(F&&F.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(B,F):B.__proto__=F)}var D=(0,E.default)("quill:toolbar"),M=function(B){O(F,B);function F(H,z){C(this,F);var $=S(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,H,z));if(Array.isArray($.options.container)){var ee=document.createElement("div");k(ee,$.options.container),H.container.parentNode.insertBefore(ee,H.container),$.container=ee}else typeof $.options.container=="string"?$.container=document.querySelector($.options.container):$.container=$.options.container;if(!($.container instanceof HTMLElement)){var J;return J=D.error("Container required for toolbar",$.options),S($,J)}return $.container.classList.add("ql-toolbar"),$.controls=[],$.handlers={},Object.keys($.options.handlers).forEach(function(te){$.addHandler(te,$.options.handlers[te])}),[].forEach.call($.container.querySelectorAll("button, select"),function(te){$.attach(te)}),$.quill.on(v.default.events.EDITOR_CHANGE,function(te,Y){te===v.default.events.SELECTION_CHANGE&&$.update(Y)}),$.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){var te=$.quill.selection.getRange(),Y=s(te,1),K=Y[0];$.update(K)}),$}return a(F,[{key:"addHandler",value:function(z,$){this.handlers[z]=$}},{key:"attach",value:function(z){var $=this,ee=[].find.call(z.classList,function(te){return te.indexOf("ql-")===0});if(ee){if(ee=ee.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[ee]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ee]==null){D.warn("ignoring attaching to disabled format",ee,z);return}if(p.default.query(ee)==null){D.warn("ignoring attaching to nonexistent format",ee,z);return}}var J=z.tagName==="SELECT"?"change":"click";z.addEventListener(J,function(te){var Y=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var K=z.options[z.selectedIndex];K.hasAttribute("selected")?Y=!1:Y=K.value||!1}else z.classList.contains("ql-active")?Y=!1:Y=z.value||!z.hasAttribute("value"),te.preventDefault();$.quill.focus();var V=$.quill.selection.getRange(),G=s(V,1),Z=G[0];if($.handlers[ee]!=null)$.handlers[ee].call($,Y);else if(p.default.query(ee).prototype instanceof p.default.Embed){if(Y=prompt("Enter "+ee),!Y)return;$.quill.updateContents(new h.default().retain(Z.index).delete(Z.length).insert(_({},ee,Y)),v.default.sources.USER)}else $.quill.format(ee,Y,v.default.sources.USER);$.update(Z)}),this.controls.push([ee,z])}}},{key:"update",value:function(z){var $=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(ee){var J=s(ee,2),te=J[0],Y=J[1];if(Y.tagName==="SELECT"){var K=void 0;if(z==null)K=null;else if($[te]==null)K=Y.querySelector("option[selected]");else if(!Array.isArray($[te])){var V=$[te];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),K=Y.querySelector('option[value="'+V+'"]')}K==null?(Y.value="",Y.selectedIndex=-1):K.selected=!0}else if(z==null)Y.classList.remove("ql-active");else if(Y.hasAttribute("value")){var G=$[te]===Y.getAttribute("value")||$[te]!=null&&$[te].toString()===Y.getAttribute("value")||$[te]==null&&!Y.getAttribute("value");Y.classList.toggle("ql-active",G)}else Y.classList.toggle("ql-active",$[te]!=null)})}}]),F}(A.default);M.DEFAULTS={};function R(B,F,H){var z=document.createElement("button");z.setAttribute("type","button"),z.classList.add("ql-"+F),H!=null&&(z.value=H),B.appendChild(z)}function k(B,F){Array.isArray(F[0])||(F=[F]),F.forEach(function(H){var z=document.createElement("span");z.classList.add("ql-formats"),H.forEach(function($){if(typeof $=="string")R(z,$);else{var ee=Object.keys($)[0],J=$[ee];Array.isArray(J)?L(z,ee,J):R(z,ee,J)}}),B.appendChild(z)})}function L(B,F,H){var z=document.createElement("select");z.classList.add("ql-"+F),H.forEach(function($){var ee=document.createElement("option");$!==!1?ee.setAttribute("value",$):ee.setAttribute("selected","selected"),z.appendChild(ee)}),B.appendChild(z)}M.DEFAULTS={container:null,handlers:{clean:function(){var F=this,H=this.quill.getSelection();if(H!=null)if(H.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function($){p.default.query($,p.default.Scope.INLINE)!=null&&F.quill.format($,!1)})}else this.quill.removeFormat(H,v.default.sources.USER)},direction:function(F){var H=this.quill.getFormat().align;F==="rtl"&&H==null?this.quill.format("align","right",v.default.sources.USER):!F&&H==="right"&&this.quill.format("align",!1,v.default.sources.USER),this.quill.format("direction",F,v.default.sources.USER)},indent:function(F){var H=this.quill.getSelection(),z=this.quill.getFormat(H),$=parseInt(z.indent||0);if(F==="+1"||F==="-1"){var ee=F==="+1"?1:-1;z.direction==="rtl"&&(ee*=-1),this.quill.format("indent",$+ee,v.default.sources.USER)}},link:function(F){F===!0&&(F=prompt("Enter link URL:")),this.quill.format("link",F,v.default.sources.USER)},list:function(F){var H=this.quill.getSelection(),z=this.quill.getFormat(H);F==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,v.default.sources.USER):this.quill.format("list","unchecked",v.default.sources.USER):this.quill.format("list",F,v.default.sources.USER)}}},n.default=M,n.addControls=k},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(w,A){for(var N=0;N<A.length;N++){var _=A[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,A,N){return A&&E(w.prototype,A),N&&E(w,N),w}}(),a=function E(w,A,N){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,A);if(_===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:E(C,A,N)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(N)}},c=i(28),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(A,N){p(this,w);var _=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A));return _.label.innerHTML=N,_.container.classList.add("ql-color-picker"),[].slice.call(_.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(C){C.classList.add("ql-primary")}),_}return s(w,[{key:"buildItem",value:function(N){var _=a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"buildItem",this).call(this,N);return _.style.backgroundColor=N.getAttribute("value")||"",_}},{key:"selectItem",value:function(N,_){a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"selectItem",this).call(this,N,_);var C=this.label.querySelector(".ql-color-label"),S=N&&N.getAttribute("data-value")||"";C&&(C.tagName==="line"?C.style.stroke=S:C.style.fill=S)}}]),w}(h.default);n.default=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(w,A){for(var N=0;N<A.length;N++){var _=A[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,A,N){return A&&E(w.prototype,A),N&&E(w,N),w}}(),a=function E(w,A,N){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,A);if(_===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:E(C,A,N)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(N)}},c=i(28),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(A,N){p(this,w);var _=m(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A));return _.container.classList.add("ql-icon-picker"),[].forEach.call(_.container.querySelectorAll(".ql-picker-item"),function(C){C.innerHTML=N[C.getAttribute("data-value")||""]}),_.defaultItem=_.container.querySelector(".ql-selected"),_.selectItem(_.defaultItem),_}return s(w,[{key:"selectItem",value:function(N,_){a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"selectItem",this).call(this,N,_),N=N||this.defaultItem,this.label.innerHTML=N.innerHTML}}]),w}(h.default);n.default=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function h(d,p){for(var m=0;m<p.length;m++){var v=p[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}return function(d,p,m){return p&&h(d.prototype,p),m&&h(d,m),d}}();function a(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function h(d,p){var m=this;a(this,h),this.quill=d,this.boundsContainer=p||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return s(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var m=p.left+p.width/2-this.root.offsetWidth/2,v=p.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=v+"px",this.root.classList.remove("ql-flip");var x=this.boundsContainer.getBoundingClientRect(),E=this.root.getBoundingClientRect(),w=0;if(E.right>x.right&&(w=x.right-E.right,this.root.style.left=m+w+"px"),E.left<x.left&&(w=x.left-E.left,this.root.style.left=m+w+"px"),E.bottom>x.bottom){var A=E.bottom-E.top,N=p.bottom-p.top+A;this.root.style.top=v-N+"px",this.root.classList.add("ql-flip")}return w}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=c},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function L(B,F){var H=[],z=!0,$=!1,ee=void 0;try{for(var J=B[Symbol.iterator](),te;!(z=(te=J.next()).done)&&(H.push(te.value),!(F&&H.length===F));z=!0);}catch(Y){$=!0,ee=Y}finally{try{!z&&J.return&&J.return()}finally{if($)throw ee}}return H}return function(B,F){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return L(B,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function L(B,F,H){B===null&&(B=Function.prototype);var z=Object.getOwnPropertyDescriptor(B,F);if(z===void 0){var $=Object.getPrototypeOf(B);return $===null?void 0:L($,F,H)}else{if("value"in z)return z.value;var ee=z.get;return ee===void 0?void 0:ee.call(H)}},c=function(){function L(B,F){for(var H=0;H<F.length;H++){var z=F[H];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(B,z.key,z)}}return function(B,F,H){return F&&L(B.prototype,F),H&&L(B,H),B}}(),h=i(3),d=C(h),p=i(8),m=C(p),v=i(43),x=C(v),E=i(27),w=C(E),A=i(15),N=i(41),_=C(N);function C(L){return L&&L.__esModule?L:{default:L}}function S(L,B){if(!(L instanceof B))throw new TypeError("Cannot call a class as a function")}function O(L,B){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:L}function D(L,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);L.prototype=Object.create(B&&B.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(L,B):L.__proto__=B)}var M=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],R=function(L){D(B,L);function B(F,H){S(this,B),H.modules.toolbar!=null&&H.modules.toolbar.container==null&&(H.modules.toolbar.container=M);var z=O(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,F,H));return z.quill.container.classList.add("ql-snow"),z}return c(B,[{key:"extendToolbar",value:function(H){H.container.classList.add("ql-snow"),this.buildButtons([].slice.call(H.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(H.container.querySelectorAll("select")),_.default),this.tooltip=new k(this.quill,this.options.bounds),H.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,$){H.handlers.link.call(H,!$.format.link)})}}]),B}(x.default);R.DEFAULTS=(0,d.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(B){if(B){var F=this.quill.getSelection();if(F==null||F.length==0)return;var H=this.quill.getText(F);/^\S+@\S+\.\S+$/.test(H)&&H.indexOf("mailto:")!==0&&(H="mailto:"+H);var z=this.quill.theme.tooltip;z.edit("link",H)}else this.quill.format("link",!1)}}}}});var k=function(L){D(B,L);function B(F,H){S(this,B);var z=O(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,F,H));return z.preview=z.root.querySelector("a.ql-preview"),z}return c(B,[{key:"listen",value:function(){var H=this;a(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){H.root.classList.contains("ql-editing")?H.save():H.edit("link",H.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(H.linkRange!=null){var $=H.linkRange;H.restoreFocus(),H.quill.formatText($,"link",!1,m.default.sources.USER),delete H.linkRange}z.preventDefault(),H.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(z,$,ee){if(z!=null){if(z.length===0&&ee===m.default.sources.USER){var J=H.quill.scroll.descendant(w.default,z.index),te=s(J,2),Y=te[0],K=te[1];if(Y!=null){H.linkRange=new A.Range(z.index-K,Y.length());var V=w.default.formats(Y.domNode);H.preview.textContent=V,H.preview.setAttribute("href",V),H.show(),H.position(H.quill.getBounds(H.linkRange));return}}else delete H.linkRange;H.hide()}})}},{key:"show",value:function(){a(B.prototype.__proto__||Object.getPrototypeOf(B.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),B}(v.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=R},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(29),a=Ee(s),c=i(36),h=i(38),d=i(64),p=i(65),m=Ee(p),v=i(66),x=Ee(v),E=i(67),w=Ee(E),A=i(37),N=i(26),_=i(39),C=i(40),S=i(56),O=Ee(S),D=i(68),M=Ee(D),R=i(27),k=Ee(R),L=i(69),B=Ee(L),F=i(70),H=Ee(F),z=i(71),$=Ee(z),ee=i(72),J=Ee(ee),te=i(73),Y=Ee(te),K=i(13),V=Ee(K),G=i(74),Z=Ee(G),se=i(75),ae=Ee(se),X=i(57),ne=Ee(X),ue=i(41),fe=Ee(ue),oe=i(28),ve=Ee(oe),Se=i(59),Ce=Ee(Se),Fe=i(60),Ge=Ee(Fe),ht=i(61),we=Ee(ht),he=i(108),de=Ee(he),Ne=i(62),ge=Ee(Ne);function Ee(Le){return Le&&Le.__esModule?Le:{default:Le}}a.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":A.BackgroundClass,"attributors/class/color":N.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":_.FontClass,"attributors/class/size":C.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":A.BackgroundStyle,"attributors/style/color":N.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":_.FontStyle,"attributors/style/size":C.SizeStyle},!0),a.default.register({"formats/align":c.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":d.IndentClass,"formats/background":A.BackgroundStyle,"formats/color":N.ColorStyle,"formats/font":_.FontClass,"formats/size":C.SizeClass,"formats/blockquote":m.default,"formats/code-block":V.default,"formats/header":x.default,"formats/list":w.default,"formats/bold":O.default,"formats/code":K.Code,"formats/italic":M.default,"formats/link":k.default,"formats/script":B.default,"formats/strike":H.default,"formats/underline":$.default,"formats/image":J.default,"formats/video":Y.default,"formats/list/item":E.ListItem,"modules/formula":Z.default,"modules/syntax":ae.default,"modules/toolbar":ne.default,"themes/bubble":de.default,"themes/snow":ge.default,"ui/icons":fe.default,"ui/picker":ve.default,"ui/icon-picker":Ge.default,"ui/color-picker":Ce.default,"ui/tooltip":we.default},!0),n.default=a.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function w(A,N){for(var _=0;_<N.length;_++){var C=N[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,N,_){return N&&w(A.prototype,N),_&&w(A,_),A}}(),a=function w(A,N,_){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,N);if(C===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:w(S,N,_)}else{if("value"in C)return C.value;var O=C.get;return O===void 0?void 0:O.call(_)}},c=i(0),h=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function m(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function v(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var x=function(w){v(A,w);function A(){return p(this,A),m(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"add",value:function(_,C){if(C==="+1"||C==="-1"){var S=this.value(_)||0;C=C==="+1"?S+1:S-1}return C===0?(this.remove(_),!0):a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"add",this).call(this,_,C)}},{key:"canAdd",value:function(_,C){return a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"canAdd",this).call(this,_,C)||a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"canAdd",this).call(this,_,parseInt(C))}},{key:"value",value:function(_){return parseInt(a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,_))||void 0}}]),A}(h.default.Attributor.Class),E=new x("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=E},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(4),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function d(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function p(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=function(v){p(x,v);function x(){return h(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default);m.blotName="blockquote",m.tagName="blockquote",n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function x(E,w){for(var A=0;A<w.length;A++){var N=w[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,N.key,N)}}return function(E,w,A){return w&&x(E.prototype,w),A&&x(E,A),E}}(),a=i(4),c=h(a);function h(x){return x&&x.__esModule?x:{default:x}}function d(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function p(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function m(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var v=function(x){m(E,x);function E(){return d(this,E),p(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,null,[{key:"formats",value:function(A){return this.tagName.indexOf(A.tagName)+1}}]),E}(c.default);v.blotName="header",v.tagName=["H1","H2","H3","H4","H5","H6"],n.default=v},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function S(O,D){for(var M=0;M<D.length;M++){var R=D[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,D,M){return D&&S(O.prototype,D),M&&S(O,M),O}}(),a=function S(O,D,M){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,D);if(R===void 0){var k=Object.getPrototypeOf(O);return k===null?void 0:S(k,D,M)}else{if("value"in R)return R.value;var L=R.get;return L===void 0?void 0:L.call(M)}},c=i(0),h=x(c),d=i(4),p=x(d),m=i(25),v=x(m);function x(S){return S&&S.__esModule?S:{default:S}}function E(S,O,D){return O in S?Object.defineProperty(S,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):S[O]=D,S}function w(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function A(S,O){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:S}function N(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(S,O):S.__proto__=O)}var _=function(S){N(O,S);function O(){return w(this,O),A(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return s(O,[{key:"format",value:function(M,R){M===C.blotName&&!R?this.replaceWith(h.default.create(this.statics.scope)):a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,M,R)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(M,R){return this.parent.isolate(this.offset(this.parent),this.length()),M===this.parent.statics.blotName?(this.parent.replaceWith(M,R),this):(this.parent.unwrap(),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,M,R))}}],[{key:"formats",value:function(M){return M.tagName===this.tagName?void 0:a(O.__proto__||Object.getPrototypeOf(O),"formats",this).call(this,M)}}]),O}(p.default);_.blotName="list-item",_.tagName="LI";var C=function(S){N(O,S),s(O,null,[{key:"create",value:function(M){var R=M==="ordered"?"OL":"UL",k=a(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,R);return(M==="checked"||M==="unchecked")&&k.setAttribute("data-checked",M==="checked"),k}},{key:"formats",value:function(M){if(M.tagName==="OL")return"ordered";if(M.tagName==="UL")return M.hasAttribute("data-checked")?M.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function O(D){w(this,O);var M=A(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,D)),R=function(L){if(L.target.parentNode===D){var B=M.statics.formats(D),F=h.default.find(L.target);B==="checked"?F.format("list","unchecked"):B==="unchecked"&&F.format("list","checked")}};return D.addEventListener("touchstart",R),D.addEventListener("mousedown",R),M}return s(O,[{key:"format",value:function(M,R){this.children.length>0&&this.children.tail.format(M,R)}},{key:"formats",value:function(){return E({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(M,R){if(M instanceof _)a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,M,R);else{var k=R==null?this.length():R.offset(this),L=this.split(k);L.parent.insertBefore(M,L)}}},{key:"optimize",value:function(M){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,M);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&R.domNode.tagName===this.domNode.tagName&&R.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(R.moveChildren(this),R.remove())}},{key:"replace",value:function(M){if(M.statics.blotName!==this.statics.blotName){var R=h.default.create(this.statics.defaultChild);M.moveChildren(R),this.appendChild(R)}a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,M)}}]),O}(v.default);C.blotName="list",C.scope=h.default.Scope.BLOCK_BLOT,C.tagName=["OL","UL"],C.defaultChild="list-item",C.allowedChildren=[_],n.ListItem=_,n.default=C},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(56),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function d(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function p(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=function(v){p(x,v);function x(){return h(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default);m.blotName="italic",m.tagName=["EM","I"],n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function E(w,A){for(var N=0;N<A.length;N++){var _=A[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,A,N){return A&&E(w.prototype,A),N&&E(w,N),w}}(),a=function E(w,A,N){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,A);if(_===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:E(C,A,N)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(N)}},c=i(6),h=d(c);function d(E){return E&&E.__esModule?E:{default:E}}function p(E,w){if(!(E instanceof w))throw new TypeError("Cannot call a class as a function")}function m(E,w){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:E}function v(E,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);E.prototype=Object.create(w&&w.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(E,w):E.__proto__=w)}var x=function(E){v(w,E);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,null,[{key:"create",value:function(N){return N==="super"?document.createElement("sup"):N==="sub"?document.createElement("sub"):a(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,N)}},{key:"formats",value:function(N){if(N.tagName==="SUB")return"sub";if(N.tagName==="SUP")return"super"}}]),w}(h.default);x.blotName="script",x.tagName=["SUB","SUP"],n.default=x},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function d(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function p(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=function(v){p(x,v);function x(){return h(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default);m.blotName="strike",m.tagName="S",n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function d(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function p(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var m=function(v){p(x,v);function x(){return h(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(a.default);m.blotName="underline",m.tagName="U",n.default=m},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(N,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,_,C){return _&&A(N.prototype,_),C&&A(N,C),N}}(),a=function A(N,_,C){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,_);if(S===void 0){var O=Object.getPrototypeOf(N);return O===null?void 0:A(O,_,C)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(C)}},c=i(0),h=p(c),d=i(27);function p(A){return A&&A.__esModule?A:{default:A}}function m(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")}function v(A,N){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:A}function x(A,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);A.prototype=Object.create(N&&N.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(A,N):A.__proto__=N)}var E=["alt","height","width"],w=function(A){x(N,A);function N(){return m(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,[{key:"format",value:function(C,S){E.indexOf(C)>-1?S?this.domNode.setAttribute(C,S):this.domNode.removeAttribute(C):a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,C,S)}}],[{key:"create",value:function(C){var S=a(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,C);return typeof C=="string"&&S.setAttribute("src",this.sanitize(C)),S}},{key:"formats",value:function(C){return E.reduce(function(S,O){return C.hasAttribute(O)&&(S[O]=C.getAttribute(O)),S},{})}},{key:"match",value:function(C){return/\.(jpe?g|gif|png)$/.test(C)||/^data:image\/.+;base64/.test(C)}},{key:"sanitize",value:function(C){return(0,d.sanitize)(C,["http","https","data"])?C:"//:0"}},{key:"value",value:function(C){return C.getAttribute("src")}}]),N}(h.default.Embed);w.blotName="image",w.tagName="IMG",n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function A(N,_){for(var C=0;C<_.length;C++){var S=_[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,_,C){return _&&A(N.prototype,_),C&&A(N,C),N}}(),a=function A(N,_,C){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,_);if(S===void 0){var O=Object.getPrototypeOf(N);return O===null?void 0:A(O,_,C)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(C)}},c=i(4),h=i(27),d=p(h);function p(A){return A&&A.__esModule?A:{default:A}}function m(A,N){if(!(A instanceof N))throw new TypeError("Cannot call a class as a function")}function v(A,N){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:A}function x(A,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);A.prototype=Object.create(N&&N.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(A,N):A.__proto__=N)}var E=["height","width"],w=function(A){x(N,A);function N(){return m(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,[{key:"format",value:function(C,S){E.indexOf(C)>-1?S?this.domNode.setAttribute(C,S):this.domNode.removeAttribute(C):a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,C,S)}}],[{key:"create",value:function(C){var S=a(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,C);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(C)),S}},{key:"formats",value:function(C){return E.reduce(function(S,O){return C.hasAttribute(O)&&(S[O]=C.getAttribute(O)),S},{})}},{key:"sanitize",value:function(C){return d.default.sanitize(C)}},{key:"value",value:function(C){return C.getAttribute("src")}}]),N}(c.BlockEmbed);w.blotName="video",w.className="ql-video",w.tagName="IFRAME",n.default=w},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function C(S,O){for(var D=0;D<O.length;D++){var M=O[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,O,D){return O&&C(S.prototype,O),D&&C(S,D),S}}(),a=function C(S,O,D){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,O);if(M===void 0){var R=Object.getPrototypeOf(S);return R===null?void 0:C(R,O,D)}else{if("value"in M)return M.value;var k=M.get;return k===void 0?void 0:k.call(D)}},c=i(35),h=x(c),d=i(5),p=x(d),m=i(9),v=x(m);function x(C){return C&&C.__esModule?C:{default:C}}function E(C,S){if(!(C instanceof S))throw new TypeError("Cannot call a class as a function")}function w(C,S){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:C}function A(C,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);C.prototype=Object.create(S&&S.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(C,S):C.__proto__=S)}var N=function(C){A(S,C);function S(){return E(this,S),w(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return s(S,null,[{key:"create",value:function(D){var M=a(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,D);return typeof D=="string"&&(window.katex.render(D,M,{throwOnError:!1,errorColor:"#f00"}),M.setAttribute("data-value",D)),M}},{key:"value",value:function(D){return D.getAttribute("data-value")}}]),S}(h.default);N.blotName="formula",N.className="ql-formula",N.tagName="SPAN";var _=function(C){A(S,C),s(S,null,[{key:"register",value:function(){p.default.register(N,!0)}}]);function S(){E(this,S);var O=w(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return O}return S}(v.default);n.FormulaBlot=N,n.default=_},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function D(M,R){for(var k=0;k<R.length;k++){var L=R[k];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}return function(M,R,k){return R&&D(M.prototype,R),k&&D(M,k),M}}(),a=function D(M,R,k){M===null&&(M=Function.prototype);var L=Object.getOwnPropertyDescriptor(M,R);if(L===void 0){var B=Object.getPrototypeOf(M);return B===null?void 0:D(B,R,k)}else{if("value"in L)return L.value;var F=L.get;return F===void 0?void 0:F.call(k)}},c=i(0),h=w(c),d=i(5),p=w(d),m=i(9),v=w(m),x=i(13),E=w(x);function w(D){return D&&D.__esModule?D:{default:D}}function A(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function N(D,M){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:D}function _(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(D,M):D.__proto__=M)}var C=function(D){_(M,D);function M(){return A(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return s(M,[{key:"replaceWith",value:function(k){this.domNode.textContent=this.domNode.textContent,this.attach(),a(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replaceWith",this).call(this,k)}},{key:"highlight",value:function(k){var L=this.domNode.textContent;this.cachedText!==L&&((L.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=k(L),this.domNode.normalize(),this.attach()),this.cachedText=L)}}]),M}(E.default);C.className="ql-syntax";var S=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),O=function(D){_(M,D),s(M,null,[{key:"register",value:function(){p.default.register(S,!0),p.default.register(C,!0)}}]);function M(R,k){A(this,M);var L=N(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,R,k));if(typeof L.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var B=null;return L.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(B),B=setTimeout(function(){L.highlight(),B=null},L.options.interval)}),L.highlight(),L}return s(M,[{key:"highlight",value:function(){var k=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var L=this.quill.getSelection();this.quill.scroll.descendants(C).forEach(function(B){B.highlight(k.options.highlight)}),this.quill.update(p.default.sources.SILENT),L!=null&&this.quill.setSelection(L,p.default.sources.SILENT)}}}]),M}(v.default);O.DEFAULTS={highlight:function(){return window.hljs==null?null:function(D){var M=window.hljs.highlightAuto(D);return M.value}}(),interval:1e3},n.CodeBlock=C,n.CodeToken=S,n.default=O},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function M(R,k,L){R===null&&(R=Function.prototype);var B=Object.getOwnPropertyDescriptor(R,k);if(B===void 0){var F=Object.getPrototypeOf(R);return F===null?void 0:M(F,k,L)}else{if("value"in B)return B.value;var H=B.get;return H===void 0?void 0:H.call(L)}},a=function(){function M(R,k){for(var L=0;L<k.length;L++){var B=k[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,k,L){return k&&M(R.prototype,k),L&&M(R,L),R}}(),c=i(3),h=A(c),d=i(8),p=A(d),m=i(43),v=A(m),x=i(15),E=i(41),w=A(E);function A(M){return M&&M.__esModule?M:{default:M}}function N(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}function _(M,R){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:M}function C(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);M.prototype=Object.create(R&&R.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(M,R):M.__proto__=R)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],O=function(M){C(R,M);function R(k,L){N(this,R),L.modules.toolbar!=null&&L.modules.toolbar.container==null&&(L.modules.toolbar.container=S);var B=_(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k,L));return B.quill.container.classList.add("ql-bubble"),B}return a(R,[{key:"extendToolbar",value:function(L){this.tooltip=new D(this.quill,this.options.bounds),this.tooltip.root.appendChild(L.container),this.buildButtons([].slice.call(L.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(L.container.querySelectorAll("select")),w.default)}}]),R}(v.default);O.DEFAULTS=(0,h.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){R?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var D=function(M){C(R,M);function R(k,L){N(this,R);var B=_(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k,L));return B.quill.on(p.default.events.EDITOR_CHANGE,function(F,H,z,$){if(F===p.default.events.SELECTION_CHANGE)if(H!=null&&H.length>0&&$===p.default.sources.USER){B.show(),B.root.style.left="0px",B.root.style.width="",B.root.style.width=B.root.offsetWidth+"px";var ee=B.quill.getLines(H.index,H.length);if(ee.length===1)B.position(B.quill.getBounds(H));else{var J=ee[ee.length-1],te=B.quill.getIndex(J),Y=Math.min(J.length()-1,H.index+H.length-te),K=B.quill.getBounds(new x.Range(te,Y));B.position(K)}}else document.activeElement!==B.textbox&&B.quill.hasFocus()&&B.hide()}),B}return a(R,[{key:"listen",value:function(){var L=this;s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){L.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!L.root.classList.contains("ql-hidden")){var B=L.quill.getSelection();B!=null&&L.position(L.quill.getBounds(B))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(L){var B=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"position",this).call(this,L),F=this.root.querySelector(".ql-tooltip-arrow");if(F.style.marginLeft="",B===0)return B;F.style.marginLeft=-1*B-F.offsetWidth/2+"px"}}]),R}(m.BaseTooltip);D.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=D,n.default=O},function(r,n,i){r.exports=i(63)}]).default})})(AR);var KX=AR.exports,XX=$r&&$r.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O0=$r&&$r.__assign||function(){return O0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},O0.apply(this,arguments)},QX=$r&&$r.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n},Dp=$r&&$r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},cs=Dp(j),ZX=Dp(sa),Cu=Dp(YX),Q_=Dp(KX),JX=function(t){XX(e,t);function e(r){var n=t.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(s,a,c,h){var d,p,m,v;s==="text-change"?(p=(d=n).onEditorChangeText)===null||p===void 0||p.call(d,n.editor.root.innerHTML,a,h,n.unprivilegedEditor):s==="selection-change"&&((v=(m=n).onEditorChangeSelection)===null||v===void 0||v.call(m,a,h,n.unprivilegedEditor))};var i=n.isControlled()?r.value:r.defaultValue;return n.value=i??"",n}return e.prototype.validateProps=function(r){var n;if(cs.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(cs.default.Children.count(r.children)){var i=cs.default.Children.only(r.children);if(((n=i)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(r,n){var i=this,s;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var a=this.getEditorContents(),c=(s=r.value,s??"");this.isEqualValue(c,a)||this.setEditorContents(this.editor,c)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),QX(this.cleanProps,this.dirtyProps).some(function(h){return!Cu.default(r[h],i.props[h])})},e.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(i){return!Cu.default(r[i],n.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(r,n){var i=this;if(this.editor&&this.shouldComponentRegenerate(r)){var s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var c=this.regenerationSnapshot,s=c.delta,h=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(s),Z_(function(){return i.setEditorSelection(d,h)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(r,n){var i=new Q_.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(i,n.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(r){return r&&r.ops},e.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Cu.default(r.ops,n.ops):Cu.default(r,n)},e.prototype.setEditorContents=function(r,n){var i=this;this.value=n;var s=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),Z_(function(){return i.setEditorSelection(r,s)})},e.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var i=r.getLength();n.index=Math.max(0,Math.min(n.index,i-1)),n.length=Math.max(0,Math.min(n.length,i-1-n.index)),r.setSelection(n)}},e.prototype.setEditorTabIndex=function(r,n){var i,s;!((s=(i=r)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(r.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},e.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=ZX.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},e.prototype.renderEditingArea=function(){var r=this,n=this.props,i=n.children,s=n.preserveWhitespace,a=this.state.generation,c={key:a,ref:function(h){r.editingArea=h}};return cs.default.Children.count(i)?cs.default.cloneElement(cs.default.Children.only(i),c):s?cs.default.createElement("pre",O0({},c)):cs.default.createElement("div",O0({},c))},e.prototype.render=function(){var r;return cs.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(r,n,i,s){var a,c;if(this.editor){var h=this.isDelta(this.value)?s.getContents():s.getHTML();h!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=h,(c=(a=this.props).onChange)===null||c===void 0||c.call(a,r,n,i,s))}},e.prototype.onEditorChangeSelection=function(r,n,i){var s,a,c,h,d,p;if(this.editor){var m=this.getEditorSelection(),v=!m&&r,x=m&&!r;Cu.default(r,m)||(this.selection=r,(a=(s=this.props).onChangeSelection)===null||a===void 0||a.call(s,r,n,i),v?(h=(c=this.props).onFocus)===null||h===void 0||h.call(c,r,n,i):x&&((p=(d=this.props).onBlur)===null||p===void 0||p.call(d,m,n,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Q_.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(cs.default.Component);function Z_(t){Promise.resolve().then(t)}var eQ=JX;const tQ=I0(eQ),J_=()=>{const{user:t}=Wr(),e=qr(),{postId:r}=cN(),[n,i]=j.useState(null),[s,a]=j.useState([]),[c,h]=j.useState(!0),[d,p]=j.useState(!1),[m,v]=j.useState(!1),[x,E]=j.useState({title:"",content:"",excerpt:"",is_published:!0,is_pinned:!1,hero_image_url:"",linked_menu_item_ids:[]}),w=s.filter(S=>S.image_url);j.useEffect(()=>{(async()=>{if(!t){h(!1);return}let O=null;try{const{data:M}=await be.from("profiles").select("restaurant_id").eq("id",t.id).maybeSingle();M!=null&&M.restaurant_id&&(O=M.restaurant_id)}catch(M){console.warn("profiles.restaurant_id lookup skipped or failed",M)}if(!O)try{const{data:M}=await be.from("restaurants").select("id").eq("owner_id",t.id).maybeSingle();M!=null&&M.id&&(O=M.id)}catch(M){console.warn("restaurants.owner_id lookup failed",M)}if(!O){console.warn("No restaurant associated with this owner"),h(!1);return}i(O);const{data:D}=await be.from("menu_items").select("id, name, image_url, price").eq("restaurant_id",O).order("name",{ascending:!0});if(a(D||[]),r){const{data:M}=await be.from("blog_posts").select("*").eq("id",r).single();if(M){E({title:M.title,content:M.content,excerpt:M.excerpt||"",is_published:M.is_published,is_pinned:M.is_pinned,hero_image_url:M.hero_image_url||"",linked_menu_item_ids:[]});const{data:R}=await be.from("blog_post_menu_items").select("menu_item_id").eq("blog_post_id",r);R&&E(k=>({...k,linked_menu_item_ids:R.map(L=>L.menu_item_id)}))}}h(!1)})()},[t,r]);const A=async()=>{if(!(!n||!t||!x.title.trim()||!x.content.trim())){p(!0);try{const S={restaurant_id:n,author_id:t.id,title:x.title.trim(),content:x.content.trim(),excerpt:x.excerpt.trim()||x.content.trim().slice(0,140),hero_image_url:x.hero_image_url||null,is_published:x.is_published,is_pinned:x.is_pinned};let O=r;if(r){const{data:D}=await be.from("blog_posts").update(S).eq("id",r).select("*").single();O=D.id}else{const{data:D}=await be.from("blog_posts").insert(S).select("*").single();O=D.id}if(O&&(await be.from("blog_post_menu_items").delete().eq("blog_post_id",O),x.linked_menu_item_ids.length>0)){const D=x.linked_menu_item_ids.map(M=>({blog_post_id:O,menu_item_id:M}));await be.from("blog_post_menu_items").insert(D)}e(r?"/dashboard?tab=blog&view="+r:"/dashboard?tab=blog")}catch(S){console.error("Failed to save blog post",S)}finally{p(!1)}}},N=S=>{E(O=>({...O,hero_image_url:S.image_url||O.hero_image_url}))},_=S=>{E(O=>{const D=O.linked_menu_item_ids.includes(S);return{...O,linked_menu_item_ids:D?O.linked_menu_item_ids.filter(M=>M!==S):[...O.linked_menu_item_ids,S]}})},C=()=>{var M;const S=document.createElement("input");S.type="url",S.placeholder="Enter image URL...",S.className="w-full p-2 border rounded text-sm";const O=document.createElement("div");O.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",O.innerHTML=`
      <div class="bg-card p-6 rounded-lg border border-border max-w-md w-full mx-4">
        <h3 class="text-lg font-semibold mb-4">Add Image URL</h3>
        <div class="mb-4"></div>
        <div class="flex gap-2 justify-end">
          <button class="px-4 py-2 text-sm border rounded hover:bg-muted" onclick="this.closest('.fixed').remove()">Cancel</button>
          <button class="px-4 py-2 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90" onclick="this.closest('.fixed').remove()">Add</button>
        </div>
      </div>
    `,(M=O.querySelector("div.mb-4"))==null||M.appendChild(S),document.body.appendChild(O);const D=O.querySelector("button:last-child");D.onclick=()=>{const R=S.value.trim();R&&E(k=>({...k,hero_image_url:R})),O.remove()}};return c?f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Qs,{className:"w-8 h-8 animate-spin mx-auto mb-2 text-primary"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading editor..."})]})}):n?f.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10",children:[f.jsx("div",{className:"bg-card/90 backdrop-blur-lg border-b border-border/40 sticky top-0 z-30",children:f.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4",children:f.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[f.jsx(De,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>{e(r?"/dashboard?tab=blog&view="+r:"/dashboard?tab=blog")},children:f.jsx(Cs,{className:"w-5 h-5"})}),f.jsxs(De,{variant:"ghost",size:"sm",onClick:()=>{e(r?"/dashboard?tab=blog&view="+r:"/dashboard?tab=blog")},className:"gap-2 hidden md:flex",children:[f.jsx(Cs,{className:"w-4 h-4"}),f.jsx("span",{children:r?"Back to Post":"Back to Blog"})]}),f.jsx("div",{className:"h-3 md:h-4 w-px bg-border hidden md:block"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gd,{className:"w-4 h-4 text-primary"}),f.jsx("h1",{className:"text-base md:text-lg font-semibold",children:r?"Edit Blog Post":"Create New Post"})]})]}),f.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[f.jsx(De,{variant:"outline",size:"icon",className:"md:hidden",onClick:()=>v(!m),children:m?f.jsx(Sb,{className:"w-4 h-4"}):f.jsx(Cb,{className:"w-4 h-4"})}),f.jsxs(De,{variant:"outline",size:"sm",onClick:()=>v(!m),className:"gap-2 hidden md:flex",children:[m?f.jsx(Sb,{className:"w-4 h-4"}):f.jsx(Cb,{className:"w-4 h-4"}),m?"Edit":"Preview"]}),f.jsxs(De,{size:"sm",onClick:A,disabled:d||!x.title.trim()||!x.content.trim(),className:"gap-2",children:[d?f.jsx(Qs,{className:"w-4 h-4 animate-spin"}):f.jsx(lA,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden md:inline",children:r?"Update":"Publish"})]})]})]})})}),f.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:m?f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40 overflow-hidden",children:f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[f.jsx("h2",{className:"text-2xl font-bold text-foreground",children:x.title||"Untitled Post"}),f.jsxs("div",{className:"flex items-center gap-2",children:[x.is_published?f.jsxs(br,{className:"bg-emerald-500/10 text-emerald-500 border-emerald-500/30 flex items-center gap-1",children:[f.jsx(Sc,{className:"w-3 h-3"}),"Live"]}):f.jsx(br,{variant:"outline",className:"border-muted-foreground/40 text-muted-foreground",children:"Draft"}),x.is_pinned&&f.jsxs(br,{variant:"outline",className:"border-amber-400/60 text-amber-400 bg-amber-400/5 flex items-center gap-1",children:[f.jsx(gd,{className:"w-3 h-3"}),"Highlight"]})]})]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),x.hero_image_url&&f.jsx("div",{className:"overflow-hidden rounded-xl border border-border/40 bg-muted/40",children:f.jsx("img",{src:x.hero_image_url,alt:x.title,className:"w-full h-64 object-cover"})}),f.jsx("div",{className:"prose prose-sm max-w-none",children:f.jsx("div",{className:"text-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:x.content||"Your content will appear here..."}})}),f.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-border/40",children:[f.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Auto-generated excerpt:"}),f.jsx("p",{className:"text-sm text-foreground",children:x.excerpt||x.content.slice(0,140)+(x.content.length>140?"...":"")})]}),x.linked_menu_item_ids.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"w-4 h-4 text-primary"}),f.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Featured Menu Items"}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",x.linked_menu_item_ids.length,")"]})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:x.linked_menu_item_ids.map(S=>{const O=s.find(D=>D.id===S);return O?f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/5 border border-primary/15 text-sm text-primary/80",children:[f.jsx(qu,{className:"w-4 h-4"}),f.jsx("span",{className:"font-medium",children:O.name}),O.price&&f.jsxs("span",{className:"text-primary/60",children:["- ",O.price.toLocaleString()," MMK"]})]},S):null})})]})]})}):f.jsxs("div",{className:"space-y-4 md:space-y-6",children:[f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40",children:f.jsxs("div",{className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-foreground",children:"Post Title"}),f.jsx(mt,{value:x.title,onChange:S=>E(O=>({...O,title:S.target.value})),placeholder:"e.g., Weekend Tasting Menu  Limited Seats",className:"text-base md:text-lg"})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 pt-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-primary",checked:x.is_published,onChange:S=>E(O=>({...O,is_published:S.target.checked}))}),f.jsx("span",{children:"Publish to customer Blog"})]}),f.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-primary",checked:x.is_pinned,onChange:S=>E(O=>({...O,is_pinned:S.target.checked}))}),f.jsx("span",{children:"Mark as highlight"})]})]})]})}),f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40",children:f.jsxs("div",{className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-foreground",children:"Story & Details"}),f.jsx("div",{className:"border-2 border-primary/30 bg-background/80 focus-within:border-primary/50 transition-all duration-200",children:f.jsx(tQ,{theme:"snow",value:x.content,onChange:S=>E(O=>({...O,content:S})),placeholder:"Share your restaurant's story, describe your new menu, highlight special ingredients, or announce upcoming events. Write in a warm, inviting tone that connects with your customers...",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","script","align","size","color","background","font","link","image","video"]})})]}),f.jsxs("div",{className:"p-3 md:p-4 bg-muted/30 rounded-lg border border-border/40",children:[f.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Auto-generated excerpt:"}),f.jsx("p",{className:"text-sm text-foreground",children:x.content.replace(/<[^>]*>/g,"").slice(0,140)+(x.content.replace(/<[^>]*>/g,"").length>140?"...":"")}),f.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This excerpt will be automatically generated from your content and shown in the blog listing."})]})]})}),f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40",children:f.jsxs("div",{className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(qu,{className:"w-4 h-4 text-primary"}),f.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Header Image"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(De,{variant:"outline",size:"sm",onClick:C,className:"gap-2",children:[f.jsx(mh,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Add URL"})]}),x.hero_image_url&&f.jsxs(De,{variant:"ghost",size:"sm",onClick:()=>E(S=>({...S,hero_image_url:""})),className:"gap-2 text-destructive hover:text-destructive",children:[f.jsx(yy,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]})]}),x.hero_image_url&&f.jsx("div",{className:"overflow-hidden rounded-lg border border-border/40 bg-muted/40",children:f.jsx("img",{src:x.hero_image_url,alt:"Header preview",className:"w-full h-32 md:h-48 object-cover"})}),w.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Or select from your menu images:"}),f.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:w.map(S=>f.jsxs("button",{type:"button",onClick:()=>N(S),className:"relative group overflow-hidden rounded border-2 border-transparent hover:border-primary/50 transition-colors",children:[f.jsx("img",{src:S.image_url,alt:S.name,className:"w-full h-12 sm:h-16 object-cover"}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-1",children:f.jsx("p",{className:"text-[10px] sm:text-xs text-white truncate",children:S.name})})]},S.id))})]})]})}),f.jsx(qe,{className:"bg-card/90 backdrop-blur-md border-border/40",children:f.jsxs("div",{className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"w-4 h-4 text-primary"}),f.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Featured Menu Items"}),f.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),s.length===0?f.jsx("p",{className:"text-sm text-muted-foreground",children:"No menu items found. Create menu items first to link them here."}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.map(S=>{const O=x.linked_menu_item_ids.includes(S.id);return f.jsx("button",{type:"button",onClick:()=>_(S.id),className:Be("p-3 rounded-lg border text-left transition-all",O?"border-primary/50 bg-primary/5":"border-border/40 hover:border-primary/30 hover:bg-primary/5"),children:f.jsxs("div",{className:"flex items-start gap-3",children:[S.image_url?f.jsx("img",{src:S.image_url,alt:S.name,className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg object-cover"}):f.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg bg-muted flex items-center justify-center",children:f.jsx(qu,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:S.name}),S.price&&f.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.price.toLocaleString()," MMK"]})]}),O&&f.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-primary flex items-center justify-center",children:f.jsx(Sc,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-primary-foreground"})})]})},S.id)})})]})})]})})]}):f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background via-background/70 to-secondary/10 flex items-center justify-center",children:f.jsx(qe,{className:"p-6 max-w-md mx-4",children:f.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No restaurant is associated with this account yet."})})})},rQ=()=>{const{user:t,userRole:e,loading:r,signOut:n}=Wr(),i=qr(),[s,a]=j.useState({totalRestaurants:0,totalOrders:0,totalCustomers:0,totalRevenue:0}),[c,h]=j.useState(!0);j.useEffect(()=>{!r&&(!t||e!=="admin")&&(ke.error("Admin access required"),i("/auth"))},[t,e,r,i]);const d=async()=>{try{await n(),ke.success("Logged out successfully"),i("/auth")}catch{ke.error("Failed to logout")}};j.useEffect(()=>{t&&e==="admin"&&p()},[t,e]);const p=async()=>{try{h(!0);const{count:v}=await be.from("restaurants").select("*",{count:"exact",head:!0}),{data:x,count:E}=await be.from("orders").select("total_amount",{count:"exact"}),w=(x==null?void 0:x.reduce((N,_)=>N+Number(_.total_amount),0))||0,{count:A}=await be.from("user_roles").select("*",{count:"exact",head:!0}).eq("role","customer");a({totalRestaurants:v||0,totalOrders:E||0,totalCustomers:A||0,totalRevenue:w})}catch(v){console.error("Error fetching stats:",v),ke.error("Failed to load statistics")}finally{h(!1)}};if(r||c)return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),f.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading admin dashboard..."})]})});if(!t||e!=="admin")return null;const m=[{title:"Total Restaurants",value:s.totalRestaurants,icon:Kh,description:"Active restaurants",color:"text-blue-600"},{title:"Total Orders",value:s.totalOrders,icon:Qh,description:"All time orders",color:"text-green-600"},{title:"Total Customers",value:s.totalCustomers,icon:vh,description:"Registered customers",color:"text-purple-600"},{title:"Total Revenue",value:`${s.totalRevenue.toLocaleString()} MMK`,icon:OM,description:"All time revenue",color:"text-yellow-600"}];return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[f.jsx("div",{className:"mb-8",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Admin Dashboard"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage your ALAN platform"})]}),f.jsxs(De,{variant:"outline",onClick:d,className:"flex items-center gap-2 hover:bg-destructive hover:text-destructive-foreground",children:[f.jsx(Z0,{className:"h-4 w-4"}),"Logout"]})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:m.map(v=>{const x=v.icon;return f.jsxs(qe,{className:"hover:shadow-lg transition-shadow",children:[f.jsxs(mr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(wr,{className:"text-sm font-medium",children:v.title}),f.jsx(x,{className:`h-5 w-5 ${v.color}`})]}),f.jsxs(It,{children:[f.jsx("div",{className:"text-2xl font-bold",children:v.value}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description})]})]},v.title)})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(qe,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>i("/admin/restaurants"),children:f.jsxs(mr,{children:[f.jsxs(wr,{className:"text-lg flex items-center gap-2",children:[f.jsx(Kh,{className:"h-5 w-5"}),"Restaurants"]}),f.jsx(Vs,{children:"Manage all restaurants"})]})}),f.jsx(qe,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>i("/admin/owners"),children:f.jsxs(mr,{children:[f.jsxs(wr,{className:"text-lg flex items-center gap-2",children:[f.jsx(vh,{className:"h-5 w-5"}),"Restaurant Owners"]}),f.jsx(Vs,{children:"Manage owner accounts"})]})}),f.jsx(qe,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>i("/admin/orders"),children:f.jsxs(mr,{children:[f.jsxs(wr,{className:"text-lg flex items-center gap-2",children:[f.jsx(Qh,{className:"h-5 w-5"}),"Orders Report"]}),f.jsx(Vs,{children:"View all orders"})]})}),f.jsx(qe,{className:"cursor-pointer hover:shadow-lg transition-all hover:scale-105",onClick:()=>i("/admin/users"),children:f.jsxs(mr,{children:[f.jsxs(wr,{className:"text-lg flex items-center gap-2",children:[f.jsx(vh,{className:"h-5 w-5"}),"Users"]}),f.jsx(Vs,{children:"Manage all users"})]})})]})]})})},rf=j.forwardRef(({className:t,...e},r)=>f.jsx("div",{className:"relative w-full overflow-auto",children:f.jsx("table",{ref:r,className:Be("w-full caption-bottom text-sm",t),...e})}));rf.displayName="Table";const nf=j.forwardRef(({className:t,...e},r)=>f.jsx("thead",{ref:r,className:Be("[&_tr]:border-b",t),...e}));nf.displayName="TableHeader";const sf=j.forwardRef(({className:t,...e},r)=>f.jsx("tbody",{ref:r,className:Be("[&_tr:last-child]:border-0",t),...e}));sf.displayName="TableBody";const nQ=j.forwardRef(({className:t,...e},r)=>f.jsx("tfoot",{ref:r,className:Be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));nQ.displayName="TableFooter";const Es=j.forwardRef(({className:t,...e},r)=>f.jsx("tr",{ref:r,className:Be("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));Es.displayName="TableRow";const nr=j.forwardRef(({className:t,...e},r)=>f.jsx("th",{ref:r,className:Be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));nr.displayName="TableHead";const Xt=j.forwardRef(({className:t,...e},r)=>f.jsx("td",{ref:r,className:Be("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Xt.displayName="TableCell";const iQ=j.forwardRef(({className:t,...e},r)=>f.jsx("caption",{ref:r,className:Be("mt-4 text-sm text-muted-foreground",t),...e}));iQ.displayName="TableCaption";const sQ=()=>{const{user:t,userRole:e,loading:r}=Wr(),n=qr(),[i,s]=j.useState([]),[a,c]=j.useState([]),[h,d]=j.useState(""),[p,m]=j.useState(!1),[v,x]=j.useState(null),[E,w]=j.useState({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""}),A=["7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM"],N=["1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM"],_=R=>{if(!R||!R.includes(" - "))return{start:"",end:""};const[k,L]=R.split(" - ").map(B=>B.trim());return{start:A.includes(k)?k:"",end:N.includes(L)?L:""}};j.useEffect(()=>{!r&&(!t||e!=="admin")&&(ke.error("Admin access required"),n("/auth"))},[t,e,r,n]),j.useEffect(()=>{t&&e==="admin"&&C()},[t,e]),j.useEffect(()=>{const R=i.filter(k=>k.name.toLowerCase().includes(h.toLowerCase())||k.address.toLowerCase().includes(h.toLowerCase()));c(R)},[h,i]);const C=async()=>{const{data:R,error:k}=await be.from("restaurants").select("*").order("created_at",{ascending:!1});if(k){ke.error("Failed to load restaurants");return}s(R||[]),c(R||[])},S=async()=>{if(!E.name||!E.address){ke.error("Name and address are required");return}const R=E.open_hours&&E.open_hours.includes(" - ")?E.open_hours:null;if(v){const{error:k}=await be.from("restaurants").update({...E,open_hours:R,rating:E.rating?Number(E.rating):null}).eq("id",v.id);if(k){ke.error("Failed to update restaurant");return}ke.success("Restaurant updated successfully")}else{const{error:k}=await be.from("restaurants").insert([{...E,open_hours:R,rating:E.rating?Number(E.rating):null}]);if(k){ke.error("Failed to create restaurant");return}ke.success("Restaurant created successfully")}m(!1),M(),C()},O=async R=>{if(!confirm("Are you sure you want to delete this restaurant?"))return;const{error:k}=await be.from("restaurants").delete().eq("id",R);if(k){ke.error("Failed to delete restaurant");return}ke.success("Restaurant deleted successfully"),C()},D=R=>{x(R);const k=_(R.open_hours);w({name:R.name,address:R.address,description:R.description||"",phone:R.phone||"",cuisine_type:R.cuisine_type||"",image_url:R.image_url||"",open_hours:k.start&&k.end?`${k.start} - ${k.end}`:R.open_hours||"",rating:R.rating!==null&&R.rating!==void 0?String(R.rating):""}),m(!0)},M=()=>{x(null),w({name:"",address:"",description:"",phone:"",cuisine_type:"",image_url:"",open_hours:"",rating:""})};return r||!t||e!=="admin"?null:f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Management"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurants on the platform"})]}),f.jsxs(Ts,{open:p,onOpenChange:R=>{m(R),R||M()},children:[f.jsx(fO,{asChild:!0,children:f.jsxs(De,{children:[f.jsx(qo,{className:"h-4 w-4 mr-2"}),"Add Restaurant"]})}),f.jsxs(ts,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[f.jsx(ro,{children:f.jsx(no,{children:v?"Edit Restaurant":"Add New Restaurant"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"name",children:"Restaurant Name *"}),f.jsx(mt,{id:"name",value:E.name,onChange:R=>w({...E,name:R.target.value}),placeholder:"Enter restaurant name"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"address",children:"Address *"}),f.jsx(mt,{id:"address",value:E.address,onChange:R=>w({...E,address:R.target.value}),placeholder:"Enter address"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"phone",children:"Phone"}),f.jsx(mt,{id:"phone",value:E.phone,onChange:R=>w({...E,phone:R.target.value}),placeholder:"Enter phone number"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"cuisine_type",children:"Cuisine Type"}),f.jsx(mt,{id:"cuisine_type",value:E.cuisine_type,onChange:R=>w({...E,cuisine_type:R.target.value}),placeholder:"e.g., Italian, Chinese"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"description",children:"Description"}),f.jsx(Jd,{id:"description",value:E.description,onChange:R=>w({...E,description:R.target.value}),placeholder:"Enter restaurant description",rows:3})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"image_url",children:"Image URL"}),f.jsx(mt,{id:"image_url",value:E.image_url,onChange:R=>w({...E,image_url:R.target.value}),placeholder:"Enter image URL"})]}),f.jsxs("div",{children:[f.jsx(it,{children:"Opening Hours"}),f.jsxs("div",{className:"mt-1 grid grid-cols-1 md:grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Start"}),f.jsxs("select",{value:_(E.open_hours).start,onChange:R=>{const k=_(E.open_hours),L=R.target.value,B=k.end,F=L&&B?`${L} - ${B}`:L||B?`${L}${B?` - ${B}`:""}`:"";w({...E,open_hours:F})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[f.jsx("option",{value:"",children:"Select start time"}),A.map(R=>f.jsx("option",{value:R,children:R},R))]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"End"}),f.jsxs("select",{value:_(E.open_hours).end,onChange:R=>{const k=_(E.open_hours),L=R.target.value,B=k.start,F=B&&L?`${B} - ${L}`:L&&B?`${B} - ${L}`:L||B?`${B}${L?` - ${L}`:""}`:"";w({...E,open_hours:F})},className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[f.jsx("option",{value:"",children:"Select end time"}),N.map(R=>f.jsx("option",{value:R,children:R},R))]})]})]}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:'Stored as a single value like "11:00 AM - 11:00 PM" in the database.'})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"rating",children:"Rating"}),f.jsx(mt,{id:"rating",type:"number",step:"0.1",min:"0",max:"5",value:E.rating,onChange:R=>w({...E,rating:R.target.value}),placeholder:"Enter rating (e.g., 4.5)"})]}),f.jsx(De,{onClick:S,className:"w-full",children:v?"Update Restaurant":"Create Restaurant"})]})]})]})]}),f.jsx(qe,{className:"mb-6",children:f.jsx(It,{className:"pt-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(Wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),f.jsx(mt,{placeholder:"Search restaurants...",value:h,onChange:R=>d(R.target.value),className:"pl-10"})]})})}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{children:["All Restaurants (",a.length,")"]})}),f.jsx(It,{children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(rf,{children:[f.jsx(nf,{children:f.jsxs(Es,{children:[f.jsx(nr,{children:"Name"}),f.jsx(nr,{children:"Address"}),f.jsx(nr,{children:"Phone"}),f.jsx(nr,{children:"Cuisine"}),f.jsx(nr,{className:"text-right",children:"Actions"})]})}),f.jsx(sf,{children:a.map(R=>f.jsxs(Es,{children:[f.jsx(Xt,{className:"font-medium",children:R.name}),f.jsx(Xt,{children:R.address}),f.jsx(Xt,{children:R.phone||"N/A"}),f.jsx(Xt,{children:R.cuisine_type||"N/A"}),f.jsxs(Xt,{className:"text-right",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>D(R),children:f.jsx(cA,{className:"h-4 w-4"})}),f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>O(R.id),children:f.jsx(ko,{className:"h-4 w-4 text-destructive"})})]})]},R.id))})]})})})]})]})})},oQ=()=>{const{user:t,userRole:e,loading:r}=Wr(),n=qr(),[i,s]=j.useState([]),[a,c]=j.useState([]),[h,d]=j.useState([]),[p,m]=j.useState(""),[v,x]=j.useState(!1),[E,w]=j.useState({ownerId:"",restaurantId:""});j.useEffect(()=>{!r&&(!t||e!=="admin")&&(ke.error("Admin access required"),n("/auth"))},[t,e,r,n]),j.useEffect(()=>{t&&e==="admin"&&(A(),N())},[t,e]),j.useEffect(()=>{const S=i.filter(O=>O.email.toLowerCase().includes(p.toLowerCase())||O.restaurant_name&&O.restaurant_name.toLowerCase().includes(p.toLowerCase()));d(S)},[p,i]);const A=async()=>{try{const{data:S,error:O}=await be.rpc("get_restaurant_owners");if(!O&&S&&S.length>0){const J=S||[],te=Array.from(new Set(J.map(Z=>Z.restaurant_id).filter(Boolean))),{data:Y,error:K}=await be.from("restaurants").select("id, address").in("id",te);K&&console.error("Failed to fetch restaurant addresses:",K);const V=new Map((Y||[]).map(Z=>[Z.id,Z.address??null])),G=J.map(Z=>({user_id:Z.user_id,full_name:Z.full_name??"Unnamed Owner",email:Z.email??"Email not available",phone:Z.phone??null,restaurant_id:Z.restaurant_id??null,restaurant_name:Z.restaurant_name??null,restaurant_address:Z.restaurant_id?V.get(Z.restaurant_id)??null:null}));s(G),d(G);return}console.warn("RPC get_restaurant_owners unavailable or empty; falling back. Error:",O);const{data:D,error:M}=await be.from("user_roles").select("user_id").eq("role","restaurant_owner");if(M){console.error("Failed to load owner roles:",M),ke.error("Failed to load owners");return}const R=Array.from(new Set((D??[]).map(J=>J.user_id).filter(J=>!!J)));if(R.length===0){s([]),d([]);return}const{data:k,error:L}=await be.from("profiles").select("id, full_name, phone").in("id",R);L&&console.error("Failed to load owner profiles:",L);let B=new Map;try{const{data:J,error:te}=await be.rpc("get_user_emails",{user_ids:R});if(!te&&J)B=new Map((J??[]).filter(Y=>Y.email).map(Y=>[Y.user_id,Y.email]));else{console.warn("RPC get_user_emails failed, attempting direct fallback:",te);const{data:Y,error:K}=await be.from("user_emails").select("user_id, email").in("user_id",R);!K&&Y&&(B=new Map((Y??[]).map(V=>[V.user_id,V.email])))}}catch(J){console.warn("Error getting emails via RPC/fallback:",J)}const{data:F,error:H}=await be.from("restaurants").select("id, name, address, owner_id").in("owner_id",R);if(H){console.error("Failed to load restaurants for owners:",H),ke.error("Failed to load owners");return}const z=new Map((k??[]).map(J=>[J.id,{fullName:J.full_name??"Unnamed Owner",phone:J.phone??null}])),$=new Map;(F??[]).forEach(J=>{J.owner_id&&$.set(J.owner_id,{id:J.id,name:J.name??"Unnamed Restaurant",address:J.address??null})});const ee=R.map(J=>{const te=z.get(J),Y=B.get(J)??"Email not available",K=$.get(J);return{user_id:J,full_name:(te==null?void 0:te.fullName)??"Unnamed Owner",email:Y,phone:(te==null?void 0:te.phone)??null,restaurant_id:(K==null?void 0:K.id)??null,restaurant_name:(K==null?void 0:K.name)??null,restaurant_address:(K==null?void 0:K.address)??null}});s(ee),d(ee)}catch(S){console.error("Unexpected error fetching owners:",S),ke.error("Failed to load owners")}},N=async()=>{const{data:S,error:O}=await be.from("restaurants").select("id, name").is("owner_id",null).order("name");if(O){console.error("Failed to load restaurants:",O);return}c(S||[])},_=async()=>{if(!E.ownerId||!E.restaurantId){ke.error("Please select both an owner and a restaurant");return}try{const{data:S,error:O}=await be.from("user_roles").select("user_id").eq("user_id",E.ownerId).eq("role","restaurant_owner").maybeSingle();if(O){console.error("Error checking owner role:",O),ke.error("Failed to verify owner role");return}if(!S){const{error:M}=await be.from("user_roles").insert([{user_id:E.ownerId,role:"restaurant_owner"}]);if(M){ke.error("Failed to assign owner role");return}}const{error:D}=await be.from("restaurants").update({owner_id:E.ownerId}).eq("id",E.restaurantId);if(D){ke.error("Failed to link restaurant to owner");return}ke.success("Owner linked to restaurant successfully"),x(!1),C(),A(),N()}catch(S){console.error("Error linking owner:",S),ke.error("Failed to link owner")}},C=()=>{w({ownerId:"",restaurantId:""})};return r||!t||e!=="admin"?null:f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Restaurant Owner Management"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage all restaurant owner accounts"})]}),f.jsxs(Ts,{open:v,onOpenChange:S=>{x(S),S||C()},children:[f.jsx(fO,{asChild:!0,children:f.jsxs(De,{disabled:a.length===0||i.filter(S=>!S.restaurant_id).length===0,children:[f.jsx(qo,{className:"h-4 w-4 mr-2"}),"Add Owner"]})}),f.jsxs(ts,{className:"max-w-md",children:[f.jsx(ro,{children:f.jsx(no,{children:"Link Existing Owner to Restaurant"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"owner",children:"Owner *"}),f.jsxs(Ei,{value:E.ownerId,onValueChange:S=>w({...E,ownerId:S}),children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Select owner without restaurant"})}),f.jsx(ei,{children:i.filter(S=>!S.restaurant_id).map(S=>f.jsxs(ct,{value:S.user_id,children:[S.full_name||"Unnamed Owner","  ",S.email]},S.user_id))})]})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"restaurant",children:"Restaurant *"}),f.jsxs(Ei,{value:E.restaurantId,onValueChange:S=>w({...E,restaurantId:S}),children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Select restaurant without owner"})}),f.jsx(ei,{children:a.map(S=>f.jsx(ct,{value:S.id,children:S.name},S.id))})]})]}),f.jsx(De,{onClick:_,className:"w-full",disabled:!E.ownerId||!E.restaurantId,children:"Link Owner"})]})]})]})]}),a.length===0&&f.jsx(qe,{className:"mb-6 border-amber-200 bg-amber-50",children:f.jsx(It,{className:"pt-6",children:f.jsx("p",{className:"text-amber-800",children:"No restaurants available without owners. Please create restaurants first before adding owners."})})}),f.jsx(qe,{className:"mb-6",children:f.jsx(It,{className:"pt-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(Wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),f.jsx(mt,{placeholder:"Search owners...",value:p,onChange:S=>m(S.target.value),className:"pl-10"})]})})}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{children:["All Restaurant Owners (",h.length,")"]})}),f.jsx(It,{children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(rf,{children:[f.jsx(nf,{children:f.jsxs(Es,{children:[f.jsx(nr,{children:"Restaurant"}),f.jsx(nr,{children:"Address"}),f.jsx(nr,{children:"Owner"}),f.jsx(nr,{children:"Email"}),f.jsx(nr,{children:"Phone"})]})}),f.jsx(sf,{children:h.map(S=>f.jsxs(Es,{children:[f.jsx(Xt,{children:S.restaurant_name?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4 text-muted-foreground"}),S.restaurant_name]}):f.jsx("span",{className:"text-muted-foreground",children:"No restaurant"})}),f.jsx(Xt,{children:S.restaurant_address||f.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),f.jsx(Xt,{children:S.full_name||f.jsx("span",{className:"text-muted-foreground",children:"Unnamed Owner"})}),f.jsx(Xt,{className:"text-muted-foreground",children:S.email}),f.jsx(Xt,{children:S.phone||"N/A"})]},S.user_id))})]})})})]})]})})};function aQ(t){const e=typeof t=="string"?new Date(t):t,r=e.getMonth()+1,n=e.getDate(),i=e.getFullYear();let s=e.getHours();const a=e.getMinutes(),c=s>=12?"PM":"AM";s=s%12,s=s||12;const h=a<10?`0${a}`:`${a}`;return`${r}/${n}/${i} - ${s}:${h} ${c}`}const lQ=()=>{var L,B,F,H;const{user:t,userRole:e,loading:r}=Wr(),n=qr(),[i,s]=j.useState([]),[a,c]=j.useState([]),[h,d]=j.useState([]),[p,m]=j.useState([]),[v,x]=j.useState(""),[E,w]=j.useState("all"),[A,N]=j.useState("all"),[_,C]=j.useState("all");j.useEffect(()=>{!r&&(!t||e!=="admin")&&(ke.error("Admin access required"),n("/auth"))},[t,e,r,n]),j.useEffect(()=>{t&&e==="admin"&&S()},[t,e]),j.useEffect(()=>{D()},[v,E,A,_,i]);const S=async()=>{console.log(" Fetching orders data...");const{data:z,error:$}=await be.from("orders").select("*").order("created_at",{ascending:!1});if($){console.error(" Error fetching orders:",$),ke.error("Failed to load orders");return}if(console.log(" Orders fetched:",(z==null?void 0:z.length)||0,"orders"),!z||z.length===0){console.log(" No orders found in database"),s([]),c([]);const{data:Z}=await be.from("restaurants").select("id, name").order("name");d(Z||[]),ke.info("No orders found in the database");return}console.log(" Found existing orders in database:",z.length);const ee=[...new Set(z.map(Z=>Z.customer_id).filter(Z=>!!Z))];console.log(" Looking up customer details for IDs:",ee.map(Z=>Z.substring(0,8)));let J=[];if(ee.length>0){try{let Z=await be.rpc("get_order_customers_fallback",{customer_ids:ee});Z.error&&(console.warn(" get_order_customers_fallback not available or failed, trying get_order_customers:",Z.error.message),Z=await be.rpc("get_order_customers",{customer_ids:ee})),Z.error?(console.error(" Error fetching customer details via RPC:",Z.error),ke.error("Failed to load customer details")):(J=Z.data||[],console.log(" Customer details fetched via RPC:",J.length))}catch(Z){console.error(" Unexpected error fetching customer details:",Z),ke.error("Failed to load customer details")}if(J.length===0)try{const{data:Z,error:se}=await be.from("profiles").select("id, full_name, phone").in("id",ee);!se&&Z&&(J=Z.map(ae=>({user_id:ae.id,full_name:ae.full_name,email:null,phone:ae.phone})),console.log(" Fallback to profiles fetched:",J.length))}catch(Z){console.error(" Unexpected error fetching profiles as fallback:",Z)}}const te=new Map(J.map(Z=>{var se,ae,X;return[Z.user_id,{name:((se=Z.full_name)==null?void 0:se.trim())||"",email:((ae=Z.email)==null?void 0:ae.trim())||"Email not available",phone:((X=Z.phone)==null?void 0:X.trim())||""}]}));console.log(" Customer mapping (via RPC):",{totalCustomers:J.length,customerIds:ee.map(Z=>Z.substring(0,8)),foundCustomers:J.map(Z=>({id:Z.user_id.substring(0,8),name:Z.full_name,email:Z.email,phone:Z.phone}))});const{data:Y}=await be.from("restaurants").select("id, name").order("name"),K=[...new Set(z.map(Z=>Z.restaurant_id))],{data:V}=await be.from("restaurants").select("id, name").in("id",K),G=z.map(Z=>{var fe;const se=te.get(Z.customer_id),ae=Z.customer_id?Z.customer_id.substring(0,8):"UNKNOWN",X=se!=null&&se.name&&se.name.length>0?se.name:`Customer ${ae}`,ne=se!=null&&se.email&&se.email.length>0?se.email:"Email not available",ue=se!=null&&se.phone&&se.phone.length>0?se.phone:"Phone not available";return{...Z,customer_name:X,customer_email:ne,customer_phone:ue,restaurant_name:((fe=V==null?void 0:V.find(oe=>oe.id===Z.restaurant_id))==null?void 0:fe.name)||"Unknown Restaurant"}});console.log(" Orders enriched with customer data:",{totalOrders:G.length,ordersWithCustomerNames:G.filter(Z=>!Z.customer_name.startsWith("Customer ")).length,sampleOrder:G[0]?{id:G[0].id.substring(0,8),customerName:G[0].customer_name,customerEmail:G[0].customer_email,customerPhone:G[0].customer_phone}:null}),s(G),c(G),d(Y||[]),O(G)},O=z=>{const $=new Map;z.forEach(J=>{const te=J.restaurant_id,Y=J.restaurant_name,K=Number(J.total_amount);if($.has(te)){const V=$.get(te);V.total_orders+=1,V.total_revenue+=K,V.avg_order_value=V.total_revenue/V.total_orders}else $.set(te,{restaurant_id:te,restaurant_name:Y,total_orders:1,total_revenue:K,avg_order_value:K})});const ee=Array.from($.values()).sort((J,te)=>te.total_revenue-J.total_revenue);m(ee)},D=()=>{let z=[...i];if(v&&(z=z.filter($=>$.customer_name.toLowerCase().includes(v.toLowerCase())||$.customer_phone.toLowerCase().includes(v.toLowerCase())||$.restaurant_name.toLowerCase().includes(v.toLowerCase())||$.id.toLowerCase().includes(v.toLowerCase()))),_!=="all"&&(z=z.filter($=>$.restaurant_id===_)),E!=="all"&&(z=z.filter($=>$.status===E)),A!=="all"){const $=new Date,ee=new Date;A==="today"?ee.setHours(0,0,0,0):A==="week"?ee.setDate($.getDate()-7):A==="month"&&ee.setMonth($.getMonth()-1),z=z.filter(J=>new Date(J.created_at)>=ee)}c(z),O(z)},M=()=>{window.print()},R=a.reduce((z,$)=>z+Number($.total_amount),0),k=z=>{const $={paid:"default",preparing:"secondary",ready:"outline",completed:"default"};return f.jsx(br,{variant:$[z]||"default",children:z.toUpperCase()})};return r||!t||e!=="admin"?null:f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl print:p-0",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8 print:hidden",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Orders Report"}),f.jsx("p",{className:"text-muted-foreground",children:"View and manage all orders"})]}),f.jsxs(De,{onClick:M,children:[f.jsx(jM,{className:"h-4 w-4 mr-2"}),"Print Report"]})]}),f.jsx("div",{className:"hidden print:block mb-8",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ALAN - Orders Report"}),f.jsxs("p",{className:"text-muted-foreground",children:["Generated on ",new Date().toLocaleDateString()]}),_!=="all"&&f.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:["Restaurant: ",((L=h.find(z=>z.id===_))==null?void 0:L.name)||"Selected Restaurant"]}),E!=="all"&&f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Status Filter: ",E.toUpperCase()]}),A!=="all"&&f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date Filter: ",A==="today"?"Today":A==="week"?"Last 7 Days":A==="month"?"Last 30 Days":A]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsx(wr,{className:"text-sm",children:"Total Orders"})}),f.jsx(It,{children:f.jsx("p",{className:"text-3xl font-bold",children:a.length})})]}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsx(wr,{className:"text-sm",children:"Total Revenue"})}),f.jsx(It,{children:f.jsxs("p",{className:"text-3xl font-bold",children:[R.toLocaleString()," MMK"]})})]}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsx(wr,{className:"text-sm",children:"Average Order"})}),f.jsx(It,{children:f.jsxs("p",{className:"text-3xl font-bold",children:[a.length>0?Math.round(R/a.length).toLocaleString():0," MMK"]})})]})]}),f.jsx(qe,{className:"mb-6 print:hidden",children:f.jsx(It,{className:"pt-6",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),f.jsx(mt,{placeholder:"Search orders...",value:v,onChange:z=>x(z.target.value),className:"pl-10"})]}),f.jsxs(Ei,{value:_,onValueChange:C,children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Filter by restaurant"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All Restaurants"}),h.map(z=>f.jsx(ct,{value:z.id,children:z.name},z.id))]})]}),f.jsxs(Ei,{value:E,onValueChange:w,children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Filter by status"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All Statuses"}),f.jsx(ct,{value:"paid",children:"Paid"}),f.jsx(ct,{value:"preparing",children:"Preparing"}),f.jsx(ct,{value:"ready",children:"Ready"}),f.jsx(ct,{value:"completed",children:"Completed"})]})]}),f.jsxs(Ei,{value:A,onValueChange:N,children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Filter by date"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All Time"}),f.jsx(ct,{value:"today",children:"Today"}),f.jsx(ct,{value:"week",children:"Last 7 Days"}),f.jsx(ct,{value:"month",children:"Last 30 Days"})]})]}),f.jsxs(De,{variant:"outline",onClick:()=>{x(""),C("all"),w("all"),N("all")},children:[f.jsx(Ab,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})})}),_==="all"&&p.length>0&&f.jsxs(qe,{className:"mb-6",children:[f.jsx(mr,{children:f.jsxs(wr,{className:"flex items-center gap-2",children:[f.jsx(Ab,{className:"h-5 w-5"}),"Restaurant Performance Summary"]})}),f.jsx(It,{children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(z=>f.jsx(qe,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:f.jsxs(It,{className:"p-4",children:[f.jsx("h3",{className:"font-semibold text-lg mb-2 text-blue-900",children:z.restaurant_name}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Total Orders:"}),f.jsx("span",{className:"font-medium",children:z.total_orders})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),f.jsxs("span",{className:"font-bold text-green-600",children:[z.total_revenue.toLocaleString()," MMK"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Avg Order Value:"}),f.jsxs("span",{className:"font-medium",children:[Math.round(z.avg_order_value).toLocaleString()," MMK"]})]})]}),f.jsx(De,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>C(z.restaurant_id),children:"View Orders"})]})},z.restaurant_id))})})]}),_!=="all"&&f.jsx(qe,{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",children:f.jsx(It,{className:"pt-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold text-green-900",children:[((B=h.find(z=>z.id===_))==null?void 0:B.name)||"Selected Restaurant"," Performance"]}),f.jsx("p",{className:"text-sm text-green-700",children:"Filtered results for selected restaurant"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-green-800",children:a.length}),f.jsx("p",{className:"text-xs text-green-600",children:"Orders"})]}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[R.toLocaleString()," MMK"]}),f.jsx("p",{className:"text-xs text-green-600",children:"Revenue"})]}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[a.length>0?Math.round(R/a.length).toLocaleString():0," MMK"]}),f.jsx("p",{className:"text-xs text-green-600",children:"Avg Order"})]})]})]})})}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Order Details"}),f.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:_!=="all"?`Showing ${a.length} orders for ${(F=h.find(z=>z.id===_))==null?void 0:F.name}`:`Showing ${a.length} of ${i.length} orders`})]})}),f.jsx(It,{children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(rf,{children:[f.jsx(nf,{children:f.jsxs(Es,{children:[f.jsx(nr,{children:"Order ID"}),f.jsx(nr,{children:"Customer"}),f.jsx(nr,{children:"Restaurant"}),f.jsx(nr,{children:"Type"}),f.jsx(nr,{children:"Amount"}),f.jsx(nr,{children:"Status"}),f.jsx(nr,{children:"Date"})]})}),f.jsx(sf,{children:a.length>0?a.map(z=>f.jsxs(Es,{children:[f.jsx(Xt,{className:"font-mono text-xs",children:z.id.substring(0,8)}),f.jsx(Xt,{children:f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"font-medium",children:z.customer_name}),z.customer_email!=="Email not available"&&f.jsx("div",{className:"text-xs text-muted-foreground",children:z.customer_email}),z.customer_phone!=="Phone not available"&&f.jsx("div",{className:"text-xs text-muted-foreground",children:z.customer_phone})]})}),f.jsx(Xt,{children:z.restaurant_name}),f.jsx(Xt,{className:"capitalize",children:z.order_type}),f.jsxs(Xt,{className:"font-semibold",children:[Number(z.total_amount).toLocaleString()," MMK"]}),f.jsx(Xt,{children:k(z.status)}),f.jsx(Xt,{children:aQ(z.created_at)})]},z.id)):f.jsx(Es,{children:f.jsx(Xt,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:_!=="all"?`No orders found for ${((H=h.find(z=>z.id===_))==null?void 0:H.name)||"selected restaurant"}`:"No orders found matching the current filters"})})})]})})})]})]})})},cQ=()=>{const{user:t,userRole:e,loading:r}=Wr(),n=qr(),[i,s]=j.useState([]),[a,c]=j.useState([]),[h,d]=j.useState(""),[p,m]=j.useState("all"),[v,x]=j.useState(!1),[E,w]=j.useState(null),[A,N]=j.useState(""),[_,C]=j.useState(null),[S,O]=j.useState(null),[D,M]=j.useState(""),[R,k]=j.useState(""),[L,B]=j.useState("customer"),[F,H]=j.useState([]),[z,$]=j.useState(!1),[ee,J]=j.useState("customer"),[te,Y]=j.useState(""),[K,V]=j.useState(""),[G,Z]=j.useState(""),[se,ae]=j.useState(""),[X,ne]=j.useState(null);j.useEffect(()=>{!r&&(!t||e!=="admin")&&(ke.error("Admin access required"),n("/auth"))},[t,e,r,n]),j.useEffect(()=>{t&&e==="admin"&&(ue(),fe())},[t,e]),j.useEffect(()=>{const we=h.toLowerCase(),he=i.filter(de=>{const Ne=de.full_name.toLowerCase().includes(we)||de.role.toLowerCase().includes(we)||de.phone&&de.phone.toLowerCase().includes(we)||de.user_id.toLowerCase().includes(we),ge=p==="all"?!0:de.role===p;return Ne&&ge});c(he)},[h,p,i]);const ue=async()=>{console.log(" Fetching users and details via RPC...");try{const{data:we,error:he}=await be.from("user_roles").select("user_id, role, created_at").order("created_at",{ascending:!1});if(he){console.error(" Error fetching user roles:",he),ke.error("Failed to load users");return}if(!we||we.length===0){console.log(" No users found in user_roles table"),s([]),c([]);return}const de=we.map(Le=>Le.user_id);let Ne=[];try{let Le=await be.rpc("get_order_customers_fallback",{customer_ids:de});Le.error&&(console.warn(" get_order_customers_fallback not available, trying get_order_customers:",Le.error.message),Le=await be.rpc("get_order_customers",{customer_ids:de})),Le.error?(console.error(" Error fetching user details via RPC:",Le.error),ke.error("Failed to load some user details")):Ne=Le.data||[]}catch(Le){console.error(" Unexpected RPC error:",Le)}const ge=new Map(Ne.map(Le=>[Le.user_id,Le])),Ee=we.map(Le=>{var ut;const He=ge.get(Le.user_id),rt=(ut=He==null?void 0:He.full_name)!=null&&ut.trim()?He.full_name.trim():`User ${Le.user_id.substring(0,8)}`;return{user_id:Le.user_id,full_name:rt,phone:(He==null?void 0:He.phone)||null,role:Le.role,created_at:Le.created_at}});console.log(" Final users data (via RPC):",{total:Ee.length,withRealNames:Ee.filter(Le=>!Le.full_name.startsWith("User ")).length,withPhones:Ee.filter(Le=>Le.phone).length}),s(Ee),c(Ee)}catch(we){console.error(" Unexpected error in fetchUsers:",we),ke.error("An unexpected error occurred while loading users")}},fe=async()=>{try{const{data:we,error:he}=await be.from("restaurants").select("id, name").order("name");if(he){console.error(" Error fetching restaurants:",he);return}H(we||[])}catch(we){console.error(" Unexpected error fetching restaurants:",we)}},oe=async we=>{var he;console.log(" Opening user details for:",we.user_id.substring(0,8)),w(we),M(we.full_name),k(we.phone||""),B(we.role);try{let de=await be.rpc("get_order_customers_fallback",{customer_ids:[we.user_id]});de.error&&(de=await be.rpc("get_order_customers",{customer_ids:[we.user_id]})),!de.error&&de.data&&de.data.length>0?N(de.data[0].email||"Email not available"):N("Email not available")}catch{N("Email not available")}if(C(null),O(null),we.role==="restaurant_owner")try{const{data:de,error:Ne}=await be.from("restaurants").select("id, name").eq("owner_id",we.user_id).limit(1).maybeSingle();if(!Ne&&de)C(de.id),O(de.name||"Linked Restaurant");else{const{data:ge,error:Ee}=await be.from("restaurant_owners").select("restaurant_id, restaurants(name)").eq("user_id",we.user_id).maybeSingle();!Ee&&ge&&(C(ge.restaurant_id),O(((he=ge.restaurants)==null?void 0:he.name)||"Linked Restaurant"))}}catch(de){console.error(" Error fetching restaurant for owner:",de)}x(!0)},ve=async()=>{if(E)try{const{error:we}=await be.from("profiles").update({full_name:D.trim(),phone:R.trim()||null,updated_at:new Date().toISOString()}).eq("id",E.user_id);if(we){console.error(" Error updating profile:",we),ke.error("Failed to update user profile");return}if(L!==E.role){const{error:he}=await be.from("user_roles").update({role:L}).eq("user_id",E.user_id);if(he){console.error(" Error updating role:",he),ke.error("Failed to update user role");return}if(L==="restaurant_owner"&&_){const{error:de}=await be.from("restaurant_owners").upsert({user_id:E.user_id,restaurant_id:_,created_at:new Date().toISOString()});if(de){console.error(" Error linking restaurant:",de),ke.error("Failed to link restaurant");return}}else E.role==="restaurant_owner"&&L!=="restaurant_owner"&&await be.from("restaurant_owners").delete().eq("user_id",E.user_id)}ke.success("User updated successfully"),x(!1),ue()}catch(we){console.error(" Unexpected error updating user:",we),ke.error("An unexpected error occurred")}},Se=async()=>{if(E&&confirm("Are you sure you want to delete this user? This action cannot be undone."))try{console.log(" Deleting user:",E.user_id.substring(0,8),"with role:",E.role),console.log(" Checking for restaurant ownership...");const{data:we,error:he}=await be.from("restaurant_owners").select("restaurant_id").eq("user_id",E.user_id);if(!he&&we&&we.length>0){console.log(" Removing restaurant ownership links...");const{error:ge}=await be.from("restaurant_owners").delete().eq("user_id",E.user_id);if(ge){console.error(" Error deleting restaurant ownership:",ge),ke.error(`Failed to remove restaurant links: ${ge.message}`);return}console.log(" Restaurant ownership removed")}console.log(" Deleting user role...");const{error:de}=await be.from("user_roles").delete().eq("user_id",E.user_id);if(de){console.error(" Error deleting user role:",de),ke.error(`Failed to delete user role: ${de.message}`);return}console.log(" User role deleted"),console.log(" Deleting user profile...");const{error:Ne}=await be.from("profiles").delete().eq("id",E.user_id);if(Ne){console.error(" Error deleting profile:",Ne),ke.error(`Failed to delete user profile: ${Ne.message}`);return}console.log(" User profile deleted");try{console.log(" Attempting to delete auth user...");const{error:ge}=await be.auth.admin.deleteUser(E.user_id);ge?console.warn(" Could not delete auth user (service role required):",ge.message):console.log(" Auth user deleted")}catch(ge){console.warn(" Auth user deletion not available:",ge)}console.log(" User deletion complete"),ke.success("User deleted successfully"),x(!1),setTimeout(()=>{ue()},500)}catch(we){console.error(" Unexpected error deleting user:",we),ke.error("An unexpected error occurred")}},Ce=async()=>{var we,he,de;if(!te.trim()||!K.trim()||!G.trim()){ke.error("Please fill in all required fields");return}try{console.log(" Creating user without auth signup to prevent session interference..."),console.log(" Selected role for new user:",ee);const ge=(we=(await be.auth.getSession()).data.session)==null?void 0:we.user;if(!ge){ke.error("Admin session not found");return}console.log(" Current admin:",ge.email,"ID:",ge.id.substring(0,8)),console.log(" Creating user via edge function...");const{data:Ee,error:Le}=await be.functions.invoke("admin-create-user",{body:{email:K.trim(),password:G.trim(),full_name:te.trim(),phone:se.trim()||null,role:ee,restaurant_id:X}});if(Le){console.error(" Edge function error:",Le),ke.error(Le.message||"Failed to create user");return}console.log(" Edge function result:",Ee);const He=await be.auth.getSession();((de=(he=He.data.session)==null?void 0:he.user)==null?void 0:de.id)===ge.id?console.log(" Admin session remained intact:",He.data.session.user.email):console.error(" Admin session was somehow changed!"),console.log(" User creation complete without session interference"),ke.success(`${ee.charAt(0).toUpperCase()+ee.slice(1)} user created successfully`),$(!1),J("customer"),Y(""),V(""),Z(""),ae(""),ne(null),ue()}catch(Ne){console.error(" Unexpected error creating user:",Ne),ke.error("An unexpected error occurred")}},Fe=we=>{const he={admin:{variant:"destructive",icon:Xh},restaurant_owner:{variant:"default",icon:Gi},customer:{variant:"secondary",icon:Gi}},de=he[we]||he.customer,Ne=de.icon;return f.jsxs(br,{variant:de.variant,className:"flex items-center gap-1 w-fit",children:[f.jsx(Ne,{className:"h-3 w-3"}),we.replace("_"," ").toUpperCase()]})},ht=(()=>{const we=i.filter(Ne=>Ne.role==="admin").length,he=i.filter(Ne=>Ne.role==="restaurant_owner").length,de=i.filter(Ne=>Ne.role==="customer").length;return{admins:we,owners:he,customers:de}})();return r||!t||e!=="admin"?null:f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:f.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsx(De,{variant:"ghost",size:"icon",onClick:()=>n("/admin"),children:f.jsx(Cs,{className:"h-5 w-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"User Management"}),f.jsx("p",{className:"text-muted-foreground",children:"Manage all registered users"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{className:"text-sm flex items-center gap-2",children:[f.jsx(Xh,{className:"h-4 w-4 text-destructive"}),"Admins"]})}),f.jsx(It,{children:f.jsx("p",{className:"text-3xl font-bold",children:ht.admins})})]}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{className:"text-sm flex items-center gap-2",children:[f.jsx(Gi,{className:"h-4 w-4 text-primary"}),"Restaurant Owners"]})}),f.jsx(It,{children:f.jsx("p",{className:"text-3xl font-bold",children:ht.owners})})]}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{className:"text-sm flex items-center gap-2",children:[f.jsx(Gi,{className:"h-4 w-4 text-secondary"}),"Customers"]})}),f.jsx(It,{children:f.jsx("p",{className:"text-3xl font-bold",children:ht.customers})})]})]}),f.jsx(qe,{className:"mb-6",children:f.jsx(It,{className:"pt-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[f.jsxs("div",{className:"relative md:flex-1",children:[f.jsx(Wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),f.jsx(mt,{placeholder:"Search users...",value:h,onChange:we=>d(we.target.value),className:"pl-10"})]}),f.jsx("div",{className:"md:w-64",children:f.jsxs(Ei,{value:p,onValueChange:we=>m(we),children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Filter by role"})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"all",children:"All"}),f.jsx(ct,{value:"admin",children:"Admin"}),f.jsx(ct,{value:"restaurant_owner",children:"Restaurant Owner"}),f.jsx(ct,{value:"customer",children:"Customer"})]})]})})]})})}),f.jsxs(qe,{children:[f.jsx(mr,{children:f.jsxs(wr,{children:["All Users (",a.length,")"]})}),f.jsx(It,{children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(rf,{children:[f.jsx(nf,{children:f.jsxs(Es,{children:[f.jsx(nr,{children:"Name"}),f.jsx(nr,{children:"Phone"}),f.jsx(nr,{children:"Role"}),f.jsx(nr,{children:"Registered"}),f.jsx(nr,{className:"text-right",children:"Actions"})]})}),f.jsx(sf,{children:a.map(we=>f.jsxs(Es,{children:[f.jsx(Xt,{className:"font-medium",children:f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{children:we.full_name}),f.jsx("span",{className:"text-xs text-muted-foreground",children:we.phone?we.phone:`ID: ${we.user_id.substring(0,8)}...`})]})}),f.jsx(Xt,{children:f.jsx("span",{className:"text-sm",children:we.phone||"N/A"})}),f.jsx(Xt,{children:Fe(we.role)}),f.jsx(Xt,{children:new Date(we.created_at).toLocaleDateString()}),f.jsx(Xt,{className:"text-right",children:f.jsx(De,{variant:"ghost",size:"sm",onClick:()=>oe(we),children:"View Details"})})]},we.user_id))})]})})})]}),f.jsx(Ts,{open:v,onOpenChange:x,children:f.jsxs(ts,{className:"max-w-2xl",children:[f.jsx(ro,{children:f.jsx(no,{children:"User Details"})}),E&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"detail-name",children:"Full Name"}),f.jsx(mt,{id:"detail-name",value:D,onChange:we=>M(we.target.value)})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"detail-phone",children:"Phone"}),f.jsx(mt,{id:"detail-phone",value:R,onChange:we=>k(we.target.value)})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"detail-email",children:"Email"}),f.jsx(mt,{id:"detail-email",value:A,disabled:!0,className:"bg-muted"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"detail-role",children:"Role"}),f.jsxs(Ei,{value:L,onValueChange:B,children:[f.jsx(Jn,{children:f.jsx(Si,{})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"customer",children:"Customer"}),f.jsx(ct,{value:"restaurant_owner",children:"Restaurant Owner"}),f.jsx(ct,{value:"admin",children:"Admin"})]})]})]})]}),L==="restaurant_owner"&&_&&S&&f.jsxs("div",{children:[f.jsx(it,{children:"Linked Restaurant"}),f.jsx("p",{className:"mt-1 text-sm font-medium",children:S})]}),f.jsx("div",{className:"border-t pt-4",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx(it,{className:"text-muted-foreground",children:"User ID"}),f.jsx("p",{className:"font-mono",children:E.user_id})]}),f.jsxs("div",{children:[f.jsx(it,{className:"text-muted-foreground",children:"Registration Date"}),f.jsx("p",{children:new Date(E.created_at).toLocaleDateString()})]})]})})]}),f.jsxs(Qg,{className:"flex justify-between",children:[f.jsxs(De,{variant:"destructive",onClick:Se,className:"flex items-center gap-2",children:[f.jsx(ko,{className:"h-4 w-4"}),"Delete User"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(De,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),f.jsxs(De,{onClick:ve,className:"flex items-center gap-2",children:[f.jsx(cA,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})}),f.jsx(Ts,{open:z,onOpenChange:$,children:f.jsxs(ts,{className:"max-w-2xl",children:[f.jsx(ro,{children:f.jsx(no,{children:"Create New User"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-name",children:"Full Name *"}),f.jsx(mt,{id:"create-name",value:te,onChange:we=>Y(we.target.value),placeholder:"Enter full name"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-phone",children:"Phone"}),f.jsx(mt,{id:"create-phone",value:se,onChange:we=>ae(we.target.value),placeholder:"Enter phone number"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-email",children:"Email *"}),f.jsx(mt,{id:"create-email",type:"email",value:K,onChange:we=>V(we.target.value),placeholder:"Enter email address"})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-password",children:"Password *"}),f.jsx(mt,{id:"create-password",type:"password",value:G,onChange:we=>Z(we.target.value),placeholder:"Enter password"})]})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-role",children:"Role *"}),f.jsxs(Ei,{value:ee,onValueChange:we=>J(we),children:[f.jsx(Jn,{children:f.jsx(Si,{})}),f.jsxs(ei,{children:[f.jsx(ct,{value:"customer",children:"Customer"}),f.jsx(ct,{value:"restaurant_owner",children:"Restaurant Owner"}),f.jsx(ct,{value:"admin",children:"Admin"})]})]})]}),ee==="restaurant_owner"&&f.jsxs("div",{children:[f.jsx(it,{htmlFor:"create-restaurant",children:"Link to Restaurant"}),f.jsxs(Ei,{value:X||"",onValueChange:ne,children:[f.jsx(Jn,{children:f.jsx(Si,{placeholder:"Select a restaurant (optional)"})}),f.jsx(ei,{children:F.map(we=>f.jsx(ct,{value:we.id,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Kh,{className:"h-4 w-4"}),we.name]})},we.id))})]}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"You can link the user to a restaurant later if needed"})]}),f.jsx("div",{className:"bg-muted p-3 rounded-md",children:f.jsx("p",{className:"text-sm text-muted-foreground",children:"* Required fields. The user will receive an email confirmation to activate their account."})})]}),f.jsxs(Qg,{children:[f.jsx(De,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),f.jsxs(De,{onClick:Ce,className:"flex items-center gap-2",children:[f.jsx(qo,{className:"h-4 w-4"}),"Create User"]})]})]})})]})})},uQ=()=>{const t=Is();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),f.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),f.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),f.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},dQ=new aD,fQ=()=>f.jsx(cD,{client:dQ,children:f.jsx(D9,{children:f.jsxs(B6,{children:[f.jsx(wP,{}),f.jsx(ZP,{}),f.jsx(sL,{children:f.jsxs(ZD,{children:[f.jsx(Mr,{path:"/",element:f.jsx(tF,{})}),f.jsx(Mr,{path:"/auth",element:f.jsx(xF,{})}),f.jsx(Mr,{path:"/home",element:f.jsx(EF,{})}),f.jsx(Mr,{path:"/orders",element:f.jsx(JU,{})}),f.jsx(Mr,{path:"/blog",element:f.jsx(Oz,{})}),f.jsx(Mr,{path:"/profile",element:f.jsx(hz,{})}),f.jsx(Mr,{path:"/restaurant/:id",element:f.jsx(IU,{})}),f.jsx(Mr,{path:"/payment",element:f.jsx($U,{})}),f.jsx(Mr,{path:"/confirmation",element:f.jsx(ZU,{})}),f.jsx(Mr,{path:"/dashboard",element:f.jsx(bV,{})}),f.jsx(Mr,{path:"/dashboard/blog/new",element:f.jsx(J_,{})}),f.jsx(Mr,{path:"/dashboard/blog/edit/:postId",element:f.jsx(J_,{})}),f.jsx(Mr,{path:"/admin",element:f.jsx(rQ,{})}),f.jsx(Mr,{path:"/admin/restaurants",element:f.jsx(sQ,{})}),f.jsx(Mr,{path:"/admin/owners",element:f.jsx(oQ,{})}),f.jsx(Mr,{path:"/admin/orders",element:f.jsx(lQ,{})}),f.jsx(Mr,{path:"/admin/users",element:f.jsx(cQ,{})}),f.jsx(Mr,{path:"*",element:f.jsx(uQ,{})})]})})]})})});_C(document.getElementById("root")).render(f.jsx(fQ,{}));
